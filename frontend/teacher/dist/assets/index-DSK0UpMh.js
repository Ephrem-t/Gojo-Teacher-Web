(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function zw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Dy={exports:{}},mu={},My={exports:{}},Ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Za=Symbol.for("react.element"),Bw=Symbol.for("react.portal"),Uw=Symbol.for("react.fragment"),$w=Symbol.for("react.strict_mode"),Ww=Symbol.for("react.profiler"),Hw=Symbol.for("react.provider"),Vw=Symbol.for("react.context"),Kw=Symbol.for("react.forward_ref"),Gw=Symbol.for("react.suspense"),qw=Symbol.for("react.memo"),Yw=Symbol.for("react.lazy"),Um=Symbol.iterator;function Qw(t){return t===null||typeof t!="object"?null:(t=Um&&t[Um]||t["@@iterator"],typeof t=="function"?t:null)}var Ly={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Fy=Object.assign,zy={};function yo(t,e,n){this.props=t,this.context=e,this.refs=zy,this.updater=n||Ly}yo.prototype.isReactComponent={};yo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};yo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function By(){}By.prototype=yo.prototype;function Sf(t,e,n){this.props=t,this.context=e,this.refs=zy,this.updater=n||Ly}var bf=Sf.prototype=new By;bf.constructor=Sf;Fy(bf,yo.prototype);bf.isPureReactComponent=!0;var $m=Array.isArray,Uy=Object.prototype.hasOwnProperty,Ef={current:null},$y={key:!0,ref:!0,__self:!0,__source:!0};function Wy(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Uy.call(e,r)&&!$y.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:Za,type:t,key:i,ref:o,props:s,_owner:Ef.current}}function Jw(t,e){return{$$typeof:Za,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Cf(t){return typeof t=="object"&&t!==null&&t.$$typeof===Za}function Xw(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Wm=/\/+/g;function ld(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Xw(""+t.key):e.toString(36)}function oc(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Za:case Bw:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+ld(o,0):r,$m(s)?(n="",t!=null&&(n=t.replace(Wm,"$&/")+"/"),oc(s,e,n,"",function(d){return d})):s!=null&&(Cf(s)&&(s=Jw(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Wm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",$m(t))for(var c=0;c<t.length;c++){i=t[c];var u=r+ld(i,c);o+=oc(i,e,n,u,s)}else if(u=Qw(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=r+ld(i,c++),o+=oc(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ml(t,e,n){if(t==null)return t;var r=[],s=0;return oc(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Zw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var vn={current:null},ac={transition:null},e2={ReactCurrentDispatcher:vn,ReactCurrentBatchConfig:ac,ReactCurrentOwner:Ef};function Hy(){throw Error("act(...) is not supported in production builds of React.")}Ge.Children={map:Ml,forEach:function(t,e,n){Ml(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ml(t,function(){e++}),e},toArray:function(t){return Ml(t,function(e){return e})||[]},only:function(t){if(!Cf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ge.Component=yo;Ge.Fragment=Uw;Ge.Profiler=Ww;Ge.PureComponent=Sf;Ge.StrictMode=$w;Ge.Suspense=Gw;Ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=e2;Ge.act=Hy;Ge.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Fy({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Ef.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)Uy.call(e,u)&&!$y.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:Za,type:t.type,key:s,ref:i,props:r,_owner:o}};Ge.createContext=function(t){return t={$$typeof:Vw,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Hw,_context:t},t.Consumer=t};Ge.createElement=Wy;Ge.createFactory=function(t){var e=Wy.bind(null,t);return e.type=t,e};Ge.createRef=function(){return{current:null}};Ge.forwardRef=function(t){return{$$typeof:Kw,render:t}};Ge.isValidElement=Cf;Ge.lazy=function(t){return{$$typeof:Yw,_payload:{_status:-1,_result:t},_init:Zw}};Ge.memo=function(t,e){return{$$typeof:qw,type:t,compare:e===void 0?null:e}};Ge.startTransition=function(t){var e=ac.transition;ac.transition={};try{t()}finally{ac.transition=e}};Ge.unstable_act=Hy;Ge.useCallback=function(t,e){return vn.current.useCallback(t,e)};Ge.useContext=function(t){return vn.current.useContext(t)};Ge.useDebugValue=function(){};Ge.useDeferredValue=function(t){return vn.current.useDeferredValue(t)};Ge.useEffect=function(t,e){return vn.current.useEffect(t,e)};Ge.useId=function(){return vn.current.useId()};Ge.useImperativeHandle=function(t,e,n){return vn.current.useImperativeHandle(t,e,n)};Ge.useInsertionEffect=function(t,e){return vn.current.useInsertionEffect(t,e)};Ge.useLayoutEffect=function(t,e){return vn.current.useLayoutEffect(t,e)};Ge.useMemo=function(t,e){return vn.current.useMemo(t,e)};Ge.useReducer=function(t,e,n){return vn.current.useReducer(t,e,n)};Ge.useRef=function(t){return vn.current.useRef(t)};Ge.useState=function(t){return vn.current.useState(t)};Ge.useSyncExternalStore=function(t,e,n){return vn.current.useSyncExternalStore(t,e,n)};Ge.useTransition=function(){return vn.current.useTransition()};Ge.version="18.3.1";My.exports=Ge;var y=My.exports;const mn=zw(y);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t2=y,n2=Symbol.for("react.element"),r2=Symbol.for("react.fragment"),s2=Object.prototype.hasOwnProperty,i2=t2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o2={key:!0,ref:!0,__self:!0,__source:!0};function Vy(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)s2.call(e,r)&&!o2.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:n2,type:t,key:i,ref:o,props:s,_owner:i2.current}}mu.Fragment=r2;mu.jsx=Vy;mu.jsxs=Vy;Dy.exports=mu;var l=Dy.exports,nh={},Ky={exports:{}},Dn={},Gy={exports:{}},qy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,U){var te=G.length;G.push(U);e:for(;0<te;){var z=te-1>>>1,ae=G[z];if(0<s(ae,U))G[z]=U,G[te]=ae,te=z;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var U=G[0],te=G.pop();if(te!==U){G[0]=te;e:for(var z=0,ae=G.length,_e=ae>>>1;z<_e;){var we=2*(z+1)-1,ue=G[we],L=we+1,ce=G[L];if(0>s(ue,te))L<ae&&0>s(ce,ue)?(G[z]=ce,G[L]=te,z=L):(G[z]=ue,G[we]=te,z=we);else if(L<ae&&0>s(ce,te))G[z]=ce,G[L]=te,z=L;else break e}}return U}function s(G,U){var te=G.sortIndex-U.sortIndex;return te!==0?te:G.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],f=1,p=null,g=3,j=!1,v=!1,N=!1,R=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(G){for(var U=n(d);U!==null;){if(U.callback===null)r(d);else if(U.startTime<=G)r(d),U.sortIndex=U.expirationTime,e(u,U);else break;U=n(d)}}function P(G){if(N=!1,w(G),!v)if(n(u)!==null)v=!0,q(V);else{var U=n(d);U!==null&&ge(P,U.startTime-G)}}function V(G,U){v=!1,N&&(N=!1,b(x),x=-1),j=!0;var te=g;try{for(w(U),p=n(u);p!==null&&(!(p.expirationTime>U)||G&&!T());){var z=p.callback;if(typeof z=="function"){p.callback=null,g=p.priorityLevel;var ae=z(p.expirationTime<=U);U=t.unstable_now(),typeof ae=="function"?p.callback=ae:p===n(u)&&r(u),w(U)}else r(u);p=n(u)}if(p!==null)var _e=!0;else{var we=n(d);we!==null&&ge(P,we.startTime-U),_e=!1}return _e}finally{p=null,g=te,j=!1}}var X=!1,C=null,x=-1,E=5,k=-1;function T(){return!(t.unstable_now()-k<E)}function A(){if(C!==null){var G=t.unstable_now();k=G;var U=!0;try{U=C(!0,G)}finally{U?I():(X=!1,C=null)}}else X=!1}var I;if(typeof _=="function")I=function(){_(A)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,Ee=J.port2;J.port1.onmessage=A,I=function(){Ee.postMessage(null)}}else I=function(){R(A,0)};function q(G){C=G,X||(X=!0,I())}function ge(G,U){x=R(function(){G(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){v||j||(v=!0,q(V))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(G){switch(g){case 1:case 2:case 3:var U=3;break;default:U=g}var te=g;g=U;try{return G()}finally{g=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,U){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var te=g;g=G;try{return U()}finally{g=te}},t.unstable_scheduleCallback=function(G,U,te){var z=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?z+te:z):te=z,G){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=te+ae,G={id:f++,callback:U,priorityLevel:G,startTime:te,expirationTime:ae,sortIndex:-1},te>z?(G.sortIndex=te,e(d,G),n(u)===null&&G===n(d)&&(N?(b(x),x=-1):N=!0,ge(P,te-z))):(G.sortIndex=ae,e(u,G),v||j||(v=!0,q(V))),G},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(G){var U=g;return function(){var te=g;g=U;try{return G.apply(this,arguments)}finally{g=te}}}})(qy);Gy.exports=qy;var a2=Gy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l2=y,On=a2;function oe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Yy=new Set,_a={};function yi(t,e){Zi(t,e),Zi(t+"Capture",e)}function Zi(t,e){for(_a[t]=e,t=0;t<e.length;t++)Yy.add(e[t])}var zr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rh=Object.prototype.hasOwnProperty,c2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hm={},Vm={};function u2(t){return rh.call(Vm,t)?!0:rh.call(Hm,t)?!1:c2.test(t)?Vm[t]=!0:(Hm[t]=!0,!1)}function d2(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function h2(t,e,n,r){if(e===null||typeof e>"u"||d2(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function _n(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var rn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){rn[t]=new _n(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];rn[e]=new _n(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){rn[t]=new _n(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){rn[t]=new _n(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){rn[t]=new _n(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){rn[t]=new _n(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){rn[t]=new _n(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){rn[t]=new _n(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){rn[t]=new _n(t,5,!1,t.toLowerCase(),null,!1,!1)});var If=/[\-:]([a-z])/g;function jf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(If,jf);rn[e]=new _n(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(If,jf);rn[e]=new _n(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(If,jf);rn[e]=new _n(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){rn[t]=new _n(t,1,!1,t.toLowerCase(),null,!1,!1)});rn.xlinkHref=new _n("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){rn[t]=new _n(t,1,!1,t.toLowerCase(),null,!0,!0)});function kf(t,e,n,r){var s=rn.hasOwnProperty(e)?rn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(h2(e,n,s,r)&&(n=null),r||s===null?u2(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Kr=l2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ll=Symbol.for("react.element"),Ni=Symbol.for("react.portal"),Ri=Symbol.for("react.fragment"),Tf=Symbol.for("react.strict_mode"),sh=Symbol.for("react.profiler"),Qy=Symbol.for("react.provider"),Jy=Symbol.for("react.context"),Nf=Symbol.for("react.forward_ref"),ih=Symbol.for("react.suspense"),oh=Symbol.for("react.suspense_list"),Rf=Symbol.for("react.memo"),is=Symbol.for("react.lazy"),Xy=Symbol.for("react.offscreen"),Km=Symbol.iterator;function Lo(t){return t===null||typeof t!="object"?null:(t=Km&&t[Km]||t["@@iterator"],typeof t=="function"?t:null)}var Et=Object.assign,cd;function Xo(t){if(cd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);cd=e&&e[1]||""}return`
`+cd+t}var ud=!1;function dd(t,e){if(!t||ud)return"";ud=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,c=i.length-1;1<=o&&0<=c&&s[o]!==i[c];)c--;for(;1<=o&&0<=c;o--,c--)if(s[o]!==i[c]){if(o!==1||c!==1)do if(o--,c--,0>c||s[o]!==i[c]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{ud=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Xo(t):""}function f2(t){switch(t.tag){case 5:return Xo(t.type);case 16:return Xo("Lazy");case 13:return Xo("Suspense");case 19:return Xo("SuspenseList");case 0:case 2:case 15:return t=dd(t.type,!1),t;case 11:return t=dd(t.type.render,!1),t;case 1:return t=dd(t.type,!0),t;default:return""}}function ah(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ri:return"Fragment";case Ni:return"Portal";case sh:return"Profiler";case Tf:return"StrictMode";case ih:return"Suspense";case oh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Jy:return(t.displayName||"Context")+".Consumer";case Qy:return(t._context.displayName||"Context")+".Provider";case Nf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Rf:return e=t.displayName||null,e!==null?e:ah(t.type)||"Memo";case is:e=t._payload,t=t._init;try{return ah(t(e))}catch{}}return null}function p2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ah(e);case 8:return e===Tf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Cs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Zy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function m2(t){var e=Zy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Fl(t){t._valueTracker||(t._valueTracker=m2(t))}function ex(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Zy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Cc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function lh(t,e){var n=e.checked;return Et({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Gm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Cs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function tx(t,e){e=e.checked,e!=null&&kf(t,"checked",e,!1)}function ch(t,e){tx(t,e);var n=Cs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?uh(t,e.type,n):e.hasOwnProperty("defaultValue")&&uh(t,e.type,Cs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function qm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function uh(t,e,n){(e!=="number"||Cc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Zo=Array.isArray;function Wi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Cs(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function dh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(oe(91));return Et({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ym(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(oe(92));if(Zo(n)){if(1<n.length)throw Error(oe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Cs(n)}}function nx(t,e){var n=Cs(e.value),r=Cs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Qm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function rx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?rx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var zl,sx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(zl=zl||document.createElement("div"),zl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=zl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function wa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var na={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},g2=["Webkit","ms","Moz","O"];Object.keys(na).forEach(function(t){g2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),na[e]=na[t]})});function ix(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||na.hasOwnProperty(t)&&na[t]?(""+e).trim():e+"px"}function ox(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=ix(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var y2=Et({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fh(t,e){if(e){if(y2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(oe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(oe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(oe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(oe(62))}}function ph(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mh=null;function Af(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var gh=null,Hi=null,Vi=null;function Jm(t){if(t=nl(t)){if(typeof gh!="function")throw Error(oe(280));var e=t.stateNode;e&&(e=_u(e),gh(t.stateNode,t.type,e))}}function ax(t){Hi?Vi?Vi.push(t):Vi=[t]:Hi=t}function lx(){if(Hi){var t=Hi,e=Vi;if(Vi=Hi=null,Jm(t),e)for(t=0;t<e.length;t++)Jm(e[t])}}function cx(t,e){return t(e)}function ux(){}var hd=!1;function dx(t,e,n){if(hd)return t(e,n);hd=!0;try{return cx(t,e,n)}finally{hd=!1,(Hi!==null||Vi!==null)&&(ux(),lx())}}function Sa(t,e){var n=t.stateNode;if(n===null)return null;var r=_u(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(oe(231,e,typeof n));return n}var yh=!1;if(zr)try{var Fo={};Object.defineProperty(Fo,"passive",{get:function(){yh=!0}}),window.addEventListener("test",Fo,Fo),window.removeEventListener("test",Fo,Fo)}catch{yh=!1}function x2(t,e,n,r,s,i,o,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var ra=!1,Ic=null,jc=!1,xh=null,v2={onError:function(t){ra=!0,Ic=t}};function _2(t,e,n,r,s,i,o,c,u){ra=!1,Ic=null,x2.apply(v2,arguments)}function w2(t,e,n,r,s,i,o,c,u){if(_2.apply(this,arguments),ra){if(ra){var d=Ic;ra=!1,Ic=null}else throw Error(oe(198));jc||(jc=!0,xh=d)}}function xi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function hx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Xm(t){if(xi(t)!==t)throw Error(oe(188))}function S2(t){var e=t.alternate;if(!e){if(e=xi(t),e===null)throw Error(oe(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Xm(s),t;if(i===r)return Xm(s),e;i=i.sibling}throw Error(oe(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o)throw Error(oe(189))}}if(n.alternate!==r)throw Error(oe(190))}if(n.tag!==3)throw Error(oe(188));return n.stateNode.current===n?t:e}function fx(t){return t=S2(t),t!==null?px(t):null}function px(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=px(t);if(e!==null)return e;t=t.sibling}return null}var mx=On.unstable_scheduleCallback,Zm=On.unstable_cancelCallback,b2=On.unstable_shouldYield,E2=On.unstable_requestPaint,Rt=On.unstable_now,C2=On.unstable_getCurrentPriorityLevel,Pf=On.unstable_ImmediatePriority,gx=On.unstable_UserBlockingPriority,kc=On.unstable_NormalPriority,I2=On.unstable_LowPriority,yx=On.unstable_IdlePriority,gu=null,Sr=null;function j2(t){if(Sr&&typeof Sr.onCommitFiberRoot=="function")try{Sr.onCommitFiberRoot(gu,t,void 0,(t.current.flags&128)===128)}catch{}}var or=Math.clz32?Math.clz32:N2,k2=Math.log,T2=Math.LN2;function N2(t){return t>>>=0,t===0?32:31-(k2(t)/T2|0)|0}var Bl=64,Ul=4194304;function ea(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Tc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~s;c!==0?r=ea(c):(i&=o,i!==0&&(r=ea(i)))}else o=n&~s,o!==0?r=ea(o):i!==0&&(r=ea(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-or(e),s=1<<n,r|=t[n],e&=~s;return r}function R2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function A2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-or(i),c=1<<o,u=s[o];u===-1?(!(c&n)||c&r)&&(s[o]=R2(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function vh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function xx(){var t=Bl;return Bl<<=1,!(Bl&4194240)&&(Bl=64),t}function fd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function el(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-or(e),t[e]=n}function P2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-or(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Of(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-or(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var lt=0;function vx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var _x,Df,wx,Sx,bx,_h=!1,$l=[],hs=null,fs=null,ps=null,ba=new Map,Ea=new Map,as=[],O2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function eg(t,e){switch(t){case"focusin":case"focusout":hs=null;break;case"dragenter":case"dragleave":fs=null;break;case"mouseover":case"mouseout":ps=null;break;case"pointerover":case"pointerout":ba.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ea.delete(e.pointerId)}}function zo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=nl(e),e!==null&&Df(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function D2(t,e,n,r,s){switch(e){case"focusin":return hs=zo(hs,t,e,n,r,s),!0;case"dragenter":return fs=zo(fs,t,e,n,r,s),!0;case"mouseover":return ps=zo(ps,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ba.set(i,zo(ba.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ea.set(i,zo(Ea.get(i)||null,t,e,n,r,s)),!0}return!1}function Ex(t){var e=Qs(t.target);if(e!==null){var n=xi(e);if(n!==null){if(e=n.tag,e===13){if(e=hx(n),e!==null){t.blockedOn=e,bx(t.priority,function(){wx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function lc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=wh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);mh=r,n.target.dispatchEvent(r),mh=null}else return e=nl(n),e!==null&&Df(e),t.blockedOn=n,!1;e.shift()}return!0}function tg(t,e,n){lc(t)&&n.delete(e)}function M2(){_h=!1,hs!==null&&lc(hs)&&(hs=null),fs!==null&&lc(fs)&&(fs=null),ps!==null&&lc(ps)&&(ps=null),ba.forEach(tg),Ea.forEach(tg)}function Bo(t,e){t.blockedOn===e&&(t.blockedOn=null,_h||(_h=!0,On.unstable_scheduleCallback(On.unstable_NormalPriority,M2)))}function Ca(t){function e(s){return Bo(s,t)}if(0<$l.length){Bo($l[0],t);for(var n=1;n<$l.length;n++){var r=$l[n];r.blockedOn===t&&(r.blockedOn=null)}}for(hs!==null&&Bo(hs,t),fs!==null&&Bo(fs,t),ps!==null&&Bo(ps,t),ba.forEach(e),Ea.forEach(e),n=0;n<as.length;n++)r=as[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<as.length&&(n=as[0],n.blockedOn===null);)Ex(n),n.blockedOn===null&&as.shift()}var Ki=Kr.ReactCurrentBatchConfig,Nc=!0;function L2(t,e,n,r){var s=lt,i=Ki.transition;Ki.transition=null;try{lt=1,Mf(t,e,n,r)}finally{lt=s,Ki.transition=i}}function F2(t,e,n,r){var s=lt,i=Ki.transition;Ki.transition=null;try{lt=4,Mf(t,e,n,r)}finally{lt=s,Ki.transition=i}}function Mf(t,e,n,r){if(Nc){var s=wh(t,e,n,r);if(s===null)bd(t,e,r,Rc,n),eg(t,r);else if(D2(s,t,e,n,r))r.stopPropagation();else if(eg(t,r),e&4&&-1<O2.indexOf(t)){for(;s!==null;){var i=nl(s);if(i!==null&&_x(i),i=wh(t,e,n,r),i===null&&bd(t,e,r,Rc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else bd(t,e,r,null,n)}}var Rc=null;function wh(t,e,n,r){if(Rc=null,t=Af(r),t=Qs(t),t!==null)if(e=xi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=hx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Rc=t,null}function Cx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(C2()){case Pf:return 1;case gx:return 4;case kc:case I2:return 16;case yx:return 536870912;default:return 16}default:return 16}}var cs=null,Lf=null,cc=null;function Ix(){if(cc)return cc;var t,e=Lf,n=e.length,r,s="value"in cs?cs.value:cs.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return cc=s.slice(t,1<r?1-r:void 0)}function uc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Wl(){return!0}function ng(){return!1}function Mn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Wl:ng,this.isPropagationStopped=ng,this}return Et(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Wl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Wl)},persist:function(){},isPersistent:Wl}),e}var xo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ff=Mn(xo),tl=Et({},xo,{view:0,detail:0}),z2=Mn(tl),pd,md,Uo,yu=Et({},tl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Uo&&(Uo&&t.type==="mousemove"?(pd=t.screenX-Uo.screenX,md=t.screenY-Uo.screenY):md=pd=0,Uo=t),pd)},movementY:function(t){return"movementY"in t?t.movementY:md}}),rg=Mn(yu),B2=Et({},yu,{dataTransfer:0}),U2=Mn(B2),$2=Et({},tl,{relatedTarget:0}),gd=Mn($2),W2=Et({},xo,{animationName:0,elapsedTime:0,pseudoElement:0}),H2=Mn(W2),V2=Et({},xo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),K2=Mn(V2),G2=Et({},xo,{data:0}),sg=Mn(G2),q2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Y2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Q2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function J2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Q2[t])?!!e[t]:!1}function zf(){return J2}var X2=Et({},tl,{key:function(t){if(t.key){var e=q2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=uc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Y2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zf,charCode:function(t){return t.type==="keypress"?uc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?uc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Z2=Mn(X2),eS=Et({},yu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ig=Mn(eS),tS=Et({},tl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zf}),nS=Mn(tS),rS=Et({},xo,{propertyName:0,elapsedTime:0,pseudoElement:0}),sS=Mn(rS),iS=Et({},yu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),oS=Mn(iS),aS=[9,13,27,32],Bf=zr&&"CompositionEvent"in window,sa=null;zr&&"documentMode"in document&&(sa=document.documentMode);var lS=zr&&"TextEvent"in window&&!sa,jx=zr&&(!Bf||sa&&8<sa&&11>=sa),og=" ",ag=!1;function kx(t,e){switch(t){case"keyup":return aS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ai=!1;function cS(t,e){switch(t){case"compositionend":return Tx(e);case"keypress":return e.which!==32?null:(ag=!0,og);case"textInput":return t=e.data,t===og&&ag?null:t;default:return null}}function uS(t,e){if(Ai)return t==="compositionend"||!Bf&&kx(t,e)?(t=Ix(),cc=Lf=cs=null,Ai=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return jx&&e.locale!=="ko"?null:e.data;default:return null}}var dS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!dS[t.type]:e==="textarea"}function Nx(t,e,n,r){ax(r),e=Ac(e,"onChange"),0<e.length&&(n=new Ff("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ia=null,Ia=null;function hS(t){Ux(t,0)}function xu(t){var e=Di(t);if(ex(e))return t}function fS(t,e){if(t==="change")return e}var Rx=!1;if(zr){var yd;if(zr){var xd="oninput"in document;if(!xd){var cg=document.createElement("div");cg.setAttribute("oninput","return;"),xd=typeof cg.oninput=="function"}yd=xd}else yd=!1;Rx=yd&&(!document.documentMode||9<document.documentMode)}function ug(){ia&&(ia.detachEvent("onpropertychange",Ax),Ia=ia=null)}function Ax(t){if(t.propertyName==="value"&&xu(Ia)){var e=[];Nx(e,Ia,t,Af(t)),dx(hS,e)}}function pS(t,e,n){t==="focusin"?(ug(),ia=e,Ia=n,ia.attachEvent("onpropertychange",Ax)):t==="focusout"&&ug()}function mS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return xu(Ia)}function gS(t,e){if(t==="click")return xu(e)}function yS(t,e){if(t==="input"||t==="change")return xu(e)}function xS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var cr=typeof Object.is=="function"?Object.is:xS;function ja(t,e){if(cr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!rh.call(e,s)||!cr(t[s],e[s]))return!1}return!0}function dg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function hg(t,e){var n=dg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=dg(n)}}function Px(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Px(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ox(){for(var t=window,e=Cc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Cc(t.document)}return e}function Uf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function vS(t){var e=Ox(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Px(n.ownerDocument.documentElement,n)){if(r!==null&&Uf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=hg(n,i);var o=hg(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var _S=zr&&"documentMode"in document&&11>=document.documentMode,Pi=null,Sh=null,oa=null,bh=!1;function fg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;bh||Pi==null||Pi!==Cc(r)||(r=Pi,"selectionStart"in r&&Uf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),oa&&ja(oa,r)||(oa=r,r=Ac(Sh,"onSelect"),0<r.length&&(e=new Ff("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Pi)))}function Hl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Oi={animationend:Hl("Animation","AnimationEnd"),animationiteration:Hl("Animation","AnimationIteration"),animationstart:Hl("Animation","AnimationStart"),transitionend:Hl("Transition","TransitionEnd")},vd={},Dx={};zr&&(Dx=document.createElement("div").style,"AnimationEvent"in window||(delete Oi.animationend.animation,delete Oi.animationiteration.animation,delete Oi.animationstart.animation),"TransitionEvent"in window||delete Oi.transitionend.transition);function vu(t){if(vd[t])return vd[t];if(!Oi[t])return t;var e=Oi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Dx)return vd[t]=e[n];return t}var Mx=vu("animationend"),Lx=vu("animationiteration"),Fx=vu("animationstart"),zx=vu("transitionend"),Bx=new Map,pg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function As(t,e){Bx.set(t,e),yi(e,[t])}for(var _d=0;_d<pg.length;_d++){var wd=pg[_d],wS=wd.toLowerCase(),SS=wd[0].toUpperCase()+wd.slice(1);As(wS,"on"+SS)}As(Mx,"onAnimationEnd");As(Lx,"onAnimationIteration");As(Fx,"onAnimationStart");As("dblclick","onDoubleClick");As("focusin","onFocus");As("focusout","onBlur");As(zx,"onTransitionEnd");Zi("onMouseEnter",["mouseout","mouseover"]);Zi("onMouseLeave",["mouseout","mouseover"]);Zi("onPointerEnter",["pointerout","pointerover"]);Zi("onPointerLeave",["pointerout","pointerover"]);yi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yi("onBeforeInput",["compositionend","keypress","textInput","paste"]);yi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ta="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bS=new Set("cancel close invalid load scroll toggle".split(" ").concat(ta));function mg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,w2(r,e,void 0,t),t.currentTarget=null}function Ux(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;mg(s,c,d),i=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,d=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;mg(s,c,d),i=u}}}if(jc)throw t=xh,jc=!1,xh=null,t}function gt(t,e){var n=e[kh];n===void 0&&(n=e[kh]=new Set);var r=t+"__bubble";n.has(r)||($x(e,t,2,!1),n.add(r))}function Sd(t,e,n){var r=0;e&&(r|=4),$x(n,t,r,e)}var Vl="_reactListening"+Math.random().toString(36).slice(2);function ka(t){if(!t[Vl]){t[Vl]=!0,Yy.forEach(function(n){n!=="selectionchange"&&(bS.has(n)||Sd(n,!1,t),Sd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Vl]||(e[Vl]=!0,Sd("selectionchange",!1,e))}}function $x(t,e,n,r){switch(Cx(e)){case 1:var s=L2;break;case 4:s=F2;break;default:s=Mf}n=s.bind(null,e,n,t),s=void 0,!yh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function bd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;c!==null;){if(o=Qs(c),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}c=c.parentNode}}r=r.return}dx(function(){var d=i,f=Af(n),p=[];e:{var g=Bx.get(t);if(g!==void 0){var j=Ff,v=t;switch(t){case"keypress":if(uc(n)===0)break e;case"keydown":case"keyup":j=Z2;break;case"focusin":v="focus",j=gd;break;case"focusout":v="blur",j=gd;break;case"beforeblur":case"afterblur":j=gd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=rg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=U2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=nS;break;case Mx:case Lx:case Fx:j=H2;break;case zx:j=sS;break;case"scroll":j=z2;break;case"wheel":j=oS;break;case"copy":case"cut":case"paste":j=K2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=ig}var N=(e&4)!==0,R=!N&&t==="scroll",b=N?g!==null?g+"Capture":null:g;N=[];for(var _=d,w;_!==null;){w=_;var P=w.stateNode;if(w.tag===5&&P!==null&&(w=P,b!==null&&(P=Sa(_,b),P!=null&&N.push(Ta(_,P,w)))),R)break;_=_.return}0<N.length&&(g=new j(g,v,null,n,f),p.push({event:g,listeners:N}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",j=t==="mouseout"||t==="pointerout",g&&n!==mh&&(v=n.relatedTarget||n.fromElement)&&(Qs(v)||v[Br]))break e;if((j||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,j?(v=n.relatedTarget||n.toElement,j=d,v=v?Qs(v):null,v!==null&&(R=xi(v),v!==R||v.tag!==5&&v.tag!==6)&&(v=null)):(j=null,v=d),j!==v)){if(N=rg,P="onMouseLeave",b="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(N=ig,P="onPointerLeave",b="onPointerEnter",_="pointer"),R=j==null?g:Di(j),w=v==null?g:Di(v),g=new N(P,_+"leave",j,n,f),g.target=R,g.relatedTarget=w,P=null,Qs(f)===d&&(N=new N(b,_+"enter",v,n,f),N.target=w,N.relatedTarget=R,P=N),R=P,j&&v)t:{for(N=j,b=v,_=0,w=N;w;w=Ii(w))_++;for(w=0,P=b;P;P=Ii(P))w++;for(;0<_-w;)N=Ii(N),_--;for(;0<w-_;)b=Ii(b),w--;for(;_--;){if(N===b||b!==null&&N===b.alternate)break t;N=Ii(N),b=Ii(b)}N=null}else N=null;j!==null&&gg(p,g,j,N,!1),v!==null&&R!==null&&gg(p,R,v,N,!0)}}e:{if(g=d?Di(d):window,j=g.nodeName&&g.nodeName.toLowerCase(),j==="select"||j==="input"&&g.type==="file")var V=fS;else if(lg(g))if(Rx)V=yS;else{V=mS;var X=pS}else(j=g.nodeName)&&j.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(V=gS);if(V&&(V=V(t,d))){Nx(p,V,n,f);break e}X&&X(t,g,d),t==="focusout"&&(X=g._wrapperState)&&X.controlled&&g.type==="number"&&uh(g,"number",g.value)}switch(X=d?Di(d):window,t){case"focusin":(lg(X)||X.contentEditable==="true")&&(Pi=X,Sh=d,oa=null);break;case"focusout":oa=Sh=Pi=null;break;case"mousedown":bh=!0;break;case"contextmenu":case"mouseup":case"dragend":bh=!1,fg(p,n,f);break;case"selectionchange":if(_S)break;case"keydown":case"keyup":fg(p,n,f)}var C;if(Bf)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Ai?kx(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(jx&&n.locale!=="ko"&&(Ai||x!=="onCompositionStart"?x==="onCompositionEnd"&&Ai&&(C=Ix()):(cs=f,Lf="value"in cs?cs.value:cs.textContent,Ai=!0)),X=Ac(d,x),0<X.length&&(x=new sg(x,t,null,n,f),p.push({event:x,listeners:X}),C?x.data=C:(C=Tx(n),C!==null&&(x.data=C)))),(C=lS?cS(t,n):uS(t,n))&&(d=Ac(d,"onBeforeInput"),0<d.length&&(f=new sg("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:d}),f.data=C))}Ux(p,e)})}function Ta(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ac(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Sa(t,n),i!=null&&r.unshift(Ta(t,i,s)),i=Sa(t,e),i!=null&&r.push(Ta(t,i,s))),t=t.return}return r}function Ii(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function gg(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=Sa(n,i),u!=null&&o.unshift(Ta(n,u,c))):s||(u=Sa(n,i),u!=null&&o.push(Ta(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var ES=/\r\n?/g,CS=/\u0000|\uFFFD/g;function yg(t){return(typeof t=="string"?t:""+t).replace(ES,`
`).replace(CS,"")}function Kl(t,e,n){if(e=yg(e),yg(t)!==e&&n)throw Error(oe(425))}function Pc(){}var Eh=null,Ch=null;function Ih(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var jh=typeof setTimeout=="function"?setTimeout:void 0,IS=typeof clearTimeout=="function"?clearTimeout:void 0,xg=typeof Promise=="function"?Promise:void 0,jS=typeof queueMicrotask=="function"?queueMicrotask:typeof xg<"u"?function(t){return xg.resolve(null).then(t).catch(kS)}:jh;function kS(t){setTimeout(function(){throw t})}function Ed(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ca(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ca(e)}function ms(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function vg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var vo=Math.random().toString(36).slice(2),_r="__reactFiber$"+vo,Na="__reactProps$"+vo,Br="__reactContainer$"+vo,kh="__reactEvents$"+vo,TS="__reactListeners$"+vo,NS="__reactHandles$"+vo;function Qs(t){var e=t[_r];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Br]||n[_r]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=vg(t);t!==null;){if(n=t[_r])return n;t=vg(t)}return e}t=n,n=t.parentNode}return null}function nl(t){return t=t[_r]||t[Br],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Di(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(oe(33))}function _u(t){return t[Na]||null}var Th=[],Mi=-1;function Ps(t){return{current:t}}function yt(t){0>Mi||(t.current=Th[Mi],Th[Mi]=null,Mi--)}function pt(t,e){Mi++,Th[Mi]=t.current,t.current=e}var Is={},un=Ps(Is),Cn=Ps(!1),ai=Is;function eo(t,e){var n=t.type.contextTypes;if(!n)return Is;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function In(t){return t=t.childContextTypes,t!=null}function Oc(){yt(Cn),yt(un)}function _g(t,e,n){if(un.current!==Is)throw Error(oe(168));pt(un,e),pt(Cn,n)}function Wx(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(oe(108,p2(t)||"Unknown",s));return Et({},n,r)}function Dc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Is,ai=un.current,pt(un,t),pt(Cn,Cn.current),!0}function wg(t,e,n){var r=t.stateNode;if(!r)throw Error(oe(169));n?(t=Wx(t,e,ai),r.__reactInternalMemoizedMergedChildContext=t,yt(Cn),yt(un),pt(un,t)):yt(Cn),pt(Cn,n)}var Rr=null,wu=!1,Cd=!1;function Hx(t){Rr===null?Rr=[t]:Rr.push(t)}function RS(t){wu=!0,Hx(t)}function Os(){if(!Cd&&Rr!==null){Cd=!0;var t=0,e=lt;try{var n=Rr;for(lt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Rr=null,wu=!1}catch(s){throw Rr!==null&&(Rr=Rr.slice(t+1)),mx(Pf,Os),s}finally{lt=e,Cd=!1}}return null}var Li=[],Fi=0,Mc=null,Lc=0,$n=[],Wn=0,li=null,Pr=1,Or="";function Vs(t,e){Li[Fi++]=Lc,Li[Fi++]=Mc,Mc=t,Lc=e}function Vx(t,e,n){$n[Wn++]=Pr,$n[Wn++]=Or,$n[Wn++]=li,li=t;var r=Pr;t=Or;var s=32-or(r)-1;r&=~(1<<s),n+=1;var i=32-or(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Pr=1<<32-or(e)+s|n<<s|r,Or=i+t}else Pr=1<<i|n<<s|r,Or=t}function $f(t){t.return!==null&&(Vs(t,1),Vx(t,1,0))}function Wf(t){for(;t===Mc;)Mc=Li[--Fi],Li[Fi]=null,Lc=Li[--Fi],Li[Fi]=null;for(;t===li;)li=$n[--Wn],$n[Wn]=null,Or=$n[--Wn],$n[Wn]=null,Pr=$n[--Wn],$n[Wn]=null}var Pn=null,An=null,vt=!1,tr=null;function Kx(t,e){var n=Hn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Sg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Pn=t,An=ms(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Pn=t,An=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=li!==null?{id:Pr,overflow:Or}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Hn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Pn=t,An=null,!0):!1;default:return!1}}function Nh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Rh(t){if(vt){var e=An;if(e){var n=e;if(!Sg(t,e)){if(Nh(t))throw Error(oe(418));e=ms(n.nextSibling);var r=Pn;e&&Sg(t,e)?Kx(r,n):(t.flags=t.flags&-4097|2,vt=!1,Pn=t)}}else{if(Nh(t))throw Error(oe(418));t.flags=t.flags&-4097|2,vt=!1,Pn=t}}}function bg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Pn=t}function Gl(t){if(t!==Pn)return!1;if(!vt)return bg(t),vt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ih(t.type,t.memoizedProps)),e&&(e=An)){if(Nh(t))throw Gx(),Error(oe(418));for(;e;)Kx(t,e),e=ms(e.nextSibling)}if(bg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(oe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){An=ms(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}An=null}}else An=Pn?ms(t.stateNode.nextSibling):null;return!0}function Gx(){for(var t=An;t;)t=ms(t.nextSibling)}function to(){An=Pn=null,vt=!1}function Hf(t){tr===null?tr=[t]:tr.push(t)}var AS=Kr.ReactCurrentBatchConfig;function $o(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(oe(309));var r=n.stateNode}if(!r)throw Error(oe(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var c=s.refs;o===null?delete c[i]:c[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(oe(284));if(!n._owner)throw Error(oe(290,t))}return t}function ql(t,e){throw t=Object.prototype.toString.call(e),Error(oe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Eg(t){var e=t._init;return e(t._payload)}function qx(t){function e(b,_){if(t){var w=b.deletions;w===null?(b.deletions=[_],b.flags|=16):w.push(_)}}function n(b,_){if(!t)return null;for(;_!==null;)e(b,_),_=_.sibling;return null}function r(b,_){for(b=new Map;_!==null;)_.key!==null?b.set(_.key,_):b.set(_.index,_),_=_.sibling;return b}function s(b,_){return b=vs(b,_),b.index=0,b.sibling=null,b}function i(b,_,w){return b.index=w,t?(w=b.alternate,w!==null?(w=w.index,w<_?(b.flags|=2,_):w):(b.flags|=2,_)):(b.flags|=1048576,_)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function c(b,_,w,P){return _===null||_.tag!==6?(_=Ad(w,b.mode,P),_.return=b,_):(_=s(_,w),_.return=b,_)}function u(b,_,w,P){var V=w.type;return V===Ri?f(b,_,w.props.children,P,w.key):_!==null&&(_.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===is&&Eg(V)===_.type)?(P=s(_,w.props),P.ref=$o(b,_,w),P.return=b,P):(P=yc(w.type,w.key,w.props,null,b.mode,P),P.ref=$o(b,_,w),P.return=b,P)}function d(b,_,w,P){return _===null||_.tag!==4||_.stateNode.containerInfo!==w.containerInfo||_.stateNode.implementation!==w.implementation?(_=Pd(w,b.mode,P),_.return=b,_):(_=s(_,w.children||[]),_.return=b,_)}function f(b,_,w,P,V){return _===null||_.tag!==7?(_=ri(w,b.mode,P,V),_.return=b,_):(_=s(_,w),_.return=b,_)}function p(b,_,w){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Ad(""+_,b.mode,w),_.return=b,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ll:return w=yc(_.type,_.key,_.props,null,b.mode,w),w.ref=$o(b,null,_),w.return=b,w;case Ni:return _=Pd(_,b.mode,w),_.return=b,_;case is:var P=_._init;return p(b,P(_._payload),w)}if(Zo(_)||Lo(_))return _=ri(_,b.mode,w,null),_.return=b,_;ql(b,_)}return null}function g(b,_,w,P){var V=_!==null?_.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return V!==null?null:c(b,_,""+w,P);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ll:return w.key===V?u(b,_,w,P):null;case Ni:return w.key===V?d(b,_,w,P):null;case is:return V=w._init,g(b,_,V(w._payload),P)}if(Zo(w)||Lo(w))return V!==null?null:f(b,_,w,P,null);ql(b,w)}return null}function j(b,_,w,P,V){if(typeof P=="string"&&P!==""||typeof P=="number")return b=b.get(w)||null,c(_,b,""+P,V);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Ll:return b=b.get(P.key===null?w:P.key)||null,u(_,b,P,V);case Ni:return b=b.get(P.key===null?w:P.key)||null,d(_,b,P,V);case is:var X=P._init;return j(b,_,w,X(P._payload),V)}if(Zo(P)||Lo(P))return b=b.get(w)||null,f(_,b,P,V,null);ql(_,P)}return null}function v(b,_,w,P){for(var V=null,X=null,C=_,x=_=0,E=null;C!==null&&x<w.length;x++){C.index>x?(E=C,C=null):E=C.sibling;var k=g(b,C,w[x],P);if(k===null){C===null&&(C=E);break}t&&C&&k.alternate===null&&e(b,C),_=i(k,_,x),X===null?V=k:X.sibling=k,X=k,C=E}if(x===w.length)return n(b,C),vt&&Vs(b,x),V;if(C===null){for(;x<w.length;x++)C=p(b,w[x],P),C!==null&&(_=i(C,_,x),X===null?V=C:X.sibling=C,X=C);return vt&&Vs(b,x),V}for(C=r(b,C);x<w.length;x++)E=j(C,b,x,w[x],P),E!==null&&(t&&E.alternate!==null&&C.delete(E.key===null?x:E.key),_=i(E,_,x),X===null?V=E:X.sibling=E,X=E);return t&&C.forEach(function(T){return e(b,T)}),vt&&Vs(b,x),V}function N(b,_,w,P){var V=Lo(w);if(typeof V!="function")throw Error(oe(150));if(w=V.call(w),w==null)throw Error(oe(151));for(var X=V=null,C=_,x=_=0,E=null,k=w.next();C!==null&&!k.done;x++,k=w.next()){C.index>x?(E=C,C=null):E=C.sibling;var T=g(b,C,k.value,P);if(T===null){C===null&&(C=E);break}t&&C&&T.alternate===null&&e(b,C),_=i(T,_,x),X===null?V=T:X.sibling=T,X=T,C=E}if(k.done)return n(b,C),vt&&Vs(b,x),V;if(C===null){for(;!k.done;x++,k=w.next())k=p(b,k.value,P),k!==null&&(_=i(k,_,x),X===null?V=k:X.sibling=k,X=k);return vt&&Vs(b,x),V}for(C=r(b,C);!k.done;x++,k=w.next())k=j(C,b,x,k.value,P),k!==null&&(t&&k.alternate!==null&&C.delete(k.key===null?x:k.key),_=i(k,_,x),X===null?V=k:X.sibling=k,X=k);return t&&C.forEach(function(A){return e(b,A)}),vt&&Vs(b,x),V}function R(b,_,w,P){if(typeof w=="object"&&w!==null&&w.type===Ri&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Ll:e:{for(var V=w.key,X=_;X!==null;){if(X.key===V){if(V=w.type,V===Ri){if(X.tag===7){n(b,X.sibling),_=s(X,w.props.children),_.return=b,b=_;break e}}else if(X.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===is&&Eg(V)===X.type){n(b,X.sibling),_=s(X,w.props),_.ref=$o(b,X,w),_.return=b,b=_;break e}n(b,X);break}else e(b,X);X=X.sibling}w.type===Ri?(_=ri(w.props.children,b.mode,P,w.key),_.return=b,b=_):(P=yc(w.type,w.key,w.props,null,b.mode,P),P.ref=$o(b,_,w),P.return=b,b=P)}return o(b);case Ni:e:{for(X=w.key;_!==null;){if(_.key===X)if(_.tag===4&&_.stateNode.containerInfo===w.containerInfo&&_.stateNode.implementation===w.implementation){n(b,_.sibling),_=s(_,w.children||[]),_.return=b,b=_;break e}else{n(b,_);break}else e(b,_);_=_.sibling}_=Pd(w,b.mode,P),_.return=b,b=_}return o(b);case is:return X=w._init,R(b,_,X(w._payload),P)}if(Zo(w))return v(b,_,w,P);if(Lo(w))return N(b,_,w,P);ql(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,_!==null&&_.tag===6?(n(b,_.sibling),_=s(_,w),_.return=b,b=_):(n(b,_),_=Ad(w,b.mode,P),_.return=b,b=_),o(b)):n(b,_)}return R}var no=qx(!0),Yx=qx(!1),Fc=Ps(null),zc=null,zi=null,Vf=null;function Kf(){Vf=zi=zc=null}function Gf(t){var e=Fc.current;yt(Fc),t._currentValue=e}function Ah(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Gi(t,e){zc=t,Vf=zi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(bn=!0),t.firstContext=null)}function Gn(t){var e=t._currentValue;if(Vf!==t)if(t={context:t,memoizedValue:e,next:null},zi===null){if(zc===null)throw Error(oe(308));zi=t,zc.dependencies={lanes:0,firstContext:t}}else zi=zi.next=t;return e}var Js=null;function qf(t){Js===null?Js=[t]:Js.push(t)}function Qx(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,qf(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ur(t,r)}function Ur(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var os=!1;function Yf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Jx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Mr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function gs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,tt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Ur(t,n)}return s=r.interleaved,s===null?(e.next=e,qf(r)):(e.next=s.next,s.next=e),r.interleaved=e,Ur(t,n)}function dc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Of(t,n)}}function Cg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Bc(t,e,n,r){var s=t.updateQueue;os=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==o&&(c===null?f.firstBaseUpdate=d:c.next=d,f.lastBaseUpdate=u))}if(i!==null){var p=s.baseState;o=0,f=d=u=null,c=i;do{var g=c.lane,j=c.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:j,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var v=t,N=c;switch(g=e,j=n,N.tag){case 1:if(v=N.payload,typeof v=="function"){p=v.call(j,p,g);break e}p=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=N.payload,g=typeof v=="function"?v.call(j,p,g):v,g==null)break e;p=Et({},p,g);break e;case 2:os=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[c]:g.push(c))}else j={eventTime:j,lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(d=f=j,u=p):f=f.next=j,o|=g;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;g=c,c=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=p),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ui|=o,t.lanes=o,t.memoizedState=p}}function Ig(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(oe(191,s));s.call(r)}}}var rl={},br=Ps(rl),Ra=Ps(rl),Aa=Ps(rl);function Xs(t){if(t===rl)throw Error(oe(174));return t}function Qf(t,e){switch(pt(Aa,e),pt(Ra,t),pt(br,rl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:hh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=hh(e,t)}yt(br),pt(br,e)}function ro(){yt(br),yt(Ra),yt(Aa)}function Xx(t){Xs(Aa.current);var e=Xs(br.current),n=hh(e,t.type);e!==n&&(pt(Ra,t),pt(br,n))}function Jf(t){Ra.current===t&&(yt(br),yt(Ra))}var wt=Ps(0);function Uc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Id=[];function Xf(){for(var t=0;t<Id.length;t++)Id[t]._workInProgressVersionPrimary=null;Id.length=0}var hc=Kr.ReactCurrentDispatcher,jd=Kr.ReactCurrentBatchConfig,ci=0,St=null,Ft=null,Gt=null,$c=!1,aa=!1,Pa=0,PS=0;function on(){throw Error(oe(321))}function Zf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!cr(t[n],e[n]))return!1;return!0}function ep(t,e,n,r,s,i){if(ci=i,St=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,hc.current=t===null||t.memoizedState===null?LS:FS,t=n(r,s),aa){i=0;do{if(aa=!1,Pa=0,25<=i)throw Error(oe(301));i+=1,Gt=Ft=null,e.updateQueue=null,hc.current=zS,t=n(r,s)}while(aa)}if(hc.current=Wc,e=Ft!==null&&Ft.next!==null,ci=0,Gt=Ft=St=null,$c=!1,e)throw Error(oe(300));return t}function tp(){var t=Pa!==0;return Pa=0,t}function yr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?St.memoizedState=Gt=t:Gt=Gt.next=t,Gt}function qn(){if(Ft===null){var t=St.alternate;t=t!==null?t.memoizedState:null}else t=Ft.next;var e=Gt===null?St.memoizedState:Gt.next;if(e!==null)Gt=e,Ft=t;else{if(t===null)throw Error(oe(310));Ft=t,t={memoizedState:Ft.memoizedState,baseState:Ft.baseState,baseQueue:Ft.baseQueue,queue:Ft.queue,next:null},Gt===null?St.memoizedState=Gt=t:Gt=Gt.next=t}return Gt}function Oa(t,e){return typeof e=="function"?e(t):e}function kd(t){var e=qn(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var r=Ft,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=o=null,u=null,d=i;do{var f=d.lane;if((ci&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=p,o=r):u=u.next=p,St.lanes|=f,ui|=f}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=c,cr(r,e.memoizedState)||(bn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,St.lanes|=i,ui|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Td(t){var e=qn(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);cr(i,e.memoizedState)||(bn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Zx(){}function e1(t,e){var n=St,r=qn(),s=e(),i=!cr(r.memoizedState,s);if(i&&(r.memoizedState=s,bn=!0),r=r.queue,np(r1.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Gt!==null&&Gt.memoizedState.tag&1){if(n.flags|=2048,Da(9,n1.bind(null,n,r,s,e),void 0,null),Yt===null)throw Error(oe(349));ci&30||t1(n,e,s)}return s}function t1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=St.updateQueue,e===null?(e={lastEffect:null,stores:null},St.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function n1(t,e,n,r){e.value=n,e.getSnapshot=r,s1(e)&&i1(t)}function r1(t,e,n){return n(function(){s1(e)&&i1(t)})}function s1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!cr(t,n)}catch{return!0}}function i1(t){var e=Ur(t,1);e!==null&&ar(e,t,1,-1)}function jg(t){var e=yr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:t},e.queue=t,t=t.dispatch=MS.bind(null,St,t),[e.memoizedState,t]}function Da(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=St.updateQueue,e===null?(e={lastEffect:null,stores:null},St.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function o1(){return qn().memoizedState}function fc(t,e,n,r){var s=yr();St.flags|=t,s.memoizedState=Da(1|e,n,void 0,r===void 0?null:r)}function Su(t,e,n,r){var s=qn();r=r===void 0?null:r;var i=void 0;if(Ft!==null){var o=Ft.memoizedState;if(i=o.destroy,r!==null&&Zf(r,o.deps)){s.memoizedState=Da(e,n,i,r);return}}St.flags|=t,s.memoizedState=Da(1|e,n,i,r)}function kg(t,e){return fc(8390656,8,t,e)}function np(t,e){return Su(2048,8,t,e)}function a1(t,e){return Su(4,2,t,e)}function l1(t,e){return Su(4,4,t,e)}function c1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function u1(t,e,n){return n=n!=null?n.concat([t]):null,Su(4,4,c1.bind(null,e,t),n)}function rp(){}function d1(t,e){var n=qn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Zf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function h1(t,e){var n=qn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Zf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function f1(t,e,n){return ci&21?(cr(n,e)||(n=xx(),St.lanes|=n,ui|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,bn=!0),t.memoizedState=n)}function OS(t,e){var n=lt;lt=n!==0&&4>n?n:4,t(!0);var r=jd.transition;jd.transition={};try{t(!1),e()}finally{lt=n,jd.transition=r}}function p1(){return qn().memoizedState}function DS(t,e,n){var r=xs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},m1(t))g1(e,n);else if(n=Qx(t,e,n,r),n!==null){var s=yn();ar(n,t,r,s),y1(n,e,r)}}function MS(t,e,n){var r=xs(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(m1(t))g1(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,c=i(o,n);if(s.hasEagerState=!0,s.eagerState=c,cr(c,o)){var u=e.interleaved;u===null?(s.next=s,qf(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Qx(t,e,s,r),n!==null&&(s=yn(),ar(n,t,r,s),y1(n,e,r))}}function m1(t){var e=t.alternate;return t===St||e!==null&&e===St}function g1(t,e){aa=$c=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function y1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Of(t,n)}}var Wc={readContext:Gn,useCallback:on,useContext:on,useEffect:on,useImperativeHandle:on,useInsertionEffect:on,useLayoutEffect:on,useMemo:on,useReducer:on,useRef:on,useState:on,useDebugValue:on,useDeferredValue:on,useTransition:on,useMutableSource:on,useSyncExternalStore:on,useId:on,unstable_isNewReconciler:!1},LS={readContext:Gn,useCallback:function(t,e){return yr().memoizedState=[t,e===void 0?null:e],t},useContext:Gn,useEffect:kg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,fc(4194308,4,c1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return fc(4194308,4,t,e)},useInsertionEffect:function(t,e){return fc(4,2,t,e)},useMemo:function(t,e){var n=yr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=yr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=DS.bind(null,St,t),[r.memoizedState,t]},useRef:function(t){var e=yr();return t={current:t},e.memoizedState=t},useState:jg,useDebugValue:rp,useDeferredValue:function(t){return yr().memoizedState=t},useTransition:function(){var t=jg(!1),e=t[0];return t=OS.bind(null,t[1]),yr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=St,s=yr();if(vt){if(n===void 0)throw Error(oe(407));n=n()}else{if(n=e(),Yt===null)throw Error(oe(349));ci&30||t1(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,kg(r1.bind(null,r,i,t),[t]),r.flags|=2048,Da(9,n1.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=yr(),e=Yt.identifierPrefix;if(vt){var n=Or,r=Pr;n=(r&~(1<<32-or(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Pa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=PS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},FS={readContext:Gn,useCallback:d1,useContext:Gn,useEffect:np,useImperativeHandle:u1,useInsertionEffect:a1,useLayoutEffect:l1,useMemo:h1,useReducer:kd,useRef:o1,useState:function(){return kd(Oa)},useDebugValue:rp,useDeferredValue:function(t){var e=qn();return f1(e,Ft.memoizedState,t)},useTransition:function(){var t=kd(Oa)[0],e=qn().memoizedState;return[t,e]},useMutableSource:Zx,useSyncExternalStore:e1,useId:p1,unstable_isNewReconciler:!1},zS={readContext:Gn,useCallback:d1,useContext:Gn,useEffect:np,useImperativeHandle:u1,useInsertionEffect:a1,useLayoutEffect:l1,useMemo:h1,useReducer:Td,useRef:o1,useState:function(){return Td(Oa)},useDebugValue:rp,useDeferredValue:function(t){var e=qn();return Ft===null?e.memoizedState=t:f1(e,Ft.memoizedState,t)},useTransition:function(){var t=Td(Oa)[0],e=qn().memoizedState;return[t,e]},useMutableSource:Zx,useSyncExternalStore:e1,useId:p1,unstable_isNewReconciler:!1};function Zn(t,e){if(t&&t.defaultProps){e=Et({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ph(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Et({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var bu={isMounted:function(t){return(t=t._reactInternals)?xi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=yn(),s=xs(t),i=Mr(r,s);i.payload=e,n!=null&&(i.callback=n),e=gs(t,i,s),e!==null&&(ar(e,t,s,r),dc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=yn(),s=xs(t),i=Mr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=gs(t,i,s),e!==null&&(ar(e,t,s,r),dc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=yn(),r=xs(t),s=Mr(n,r);s.tag=2,e!=null&&(s.callback=e),e=gs(t,s,r),e!==null&&(ar(e,t,r,n),dc(e,t,r))}};function Tg(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ja(n,r)||!ja(s,i):!0}function x1(t,e,n){var r=!1,s=Is,i=e.contextType;return typeof i=="object"&&i!==null?i=Gn(i):(s=In(e)?ai:un.current,r=e.contextTypes,i=(r=r!=null)?eo(t,s):Is),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=bu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Ng(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&bu.enqueueReplaceState(e,e.state,null)}function Oh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Yf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Gn(i):(i=In(e)?ai:un.current,s.context=eo(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Ph(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&bu.enqueueReplaceState(s,s.state,null),Bc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function so(t,e){try{var n="",r=e;do n+=f2(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Nd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Dh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var BS=typeof WeakMap=="function"?WeakMap:Map;function v1(t,e,n){n=Mr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Vc||(Vc=!0,Vh=r),Dh(t,e)},n}function _1(t,e,n){n=Mr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Dh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Dh(t,e),typeof r!="function"&&(ys===null?ys=new Set([this]):ys.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Rg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new BS;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=eb.bind(null,t,e,n),e.then(t,t))}function Ag(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Pg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Mr(-1,1),e.tag=2,gs(n,e,1))),n.lanes|=1),t)}var US=Kr.ReactCurrentOwner,bn=!1;function fn(t,e,n,r){e.child=t===null?Yx(e,null,n,r):no(e,t.child,n,r)}function Og(t,e,n,r,s){n=n.render;var i=e.ref;return Gi(e,s),r=ep(t,e,n,r,i,s),n=tp(),t!==null&&!bn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,$r(t,e,s)):(vt&&n&&$f(e),e.flags|=1,fn(t,e,r,s),e.child)}function Dg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!dp(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,w1(t,e,i,r,s)):(t=yc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ja,n(o,r)&&t.ref===e.ref)return $r(t,e,s)}return e.flags|=1,t=vs(i,r),t.ref=e.ref,t.return=e,e.child=t}function w1(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ja(i,r)&&t.ref===e.ref)if(bn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(bn=!0);else return e.lanes=t.lanes,$r(t,e,s)}return Mh(t,e,n,r,s)}function S1(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},pt(Ui,Rn),Rn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,pt(Ui,Rn),Rn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,pt(Ui,Rn),Rn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,pt(Ui,Rn),Rn|=r;return fn(t,e,s,n),e.child}function b1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Mh(t,e,n,r,s){var i=In(n)?ai:un.current;return i=eo(e,i),Gi(e,s),n=ep(t,e,n,r,i,s),r=tp(),t!==null&&!bn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,$r(t,e,s)):(vt&&r&&$f(e),e.flags|=1,fn(t,e,n,s),e.child)}function Mg(t,e,n,r,s){if(In(n)){var i=!0;Dc(e)}else i=!1;if(Gi(e,s),e.stateNode===null)pc(t,e),x1(e,n,r),Oh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Gn(d):(d=In(n)?ai:un.current,d=eo(e,d));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==d)&&Ng(e,o,r,d),os=!1;var g=e.memoizedState;o.state=g,Bc(e,r,o,s),u=e.memoizedState,c!==r||g!==u||Cn.current||os?(typeof f=="function"&&(Ph(e,n,f,r),u=e.memoizedState),(c=os||Tg(e,n,c,r,g,u,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Jx(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:Zn(e.type,c),o.props=d,p=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Gn(u):(u=In(n)?ai:un.current,u=eo(e,u));var j=n.getDerivedStateFromProps;(f=typeof j=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==p||g!==u)&&Ng(e,o,r,u),os=!1,g=e.memoizedState,o.state=g,Bc(e,r,o,s);var v=e.memoizedState;c!==p||g!==v||Cn.current||os?(typeof j=="function"&&(Ph(e,n,j,r),v=e.memoizedState),(d=os||Tg(e,n,d,r,g,v,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Lh(t,e,n,r,i,s)}function Lh(t,e,n,r,s,i){b1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&wg(e,n,!1),$r(t,e,i);r=e.stateNode,US.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=no(e,t.child,null,i),e.child=no(e,null,c,i)):fn(t,e,c,i),e.memoizedState=r.state,s&&wg(e,n,!0),e.child}function E1(t){var e=t.stateNode;e.pendingContext?_g(t,e.pendingContext,e.pendingContext!==e.context):e.context&&_g(t,e.context,!1),Qf(t,e.containerInfo)}function Lg(t,e,n,r,s){return to(),Hf(s),e.flags|=256,fn(t,e,n,r),e.child}var Fh={dehydrated:null,treeContext:null,retryLane:0};function zh(t){return{baseLanes:t,cachePool:null,transitions:null}}function C1(t,e,n){var r=e.pendingProps,s=wt.current,i=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),pt(wt,s&1),t===null)return Rh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Iu(o,r,0,null),t=ri(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=zh(n),e.memoizedState=Fh,t):sp(e,o));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return $S(t,e,o,r,c,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=vs(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=vs(c,i):(i=ri(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?zh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Fh,r}return i=t.child,t=i.sibling,r=vs(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function sp(t,e){return e=Iu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Yl(t,e,n,r){return r!==null&&Hf(r),no(e,t.child,null,n),t=sp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function $S(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Nd(Error(oe(422))),Yl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Iu({mode:"visible",children:r.children},s,0,null),i=ri(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&no(e,t.child,null,o),e.child.memoizedState=zh(o),e.memoizedState=Fh,i);if(!(e.mode&1))return Yl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(oe(419)),r=Nd(i,r,void 0),Yl(t,e,o,r)}if(c=(o&t.childLanes)!==0,bn||c){if(r=Yt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ur(t,s),ar(r,t,s,-1))}return up(),r=Nd(Error(oe(421))),Yl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=tb.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,An=ms(s.nextSibling),Pn=e,vt=!0,tr=null,t!==null&&($n[Wn++]=Pr,$n[Wn++]=Or,$n[Wn++]=li,Pr=t.id,Or=t.overflow,li=e),e=sp(e,r.children),e.flags|=4096,e)}function Fg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ah(t.return,e,n)}function Rd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function I1(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(fn(t,e,r.children,n),r=wt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Fg(t,n,e);else if(t.tag===19)Fg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(pt(wt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Uc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Rd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Uc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Rd(e,!0,n,null,i);break;case"together":Rd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function pc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function $r(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ui|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(oe(153));if(e.child!==null){for(t=e.child,n=vs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=vs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function WS(t,e,n){switch(e.tag){case 3:E1(e),to();break;case 5:Xx(e);break;case 1:In(e.type)&&Dc(e);break;case 4:Qf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;pt(Fc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(pt(wt,wt.current&1),e.flags|=128,null):n&e.child.childLanes?C1(t,e,n):(pt(wt,wt.current&1),t=$r(t,e,n),t!==null?t.sibling:null);pt(wt,wt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return I1(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),pt(wt,wt.current),r)break;return null;case 22:case 23:return e.lanes=0,S1(t,e,n)}return $r(t,e,n)}var j1,Bh,k1,T1;j1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Bh=function(){};k1=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Xs(br.current);var i=null;switch(n){case"input":s=lh(t,s),r=lh(t,r),i=[];break;case"select":s=Et({},s,{value:void 0}),r=Et({},r,{value:void 0}),i=[];break;case"textarea":s=dh(t,s),r=dh(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Pc)}fh(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(_a.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(_a.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&gt("scroll",t),i||c===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};T1=function(t,e,n,r){n!==r&&(e.flags|=4)};function Wo(t,e){if(!vt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function an(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function HS(t,e,n){var r=e.pendingProps;switch(Wf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return an(e),null;case 1:return In(e.type)&&Oc(),an(e),null;case 3:return r=e.stateNode,ro(),yt(Cn),yt(un),Xf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Gl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,tr!==null&&(qh(tr),tr=null))),Bh(t,e),an(e),null;case 5:Jf(e);var s=Xs(Aa.current);if(n=e.type,t!==null&&e.stateNode!=null)k1(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(oe(166));return an(e),null}if(t=Xs(br.current),Gl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[_r]=e,r[Na]=i,t=(e.mode&1)!==0,n){case"dialog":gt("cancel",r),gt("close",r);break;case"iframe":case"object":case"embed":gt("load",r);break;case"video":case"audio":for(s=0;s<ta.length;s++)gt(ta[s],r);break;case"source":gt("error",r);break;case"img":case"image":case"link":gt("error",r),gt("load",r);break;case"details":gt("toggle",r);break;case"input":Gm(r,i),gt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},gt("invalid",r);break;case"textarea":Ym(r,i),gt("invalid",r)}fh(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&Kl(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&Kl(r.textContent,c,t),s=["children",""+c]):_a.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&gt("scroll",r)}switch(n){case"input":Fl(r),qm(r,i,!0);break;case"textarea":Fl(r),Qm(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Pc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=rx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[_r]=e,t[Na]=r,j1(t,e,!1,!1),e.stateNode=t;e:{switch(o=ph(n,r),n){case"dialog":gt("cancel",t),gt("close",t),s=r;break;case"iframe":case"object":case"embed":gt("load",t),s=r;break;case"video":case"audio":for(s=0;s<ta.length;s++)gt(ta[s],t);s=r;break;case"source":gt("error",t),s=r;break;case"img":case"image":case"link":gt("error",t),gt("load",t),s=r;break;case"details":gt("toggle",t),s=r;break;case"input":Gm(t,r),s=lh(t,r),gt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Et({},r,{value:void 0}),gt("invalid",t);break;case"textarea":Ym(t,r),s=dh(t,r),gt("invalid",t);break;default:s=r}fh(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?ox(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&sx(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&wa(t,u):typeof u=="number"&&wa(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(_a.hasOwnProperty(i)?u!=null&&i==="onScroll"&&gt("scroll",t):u!=null&&kf(t,i,u,o))}switch(n){case"input":Fl(t),qm(t,r,!1);break;case"textarea":Fl(t),Qm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Cs(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Wi(t,!!r.multiple,i,!1):r.defaultValue!=null&&Wi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Pc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return an(e),null;case 6:if(t&&e.stateNode!=null)T1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(oe(166));if(n=Xs(Aa.current),Xs(br.current),Gl(e)){if(r=e.stateNode,n=e.memoizedProps,r[_r]=e,(i=r.nodeValue!==n)&&(t=Pn,t!==null))switch(t.tag){case 3:Kl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Kl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[_r]=e,e.stateNode=r}return an(e),null;case 13:if(yt(wt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(vt&&An!==null&&e.mode&1&&!(e.flags&128))Gx(),to(),e.flags|=98560,i=!1;else if(i=Gl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(oe(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(oe(317));i[_r]=e}else to(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;an(e),i=!1}else tr!==null&&(qh(tr),tr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||wt.current&1?Ut===0&&(Ut=3):up())),e.updateQueue!==null&&(e.flags|=4),an(e),null);case 4:return ro(),Bh(t,e),t===null&&ka(e.stateNode.containerInfo),an(e),null;case 10:return Gf(e.type._context),an(e),null;case 17:return In(e.type)&&Oc(),an(e),null;case 19:if(yt(wt),i=e.memoizedState,i===null)return an(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Wo(i,!1);else{if(Ut!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Uc(t),o!==null){for(e.flags|=128,Wo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return pt(wt,wt.current&1|2),e.child}t=t.sibling}i.tail!==null&&Rt()>io&&(e.flags|=128,r=!0,Wo(i,!1),e.lanes=4194304)}else{if(!r)if(t=Uc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Wo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!vt)return an(e),null}else 2*Rt()-i.renderingStartTime>io&&n!==1073741824&&(e.flags|=128,r=!0,Wo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Rt(),e.sibling=null,n=wt.current,pt(wt,r?n&1|2:n&1),e):(an(e),null);case 22:case 23:return cp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Rn&1073741824&&(an(e),e.subtreeFlags&6&&(e.flags|=8192)):an(e),null;case 24:return null;case 25:return null}throw Error(oe(156,e.tag))}function VS(t,e){switch(Wf(e),e.tag){case 1:return In(e.type)&&Oc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ro(),yt(Cn),yt(un),Xf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Jf(e),null;case 13:if(yt(wt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(oe(340));to()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return yt(wt),null;case 4:return ro(),null;case 10:return Gf(e.type._context),null;case 22:case 23:return cp(),null;case 24:return null;default:return null}}var Ql=!1,ln=!1,KS=typeof WeakSet=="function"?WeakSet:Set,be=null;function Bi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){It(t,e,r)}else n.current=null}function Uh(t,e,n){try{n()}catch(r){It(t,e,r)}}var zg=!1;function GS(t,e){if(Eh=Nc,t=Ox(),Uf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,d=0,f=0,p=t,g=null;t:for(;;){for(var j;p!==n||s!==0&&p.nodeType!==3||(c=o+s),p!==i||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(j=p.firstChild)!==null;)g=p,p=j;for(;;){if(p===t)break t;if(g===n&&++d===s&&(c=o),g===i&&++f===r&&(u=o),(j=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=j}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ch={focusedElem:t,selectionRange:n},Nc=!1,be=e;be!==null;)if(e=be,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,be=t;else for(;be!==null;){e=be;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var N=v.memoizedProps,R=v.memoizedState,b=e.stateNode,_=b.getSnapshotBeforeUpdate(e.elementType===e.type?N:Zn(e.type,N),R);b.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(oe(163))}}catch(P){It(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,be=t;break}be=e.return}return v=zg,zg=!1,v}function la(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Uh(e,n,i)}s=s.next}while(s!==r)}}function Eu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function $h(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function N1(t){var e=t.alternate;e!==null&&(t.alternate=null,N1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[_r],delete e[Na],delete e[kh],delete e[TS],delete e[NS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function R1(t){return t.tag===5||t.tag===3||t.tag===4}function Bg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||R1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Wh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Pc));else if(r!==4&&(t=t.child,t!==null))for(Wh(t,e,n),t=t.sibling;t!==null;)Wh(t,e,n),t=t.sibling}function Hh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Hh(t,e,n),t=t.sibling;t!==null;)Hh(t,e,n),t=t.sibling}var en=null,er=!1;function rs(t,e,n){for(n=n.child;n!==null;)A1(t,e,n),n=n.sibling}function A1(t,e,n){if(Sr&&typeof Sr.onCommitFiberUnmount=="function")try{Sr.onCommitFiberUnmount(gu,n)}catch{}switch(n.tag){case 5:ln||Bi(n,e);case 6:var r=en,s=er;en=null,rs(t,e,n),en=r,er=s,en!==null&&(er?(t=en,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):en.removeChild(n.stateNode));break;case 18:en!==null&&(er?(t=en,n=n.stateNode,t.nodeType===8?Ed(t.parentNode,n):t.nodeType===1&&Ed(t,n),Ca(t)):Ed(en,n.stateNode));break;case 4:r=en,s=er,en=n.stateNode.containerInfo,er=!0,rs(t,e,n),en=r,er=s;break;case 0:case 11:case 14:case 15:if(!ln&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Uh(n,e,o),s=s.next}while(s!==r)}rs(t,e,n);break;case 1:if(!ln&&(Bi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){It(n,e,c)}rs(t,e,n);break;case 21:rs(t,e,n);break;case 22:n.mode&1?(ln=(r=ln)||n.memoizedState!==null,rs(t,e,n),ln=r):rs(t,e,n);break;default:rs(t,e,n)}}function Ug(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new KS),e.forEach(function(r){var s=nb.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Xn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:en=c.stateNode,er=!1;break e;case 3:en=c.stateNode.containerInfo,er=!0;break e;case 4:en=c.stateNode.containerInfo,er=!0;break e}c=c.return}if(en===null)throw Error(oe(160));A1(i,o,s),en=null,er=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){It(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)P1(e,t),e=e.sibling}function P1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Xn(e,t),mr(t),r&4){try{la(3,t,t.return),Eu(3,t)}catch(N){It(t,t.return,N)}try{la(5,t,t.return)}catch(N){It(t,t.return,N)}}break;case 1:Xn(e,t),mr(t),r&512&&n!==null&&Bi(n,n.return);break;case 5:if(Xn(e,t),mr(t),r&512&&n!==null&&Bi(n,n.return),t.flags&32){var s=t.stateNode;try{wa(s,"")}catch(N){It(t,t.return,N)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&tx(s,i),ph(c,o);var d=ph(c,i);for(o=0;o<u.length;o+=2){var f=u[o],p=u[o+1];f==="style"?ox(s,p):f==="dangerouslySetInnerHTML"?sx(s,p):f==="children"?wa(s,p):kf(s,f,p,d)}switch(c){case"input":ch(s,i);break;case"textarea":nx(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var j=i.value;j!=null?Wi(s,!!i.multiple,j,!1):g!==!!i.multiple&&(i.defaultValue!=null?Wi(s,!!i.multiple,i.defaultValue,!0):Wi(s,!!i.multiple,i.multiple?[]:"",!1))}s[Na]=i}catch(N){It(t,t.return,N)}}break;case 6:if(Xn(e,t),mr(t),r&4){if(t.stateNode===null)throw Error(oe(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(N){It(t,t.return,N)}}break;case 3:if(Xn(e,t),mr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ca(e.containerInfo)}catch(N){It(t,t.return,N)}break;case 4:Xn(e,t),mr(t);break;case 13:Xn(e,t),mr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(ap=Rt())),r&4&&Ug(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(ln=(d=ln)||f,Xn(e,t),ln=d):Xn(e,t),mr(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(be=t,f=t.child;f!==null;){for(p=be=f;be!==null;){switch(g=be,j=g.child,g.tag){case 0:case 11:case 14:case 15:la(4,g,g.return);break;case 1:Bi(g,g.return);var v=g.stateNode;if(typeof v.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(N){It(r,n,N)}}break;case 5:Bi(g,g.return);break;case 22:if(g.memoizedState!==null){Wg(p);continue}}j!==null?(j.return=g,be=j):Wg(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{s=p.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=ix("display",o))}catch(N){It(t,t.return,N)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(N){It(t,t.return,N)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Xn(e,t),mr(t),r&4&&Ug(t);break;case 21:break;default:Xn(e,t),mr(t)}}function mr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(R1(n)){var r=n;break e}n=n.return}throw Error(oe(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(wa(s,""),r.flags&=-33);var i=Bg(t);Hh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,c=Bg(t);Wh(t,c,o);break;default:throw Error(oe(161))}}catch(u){It(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function qS(t,e,n){be=t,O1(t)}function O1(t,e,n){for(var r=(t.mode&1)!==0;be!==null;){var s=be,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ql;if(!o){var c=s.alternate,u=c!==null&&c.memoizedState!==null||ln;c=Ql;var d=ln;if(Ql=o,(ln=u)&&!d)for(be=s;be!==null;)o=be,u=o.child,o.tag===22&&o.memoizedState!==null?Hg(s):u!==null?(u.return=o,be=u):Hg(s);for(;i!==null;)be=i,O1(i),i=i.sibling;be=s,Ql=c,ln=d}$g(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,be=i):$g(t)}}function $g(t){for(;be!==null;){var e=be;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ln||Eu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ln)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Zn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Ig(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Ig(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&Ca(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(oe(163))}ln||e.flags&512&&$h(e)}catch(g){It(e,e.return,g)}}if(e===t){be=null;break}if(n=e.sibling,n!==null){n.return=e.return,be=n;break}be=e.return}}function Wg(t){for(;be!==null;){var e=be;if(e===t){be=null;break}var n=e.sibling;if(n!==null){n.return=e.return,be=n;break}be=e.return}}function Hg(t){for(;be!==null;){var e=be;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Eu(4,e)}catch(u){It(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){It(e,s,u)}}var i=e.return;try{$h(e)}catch(u){It(e,i,u)}break;case 5:var o=e.return;try{$h(e)}catch(u){It(e,o,u)}}}catch(u){It(e,e.return,u)}if(e===t){be=null;break}var c=e.sibling;if(c!==null){c.return=e.return,be=c;break}be=e.return}}var YS=Math.ceil,Hc=Kr.ReactCurrentDispatcher,ip=Kr.ReactCurrentOwner,Kn=Kr.ReactCurrentBatchConfig,tt=0,Yt=null,Pt=null,nn=0,Rn=0,Ui=Ps(0),Ut=0,Ma=null,ui=0,Cu=0,op=0,ca=null,Sn=null,ap=0,io=1/0,Tr=null,Vc=!1,Vh=null,ys=null,Jl=!1,us=null,Kc=0,ua=0,Kh=null,mc=-1,gc=0;function yn(){return tt&6?Rt():mc!==-1?mc:mc=Rt()}function xs(t){return t.mode&1?tt&2&&nn!==0?nn&-nn:AS.transition!==null?(gc===0&&(gc=xx()),gc):(t=lt,t!==0||(t=window.event,t=t===void 0?16:Cx(t.type)),t):1}function ar(t,e,n,r){if(50<ua)throw ua=0,Kh=null,Error(oe(185));el(t,n,r),(!(tt&2)||t!==Yt)&&(t===Yt&&(!(tt&2)&&(Cu|=n),Ut===4&&ls(t,nn)),jn(t,r),n===1&&tt===0&&!(e.mode&1)&&(io=Rt()+500,wu&&Os()))}function jn(t,e){var n=t.callbackNode;A2(t,e);var r=Tc(t,t===Yt?nn:0);if(r===0)n!==null&&Zm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Zm(n),e===1)t.tag===0?RS(Vg.bind(null,t)):Hx(Vg.bind(null,t)),jS(function(){!(tt&6)&&Os()}),n=null;else{switch(vx(r)){case 1:n=Pf;break;case 4:n=gx;break;case 16:n=kc;break;case 536870912:n=yx;break;default:n=kc}n=$1(n,D1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function D1(t,e){if(mc=-1,gc=0,tt&6)throw Error(oe(327));var n=t.callbackNode;if(qi()&&t.callbackNode!==n)return null;var r=Tc(t,t===Yt?nn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Gc(t,r);else{e=r;var s=tt;tt|=2;var i=L1();(Yt!==t||nn!==e)&&(Tr=null,io=Rt()+500,ni(t,e));do try{XS();break}catch(c){M1(t,c)}while(!0);Kf(),Hc.current=i,tt=s,Pt!==null?e=0:(Yt=null,nn=0,e=Ut)}if(e!==0){if(e===2&&(s=vh(t),s!==0&&(r=s,e=Gh(t,s))),e===1)throw n=Ma,ni(t,0),ls(t,r),jn(t,Rt()),n;if(e===6)ls(t,r);else{if(s=t.current.alternate,!(r&30)&&!QS(s)&&(e=Gc(t,r),e===2&&(i=vh(t),i!==0&&(r=i,e=Gh(t,i))),e===1))throw n=Ma,ni(t,0),ls(t,r),jn(t,Rt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(oe(345));case 2:Ks(t,Sn,Tr);break;case 3:if(ls(t,r),(r&130023424)===r&&(e=ap+500-Rt(),10<e)){if(Tc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){yn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=jh(Ks.bind(null,t,Sn,Tr),e);break}Ks(t,Sn,Tr);break;case 4:if(ls(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-or(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Rt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*YS(r/1960))-r,10<r){t.timeoutHandle=jh(Ks.bind(null,t,Sn,Tr),r);break}Ks(t,Sn,Tr);break;case 5:Ks(t,Sn,Tr);break;default:throw Error(oe(329))}}}return jn(t,Rt()),t.callbackNode===n?D1.bind(null,t):null}function Gh(t,e){var n=ca;return t.current.memoizedState.isDehydrated&&(ni(t,e).flags|=256),t=Gc(t,e),t!==2&&(e=Sn,Sn=n,e!==null&&qh(e)),t}function qh(t){Sn===null?Sn=t:Sn.push.apply(Sn,t)}function QS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!cr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ls(t,e){for(e&=~op,e&=~Cu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-or(e),r=1<<n;t[n]=-1,e&=~r}}function Vg(t){if(tt&6)throw Error(oe(327));qi();var e=Tc(t,0);if(!(e&1))return jn(t,Rt()),null;var n=Gc(t,e);if(t.tag!==0&&n===2){var r=vh(t);r!==0&&(e=r,n=Gh(t,r))}if(n===1)throw n=Ma,ni(t,0),ls(t,e),jn(t,Rt()),n;if(n===6)throw Error(oe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ks(t,Sn,Tr),jn(t,Rt()),null}function lp(t,e){var n=tt;tt|=1;try{return t(e)}finally{tt=n,tt===0&&(io=Rt()+500,wu&&Os())}}function di(t){us!==null&&us.tag===0&&!(tt&6)&&qi();var e=tt;tt|=1;var n=Kn.transition,r=lt;try{if(Kn.transition=null,lt=1,t)return t()}finally{lt=r,Kn.transition=n,tt=e,!(tt&6)&&Os()}}function cp(){Rn=Ui.current,yt(Ui)}function ni(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,IS(n)),Pt!==null)for(n=Pt.return;n!==null;){var r=n;switch(Wf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Oc();break;case 3:ro(),yt(Cn),yt(un),Xf();break;case 5:Jf(r);break;case 4:ro();break;case 13:yt(wt);break;case 19:yt(wt);break;case 10:Gf(r.type._context);break;case 22:case 23:cp()}n=n.return}if(Yt=t,Pt=t=vs(t.current,null),nn=Rn=e,Ut=0,Ma=null,op=Cu=ui=0,Sn=ca=null,Js!==null){for(e=0;e<Js.length;e++)if(n=Js[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Js=null}return t}function M1(t,e){do{var n=Pt;try{if(Kf(),hc.current=Wc,$c){for(var r=St.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}$c=!1}if(ci=0,Gt=Ft=St=null,aa=!1,Pa=0,ip.current=null,n===null||n.return===null){Ut=1,Ma=e,Pt=null;break}e:{var i=t,o=n.return,c=n,u=e;if(e=nn,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=c,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var j=Ag(o);if(j!==null){j.flags&=-257,Pg(j,o,c,i,e),j.mode&1&&Rg(i,d,e),e=j,u=d;var v=e.updateQueue;if(v===null){var N=new Set;N.add(u),e.updateQueue=N}else v.add(u);break e}else{if(!(e&1)){Rg(i,d,e),up();break e}u=Error(oe(426))}}else if(vt&&c.mode&1){var R=Ag(o);if(R!==null){!(R.flags&65536)&&(R.flags|=256),Pg(R,o,c,i,e),Hf(so(u,c));break e}}i=u=so(u,c),Ut!==4&&(Ut=2),ca===null?ca=[i]:ca.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var b=v1(i,u,e);Cg(i,b);break e;case 1:c=u;var _=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ys===null||!ys.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var P=_1(i,c,e);Cg(i,P);break e}}i=i.return}while(i!==null)}z1(n)}catch(V){e=V,Pt===n&&n!==null&&(Pt=n=n.return);continue}break}while(!0)}function L1(){var t=Hc.current;return Hc.current=Wc,t===null?Wc:t}function up(){(Ut===0||Ut===3||Ut===2)&&(Ut=4),Yt===null||!(ui&268435455)&&!(Cu&268435455)||ls(Yt,nn)}function Gc(t,e){var n=tt;tt|=2;var r=L1();(Yt!==t||nn!==e)&&(Tr=null,ni(t,e));do try{JS();break}catch(s){M1(t,s)}while(!0);if(Kf(),tt=n,Hc.current=r,Pt!==null)throw Error(oe(261));return Yt=null,nn=0,Ut}function JS(){for(;Pt!==null;)F1(Pt)}function XS(){for(;Pt!==null&&!b2();)F1(Pt)}function F1(t){var e=U1(t.alternate,t,Rn);t.memoizedProps=t.pendingProps,e===null?z1(t):Pt=e,ip.current=null}function z1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=VS(n,e),n!==null){n.flags&=32767,Pt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ut=6,Pt=null;return}}else if(n=HS(n,e,Rn),n!==null){Pt=n;return}if(e=e.sibling,e!==null){Pt=e;return}Pt=e=t}while(e!==null);Ut===0&&(Ut=5)}function Ks(t,e,n){var r=lt,s=Kn.transition;try{Kn.transition=null,lt=1,ZS(t,e,n,r)}finally{Kn.transition=s,lt=r}return null}function ZS(t,e,n,r){do qi();while(us!==null);if(tt&6)throw Error(oe(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(oe(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(P2(t,i),t===Yt&&(Pt=Yt=null,nn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Jl||(Jl=!0,$1(kc,function(){return qi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Kn.transition,Kn.transition=null;var o=lt;lt=1;var c=tt;tt|=4,ip.current=null,GS(t,n),P1(n,t),vS(Ch),Nc=!!Eh,Ch=Eh=null,t.current=n,qS(n),E2(),tt=c,lt=o,Kn.transition=i}else t.current=n;if(Jl&&(Jl=!1,us=t,Kc=s),i=t.pendingLanes,i===0&&(ys=null),j2(n.stateNode),jn(t,Rt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Vc)throw Vc=!1,t=Vh,Vh=null,t;return Kc&1&&t.tag!==0&&qi(),i=t.pendingLanes,i&1?t===Kh?ua++:(ua=0,Kh=t):ua=0,Os(),null}function qi(){if(us!==null){var t=vx(Kc),e=Kn.transition,n=lt;try{if(Kn.transition=null,lt=16>t?16:t,us===null)var r=!1;else{if(t=us,us=null,Kc=0,tt&6)throw Error(oe(331));var s=tt;for(tt|=4,be=t.current;be!==null;){var i=be,o=i.child;if(be.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(be=d;be!==null;){var f=be;switch(f.tag){case 0:case 11:case 15:la(8,f,i)}var p=f.child;if(p!==null)p.return=f,be=p;else for(;be!==null;){f=be;var g=f.sibling,j=f.return;if(N1(f),f===d){be=null;break}if(g!==null){g.return=j,be=g;break}be=j}}}var v=i.alternate;if(v!==null){var N=v.child;if(N!==null){v.child=null;do{var R=N.sibling;N.sibling=null,N=R}while(N!==null)}}be=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,be=o;else e:for(;be!==null;){if(i=be,i.flags&2048)switch(i.tag){case 0:case 11:case 15:la(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,be=b;break e}be=i.return}}var _=t.current;for(be=_;be!==null;){o=be;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,be=w;else e:for(o=_;be!==null;){if(c=be,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Eu(9,c)}}catch(V){It(c,c.return,V)}if(c===o){be=null;break e}var P=c.sibling;if(P!==null){P.return=c.return,be=P;break e}be=c.return}}if(tt=s,Os(),Sr&&typeof Sr.onPostCommitFiberRoot=="function")try{Sr.onPostCommitFiberRoot(gu,t)}catch{}r=!0}return r}finally{lt=n,Kn.transition=e}}return!1}function Kg(t,e,n){e=so(n,e),e=v1(t,e,1),t=gs(t,e,1),e=yn(),t!==null&&(el(t,1,e),jn(t,e))}function It(t,e,n){if(t.tag===3)Kg(t,t,n);else for(;e!==null;){if(e.tag===3){Kg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ys===null||!ys.has(r))){t=so(n,t),t=_1(e,t,1),e=gs(e,t,1),t=yn(),e!==null&&(el(e,1,t),jn(e,t));break}}e=e.return}}function eb(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=yn(),t.pingedLanes|=t.suspendedLanes&n,Yt===t&&(nn&n)===n&&(Ut===4||Ut===3&&(nn&130023424)===nn&&500>Rt()-ap?ni(t,0):op|=n),jn(t,e)}function B1(t,e){e===0&&(t.mode&1?(e=Ul,Ul<<=1,!(Ul&130023424)&&(Ul=4194304)):e=1);var n=yn();t=Ur(t,e),t!==null&&(el(t,e,n),jn(t,n))}function tb(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),B1(t,n)}function nb(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(oe(314))}r!==null&&r.delete(e),B1(t,n)}var U1;U1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Cn.current)bn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return bn=!1,WS(t,e,n);bn=!!(t.flags&131072)}else bn=!1,vt&&e.flags&1048576&&Vx(e,Lc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;pc(t,e),t=e.pendingProps;var s=eo(e,un.current);Gi(e,n),s=ep(null,e,r,t,s,n);var i=tp();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,In(r)?(i=!0,Dc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Yf(e),s.updater=bu,e.stateNode=s,s._reactInternals=e,Oh(e,r,t,n),e=Lh(null,e,r,!0,i,n)):(e.tag=0,vt&&i&&$f(e),fn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(pc(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=sb(r),t=Zn(r,t),s){case 0:e=Mh(null,e,r,t,n);break e;case 1:e=Mg(null,e,r,t,n);break e;case 11:e=Og(null,e,r,t,n);break e;case 14:e=Dg(null,e,r,Zn(r.type,t),n);break e}throw Error(oe(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zn(r,s),Mh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zn(r,s),Mg(t,e,r,s,n);case 3:e:{if(E1(e),t===null)throw Error(oe(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Jx(t,e),Bc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=so(Error(oe(423)),e),e=Lg(t,e,r,n,s);break e}else if(r!==s){s=so(Error(oe(424)),e),e=Lg(t,e,r,n,s);break e}else for(An=ms(e.stateNode.containerInfo.firstChild),Pn=e,vt=!0,tr=null,n=Yx(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(to(),r===s){e=$r(t,e,n);break e}fn(t,e,r,n)}e=e.child}return e;case 5:return Xx(e),t===null&&Rh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Ih(r,s)?o=null:i!==null&&Ih(r,i)&&(e.flags|=32),b1(t,e),fn(t,e,o,n),e.child;case 6:return t===null&&Rh(e),null;case 13:return C1(t,e,n);case 4:return Qf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=no(e,null,r,n):fn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zn(r,s),Og(t,e,r,s,n);case 7:return fn(t,e,e.pendingProps,n),e.child;case 8:return fn(t,e,e.pendingProps.children,n),e.child;case 12:return fn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,pt(Fc,r._currentValue),r._currentValue=o,i!==null)if(cr(i.value,o)){if(i.children===s.children&&!Cn.current){e=$r(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){o=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Mr(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Ah(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(oe(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Ah(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}fn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Gi(e,n),s=Gn(s),r=r(s),e.flags|=1,fn(t,e,r,n),e.child;case 14:return r=e.type,s=Zn(r,e.pendingProps),s=Zn(r.type,s),Dg(t,e,r,s,n);case 15:return w1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zn(r,s),pc(t,e),e.tag=1,In(r)?(t=!0,Dc(e)):t=!1,Gi(e,n),x1(e,r,s),Oh(e,r,s,n),Lh(null,e,r,!0,t,n);case 19:return I1(t,e,n);case 22:return S1(t,e,n)}throw Error(oe(156,e.tag))};function $1(t,e){return mx(t,e)}function rb(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hn(t,e,n,r){return new rb(t,e,n,r)}function dp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function sb(t){if(typeof t=="function")return dp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Nf)return 11;if(t===Rf)return 14}return 2}function vs(t,e){var n=t.alternate;return n===null?(n=Hn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function yc(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")dp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ri:return ri(n.children,s,i,e);case Tf:o=8,s|=8;break;case sh:return t=Hn(12,n,e,s|2),t.elementType=sh,t.lanes=i,t;case ih:return t=Hn(13,n,e,s),t.elementType=ih,t.lanes=i,t;case oh:return t=Hn(19,n,e,s),t.elementType=oh,t.lanes=i,t;case Xy:return Iu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Qy:o=10;break e;case Jy:o=9;break e;case Nf:o=11;break e;case Rf:o=14;break e;case is:o=16,r=null;break e}throw Error(oe(130,t==null?t:typeof t,""))}return e=Hn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ri(t,e,n,r){return t=Hn(7,t,r,e),t.lanes=n,t}function Iu(t,e,n,r){return t=Hn(22,t,r,e),t.elementType=Xy,t.lanes=n,t.stateNode={isHidden:!1},t}function Ad(t,e,n){return t=Hn(6,t,null,e),t.lanes=n,t}function Pd(t,e,n){return e=Hn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ib(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fd(0),this.expirationTimes=fd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function hp(t,e,n,r,s,i,o,c,u){return t=new ib(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Hn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yf(i),t}function ob(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ni,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function W1(t){if(!t)return Is;t=t._reactInternals;e:{if(xi(t)!==t||t.tag!==1)throw Error(oe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(In(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(oe(171))}if(t.tag===1){var n=t.type;if(In(n))return Wx(t,n,e)}return e}function H1(t,e,n,r,s,i,o,c,u){return t=hp(n,r,!0,t,s,i,o,c,u),t.context=W1(null),n=t.current,r=yn(),s=xs(n),i=Mr(r,s),i.callback=e??null,gs(n,i,s),t.current.lanes=s,el(t,s,r),jn(t,r),t}function ju(t,e,n,r){var s=e.current,i=yn(),o=xs(s);return n=W1(n),e.context===null?e.context=n:e.pendingContext=n,e=Mr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=gs(s,e,o),t!==null&&(ar(t,s,o,i),dc(t,s,o)),o}function qc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Gg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function fp(t,e){Gg(t,e),(t=t.alternate)&&Gg(t,e)}function ab(){return null}var V1=typeof reportError=="function"?reportError:function(t){console.error(t)};function pp(t){this._internalRoot=t}ku.prototype.render=pp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(oe(409));ju(t,e,null,null)};ku.prototype.unmount=pp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;di(function(){ju(null,t,null,null)}),e[Br]=null}};function ku(t){this._internalRoot=t}ku.prototype.unstable_scheduleHydration=function(t){if(t){var e=Sx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<as.length&&e!==0&&e<as[n].priority;n++);as.splice(n,0,t),n===0&&Ex(t)}};function mp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Tu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function qg(){}function lb(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=qc(o);i.call(d)}}var o=H1(e,r,t,0,null,!1,!1,"",qg);return t._reactRootContainer=o,t[Br]=o.current,ka(t.nodeType===8?t.parentNode:t),di(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=qc(u);c.call(d)}}var u=hp(t,0,!1,null,null,!1,!1,"",qg);return t._reactRootContainer=u,t[Br]=u.current,ka(t.nodeType===8?t.parentNode:t),di(function(){ju(e,u,n,r)}),u}function Nu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var c=s;s=function(){var u=qc(o);c.call(u)}}ju(e,o,t,s)}else o=lb(n,e,t,s,r);return qc(o)}_x=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ea(e.pendingLanes);n!==0&&(Of(e,n|1),jn(e,Rt()),!(tt&6)&&(io=Rt()+500,Os()))}break;case 13:di(function(){var r=Ur(t,1);if(r!==null){var s=yn();ar(r,t,1,s)}}),fp(t,1)}};Df=function(t){if(t.tag===13){var e=Ur(t,134217728);if(e!==null){var n=yn();ar(e,t,134217728,n)}fp(t,134217728)}};wx=function(t){if(t.tag===13){var e=xs(t),n=Ur(t,e);if(n!==null){var r=yn();ar(n,t,e,r)}fp(t,e)}};Sx=function(){return lt};bx=function(t,e){var n=lt;try{return lt=t,e()}finally{lt=n}};gh=function(t,e,n){switch(e){case"input":if(ch(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=_u(r);if(!s)throw Error(oe(90));ex(r),ch(r,s)}}}break;case"textarea":nx(t,n);break;case"select":e=n.value,e!=null&&Wi(t,!!n.multiple,e,!1)}};cx=lp;ux=di;var cb={usingClientEntryPoint:!1,Events:[nl,Di,_u,ax,lx,lp]},Ho={findFiberByHostInstance:Qs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ub={bundleType:Ho.bundleType,version:Ho.version,rendererPackageName:Ho.rendererPackageName,rendererConfig:Ho.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Kr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=fx(t),t===null?null:t.stateNode},findFiberByHostInstance:Ho.findFiberByHostInstance||ab,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xl.isDisabled&&Xl.supportsFiber)try{gu=Xl.inject(ub),Sr=Xl}catch{}}Dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cb;Dn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mp(e))throw Error(oe(200));return ob(t,e,null,n)};Dn.createRoot=function(t,e){if(!mp(t))throw Error(oe(299));var n=!1,r="",s=V1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=hp(t,1,!1,null,null,n,!1,r,s),t[Br]=e.current,ka(t.nodeType===8?t.parentNode:t),new pp(e)};Dn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(oe(188)):(t=Object.keys(t).join(","),Error(oe(268,t)));return t=fx(e),t=t===null?null:t.stateNode,t};Dn.flushSync=function(t){return di(t)};Dn.hydrate=function(t,e,n){if(!Tu(e))throw Error(oe(200));return Nu(null,t,e,!0,n)};Dn.hydrateRoot=function(t,e,n){if(!mp(t))throw Error(oe(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=V1;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=H1(e,null,t,1,n??null,s,!1,i,o),t[Br]=e.current,ka(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new ku(e)};Dn.render=function(t,e,n){if(!Tu(e))throw Error(oe(200));return Nu(null,t,e,!1,n)};Dn.unmountComponentAtNode=function(t){if(!Tu(t))throw Error(oe(40));return t._reactRootContainer?(di(function(){Nu(null,null,t,!1,function(){t._reactRootContainer=null,t[Br]=null})}),!0):!1};Dn.unstable_batchedUpdates=lp;Dn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Tu(n))throw Error(oe(200));if(t==null||t._reactInternals===void 0)throw Error(oe(38));return Nu(t,e,n,!1,r)};Dn.version="18.3.1-next-f1338f8080-20240426";function K1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(K1)}catch(t){console.error(t)}}K1(),Ky.exports=Dn;var db=Ky.exports,Yg=db;nh.createRoot=Yg.createRoot,nh.hydrateRoot=Yg.hydrateRoot;/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Qg="popstate";function hb(t={}){function e(r,s){let{pathname:i,search:o,hash:c}=r.location;return Yh("",{pathname:i,search:o,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:La(s)}return pb(e,n,null,t)}function bt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ur(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function fb(){return Math.random().toString(36).substring(2,10)}function Jg(t,e){return{usr:t.state,key:t.key,idx:e}}function Yh(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?_o(e):e,state:n,key:e&&e.key||r||fb()}}function La({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function _o(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function pb(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,c="POP",u=null,d=f();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function f(){return(o.state||{idx:null}).idx}function p(){c="POP";let R=f(),b=R==null?null:R-d;d=R,u&&u({action:c,location:N.location,delta:b})}function g(R,b){c="PUSH";let _=Yh(N.location,R,b);d=f()+1;let w=Jg(_,d),P=N.createHref(_);try{o.pushState(w,"",P)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;s.location.assign(P)}i&&u&&u({action:c,location:N.location,delta:1})}function j(R,b){c="REPLACE";let _=Yh(N.location,R,b);d=f();let w=Jg(_,d),P=N.createHref(_);o.replaceState(w,"",P),i&&u&&u({action:c,location:N.location,delta:0})}function v(R){return mb(R)}let N={get action(){return c},get location(){return t(s,o)},listen(R){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Qg,p),u=R,()=>{s.removeEventListener(Qg,p),u=null}},createHref(R){return e(s,R)},createURL:v,encodeLocation(R){let b=v(R);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:g,replace:j,go(R){return o.go(R)}};return N}function mb(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),bt(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:La(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function G1(t,e,n="/"){return gb(t,e,n,!1)}function gb(t,e,n,r){let s=typeof e=="string"?_o(e):e,i=Wr(s.pathname||"/",n);if(i==null)return null;let o=q1(t);yb(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=kb(i);c=Ib(o[u],d,r)}return c}function q1(t,e=[],n=[],r="",s=!1){let i=(o,c,u=s,d)=>{let f={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(r)&&u)return;bt(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length)}let p=Lr([r,f.relativePath]),g=n.concat(f);o.children&&o.children.length>0&&(bt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),q1(o.children,e,g,p,u)),!(o.path==null&&!o.index)&&e.push({path:p,score:Eb(p,o.index),routesMeta:g})};return t.forEach((o,c)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))i(o,c);else for(let d of Y1(o.path))i(o,c,!0,d)}),e}function Y1(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Y1(r.join("/")),c=[];return c.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function yb(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Cb(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var xb=/^:[\w-]+$/,vb=3,_b=2,wb=1,Sb=10,bb=-2,Xg=t=>t==="*";function Eb(t,e){let n=t.split("/"),r=n.length;return n.some(Xg)&&(r+=bb),e&&(r+=_b),n.filter(s=>!Xg(s)).reduce((s,i)=>s+(xb.test(i)?vb:i===""?wb:Sb),r)}function Cb(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Ib(t,e,n=!1){let{routesMeta:r}=t,s={},i="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",p=Yc({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),g=u.route;if(!p&&d&&n&&!r[r.length-1].route.index&&(p=Yc({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:Lr([i,p.pathname]),pathnameBase:Pb(Lr([i,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(i=Lr([i,p.pathnameBase]))}return o}function Yc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=jb(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((d,{paramName:f,isOptional:p},g)=>{if(f==="*"){let v=c[g]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const j=c[g];return p&&!j?d[f]=void 0:d[f]=(j||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function jb(t,e=!1,n=!0){ur(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function kb(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ur(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Wr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var Tb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Nb=t=>Tb.test(t);function Rb(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?_o(t):t,i;if(n)if(Nb(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),ur(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${n}`)}n.startsWith("/")?i=Zg(n.substring(1),"/"):i=Zg(n,e)}else i=e;return{pathname:i,search:Ob(r),hash:Db(s)}}function Zg(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Od(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Ab(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Q1(t){let e=Ab(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function J1(t,e,n,r=!1){let s;typeof t=="string"?s=_o(t):(s={...t},bt(!s.pathname||!s.pathname.includes("?"),Od("?","pathname","search",s)),bt(!s.pathname||!s.pathname.includes("#"),Od("#","pathname","hash",s)),bt(!s.search||!s.search.includes("#"),Od("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,c;if(o==null)c=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;s.pathname=g.join("/")}c=p>=0?e[p]:"/"}let u=Rb(s,c),d=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}var Lr=t=>t.join("/").replace(/\/\/+/g,"/"),Pb=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Ob=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Db=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Mb(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function Lb(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var X1=["POST","PUT","PATCH","DELETE"];new Set(X1);var Fb=["GET",...X1];new Set(Fb);var wo=y.createContext(null);wo.displayName="DataRouter";var Ru=y.createContext(null);Ru.displayName="DataRouterState";y.createContext(!1);var Z1=y.createContext({isTransitioning:!1});Z1.displayName="ViewTransition";var zb=y.createContext(new Map);zb.displayName="Fetchers";var Bb=y.createContext(null);Bb.displayName="Await";var dr=y.createContext(null);dr.displayName="Navigation";var sl=y.createContext(null);sl.displayName="Location";var Gr=y.createContext({outlet:null,matches:[],isDataRoute:!1});Gr.displayName="Route";var gp=y.createContext(null);gp.displayName="RouteError";function Ub(t,{relative:e}={}){bt(il(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=y.useContext(dr),{hash:s,pathname:i,search:o}=ol(t,{relative:e}),c=i;return n!=="/"&&(c=i==="/"?n:Lr([n,i])),r.createHref({pathname:c,search:o,hash:s})}function il(){return y.useContext(sl)!=null}function Ds(){return bt(il(),"useLocation() may be used only in the context of a <Router> component."),y.useContext(sl).location}var ev="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function tv(t){y.useContext(dr).static||y.useLayoutEffect(t)}function Ln(){let{isDataRoute:t}=y.useContext(Gr);return t?eE():$b()}function $b(){bt(il(),"useNavigate() may be used only in the context of a <Router> component.");let t=y.useContext(wo),{basename:e,navigator:n}=y.useContext(dr),{matches:r}=y.useContext(Gr),{pathname:s}=Ds(),i=JSON.stringify(Q1(r)),o=y.useRef(!1);return tv(()=>{o.current=!0}),y.useCallback((u,d={})=>{if(ur(o.current,ev),!o.current)return;if(typeof u=="number"){n.go(u);return}let f=J1(u,JSON.parse(i),s,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Lr([e,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[e,n,i,s,t])}y.createContext(null);function ol(t,{relative:e}={}){let{matches:n}=y.useContext(Gr),{pathname:r}=Ds(),s=JSON.stringify(Q1(n));return y.useMemo(()=>J1(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function Wb(t,e){return nv(t,e)}function nv(t,e,n,r,s){var _;bt(il(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=y.useContext(dr),{matches:o}=y.useContext(Gr),c=o[o.length-1],u=c?c.params:{},d=c?c.pathname:"/",f=c?c.pathnameBase:"/",p=c&&c.route;{let w=p&&p.path||"";rv(d,!p||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let g=Ds(),j;if(e){let w=typeof e=="string"?_o(e):e;bt(f==="/"||((_=w.pathname)==null?void 0:_.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${w.pathname}" was given in the \`location\` prop.`),j=w}else j=g;let v=j.pathname||"/",N=v;if(f!=="/"){let w=f.replace(/^\//,"").split("/");N="/"+v.replace(/^\//,"").split("/").slice(w.length).join("/")}let R=G1(t,{pathname:N});ur(p||R!=null,`No routes matched location "${j.pathname}${j.search}${j.hash}" `),ur(R==null||R[R.length-1].route.element!==void 0||R[R.length-1].route.Component!==void 0||R[R.length-1].route.lazy!==void 0,`Matched leaf route at location "${j.pathname}${j.search}${j.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=qb(R&&R.map(w=>Object.assign({},w,{params:Object.assign({},u,w.params),pathname:Lr([f,i.encodeLocation?i.encodeLocation(w.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?f:Lr([f,i.encodeLocation?i.encodeLocation(w.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathnameBase])})),o,n,r,s);return e&&b?y.createElement(sl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...j},navigationType:"POP"}},b):b}function Hb(){let t=Zb(),e=Mb(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=y.createElement(y.Fragment,null,y.createElement("p",null," Hey developer "),y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",y.createElement("code",{style:i},"ErrorBoundary")," or"," ",y.createElement("code",{style:i},"errorElement")," prop on your route.")),y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},e),n?y.createElement("pre",{style:s},n):null,o)}var Vb=y.createElement(Hb,null),Kb=class extends y.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?y.createElement(Gr.Provider,{value:this.props.routeContext},y.createElement(gp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Gb({routeContext:t,match:e,children:n}){let r=y.useContext(wo);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),y.createElement(Gr.Provider,{value:t},n)}function qb(t,e=[],n=null,r=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=n==null?void 0:n.errors;if(o!=null){let f=i.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);bt(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,f+1))}let c=!1,u=-1;if(n)for(let f=0;f<i.length;f++){let p=i[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=f),p.route.id){let{loaderData:g,errors:j}=n,v=p.route.loader&&!g.hasOwnProperty(p.route.id)&&(!j||j[p.route.id]===void 0);if(p.route.lazy||v){c=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}let d=n&&r?(f,p)=>{var g,j;r(f,{location:n.location,params:((j=(g=n.matches)==null?void 0:g[0])==null?void 0:j.params)??{},unstable_pattern:Lb(n.matches),errorInfo:p})}:void 0;return i.reduceRight((f,p,g)=>{let j,v=!1,N=null,R=null;n&&(j=o&&p.route.id?o[p.route.id]:void 0,N=p.route.errorElement||Vb,c&&(u<0&&g===0?(rv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,R=null):u===g&&(v=!0,R=p.route.hydrateFallbackElement||null)));let b=e.concat(i.slice(0,g+1)),_=()=>{let w;return j?w=N:v?w=R:p.route.Component?w=y.createElement(p.route.Component,null):p.route.element?w=p.route.element:w=f,y.createElement(Gb,{match:p,routeContext:{outlet:f,matches:b,isDataRoute:n!=null},children:w})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?y.createElement(Kb,{location:n.location,revalidation:n.revalidation,component:N,error:j,children:_(),routeContext:{outlet:null,matches:b,isDataRoute:!0},onError:d}):_()},null)}function yp(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Yb(t){let e=y.useContext(wo);return bt(e,yp(t)),e}function Qb(t){let e=y.useContext(Ru);return bt(e,yp(t)),e}function Jb(t){let e=y.useContext(Gr);return bt(e,yp(t)),e}function xp(t){let e=Jb(t),n=e.matches[e.matches.length-1];return bt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function Xb(){return xp("useRouteId")}function Zb(){var r;let t=y.useContext(gp),e=Qb("useRouteError"),n=xp("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function eE(){let{router:t}=Yb("useNavigate"),e=xp("useNavigate"),n=y.useRef(!1);return tv(()=>{n.current=!0}),y.useCallback(async(s,i={})=>{ur(n.current,ev),n.current&&(typeof s=="number"?await t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var e0={};function rv(t,e,n){!e&&!e0[t]&&(e0[t]=!0,ur(!1,n))}y.memo(tE);function tE({routes:t,future:e,state:n,unstable_onError:r}){return nv(t,void 0,n,r,e)}function hn(t){bt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function nE({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:i=!1,unstable_useTransitions:o}){bt(!il(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),u=y.useMemo(()=>({basename:c,navigator:s,static:i,unstable_useTransitions:o,future:{}}),[c,s,i,o]);typeof n=="string"&&(n=_o(n));let{pathname:d="/",search:f="",hash:p="",state:g=null,key:j="default"}=n,v=y.useMemo(()=>{let N=Wr(d,c);return N==null?null:{location:{pathname:N,search:f,hash:p,state:g,key:j},navigationType:r}},[c,d,f,p,g,j,r]);return ur(v!=null,`<Router basename="${c}"> is not able to match the URL "${d}${f}${p}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:y.createElement(dr.Provider,{value:u},y.createElement(sl.Provider,{children:e,value:v}))}function rE({children:t,location:e}){return Wb(Qh(t),e)}function Qh(t,e=[]){let n=[];return y.Children.forEach(t,(r,s)=>{if(!y.isValidElement(r))return;let i=[...e,s];if(r.type===y.Fragment){n.push.apply(n,Qh(r.props.children,i));return}bt(r.type===hn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),bt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Qh(r.props.children,i)),n.push(o)}),n}var xc="get",vc="application/x-www-form-urlencoded";function Au(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function sE(t){return Au(t)&&t.tagName.toLowerCase()==="button"}function iE(t){return Au(t)&&t.tagName.toLowerCase()==="form"}function oE(t){return Au(t)&&t.tagName.toLowerCase()==="input"}function aE(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function lE(t,e){return t.button===0&&(!e||e==="_self")&&!aE(t)}var Zl=null;function cE(){if(Zl===null)try{new FormData(document.createElement("form"),0),Zl=!1}catch{Zl=!0}return Zl}var uE=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Dd(t){return t!=null&&!uE.has(t)?(ur(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${vc}"`),null):t}function dE(t,e){let n,r,s,i,o;if(iE(t)){let c=t.getAttribute("action");r=c?Wr(c,e):null,n=t.getAttribute("method")||xc,s=Dd(t.getAttribute("enctype"))||vc,i=new FormData(t)}else if(sE(t)||oE(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||c.getAttribute("action");if(r=u?Wr(u,e):null,n=t.getAttribute("formmethod")||c.getAttribute("method")||xc,s=Dd(t.getAttribute("formenctype"))||Dd(c.getAttribute("enctype"))||vc,i=new FormData(c,t),!cE()){let{name:d,type:f,value:p}=t;if(f==="image"){let g=d?`${d}.`:"";i.append(`${g}x`,"0"),i.append(`${g}y`,"0")}else d&&i.append(d,p)}}else{if(Au(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=xc,r=null,s=vc,o=t}return i&&s==="text/plain"&&(o=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function vp(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function hE(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Wr(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function fE(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function pE(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function mE(t,e,n){let r=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let o=await fE(i,n);return o.links?o.links():[]}return[]}));return vE(r.flat(1).filter(pE).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function t0(t,e,n,r,s,i){let o=(u,d)=>n[d]?u.route.id!==n[d].route.id:!0,c=(u,d)=>{var f;return n[d].pathname!==u.pathname||((f=n[d].route.path)==null?void 0:f.endsWith("*"))&&n[d].params["*"]!==u.params["*"]};return i==="assets"?e.filter((u,d)=>o(u,d)||c(u,d)):i==="data"?e.filter((u,d)=>{var p;let f=r.routes[u.route.id];if(!f||!f.hasLoader)return!1;if(o(u,d)||c(u,d))return!0;if(u.route.shouldRevalidate){let g=u.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((p=n[0])==null?void 0:p.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function gE(t,e,{includeHydrateFallback:n}={}){return yE(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function yE(t){return[...new Set(t)]}function xE(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function vE(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let i=JSON.stringify(xE(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}function sv(){let t=y.useContext(wo);return vp(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function _E(){let t=y.useContext(Ru);return vp(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var _p=y.createContext(void 0);_p.displayName="FrameworkContext";function iv(){let t=y.useContext(_p);return vp(t,"You must render this element inside a <HydratedRouter> element"),t}function wE(t,e){let n=y.useContext(_p),[r,s]=y.useState(!1),[i,o]=y.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:d,onMouseLeave:f,onTouchStart:p}=e,g=y.useRef(null);y.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let N=b=>{b.forEach(_=>{o(_.isIntersecting)})},R=new IntersectionObserver(N,{threshold:.5});return g.current&&R.observe(g.current),()=>{R.disconnect()}}},[t]),y.useEffect(()=>{if(r){let N=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(N)}}},[r]);let j=()=>{s(!0)},v=()=>{s(!1),o(!1)};return n?t!=="intent"?[i,g,{}]:[i,g,{onFocus:Vo(c,j),onBlur:Vo(u,v),onMouseEnter:Vo(d,j),onMouseLeave:Vo(f,v),onTouchStart:Vo(p,j)}]:[!1,g,{}]}function Vo(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function SE({page:t,...e}){let{router:n}=sv(),r=y.useMemo(()=>G1(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?y.createElement(EE,{page:t,matches:r,...e}):null}function bE(t){let{manifest:e,routeModules:n}=iv(),[r,s]=y.useState([]);return y.useEffect(()=>{let i=!1;return mE(t,e,n).then(o=>{i||s(o)}),()=>{i=!0}},[t,e,n]),r}function EE({page:t,matches:e,...n}){let r=Ds(),{manifest:s,routeModules:i}=iv(),{basename:o}=sv(),{loaderData:c,matches:u}=_E(),d=y.useMemo(()=>t0(t,e,u,s,r,"data"),[t,e,u,s,r]),f=y.useMemo(()=>t0(t,e,u,s,r,"assets"),[t,e,u,s,r]),p=y.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let v=new Set,N=!1;if(e.forEach(b=>{var w;let _=s.routes[b.route.id];!_||!_.hasLoader||(!d.some(P=>P.route.id===b.route.id)&&b.route.id in c&&((w=i[b.route.id])!=null&&w.shouldRevalidate)||_.hasClientLoader?N=!0:v.add(b.route.id))}),v.size===0)return[];let R=hE(t,o,"data");return N&&v.size>0&&R.searchParams.set("_routes",e.filter(b=>v.has(b.route.id)).map(b=>b.route.id).join(",")),[R.pathname+R.search]},[o,c,r,s,d,e,t,i]),g=y.useMemo(()=>gE(f,s),[f,s]),j=bE(f);return y.createElement(y.Fragment,null,p.map(v=>y.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...n})),g.map(v=>y.createElement("link",{key:v,rel:"modulepreload",href:v,...n})),j.map(({key:v,link:N})=>y.createElement("link",{key:v,nonce:n.nonce,...N})))}function CE(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var ov=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ov&&(window.__reactRouterVersion="7.10.1")}catch{}function IE({basename:t,children:e,unstable_useTransitions:n,window:r}){let s=y.useRef();s.current==null&&(s.current=hb({window:r,v5Compat:!0}));let i=s.current,[o,c]=y.useState({action:i.action,location:i.location}),u=y.useCallback(d=>{n===!1?c(d):y.startTransition(()=>c(d))},[n]);return y.useLayoutEffect(()=>i.listen(u),[i,u]),y.createElement(nE,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:i,unstable_useTransitions:n===!0})}var av=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ve=y.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:o,state:c,target:u,to:d,preventScrollReset:f,viewTransition:p,...g},j){let{basename:v,unstable_useTransitions:N}=y.useContext(dr),R=typeof d=="string"&&av.test(d),b,_=!1;if(typeof d=="string"&&R&&(b=d,ov))try{let k=new URL(window.location.href),T=d.startsWith("//")?new URL(k.protocol+d):new URL(d),A=Wr(T.pathname,v);T.origin===k.origin&&A!=null?d=A+T.search+T.hash:_=!0}catch{ur(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=Ub(d,{relative:s}),[P,V,X]=wE(r,g),C=NE(d,{replace:o,state:c,target:u,preventScrollReset:f,relative:s,viewTransition:p,unstable_useTransitions:N});function x(k){e&&e(k),k.defaultPrevented||C(k)}let E=y.createElement("a",{...g,...X,href:b||w,onClick:_||i?e:x,ref:CE(j,V),target:u,"data-discover":!R&&n==="render"?"true":void 0});return P&&!R?y.createElement(y.Fragment,null,E,y.createElement(SE,{page:w})):E});ve.displayName="Link";var jE=y.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:o,viewTransition:c,children:u,...d},f){let p=ol(o,{relative:d.relative}),g=Ds(),j=y.useContext(Ru),{navigator:v,basename:N}=y.useContext(dr),R=j!=null&&DE(p)&&c===!0,b=v.encodeLocation?v.encodeLocation(p).pathname:p.pathname,_=g.pathname,w=j&&j.navigation&&j.navigation.location?j.navigation.location.pathname:null;n||(_=_.toLowerCase(),w=w?w.toLowerCase():null,b=b.toLowerCase()),w&&N&&(w=Wr(w,N)||w);const P=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let V=_===b||!s&&_.startsWith(b)&&_.charAt(P)==="/",X=w!=null&&(w===b||!s&&w.startsWith(b)&&w.charAt(b.length)==="/"),C={isActive:V,isPending:X,isTransitioning:R},x=V?e:void 0,E;typeof r=="function"?E=r(C):E=[r,V?"active":null,X?"pending":null,R?"transitioning":null].filter(Boolean).join(" ");let k=typeof i=="function"?i(C):i;return y.createElement(ve,{...d,"aria-current":x,className:E,ref:f,style:k,to:o,viewTransition:c},typeof u=="function"?u(C):u)});jE.displayName="NavLink";var kE=y.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:i,method:o=xc,action:c,onSubmit:u,relative:d,preventScrollReset:f,viewTransition:p,...g},j)=>{let{unstable_useTransitions:v}=y.useContext(dr),N=PE(),R=OE(c,{relative:d}),b=o.toLowerCase()==="get"?"get":"post",_=typeof c=="string"&&av.test(c),w=P=>{if(u&&u(P),P.defaultPrevented)return;P.preventDefault();let V=P.nativeEvent.submitter,X=(V==null?void 0:V.getAttribute("formmethod"))||o,C=()=>N(V||P.currentTarget,{fetcherKey:e,method:X,navigate:n,replace:s,state:i,relative:d,preventScrollReset:f,viewTransition:p});v&&n!==!1?y.startTransition(()=>C()):C()};return y.createElement("form",{ref:j,method:b,action:R,onSubmit:r?u:w,...g,"data-discover":!_&&t==="render"?"true":void 0})});kE.displayName="Form";function TE(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lv(t){let e=y.useContext(wo);return bt(e,TE(t)),e}function NE(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:o,unstable_useTransitions:c}={}){let u=Ln(),d=Ds(),f=ol(t,{relative:i});return y.useCallback(p=>{if(lE(p,e)){p.preventDefault();let g=n!==void 0?n:La(d)===La(f),j=()=>u(t,{replace:g,state:r,preventScrollReset:s,relative:i,viewTransition:o});c?y.startTransition(()=>j()):j()}},[d,u,f,n,r,e,t,s,i,o,c])}var RE=0,AE=()=>`__${String(++RE)}__`;function PE(){let{router:t}=lv("useSubmit"),{basename:e}=y.useContext(dr),n=Xb(),r=t.fetch,s=t.navigate;return y.useCallback(async(i,o={})=>{let{action:c,method:u,encType:d,formData:f,body:p}=dE(i,e);if(o.navigate===!1){let g=o.fetcherKey||AE();await r(g,n,o.action||c,{preventScrollReset:o.preventScrollReset,formData:f,body:p,formMethod:o.method||u,formEncType:o.encType||d,flushSync:o.flushSync})}else await s(o.action||c,{preventScrollReset:o.preventScrollReset,formData:f,body:p,formMethod:o.method||u,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,s,e,n])}function OE(t,{relative:e}={}){let{basename:n}=y.useContext(dr),r=y.useContext(Gr);bt(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...ol(t||".",{relative:e})},o=Ds();if(t==null){i.search=o.search;let c=new URLSearchParams(i.search),u=c.getAll("index");if(u.some(f=>f==="")){c.delete("index"),u.filter(p=>p).forEach(p=>c.append("index",p));let f=c.toString();i.search=f?`?${f}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:Lr([n,i.pathname])),La(i)}function DE(t,{relative:e}={}){let n=y.useContext(Z1);bt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=lv("useViewTransitionState"),s=ol(t,{relative:e});if(!n.isTransitioning)return!1;let i=Wr(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Wr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Yc(s.pathname,o)!=null||Yc(s.pathname,i)!=null}function cv(t,e){return function(){return t.apply(e,arguments)}}const{toString:ME}=Object.prototype,{getPrototypeOf:wp}=Object,{iterator:Pu,toStringTag:uv}=Symbol,Ou=(t=>e=>{const n=ME.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),hr=t=>(t=t.toLowerCase(),e=>Ou(e)===t),Du=t=>e=>typeof e===t,{isArray:So}=Array,oo=Du("undefined");function al(t){return t!==null&&!oo(t)&&t.constructor!==null&&!oo(t.constructor)&&kn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const dv=hr("ArrayBuffer");function LE(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&dv(t.buffer),e}const FE=Du("string"),kn=Du("function"),hv=Du("number"),ll=t=>t!==null&&typeof t=="object",zE=t=>t===!0||t===!1,_c=t=>{if(Ou(t)!=="object")return!1;const e=wp(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(uv in t)&&!(Pu in t)},BE=t=>{if(!ll(t)||al(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},UE=hr("Date"),$E=hr("File"),WE=hr("Blob"),HE=hr("FileList"),VE=t=>ll(t)&&kn(t.pipe),KE=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||kn(t.append)&&((e=Ou(t))==="formdata"||e==="object"&&kn(t.toString)&&t.toString()==="[object FormData]"))},GE=hr("URLSearchParams"),[qE,YE,QE,JE]=["ReadableStream","Request","Response","Headers"].map(hr),XE=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function cl(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),So(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{if(al(t))return;const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let c;for(r=0;r<o;r++)c=i[r],e.call(null,t[c],c,t)}}function fv(t,e){if(al(t))return null;e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const Zs=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,pv=t=>!oo(t)&&t!==Zs;function Jh(){const{caseless:t,skipUndefined:e}=pv(this)&&this||{},n={},r=(s,i)=>{const o=t&&fv(n,i)||i;_c(n[o])&&_c(s)?n[o]=Jh(n[o],s):_c(s)?n[o]=Jh({},s):So(s)?n[o]=s.slice():(!e||!oo(s))&&(n[o]=s)};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&cl(arguments[s],r);return n}const ZE=(t,e,n,{allOwnKeys:r}={})=>(cl(e,(s,i)=>{n&&kn(s)?t[i]=cv(s,n):t[i]=s},{allOwnKeys:r}),t),eC=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),tC=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},nC=(t,e,n,r)=>{let s,i,o;const c={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!r||r(o,t,e))&&!c[o]&&(e[o]=t[o],c[o]=!0);t=n!==!1&&wp(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},rC=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},sC=t=>{if(!t)return null;if(So(t))return t;let e=t.length;if(!hv(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},iC=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&wp(Uint8Array)),oC=(t,e)=>{const r=(t&&t[Pu]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},aC=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},lC=hr("HTMLFormElement"),cC=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),n0=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),uC=hr("RegExp"),mv=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};cl(n,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(r[i]=o||s)}),Object.defineProperties(t,r)},dC=t=>{mv(t,(e,n)=>{if(kn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(kn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},hC=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return So(t)?r(t):r(String(t).split(e)),n},fC=()=>{},pC=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function mC(t){return!!(t&&kn(t.append)&&t[uv]==="FormData"&&t[Pu])}const gC=t=>{const e=new Array(10),n=(r,s)=>{if(ll(r)){if(e.indexOf(r)>=0)return;if(al(r))return r;if(!("toJSON"in r)){e[s]=r;const i=So(r)?[]:{};return cl(r,(o,c)=>{const u=n(o,s+1);!oo(u)&&(i[c]=u)}),e[s]=void 0,i}}return r};return n(t,0)},yC=hr("AsyncFunction"),xC=t=>t&&(ll(t)||kn(t))&&kn(t.then)&&kn(t.catch),gv=((t,e)=>t?setImmediate:e?((n,r)=>(Zs.addEventListener("message",({source:s,data:i})=>{s===Zs&&i===n&&r.length&&r.shift()()},!1),s=>{r.push(s),Zs.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",kn(Zs.postMessage)),vC=typeof queueMicrotask<"u"?queueMicrotask.bind(Zs):typeof process<"u"&&process.nextTick||gv,_C=t=>t!=null&&kn(t[Pu]),H={isArray:So,isArrayBuffer:dv,isBuffer:al,isFormData:KE,isArrayBufferView:LE,isString:FE,isNumber:hv,isBoolean:zE,isObject:ll,isPlainObject:_c,isEmptyObject:BE,isReadableStream:qE,isRequest:YE,isResponse:QE,isHeaders:JE,isUndefined:oo,isDate:UE,isFile:$E,isBlob:WE,isRegExp:uC,isFunction:kn,isStream:VE,isURLSearchParams:GE,isTypedArray:iC,isFileList:HE,forEach:cl,merge:Jh,extend:ZE,trim:XE,stripBOM:eC,inherits:tC,toFlatObject:nC,kindOf:Ou,kindOfTest:hr,endsWith:rC,toArray:sC,forEachEntry:oC,matchAll:aC,isHTMLForm:lC,hasOwnProperty:n0,hasOwnProp:n0,reduceDescriptors:mv,freezeMethods:dC,toObjectSet:hC,toCamelCase:cC,noop:fC,toFiniteNumber:pC,findKey:fv,global:Zs,isContextDefined:pv,isSpecCompliantForm:mC,toJSONObject:gC,isAsyncFn:yC,isThenable:xC,setImmediate:gv,asap:vC,isIterable:_C};function ze(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}H.inherits(ze,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:H.toJSONObject(this.config),code:this.code,status:this.status}}});const yv=ze.prototype,xv={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{xv[t]={value:t}});Object.defineProperties(ze,xv);Object.defineProperty(yv,"isAxiosError",{value:!0});ze.from=(t,e,n,r,s,i)=>{const o=Object.create(yv);H.toFlatObject(t,o,function(f){return f!==Error.prototype},d=>d!=="isAxiosError");const c=t&&t.message?t.message:"Error",u=e==null&&t?t.code:e;return ze.call(o,c,u,n,r,s),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",i&&Object.assign(o,i),o};const wC=null;function Xh(t){return H.isPlainObject(t)||H.isArray(t)}function vv(t){return H.endsWith(t,"[]")?t.slice(0,-2):t}function r0(t,e,n){return t?t.concat(e).map(function(s,i){return s=vv(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function SC(t){return H.isArray(t)&&!t.some(Xh)}const bC=H.toFlatObject(H,{},null,function(e){return/^is[A-Z]/.test(e)});function Mu(t,e,n){if(!H.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=H.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(N,R){return!H.isUndefined(R[N])});const r=n.metaTokens,s=n.visitor||f,i=n.dots,o=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&H.isSpecCompliantForm(e);if(!H.isFunction(s))throw new TypeError("visitor must be a function");function d(v){if(v===null)return"";if(H.isDate(v))return v.toISOString();if(H.isBoolean(v))return v.toString();if(!u&&H.isBlob(v))throw new ze("Blob is not supported. Use a Buffer instead.");return H.isArrayBuffer(v)||H.isTypedArray(v)?u&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function f(v,N,R){let b=v;if(v&&!R&&typeof v=="object"){if(H.endsWith(N,"{}"))N=r?N:N.slice(0,-2),v=JSON.stringify(v);else if(H.isArray(v)&&SC(v)||(H.isFileList(v)||H.endsWith(N,"[]"))&&(b=H.toArray(v)))return N=vv(N),b.forEach(function(w,P){!(H.isUndefined(w)||w===null)&&e.append(o===!0?r0([N],P,i):o===null?N:N+"[]",d(w))}),!1}return Xh(v)?!0:(e.append(r0(R,N,i),d(v)),!1)}const p=[],g=Object.assign(bC,{defaultVisitor:f,convertValue:d,isVisitable:Xh});function j(v,N){if(!H.isUndefined(v)){if(p.indexOf(v)!==-1)throw Error("Circular reference detected in "+N.join("."));p.push(v),H.forEach(v,function(b,_){(!(H.isUndefined(b)||b===null)&&s.call(e,b,H.isString(_)?_.trim():_,N,g))===!0&&j(b,N?N.concat(_):[_])}),p.pop()}}if(!H.isObject(t))throw new TypeError("data must be an object");return j(t),e}function s0(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Sp(t,e){this._pairs=[],t&&Mu(t,this,e)}const _v=Sp.prototype;_v.append=function(e,n){this._pairs.push([e,n])};_v.toString=function(e){const n=e?function(r){return e.call(this,r,s0)}:s0;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function EC(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function wv(t,e,n){if(!e)return t;const r=n&&n.encode||EC;H.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(s?i=s(e,n):i=H.isURLSearchParams(e)?e.toString():new Sp(e,n).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class i0{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){H.forEach(this.handlers,function(r){r!==null&&e(r)})}}const Sv={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},CC=typeof URLSearchParams<"u"?URLSearchParams:Sp,IC=typeof FormData<"u"?FormData:null,jC=typeof Blob<"u"?Blob:null,kC={isBrowser:!0,classes:{URLSearchParams:CC,FormData:IC,Blob:jC},protocols:["http","https","file","blob","url","data"]},bp=typeof window<"u"&&typeof document<"u",Zh=typeof navigator=="object"&&navigator||void 0,TC=bp&&(!Zh||["ReactNative","NativeScript","NS"].indexOf(Zh.product)<0),NC=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",RC=bp&&window.location.href||"http://localhost",AC=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:bp,hasStandardBrowserEnv:TC,hasStandardBrowserWebWorkerEnv:NC,navigator:Zh,origin:RC},Symbol.toStringTag,{value:"Module"})),cn={...AC,...kC};function PC(t,e){return Mu(t,new cn.classes.URLSearchParams,{visitor:function(n,r,s,i){return cn.isNode&&H.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function OC(t){return H.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function DC(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function bv(t){function e(n,r,s,i){let o=n[i++];if(o==="__proto__")return!0;const c=Number.isFinite(+o),u=i>=n.length;return o=!o&&H.isArray(s)?s.length:o,u?(H.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!c):((!s[o]||!H.isObject(s[o]))&&(s[o]=[]),e(n,r,s[o],i)&&H.isArray(s[o])&&(s[o]=DC(s[o])),!c)}if(H.isFormData(t)&&H.isFunction(t.entries)){const n={};return H.forEachEntry(t,(r,s)=>{e(OC(r),s,n,0)}),n}return null}function MC(t,e,n){if(H.isString(t))try{return(e||JSON.parse)(t),H.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const ul={transitional:Sv,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=H.isObject(e);if(i&&H.isHTMLForm(e)&&(e=new FormData(e)),H.isFormData(e))return s?JSON.stringify(bv(e)):e;if(H.isArrayBuffer(e)||H.isBuffer(e)||H.isStream(e)||H.isFile(e)||H.isBlob(e)||H.isReadableStream(e))return e;if(H.isArrayBufferView(e))return e.buffer;if(H.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let c;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return PC(e,this.formSerializer).toString();if((c=H.isFileList(e))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Mu(c?{"files[]":e}:e,u&&new u,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),MC(e)):e}],transformResponse:[function(e){const n=this.transitional||ul.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(H.isResponse(e)||H.isReadableStream(e))return e;if(e&&H.isString(e)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e,this.parseReviver)}catch(c){if(o)throw c.name==="SyntaxError"?ze.from(c,ze.ERR_BAD_RESPONSE,this,null,this.response):c}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:cn.classes.FormData,Blob:cn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};H.forEach(["delete","get","head","post","put","patch"],t=>{ul.headers[t]={}});const LC=H.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),FC=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||e[n]&&LC[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},o0=Symbol("internals");function Ko(t){return t&&String(t).trim().toLowerCase()}function wc(t){return t===!1||t==null?t:H.isArray(t)?t.map(wc):String(t)}function zC(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const BC=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Md(t,e,n,r,s){if(H.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!H.isString(e)){if(H.isString(r))return e.indexOf(r)!==-1;if(H.isRegExp(r))return r.test(e)}}function UC(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function $C(t,e){const n=H.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,o){return this[r].call(this,e,s,i,o)},configurable:!0})})}let Tn=class{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(c,u,d){const f=Ko(u);if(!f)throw new Error("header name must be a non-empty string");const p=H.findKey(s,f);(!p||s[p]===void 0||d===!0||d===void 0&&s[p]!==!1)&&(s[p||u]=wc(c))}const o=(c,u)=>H.forEach(c,(d,f)=>i(d,f,u));if(H.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(H.isString(e)&&(e=e.trim())&&!BC(e))o(FC(e),n);else if(H.isObject(e)&&H.isIterable(e)){let c={},u,d;for(const f of e){if(!H.isArray(f))throw TypeError("Object iterator must return a key-value pair");c[d=f[0]]=(u=c[d])?H.isArray(u)?[...u,f[1]]:[u,f[1]]:f[1]}o(c,n)}else e!=null&&i(n,e,r);return this}get(e,n){if(e=Ko(e),e){const r=H.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return zC(s);if(H.isFunction(n))return n.call(this,s,r);if(H.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Ko(e),e){const r=H.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Md(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(o){if(o=Ko(o),o){const c=H.findKey(r,o);c&&(!n||Md(r,r[c],c,n))&&(delete r[c],s=!0)}}return H.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||Md(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return H.forEach(this,(s,i)=>{const o=H.findKey(r,i);if(o){n[o]=wc(s),delete n[i];return}const c=e?UC(i):String(i).trim();c!==i&&delete n[i],n[c]=wc(s),r[c]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return H.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&H.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[o0]=this[o0]={accessors:{}}).accessors,s=this.prototype;function i(o){const c=Ko(o);r[c]||($C(s,o),r[c]=!0)}return H.isArray(e)?e.forEach(i):i(e),this}};Tn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);H.reduceDescriptors(Tn.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});H.freezeMethods(Tn);function Ld(t,e){const n=this||ul,r=e||n,s=Tn.from(r.headers);let i=r.data;return H.forEach(t,function(c){i=c.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function Ev(t){return!!(t&&t.__CANCEL__)}function bo(t,e,n){ze.call(this,t??"canceled",ze.ERR_CANCELED,e,n),this.name="CanceledError"}H.inherits(bo,ze,{__CANCEL__:!0});function Cv(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new ze("Request failed with status code "+n.status,[ze.ERR_BAD_REQUEST,ze.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function WC(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function HC(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(u){const d=Date.now(),f=r[i];o||(o=d),n[s]=u,r[s]=d;let p=i,g=0;for(;p!==s;)g+=n[p++],p=p%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),d-o<e)return;const j=f&&d-f;return j?Math.round(g*1e3/j):void 0}}function VC(t,e){let n=0,r=1e3/e,s,i;const o=(d,f=Date.now())=>{n=f,s=null,i&&(clearTimeout(i),i=null),t(...d)};return[(...d)=>{const f=Date.now(),p=f-n;p>=r?o(d,f):(s=d,i||(i=setTimeout(()=>{i=null,o(s)},r-p)))},()=>s&&o(s)]}const Qc=(t,e,n=3)=>{let r=0;const s=HC(50,250);return VC(i=>{const o=i.loaded,c=i.lengthComputable?i.total:void 0,u=o-r,d=s(u),f=o<=c;r=o;const p={loaded:o,total:c,progress:c?o/c:void 0,bytes:u,rate:d||void 0,estimated:d&&c&&f?(c-o)/d:void 0,event:i,lengthComputable:c!=null,[e?"download":"upload"]:!0};t(p)},n)},a0=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},l0=t=>(...e)=>H.asap(()=>t(...e)),KC=cn.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,cn.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(cn.origin),cn.navigator&&/(msie|trident)/i.test(cn.navigator.userAgent)):()=>!0,GC=cn.hasStandardBrowserEnv?{write(t,e,n,r,s,i,o){if(typeof document>"u")return;const c=[`${t}=${encodeURIComponent(e)}`];H.isNumber(n)&&c.push(`expires=${new Date(n).toUTCString()}`),H.isString(r)&&c.push(`path=${r}`),H.isString(s)&&c.push(`domain=${s}`),i===!0&&c.push("secure"),H.isString(o)&&c.push(`SameSite=${o}`),document.cookie=c.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function qC(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function YC(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Iv(t,e,n){let r=!qC(e);return t&&(r||n==!1)?YC(t,e):e}const c0=t=>t instanceof Tn?{...t}:t;function hi(t,e){e=e||{};const n={};function r(d,f,p,g){return H.isPlainObject(d)&&H.isPlainObject(f)?H.merge.call({caseless:g},d,f):H.isPlainObject(f)?H.merge({},f):H.isArray(f)?f.slice():f}function s(d,f,p,g){if(H.isUndefined(f)){if(!H.isUndefined(d))return r(void 0,d,p,g)}else return r(d,f,p,g)}function i(d,f){if(!H.isUndefined(f))return r(void 0,f)}function o(d,f){if(H.isUndefined(f)){if(!H.isUndefined(d))return r(void 0,d)}else return r(void 0,f)}function c(d,f,p){if(p in e)return r(d,f);if(p in t)return r(void 0,d)}const u={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c,headers:(d,f,p)=>s(c0(d),c0(f),p,!0)};return H.forEach(Object.keys({...t,...e}),function(f){const p=u[f]||s,g=p(t[f],e[f],f);H.isUndefined(g)&&p!==c||(n[f]=g)}),n}const jv=t=>{const e=hi({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:c}=e;if(e.headers=o=Tn.from(o),e.url=wv(Iv(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),c&&o.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),H.isFormData(n)){if(cn.hasStandardBrowserEnv||cn.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(H.isFunction(n.getHeaders)){const u=n.getHeaders(),d=["content-type","content-length"];Object.entries(u).forEach(([f,p])=>{d.includes(f.toLowerCase())&&o.set(f,p)})}}if(cn.hasStandardBrowserEnv&&(r&&H.isFunction(r)&&(r=r(e)),r||r!==!1&&KC(e.url))){const u=s&&i&&GC.read(i);u&&o.set(s,u)}return e},QC=typeof XMLHttpRequest<"u",JC=QC&&function(t){return new Promise(function(n,r){const s=jv(t);let i=s.data;const o=Tn.from(s.headers).normalize();let{responseType:c,onUploadProgress:u,onDownloadProgress:d}=s,f,p,g,j,v;function N(){j&&j(),v&&v(),s.cancelToken&&s.cancelToken.unsubscribe(f),s.signal&&s.signal.removeEventListener("abort",f)}let R=new XMLHttpRequest;R.open(s.method.toUpperCase(),s.url,!0),R.timeout=s.timeout;function b(){if(!R)return;const w=Tn.from("getAllResponseHeaders"in R&&R.getAllResponseHeaders()),V={data:!c||c==="text"||c==="json"?R.responseText:R.response,status:R.status,statusText:R.statusText,headers:w,config:t,request:R};Cv(function(C){n(C),N()},function(C){r(C),N()},V),R=null}"onloadend"in R?R.onloadend=b:R.onreadystatechange=function(){!R||R.readyState!==4||R.status===0&&!(R.responseURL&&R.responseURL.indexOf("file:")===0)||setTimeout(b)},R.onabort=function(){R&&(r(new ze("Request aborted",ze.ECONNABORTED,t,R)),R=null)},R.onerror=function(P){const V=P&&P.message?P.message:"Network Error",X=new ze(V,ze.ERR_NETWORK,t,R);X.event=P||null,r(X),R=null},R.ontimeout=function(){let P=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const V=s.transitional||Sv;s.timeoutErrorMessage&&(P=s.timeoutErrorMessage),r(new ze(P,V.clarifyTimeoutError?ze.ETIMEDOUT:ze.ECONNABORTED,t,R)),R=null},i===void 0&&o.setContentType(null),"setRequestHeader"in R&&H.forEach(o.toJSON(),function(P,V){R.setRequestHeader(V,P)}),H.isUndefined(s.withCredentials)||(R.withCredentials=!!s.withCredentials),c&&c!=="json"&&(R.responseType=s.responseType),d&&([g,v]=Qc(d,!0),R.addEventListener("progress",g)),u&&R.upload&&([p,j]=Qc(u),R.upload.addEventListener("progress",p),R.upload.addEventListener("loadend",j)),(s.cancelToken||s.signal)&&(f=w=>{R&&(r(!w||w.type?new bo(null,t,R):w),R.abort(),R=null)},s.cancelToken&&s.cancelToken.subscribe(f),s.signal&&(s.signal.aborted?f():s.signal.addEventListener("abort",f)));const _=WC(s.url);if(_&&cn.protocols.indexOf(_)===-1){r(new ze("Unsupported protocol "+_+":",ze.ERR_BAD_REQUEST,t));return}R.send(i||null)})},XC=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,s;const i=function(d){if(!s){s=!0,c();const f=d instanceof Error?d:this.reason;r.abort(f instanceof ze?f:new bo(f instanceof Error?f.message:f))}};let o=e&&setTimeout(()=>{o=null,i(new ze(`timeout ${e} of ms exceeded`,ze.ETIMEDOUT))},e);const c=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),t=null)};t.forEach(d=>d.addEventListener("abort",i));const{signal:u}=r;return u.unsubscribe=()=>H.asap(c),u}},ZC=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,s;for(;r<n;)s=r+e,yield t.slice(r,s),r=s},eI=async function*(t,e){for await(const n of tI(t))yield*ZC(n,e)},tI=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},u0=(t,e,n,r)=>{const s=eI(t,e);let i=0,o,c=u=>{o||(o=!0,r&&r(u))};return new ReadableStream({async pull(u){try{const{done:d,value:f}=await s.next();if(d){c(),u.close();return}let p=f.byteLength;if(n){let g=i+=p;n(g)}u.enqueue(new Uint8Array(f))}catch(d){throw c(d),d}},cancel(u){return c(u),s.return()}},{highWaterMark:2})},d0=64*1024,{isFunction:ec}=H,nI=(({Request:t,Response:e})=>({Request:t,Response:e}))(H.global),{ReadableStream:h0,TextEncoder:f0}=H.global,p0=(t,...e)=>{try{return!!t(...e)}catch{return!1}},rI=t=>{t=H.merge.call({skipUndefined:!0},nI,t);const{fetch:e,Request:n,Response:r}=t,s=e?ec(e):typeof fetch=="function",i=ec(n),o=ec(r);if(!s)return!1;const c=s&&ec(h0),u=s&&(typeof f0=="function"?(v=>N=>v.encode(N))(new f0):async v=>new Uint8Array(await new n(v).arrayBuffer())),d=i&&c&&p0(()=>{let v=!1;const N=new n(cn.origin,{body:new h0,method:"POST",get duplex(){return v=!0,"half"}}).headers.has("Content-Type");return v&&!N}),f=o&&c&&p0(()=>H.isReadableStream(new r("").body)),p={stream:f&&(v=>v.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(v=>{!p[v]&&(p[v]=(N,R)=>{let b=N&&N[v];if(b)return b.call(N);throw new ze(`Response type '${v}' is not supported`,ze.ERR_NOT_SUPPORT,R)})});const g=async v=>{if(v==null)return 0;if(H.isBlob(v))return v.size;if(H.isSpecCompliantForm(v))return(await new n(cn.origin,{method:"POST",body:v}).arrayBuffer()).byteLength;if(H.isArrayBufferView(v)||H.isArrayBuffer(v))return v.byteLength;if(H.isURLSearchParams(v)&&(v=v+""),H.isString(v))return(await u(v)).byteLength},j=async(v,N)=>{const R=H.toFiniteNumber(v.getContentLength());return R??g(N)};return async v=>{let{url:N,method:R,data:b,signal:_,cancelToken:w,timeout:P,onDownloadProgress:V,onUploadProgress:X,responseType:C,headers:x,withCredentials:E="same-origin",fetchOptions:k}=jv(v),T=e||fetch;C=C?(C+"").toLowerCase():"text";let A=XC([_,w&&w.toAbortSignal()],P),I=null;const J=A&&A.unsubscribe&&(()=>{A.unsubscribe()});let Ee;try{if(X&&d&&R!=="get"&&R!=="head"&&(Ee=await j(x,b))!==0){let z=new n(N,{method:"POST",body:b,duplex:"half"}),ae;if(H.isFormData(b)&&(ae=z.headers.get("content-type"))&&x.setContentType(ae),z.body){const[_e,we]=a0(Ee,Qc(l0(X)));b=u0(z.body,d0,_e,we)}}H.isString(E)||(E=E?"include":"omit");const q=i&&"credentials"in n.prototype,ge={...k,signal:A,method:R.toUpperCase(),headers:x.normalize().toJSON(),body:b,duplex:"half",credentials:q?E:void 0};I=i&&new n(N,ge);let G=await(i?T(I,k):T(N,ge));const U=f&&(C==="stream"||C==="response");if(f&&(V||U&&J)){const z={};["status","statusText","headers"].forEach(ue=>{z[ue]=G[ue]});const ae=H.toFiniteNumber(G.headers.get("content-length")),[_e,we]=V&&a0(ae,Qc(l0(V),!0))||[];G=new r(u0(G.body,d0,_e,()=>{we&&we(),J&&J()}),z)}C=C||"text";let te=await p[H.findKey(p,C)||"text"](G,v);return!U&&J&&J(),await new Promise((z,ae)=>{Cv(z,ae,{data:te,headers:Tn.from(G.headers),status:G.status,statusText:G.statusText,config:v,request:I})})}catch(q){throw J&&J(),q&&q.name==="TypeError"&&/Load failed|fetch/i.test(q.message)?Object.assign(new ze("Network Error",ze.ERR_NETWORK,v,I),{cause:q.cause||q}):ze.from(q,q&&q.code,v,I)}}},sI=new Map,kv=t=>{let e=t&&t.env||{};const{fetch:n,Request:r,Response:s}=e,i=[r,s,n];let o=i.length,c=o,u,d,f=sI;for(;c--;)u=i[c],d=f.get(u),d===void 0&&f.set(u,d=c?new Map:rI(e)),f=d;return d};kv();const Ep={http:wC,xhr:JC,fetch:{get:kv}};H.forEach(Ep,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const m0=t=>`- ${t}`,iI=t=>H.isFunction(t)||t===null||t===!1;function oI(t,e){t=H.isArray(t)?t:[t];const{length:n}=t;let r,s;const i={};for(let o=0;o<n;o++){r=t[o];let c;if(s=r,!iI(r)&&(s=Ep[(c=String(r)).toLowerCase()],s===void 0))throw new ze(`Unknown adapter '${c}'`);if(s&&(H.isFunction(s)||(s=s.get(e))))break;i[c||"#"+o]=s}if(!s){const o=Object.entries(i).map(([u,d])=>`adapter ${u} `+(d===!1?"is not supported by the environment":"is not available in the build"));let c=n?o.length>1?`since :
`+o.map(m0).join(`
`):" "+m0(o[0]):"as no adapter specified";throw new ze("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return s}const Tv={getAdapter:oI,adapters:Ep};function Fd(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new bo(null,t)}function g0(t){return Fd(t),t.headers=Tn.from(t.headers),t.data=Ld.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Tv.getAdapter(t.adapter||ul.adapter,t)(t).then(function(r){return Fd(t),r.data=Ld.call(t,t.transformResponse,r),r.headers=Tn.from(r.headers),r},function(r){return Ev(r)||(Fd(t),r&&r.response&&(r.response.data=Ld.call(t,t.transformResponse,r.response),r.response.headers=Tn.from(r.response.headers))),Promise.reject(r)})}const Nv="1.13.2",Lu={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Lu[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const y0={};Lu.transitional=function(e,n,r){function s(i,o){return"[Axios v"+Nv+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,c)=>{if(e===!1)throw new ze(s(o," has been removed"+(n?" in "+n:"")),ze.ERR_DEPRECATED);return n&&!y0[o]&&(y0[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,c):!0}};Lu.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function aI(t,e,n){if(typeof t!="object")throw new ze("options must be an object",ze.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],o=e[i];if(o){const c=t[i],u=c===void 0||o(c,i,t);if(u!==!0)throw new ze("option "+i+" must be "+u,ze.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ze("Unknown option "+i,ze.ERR_BAD_OPTION)}}const Sc={assertOptions:aI,validators:Lu},gr=Sc.validators;let si=class{constructor(e){this.defaults=e||{},this.interceptors={request:new i0,response:new i0}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=hi(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&Sc.assertOptions(r,{silentJSONParsing:gr.transitional(gr.boolean),forcedJSONParsing:gr.transitional(gr.boolean),clarifyTimeoutError:gr.transitional(gr.boolean)},!1),s!=null&&(H.isFunction(s)?n.paramsSerializer={serialize:s}:Sc.assertOptions(s,{encode:gr.function,serialize:gr.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Sc.assertOptions(n,{baseUrl:gr.spelling("baseURL"),withXsrfToken:gr.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&H.merge(i.common,i[n.method]);i&&H.forEach(["delete","get","head","post","put","patch","common"],v=>{delete i[v]}),n.headers=Tn.concat(o,i);const c=[];let u=!0;this.interceptors.request.forEach(function(N){typeof N.runWhen=="function"&&N.runWhen(n)===!1||(u=u&&N.synchronous,c.unshift(N.fulfilled,N.rejected))});const d=[];this.interceptors.response.forEach(function(N){d.push(N.fulfilled,N.rejected)});let f,p=0,g;if(!u){const v=[g0.bind(this),void 0];for(v.unshift(...c),v.push(...d),g=v.length,f=Promise.resolve(n);p<g;)f=f.then(v[p++],v[p++]);return f}g=c.length;let j=n;for(;p<g;){const v=c[p++],N=c[p++];try{j=v(j)}catch(R){N.call(this,R);break}}try{f=g0.call(this,j)}catch(v){return Promise.reject(v)}for(p=0,g=d.length;p<g;)f=f.then(d[p++],d[p++]);return f}getUri(e){e=hi(this.defaults,e);const n=Iv(e.baseURL,e.url,e.allowAbsoluteUrls);return wv(n,e.params,e.paramsSerializer)}};H.forEach(["delete","get","head","options"],function(e){si.prototype[e]=function(n,r){return this.request(hi(r||{},{method:e,url:n,data:(r||{}).data}))}});H.forEach(["post","put","patch"],function(e){function n(r){return function(i,o,c){return this.request(hi(c||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}si.prototype[e]=n(),si.prototype[e+"Form"]=n(!0)});let lI=class Rv{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(c=>{r.subscribe(c),i=c}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,c){r.reason||(r.reason=new bo(i,o,c),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new Rv(function(s){e=s}),cancel:e}}};function cI(t){return function(n){return t.apply(null,n)}}function uI(t){return H.isObject(t)&&t.isAxiosError===!0}const ef={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(ef).forEach(([t,e])=>{ef[e]=t});function Av(t){const e=new si(t),n=cv(si.prototype.request,e);return H.extend(n,si.prototype,e,{allOwnKeys:!0}),H.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return Av(hi(t,s))},n}const Z=Av(ul);Z.Axios=si;Z.CanceledError=bo;Z.CancelToken=lI;Z.isCancel=Ev;Z.VERSION=Nv;Z.toFormData=Mu;Z.AxiosError=ze;Z.Cancel=Z.CanceledError;Z.all=function(e){return Promise.all(e)};Z.spread=cI;Z.isAxiosError=uI;Z.mergeConfig=hi;Z.AxiosHeaders=Tn;Z.formToJSON=t=>bv(H.isHTMLForm(t)?new FormData(t):t);Z.getAdapter=Tv.getAdapter;Z.HttpStatusCode=ef;Z.default=Z;const{Axios:OT,AxiosError:DT,CanceledError:MT,isCancel:LT,CancelToken:FT,VERSION:zT,all:BT,Cancel:UT,isAxiosError:$T,spread:WT,toFormData:HT,AxiosHeaders:VT,HttpStatusCode:KT,formToJSON:GT,getAdapter:qT,mergeConfig:YT}=Z;var Py,Oy;const dI=((Oy=(Py=import.meta)==null?void 0:Py.env)==null?void 0:Oy.VITE_API_BASE)||"https://gojo-teacher-web.onrender.com/api",hI=async(t,e)=>{try{return(await Z.post(`${dI}/teacher_login`,{username:t,password:e})).data}catch(n){return console.error("Login error:",n.response?n.response.data:n.message),{success:!1,message:"Network error or server not reachable"}}};function zd(){const t=Ln(),[e,n]=y.useState(""),[r,s]=y.useState(""),[i,o]=y.useState(""),c=async u=>{u.preventDefault(),o("");const d=await hI(e,r);d.success?(localStorage.setItem("teacher",JSON.stringify(d.teacher)),t("/dashboard")):o(d.message||"Login failed")};return l.jsx("div",{className:"auth-container",children:l.jsxs("div",{className:"auth-box",children:[l.jsx("h2",{children:"Teacher Login"}),i&&l.jsx("p",{className:"auth-error",children:i}),l.jsxs("form",{onSubmit:c,children:[l.jsx("input",{type:"text",placeholder:"Username",value:e,onChange:u=>n(u.target.value),required:!0}),l.jsx("input",{type:"password",placeholder:"Password",value:r,onChange:u=>s(u.target.value),required:!0}),l.jsx("button",{type:"submit",className:"submit-btn",children:"Login"})]}),l.jsxs("p",{className:"auth-link",children:["Don't have an account? ",l.jsx(ve,{to:"/register",children:"Register Here"})]})]})})}function fI(){Ln();const t=["7","8","9","10","11 Social","11 Natural","12 Social","12 Natural"],e=["A","B","C"],n={7:["Mathematics","Amharic","English","Biology","Physics","Chemistry","Geography","History","Civics","ICT","Oromifa","Physical Education"],8:["Mathematics","Amharic","English","Biology","Physics","Chemistry","Geography","History","Civics","ICT","Oromifa","Physical Education"],9:["Mathematics","English","Biology","Physics","Chemistry","Geography","History","Civics","ICT","Physical Education"],10:["Mathematics","English","Biology","Physics","Chemistry","Geography","History","Civics","ICT","Physical Education"],"11 Social":["Mathematics","English","Physics","Chemistry","Biology","Economics","Geography","History"],"11 Natural":["Mathematics","English","Physics","Chemistry","Biology","Economics","Geography","History"],"12 Social":["Mathematics","English","Physics","Chemistry","Biology","Economics","Geography","History"],"12 Natural":["Mathematics","English","Physics","Chemistry","Biology","Economics","Geography","History"]},[r,s]=y.useState({name:"",password:"",email:"",phone:"",gender:"",courses:[{grade:"",section:"",subject:""}]}),[i,o]=y.useState(null),[c,u]=y.useState(""),[d,f]=y.useState(""),p=(_,w=null)=>{const{name:P,value:V}=_.target;if(w!==null){const X=[...r.courses];X[w][P]=V,P==="grade"&&(X[w].subject=""),s({...r,courses:X})}else s({...r,[P]:V})},g=()=>{s({...r,courses:[...r.courses,{grade:"",section:"",subject:""}]})},j=_=>{const w=r.courses.filter((P,V)=>V!==_);s({...r,courses:w})},v=()=>{const _=new Set;for(let w of r.courses){if(!w.grade||!w.section||!w.subject)continue;const P=`${w.grade}${w.section}-${w.subject}`;if(_.has(P))return!0;_.add(P)}return!1},N=_=>_===""||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(_).toLowerCase()),R=_=>/^[0-9+()\-\s]{6,20}$/.test(String(_).trim()),b=async _=>{if(_.preventDefault(),u(""),f(""),!N(r.email)){u("Please enter a valid email address or leave it empty.");return}if(!R(r.phone)){u("Please enter a valid phone number.");return}if(!r.gender){u("Please select gender.");return}if(!r.name||!r.password){u("Name and password are required.");return}if(v()){u("Duplicate subject detected! A subject can only be taught once per grade and section.");return}try{const w=new FormData;w.append("name",r.name),w.append("password",r.password),w.append("email",r.email),w.append("phone",r.phone),w.append("gender",r.gender),w.append("courses",JSON.stringify(r.courses)),i&&w.append("profile",i);const V=await(await fetch("https://gojo-teacher-web.onrender.com/register/teacher",{method:"POST",body:w})).json();if(V.success){const X=V.teacherKey||V.teacherId||V.teacherKey||V.teacherId||"";f(X),s({name:"",password:"",email:"",phone:"",gender:"",courses:[{grade:"",section:"",subject:""}]}),o(null),u("Registration successful. Your teacherId (username) is shown below.")}else u(V.message||"Registration failed.")}catch(w){console.error("Registration error:",w),u("Server error. Check console.")}};return l.jsx("div",{className:"auth-container",children:l.jsxs("div",{className:"auth-box",style:{maxWidth:"600px"},children:[l.jsx("h2",{children:"Teacher Registration"}),c&&l.jsx("p",{className:"auth-error",children:c}),l.jsxs("form",{onSubmit:b,children:[l.jsx("input",{type:"text",name:"name",placeholder:"Full Name",value:r.name,onChange:p,required:!0}),l.jsx("input",{type:"email",name:"email",placeholder:"Email (optional)",value:r.email,onChange:p}),l.jsx("input",{type:"tel",name:"phone",placeholder:"Phone number",value:r.phone,onChange:p,required:!0}),l.jsxs("select",{name:"gender",value:r.gender,onChange:p,required:!0,children:[l.jsx("option",{value:"",children:"Select Gender"}),l.jsx("option",{value:"Male",children:"Male"}),l.jsx("option",{value:"Female",children:"Female"}),l.jsx("option",{value:"Other",children:"Other"}),l.jsx("option",{value:"Prefer not to say",children:"Prefer not to say"})]}),l.jsx("input",{type:"password",name:"password",placeholder:"Password",value:r.password,onChange:p,required:!0}),l.jsxs("div",{className:"profile-upload",children:[i&&l.jsx("img",{src:URL.createObjectURL(i),alt:"Profile Preview",className:"profile-preview"}),l.jsx("input",{type:"file",accept:"image/*",onChange:_=>o(_.target.files[0])})]}),l.jsx("h3",{children:"Courses"}),r.courses.map((_,w)=>l.jsxs("div",{className:"course-group",children:[l.jsxs("select",{name:"grade",value:_.grade,onChange:P=>p(P,w),required:!0,children:[l.jsx("option",{value:"",children:"Select Grade"}),t.map(P=>l.jsx("option",{value:P,children:P},P))]}),l.jsxs("select",{name:"section",value:_.section,onChange:P=>p(P,w),required:!0,children:[l.jsx("option",{value:"",children:"Select Section"}),e.map(P=>l.jsx("option",{value:P,children:P},P))]}),l.jsxs("select",{name:"subject",value:_.subject,onChange:P=>p(P,w),required:!0,disabled:!_.grade,children:[l.jsx("option",{value:"",children:"Select Subject"}),_.grade&&n[_.grade].map(P=>l.jsx("option",{value:P,children:P},P))]}),r.courses.length>1&&l.jsx("button",{type:"button",className:"remove-btn",onClick:()=>j(w),children:"Remove"})]},w)),l.jsx("button",{type:"button",className:"add-btn",onClick:g,children:"Add Course"}),l.jsx("button",{type:"submit",className:"submit-btn",children:"Register"})]}),d&&l.jsxs("div",{className:"auth-success",style:{marginTop:12},children:[l.jsxs("p",{children:["Registration complete. Your teacherId (username) is:"," ",l.jsx("strong",{children:d})]}),l.jsxs("p",{children:["Use this ID to log in: ",l.jsx(ve,{to:"/login",children:"Go to Login"})]})]}),l.jsxs("p",{className:"auth-link",children:["Already have an account? ",l.jsx(ve,{to:"/login",children:"Go to Login"})]})]})})}var Pv={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},x0=mn.createContext&&mn.createContext(Pv),pI=["attr","size","title"];function mI(t,e){if(t==null)return{};var n=gI(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function gI(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Jc(){return Jc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jc.apply(this,arguments)}function v0(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Xc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?v0(Object(n),!0).forEach(function(r){yI(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v0(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yI(t,e,n){return e=xI(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xI(t){var e=vI(t,"string");return typeof e=="symbol"?e:e+""}function vI(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ov(t){return t&&t.map((e,n)=>mn.createElement(e.tag,Xc({key:n},e.attr),Ov(e.child)))}function Tt(t){return e=>mn.createElement(_I,Jc({attr:Xc({},t.attr)},e),Ov(t.child))}function _I(t){var e=n=>{var{attr:r,size:s,title:i}=t,o=mI(t,pI),c=s||n.size||"1em",u;return n.className&&(u=n.className),t.className&&(u=(u?u+" ":"")+t.className),mn.createElement("svg",Jc({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:u,style:Xc(Xc({color:t.color||n.color},n.style),t.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),i&&mn.createElement("title",null,i),t.children)};return x0!==void 0?mn.createElement(x0.Consumer,null,n=>e(n)):e(Pv)}function Ms(t){return Tt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256.55 8C116.52 8 8 110.34 8 248.57c0 72.3 29.71 134.78 78.07 177.94 8.35 7.51 6.63 11.86 8.05 58.23A19.92 19.92 0 0 0 122 502.31c52.91-23.3 53.59-25.14 62.56-22.7C337.85 521.8 504 423.7 504 248.57 504 110.34 396.59 8 256.55 8zm149.24 185.13l-73 115.57a37.37 37.37 0 0 1-53.91 9.93l-58.08-43.47a15 15 0 0 0-18 0l-78.37 59.44c-10.46 7.93-24.16-4.6-17.11-15.67l73-115.57a37.36 37.36 0 0 1 53.91-9.93l58.06 43.46a15 15 0 0 0 18 0l78.41-59.38c10.44-7.98 24.14 4.54 17.09 15.62z"},child:[]}]})(t)}function wI(t){return Tt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(t)}function Ls(t){return Tt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(t)}function qr(t){return Tt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M208 352c-2.39 0-4.78.35-7.06 1.09C187.98 357.3 174.35 360 160 360c-14.35 0-27.98-2.7-40.95-6.91-2.28-.74-4.66-1.09-7.05-1.09C49.94 352-.33 402.48 0 464.62.14 490.88 21.73 512 48 512h224c26.27 0 47.86-21.12 48-47.38.33-62.14-49.94-112.62-112-112.62zm-48-32c53.02 0 96-42.98 96-96s-42.98-96-96-96-96 42.98-96 96 42.98 96 96 96zM592 0H208c-26.47 0-48 22.25-48 49.59V96c23.42 0 45.1 6.78 64 17.8V64h352v288h-64v-64H384v64h-76.24c19.1 16.69 33.12 38.73 39.69 64H592c26.47 0 48-22.25 48-49.59V49.59C640 22.25 618.47 0 592 0z"},child:[]}]})(t)}function ao(t){return Tt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(t)}function SI(t){return Tt({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(t)}function js(t){return Tt({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(t)}function Er(t){return Tt({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM192 40c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm121.2 231.8l-143 141.8c-4.7 4.7-12.3 4.6-17-.1l-82.6-83.3c-4.7-4.7-4.6-12.3.1-17L99.1 285c4.7-4.7 12.3-4.6 17 .1l46 46.4 106-105.2c4.7-4.7 12.3-4.6 17 .1l28.2 28.4c4.7 4.8 4.6 12.3-.1 17z"},child:[]}]})(t)}function Cr(t){return Tt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(t)}function Cp(t){return Tt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 32C114.6 32 0 125.1 0 240c0 49.6 21.4 95 57 130.7C44.5 421.1 2.7 466 2.2 466.5c-2.2 2.3-2.8 5.7-1.5 8.7S4.8 480 8 480c66.3 0 116-31.8 140.6-51.4 32.7 12.3 69 19.4 107.4 19.4 141.4 0 256-93.1 256-208S397.4 32 256 32zM128 272c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 0c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 0c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"},child:[]}]})(t)}function bI(t){return Tt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(t)}function EI(t){return Tt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"},child:[]}]})(t)}function Yr(t){return Tt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(t)}function Dv(t){return Tt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"},child:[]}]})(t)}function CI(t){return Tt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(t)}function _0(t){return Tt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"},child:[]}]})(t)}function II(t){return Tt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(t)}function Qr(t){return Tt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}function jI(t){return Tt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(t)}function kI(t){return Tt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M296 384h-80c-13.3 0-24-10.7-24-24V192h-87.7c-17.8 0-26.7-21.5-14.1-34.1L242.3 5.7c7.5-7.5 19.8-7.5 27.3 0l152.2 152.2c12.6 12.6 3.7 34.1-14.1 34.1H320v168c0 13.3-10.7 24-24 24zm216-8v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h136v8c0 30.9 25.1 56 56 56h80c30.9 0 56-25.1 56-56v-8h136c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(t)}function Ke(t){return Tt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(t)}function TI(t){return Tt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M458.4 64.3C400.6 15.7 311.3 23 256 79.3 200.7 23 111.4 15.6 53.6 64.3-21.6 127.6-10.6 230.8 43 285.5l175.4 178.7c10 10.2 23.4 15.9 37.6 15.9 14.3 0 27.6-5.6 37.6-15.8L469 285.6c53.5-54.7 64.7-157.9-10.6-221.3zm-23.6 187.5L259.4 430.5c-2.4 2.4-4.4 2.4-6.8 0L77.2 251.8c-36.5-37.2-43.9-107.6 7.3-150.7 38.9-32.7 98.9-27.8 136.5 10.5l35 35.7 35-35.7c37.8-38.5 97.8-43.2 136.5-10.6 51.1 43.1 43.5 113.9 7.3 150.8z"},child:[]}]})(t)}const NI=()=>{};var w0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le=function(t,e){if(!t)throw Eo(e)},Eo=function(t){return new Error("Firebase Database ("+Mv.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},RI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Ip={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,f=i>>2,p=(i&3)<<4|c>>4;let g=(c&15)<<2|d>>6,j=d&63;u||(j=64,o||(g=64)),r.push(n[f],n[p],n[g],n[j])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Lv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):RI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||d==null||p==null)throw new AI;const g=i<<2|c>>4;if(r.push(g),d!==64){const j=c<<4&240|d>>2;if(r.push(j),p!==64){const v=d<<6&192|p;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class AI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Fv=function(t){const e=Lv(t);return Ip.encodeByteArray(e,!0)},Zc=function(t){return Fv(t).replace(/\./g,"")},tf=function(t){try{return Ip.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(t){return zv(void 0,t)}function zv(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!OI(n)||(t[n]=zv(t[n],e[n]));return t}function OI(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI=()=>DI().__FIREBASE_DEFAULTS__,LI=()=>{if(typeof process>"u"||typeof w0>"u")return;const t=w0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},FI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&tf(t[1]);return e&&JSON.parse(e)},Bv=()=>{try{return NI()||MI()||LI()||FI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},zI=t=>{var e,n;return(n=(e=Bv())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},Uv=t=>{const e=zI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},$v=()=>{var t;return(t=Bv())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fu(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Wv(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Zc(JSON.stringify(n)),Zc(JSON.stringify(o)),""].join(".")}const da={};function BI(){const t={prod:[],emulator:[]};for(const e of Object.keys(da))da[e]?t.emulator.push(e):t.prod.push(e);return t}function UI(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let S0=!1;function Vv(t,e){if(typeof window>"u"||typeof document>"u"||!Fu(window.location.host)||da[t]===e||da[t]||S0)return;da[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=BI().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function c(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,j){g.setAttribute("width","24"),g.setAttribute("id",j),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{S0=!0,o()},g}function f(g,j){g.setAttribute("id",j),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=UI(r),j=n("text"),v=document.getElementById(j)||document.createElement("span"),N=n("learnmore"),R=document.getElementById(N)||document.createElement("a"),b=n("preprendIcon"),_=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const w=g.element;c(w),f(R,N);const P=d();u(_,b),w.append(_,v,R,P),document.body.appendChild(w)}i?(v.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",j)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Kv(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($I())}function WI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function HI(){return Mv.NODE_ADMIN===!0}function VI(){try{return typeof indexedDB=="object"}catch{return!1}}function KI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI="FirebaseError";class Co extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=GI,Object.setPrototypeOf(this,Co.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gv.prototype.create)}}class Gv{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?qI(i,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new Co(s,c,r)}}function qI(t,e){return t.replace(YI,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const YI=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fa(t){return JSON.parse(t)}function Bt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=Fa(tf(i[0])||""),n=Fa(tf(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},QI=function(t){const e=qv(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},JI=function(t){const e=qv(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function lo(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function b0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function eu(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function za(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(E0(i)&&E0(o)){if(!za(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function E0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let p=0;p<16;p++)r[p]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let p=0;p<16;p++)r[p]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let p=16;p<80;p++){const g=r[p-3]^r[p-8]^r[p-14]^r[p-16];r[p]=(g<<1|g>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],c=this.chain_[3],u=this.chain_[4],d,f;for(let p=0;p<80;p++){p<40?p<20?(d=c^i&(o^c),f=1518500249):(d=i^o^c,f=1859775393):p<60?(d=i&o|c&(i|o),f=2400959708):(d=i^o^c,f=3395469782);const g=(s<<5|s>>>27)+d+u+f+r[p]&4294967295;u=c,c=o,o=(i<<30|i>>>2)&4294967295,i=s,s=g}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function zu(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e4=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,le(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Bu=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(t){return t&&t._delegate?t._delegate:t}class co{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new dl;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(r4(e))try{this.getOrInitializeService({instanceIdentifier:Gs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Gs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Gs){return this.instances.has(e)}getOptions(e=Gs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:n4(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Gs){return this.component?this.component.multipleInstances?e:Gs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function n4(t){return t===Gs?void 0:t}function r4(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new t4(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(at||(at={}));const i4={debug:at.DEBUG,verbose:at.VERBOSE,info:at.INFO,warn:at.WARN,error:at.ERROR,silent:at.SILENT},o4=at.INFO,a4={[at.DEBUG]:"log",[at.VERBOSE]:"log",[at.INFO]:"info",[at.WARN]:"warn",[at.ERROR]:"error"},l4=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=a4[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class jp{constructor(e){this.name=e,this._logLevel=o4,this._logHandler=l4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in at))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?i4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,at.DEBUG,...e),this._logHandler(this,at.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,at.VERBOSE,...e),this._logHandler(this,at.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,at.INFO,...e),this._logHandler(this,at.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,at.WARN,...e),this._logHandler(this,at.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,at.ERROR,...e),this._logHandler(this,at.ERROR,...e)}}const c4=(t,e)=>e.some(n=>t instanceof n);let C0,I0;function u4(){return C0||(C0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function d4(){return I0||(I0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Yv=new WeakMap,nf=new WeakMap,Qv=new WeakMap,Bd=new WeakMap,kp=new WeakMap;function h4(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(_s(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Yv.set(n,t)}).catch(()=>{}),kp.set(e,t),e}function f4(t){if(nf.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});nf.set(t,e)}let rf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return nf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Qv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _s(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function p4(t){rf=t(rf)}function m4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ud(this),e,...n);return Qv.set(r,e.sort?e.sort():[e]),_s(r)}:d4().includes(t)?function(...e){return t.apply(Ud(this),e),_s(Yv.get(this))}:function(...e){return _s(t.apply(Ud(this),e))}}function g4(t){return typeof t=="function"?m4(t):(t instanceof IDBTransaction&&f4(t),c4(t,u4())?new Proxy(t,rf):t)}function _s(t){if(t instanceof IDBRequest)return h4(t);if(Bd.has(t))return Bd.get(t);const e=g4(t);return e!==t&&(Bd.set(t,e),kp.set(e,t)),e}const Ud=t=>kp.get(t);function y4(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=_s(o);return r&&o.addEventListener("upgradeneeded",u=>{r(_s(o.result),u.oldVersion,u.newVersion,_s(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const x4=["get","getKey","getAll","getAllKeys","count"],v4=["put","add","delete","clear"],$d=new Map;function j0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if($d.get(e))return $d.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=v4.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||x4.includes(n)))return;const i=async function(o,...c){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return $d.set(e,i),i}p4(t=>({...t,get:(e,n,r)=>j0(e,n)||t.get(e,n,r),has:(e,n)=>!!j0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(w4(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function w4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const sf="@firebase/app",k0="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr=new jp("@firebase/app"),S4="@firebase/app-compat",b4="@firebase/analytics-compat",E4="@firebase/analytics",C4="@firebase/app-check-compat",I4="@firebase/app-check",j4="@firebase/auth",k4="@firebase/auth-compat",T4="@firebase/database",N4="@firebase/data-connect",R4="@firebase/database-compat",A4="@firebase/functions",P4="@firebase/functions-compat",O4="@firebase/installations",D4="@firebase/installations-compat",M4="@firebase/messaging",L4="@firebase/messaging-compat",F4="@firebase/performance",z4="@firebase/performance-compat",B4="@firebase/remote-config",U4="@firebase/remote-config-compat",$4="@firebase/storage",W4="@firebase/storage-compat",H4="@firebase/firestore",V4="@firebase/ai",K4="@firebase/firestore-compat",G4="firebase",q4="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const of="[DEFAULT]",Y4={[sf]:"fire-core",[S4]:"fire-core-compat",[E4]:"fire-analytics",[b4]:"fire-analytics-compat",[I4]:"fire-app-check",[C4]:"fire-app-check-compat",[j4]:"fire-auth",[k4]:"fire-auth-compat",[T4]:"fire-rtdb",[N4]:"fire-data-connect",[R4]:"fire-rtdb-compat",[A4]:"fire-fn",[P4]:"fire-fn-compat",[O4]:"fire-iid",[D4]:"fire-iid-compat",[M4]:"fire-fcm",[L4]:"fire-fcm-compat",[F4]:"fire-perf",[z4]:"fire-perf-compat",[B4]:"fire-rc",[U4]:"fire-rc-compat",[$4]:"fire-gcs",[W4]:"fire-gcs-compat",[H4]:"fire-fst",[K4]:"fire-fst-compat",[V4]:"fire-vertex","fire-js":"fire-js",[G4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ba=new Map,Q4=new Map,af=new Map;function T0(t,e){try{t.container.addComponent(e)}catch(n){Hr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ua(t){const e=t.name;if(af.has(e))return Hr.debug(`There were multiple attempts to register component ${e}.`),!1;af.set(e,t);for(const n of Ba.values())T0(n,t);for(const n of Q4.values())T0(n,t);return!0}function Jv(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Xv(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ws=new Gv("app","Firebase",J4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new co("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ws.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv=q4;function e_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:of,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw ws.create("bad-app-name",{appName:String(s)});if(n||(n=$v()),!n)throw ws.create("no-options");const i=Ba.get(s);if(i){if(za(n,i.options)&&za(r,i.config))return i;throw ws.create("duplicate-app",{appName:s})}const o=new s4(s);for(const u of af.values())o.addComponent(u);const c=new X4(n,r,o);return Ba.set(s,c),c}function t_(t=of){const e=Ba.get(t);if(!e&&t===of&&$v())return e_();if(!e)throw ws.create("no-app",{appName:t});return e}function N0(){return Array.from(Ba.values())}function Ss(t,e,n){let r=Y4[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hr.warn(o.join(" "));return}Ua(new co(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z4="firebase-heartbeat-database",ej=1,$a="firebase-heartbeat-store";let Wd=null;function n_(){return Wd||(Wd=y4(Z4,ej,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore($a)}catch(n){console.warn(n)}}}}).catch(t=>{throw ws.create("idb-open",{originalErrorMessage:t.message})})),Wd}async function tj(t){try{const n=(await n_()).transaction($a),r=await n.objectStore($a).get(r_(t));return await n.done,r}catch(e){if(e instanceof Co)Hr.warn(e.message);else{const n=ws.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Hr.warn(n.message)}}}async function R0(t,e){try{const r=(await n_()).transaction($a,"readwrite");await r.objectStore($a).put(e,r_(t)),await r.done}catch(n){if(n instanceof Co)Hr.warn(n.message);else{const r=ws.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Hr.warn(r.message)}}}function r_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nj=1024,rj=30;class sj{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new oj(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=A0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>rj){const o=aj(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Hr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=A0(),{heartbeatsToSend:r,unsentEntries:s}=ij(this._heartbeatsCache.heartbeats),i=Zc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Hr.warn(n),""}}}function A0(){return new Date().toISOString().substring(0,10)}function ij(t,e=nj){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),P0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),P0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class oj{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return VI()?KI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await tj(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return R0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return R0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function P0(t){return Zc(JSON.stringify({version:2,heartbeats:t})).length}function aj(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lj(t){Ua(new co("platform-logger",e=>new _4(e),"PRIVATE")),Ua(new co("heartbeat",e=>new sj(e),"PRIVATE")),Ss(sf,k0,t),Ss(sf,k0,"esm2020"),Ss("fire-js","")}lj("");var cj="firebase",uj="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ss(cj,uj,"app");var O0={};const D0="@firebase/database",M0="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let s_="";function dj(t){s_=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Bt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Fa(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Ir(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new hj(e)}}catch{}return new fj},ei=i_("localStorage"),pj=i_("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi=new jp("@firebase/database"),mj=function(){let t=1;return function(){return t++}}(),o_=function(t){const e=e4(t),n=new ZI;n.update(e);const r=n.digest();return Ip.encodeByteArray(r)},hl=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=hl.apply(null,r):typeof r=="object"?e+=Bt(r):e+=r,e+=" "}return e};let ha=null,L0=!0;const gj=function(t,e){le(!0,"Can't turn on custom loggers persistently."),Yi.logLevel=at.VERBOSE,ha=Yi.log.bind(Yi)},tn=function(...t){if(L0===!0&&(L0=!1,ha===null&&pj.get("logging_enabled")===!0&&gj()),ha){const e=hl.apply(null,t);ha(e)}},fl=function(t){return function(...e){tn(t,...e)}},lf=function(...t){const e="FIREBASE INTERNAL ERROR: "+hl(...t);Yi.error(e)},Vr=function(...t){const e=`FIREBASE FATAL ERROR: ${hl(...t)}`;throw Yi.error(e),new Error(e)},xn=function(...t){const e="FIREBASE WARNING: "+hl(...t);Yi.warn(e)},yj=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&xn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Tp=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},xj=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},uo="[MIN_NAME]",fi="[MAX_NAME]",_i=function(t,e){if(t===e)return 0;if(t===uo||e===fi)return-1;if(e===uo||t===fi)return 1;{const n=F0(t),r=F0(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},vj=function(t,e){return t===e?0:t<e?-1:1},Go=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Bt(e))},Np=function(t){if(typeof t!="object"||t===null)return Bt(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Bt(e[r]),n+=":",n+=Np(t[e[r]]);return n+="}",n},a_=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function sn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const l_=function(t){le(!Tp(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,c,u;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(c=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=c+r,o=Math.round(t*Math.pow(2,n-c)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const d=[];for(u=n;u;u-=1)d.push(o%2?1:0),o=Math.floor(o/2);for(u=e;u;u-=1)d.push(i%2?1:0),i=Math.floor(i/2);d.push(s?1:0),d.reverse();const f=d.join("");let p="";for(u=0;u<64;u+=8){let g=parseInt(f.substr(u,8),2).toString(16);g.length===1&&(g="0"+g),p=p+g}return p.toLowerCase()},_j=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},wj=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Sj(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const bj=new RegExp("^-?(0*)\\d{1,10}$"),Ej=-2147483648,Cj=2147483647,F0=function(t){if(bj.test(t)){const e=Number(t);if(e>=Ej&&e<=Cj)return e}return null},Io=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw xn("Exception was thrown by user callback.",n),e},Math.floor(0))}},Ij=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},fa=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,Xv(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)==null||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){xn(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(tn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',xn(e)}}class bc{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}bc.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rp="5",c_="v",u_="s",d_="r",h_="f",f_=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,p_="ls",m_="p",cf="ac",g_="websocket",y_="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(e,n,r,s,i=!1,o="",c=!1,u=!1,d=null){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=c,this.isUsingEmulator=u,this.emulatorOptions=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ei.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ei.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Tj(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function v_(t,e,n){le(typeof e=="string","typeof type must == string"),le(typeof n=="object","typeof params must == object");let r;if(e===g_)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===y_)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Tj(t)&&(n.ns=t.namespace);const s=[];return sn(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(){this.counters_={}}incrementCounter(e,n=1){Ir(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return PI(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd={},Vd={};function Ap(t){const e=t.toString();return Hd[e]||(Hd[e]=new Nj),Hd[e]}function Rj(t,e){const n=t.toString();return Vd[n]||(Vd[n]=e()),Vd[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&Io(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0="start",Pj="close",Oj="pLPCommand",Dj="pRTLPCB",__="id",w_="pw",S_="ser",Mj="cb",Lj="seg",Fj="ts",zj="d",Bj="dframe",b_=1870,E_=30,Uj=b_-E_,$j=25e3,Wj=3e4;class $i{constructor(e,n,r,s,i,o,c){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=fl(e),this.stats_=Ap(n),this.urlFn=u=>(this.appCheckToken&&(u[cf]=this.appCheckToken),v_(n,y_,u))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Aj(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Wj)),xj(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Pp((...i)=>{const[o,c,u,d,f]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===z0)this.id=c,this.password=u;else if(o===Pj)c?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(c,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,c]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,c)},()=>{this.onClosed_()},this.urlFn);const r={};r[z0]="t",r[S_]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Mj]=this.scriptTagHolder.uniqueCallbackIdentifier),r[c_]=Rp,this.transportSessionId&&(r[u_]=this.transportSessionId),this.lastSessionId&&(r[p_]=this.lastSessionId),this.applicationId&&(r[m_]=this.applicationId),this.appCheckToken&&(r[cf]=this.appCheckToken),typeof location<"u"&&location.hostname&&f_.test(location.hostname)&&(r[d_]=h_);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){$i.forceAllow_=!0}static forceDisallow(){$i.forceDisallow_=!0}static isAvailable(){return $i.forceAllow_?!0:!$i.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!_j()&&!wj()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Bt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Fv(n),s=a_(r,Uj);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[Bj]="t",r[__]=e,r[w_]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Bt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Pp{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=mj(),window[Oj+this.uniqueCallbackIdentifier]=e,window[Dj+this.uniqueCallbackIdentifier]=n,this.myIFrame=Pp.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(c){tn("frame writing exception"),c.stack&&tn(c.stack),tn(c)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||tn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[__]=this.myID,e[w_]=this.myPW,e[S_]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+E_+r.length<=b_;){const o=this.pendingSegs.shift();r=r+"&"+Lj+s+"="+o.seg+"&"+Fj+s+"="+o.ts+"&"+zj+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor($j)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{tn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hj=16384,Vj=45e3;let tu=null;typeof MozWebSocket<"u"?tu=MozWebSocket:typeof WebSocket<"u"&&(tu=WebSocket);class rr{constructor(e,n,r,s,i,o,c){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=fl(this.connId),this.stats_=Ap(n),this.connURL=rr.connectionURL_(n,o,c,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[c_]=Rp,typeof location<"u"&&location.hostname&&f_.test(location.hostname)&&(o[d_]=h_),n&&(o[u_]=n),r&&(o[p_]=r),s&&(o[cf]=s),i&&(o[m_]=i),v_(e,g_,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ei.set("previous_websocket_failure",!0);try{let r;HI(),this.mySock=new tu(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){rr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&tu!==null&&!rr.forceDisallow_}static previouslyFailed(){return ei.isInMemoryStorage||ei.get("previous_websocket_failure")===!0}markConnectionHealthy(){ei.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Fa(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(le(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Bt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=a_(n,Hj);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Vj))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}rr.responsesRequiredToBeHealthy=2;rr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{static get ALL_TRANSPORTS(){return[$i,rr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=rr&&rr.isAvailable();let r=n&&!rr.previouslyFailed();if(e.webSocketOnly&&(n||xn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[rr];else{const s=this.transports_=[];for(const i of Wa.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);Wa.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Wa.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kj=6e4,Gj=5e3,qj=10*1024,Yj=100*1024,Kd="t",B0="d",Qj="s",U0="r",Jj="e",$0="o",W0="a",H0="n",V0="p",Xj="h";class Zj{constructor(e,n,r,s,i,o,c,u,d,f){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=c,this.onDisconnect_=u,this.onKill_=d,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=fl("c:"+this.id+":"),this.transportManager_=new Wa(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=fa(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Yj?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>qj?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Kd in e){const n=e[Kd];n===W0?this.upgradeIfSecondaryHealthy_():n===U0?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===$0&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Go("t",e),r=Go("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:V0,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:W0,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:H0,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Go("t",e),r=Go("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Go(Kd,e);if(B0 in e){const r=e[B0];if(n===Xj){const s={...r};this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===H0){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Qj?this.onConnectionShutdown_(r):n===U0?this.onReset_(r):n===Jj?lf("Server Error: "+r):n===$0?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):lf("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Rp!==r&&xn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),fa(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Kj))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):fa(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Gj))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:V0,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ei.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(e){this.allowedEvents_=e,this.listeners_={},le(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){le(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu extends I_{static getInstance(){return new nu}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Kv()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return le(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0=32,G0=768;class ut{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function rt(){return new ut("")}function $e(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function ks(t){return t.pieces_.length-t.pieceNum_}function ft(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ut(t.pieces_,e)}function Op(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function ek(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Ha(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function j_(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ut(e,0)}function jt(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof ut)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new ut(n,0)}function Ve(t){return t.pieceNum_>=t.pieces_.length}function gn(t,e){const n=$e(t),r=$e(e);if(n===null)return e;if(n===r)return gn(ft(t),ft(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function tk(t,e){const n=Ha(t,0),r=Ha(e,0);for(let s=0;s<n.length&&s<r.length;s++){const i=_i(n[s],r[s]);if(i!==0)return i}return n.length===r.length?0:n.length<r.length?-1:1}function Dp(t,e){if(ks(t)!==ks(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Vn(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(ks(t)>ks(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class nk{constructor(e,n){this.errorPrefix_=n,this.parts_=Ha(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Bu(this.parts_[r]);k_(this)}}function rk(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Bu(e),k_(t)}function sk(t){const e=t.parts_.pop();t.byteLength_-=Bu(e),t.parts_.length>0&&(t.byteLength_-=1)}function k_(t){if(t.byteLength_>G0)throw new Error(t.errorPrefix_+"has a key path longer than "+G0+" bytes ("+t.byteLength_+").");if(t.parts_.length>K0)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+K0+") or object contains a cycle "+qs(t))}function qs(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp extends I_{static getInstance(){return new Mp}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return le(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo=1e3,ik=60*5*1e3,q0=30*1e3,ok=1.3,ak=3e4,lk="server_kill",Y0=3;class Fr extends C_{constructor(e,n,r,s,i,o,c,u){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=c,this.authOverride_=u,this.id=Fr.nextPersistentConnectionId_++,this.log_=fl("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=qo,this.maxReconnectDelay_=ik,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Mp.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&nu.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(Bt(i)),le(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new dl,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const c=o.d;o.s==="ok"?n.resolve(c):n.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),le(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),le(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const c={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,c),this.connected_&&this.sendListen_(c)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,c=>{const u=c.d,d=c.s;Fr.warnOnListenWarnings_(u,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",c),d!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(d,u))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Ir(e,"w")){const r=lo(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();xn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||JI(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=q0)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=QI(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),le(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Bt(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):lf("Unrecognized action received from server: "+Bt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){le(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=qo,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=qo,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>ak&&(this.reconnectDelay_=qo),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*ok)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Fr.nextConnectionId_++,i=this.lastSessionId;let o=!1,c=null;const u=function(){c?c.close():(o=!0,r())},d=function(p){le(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(p)};this.realtime_={close:u,sendRequest:d};const f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[p,g]=await Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);o?tn("getToken() completed but was canceled"):(tn("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=g&&g.token,c=new Zj(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,j=>{xn(j+" ("+this.repoInfo_.toString()+")"),this.interrupt(lk)},i))}catch(p){this.log_("Failed to get token: "+p),o||(this.repoInfo_.nodeAdmin&&xn(p),u())}}}interrupt(e){tn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){tn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],b0(this.interruptReasons_)&&(this.reconnectDelay_=qo,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>Np(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new ut(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){tn("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Y0&&(this.reconnectDelay_=q0,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){tn("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Y0&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+s_.replace(/\./g,"-")]=1,Kv()?e["framework.cordova"]=1:WI()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=nu.getInstance().currentlyOnline();return b0(this.interruptReasons_)&&e}}Fr.nextPersistentConnectionId_=0;Fr.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new We(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new We(uo,e),s=new We(uo,n);return this.compare(r,s)!==0}minPost(){return We.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tc;class T_ extends Uu{static get __EMPTY_NODE(){return tc}static set __EMPTY_NODE(e){tc=e}compare(e,n){return _i(e.name,n.name)}isDefinedOn(e){throw Eo("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return We.MIN}maxPost(){return new We(fi,tc)}makePost(e,n){return le(typeof e=="string","KeyIndex indexValue must always be a string."),new We(e,tc)}toString(){return".key"}}const Qi=new T_;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class qt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??qt.RED,this.left=s??En.EMPTY_NODE,this.right=i??En.EMPTY_NODE}copy(e,n,r,s,i){return new qt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return En.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return En.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}qt.RED=!0;qt.BLACK=!1;class ck{copy(e,n,r,s,i){return this}insert(e,n,r){return new qt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class En{constructor(e,n=En.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new En(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,qt.BLACK,null,null))}remove(e){return new En(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,qt.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new nc(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new nc(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new nc(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new nc(this.root_,null,this.comparator_,!0,e)}}En.EMPTY_NODE=new ck;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uk(t,e){return _i(t.name,e.name)}function Lp(t,e){return _i(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uf;function dk(t){uf=t}const N_=function(t){return typeof t=="number"?"number:"+l_(t):"string:"+t},R_=function(t){if(t.isLeafNode()){const e=t.val();le(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Ir(e,".sv"),"Priority must be a string or number.")}else le(t===uf||t.isEmpty(),"priority of unexpected type.");le(t===uf||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Q0;class Kt{static set __childrenNodeConstructor(e){Q0=e}static get __childrenNodeConstructor(){return Q0}constructor(e,n=Kt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,le(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),R_(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Kt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Kt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ve(e)?this:$e(e)===".priority"?this.priorityNode_:Kt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Kt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=$e(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(le(r!==".priority"||ks(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Kt.__childrenNodeConstructor.EMPTY_NODE.updateChild(ft(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+N_(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=l_(this.value_):e+=this.value_,this.lazyHash_=o_(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Kt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Kt.__childrenNodeConstructor?-1:(le(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=Kt.VALUE_TYPE_ORDER.indexOf(n),i=Kt.VALUE_TYPE_ORDER.indexOf(r);return le(s>=0,"Unknown leaf type: "+n),le(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Kt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let A_,P_;function hk(t){A_=t}function fk(t){P_=t}class pk extends Uu{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?_i(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return We.MIN}maxPost(){return new We(fi,new Kt("[PRIORITY-POST]",P_))}makePost(e,n){const r=A_(e);return new We(n,new Kt("[PRIORITY-POST]",r))}toString(){return".priority"}}const kt=new pk;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mk=Math.log(2);class gk{constructor(e){const n=i=>parseInt(Math.log(i)/mk,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const ru=function(t,e,n,r){t.sort(e);const s=function(u,d){const f=d-u;let p,g;if(f===0)return null;if(f===1)return p=t[u],g=n?n(p):p,new qt(g,p.node,qt.BLACK,null,null);{const j=parseInt(f/2,10)+u,v=s(u,j),N=s(j+1,d);return p=t[j],g=n?n(p):p,new qt(g,p.node,qt.BLACK,v,N)}},i=function(u){let d=null,f=null,p=t.length;const g=function(v,N){const R=p-v,b=p;p-=v;const _=s(R+1,b),w=t[R],P=n?n(w):w;j(new qt(P,w.node,N,null,_))},j=function(v){d?(d.left=v,d=v):(f=v,d=v)};for(let v=0;v<u.count;++v){const N=u.nextBitIsOne(),R=Math.pow(2,u.count-(v+1));N?g(R,qt.BLACK):(g(R,qt.BLACK),g(R,qt.RED))}return f},o=new gk(t.length),c=i(o);return new En(r||e,c)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gd;const ji={};class Dr{static get Default(){return le(ji&&kt,"ChildrenNode.ts has not been loaded"),Gd=Gd||new Dr({".priority":ji},{".priority":kt}),Gd}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=lo(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof En?n:null}hasIndex(e){return Ir(this.indexSet_,e.toString())}addIndex(e,n){le(e!==Qi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(We.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let c;s?c=ru(r,e.getCompare()):c=ji;const u=e.toString(),d={...this.indexSet_};d[u]=e;const f={...this.indexes_};return f[u]=c,new Dr(f,d)}addToIndexes(e,n){const r=eu(this.indexes_,(s,i)=>{const o=lo(this.indexSet_,i);if(le(o,"Missing index implementation for "+i),s===ji)if(o.isDefinedOn(e.node)){const c=[],u=n.getIterator(We.Wrap);let d=u.getNext();for(;d;)d.name!==e.name&&c.push(d),d=u.getNext();return c.push(e),ru(c,o.getCompare())}else return ji;else{const c=n.get(e.name);let u=s;return c&&(u=u.remove(new We(e.name,c))),u.insert(e,e.node)}});return new Dr(r,this.indexSet_)}removeFromIndexes(e,n){const r=eu(this.indexes_,s=>{if(s===ji)return s;{const i=n.get(e.name);return i?s.remove(new We(e.name,i)):s}});return new Dr(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yo;class Re{static get EMPTY_NODE(){return Yo||(Yo=new Re(new En(Lp),null,Dr.Default))}constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&R_(this.priorityNode_),this.children_.isEmpty()&&le(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Yo}updatePriority(e){return this.children_.isEmpty()?this:new Re(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Yo:n}}getChild(e){const n=$e(e);return n===null?this:this.getImmediateChild(n).getChild(ft(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(le(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new We(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?Yo:this.priorityNode_;return new Re(s,o,i)}}updateChild(e,n){const r=$e(e);if(r===null)return n;{le($e(e)!==".priority"||ks(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(ft(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(kt,(o,c)=>{n[o]=c.val(e),r++,i&&Re.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const c in n)o[c]=n[c];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+N_(this.getPriority().val())+":"),this.forEachChild(kt,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":o_(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new We(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new We(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new We(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,We.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,We.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===pl?-1:0}withIndex(e){if(e===Qi||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Re(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Qi||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(kt),s=n.getIterator(kt);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Qi?null:this.indexMap_.get(e.toString())}}Re.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class yk extends Re{constructor(){super(new En(Lp),Re.EMPTY_NODE,Dr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Re.EMPTY_NODE}isEmpty(){return!1}}const pl=new yk;Object.defineProperties(We,{MIN:{value:new We(uo,Re.EMPTY_NODE)},MAX:{value:new We(fi,pl)}});T_.__EMPTY_NODE=Re.EMPTY_NODE;Kt.__childrenNodeConstructor=Re;dk(pl);fk(pl);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk=!0;function zt(t,e=null){if(t===null)return Re.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),le(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Kt(n,zt(e))}if(!(t instanceof Array)&&xk){const n=[];let r=!1;if(sn(t,(o,c)=>{if(o.substring(0,1)!=="."){const u=zt(c);u.isEmpty()||(r=r||!u.getPriority().isEmpty(),n.push(new We(o,u)))}}),n.length===0)return Re.EMPTY_NODE;const i=ru(n,uk,o=>o.name,Lp);if(r){const o=ru(n,kt.getCompare());return new Re(i,zt(e),new Dr({".priority":o},{".priority":kt}))}else return new Re(i,zt(e),Dr.Default)}else{let n=Re.EMPTY_NODE;return sn(t,(r,s)=>{if(Ir(t,r)&&r.substring(0,1)!=="."){const i=zt(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(zt(e))}}hk(zt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk extends Uu{constructor(e){super(),this.indexPath_=e,le(!Ve(e)&&$e(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?_i(e.name,n.name):i}makePost(e,n){const r=zt(e),s=Re.EMPTY_NODE.updateChild(this.indexPath_,r);return new We(n,s)}maxPost(){const e=Re.EMPTY_NODE.updateChild(this.indexPath_,pl);return new We(fi,e)}toString(){return Ha(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k extends Uu{compare(e,n){const r=e.node.compareTo(n.node);return r===0?_i(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return We.MIN}maxPost(){return We.MAX}makePost(e,n){const r=zt(e);return new We(n,r)}toString(){return".value"}}const wk=new _k;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(t){return{type:"value",snapshotNode:t}}function ho(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Va(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Ka(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Sk(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){le(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const c=e.getImmediateChild(n);return c.getChild(s).equals(r.getChild(s))&&c.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Va(n,c)):le(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):c.isEmpty()?o.trackChildChange(ho(n,r)):o.trackChildChange(Ka(n,r,c))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(kt,(s,i)=>{n.hasChild(s)||r.trackChildChange(Va(s,i))}),n.isLeafNode()||n.forEachChild(kt,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(Ka(s,i,o))}else r.trackChildChange(ho(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?Re.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e){this.indexedFilter_=new Fp(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Ga.getStartPost_(e),this.endPost_=Ga.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new We(n,r))||(r=Re.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=Re.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(Re.EMPTY_NODE);const i=this;return n.forEachChild(kt,(o,c)=>{i.matches(new We(o,c))||(s=s.updateImmediateChild(o,Re.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Ga(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new We(n,r))||(r=Re.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=Re.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=Re.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const c=i.getNext();if(this.withinDirectionalStart(c))if(this.withinDirectionalEnd(c))s=s.updateImmediateChild(c.name,c.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(Re.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const c=i.getNext();o<this.limit_&&this.withinDirectionalStart(c)&&this.withinDirectionalEnd(c)?o++:s=s.updateImmediateChild(c.name,Re.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const p=this.index_.getCompare();o=(g,j)=>p(j,g)}else o=this.index_.getCompare();const c=e;le(c.numChildren()===this.limit_,"");const u=new We(n,r),d=this.reverse_?c.getFirstChild(this.index_):c.getLastChild(this.index_),f=this.rangedFilter_.matches(u);if(c.hasChild(n)){const p=c.getImmediateChild(n);let g=s.getChildAfterChild(this.index_,d,this.reverse_);for(;g!=null&&(g.name===n||c.hasChild(g.name));)g=s.getChildAfterChild(this.index_,g,this.reverse_);const j=g==null?1:o(g,u);if(f&&!r.isEmpty()&&j>=0)return i!=null&&i.trackChildChange(Ka(n,r,p)),c.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(Va(n,p));const N=c.updateImmediateChild(n,Re.EMPTY_NODE);return g!=null&&this.rangedFilter_.matches(g)?(i!=null&&i.trackChildChange(ho(g.name,g.node)),N.updateImmediateChild(g.name,g.node)):N}}else return r.isEmpty()?e:f&&o(d,u)>=0?(i!=null&&(i.trackChildChange(Va(d.name,d.node)),i.trackChildChange(ho(n,r))),c.updateImmediateChild(n,r).updateImmediateChild(d.name,Re.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=kt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return le(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return le(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:uo}hasEnd(){return this.endSet_}getIndexEndValue(){return le(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return le(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:fi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return le(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===kt}copy(){const e=new zp;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Ek(t){return t.loadsAllData()?new Fp(t.getIndex()):t.hasLimit()?new bk(t):new Ga(t)}function J0(t){const e={};if(t.isDefault())return e;let n;if(t.index_===kt?n="$priority":t.index_===wk?n="$value":t.index_===Qi?n="$key":(le(t.index_ instanceof vk,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Bt(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Bt(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Bt(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Bt(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Bt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function X0(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==kt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su extends C_{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(le(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=fl("p:rest:"),this.listens_={}}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=su.getListenId_(e,r),c={};this.listens_[o]=c;const u=J0(e._queryParams);this.restRequest_(i+".json",u,(d,f)=>{let p=f;if(d===404&&(p=null,d=null),d===null&&this.onDataUpdate_(i,p,!1,r),lo(this.listens_,o)===c){let g;d?d===401?g="permission_denied":g="rest_error:"+d:g="ok",s(g,null)}})}unlisten(e,n){const r=su.getListenId_(e,n);delete this.listens_[r]}get(e){const n=J0(e._queryParams),r=e._path.toString(),s=new dl;return this.restRequest_(r+".json",n,(i,o)=>{let c=o;i===404&&(c=null,i=null),i===null?(this.onDataUpdate_(r,c,!1,null),s.resolve(c)):s.reject(new Error(c))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+XI(n);this.log_("Sending REST request for "+o);const c=new XMLHttpRequest;c.onreadystatechange=()=>{if(r&&c.readyState===4){this.log_("REST Response for "+o+" received. status:",c.status,"response:",c.responseText);let u=null;if(c.status>=200&&c.status<300){try{u=Fa(c.responseText)}catch{xn("Failed to parse JSON response for "+o+": "+c.responseText)}r(null,u)}else c.status!==401&&c.status!==404&&xn("Got unsuccessful REST response for "+o+" Status: "+c.status),r(c.status);r=null}},c.open("GET",o,!0),c.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(){this.rootNode_=Re.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(){return{value:null,children:new Map}}function D_(t,e,n){if(Ve(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=$e(e);t.children.has(r)||t.children.set(r,iu());const s=t.children.get(r);e=ft(e),D_(s,e,n)}}function df(t,e,n){t.value!==null?n(e,t.value):Ik(t,(r,s)=>{const i=new ut(e.toString()+"/"+r);df(s,i,n)})}function Ik(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&sn(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0=10*1e3,kk=30*1e3,Tk=5*60*1e3;class Nk{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new jk(e);const r=Z0+(kk-Z0)*Math.random();fa(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;sn(e,(s,i)=>{i>0&&Ir(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),fa(this.reportStats_.bind(this),Math.floor(Math.random()*2*Tk))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sr;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(sr||(sr={}));function Bp(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Up(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function $p(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=sr.ACK_USER_WRITE,this.source=Bp()}operationForChild(e){if(Ve(this.path)){if(this.affectedTree.value!=null)return le(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new ut(e));return new ou(rt(),n,this.revert)}}else return le($e(this.path)===e,"operationForChild called for unrelated child."),new ou(ft(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e,n){this.source=e,this.path=n,this.type=sr.LISTEN_COMPLETE}operationForChild(e){return Ve(this.path)?new qa(this.source,rt()):new qa(this.source,ft(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=sr.OVERWRITE}operationForChild(e){return Ve(this.path)?new pi(this.source,rt(),this.snap.getImmediateChild(e)):new pi(this.source,ft(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=sr.MERGE}operationForChild(e){if(Ve(this.path)){const n=this.children.subtree(new ut(e));return n.isEmpty()?null:n.value?new pi(this.source,rt(),n.value):new fo(this.source,rt(),n)}else return le($e(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new fo(this.source,ft(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ve(e))return this.isFullyInitialized()&&!this.filtered_;const n=$e(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Ak(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(Sk(o.childName,o.snapshotNode))}),Qo(t,s,"child_removed",e,r,n),Qo(t,s,"child_added",e,r,n),Qo(t,s,"child_moved",i,r,n),Qo(t,s,"child_changed",e,r,n),Qo(t,s,"value",e,r,n),s}function Qo(t,e,n,r,s,i){const o=r.filter(c=>c.type===n);o.sort((c,u)=>Ok(t,c,u)),o.forEach(c=>{const u=Pk(t,c,i);s.forEach(d=>{d.respondsTo(c.type)&&e.push(d.createEvent(u,t.query_))})})}function Pk(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Ok(t,e,n){if(e.childName==null||n.childName==null)throw Eo("Should only compare child_ events.");const r=new We(e.childName,e.snapshotNode),s=new We(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $u(t,e){return{eventCache:t,serverCache:e}}function pa(t,e,n,r){return $u(new Ts(e,n,r),t.serverCache)}function M_(t,e,n,r){return $u(t.eventCache,new Ts(e,n,r))}function au(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function mi(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qd;const Dk=()=>(qd||(qd=new En(vj)),qd);class ht{static fromObject(e){let n=new ht(null);return sn(e,(r,s)=>{n=n.set(new ut(r),s)}),n}constructor(e,n=Dk()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:rt(),value:this.value};if(Ve(e))return null;{const r=$e(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(ft(e),n);return i!=null?{path:jt(new ut(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ve(e))return this;{const n=$e(e),r=this.children.get(n);return r!==null?r.subtree(ft(e)):new ht(null)}}set(e,n){if(Ve(e))return new ht(n,this.children);{const r=$e(e),i=(this.children.get(r)||new ht(null)).set(ft(e),n),o=this.children.insert(r,i);return new ht(this.value,o)}}remove(e){if(Ve(e))return this.children.isEmpty()?new ht(null):new ht(null,this.children);{const n=$e(e),r=this.children.get(n);if(r){const s=r.remove(ft(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new ht(null):new ht(this.value,i)}else return this}}get(e){if(Ve(e))return this.value;{const n=$e(e),r=this.children.get(n);return r?r.get(ft(e)):null}}setTree(e,n){if(Ve(e))return n;{const r=$e(e),i=(this.children.get(r)||new ht(null)).setTree(ft(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new ht(this.value,o)}}fold(e){return this.fold_(rt(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(jt(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,rt(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(Ve(e))return null;{const i=$e(e),o=this.children.get(i);return o?o.findOnPath_(ft(e),jt(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,rt(),n)}foreachOnPath_(e,n,r){if(Ve(e))return this;{this.value&&r(n,this.value);const s=$e(e),i=this.children.get(s);return i?i.foreachOnPath_(ft(e),jt(n,s),r):new ht(null)}}foreach(e){this.foreach_(rt(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(jt(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e){this.writeTree_=e}static empty(){return new lr(new ht(null))}}function ma(t,e,n){if(Ve(e))return new lr(new ht(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=gn(s,e);return i=i.updateChild(o,n),new lr(t.writeTree_.set(s,i))}else{const s=new ht(n),i=t.writeTree_.setTree(e,s);return new lr(i)}}}function hf(t,e,n){let r=t;return sn(n,(s,i)=>{r=ma(r,jt(e,s),i)}),r}function ey(t,e){if(Ve(e))return lr.empty();{const n=t.writeTree_.setTree(e,new ht(null));return new lr(n)}}function ff(t,e){return wi(t,e)!=null}function wi(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(gn(n.path,e)):null}function ty(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(kt,(r,s)=>{e.push(new We(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new We(r,s.value))}),e}function bs(t,e){if(Ve(e))return t;{const n=wi(t,e);return n!=null?new lr(new ht(n)):new lr(t.writeTree_.subtree(e))}}function pf(t){return t.writeTree_.isEmpty()}function po(t,e){return L_(rt(),t.writeTree_,e)}function L_(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(le(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=L_(jt(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(jt(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wu(t,e){return U_(e,t)}function Mk(t,e,n,r,s){le(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=ma(t.visibleWrites,e,n)),t.lastWriteId=r}function Lk(t,e,n,r){le(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=hf(t.visibleWrites,e,n),t.lastWriteId=r}function Fk(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function zk(t,e){const n=t.allWrites.findIndex(c=>c.writeId===e);le(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const c=t.allWrites[o];c.visible&&(o>=n&&Bk(c,r.path)?s=!1:Vn(r.path,c.path)&&(i=!0)),o--}if(s){if(i)return Uk(t),!0;if(r.snap)t.visibleWrites=ey(t.visibleWrites,r.path);else{const c=r.children;sn(c,u=>{t.visibleWrites=ey(t.visibleWrites,jt(r.path,u))})}return!0}else return!1}function Bk(t,e){if(t.snap)return Vn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Vn(jt(t.path,n),e))return!0;return!1}function Uk(t){t.visibleWrites=F_(t.allWrites,$k,rt()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function $k(t){return t.visible}function F_(t,e,n){let r=lr.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let c;if(i.snap)Vn(n,o)?(c=gn(n,o),r=ma(r,c,i.snap)):Vn(o,n)&&(c=gn(o,n),r=ma(r,rt(),i.snap.getChild(c)));else if(i.children){if(Vn(n,o))c=gn(n,o),r=hf(r,c,i.children);else if(Vn(o,n))if(c=gn(o,n),Ve(c))r=hf(r,rt(),i.children);else{const u=lo(i.children,$e(c));if(u){const d=u.getChild(ft(c));r=ma(r,rt(),d)}}}else throw Eo("WriteRecord should have .snap or .children")}}return r}function z_(t,e,n,r,s){if(!r&&!s){const i=wi(t.visibleWrites,e);if(i!=null)return i;{const o=bs(t.visibleWrites,e);if(pf(o))return n;if(n==null&&!ff(o,rt()))return null;{const c=n||Re.EMPTY_NODE;return po(o,c)}}}else{const i=bs(t.visibleWrites,e);if(!s&&pf(i))return n;if(!s&&n==null&&!ff(i,rt()))return null;{const o=function(d){return(d.visible||s)&&(!r||!~r.indexOf(d.writeId))&&(Vn(d.path,e)||Vn(e,d.path))},c=F_(t.allWrites,o,e),u=n||Re.EMPTY_NODE;return po(c,u)}}}function Wk(t,e,n){let r=Re.EMPTY_NODE;const s=wi(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(kt,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=bs(t.visibleWrites,e);return n.forEachChild(kt,(o,c)=>{const u=po(bs(i,new ut(o)),c);r=r.updateImmediateChild(o,u)}),ty(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=bs(t.visibleWrites,e);return ty(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function Hk(t,e,n,r,s){le(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=jt(e,n);if(ff(t.visibleWrites,i))return null;{const o=bs(t.visibleWrites,i);return pf(o)?s.getChild(n):po(o,s.getChild(n))}}function Vk(t,e,n,r){const s=jt(e,n),i=wi(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=bs(t.visibleWrites,s);return po(o,r.getNode().getImmediateChild(n))}else return null}function Kk(t,e){return wi(t.visibleWrites,e)}function Gk(t,e,n,r,s,i,o){let c;const u=bs(t.visibleWrites,e),d=wi(u,rt());if(d!=null)c=d;else if(n!=null)c=po(u,n);else return[];if(c=c.withIndex(o),!c.isEmpty()&&!c.isLeafNode()){const f=[],p=o.getCompare(),g=i?c.getReverseIteratorFrom(r,o):c.getIteratorFrom(r,o);let j=g.getNext();for(;j&&f.length<s;)p(j,r)!==0&&f.push(j),j=g.getNext();return f}else return[]}function qk(){return{visibleWrites:lr.empty(),allWrites:[],lastWriteId:-1}}function lu(t,e,n,r){return z_(t.writeTree,t.treePath,e,n,r)}function Wp(t,e){return Wk(t.writeTree,t.treePath,e)}function ny(t,e,n,r){return Hk(t.writeTree,t.treePath,e,n,r)}function cu(t,e){return Kk(t.writeTree,jt(t.treePath,e))}function Yk(t,e,n,r,s,i){return Gk(t.writeTree,t.treePath,e,n,r,s,i)}function Hp(t,e,n){return Vk(t.writeTree,t.treePath,e,n)}function B_(t,e){return U_(jt(t.treePath,e),t.writeTree)}function U_(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;le(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),le(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,Ka(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,Va(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,ho(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,Ka(r,e.snapshotNode,s.oldSnap));else throw Eo("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const $_=new Jk;class Vp{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Ts(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Hp(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:mi(this.viewCache_),i=Yk(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xk(t){return{filter:t}}function Zk(t,e){le(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),le(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function e3(t,e,n,r,s){const i=new Qk;let o,c;if(n.type===sr.OVERWRITE){const d=n;d.source.fromUser?o=mf(t,e,d.path,d.snap,r,s,i):(le(d.source.fromServer,"Unknown source."),c=d.source.tagged||e.serverCache.isFiltered()&&!Ve(d.path),o=uu(t,e,d.path,d.snap,r,s,c,i))}else if(n.type===sr.MERGE){const d=n;d.source.fromUser?o=n3(t,e,d.path,d.children,r,s,i):(le(d.source.fromServer,"Unknown source."),c=d.source.tagged||e.serverCache.isFiltered(),o=gf(t,e,d.path,d.children,r,s,c,i))}else if(n.type===sr.ACK_USER_WRITE){const d=n;d.revert?o=i3(t,e,d.path,r,s,i):o=r3(t,e,d.path,d.affectedTree,r,s,i)}else if(n.type===sr.LISTEN_COMPLETE)o=s3(t,e,n.path,r,i);else throw Eo("Unknown operation type: "+n.type);const u=i.getChanges();return t3(e,o,u),{viewCache:o,changes:u}}function t3(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=au(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(O_(au(e)))}}function W_(t,e,n,r,s,i){const o=e.eventCache;if(cu(r,n)!=null)return e;{let c,u;if(Ve(n))if(le(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const d=mi(e),f=d instanceof Re?d:Re.EMPTY_NODE,p=Wp(r,f);c=t.filter.updateFullNode(e.eventCache.getNode(),p,i)}else{const d=lu(r,mi(e));c=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const d=$e(n);if(d===".priority"){le(ks(n)===1,"Can't have a priority with additional path components");const f=o.getNode();u=e.serverCache.getNode();const p=ny(r,n,f,u);p!=null?c=t.filter.updatePriority(f,p):c=o.getNode()}else{const f=ft(n);let p;if(o.isCompleteForChild(d)){u=e.serverCache.getNode();const g=ny(r,n,o.getNode(),u);g!=null?p=o.getNode().getImmediateChild(d).updateChild(f,g):p=o.getNode().getImmediateChild(d)}else p=Hp(r,d,e.serverCache);p!=null?c=t.filter.updateChild(o.getNode(),d,p,f,s,i):c=o.getNode()}}return pa(e,c,o.isFullyInitialized()||Ve(n),t.filter.filtersNodes())}}function uu(t,e,n,r,s,i,o,c){const u=e.serverCache;let d;const f=o?t.filter:t.filter.getIndexedFilter();if(Ve(n))d=f.updateFullNode(u.getNode(),r,null);else if(f.filtersNodes()&&!u.isFiltered()){const j=u.getNode().updateChild(n,r);d=f.updateFullNode(u.getNode(),j,null)}else{const j=$e(n);if(!u.isCompleteForPath(n)&&ks(n)>1)return e;const v=ft(n),R=u.getNode().getImmediateChild(j).updateChild(v,r);j===".priority"?d=f.updatePriority(u.getNode(),R):d=f.updateChild(u.getNode(),j,R,v,$_,null)}const p=M_(e,d,u.isFullyInitialized()||Ve(n),f.filtersNodes()),g=new Vp(s,p,i);return W_(t,p,n,s,g,c)}function mf(t,e,n,r,s,i,o){const c=e.eventCache;let u,d;const f=new Vp(s,e,i);if(Ve(n))d=t.filter.updateFullNode(e.eventCache.getNode(),r,o),u=pa(e,d,!0,t.filter.filtersNodes());else{const p=$e(n);if(p===".priority")d=t.filter.updatePriority(e.eventCache.getNode(),r),u=pa(e,d,c.isFullyInitialized(),c.isFiltered());else{const g=ft(n),j=c.getNode().getImmediateChild(p);let v;if(Ve(g))v=r;else{const N=f.getCompleteChild(p);N!=null?Op(g)===".priority"&&N.getChild(j_(g)).isEmpty()?v=N:v=N.updateChild(g,r):v=Re.EMPTY_NODE}if(j.equals(v))u=e;else{const N=t.filter.updateChild(c.getNode(),p,v,g,f,o);u=pa(e,N,c.isFullyInitialized(),t.filter.filtersNodes())}}}return u}function ry(t,e){return t.eventCache.isCompleteForChild(e)}function n3(t,e,n,r,s,i,o){let c=e;return r.foreach((u,d)=>{const f=jt(n,u);ry(e,$e(f))&&(c=mf(t,c,f,d,s,i,o))}),r.foreach((u,d)=>{const f=jt(n,u);ry(e,$e(f))||(c=mf(t,c,f,d,s,i,o))}),c}function sy(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function gf(t,e,n,r,s,i,o,c){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u=e,d;Ve(n)?d=r:d=new ht(null).setTree(n,r);const f=e.serverCache.getNode();return d.children.inorderTraversal((p,g)=>{if(f.hasChild(p)){const j=e.serverCache.getNode().getImmediateChild(p),v=sy(t,j,g);u=uu(t,u,new ut(p),v,s,i,o,c)}}),d.children.inorderTraversal((p,g)=>{const j=!e.serverCache.isCompleteForChild(p)&&g.value===null;if(!f.hasChild(p)&&!j){const v=e.serverCache.getNode().getImmediateChild(p),N=sy(t,v,g);u=uu(t,u,new ut(p),N,s,i,o,c)}}),u}function r3(t,e,n,r,s,i,o){if(cu(s,n)!=null)return e;const c=e.serverCache.isFiltered(),u=e.serverCache;if(r.value!=null){if(Ve(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return uu(t,e,n,u.getNode().getChild(n),s,i,c,o);if(Ve(n)){let d=new ht(null);return u.getNode().forEachChild(Qi,(f,p)=>{d=d.set(new ut(f),p)}),gf(t,e,n,d,s,i,c,o)}else return e}else{let d=new ht(null);return r.foreach((f,p)=>{const g=jt(n,f);u.isCompleteForPath(g)&&(d=d.set(f,u.getNode().getChild(g)))}),gf(t,e,n,d,s,i,c,o)}}function s3(t,e,n,r,s){const i=e.serverCache,o=M_(e,i.getNode(),i.isFullyInitialized()||Ve(n),i.isFiltered());return W_(t,o,n,r,$_,s)}function i3(t,e,n,r,s,i){let o;if(cu(r,n)!=null)return e;{const c=new Vp(r,e,s),u=e.eventCache.getNode();let d;if(Ve(n)||$e(n)===".priority"){let f;if(e.serverCache.isFullyInitialized())f=lu(r,mi(e));else{const p=e.serverCache.getNode();le(p instanceof Re,"serverChildren would be complete if leaf node"),f=Wp(r,p)}f=f,d=t.filter.updateFullNode(u,f,i)}else{const f=$e(n);let p=Hp(r,f,e.serverCache);p==null&&e.serverCache.isCompleteForChild(f)&&(p=u.getImmediateChild(f)),p!=null?d=t.filter.updateChild(u,f,p,ft(n),c,i):e.eventCache.getNode().hasChild(f)?d=t.filter.updateChild(u,f,Re.EMPTY_NODE,ft(n),c,i):d=u,d.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=lu(r,mi(e)),o.isLeafNode()&&(d=t.filter.updateFullNode(d,o,i)))}return o=e.serverCache.isFullyInitialized()||cu(r,rt())!=null,pa(e,d,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new Fp(r.getIndex()),i=Ek(r);this.processor_=Xk(i);const o=n.serverCache,c=n.eventCache,u=s.updateFullNode(Re.EMPTY_NODE,o.getNode(),null),d=i.updateFullNode(Re.EMPTY_NODE,c.getNode(),null),f=new Ts(u,o.isFullyInitialized(),s.filtersNodes()),p=new Ts(d,c.isFullyInitialized(),i.filtersNodes());this.viewCache_=$u(p,f),this.eventGenerator_=new Rk(this.query_)}get query(){return this.query_}}function a3(t){return t.viewCache_.serverCache.getNode()}function l3(t){return au(t.viewCache_)}function c3(t,e){const n=mi(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Ve(e)&&!n.getImmediateChild($e(e)).isEmpty())?n.getChild(e):null}function iy(t){return t.eventRegistrations_.length===0}function u3(t,e){t.eventRegistrations_.push(e)}function oy(t,e,n){const r=[];if(n){le(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function ay(t,e,n,r){e.type===sr.MERGE&&e.source.queryId!==null&&(le(mi(t.viewCache_),"We should always have a full cache before handling merges"),le(au(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=e3(t.processor_,s,e,n,r);return Zk(t.processor_,i.viewCache),le(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,H_(t,i.changes,i.viewCache.eventCache.getNode(),null)}function d3(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(kt,(i,o)=>{r.push(ho(i,o))}),n.isFullyInitialized()&&r.push(O_(n.getNode())),H_(t,r,n.getNode(),e)}function H_(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return Ak(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let du;class V_{constructor(){this.views=new Map}}function h3(t){le(!du,"__referenceConstructor has already been defined"),du=t}function f3(){return le(du,"Reference.ts has not been loaded"),du}function p3(t){return t.views.size===0}function Kp(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return le(i!=null,"SyncTree gave us an op for an invalid query."),ay(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(ay(o,e,n,r));return i}}function K_(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let c=lu(n,s?r:null),u=!1;c?u=!0:r instanceof Re?(c=Wp(n,r),u=!1):(c=Re.EMPTY_NODE,u=!1);const d=$u(new Ts(c,u,!1),new Ts(r,s,!1));return new o3(e,d)}return o}function m3(t,e,n,r,s,i){const o=K_(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),u3(o,n),d3(o,n)}function g3(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const c=Ns(t);if(s==="default")for(const[u,d]of t.views.entries())o=o.concat(oy(d,n,r)),iy(d)&&(t.views.delete(u),d.query._queryParams.loadsAllData()||i.push(d.query));else{const u=t.views.get(s);u&&(o=o.concat(oy(u,n,r)),iy(u)&&(t.views.delete(s),u.query._queryParams.loadsAllData()||i.push(u.query)))}return c&&!Ns(t)&&i.push(new(f3())(e._repo,e._path)),{removed:i,events:o}}function G_(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Es(t,e){let n=null;for(const r of t.views.values())n=n||c3(r,e);return n}function q_(t,e){if(e._queryParams.loadsAllData())return Hu(t);{const r=e._queryIdentifier;return t.views.get(r)}}function Y_(t,e){return q_(t,e)!=null}function Ns(t){return Hu(t)!=null}function Hu(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hu;function y3(t){le(!hu,"__referenceConstructor has already been defined"),hu=t}function x3(){return le(hu,"Reference.ts has not been loaded"),hu}let v3=1;class ly{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ht(null),this.pendingWriteTree_=qk(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Q_(t,e,n,r,s){return Mk(t.pendingWriteTree_,e,n,r,s),s?jo(t,new pi(Bp(),e,n)):[]}function _3(t,e,n,r){Lk(t.pendingWriteTree_,e,n,r);const s=ht.fromObject(n);return jo(t,new fo(Bp(),e,s))}function ds(t,e,n=!1){const r=Fk(t.pendingWriteTree_,e);if(zk(t.pendingWriteTree_,e)){let i=new ht(null);return r.snap!=null?i=i.set(rt(),!0):sn(r.children,o=>{i=i.set(new ut(o),!0)}),jo(t,new ou(r.path,i,n))}else return[]}function ml(t,e,n){return jo(t,new pi(Up(),e,n))}function w3(t,e,n){const r=ht.fromObject(n);return jo(t,new fo(Up(),e,r))}function S3(t,e){return jo(t,new qa(Up(),e))}function b3(t,e,n){const r=qp(t,n);if(r){const s=Yp(r),i=s.path,o=s.queryId,c=gn(i,e),u=new qa($p(o),c);return Qp(t,i,u)}else return[]}function fu(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let c=[];if(o&&(e._queryIdentifier==="default"||Y_(o,e))){const u=g3(o,e,n,r);p3(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const d=u.removed;if(c=u.events,!s){const f=d.findIndex(g=>g._queryParams.loadsAllData())!==-1,p=t.syncPointTree_.findOnPath(i,(g,j)=>Ns(j));if(f&&!p){const g=t.syncPointTree_.subtree(i);if(!g.isEmpty()){const j=I3(g);for(let v=0;v<j.length;++v){const N=j[v],R=N.query,b=ew(t,N);t.listenProvider_.startListening(ga(R),Ya(t,R),b.hashFn,b.onComplete)}}}!p&&d.length>0&&!r&&(f?t.listenProvider_.stopListening(ga(e),null):d.forEach(g=>{const j=t.queryToTagMap.get(Vu(g));t.listenProvider_.stopListening(ga(g),j)}))}j3(t,d)}return c}function J_(t,e,n,r){const s=qp(t,r);if(s!=null){const i=Yp(s),o=i.path,c=i.queryId,u=gn(o,e),d=new pi($p(c),u,n);return Qp(t,o,d)}else return[]}function E3(t,e,n,r){const s=qp(t,r);if(s){const i=Yp(s),o=i.path,c=i.queryId,u=gn(o,e),d=ht.fromObject(n),f=new fo($p(c),u,d);return Qp(t,o,f)}else return[]}function yf(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(g,j)=>{const v=gn(g,s);i=i||Es(j,v),o=o||Ns(j)});let c=t.syncPointTree_.get(s);c?(o=o||Ns(c),i=i||Es(c,rt())):(c=new V_,t.syncPointTree_=t.syncPointTree_.set(s,c));let u;i!=null?u=!0:(u=!1,i=Re.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((j,v)=>{const N=Es(v,rt());N&&(i=i.updateImmediateChild(j,N))}));const d=Y_(c,e);if(!d&&!e._queryParams.loadsAllData()){const g=Vu(e);le(!t.queryToTagMap.has(g),"View does not exist, but we have a tag");const j=k3();t.queryToTagMap.set(g,j),t.tagToQueryMap.set(j,g)}const f=Wu(t.pendingWriteTree_,s);let p=m3(c,e,n,f,i,u);if(!d&&!o&&!r){const g=q_(c,e);p=p.concat(T3(t,e,g))}return p}function Gp(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,c)=>{const u=gn(o,e),d=Es(c,u);if(d)return d});return z_(s,e,i,n,!0)}function C3(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(d,f)=>{const p=gn(d,n);r=r||Es(f,p)});let s=t.syncPointTree_.get(n);s?r=r||Es(s,rt()):(s=new V_,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new Ts(r,!0,!1):null,c=Wu(t.pendingWriteTree_,e._path),u=K_(s,e,c,i?o.getNode():Re.EMPTY_NODE,i);return l3(u)}function jo(t,e){return X_(e,t.syncPointTree_,null,Wu(t.pendingWriteTree_,rt()))}function X_(t,e,n,r){if(Ve(t.path))return Z_(t,e,n,r);{const s=e.get(rt());n==null&&s!=null&&(n=Es(s,rt()));let i=[];const o=$e(t.path),c=t.operationForChild(o),u=e.children.get(o);if(u&&c){const d=n?n.getImmediateChild(o):null,f=B_(r,o);i=i.concat(X_(c,u,d,f))}return s&&(i=i.concat(Kp(s,t,r,n))),i}}function Z_(t,e,n,r){const s=e.get(rt());n==null&&s!=null&&(n=Es(s,rt()));let i=[];return e.children.inorderTraversal((o,c)=>{const u=n?n.getImmediateChild(o):null,d=B_(r,o),f=t.operationForChild(o);f&&(i=i.concat(Z_(f,c,u,d)))}),s&&(i=i.concat(Kp(s,t,r,n))),i}function ew(t,e){const n=e.query,r=Ya(t,n);return{hashFn:()=>(a3(e)||Re.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?b3(t,n._path,r):S3(t,n._path);{const i=Sj(s,n);return fu(t,n,null,i)}}}}function Ya(t,e){const n=Vu(e);return t.queryToTagMap.get(n)}function Vu(t){return t._path.toString()+"$"+t._queryIdentifier}function qp(t,e){return t.tagToQueryMap.get(e)}function Yp(t){const e=t.indexOf("$");return le(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ut(t.substr(0,e))}}function Qp(t,e,n){const r=t.syncPointTree_.get(e);le(r,"Missing sync point for query tag that we're tracking");const s=Wu(t.pendingWriteTree_,e);return Kp(r,n,s,null)}function I3(t){return t.fold((e,n,r)=>{if(n&&Ns(n))return[Hu(n)];{let s=[];return n&&(s=G_(n)),sn(r,(i,o)=>{s=s.concat(o)}),s}})}function ga(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(x3())(t._repo,t._path):t}function j3(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=Vu(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function k3(){return v3++}function T3(t,e,n){const r=e._path,s=Ya(t,e),i=ew(t,n),o=t.listenProvider_.startListening(ga(e),s,i.hashFn,i.onComplete),c=t.syncPointTree_.subtree(r);if(s)le(!Ns(c.value),"If we're adding a query, it shouldn't be shadowed");else{const u=c.fold((d,f,p)=>{if(!Ve(d)&&f&&Ns(f))return[Hu(f).query];{let g=[];return f&&(g=g.concat(G_(f).map(j=>j.query))),sn(p,(j,v)=>{g=g.concat(v)}),g}});for(let d=0;d<u.length;++d){const f=u[d];t.listenProvider_.stopListening(ga(f),Ya(t,f))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Jp(n)}node(){return this.node_}}class Xp{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=jt(this.path_,e);return new Xp(this.syncTree_,n)}node(){return Gp(this.syncTree_,this.path_)}}const N3=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},cy=function(t,e,n){if(!t||typeof t!="object")return t;if(le(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return R3(t[".sv"],e,n);if(typeof t[".sv"]=="object")return A3(t[".sv"],e);le(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},R3=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:le(!1,"Unexpected server value: "+t)}},A3=function(t,e,n){t.hasOwnProperty("increment")||le(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&le(!1,"Unexpected increment value: "+r);const s=e.node();if(le(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},tw=function(t,e,n,r){return Zp(e,new Xp(n,t),r)},nw=function(t,e,n){return Zp(t,new Jp(e),n)};function Zp(t,e,n){const r=t.getPriority().val(),s=cy(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,c=cy(o.getValue(),e,n);return c!==o.getValue()||s!==o.getPriority().val()?new Kt(c,zt(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new Kt(s))),o.forEachChild(kt,(c,u)=>{const d=Zp(u,e.getImmediateChild(c),n);d!==u&&(i=i.updateImmediateChild(c,d))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function tm(t,e){let n=e instanceof ut?e:new ut(e),r=t,s=$e(n);for(;s!==null;){const i=lo(r.node.children,s)||{children:{},childCount:0};r=new em(s,r,i),n=ft(n),s=$e(n)}return r}function ko(t){return t.node.value}function rw(t,e){t.node.value=e,xf(t)}function sw(t){return t.node.childCount>0}function P3(t){return ko(t)===void 0&&!sw(t)}function Ku(t,e){sn(t.node.children,(n,r)=>{e(new em(n,t,r))})}function iw(t,e,n,r){n&&e(t),Ku(t,s=>{iw(s,e,!0)})}function O3(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function gl(t){return new ut(t.parent===null?t.name:gl(t.parent)+"/"+t.name)}function xf(t){t.parent!==null&&D3(t.parent,t.name,t)}function D3(t,e,n){const r=P3(n),s=Ir(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,xf(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,xf(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M3=/[\[\].#$\/\u0000-\u001F\u007F]/,L3=/[\[\].#$\u0000-\u001F\u007F]/,Yd=10*1024*1024,nm=function(t){return typeof t=="string"&&t.length!==0&&!M3.test(t)},ow=function(t){return typeof t=="string"&&t.length!==0&&!L3.test(t)},F3=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),ow(t)},z3=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Tp(t)||t&&typeof t=="object"&&Ir(t,".sv")},aw=function(t,e,n,r){r&&e===void 0||Gu(zu(t,"value"),e,n)},Gu=function(t,e,n){const r=n instanceof ut?new nk(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+qs(r));if(typeof e=="function")throw new Error(t+"contains a function "+qs(r)+" with contents = "+e.toString());if(Tp(e))throw new Error(t+"contains "+e.toString()+" "+qs(r));if(typeof e=="string"&&e.length>Yd/3&&Bu(e)>Yd)throw new Error(t+"contains a string greater than "+Yd+" utf8 bytes "+qs(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(sn(e,(o,c)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!nm(o)))throw new Error(t+" contains an invalid key ("+o+") "+qs(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);rk(r,o),Gu(t,c,r),sk(r)}),s&&i)throw new Error(t+' contains ".value" child '+qs(r)+" in addition to actual children.")}},B3=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const i=Ha(r);for(let o=0;o<i.length;o++)if(!(i[o]===".priority"&&o===i.length-1)){if(!nm(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(tk);let s=null;for(n=0;n<e.length;n++){if(r=e[n],s!==null&&Vn(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}},U3=function(t,e,n,r){const s=zu(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const i=[];sn(e,(o,c)=>{const u=new ut(o);if(Gu(s,c,jt(n,u)),Op(u)===".priority"&&!z3(c))throw new Error(s+"contains an invalid value for '"+u.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");i.push(u)}),B3(s,i)},lw=function(t,e,n,r){if(!ow(n))throw new Error(zu(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},$3=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),lw(t,e,n)},cw=function(t,e){if($e(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},W3=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!nm(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!F3(n))throw new Error(zu(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function qu(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!Dp(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function uw(t,e,n){qu(t,n),dw(t,r=>Dp(r,e))}function Yn(t,e,n){qu(t,n),dw(t,r=>Vn(r,e)||Vn(e,r))}function dw(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(V3(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function V3(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();ha&&tn("event: "+n.toString()),Io(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K3="repo_interrupt",G3=25;class q3{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new H3,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=iu(),this.transactionQueueTree_=new em,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Y3(t,e,n){if(t.stats_=Ap(t.repoInfo_),t.forceRestClient_||Ij())t.server_=new su(t.repoInfo_,(r,s,i,o)=>{uy(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>dy(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Bt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Fr(t.repoInfo_,e,(r,s,i,o)=>{uy(t,r,s,i,o)},r=>{dy(t,r)},r=>{Q3(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=Rj(t.repoInfo_,()=>new Nk(t.stats_,t.server_)),t.infoData_=new Ck,t.infoSyncTree_=new ly({startListening:(r,s,i,o)=>{let c=[];const u=t.infoData_.getNode(r._path);return u.isEmpty()||(c=ml(t.infoSyncTree_,r._path,u),setTimeout(()=>{o("ok")},0)),c},stopListening:()=>{}}),rm(t,"connected",!1),t.serverSyncTree_=new ly({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(c,u)=>{const d=o(c,u);Yn(t.eventQueue_,r._path,d)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function hw(t){const n=t.infoData_.getNode(new ut(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Yu(t){return N3({timestamp:hw(t)})}function uy(t,e,n,r,s){t.dataUpdateCount++;const i=new ut(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const u=eu(n,d=>zt(d));o=E3(t.serverSyncTree_,i,u,s)}else{const u=zt(n);o=J_(t.serverSyncTree_,i,u,s)}else if(r){const u=eu(n,d=>zt(d));o=w3(t.serverSyncTree_,i,u)}else{const u=zt(n);o=ml(t.serverSyncTree_,i,u)}let c=i;o.length>0&&(c=mo(t,i)),Yn(t.eventQueue_,c,o)}function dy(t,e){rm(t,"connected",e),e===!1&&e6(t)}function Q3(t,e){sn(e,(n,r)=>{rm(t,n,r)})}function rm(t,e,n){const r=new ut("/.info/"+e),s=zt(n);t.infoData_.updateSnapshot(r,s);const i=ml(t.infoSyncTree_,r,s);Yn(t.eventQueue_,r,i)}function sm(t){return t.nextWriteId_++}function J3(t,e,n){const r=C3(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=zt(s).withIndex(e._queryParams.getIndex());yf(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=ml(t.serverSyncTree_,e._path,i);else{const c=Ya(t.serverSyncTree_,e);o=J_(t.serverSyncTree_,e._path,i,c)}return Yn(t.eventQueue_,e._path,o),fu(t.serverSyncTree_,e,n,null,!0),i},s=>(yl(t,"get for query "+Bt(e)+" failed: "+s),Promise.reject(new Error(s))))}function X3(t,e,n,r,s){yl(t,"set",{path:e.toString(),value:n,priority:r});const i=Yu(t),o=zt(n,r),c=Gp(t.serverSyncTree_,e),u=nw(o,c,i),d=sm(t),f=Q_(t.serverSyncTree_,e,u,d,!0);qu(t.eventQueue_,f),t.server_.put(e.toString(),o.val(!0),(g,j)=>{const v=g==="ok";v||xn("set at "+e+" failed: "+g);const N=ds(t.serverSyncTree_,d,!v);Yn(t.eventQueue_,e,N),vf(t,s,g,j)});const p=om(t,e);mo(t,p),Yn(t.eventQueue_,p,[])}function Z3(t,e,n,r){yl(t,"update",{path:e.toString(),value:n});let s=!0;const i=Yu(t),o={};if(sn(n,(c,u)=>{s=!1,o[c]=tw(jt(e,c),zt(u),t.serverSyncTree_,i)}),s)tn("update() called with empty data.  Don't do anything."),vf(t,r,"ok",void 0);else{const c=sm(t),u=_3(t.serverSyncTree_,e,o,c);qu(t.eventQueue_,u),t.server_.merge(e.toString(),n,(d,f)=>{const p=d==="ok";p||xn("update at "+e+" failed: "+d);const g=ds(t.serverSyncTree_,c,!p),j=g.length>0?mo(t,e):e;Yn(t.eventQueue_,j,g),vf(t,r,d,f)}),sn(n,d=>{const f=om(t,jt(e,d));mo(t,f)}),Yn(t.eventQueue_,e,[])}}function e6(t){yl(t,"onDisconnectEvents");const e=Yu(t),n=iu();df(t.onDisconnect_,rt(),(s,i)=>{const o=tw(s,i,t.serverSyncTree_,e);D_(n,s,o)});let r=[];df(n,rt(),(s,i)=>{r=r.concat(ml(t.serverSyncTree_,s,i));const o=om(t,s);mo(t,o)}),t.onDisconnect_=iu(),Yn(t.eventQueue_,rt(),r)}function t6(t,e,n){let r;$e(e._path)===".info"?r=yf(t.infoSyncTree_,e,n):r=yf(t.serverSyncTree_,e,n),uw(t.eventQueue_,e._path,r)}function fw(t,e,n){let r;$e(e._path)===".info"?r=fu(t.infoSyncTree_,e,n):r=fu(t.serverSyncTree_,e,n),uw(t.eventQueue_,e._path,r)}function n6(t){t.persistentConnection_&&t.persistentConnection_.interrupt(K3)}function yl(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),tn(n,...e)}function vf(t,e,n,r){e&&Io(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function pw(t,e,n){return Gp(t.serverSyncTree_,e,n)||Re.EMPTY_NODE}function im(t,e=t.transactionQueueTree_){if(e||Qu(t,e),ko(e)){const n=gw(t,e);le(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&r6(t,gl(e),n)}else sw(e)&&Ku(e,n=>{im(t,n)})}function r6(t,e,n){const r=n.map(d=>d.currentWriteId),s=pw(t,e,r);let i=s;const o=s.hash();for(let d=0;d<n.length;d++){const f=n[d];le(f.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=1,f.retryCount++;const p=gn(e,f.path);i=i.updateChild(p,f.currentOutputSnapshotRaw)}const c=i.val(!0),u=e;t.server_.put(u.toString(),c,d=>{yl(t,"transaction put response",{path:u.toString(),status:d});let f=[];if(d==="ok"){const p=[];for(let g=0;g<n.length;g++)n[g].status=2,f=f.concat(ds(t.serverSyncTree_,n[g].currentWriteId)),n[g].onComplete&&p.push(()=>n[g].onComplete(null,!0,n[g].currentOutputSnapshotResolved)),n[g].unwatcher();Qu(t,tm(t.transactionQueueTree_,e)),im(t,t.transactionQueueTree_),Yn(t.eventQueue_,e,f);for(let g=0;g<p.length;g++)Io(p[g])}else{if(d==="datastale")for(let p=0;p<n.length;p++)n[p].status===3?n[p].status=4:n[p].status=0;else{xn("transaction at "+u.toString()+" failed: "+d);for(let p=0;p<n.length;p++)n[p].status=4,n[p].abortReason=d}mo(t,e)}},o)}function mo(t,e){const n=mw(t,e),r=gl(n),s=gw(t,n);return s6(t,s,r),r}function s6(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(c=>c.status===0).map(c=>c.currentWriteId);for(let c=0;c<e.length;c++){const u=e[c],d=gn(n,u.path);let f=!1,p;if(le(d!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===4)f=!0,p=u.abortReason,s=s.concat(ds(t.serverSyncTree_,u.currentWriteId,!0));else if(u.status===0)if(u.retryCount>=G3)f=!0,p="maxretry",s=s.concat(ds(t.serverSyncTree_,u.currentWriteId,!0));else{const g=pw(t,u.path,o);u.currentInputSnapshot=g;const j=e[c].update(g.val());if(j!==void 0){Gu("transaction failed: Data returned ",j,u.path);let v=zt(j);typeof j=="object"&&j!=null&&Ir(j,".priority")||(v=v.updatePriority(g.getPriority()));const R=u.currentWriteId,b=Yu(t),_=nw(v,g,b);u.currentOutputSnapshotRaw=v,u.currentOutputSnapshotResolved=_,u.currentWriteId=sm(t),o.splice(o.indexOf(R),1),s=s.concat(Q_(t.serverSyncTree_,u.path,_,u.currentWriteId,u.applyLocally)),s=s.concat(ds(t.serverSyncTree_,R,!0))}else f=!0,p="nodata",s=s.concat(ds(t.serverSyncTree_,u.currentWriteId,!0))}Yn(t.eventQueue_,n,s),s=[],f&&(e[c].status=2,function(g){setTimeout(g,Math.floor(0))}(e[c].unwatcher),e[c].onComplete&&(p==="nodata"?r.push(()=>e[c].onComplete(null,!1,e[c].currentInputSnapshot)):r.push(()=>e[c].onComplete(new Error(p),!1,null))))}Qu(t,t.transactionQueueTree_);for(let c=0;c<r.length;c++)Io(r[c]);im(t,t.transactionQueueTree_)}function mw(t,e){let n,r=t.transactionQueueTree_;for(n=$e(e);n!==null&&ko(r)===void 0;)r=tm(r,n),e=ft(e),n=$e(e);return r}function gw(t,e){const n=[];return yw(t,e,n),n.sort((r,s)=>r.order-s.order),n}function yw(t,e,n){const r=ko(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);Ku(e,s=>{yw(t,s,n)})}function Qu(t,e){const n=ko(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,rw(e,n.length>0?n:void 0)}Ku(e,r=>{Qu(t,r)})}function om(t,e){const n=gl(mw(t,e)),r=tm(t.transactionQueueTree_,e);return O3(r,s=>{Qd(t,s)}),Qd(t,r),iw(r,s=>{Qd(t,s)}),n}function Qd(t,e){const n=ko(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(le(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(le(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(ds(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?rw(e,void 0):n.length=i+1,Yn(t.eventQueue_,gl(e),s);for(let o=0;o<r.length;o++)Io(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i6(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function o6(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):xn(`Invalid query segment '${n}' in query '${t}'`)}return e}const hy=function(t,e){const n=a6(t),r=n.namespace;n.domain==="firebase.com"&&Vr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Vr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||yj();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new x_(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new ut(n.pathString)}},a6=function(t){let e="",n="",r="",s="",i="",o=!0,c="https",u=443;if(typeof t=="string"){let d=t.indexOf("//");d>=0&&(c=t.substring(0,d-1),t=t.substring(d+2));let f=t.indexOf("/");f===-1&&(f=t.length);let p=t.indexOf("?");p===-1&&(p=t.length),e=t.substring(0,Math.min(f,p)),f<p&&(s=i6(t.substring(f,p)));const g=o6(t.substring(Math.min(t.length,p)));d=e.indexOf(":"),d>=0?(o=c==="https"||c==="wss",u=parseInt(e.substring(d+1),10)):d=e.length;const j=e.slice(0,d);if(j.toLowerCase()==="localhost")n="localhost";else if(j.split(".").length<=2)n=j;else{const v=e.indexOf(".");r=e.substring(0,v).toLowerCase(),n=e.substring(v+1),i=r}"ns"in g&&(i=g.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:o,scheme:c,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fy="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",l6=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let s;const i=new Array(8);for(s=7;s>=0;s--)i[s]=fy.charAt(n%64),n=Math.floor(n/64);le(n===0,"Cannot push at time == 0");let o=i.join("");if(r){for(s=11;s>=0&&e[s]===63;s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(Math.random()*64);for(s=0;s<12;s++)o+=fy.charAt(e[s]);return le(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Bt(this.snapshot.exportVal())}}class u6{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return le(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return Ve(this._path)?null:Op(this._path)}get ref(){return new Jr(this._repo,this._path)}get _queryIdentifier(){const e=X0(this._queryParams),n=Np(e);return n==="{}"?"default":n}get _queryObject(){return X0(this._queryParams)}isEqual(e){if(e=vi(e),!(e instanceof am))return!1;const n=this._repo===e._repo,r=Dp(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+ek(this._path)}}class Jr extends am{constructor(e,n){super(e,n,new zp,!1)}get parent(){const e=j_(this._path);return e===null?null:new Jr(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Qa{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new ut(e),r=Ja(this.ref,e);return new Qa(this._node.getChild(n),r,kt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new Qa(s,Ja(this.ref,r),kt)))}hasChild(e){const n=new ut(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Lt(t,e){return t=vi(t),t._checkNotDeleted("ref"),e!==void 0?Ja(t._root,e):t._root}function Ja(t,e){return t=vi(t),$e(t._path)===null?$3("child","path",e):lw("child","path",e),new Jr(t._repo,jt(t._path,e))}function d6(t,e){t=vi(t),cw("push",t._path),aw("push",e,t._path,!0);const n=hw(t._repo),r=l6(n),s=Ja(t,r),i=Ja(t,r);let o;return e!=null?o=h6(i,e).then(()=>i):o=Promise.resolve(i),s.then=o.then.bind(o),s.catch=o.then.bind(o,void 0),s}function h6(t,e){t=vi(t),cw("set",t._path),aw("set",e,t._path,!1);const n=new dl;return X3(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Nr(t,e){U3("update",e,t._path);const n=new dl;return Z3(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function vw(t){t=vi(t);const e=new xw(()=>{}),n=new Ju(e);return J3(t._repo,t,n).then(r=>new Qa(r,new Jr(t._repo,t._path),t._queryParams.getIndex()))}class Ju{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new c6("value",this,new Qa(e.snapshotNode,new Jr(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new u6(this,e,n):null}matches(e){return e instanceof Ju?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function f6(t,e,n,r,s){const i=new xw(n,void 0),o=new Ju(i);return t6(t._repo,t,o),()=>fw(t._repo,t,o)}function Ji(t,e,n,r){return f6(t,"value",e)}function _w(t,e,n){fw(t._repo,t,null)}h3(Jr);y3(Jr);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p6="FIREBASE_DATABASE_EMULATOR_HOST",_f={};let m6=!1;function g6(t,e,n,r){const s=e.lastIndexOf(":"),i=e.substring(0,s),o=Fu(i);t.repoInfo_=new x_(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(t.authTokenProvider_=r)}function y6(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||Vr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),tn("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=hy(i,s),c=o.repoInfo,u;typeof process<"u"&&O0&&(u=O0[p6]),u?(i=`http://${u}?ns=${c.namespace}`,o=hy(i,s),c=o.repoInfo):o.repoInfo.secure;const d=new kj(t.name,t.options,e);W3("Invalid Firebase Database URL",o),Ve(o.path)||Vr("Database URL must point to the root of a Firebase Database (not including a child path).");const f=v6(c,t,d,new jj(t,n));return new _6(f,t)}function x6(t,e){const n=_f[e];(!n||n[t.key]!==t)&&Vr(`Database ${e}(${t.repoInfo_}) has already been deleted.`),n6(t),delete n[t.key]}function v6(t,e,n,r){let s=_f[e.name];s||(s={},_f[e.name]=s);let i=s[t.toURLString()];return i&&Vr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new q3(t,m6,n,r),s[t.toURLString()]=i,i}class _6{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Y3(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Jr(this._repo,rt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(x6(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Vr("Cannot call "+e+" on a deleted database.")}}function ww(t=t_(),e){const n=Jv(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=Uv("database");r&&w6(n,...r)}return n}function w6(t,e,n,r={}){t=vi(t),t._checkNotDeleted("useEmulator");const s=`${e}:${n}`,i=t._repoInternal;if(t._instanceStarted){if(s===t._repoInternal.repoInfo_.host&&za(r,i.repoInfo_.emulatorOptions))return;Vr("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Vr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new bc(bc.OWNER);else if(r.mockUserToken){const c=typeof r.mockUserToken=="string"?r.mockUserToken:Hv(r.mockUserToken,t.app.options.projectId);o=new bc(c)}Fu(e)&&(Wv(e),Vv("Database",!0)),g6(i,s,r,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S6(t){dj(Zv),Ua(new co("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return y6(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),Ss(D0,M0,t),Ss(D0,M0,"esm2020")}Fr.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Fr.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};S6();var py=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lm;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,x){function E(){}E.prototype=x.prototype,C.F=x.prototype,C.prototype=new E,C.prototype.constructor=C,C.D=function(k,T,A){for(var I=Array(arguments.length-2),J=2;J<arguments.length;J++)I[J-2]=arguments[J];return x.prototype[T].apply(k,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(C,x,E){E||(E=0);const k=Array(16);if(typeof x=="string")for(var T=0;T<16;++T)k[T]=x.charCodeAt(E++)|x.charCodeAt(E++)<<8|x.charCodeAt(E++)<<16|x.charCodeAt(E++)<<24;else for(T=0;T<16;++T)k[T]=x[E++]|x[E++]<<8|x[E++]<<16|x[E++]<<24;x=C.g[0],E=C.g[1],T=C.g[2];let A=C.g[3],I;I=x+(A^E&(T^A))+k[0]+3614090360&4294967295,x=E+(I<<7&4294967295|I>>>25),I=A+(T^x&(E^T))+k[1]+3905402710&4294967295,A=x+(I<<12&4294967295|I>>>20),I=T+(E^A&(x^E))+k[2]+606105819&4294967295,T=A+(I<<17&4294967295|I>>>15),I=E+(x^T&(A^x))+k[3]+3250441966&4294967295,E=T+(I<<22&4294967295|I>>>10),I=x+(A^E&(T^A))+k[4]+4118548399&4294967295,x=E+(I<<7&4294967295|I>>>25),I=A+(T^x&(E^T))+k[5]+1200080426&4294967295,A=x+(I<<12&4294967295|I>>>20),I=T+(E^A&(x^E))+k[6]+2821735955&4294967295,T=A+(I<<17&4294967295|I>>>15),I=E+(x^T&(A^x))+k[7]+4249261313&4294967295,E=T+(I<<22&4294967295|I>>>10),I=x+(A^E&(T^A))+k[8]+1770035416&4294967295,x=E+(I<<7&4294967295|I>>>25),I=A+(T^x&(E^T))+k[9]+2336552879&4294967295,A=x+(I<<12&4294967295|I>>>20),I=T+(E^A&(x^E))+k[10]+4294925233&4294967295,T=A+(I<<17&4294967295|I>>>15),I=E+(x^T&(A^x))+k[11]+2304563134&4294967295,E=T+(I<<22&4294967295|I>>>10),I=x+(A^E&(T^A))+k[12]+1804603682&4294967295,x=E+(I<<7&4294967295|I>>>25),I=A+(T^x&(E^T))+k[13]+4254626195&4294967295,A=x+(I<<12&4294967295|I>>>20),I=T+(E^A&(x^E))+k[14]+2792965006&4294967295,T=A+(I<<17&4294967295|I>>>15),I=E+(x^T&(A^x))+k[15]+1236535329&4294967295,E=T+(I<<22&4294967295|I>>>10),I=x+(T^A&(E^T))+k[1]+4129170786&4294967295,x=E+(I<<5&4294967295|I>>>27),I=A+(E^T&(x^E))+k[6]+3225465664&4294967295,A=x+(I<<9&4294967295|I>>>23),I=T+(x^E&(A^x))+k[11]+643717713&4294967295,T=A+(I<<14&4294967295|I>>>18),I=E+(A^x&(T^A))+k[0]+3921069994&4294967295,E=T+(I<<20&4294967295|I>>>12),I=x+(T^A&(E^T))+k[5]+3593408605&4294967295,x=E+(I<<5&4294967295|I>>>27),I=A+(E^T&(x^E))+k[10]+38016083&4294967295,A=x+(I<<9&4294967295|I>>>23),I=T+(x^E&(A^x))+k[15]+3634488961&4294967295,T=A+(I<<14&4294967295|I>>>18),I=E+(A^x&(T^A))+k[4]+3889429448&4294967295,E=T+(I<<20&4294967295|I>>>12),I=x+(T^A&(E^T))+k[9]+568446438&4294967295,x=E+(I<<5&4294967295|I>>>27),I=A+(E^T&(x^E))+k[14]+3275163606&4294967295,A=x+(I<<9&4294967295|I>>>23),I=T+(x^E&(A^x))+k[3]+4107603335&4294967295,T=A+(I<<14&4294967295|I>>>18),I=E+(A^x&(T^A))+k[8]+1163531501&4294967295,E=T+(I<<20&4294967295|I>>>12),I=x+(T^A&(E^T))+k[13]+2850285829&4294967295,x=E+(I<<5&4294967295|I>>>27),I=A+(E^T&(x^E))+k[2]+4243563512&4294967295,A=x+(I<<9&4294967295|I>>>23),I=T+(x^E&(A^x))+k[7]+1735328473&4294967295,T=A+(I<<14&4294967295|I>>>18),I=E+(A^x&(T^A))+k[12]+2368359562&4294967295,E=T+(I<<20&4294967295|I>>>12),I=x+(E^T^A)+k[5]+4294588738&4294967295,x=E+(I<<4&4294967295|I>>>28),I=A+(x^E^T)+k[8]+2272392833&4294967295,A=x+(I<<11&4294967295|I>>>21),I=T+(A^x^E)+k[11]+1839030562&4294967295,T=A+(I<<16&4294967295|I>>>16),I=E+(T^A^x)+k[14]+4259657740&4294967295,E=T+(I<<23&4294967295|I>>>9),I=x+(E^T^A)+k[1]+2763975236&4294967295,x=E+(I<<4&4294967295|I>>>28),I=A+(x^E^T)+k[4]+1272893353&4294967295,A=x+(I<<11&4294967295|I>>>21),I=T+(A^x^E)+k[7]+4139469664&4294967295,T=A+(I<<16&4294967295|I>>>16),I=E+(T^A^x)+k[10]+3200236656&4294967295,E=T+(I<<23&4294967295|I>>>9),I=x+(E^T^A)+k[13]+681279174&4294967295,x=E+(I<<4&4294967295|I>>>28),I=A+(x^E^T)+k[0]+3936430074&4294967295,A=x+(I<<11&4294967295|I>>>21),I=T+(A^x^E)+k[3]+3572445317&4294967295,T=A+(I<<16&4294967295|I>>>16),I=E+(T^A^x)+k[6]+76029189&4294967295,E=T+(I<<23&4294967295|I>>>9),I=x+(E^T^A)+k[9]+3654602809&4294967295,x=E+(I<<4&4294967295|I>>>28),I=A+(x^E^T)+k[12]+3873151461&4294967295,A=x+(I<<11&4294967295|I>>>21),I=T+(A^x^E)+k[15]+530742520&4294967295,T=A+(I<<16&4294967295|I>>>16),I=E+(T^A^x)+k[2]+3299628645&4294967295,E=T+(I<<23&4294967295|I>>>9),I=x+(T^(E|~A))+k[0]+4096336452&4294967295,x=E+(I<<6&4294967295|I>>>26),I=A+(E^(x|~T))+k[7]+1126891415&4294967295,A=x+(I<<10&4294967295|I>>>22),I=T+(x^(A|~E))+k[14]+2878612391&4294967295,T=A+(I<<15&4294967295|I>>>17),I=E+(A^(T|~x))+k[5]+4237533241&4294967295,E=T+(I<<21&4294967295|I>>>11),I=x+(T^(E|~A))+k[12]+1700485571&4294967295,x=E+(I<<6&4294967295|I>>>26),I=A+(E^(x|~T))+k[3]+2399980690&4294967295,A=x+(I<<10&4294967295|I>>>22),I=T+(x^(A|~E))+k[10]+4293915773&4294967295,T=A+(I<<15&4294967295|I>>>17),I=E+(A^(T|~x))+k[1]+2240044497&4294967295,E=T+(I<<21&4294967295|I>>>11),I=x+(T^(E|~A))+k[8]+1873313359&4294967295,x=E+(I<<6&4294967295|I>>>26),I=A+(E^(x|~T))+k[15]+4264355552&4294967295,A=x+(I<<10&4294967295|I>>>22),I=T+(x^(A|~E))+k[6]+2734768916&4294967295,T=A+(I<<15&4294967295|I>>>17),I=E+(A^(T|~x))+k[13]+1309151649&4294967295,E=T+(I<<21&4294967295|I>>>11),I=x+(T^(E|~A))+k[4]+4149444226&4294967295,x=E+(I<<6&4294967295|I>>>26),I=A+(E^(x|~T))+k[11]+3174756917&4294967295,A=x+(I<<10&4294967295|I>>>22),I=T+(x^(A|~E))+k[2]+718787259&4294967295,T=A+(I<<15&4294967295|I>>>17),I=E+(A^(T|~x))+k[9]+3951481745&4294967295,C.g[0]=C.g[0]+x&4294967295,C.g[1]=C.g[1]+(T+(I<<21&4294967295|I>>>11))&4294967295,C.g[2]=C.g[2]+T&4294967295,C.g[3]=C.g[3]+A&4294967295}r.prototype.v=function(C,x){x===void 0&&(x=C.length);const E=x-this.blockSize,k=this.C;let T=this.h,A=0;for(;A<x;){if(T==0)for(;A<=E;)s(this,C,A),A+=this.blockSize;if(typeof C=="string"){for(;A<x;)if(k[T++]=C.charCodeAt(A++),T==this.blockSize){s(this,k),T=0;break}}else for(;A<x;)if(k[T++]=C[A++],T==this.blockSize){s(this,k),T=0;break}}this.h=T,this.o+=x},r.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var x=1;x<C.length-8;++x)C[x]=0;x=this.o*8;for(var E=C.length-8;E<C.length;++E)C[E]=x&255,x/=256;for(this.v(C),C=Array(16),x=0,E=0;E<4;++E)for(let k=0;k<32;k+=8)C[x++]=this.g[E]>>>k&255;return C};function i(C,x){var E=c;return Object.prototype.hasOwnProperty.call(E,C)?E[C]:E[C]=x(C)}function o(C,x){this.h=x;const E=[];let k=!0;for(let T=C.length-1;T>=0;T--){const A=C[T]|0;k&&A==x||(E[T]=A,k=!1)}this.g=E}var c={};function u(C){return-128<=C&&C<128?i(C,function(x){return new o([x|0],x<0?-1:0)}):new o([C|0],C<0?-1:0)}function d(C){if(isNaN(C)||!isFinite(C))return p;if(C<0)return R(d(-C));const x=[];let E=1;for(let k=0;C>=E;k++)x[k]=C/E|0,E*=4294967296;return new o(x,0)}function f(C,x){if(C.length==0)throw Error("number format error: empty string");if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(C.charAt(0)=="-")return R(f(C.substring(1),x));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const E=d(Math.pow(x,8));let k=p;for(let A=0;A<C.length;A+=8){var T=Math.min(8,C.length-A);const I=parseInt(C.substring(A,A+T),x);T<8?(T=d(Math.pow(x,T)),k=k.j(T).add(d(I))):(k=k.j(E),k=k.add(d(I)))}return k}var p=u(0),g=u(1),j=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-R(this).m();let C=0,x=1;for(let E=0;E<this.g.length;E++){const k=this.i(E);C+=(k>=0?k:4294967296+k)*x,x*=4294967296}return C},t.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(v(this))return"0";if(N(this))return"-"+R(this).toString(C);const x=d(Math.pow(C,6));var E=this;let k="";for(;;){const T=P(E,x).g;E=b(E,T.j(x));let A=((E.g.length>0?E.g[0]:E.h)>>>0).toString(C);if(E=T,v(E))return A+k;for(;A.length<6;)A="0"+A;k=A+k}},t.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function v(C){if(C.h!=0)return!1;for(let x=0;x<C.g.length;x++)if(C.g[x]!=0)return!1;return!0}function N(C){return C.h==-1}t.l=function(C){return C=b(this,C),N(C)?-1:v(C)?0:1};function R(C){const x=C.g.length,E=[];for(let k=0;k<x;k++)E[k]=~C.g[k];return new o(E,~C.h).add(g)}t.abs=function(){return N(this)?R(this):this},t.add=function(C){const x=Math.max(this.g.length,C.g.length),E=[];let k=0;for(let T=0;T<=x;T++){let A=k+(this.i(T)&65535)+(C.i(T)&65535),I=(A>>>16)+(this.i(T)>>>16)+(C.i(T)>>>16);k=I>>>16,A&=65535,I&=65535,E[T]=I<<16|A}return new o(E,E[E.length-1]&-2147483648?-1:0)};function b(C,x){return C.add(R(x))}t.j=function(C){if(v(this)||v(C))return p;if(N(this))return N(C)?R(this).j(R(C)):R(R(this).j(C));if(N(C))return R(this.j(R(C)));if(this.l(j)<0&&C.l(j)<0)return d(this.m()*C.m());const x=this.g.length+C.g.length,E=[];for(var k=0;k<2*x;k++)E[k]=0;for(k=0;k<this.g.length;k++)for(let T=0;T<C.g.length;T++){const A=this.i(k)>>>16,I=this.i(k)&65535,J=C.i(T)>>>16,Ee=C.i(T)&65535;E[2*k+2*T]+=I*Ee,_(E,2*k+2*T),E[2*k+2*T+1]+=A*Ee,_(E,2*k+2*T+1),E[2*k+2*T+1]+=I*J,_(E,2*k+2*T+1),E[2*k+2*T+2]+=A*J,_(E,2*k+2*T+2)}for(C=0;C<x;C++)E[C]=E[2*C+1]<<16|E[2*C];for(C=x;C<2*x;C++)E[C]=0;return new o(E,0)};function _(C,x){for(;(C[x]&65535)!=C[x];)C[x+1]+=C[x]>>>16,C[x]&=65535,x++}function w(C,x){this.g=C,this.h=x}function P(C,x){if(v(x))throw Error("division by zero");if(v(C))return new w(p,p);if(N(C))return x=P(R(C),x),new w(R(x.g),R(x.h));if(N(x))return x=P(C,R(x)),new w(R(x.g),x.h);if(C.g.length>30){if(N(C)||N(x))throw Error("slowDivide_ only works with positive integers.");for(var E=g,k=x;k.l(C)<=0;)E=V(E),k=V(k);var T=X(E,1),A=X(k,1);for(k=X(k,2),E=X(E,2);!v(k);){var I=A.add(k);I.l(C)<=0&&(T=T.add(E),A=I),k=X(k,1),E=X(E,1)}return x=b(C,T.j(x)),new w(T,x)}for(T=p;C.l(x)>=0;){for(E=Math.max(1,Math.floor(C.m()/x.m())),k=Math.ceil(Math.log(E)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),A=d(E),I=A.j(x);N(I)||I.l(C)>0;)E-=k,A=d(E),I=A.j(x);v(A)&&(A=g),T=T.add(A),C=b(C,I)}return new w(T,C)}t.B=function(C){return P(this,C).h},t.and=function(C){const x=Math.max(this.g.length,C.g.length),E=[];for(let k=0;k<x;k++)E[k]=this.i(k)&C.i(k);return new o(E,this.h&C.h)},t.or=function(C){const x=Math.max(this.g.length,C.g.length),E=[];for(let k=0;k<x;k++)E[k]=this.i(k)|C.i(k);return new o(E,this.h|C.h)},t.xor=function(C){const x=Math.max(this.g.length,C.g.length),E=[];for(let k=0;k<x;k++)E[k]=this.i(k)^C.i(k);return new o(E,this.h^C.h)};function V(C){const x=C.g.length+1,E=[];for(let k=0;k<x;k++)E[k]=C.i(k)<<1|C.i(k-1)>>>31;return new o(E,C.h)}function X(C,x){const E=x>>5;x%=32;const k=C.g.length-E,T=[];for(let A=0;A<k;A++)T[A]=x>0?C.i(A+E)>>>x|C.i(A+E+1)<<32-x:C.i(A+E);return new o(T,C.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,lm=o}).apply(typeof py<"u"?py:typeof self<"u"?self:typeof window<"u"?window:{});var rc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof rc=="object"&&rc];for(var h=0;h<a.length;++h){var m=a[h];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var m=r;a=a.split(".");for(var S=0;S<a.length-1;S++){var F=a[S];if(!(F in m))break e;m=m[F]}a=a[a.length-1],S=m[a],h=h(S),h!=S&&h!=null&&e(m,a,{configurable:!0,writable:!0,value:h})}}s("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(a){return a||function(h){var m=[],S;for(S in h)Object.prototype.hasOwnProperty.call(h,S)&&m.push([S,h[S]]);return m}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function c(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function u(a,h,m){return a.call.apply(a.bind,arguments)}function d(a,h,m){return d=u,d.apply(null,arguments)}function f(a,h){var m=Array.prototype.slice.call(arguments,1);return function(){var S=m.slice();return S.push.apply(S,arguments),a.apply(this,S)}}function p(a,h){function m(){}m.prototype=h.prototype,a.Z=h.prototype,a.prototype=new m,a.prototype.constructor=a,a.Ob=function(S,F,K){for(var de=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)de[Ue-2]=arguments[Ue];return h.prototype[F].apply(S,de)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function j(a){const h=a.length;if(h>0){const m=Array(h);for(let S=0;S<h;S++)m[S]=a[S];return m}return[]}function v(a,h){for(let S=1;S<arguments.length;S++){const F=arguments[S];var m=typeof F;if(m=m!="object"?m:F?Array.isArray(F)?"array":m:"null",m=="array"||m=="object"&&typeof F.length=="number"){m=a.length||0;const K=F.length||0;a.length=m+K;for(let de=0;de<K;de++)a[m+de]=F[de]}else a.push(F)}}class N{constructor(h,m){this.i=h,this.j=m,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function R(a){o.setTimeout(()=>{throw a},0)}function b(){var a=C;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class _{constructor(){this.h=this.g=null}add(h,m){const S=w.get();S.set(h,m),this.h?this.h.next=S:this.g=S,this.h=S}}var w=new N(()=>new P,a=>a.reset());class P{constructor(){this.next=this.g=this.h=null}set(h,m){this.h=h,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let V,X=!1,C=new _,x=()=>{const a=Promise.resolve(void 0);V=()=>{a.then(E)}};function E(){for(var a;a=b();){try{a.h.call(a.g)}catch(m){R(m)}var h=w;h.j(a),h.h<100&&(h.h++,a.next=h.g,h.g=a)}X=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function T(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}T.prototype.h=function(){this.defaultPrevented=!0};var A=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const m=()=>{};o.addEventListener("test",m,h),o.removeEventListener("test",m,h)}catch{}return a}();function I(a){return/^[\s\xa0]*$/.test(a)}function J(a,h){T.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,h)}p(J,T),J.prototype.init=function(a,h){const m=this.type=a.type,S=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget,h||(m=="mouseover"?h=a.fromElement:m=="mouseout"&&(h=a.toElement)),this.relatedTarget=h,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&J.Z.h.call(this)},J.prototype.h=function(){J.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Ee="closure_listenable_"+(Math.random()*1e6|0),q=0;function ge(a,h,m,S,F){this.listener=a,this.proxy=null,this.src=h,this.type=m,this.capture=!!S,this.ha=F,this.key=++q,this.da=this.fa=!1}function G(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function U(a,h,m){for(const S in a)h.call(m,a[S],S,a)}function te(a,h){for(const m in a)h.call(void 0,a[m],m,a)}function z(a){const h={};for(const m in a)h[m]=a[m];return h}const ae="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _e(a,h){let m,S;for(let F=1;F<arguments.length;F++){S=arguments[F];for(m in S)a[m]=S[m];for(let K=0;K<ae.length;K++)m=ae[K],Object.prototype.hasOwnProperty.call(S,m)&&(a[m]=S[m])}}function we(a){this.src=a,this.g={},this.h=0}we.prototype.add=function(a,h,m,S,F){const K=a.toString();a=this.g[K],a||(a=this.g[K]=[],this.h++);const de=L(a,h,S,F);return de>-1?(h=a[de],m||(h.fa=!1)):(h=new ge(h,this.src,K,!!S,F),h.fa=m,a.push(h)),h};function ue(a,h){const m=h.type;if(m in a.g){var S=a.g[m],F=Array.prototype.indexOf.call(S,h,void 0),K;(K=F>=0)&&Array.prototype.splice.call(S,F,1),K&&(G(h),a.g[m].length==0&&(delete a.g[m],a.h--))}}function L(a,h,m,S){for(let F=0;F<a.length;++F){const K=a[F];if(!K.da&&K.listener==h&&K.capture==!!m&&K.ha==S)return F}return-1}var ce="closure_lm_"+(Math.random()*1e6|0),M={};function Ie(a,h,m,S,F){if(Array.isArray(h)){for(let K=0;K<h.length;K++)Ie(a,h[K],m,S,F);return null}return m=$(m),a&&a[Ee]?a.J(h,m,c(S)?!!S.capture:!1,F):Q(a,h,m,!1,S,F)}function Q(a,h,m,S,F,K){if(!h)throw Error("Invalid event type");const de=c(F)?!!F.capture:!!F;let Ue=D(a);if(Ue||(a[ce]=Ue=new we(a)),m=Ue.add(h,m,S,de,K),m.proxy)return m;if(S=me(),m.proxy=S,S.src=a,S.listener=m,a.addEventListener)A||(F=de),F===void 0&&(F=!1),a.addEventListener(h.toString(),S,F);else if(a.attachEvent)a.attachEvent(re(h.toString()),S);else if(a.addListener&&a.removeListener)a.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return m}function me(){function a(m){return h.call(a.src,a.listener,m)}const h=se;return a}function B(a,h,m,S,F){if(Array.isArray(h))for(var K=0;K<h.length;K++)B(a,h[K],m,S,F);else S=c(S)?!!S.capture:!!S,m=$(m),a&&a[Ee]?(a=a.i,K=String(h).toString(),K in a.g&&(h=a.g[K],m=L(h,m,S,F),m>-1&&(G(h[m]),Array.prototype.splice.call(h,m,1),h.length==0&&(delete a.g[K],a.h--)))):a&&(a=D(a))&&(h=a.g[h.toString()],a=-1,h&&(a=L(h,m,S,F)),(m=a>-1?h[a]:null)&&Y(m))}function Y(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[Ee])ue(h.i,a);else{var m=a.type,S=a.proxy;h.removeEventListener?h.removeEventListener(m,S,a.capture):h.detachEvent?h.detachEvent(re(m),S):h.addListener&&h.removeListener&&h.removeListener(S),(m=D(h))?(ue(m,a),m.h==0&&(m.src=null,h[ce]=null)):G(a)}}}function re(a){return a in M?M[a]:M[a]="on"+a}function se(a,h){if(a.da)a=!0;else{h=new J(h,this);const m=a.listener,S=a.ha||a.src;a.fa&&Y(a),a=m.call(S,h)}return a}function D(a){return a=a[ce],a instanceof we?a:null}var W="__closure_events_fn_"+(Math.random()*1e9>>>0);function $(a){return typeof a=="function"?a:(a[W]||(a[W]=function(h){return a.handleEvent(h)}),a[W])}function ee(){k.call(this),this.i=new we(this),this.M=this,this.G=null}p(ee,k),ee.prototype[Ee]=!0,ee.prototype.removeEventListener=function(a,h,m,S){B(this,a,h,m,S)};function ne(a,h){var m,S=a.G;if(S)for(m=[];S;S=S.G)m.push(S);if(a=a.M,S=h.type||h,typeof h=="string")h=new T(h,a);else if(h instanceof T)h.target=h.target||a;else{var F=h;h=new T(S,a),_e(h,F)}F=!0;let K,de;if(m)for(de=m.length-1;de>=0;de--)K=h.g=m[de],F=he(K,S,!0,h)&&F;if(K=h.g=a,F=he(K,S,!0,h)&&F,F=he(K,S,!1,h)&&F,m)for(de=0;de<m.length;de++)K=h.g=m[de],F=he(K,S,!1,h)&&F}ee.prototype.N=function(){if(ee.Z.N.call(this),this.i){var a=this.i;for(const h in a.g){const m=a.g[h];for(let S=0;S<m.length;S++)G(m[S]);delete a.g[h],a.h--}}this.G=null},ee.prototype.J=function(a,h,m,S){return this.i.add(String(a),h,!1,m,S)},ee.prototype.K=function(a,h,m,S){return this.i.add(String(a),h,!0,m,S)};function he(a,h,m,S){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();let F=!0;for(let K=0;K<h.length;++K){const de=h[K];if(de&&!de.da&&de.capture==m){const Ue=de.listener,Mt=de.ha||de.src;de.fa&&ue(a.i,de),F=Ue.call(Mt,S)!==!1&&F}}return F&&!S.defaultPrevented}function ye(a,h){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=d(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:o.setTimeout(a,h||0)}function Se(a){a.g=ye(()=>{a.g=null,a.i&&(a.i=!1,Se(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class xe extends k{constructor(h,m){super(),this.m=h,this.l=m,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Se(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fe(a){k.call(this),this.h=a,this.g={}}p(fe,k);var De=[];function At(a){U(a.g,function(h,m){this.g.hasOwnProperty(m)&&Y(h)},a),a.g={}}fe.prototype.N=function(){fe.Z.N.call(this),At(this)},fe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pe=o.JSON.stringify,qe=o.JSON.parse,ot=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function $t(){}function Ye(){}var Dt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Qt(){T.call(this,"d")}p(Qt,T);function xt(){T.call(this,"c")}p(xt,T);var Wt={},_l=null;function Fs(){return _l=_l||new ee}Wt.Ia="serverreachability";function zs(a){T.call(this,Wt.Ia,a)}p(zs,T);function Jt(a){const h=Fs();ne(h,new zs(h))}Wt.STAT_EVENT="statevent";function Fn(a,h){T.call(this,Wt.STAT_EVENT,a),this.stat=h}p(Fn,T);function ct(a){const h=Fs();ne(h,new Fn(h,a))}Wt.Ja="timingevent";function jr(a,h){T.call(this,Wt.Ja,a),this.size=h}p(jr,T);function dn(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},h)}function zn(){this.g=!0}zn.prototype.ua=function(){this.g=!1};function wl(a,h,m,S,F,K){a.info(function(){if(a.g)if(K){var de="",Ue=K.split("&");for(let dt=0;dt<Ue.length;dt++){var Mt=Ue[dt].split("=");if(Mt.length>1){const Ht=Mt[0];Mt=Mt[1];const pr=Ht.split("_");de=pr.length>=2&&pr[1]=="type"?de+(Ht+"="+Mt+"&"):de+(Ht+"=redacted&")}}}else de=null;else de=K;return"XMLHTTP REQ ("+S+") [attempt "+F+"]: "+h+`
`+m+`
`+de})}function Xu(a,h,m,S,F,K,de){a.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+F+"]: "+h+`
`+m+`
`+K+" "+de})}function Xt(a,h,m,S){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+pm(a,m)+(S?" "+S:"")})}function fm(a,h){a.info(function(){return"TIMEOUT: "+h})}zn.prototype.info=function(){};function pm(a,h){if(!a.g)return h;if(!h)return null;try{const K=JSON.parse(h);if(K){for(a=0;a<K.length;a++)if(Array.isArray(K[a])){var m=K[a];if(!(m.length<2)){var S=m[1];if(Array.isArray(S)&&!(S.length<1)){var F=S[0];if(F!="noop"&&F!="stop"&&F!="close")for(let de=1;de<S.length;de++)S[de]=""}}}}return Pe(K)}catch{return h}}var Si={NO_ERROR:0,TIMEOUT:8},To={},Sl;function No(){}p(No,$t),No.prototype.g=function(){return new XMLHttpRequest},Sl=new No;function Bn(a){return encodeURIComponent(String(a))}function bl(a){var h=1;a=a.split(":");const m=[];for(;h>0&&a.length;)m.push(a.shift()),h--;return a.length&&m.push(a.join(":")),m}function fr(a,h,m,S){this.j=a,this.i=h,this.l=m,this.S=S||1,this.V=new fe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Bs}function Bs(){this.i=null,this.g="",this.h=!1}var El={},Ro={};function bi(a,h,m){a.M=1,a.A=Ct(Me(h)),a.u=m,a.R=!0,Cl(a,null)}function Cl(a,h){a.F=Date.now(),Qn(a),a.B=Me(a.A);var m=a.B,S=a.S;Array.isArray(S)||(S=[String(S)]),vm(m.i,"t",S),a.C=0,m=a.j.L,a.h=new Bs,a.g=Lm(a.j,m?h:null,!a.u),a.P>0&&(a.O=new xe(d(a.Y,a,a.g),a.P)),h=a.V,m=a.g,S=a.ba;var F="readystatechange";Array.isArray(F)||(F&&(De[0]=F.toString()),F=De);for(let K=0;K<F.length;K++){const de=Ie(m,F[K],S||h.handleEvent,!1,h.h||h);if(!de)break;h.g[de.key]=de}h=a.J?z(a.J):{},a.u?(a.v||(a.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,h)):(a.v="GET",a.g.ea(a.B,a.v,null,h)),Jt(),wl(a.i,a.v,a.B,a.l,a.S,a.u)}fr.prototype.ba=function(a){a=a.target;const h=this.O;h&&es(a)==3?h.j():this.Y(a)},fr.prototype.Y=function(a){try{if(a==this.g)e:{const Ue=es(this.g),Mt=this.g.ya(),dt=this.g.ca();if(!(Ue<3)&&(Ue!=3||this.g&&(this.h.h||this.g.la()||Im(this.g)))){this.K||Ue!=4||Mt==7||(Mt==8||dt<=0?Jt(3):Jt(2)),O(this);var h=this.g.ca();this.X=h;var m=Zu(this);if(this.o=h==200,Xu(this.i,this.v,this.B,this.l,this.S,Ue,h),this.o){if(this.U&&!this.L){t:{if(this.g){var S,F=this.g;if((S=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(S)){var K=S;break t}}K=null}if(a=K)Xt(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Be(this,a);else{this.o=!1,this.m=3,ct(12),Ce(this),ie(this);break e}}if(this.R){a=!0;let Ht;for(;!this.K&&this.C<m.length;)if(Ht=jl(this,m),Ht==Ro){Ue==4&&(this.m=4,ct(14),a=!1),Xt(this.i,this.l,null,"[Incomplete Response]");break}else if(Ht==El){this.m=4,ct(15),Xt(this.i,this.l,m,"[Invalid Chunk]"),a=!1;break}else Xt(this.i,this.l,Ht,null),Be(this,Ht);if(Il(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ue!=4||m.length!=0||this.h.h||(this.m=1,ct(16),a=!1),this.o=this.o&&a,!a)Xt(this.i,this.l,m,"[Invalid Chunked Response]"),Ce(this),ie(this);else if(m.length>0&&!this.W){this.W=!0;var de=this.j;de.g==this&&de.aa&&!de.P&&(de.j.info("Great, no buffering proxy detected. Bytes received: "+m.length),od(de),de.P=!0,ct(11))}}else Xt(this.i,this.l,m,null),Be(this,m);Ue==4&&Ce(this),this.o&&!this.K&&(Ue==4?Pm(this.j,this):(this.o=!1,Qn(this)))}else Lw(this.g),h==400&&m.indexOf("Unknown SID")>0?(this.m=3,ct(12)):(this.m=0,ct(13)),Ce(this),ie(this)}}}catch{}finally{}};function Zu(a){if(!Il(a))return a.g.la();const h=Im(a.g);if(h==="")return"";let m="";const S=h.length,F=es(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return Ce(a),ie(a),"";a.h.i=new o.TextDecoder}for(let K=0;K<S;K++)a.h.h=!0,m+=a.h.i.decode(h[K],{stream:!(F&&K==S-1)});return h.length=0,a.h.g+=m,a.C=0,a.h.g}function Il(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function jl(a,h){var m=a.C,S=h.indexOf(`
`,m);return S==-1?Ro:(m=Number(h.substring(m,S)),isNaN(m)?El:(S+=1,S+m>h.length?Ro:(h=h.slice(S,S+m),a.C=S+m,h)))}fr.prototype.cancel=function(){this.K=!0,Ce(this)};function Qn(a){a.T=Date.now()+a.H,kl(a,a.H)}function kl(a,h){if(a.D!=null)throw Error("WatchDog timer not null");a.D=dn(d(a.aa,a),h)}function O(a){a.D&&(o.clearTimeout(a.D),a.D=null)}fr.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(fm(this.i,this.B),this.M!=2&&(Jt(),ct(17)),Ce(this),this.m=2,ie(this)):kl(this,this.T-a)};function ie(a){a.j.I==0||a.K||Pm(a.j,a)}function Ce(a){O(a);var h=a.O;h&&typeof h.dispose=="function"&&h.dispose(),a.O=null,At(a.V),a.g&&(h=a.g,a.g=null,h.abort(),h.dispose())}function Be(a,h){try{var m=a.j;if(m.I!=0&&(m.g==a||Je(m.h,a))){if(!a.L&&Je(m.h,a)&&m.I==3){try{var S=m.Ba.g.parse(h)}catch{S=null}if(Array.isArray(S)&&S.length==3){var F=S;if(F[0]==0){e:if(!m.v){if(m.g)if(m.g.F+3e3<a.F)Ol(m),Al(m);else break e;id(m),ct(18)}}else m.xa=F[1],0<m.xa-m.K&&F[2]<37500&&m.F&&m.A==0&&!m.C&&(m.C=dn(d(m.Va,m),6e3));Te(m.h)<=1&&m.ta&&(m.ta=void 0)}else $s(m,11)}else if((a.L||m.g==a)&&Ol(m),!I(h))for(F=m.Ba.g.parse(h),h=0;h<F.length;h++){let dt=F[h];const Ht=dt[0];if(!(Ht<=m.K))if(m.K=Ht,dt=dt[1],m.I==2)if(dt[0]=="c"){m.M=dt[1],m.ba=dt[2];const pr=dt[3];pr!=null&&(m.ka=pr,m.j.info("VER="+m.ka));const Ws=dt[4];Ws!=null&&(m.za=Ws,m.j.info("SVER="+m.za));const ts=dt[5];ts!=null&&typeof ts=="number"&&ts>0&&(S=1.5*ts,m.O=S,m.j.info("backChannelRequestTimeoutMs_="+S)),S=m;const ns=a.g;if(ns){const Dl=ns.g?ns.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Dl){var K=S.h;K.g||Dl.indexOf("spdy")==-1&&Dl.indexOf("quic")==-1&&Dl.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(Le(K,K.h),K.h=null))}if(S.G){const ad=ns.g?ns.g.getResponseHeader("X-HTTP-Session-Id"):null;ad&&(S.wa=ad,Oe(S.J,S.G,ad))}}m.I=3,m.l&&m.l.ra(),m.aa&&(m.T=Date.now()-a.F,m.j.info("Handshake RTT: "+m.T+"ms")),S=m;var de=a;if(S.na=Mm(S,S.L?S.ba:null,S.W),de.L){je(S.h,de);var Ue=de,Mt=S.O;Mt&&(Ue.H=Mt),Ue.D&&(O(Ue),Qn(Ue)),S.g=de}else Rm(S);m.i.length>0&&Pl(m)}else dt[0]!="stop"&&dt[0]!="close"||$s(m,7);else m.I==3&&(dt[0]=="stop"||dt[0]=="close"?dt[0]=="stop"?$s(m,7):sd(m):dt[0]!="noop"&&m.l&&m.l.qa(dt),m.A=0)}}Jt(4)}catch{}}var Fe=class{constructor(a,h){this.g=a,this.map=h}};function st(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Qe(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Te(a){return a.h?1:a.g?a.g.size:0}function Je(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function Le(a,h){a.g?a.g.add(h):a.h=h}function je(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}st.prototype.cancel=function(){if(this.i=ke(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function ke(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const m of a.g.values())h=h.concat(m.G);return h}return j(a.i)}var He=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mt(a,h){if(a){a=a.split("&");for(let m=0;m<a.length;m++){const S=a[m].indexOf("=");let F,K=null;S>=0?(F=a[m].substring(0,S),K=a[m].substring(S+1)):F=a[m],h(F,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function Ae(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;a instanceof Ae?(this.l=a.l,pe(this,a.j),this.o=a.o,this.g=a.g,Ne(this,a.u),this.h=a.h,nt(this,_m(a.i)),this.m=a.m):a&&(h=String(a).match(He))?(this.l=!1,pe(this,h[1]||"",!0),this.o=_t(h[2]||""),this.g=_t(h[3]||"",!0),Ne(this,h[4]),this.h=_t(h[5]||"",!0),nt(this,h[6]||"",!0),this.m=_t(h[7]||"")):(this.l=!1,this.i=new Ao(null,this.l))}Ae.prototype.toString=function(){const a=[];var h=this.j;h&&a.push(it(h,Xr,!0),":");var m=this.g;return(m||h=="file")&&(a.push("//"),(h=this.o)&&a.push(it(h,Xr,!0),"@"),a.push(Bn(m).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.u,m!=null&&a.push(":",String(m))),(m=this.h)&&(this.g&&m.charAt(0)!="/"&&a.push("/"),a.push(it(m,m.charAt(0)=="/"?ed:Tl,!0))),(m=this.i.toString())&&a.push("?",m),(m=this.m)&&a.push("#",it(m,mm)),a.join("")},Ae.prototype.resolve=function(a){const h=Me(this);let m=!!a.j;m?pe(h,a.j):m=!!a.o,m?h.o=a.o:m=!!a.g,m?h.g=a.g:m=a.u!=null;var S=a.h;if(m)Ne(h,a.u);else if(m=!!a.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var F=h.h.lastIndexOf("/");F!=-1&&(S=h.h.slice(0,F+1)+S)}if(F=S,F==".."||F==".")S="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){S=F.lastIndexOf("/",0)==0,F=F.split("/");const K=[];for(let de=0;de<F.length;){const Ue=F[de++];Ue=="."?S&&de==F.length&&K.push(""):Ue==".."?((K.length>1||K.length==1&&K[0]!="")&&K.pop(),S&&de==F.length&&K.push("")):(K.push(Ue),S=!0)}S=K.join("/")}else S=F}return m?h.h=S:m=a.i.toString()!=="",m?nt(h,_m(a.i)):m=!!a.m,m&&(h.m=a.m),h};function Me(a){return new Ae(a)}function pe(a,h,m){a.j=m?_t(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function Ne(a,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);a.u=h}else a.u=null}function nt(a,h,m){h instanceof Ao?(a.i=h,Rw(a.i,a.l)):(m||(h=it(h,td)),a.i=new Ao(h,a.l))}function Oe(a,h,m){a.i.set(h,m)}function Ct(a){return Oe(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function _t(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function it(a,h,m){return typeof a=="string"?(a=encodeURI(a).replace(h,Jn),m&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Jn(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Xr=/[#\/\?@]/g,Tl=/[#\?:]/g,ed=/[#\?]/g,td=/[#\?@]/g,mm=/#/g;function Ao(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function Us(a){a.g||(a.g=new Map,a.h=0,a.i&&mt(a.i,function(h,m){a.add(decodeURIComponent(h.replace(/\+/g," ")),m)}))}t=Ao.prototype,t.add=function(a,h){Us(this),this.i=null,a=Ei(this,a);let m=this.g.get(a);return m||this.g.set(a,m=[]),m.push(h),this.h+=1,this};function gm(a,h){Us(a),h=Ei(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function ym(a,h){return Us(a),h=Ei(a,h),a.g.has(h)}t.forEach=function(a,h){Us(this),this.g.forEach(function(m,S){m.forEach(function(F){a.call(h,F,S,this)},this)},this)};function xm(a,h){Us(a);let m=[];if(typeof h=="string")ym(a,h)&&(m=m.concat(a.g.get(Ei(a,h))));else for(a=Array.from(a.g.values()),h=0;h<a.length;h++)m=m.concat(a[h]);return m}t.set=function(a,h){return Us(this),this.i=null,a=Ei(this,a),ym(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=xm(this,a),a.length>0?String(a[0]):h):h};function vm(a,h,m){gm(a,h),m.length>0&&(a.i=null,a.g.set(Ei(a,h),j(m)),a.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(let S=0;S<h.length;S++){var m=h[S];const F=Bn(m);m=xm(this,m);for(let K=0;K<m.length;K++){let de=F;m[K]!==""&&(de+="="+Bn(m[K])),a.push(de)}}return this.i=a.join("&")};function _m(a){const h=new Ao;return h.i=a.i,a.g&&(h.g=new Map(a.g),h.h=a.h),h}function Ei(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function Rw(a,h){h&&!a.j&&(Us(a),a.i=null,a.g.forEach(function(m,S){const F=S.toLowerCase();S!=F&&(gm(this,S),vm(this,F,m))},a)),a.j=h}function Aw(a,h){const m=new zn;if(o.Image){const S=new Image;S.onload=f(Zr,m,"TestLoadImage: loaded",!0,h,S),S.onerror=f(Zr,m,"TestLoadImage: error",!1,h,S),S.onabort=f(Zr,m,"TestLoadImage: abort",!1,h,S),S.ontimeout=f(Zr,m,"TestLoadImage: timeout",!1,h,S),o.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=a}else h(!1)}function Pw(a,h){const m=new zn,S=new AbortController,F=setTimeout(()=>{S.abort(),Zr(m,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:S.signal}).then(K=>{clearTimeout(F),K.ok?Zr(m,"TestPingServer: ok",!0,h):Zr(m,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(F),Zr(m,"TestPingServer: error",!1,h)})}function Zr(a,h,m,S,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),S(m)}catch{}}function Ow(){this.g=new ot}function nd(a){this.i=a.Sb||null,this.h=a.ab||!1}p(nd,$t),nd.prototype.g=function(){return new Nl(this.i,this.h)};function Nl(a,h){ee.call(this),this.H=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Nl,ee),t=Nl.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=h,this.readyState=1,Oo(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(h.body=a),(this.H||o).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Po(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Oo(this)),this.g&&(this.readyState=3,Oo(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;wm(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function wm(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?Po(this):Oo(this),this.readyState==3&&wm(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,Po(this))},t.Na=function(a){this.g&&(this.response=a,Po(this))},t.ga=function(){this.g&&Po(this)};function Po(a){a.readyState=4,a.l=null,a.j=null,a.B=null,Oo(a)}t.setRequestHeader=function(a,h){this.A.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var m=h.next();!m.done;)m=m.value,a.push(m[0]+": "+m[1]),m=h.next();return a.join(`\r
`)};function Oo(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Nl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Sm(a){let h="";return U(a,function(m,S){h+=S,h+=":",h+=m,h+=`\r
`}),h}function rd(a,h,m){e:{for(S in m){var S=!1;break e}S=!0}S||(m=Sm(m),typeof a=="string"?m!=null&&Bn(m):Oe(a,h,m))}function Nt(a){ee.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Nt,ee);var Dw=/^https?$/i,Mw=["POST","PUT"];t=Nt.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,h,m,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Sl.g(),this.g.onreadystatechange=g(d(this.Ca,this));try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(K){bm(this,K);return}if(a=m||"",m=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var F in S)m.set(F,S[F]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const K of S.keys())m.set(K,S.get(K));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(m.keys()).find(K=>K.toLowerCase()=="content-type"),F=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(Mw,h,void 0)>=0)||S||F||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,de]of m)this.g.setRequestHeader(K,de);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(K){bm(this,K)}};function bm(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.o=5,Em(a),Rl(a)}function Em(a){a.A||(a.A=!0,ne(a,"complete"),ne(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,ne(this,"complete"),ne(this,"abort"),Rl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Rl(this,!0)),Nt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Cm(this):this.Xa())},t.Xa=function(){Cm(this)};function Cm(a){if(a.h&&typeof i<"u"){if(a.v&&es(a)==4)setTimeout(a.Ca.bind(a),0);else if(ne(a,"readystatechange"),es(a)==4){a.h=!1;try{const K=a.ca();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var m;if(!(m=h)){var S;if(S=K===0){let de=String(a.D).match(He)[1]||null;!de&&o.self&&o.self.location&&(de=o.self.location.protocol.slice(0,-1)),S=!Dw.test(de?de.toLowerCase():"")}m=S}if(m)ne(a,"complete"),ne(a,"success");else{a.o=6;try{var F=es(a)>2?a.g.statusText:""}catch{F=""}a.l=F+" ["+a.ca()+"]",Em(a)}}finally{Rl(a)}}}}function Rl(a,h){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const m=a.g;a.g=null,h||ne(a,"ready");try{m.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function es(a){return a.g?a.g.readyState:0}t.ca=function(){try{return es(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),qe(h)}};function Im(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Lw(a){const h={};a=(a.g&&es(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<a.length;S++){if(I(a[S]))continue;var m=bl(a[S]);const F=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const K=h[F]||[];h[F]=K,K.push(m)}te(h,function(S){return S.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Do(a,h,m){return m&&m.internalChannelParams&&m.internalChannelParams[a]||h}function jm(a){this.za=0,this.i=[],this.j=new zn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Do("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Do("baseRetryDelayMs",5e3,a),this.Za=Do("retryDelaySeedMs",1e4,a),this.Ta=Do("forwardChannelMaxRetries",2,a),this.va=Do("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new st(a&&a.concurrentRequestLimit),this.Ba=new Ow,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=jm.prototype,t.ka=8,t.I=1,t.connect=function(a,h,m,S){ct(0),this.W=a,this.H=h||{},m&&S!==void 0&&(this.H.OSID=m,this.H.OAID=S),this.F=this.X,this.J=Mm(this,null,this.W),Pl(this)};function sd(a){if(km(a),a.I==3){var h=a.V++,m=Me(a.J);if(Oe(m,"SID",a.M),Oe(m,"RID",h),Oe(m,"TYPE","terminate"),Mo(a,m),h=new fr(a,a.j,h),h.M=2,h.A=Ct(Me(m)),m=!1,o.navigator&&o.navigator.sendBeacon)try{m=o.navigator.sendBeacon(h.A.toString(),"")}catch{}!m&&o.Image&&(new Image().src=h.A,m=!0),m||(h.g=Lm(h.j,null),h.g.ea(h.A)),h.F=Date.now(),Qn(h)}Dm(a)}function Al(a){a.g&&(od(a),a.g.cancel(),a.g=null)}function km(a){Al(a),a.v&&(o.clearTimeout(a.v),a.v=null),Ol(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function Pl(a){if(!Qe(a.h)&&!a.m){a.m=!0;var h=a.Ea;V||x(),X||(V(),X=!0),C.add(h,a),a.D=0}}function Fw(a,h){return Te(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=h.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=dn(d(a.Ea,a,h),Om(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const F=new fr(this,this.j,a);let K=this.o;if(this.U&&(K?(K=z(K),_e(K,this.U)):K=this.U),this.u!==null||this.R||(F.J=K,K=null),this.S)e:{for(var h=0,m=0;m<this.i.length;m++){t:{var S=this.i[m];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(h+=S,h>4096){h=m;break e}if(h===4096||m===this.i.length-1){h=m+1;break e}}h=1e3}else h=1e3;h=Nm(this,F,h),m=Me(this.J),Oe(m,"RID",a),Oe(m,"CVER",22),this.G&&Oe(m,"X-HTTP-Session-Id",this.G),Mo(this,m),K&&(this.R?h="headers="+Bn(Sm(K))+"&"+h:this.u&&rd(m,this.u,K)),Le(this.h,F),this.Ra&&Oe(m,"TYPE","init"),this.S?(Oe(m,"$req",h),Oe(m,"SID","null"),F.U=!0,bi(F,m,null)):bi(F,m,h),this.I=2}}else this.I==3&&(a?Tm(this,a):this.i.length==0||Qe(this.h)||Tm(this))};function Tm(a,h){var m;h?m=h.l:m=a.V++;const S=Me(a.J);Oe(S,"SID",a.M),Oe(S,"RID",m),Oe(S,"AID",a.K),Mo(a,S),a.u&&a.o&&rd(S,a.u,a.o),m=new fr(a,a.j,m,a.D+1),a.u===null&&(m.J=a.o),h&&(a.i=h.G.concat(a.i)),h=Nm(a,m,1e3),m.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),Le(a.h,m),bi(m,S,h)}function Mo(a,h){a.H&&U(a.H,function(m,S){Oe(h,S,m)}),a.l&&U({},function(m,S){Oe(h,S,m)})}function Nm(a,h,m){m=Math.min(a.i.length,m);const S=a.l?d(a.l.Ka,a.l,a):null;e:{var F=a.i;let Ue=-1;for(;;){const Mt=["count="+m];Ue==-1?m>0?(Ue=F[0].g,Mt.push("ofs="+Ue)):Ue=0:Mt.push("ofs="+Ue);let dt=!0;for(let Ht=0;Ht<m;Ht++){var K=F[Ht].g;const pr=F[Ht].map;if(K-=Ue,K<0)Ue=Math.max(0,F[Ht].g-100),dt=!1;else try{K="req"+K+"_"||"";try{var de=pr instanceof Map?pr:Object.entries(pr);for(const[Ws,ts]of de){let ns=ts;c(ts)&&(ns=Pe(ts)),Mt.push(K+Ws+"="+encodeURIComponent(ns))}}catch(Ws){throw Mt.push(K+"type="+encodeURIComponent("_badmap")),Ws}}catch{S&&S(pr)}}if(dt){de=Mt.join("&");break e}}de=void 0}return a=a.i.splice(0,m),h.G=a,de}function Rm(a){if(!a.g&&!a.v){a.Y=1;var h=a.Da;V||x(),X||(V(),X=!0),C.add(h,a),a.A=0}}function id(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=dn(d(a.Da,a),Om(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,Am(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=dn(d(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ct(10),Al(this),Am(this))};function od(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function Am(a){a.g=new fr(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var h=Me(a.na);Oe(h,"RID","rpc"),Oe(h,"SID",a.M),Oe(h,"AID",a.K),Oe(h,"CI",a.F?"0":"1"),!a.F&&a.ia&&Oe(h,"TO",a.ia),Oe(h,"TYPE","xmlhttp"),Mo(a,h),a.u&&a.o&&rd(h,a.u,a.o),a.O&&(a.g.H=a.O);var m=a.g;a=a.ba,m.M=1,m.A=Ct(Me(h)),m.u=null,m.R=!0,Cl(m,a)}t.Va=function(){this.C!=null&&(this.C=null,Al(this),id(this),ct(19))};function Ol(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function Pm(a,h){var m=null;if(a.g==h){Ol(a),od(a),a.g=null;var S=2}else if(Je(a.h,h))m=h.G,je(a.h,h),S=1;else return;if(a.I!=0){if(h.o)if(S==1){m=h.u?h.u.length:0,h=Date.now()-h.F;var F=a.D;S=Fs(),ne(S,new jr(S,m)),Pl(a)}else Rm(a);else if(F=h.m,F==3||F==0&&h.X>0||!(S==1&&Fw(a,h)||S==2&&id(a)))switch(m&&m.length>0&&(h=a.h,h.i=h.i.concat(m)),F){case 1:$s(a,5);break;case 4:$s(a,10);break;case 3:$s(a,6);break;default:$s(a,2)}}}function Om(a,h){let m=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(m*=2),m*h}function $s(a,h){if(a.j.info("Error code "+h),h==2){var m=d(a.bb,a),S=a.Ua;const F=!S;S=new Ae(S||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||pe(S,"https"),Ct(S),F?Aw(S.toString(),m):Pw(S.toString(),m)}else ct(2);a.I=0,a.l&&a.l.pa(h),Dm(a),km(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),ct(2)):(this.j.info("Failed to ping google.com"),ct(1))};function Dm(a){if(a.I=0,a.ja=[],a.l){const h=ke(a.h);(h.length!=0||a.i.length!=0)&&(v(a.ja,h),v(a.ja,a.i),a.h.i.length=0,j(a.i),a.i.length=0),a.l.oa()}}function Mm(a,h,m){var S=m instanceof Ae?Me(m):new Ae(m);if(S.g!="")h&&(S.g=h+"."+S.g),Ne(S,S.u);else{var F=o.location;S=F.protocol,h=h?h+"."+F.hostname:F.hostname,F=+F.port;const K=new Ae(null);S&&pe(K,S),h&&(K.g=h),F&&Ne(K,F),m&&(K.h=m),S=K}return m=a.G,h=a.wa,m&&h&&Oe(S,m,h),Oe(S,"VER",a.ka),Mo(a,S),S}function Lm(a,h,m){if(h&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Aa&&!a.ma?new Nt(new nd({ab:m})):new Nt(a.ma),h.Fa(a.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fm(){}t=Fm.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Un(a,h){ee.call(this),this.g=new jm(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(a?a["X-WebChannel-Client-Profile"]=h.sa:a={"X-WebChannel-Client-Profile":h.sa}),this.g.U=a,(a=h&&h.Qb)&&!I(a)&&(this.g.u=a),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!I(h)&&(this.g.G=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new Ci(this)}p(Un,ee),Un.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Un.prototype.close=function(){sd(this.g)},Un.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var m={};m.__data__=a,a=m}else this.v&&(m={},m.__data__=Pe(a),a=m);h.i.push(new Fe(h.Ya++,a)),h.I==3&&Pl(h)},Un.prototype.N=function(){this.g.l=null,delete this.j,sd(this.g),delete this.g,Un.Z.N.call(this)};function zm(a){Qt.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const m in h){a=m;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}p(zm,Qt);function Bm(){xt.call(this),this.status=1}p(Bm,xt);function Ci(a){this.g=a}p(Ci,Fm),Ci.prototype.ra=function(){ne(this.g,"a")},Ci.prototype.qa=function(a){ne(this.g,new zm(a))},Ci.prototype.pa=function(a){ne(this.g,new Bm)},Ci.prototype.oa=function(){ne(this.g,"b")},Un.prototype.send=Un.prototype.o,Un.prototype.open=Un.prototype.m,Un.prototype.close=Un.prototype.close,Si.NO_ERROR=0,Si.TIMEOUT=8,Si.HTTP_ERROR=6,To.COMPLETE="complete",Ye.EventType=Dt,Dt.OPEN="a",Dt.CLOSE="b",Dt.ERROR="c",Dt.MESSAGE="d",ee.prototype.listen=ee.prototype.J,Nt.prototype.listenOnce=Nt.prototype.K,Nt.prototype.getLastError=Nt.prototype.Ha,Nt.prototype.getLastErrorCode=Nt.prototype.ya,Nt.prototype.getStatus=Nt.prototype.ca,Nt.prototype.getResponseJson=Nt.prototype.La,Nt.prototype.getResponseText=Nt.prototype.la,Nt.prototype.send=Nt.prototype.ea,Nt.prototype.setWithCredentials=Nt.prototype.Fa}).apply(typeof rc<"u"?rc:typeof self<"u"?self:typeof window<"u"?window:{});const my="@firebase/firestore",gy="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pn.UNAUTHENTICATED=new pn(null),pn.GOOGLE_CREDENTIALS=new pn("google-credentials-uid"),pn.FIRST_PARTY=new pn("first-party-uid"),pn.MOCK_USER=new pn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xl="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go=new jp("@firebase/firestore");function ir(t,...e){if(go.logLevel<=at.DEBUG){const n=e.map(cm);go.debug(`Firestore (${xl}): ${t}`,...n)}}function Sw(t,...e){if(go.logLevel<=at.ERROR){const n=e.map(cm);go.error(`Firestore (${xl}): ${t}`,...n)}}function b6(t,...e){if(go.logLevel<=at.WARN){const n=e.map(cm);go.warn(`Firestore (${xl}): ${t}`,...n)}}function cm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,bw(t,r,n)}function bw(t,e,n){let r=`FIRESTORE (${xl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Sw(r),new Error(r)}function ya(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||bw(e,s,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ze={CANCELLED:"cancelled",INVALID_ARGUMENT:"invalid-argument",FAILED_PRECONDITION:"failed-precondition"};class et extends Co{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class E6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(pn.UNAUTHENTICATED))}shutdown(){}}class C6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class I6{constructor(e){this.t=e,this.currentUser=pn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ya(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new xa;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new xa,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{ir("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(ir("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new xa)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ir("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ya(typeof r.accessToken=="string",31837,{l:r}),new Ew(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ya(e===null||typeof e=="string",2055,{h:e}),new pn(e)}}class j6{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=pn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class k6{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new j6(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(pn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class T6{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Xv(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ya(this.o===void 0,3512);const r=i=>{i.error!=null&&ir("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,ir("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{ir("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):ir("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new yy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ya(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new yy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N6(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=N6(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Rs(t,e){return t<e?-1:t>e?1:0}function A6(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Jd(s)===Jd(i)?Rs(s,i):Jd(s)?1:-1}return Rs(t.length,e.length)}const P6=55296,O6=57343;function Jd(t){const e=t.charCodeAt(0);return e>=P6&&e<=O6}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xy="__name__";class xr{constructor(e,n,r){n===void 0?n=0:n>e.length&&Xa(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Xa(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return xr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof xr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=xr.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Rs(e.length,n.length)}static compareSegments(e,n){const r=xr.isNumericId(e),s=xr.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?xr.extractNumericId(e).compare(xr.extractNumericId(n)):A6(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return lm.fromString(e.substring(4,e.length-2))}}class nr extends xr{construct(e,n,r){return new nr(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new et(Ze.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new nr(n)}static emptyPath(){return new nr([])}}const D6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ys extends xr{construct(e,n,r){return new Ys(e,n,r)}static isValidIdentifier(e){return D6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ys.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===xy}static keyField(){return new Ys([xy])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new et(Ze.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new et(Ze.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new et(Ze.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(i(),s++)}if(i(),o)throw new et(Ze.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ys(n)}static emptyPath(){return new Ys([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e){this.path=e}static fromPath(e){return new ti(nr.fromString(e))}static fromName(e){return new ti(nr.fromString(e).popFirst(5))}static empty(){return new ti(nr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&nr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return nr.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ti(new nr(e.slice()))}}function M6(t,e,n,r){if(e===!0&&r===!0)throw new et(Ze.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function L6(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function F6(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Xa(12329,{type:typeof t})}function z6(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new et(Ze.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=F6(t);throw new et(Ze.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(t,e){const n={typeString:t};return e&&(n.value=e),n}function vl(t,e){if(!L6(t))throw new et(Ze.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new et(Ze.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy=-62135596800,_y=1e6;class vr{static now(){return vr.fromMillis(Date.now())}static fromDate(e){return vr.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*_y);return new vr(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new et(Ze.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new et(Ze.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<vy)throw new et(Ze.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new et(Ze.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/_y}_compareTo(e){return this.seconds===e.seconds?Rs(this.nanoseconds,e.nanoseconds):Rs(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:vr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(vl(e,vr._jsonSchema))return new vr(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-vy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}vr._jsonSchemaVersion="firestore/timestamp/1.0",vr._jsonSchema={type:Ot("string",vr._jsonSchemaVersion),seconds:Ot("number"),nanoseconds:Ot("number")};function B6(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new U6("Invalid base64 string: "+i):i}}(e);return new gi(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new gi(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Rs(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gi.EMPTY_BYTE_STRING=new gi("");const wf="(default)";class pu{constructor(e,n){this.projectId=e,this.database=n||wf}static empty(){return new pu("","")}get isDefaultDatabase(){return this.database===wf}isEqual(e){return e instanceof pu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $6{constructor(e,n=null,r=[],s=[],i=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function W6(t){return new $6(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wy,Xe;(Xe=wy||(wy={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new lm([4294967295,4294967295],0);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H6=41943040;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V6=1048576;function Xd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&ir("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new xa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,c=new um(e,n,o,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new et(Ze.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}var Sy,by;(by=Sy||(Sy={})).Ma="default",by.Cache="cache";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G6(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cw="firestore.googleapis.com",Cy=!0;class Iy{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new et(Ze.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Cw,this.ssl=Cy}else this.host=e.host,this.ssl=e.ssl??Cy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=H6;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<V6)throw new et(Ze.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}M6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=G6(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new et(Ze.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new et(Ze.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new et(Ze.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Iw{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Iy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new et(Ze.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new et(Ze.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Iy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new E6;switch(r.type){case"firstParty":return new k6(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new et(Ze.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Ey.get(n);r&&(ir("ComponentProvider","Removing Datastore"),Ey.delete(n),r.terminate())}(this),Promise.resolve()}}function q6(t,e,n,r={}){var d;t=z6(t,Iw);const s=Fu(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;s&&(Wv(`https://${c}`),Vv("Firestore",!0)),i.host!==Cw&&i.host!==c&&b6("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:c,ssl:s,emulatorOptions:r};if(!za(u,o)&&(t._setSettings(u),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=pn.MOCK_USER;else{f=Hv(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new et(Ze.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new pn(g)}t._authCredentials=new C6(new Ew(f,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new dm(this.firestore,e,this._query)}}class wr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hm(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wr(this.firestore,e,this._key)}toJSON(){return{type:wr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(vl(n,wr._jsonSchema))return new wr(e,r||null,new ti(nr.fromString(n.referencePath)))}}wr._jsonSchemaVersion="firestore/documentReference/1.0",wr._jsonSchema={type:Ot("string",wr._jsonSchemaVersion),referencePath:Ot("string")};class hm extends dm{constructor(e,n,r){super(e,n,W6(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wr(this.firestore,null,new ti(e))}withConverter(e){return new hm(this.firestore,e,this._path)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy="AsyncQueue";class ky{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new K6(this,"async_queue_retry"),this._c=()=>{const r=Xd();r&&ir(jy,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Xd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Xd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new xa;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!B6(e))throw e;ir(jy,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Sw("INTERNAL UNHANDLED ERROR: ",Ty(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=um.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&Xa(47125,{Pc:Ty(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Ty(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Y6 extends Iw{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new ky,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ky(e),this._firestoreClient=void 0,await e}}}function Q6(t,e){const n=typeof t=="object"?t:t_(),r=typeof t=="string"?t:wf,s=Jv(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Uv("firestore");i&&q6(s,...i)}return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ar(gi.fromBase64String(e))}catch(n){throw new et(Ze.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ar(gi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ar._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(vl(e,Ar._jsonSchema))return Ar.fromBase64String(e.bytes)}}Ar._jsonSchemaVersion="firestore/bytes/1.0",Ar._jsonSchema={type:Ot("string",Ar._jsonSchemaVersion),bytes:Ot("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new et(Ze.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ys(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new et(Ze.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new et(Ze.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Rs(this._lat,e._lat)||Rs(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ii._jsonSchemaVersion}}static fromJSON(e){if(vl(e,ii._jsonSchema))return new ii(e.latitude,e.longitude)}}ii._jsonSchemaVersion="firestore/geoPoint/1.0",ii._jsonSchema={type:Ot("string",ii._jsonSchemaVersion),latitude:Ot("number"),longitude:Ot("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:oi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(vl(e,oi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new oi(e.vectorValues);throw new et(Ze.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}oi._jsonSchemaVersion="firestore/vectorValue/1.0",oi._jsonSchema={type:Ot("string",oi._jsonSchemaVersion),vectorValues:Ot("object")};const J6=new RegExp("[~\\*/\\[\\]]");function X6(t,e,n){if(e.search(J6)>=0)throw Ny(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t);try{return new jw(...e.split("."))._internalPath}catch{throw Ny(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t)}}function Ny(t,e,n,r,s){let i=`Function ${e}() called with invalid data`;i+=". ";let o="";return new et(Ze.INVALID_ARGUMENT,i+t+o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new wr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Z6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Tw("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Z6 extends kw{data(){return super.data()}}function Tw(t,e){return typeof e=="string"?X6(t,e):e instanceof jw?e._internalPath:e._delegate._internalPath}class sc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Xi extends kw{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ec(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Tw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new et(Ze.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Xi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Xi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Xi._jsonSchema={type:Ot("string",Xi._jsonSchemaVersion),bundleSource:Ot("string","DocumentSnapshot"),bundleName:Ot("string"),bundle:Ot("string")};class Ec extends Xi{data(e={}){return super.data(e)}}class va{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new sc(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ec(this._firestore,this._userDataWriter,r.key,r,new sc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new et(Ze.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(c=>{const u=new Ec(s._firestore,s._userDataWriter,c.doc.key,c.doc,new sc(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new Ec(s._firestore,s._userDataWriter,c.doc.key,c.doc,new sc(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:eT(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new et(Ze.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=va._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=R6.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function eT(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xa(61501,{type:t})}}va._jsonSchemaVersion="firestore/querySnapshot/1.0",va._jsonSchema={type:Ot("string",va._jsonSchemaVersion),bundleSource:Ot("string","QuerySnapshot"),bundleName:Ot("string"),bundle:Ot("string")};(function(e,n=!0){(function(s){xl=s})(Zv),Ua(new co("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),c=new Y6(new I6(r.getProvider("auth-internal")),new T6(o,r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new et(Ze.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pu(d.options.projectId,f)}(o,s),o);return i={useFetchStreams:n,...i},c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),Ss(my,gy,e),Ss(my,gy,"esm2020")})();const tT={apiKey:"AIzaSyCMkZr4Xz204NjvETje-Rhznf6ECDYiEnE",authDomain:"ethiostore-17d9f.firebaseapp.com",databaseURL:"https://ethiostore-17d9f-default-rtdb.firebaseio.com",projectId:"ethiostore-17d9f",storageBucket:"ethiostore-17d9f.appspot.com",messagingSenderId:"964518277159",appId:"1:964518277159:web:9404cace890edf88961e02"},Nw=N0().length>0?N0()[0]:e_(tT),Vt=ww(Nw);Q6(Nw);const nT="https://gojo-teacher-web.onrender.com/api",ki="https://ethiostore-17d9f-default-rtdb.firebaseio.com";function Ti(t){return!t||typeof t!="string"||!t.trim()||t==="null"||t==="undefined"?"/default-profile.png":t}function rT(){const[t,e]=y.useState(window.innerWidth>600),n=Ln(),[r,s]=y.useState(null),[i,o]=y.useState([]),[c,u]=y.useState([]),[d,f]=y.useState([]),[p,g]=y.useState(null),[j,v]=y.useState(!1),[N,R]=y.useState(!1),[b,_]=y.useState([]),w=y.useRef({}),P=(r==null?void 0:r.userId)||null;y.useEffect(()=>{const J=JSON.parse(localStorage.getItem("teacher"));if(!J){n("/login");return}const Ee=async()=>{try{const ge=Lt(Vt,"Users"),U=(await vw(ge)).val()||{},te=Object.values(U).find(z=>z.userId===J.userId);if(te){const z={...J,...te};s(z),localStorage.setItem("teacher",JSON.stringify(z))}else s(J)}catch{s(J)}},q=async ge=>{try{const G=ge||JSON.parse(localStorage.getItem("teacher"));if(!G||!G.userId){f([]);return}const[U,te]=await Promise.all([Z.get(`${ki}/Chats.json`),Z.get(`${ki}/Users.json`)]),z=U.data||{},_e=te.data||{}||{},we={};Object.entries(_e).forEach(([L,ce])=>{ce&&ce.userId&&(we[ce.userId]=L)});const ue=Object.entries(z).map(([L,ce])=>{const Ie=(ce.unread||{})[G.userId]||0;if(!Ie)return null;const Q=ce.participants||{},me=Object.keys(Q||{}).find(D=>D!==G.userId);if(!me)return null;let B=me,Y=_e[B];if(!Y){const D=we[me];D&&(B=D,Y=_e[D])}Y||(Y={userId:me,name:me,profileImage:"/default-profile.png"});const re={pushKey:B,userId:Y.userId||me,name:Y.name||Y.username||me,profileImage:Ti(Y.profileImage||Y.profile||"")},se=ce.lastMessage||{};return{id:L,title:se.text||"New message",adminName:re.name,adminProfile:re.profileImage,isMessage:!0,unreadForMe:Ie}}).filter(Boolean);f(ue)}catch{f([])}};Ee(),V(),k(J),q(J)},[]),y.useEffect(()=>{r&&console.log("Teacher object (debug):",r)},[r]);const V=async()=>{try{let Ee=(await Z.get(`${nT}/get_posts`)).data||[];!Array.isArray(Ee)&&typeof Ee=="object"&&(Ee=Object.values(Ee));const[q,ge]=await Promise.all([Z.get(`${ki}/School_Admins.json`),Z.get(`${ki}/Users.json`)]),G=q.data||{},U=ge.data||{},te=ue=>{if(!ue)return{name:"Admin",profile:"/default-profile.png"};const L=G[ue];if(!L)return{name:ue,profile:"/default-profile.png"};const ce=L.userId,M=ce?U[ce]:null,Ie=(M==null?void 0:M.name)||(L==null?void 0:L.title)||ue,Q=Ti(M==null?void 0:M.profileImage);return{name:Ie,profile:Q}},z=Ee.map(ue=>{const L=ue.postId||ue.id||ue.key||"",{name:ce,profile:M}=te(ue.adminId);let Ie=[];Array.isArray(ue.likes)?Ie=ue.likes:ue.likes&&typeof ue.likes=="object"&&(Ie=Object.keys(ue.likes));const Q=ue.time||ue.timestamp||ue.createdAt||null;return{...ue,postId:L,adminName:ce,adminProfile:M,time:Q,likes:Ie,likeCount:ue.likeCount||Ie.length||0}});z.sort((ue,L)=>{const ce=ue.time?new Date(ue.time).getTime():0;return(L.time?new Date(L.time).getTime():0)-ce}),o(z);const ae=JSON.parse(localStorage.getItem("teacher")),_e=C(ae==null?void 0:ae.userId),we=z.filter(ue=>!_e.includes(ue.postId)).slice(0,5).map(ue=>{var L;return{id:ue.postId,title:((L=ue.message)==null?void 0:L.substring(0,80))||"Untitled post",adminName:ue.adminName,adminProfile:ue.adminProfile}});u(we)}catch(J){console.error("Error fetching posts/admins handshake:",J)}},X=async J=>{try{if(!P)return;const Ee=await Z.post("https://gojo-teacher-web.onrender.com/api/like_post",{postId:J,teacherId:P});if(Ee.data.success){const q=Ee.data.liked,ge=Ee.data.likeCount;o(G=>G.map(U=>U.postId===J?{...U,likeCount:ge,likes:{...U.likes,[P]:q?!0:void 0}}:U))}}catch(Ee){console.error("Error liking post:",Ee)}},C=J=>JSON.parse(localStorage.getItem(`seen_posts_${J}`))||[],x=(J,Ee)=>{const q=C(J);q.includes(Ee)||localStorage.setItem(`seen_posts_${J}`,JSON.stringify([...q,Ee]))},E=()=>{localStorage.removeItem("teacher"),n("/login")},k=async(J=r)=>{try{const Ee=J||JSON.parse(localStorage.getItem("teacher"));if(!Ee||!Ee.userId){_([]);return}const[q,ge]=await Promise.all([Z.get(`${ki}/Chats.json`),Z.get(`${ki}/Users.json`)]),G=q.data||{},te=ge.data||{}||{},z={};Object.entries(te).forEach(([_e,we])=>{we&&we.userId&&(z[we.userId]=_e)});const ae=Object.entries(G).map(([_e,we])=>{const L=(we.unread||{})[Ee.userId]||0;if(!L)return null;const ce=we.participants||{},M=Object.keys(ce||{}).find(Y=>Y!==Ee.userId);if(!M)return null;let Ie=M,Q=te[Ie];if(!Q){const Y=z[M];Y&&(Ie=Y,Q=te[Y])}Q||(Q={userId:M,name:M,profileImage:"/default-profile.png"});const me={pushKey:Ie,userId:Q.userId||M,name:Q.name||Q.username||M,profileImage:Ti(Q.profileImage||Q.profile||"")},B=we.lastMessage||{};return{chatId:_e,contact:me,displayName:me.name,profile:me.profileImage,lastMessageText:B.text||"",lastMessageTime:B.timeStamp||B.time||null,unreadForMe:L}}).filter(Boolean).sort((_e,we)=>(we.lastMessageTime||0)-(_e.lastMessageTime||0));_(ae)}catch(Ee){console.error("Error fetching conversations:",Ee),_([])}},T=b.reduce((J,Ee)=>J+(Ee.unreadForMe||0),0),A=r||{},I=()=>e(!1);return y.useEffect(()=>{const J=()=>{window.innerWidth<=600?e(!1):e(!0)};return window.addEventListener("resize",J),J(),()=>window.removeEventListener("resize",J)},[]),l.jsxs("div",{className:"dashboard-page",children:[l.jsxs("nav",{className:"top-navbar",children:[window.innerWidth<=600&&!t&&l.jsx("button",{className:"sidebar-arrow-btn",style:{position:"fixed",left:0,top:180,transform:"none",zIndex:1300,background:"#fff",border:"none",borderRadius:"0 8px 8px 0",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",padding:8,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:()=>e(!0),"aria-label":"Open sidebar menu",children:l.jsx(js,{size:22})}),l.jsx("h2",{children:"Gojo Dashboard"}),l.jsxs("div",{className:"nav-right",children:[l.jsxs("div",{className:"icon-circle",style:{position:"relative"},children:[l.jsxs("div",{onClick:()=>v(!j),style:{cursor:"pointer",position:"relative"},"aria-label":"Show notifications",tabIndex:0,role:"button",onKeyPress:J=>{J.key==="Enter"&&v(!j)},children:[l.jsx(Ls,{size:22}),c.length+d.length>0&&l.jsx("span",{style:{position:"absolute",top:-6,right:-6,background:"red",color:"#fff",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:c.length+d.length})]}),j&&l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.08)",zIndex:1999},onClick:()=>v(!1)}),l.jsx("div",{className:"notification-popup",style:typeof window<"u"&&window.innerWidth<=600?{position:"fixed",left:"50%",top:"8%",transform:"translate(-50%, 0)",width:"90vw",maxWidth:340,zIndex:2e3,background:"#fff",borderRadius:12,boxShadow:"0 2px 16px rgba(0,0,0,0.18)",maxHeight:"70vh",overflowY:"auto",padding:12}:void 0,children:[...c,...d].length>0?[...c,...d].map((J,Ee)=>l.jsxs("div",{className:"notification-item",onClick:()=>{J.isMessage?(n("/all-chat"),v(!1)):(P&&x(P,J.id),u(q=>q.filter(ge=>ge.id!==J.id)),v(!1))},tabIndex:0,role:"button","aria-label":J.isMessage?"See message notification "+J.title:"See post notification "+J.title,onKeyPress:q=>{q.key==="Enter"&&(J.isMessage?(n("/all-chat"),v(!1)):(P&&x(P,J.id),u(ge=>ge.filter(G=>G.id!==J.id)),v(!1)))},children:[l.jsx("img",{src:Ti(J.adminProfile),alt:J.adminName||"Admin",className:"notification-profile"}),l.jsxs("div",{children:[l.jsx("strong",{children:J.adminName}),l.jsx("div",{className:"notification-title",children:J.title}),J.isMessage&&l.jsx("span",{style:{color:"#0b78f6",fontSize:12,fontWeight:500},children:"[Message]"})]})]},J.id||Ee)):l.jsx("div",{className:"no-notifications",children:"No notifications"})})]})]}),l.jsxs("div",{className:"icon-circle",style:{position:"relative",marginLeft:12,cursor:"pointer"},onClick:()=>n("/all-chat"),"aria-label":"Go to all chat",tabIndex:0,role:"button",onKeyPress:J=>{J.key==="Enter"&&n("/all-chat")},children:[l.jsx(Ms,{size:22}),T>0&&l.jsx("span",{style:{position:"absolute",top:1,right:0,background:"#f60b0b",color:"#fff",borderRadius:"50%",minWidth:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 5px"},children:T})]}),l.jsx("div",{className:"icon-circle",onClick:()=>n("/settings"),children:l.jsx(Cr,{})}),l.jsx("img",{src:Ti(A.profileImage),alt:"teacher",className:"profile-img"})]})]}),l.jsxs("div",{className:"google-dashboard",children:[window.innerWidth<=600&&t&&l.jsx("div",{className:"sidebar-overlay visible",onClick:I,style:{display:"block"}}),l.jsxs("div",{className:`google-sidebar${t?" open":""}`,style:window.innerWidth<=600?{position:"fixed",top:64,left:t?0:"-220px",width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",zIndex:1200,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto",transition:"left 0.25s cubic-bezier(.4,0,.2,1)"}:{position:"fixed",top:64,left:0,width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.04)",zIndex:900,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto"},children:[r&&l.jsxs("div",{className:"sidebar-profile",children:[l.jsx("div",{className:"sidebar-img-circle",children:l.jsx("img",{src:r.profileImage||"/default-profile.png",alt:"profile",style:{width:"100%",height:"100%",objectFit:"cover",border:"none",boxShadow:"none"}})}),l.jsx("h3",{children:r.name}),l.jsx("p",{children:r.username})]}),l.jsxs("div",{className:"sidebar-menu",children:[l.jsxs(ve,{className:"sidebar-btn",to:"/dashboard",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[l.jsx(Yr,{})," Home"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/students",children:[l.jsx(Ke,{})," Students"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/admins",children:[l.jsx(Ke,{})," Admins"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/parents",children:[l.jsx(qr,{})," Parents"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/marks",children:[l.jsx(Er,{})," Marks"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/attendance",children:[l.jsx(Ke,{})," Attendance"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/schedule",children:[l.jsx(Ke,{})," Schedule"]}),l.jsxs("button",{className:"sidebar-btn logout-btn",onClick:E,children:[l.jsx(Qr,{})," Logout"]})]})]}),l.jsx("div",{className:"google-main posts-full-mobile",children:l.jsxs("div",{className:"posts-container",children:[i.length===0&&l.jsx("p",{children:"No posts available"}),i.map(J=>l.jsxs("div",{ref:Ee=>w.current[J.postId]=Ee,className:"post-box",style:{border:p===J.postId?"2px solid #4b6cb7":"1px solid #eee",backgroundColor:p===J.postId?"#fff9c4":"#fff",transition:"background-color 0.4s, border 0.2s",marginBottom:18},children:[l.jsxs("div",{className:"fb-post-top",children:[l.jsx("img",{src:Ti(J.adminProfile),alt:J.adminName||"Admin"}),l.jsxs("div",{className:"post-info",children:[l.jsx("h4",{style:{margin:0,fontSize:17,fontWeight:700},children:J.adminName||"Admin"}),l.jsx("div",{style:{fontSize:12,color:"#666"},children:J.time?new Date(J.time).toLocaleString():""})]})]}),l.jsx("div",{style:{marginTop:12,fontSize:17,lineHeight:1.6,color:"#222",wordBreak:"break-word",paddingLeft:"10px"},children:J.message}),J.postUrl&&l.jsx("img",{src:J.postUrl,alt:"post media",className:"post-media",style:{width:"100%",borderRadius:8,marginTop:8,maxHeight:400,objectFit:"cover"}}),l.jsx("div",{className:"post-actions",style:{marginTop:14,display:"flex",alignItems:"center",gap:18},children:l.jsxs("button",{onClick:()=>X(J.postId),style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 18px",background:"#f0f2f5",border:"none",borderRadius:8,cursor:"pointer",fontSize:"16px",fontWeight:"500",color:J.likes&&P&&J.likes[P]?"#e0245e":"#555",transition:"all 0.2s ease"},children:[J.likes&&P&&J.likes[P]?l.jsx(EI,{style:{color:"#e0245e",fontSize:"16px"}}):l.jsx(TI,{style:{fontSize:"16px"}}),J.likes&&P&&J.likes[P]?"Liked":"Like",l.jsx("span",{style:{marginLeft:8,fontSize:"15px",color:"#777"},children:J.likeCount||0})]})})]},J.postId))]})}),l.jsx("style",{children:`
          .posts-container {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            justify-content: flex-start;
            margin-left: 120px;
          }
          .post-box {
            margin-left: 0;
            margin-right: auto;
            margin-top: 12px;
          }
          @media (max-width: 600px) {
            .posts-container {
              margin-left: 0 !important;
            }
            .post-box {
              margin-top: 0 !important;
            }
          }
          @media (max-width: 600px) {
            .posts-full-mobile, .posts-container, .post-box {
              width: 100vw !important;
              max-width: 100vw !important;
              margin: 0 !important;
              padding: 0 !important;
              border-radius: 0 !important;
              box-shadow: none !important;
            }
            .posts-container {
              align-items: stretch;
            }
            .google-sidebar {
              left: -220px;
              transition: left 0.25s cubic-bezier(.4,0,.2,1);
            }
            .google-sidebar.open {
              left: 0 !important;
              z-index: 1202;
            }
            .sidebar-overlay {
              display: block;
              position: fixed;
              inset: 0;
              background: rgba(0,0,0,0.35);
              z-index: 1200;
              transition: opacity 0.2s;
            }
            .sidebar-arrow-btn {
              display: flex !important;
            }
          }
        `})]})]})}const Zd=(t,e)=>[t,e].sort().join("_"),sT=(t="")=>t?String(t).replace(/^course_/,"").replace(/_[0-9A-Za-z]+$/,"").replace(/_/g," ").trim().split(/\s+/).map(n=>n?n[0].toUpperCase()+n.slice(1).toLowerCase():"").join(" "):"Unknown",iT="https://gojo-teacher-web.onrender.com/api",Zt="https://ethiostore-17d9f-default-rtdb.firebaseio.com",eh=t=>{if(!t)return null;let e;if(typeof t=="number"?e=new Date(t):e=new Date(String(t)),isNaN(e.getTime()))return null;const n=new Date;let r=n.getFullYear()-e.getFullYear();const s=n.getMonth()-e.getMonth();return(s<0||s===0&&n.getDate()<e.getDate())&&r--,r},oT=t=>{if(!t)return"";const e=new Date(Number(t));return`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`},aT=t=>{if(!t)return"";const e=new Date(Number(t)),n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()),s=new Date(e.getFullYear(),e.getMonth(),e.getDate()),i=r-s,o=Math.floor(i/(24*60*60*1e3));return o===0?"Today":o===1?"Yesterday":o>1&&o<7?`${o} days ago`:e.toLocaleDateString()},th=(t,e)=>!t||!e?null:Object.values(t).find(n=>String(n==null?void 0:n.userId)===String(e))||null,lT=({student:t,selected:e,onClick:n})=>l.jsxs("div",{onClick:()=>n(t),style:{width:"100%",borderRadius:"12px",padding:"15px",display:"flex",alignItems:"center",gap:"20px",cursor:"pointer",background:e?"#e0e7ff":"#fff",border:e?"2px solid #4b6cb7":"1px solid #ddd",boxShadow:e?"0 6px 15px rgba(75,108,183,0.3)":"0 4px 10px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},children:[l.jsx("img",{src:t.profileImage||"/default-profile.png",alt:t.name,style:{width:"50px",height:"50px",borderRadius:"50%",objectFit:"cover",border:e?"3px solid #4b6cb7":"3px solid red"}}),l.jsxs("div",{children:[l.jsx("h3",{style:{margin:0},children:t.name}),l.jsxs("p",{style:{margin:"4px 0",color:"#555"},children:["Grade ",t.grade," - Section ",t.section]})]})]});function cT(){const[t,e]=y.useState(typeof window<"u"?window.innerWidth>600:!0),[n,r]=y.useState([]),[s,i]=y.useState(""),[o,c]=y.useState("All"),[u,d]=y.useState("All"),[f,p]=y.useState([]),[g,j]=y.useState("details"),[v,N]=y.useState([]),[R,b]=y.useState(""),[_,w]=y.useState(null),[P,V]=y.useState(!1),[X,C]=y.useState(!1),[x,E]=y.useState("daily"),[k,T]=y.useState({}),[A,I]=y.useState({}),[J,Ee]=y.useState({}),[q,ge]=y.useState(null),[G,U]=y.useState([]),[te,z]=y.useState(""),[ae,_e]=y.useState(!1),[we,ue]=y.useState({}),[L,ce]=y.useState(null),[M,Ie]=y.useState(null),[Q,me]=y.useState(!1),[B,Y]=y.useState([]),[re,se]=y.useState(""),D=y.useRef(null),W=JSON.parse(localStorage.getItem("teacher"))||{},$=String(W.userId||""),[ee,ne]=y.useState({}),[he,ye]=y.useState([]),[Se,xe]=y.useState("daily"),[fe,De]=y.useState("All"),[At,Pe]=y.useState({}),[qe,ot]=y.useState({}),[$t,Ye]=y.useState(!0),[Dt,Qt]=y.useState([]),[xt,Wt]=y.useState("semester2"),[_l,Fs]=y.useState({}),[zs,Jt]=y.useState([]),[Fn,ct]=y.useState([]),[jr,dn]=y.useState(!1),[zn,wl]=y.useState(null),Xu=y.useRef({}),Xt=Ln(),[fm,pm]=y.useState(!1),[Si,To]=y.useState([]);y.useEffect(()=>{const O=JSON.parse(localStorage.getItem("teacher"));if(!O){Xt("/login");return}ce(O),No(O)},[Xt]),y.useEffect(()=>{const O=JSON.parse(localStorage.getItem("teacher"));if(!O){Xt("/login");return}w(O)},[Xt]),y.useEffect(()=>{(async()=>{try{let Ce=(await Z.get(`${iT}/get_posts`)).data||[];!Array.isArray(Ce)&&typeof Ce=="object"&&(Ce=Object.values(Ce));const[Be,Fe]=await Promise.all([Z.get(`${Zt}/School_Admins.json`),Z.get(`${Zt}/Users.json`)]),st=Be.data||{},Qe=Fe.data||{},Te=JSON.parse(localStorage.getItem("teacher")),Je=Sl(Te==null?void 0:Te.userId),Le=ke=>{const He=ke.adminId||ke.posterAdminId||ke.poster||ke.admin||null;if(He&&st[He]){const mt=st[He],Ae=mt.userId,Me=Qe[Ae]||null,pe=Me&&Me.name||mt.name||ke.adminName||"Admin",Ne=Me&&Me.profileImage||mt.profileImage||ke.adminProfile||"/default-profile.png";return{name:pe,profile:Ne}}return{name:ke.adminName||"Admin",profile:ke.adminProfile||"/default-profile.png"}},je=Ce.slice().sort((ke,He)=>{const mt=ke.time?new Date(ke.time).getTime():0;return(He.time?new Date(He.time).getTime():0)-mt}).filter(ke=>ke.postId&&!Je.includes(ke.postId)).slice(0,5).map(ke=>{var mt;const He=Le(ke);return{id:ke.postId,title:((mt=ke.message)==null?void 0:mt.substring(0,50))||"Untitled post",adminName:He.name,adminProfile:He.profile}});ct(je)}catch(ie){console.error("Error fetching notifications:",ie)}})()},[]);function Sl(O){return JSON.parse(localStorage.getItem(`seen_posts_${O}`))||[]}const No=async(O=L)=>{try{const ie=O||JSON.parse(localStorage.getItem("teacher"));if(!ie||!ie.userId){To([]);return}const[Ce,Be]=await Promise.all([Z.get(`${Zt}/Chats.json`),Z.get(`${Zt}/Users.json`)]),Fe=Ce.data||{},Qe=Be.data||{}||{},Te={};Object.entries(Qe).forEach(([Le,je])=>{je&&je.userId&&(Te[je.userId]=Le)});const Je=Object.entries(Fe).map(([Le,je])=>{const He=(je.unread||{})[ie.userId]||0;if(!He)return null;const mt=je.participants||{},Ae=Object.keys(mt||{}).find(Oe=>Oe!==ie.userId);if(!Ae)return null;let Me=Ae,pe=Qe[Me];if(!pe){const Oe=Te[Ae];Oe&&(Me=Oe,pe=Qe[Oe])}pe||(pe={userId:Ae,name:Ae,profileImage:"/default-profile.png"});const Ne={pushKey:Me,userId:pe.userId||Ae,name:pe.name||pe.username||Ae,profileImage:pe.profileImage||pe.profile||"/default-profile.png"},nt=je.lastMessage||{};return{chatId:Le,contact:Ne,displayName:Ne.name,profile:Ne.profileImage,lastMessageText:nt.text||"",lastMessageTime:nt.timeStamp||nt.time||null,lastMessageSeen:!!nt.seen,lastMessageSeenAt:nt.seenAt||nt.seenAt||null,lastMessageSenderId:nt.senderId||null,unreadForMe:He}}).filter(Boolean).sort((Le,je)=>(je.lastMessageTime||0)-(Le.lastMessageTime||0));To(Je)}catch(ie){console.error("Error fetching conversations:",ie),To([])}},Bn=Si.reduce((O,ie)=>O+(ie.unreadForMe||0),0);y.useEffect(()=>{if(!(_!=null&&_.userId))return;let O=!1;return(async()=>{Ye(!0);try{const[Ce,Be,Fe,st,Qe]=await Promise.all([Z.get(`${Zt}/Students.json`),Z.get(`${Zt}/Users.json`),Z.get(`${Zt}/Courses.json`),Z.get(`${Zt}/TeacherAssignments.json`),Z.get(`${Zt}/Teachers.json`)]),Te=Qe.data||{},Je=Object.entries(Te).find(([Ae,Me])=>Me.userId===_.userId);if(!Je){console.warn("Teacher not found in Teachers node"),O||(r([]),Ye(!1),i("No teacher assignment found"));return}const Le=Je[0],je=Object.values(st.data||{}).filter(Ae=>Ae.teacherId===Le).map(Ae=>Ae.courseId),ke=Be.data||{};Ee(ke);const He=Ae=>th(ke,Ae),mt=Object.entries(Ce.data||{}).map(([Ae,Me])=>{var _t,it;const pe=He(Me.userId),Ne=Me.parentName||((_t=Me.parent)==null?void 0:_t.name)||(pe==null?void 0:pe.parentName)||Me.rawParentName||null,nt=Me.parentPhone||((it=Me.parent)==null?void 0:it.phone)||(pe==null?void 0:pe.parentPhone)||Me.rawParentPhone||null,Oe=(pe==null?void 0:pe.dob)||(pe==null?void 0:pe.birthDate)||Me.dob||Me.birthDate||null,Ct=eh(Oe);return{...Me,studentId:Ae,name:(pe==null?void 0:pe.name)||Me.name||"Unknown",email:(pe==null?void 0:pe.email)||Me.email||"",profileImage:(pe==null?void 0:pe.profileImage)||Me.profileImage||"/default-profile.png",phone:(pe==null?void 0:pe.phone)||Me.phone||"",gender:(pe==null?void 0:pe.gender)||Me.gender||"",dob:Oe,age:Ct,parentName:Ne||null,parentPhone:nt||null,raw:Me}}).filter(Ae=>je.some(Me=>{var Ne;const pe=(Ne=Fe.data)==null?void 0:Ne[Me];return pe&&pe.grade===Ae.grade&&pe.section===Ae.section}));O||(r(mt),i(""))}catch(Ce){console.error(Ce),O||i("Failed to load students")}finally{O||Ye(!1)}})(),()=>O=!0},[_]),y.useEffect(()=>{var Be,Fe,st,Qe,Te,Je;if(!M){ge(null);return}const O={fullName:M.name||"",phone:M.phone||((Be=M.raw)==null?void 0:Be.phone)||"",gender:M.gender||((Fe=M.raw)==null?void 0:Fe.gender)||"",email:M.email||"",grade:M.grade||"",section:M.section||"",parentName:M.parentName||((st=M.raw)==null?void 0:st.parentName)||"",parentPhone:M.parentPhone||((Qe=M.raw)==null?void 0:Qe.parentPhone)||"",dob:M.dob||((Te=M.raw)==null?void 0:Te.dob)||"",age:M.age??eh(M.dob||((Je=M.raw)==null?void 0:Je.dob))??"",profileImage:M.profileImage||"/default-profile.png"};ge(O);let ie=!1;return(async()=>{var Le,je,ke,He,mt,Ae,Me;try{let pe=J;(!pe||Object.keys(pe).length===0)&&(pe=(await Z.get(`${Zt}/Users.json`)).data||{},Ee(pe));const Ne=th(pe,M.userId)||{},nt=((Le=M.raw)==null?void 0:Le.parentId)||((je=M.raw)==null?void 0:je.parentUserId)||(Ne==null?void 0:Ne.parentId)||(Ne==null?void 0:Ne.parentUserId)||null,Oe=nt?th(pe,nt):null,Ct=(Oe==null?void 0:Oe.name)||((ke=M.raw)==null?void 0:ke.parentName)||M.parentName||"",_t=(Oe==null?void 0:Oe.phone)||((He=M.raw)==null?void 0:He.parentPhone)||M.parentPhone||"",it=(Ne==null?void 0:Ne.phone)||M.phone||((mt=M.raw)==null?void 0:mt.phone)||"",Jn=(Ne==null?void 0:Ne.gender)||M.gender||((Ae=M.raw)==null?void 0:Ae.gender)||"",Xr=(Ne==null?void 0:Ne.email)||M.email||"",Tl=(Ne==null?void 0:Ne.dob)||(Ne==null?void 0:Ne.birthDate)||M.dob||((Me=M.raw)==null?void 0:Me.dob)||null,ed=eh(Tl)??M.age??"",td={fullName:(Ne==null?void 0:Ne.name)||M.name||"",phone:it,gender:Jn,email:Xr,grade:M.grade||"",section:M.section||"",parentName:Ct,parentPhone:_t,dob:Tl||"",age:ed,profileImage:(Ne==null?void 0:Ne.profileImage)||M.profileImage||"/default-profile.png",userRec:Ne,parentRec:Oe};ie||ge(td)}catch(pe){console.error("Failed to derive student details",pe)}})(),()=>{ie=!0}},[M,J]),y.useEffect(()=>{if(!M)return;let O=!1;return(async()=>{var Ce,Be;try{const st=(await Z.get(`${Zt}/Parents.json`)).data||{},Qe=[(Ce=M.raw)==null?void 0:Ce.parentId,(Be=M.raw)==null?void 0:Be.parentUserId,M.parentId,M.parentUserId].filter(Boolean);let Te=null;for(const je of Qe){if(st[je]){Te=st[je];break}const ke=Object.values(st).find(He=>String(He.userId)===String(je));if(ke){Te=ke;break}}if(!Te){const je=M.studentId||M.userId;for(const ke of Object.values(st)){const He=(ke==null?void 0:ke.children)||{};if(Object.values(He).find(Ae=>String(Ae==null?void 0:Ae.studentId)===String(je))){Te=ke;break}}}let Je=null,Le=null;if(Te&&(Je=Te.name||Te.displayName||null,Le=Te.phone||Te.phoneNumber||Te.contact||null,(!Je||!Le)&&Te.userId))try{const ke=(await Z.get(`${Zt}/Users.json`)).data||{},He=Object.values(ke).find(mt=>String(mt.userId)===String(Te.userId));He&&(Je=Je||He.name||null,Le=Le||He.phone||null)}catch{}O||ge(je=>({...je||{},parentName:Je||(je==null?void 0:je.parentName)||"",parentPhone:Le||(je==null?void 0:je.parentPhone)||""}))}catch(Fe){console.error("Error resolving parent info:",Fe)}})(),()=>O=!0},[M]),y.useEffect(()=>{const O=document.querySelector(".chat-messages");O&&(O.scrollTop=O.scrollHeight)},[v]),y.useEffect(()=>{if(o==="All")p([]),d("All");else{const O=[...new Set(n.filter(ie=>ie.grade===o).map(ie=>ie.section))];p(O),d("All")}},[o,n]);const bl=n.filter(O=>!(o!=="All"&&O.grade!==o||u!=="All"&&O.section!==u)),fr=[...new Set(n.map(O=>O.grade))].sort();y.useEffect(()=>{if(!(M!=null&&M.studentId)&&!(M!=null&&M.userId)){Jt([]);return}let O=!1;return(async()=>{V(!0);try{const[Ce,Be,Fe,st]=await Promise.all([Z.get(`${Zt}/Attendance.json`),Z.get(`${Zt}/Teachers.json`),Z.get(`${Zt}/Users.json`),Z.get(`${Zt}/TeacherAssignments.json`)]),Qe=Ce.data||{},Te=Be.data||{},Je=Fe.data||{},Le=st.data||{},je=[];Object.entries(Qe).forEach(([ke,He])=>{!He||typeof He!="object"||Object.entries(He).forEach(([mt,Ae])=>{if(!Ae||typeof Ae!="object")return;let pe=Ae[M.studentId]??Ae[M.userId];if(!pe&&Ae.students&&(pe=Ae.students[M.studentId]??Ae.students[M.userId]),!pe){const Ct=Object.entries(Ae).find(([_t,it])=>!it||typeof it!="object"?!1:!!(it.userId&&(String(it.userId)===String(M.userId)||String(it.userId)===String(M.studentId))));Ct&&(pe=Ct[1])}if(!pe)return;let Ne="absent",nt="",Oe=ke;if(typeof pe=="string")Ne=pe;else if(typeof pe=="object"){if(Ne=pe.status||pe.attendance_status||Object.values(pe)[0]||"present",nt=pe.teacherName||pe.teacher||pe.tutor||"",!nt){const Ct=pe.teacherId||pe.teacherKey||null;if(Ct&&Te[Ct]){const _t=Te[Ct];if(_t.userId){const it=Object.values(Je).find(Jn=>String(Jn==null?void 0:Jn.userId)===String(_t.userId));nt=(it==null?void 0:it.name)||_t.name||nt}else nt=_t.name||nt}}if(!nt){const Ct=pe.teacherUserId||pe.teacherUser||pe.takenBy||null;if(Ct){const _t=Object.values(Je).find(it=>String(it==null?void 0:it.userId)===String(Ct));_t&&(nt=_t.name||nt)}}Oe=pe.subject||ke}if(!nt){const Ct=Object.values(Le).find(_t=>String(_t.courseId)===String(ke));if(Ct&&Ct.teacherId){const _t=Ct.teacherId,it=Te[_t];if(it)if(it.userId){const Jn=Object.values(Je).find(Xr=>String(Xr==null?void 0:Xr.userId)===String(it.userId));nt=(Jn==null?void 0:Jn.name)||it.name||nt}else nt=it.name||nt}}je.push({courseId:ke,date:mt,status:String(Ne).toLowerCase(),teacherName:nt,subject:Oe})})}),O||(je.sort((ke,He)=>new Date(He.date)-new Date(ke.date)),Jt(je))}catch(Ce){console.error("Attendance fetch error:",Ce),O||Jt([])}finally{O||V(!1)}})(),()=>{O=!0}},[M]);const Bs=mn.useMemo(()=>zs.map(O=>({date:O.date,courseId:O.courseId,teacherName:O.teacherName||"",status:O.status||"absent"})),[zs]),El=mn.useMemo(()=>!Bs||Bs.length===0?{}:Bs.reduce((O,ie)=>{const Ce=ie.courseId||ie.subject||"unknown";return O[Ce]||(O[Ce]=[]),O[Ce].push(ie),O},{}),[Bs]),Ro=O=>{if(!O||O.length===0)return 0;const ie=O.filter(Ce=>Ce.status==="present"||Ce.status==="late").length;return Math.round(ie/O.length*100)},bi=O=>{Pe(ie=>({...ie,[O]:!ie[O]}))},Cl=()=>{localStorage.removeItem("teacher"),Xt("/login")};y.useEffect(()=>{if(!M){ne({});return}(async()=>{Ye(!0);try{const ie=ww(),Ce=await vw(Lt(ie,"ClassMarks"));if(!Ce.exists()){ne({}),Ye(!1);return}const Be=Ce.val(),Fe={},st=new Set([M.studentId,M.userId,M.userId?`student_${M.userId}`:null].filter(Boolean));Object.entries(Be).forEach(([Qe,Te])=>{if(!Te||typeof Te!="object")return;const Je=Object.entries(Te).find(([Le,je])=>!!(st.has(Le)||je&&typeof je=="object"&&(je.userId&&st.has(je.userId)||je.studentId&&st.has(je.studentId))));if(Je){const[,Le]=Je;Fe[Qe]=Le}}),ne(Fe)}catch(ie){console.error("Failed to fetch marks:",ie),ne({})}finally{Ye(!1)}})()},[M]),y.useEffect(()=>{if(!(M!=null&&M.userId))return;async function O(){try{const ie=await Z.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/StudentNotes/${M==null?void 0:M.userId}.json`);if(!ie.data){U([]);return}const Ce=Object.entries(ie.data).map(([Be,Fe])=>({id:Be,...Fe}));Ce.sort((Be,Fe)=>new Date(Fe.createdAt)-new Date(Be.createdAt)),U(Ce)}catch(ie){console.error("Failed to fetch teacher notes",ie),U([])}}O()},[M]);const Zu=async()=>{if(!te.trim()||!_||!M)return;_e(!0);const O={teacherId:_.userId,teacherName:_.name,note:te.trim(),createdAt:new Date().toISOString()};try{await Z.post(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/StudentNotes/${M==null?void 0:M.userId}.json`,O),U(ie=>[O,...ie]),z("")}catch(ie){console.error("Error saving note",ie)}finally{_e(!1)}},Il=()=>{var O;(O=D.current)==null||O.scrollIntoView({behavior:"smooth"})};y.useEffect(()=>{Il()},[B]),y.useEffect(()=>{if(!$||!M)return;const O=Zd($,M.userId),ie=Lt(Vt,`Chats/${O}/messages`),Ce=Ji(ie,Be=>{const Fe=Be.val()||{},st=Object.entries(Fe).map(([Qe,Te])=>({id:Qe,...Te,isTeacher:Te.senderId===$})).sort((Qe,Te)=>Qe.timeStamp-Te.timeStamp);Y(st)});return()=>Ce()},[$,M]),y.useEffect(()=>{if(!X||!M||!$||!B||B.length===0)return;const O=B.filter(Fe=>String(Fe.receiverId)===String($)&&!Fe.seen);if(O.length===0)return;const ie=Zd($,M.userId),Ce=Date.now(),Be={messages:{},unread:{}};O.forEach(Fe=>{Be.messages[Fe.id]={...Be.messages[Fe.id]||{},seen:!0,seenAt:Ce}}),Be.unread[$]=null,Be.lastMessage={seen:!0,seenAt:Ce},Z.patch(`${Zt}/Chats/${ie}.json`,Be).catch(Fe=>console.error("Failed to mark messages seen:",Fe))},[X,B,M,$]),y.useEffect(()=>{var O;(O=D.current)==null||O.scrollIntoView({behavior:"smooth"})},[B]);const jl=async()=>{if(!re.trim()||!M)return;const O=$,ie=M.userId,Ce=Zd(O,ie),Be=Date.now(),Fe={senderId:O,receiverId:ie,type:"text",text:re,seen:!1,timeStamp:Be};await Z.post(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${Ce}/messages.json`,Fe),await Z.patch(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${Ce}.json`,{participants:{[O]:!0,[ie]:!0},lastMessage:{text:re,senderId:O,seen:!1,timeStamp:Be},unread:{[ie]:1}}),se("")},[Qn,kl]=mn.useState(window.innerWidth<window.innerHeight);return mn.useEffect(()=>{const O=()=>{kl(window.innerWidth<window.innerHeight)};return window.addEventListener("resize",O),()=>window.removeEventListener("resize",O)},[]),y.useEffect(()=>{const O=document.querySelector(".chat-messages");O&&(O.scrollTop=O.scrollHeight)},[v]),l.jsxs("div",{className:"dashboard-page",children:[l.jsxs("nav",{className:"top-navbar",children:[l.jsx("h2",{children:"Gojo Dashboard"}),l.jsxs("div",{className:"nav-right",children:[l.jsxs("div",{className:"icon-circle",children:[l.jsxs("div",{onClick:()=>dn(!jr),style:{cursor:"pointer",position:"relative"},"aria-label":"Show notifications",tabIndex:0,role:"button",onKeyPress:O=>{O.key==="Enter"&&dn(!jr)},children:[l.jsx(Ls,{size:24}),Fn.length+Bn>0&&l.jsx("span",{style:{position:"absolute",top:-5,right:-5,background:"red",color:"white",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:Fn.length+Bn})]}),jr&&l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.08)",zIndex:1999},onClick:()=>dn(!1)}),l.jsxs("div",{className:"notification-popup",style:typeof window<"u"&&window.innerWidth<=600?{position:"fixed",left:"50%",top:"8%",transform:"translate(-50%, 0)",width:"90vw",maxWidth:340,zIndex:2e3,background:"#fff",borderRadius:12,boxShadow:"0 2px 16px rgba(0,0,0,0.18)",maxHeight:"70vh",overflowY:"auto",padding:12}:{zIndex:2e3,position:"absolute",top:30,right:0,width:300,maxHeight:400,overflowY:"auto",background:"#fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",borderRadius:8},onClick:O=>O.stopPropagation(),children:[Fn.length>0&&Fn.map((O,ie)=>l.jsxs("div",{onClick:()=>{ct(Ce=>Ce.filter((Be,Fe)=>Fe!==ie)),dn(!1),Xt("/dashboard"),setTimeout(()=>{const Ce=Xu.current[O.id];Ce&&(Ce.scrollIntoView({behavior:"smooth",block:"center"}),wl(O.id),setTimeout(()=>wl(null),3e3))},150)},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[l.jsx("img",{src:O.adminProfile,alt:O.adminName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),l.jsxs("div",{children:[l.jsx("strong",{children:O.adminName}),l.jsx("p",{style:{margin:0,fontSize:12},children:O.title})]})]},O.id||ie)),Bn>0&&Si.filter(O=>O.unreadForMe>0).map((O,ie)=>l.jsxs("div",{onClick:()=>{dn(!1),Xt("/all-chat")},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[l.jsx("img",{src:O.profile||"/default-profile.png",alt:O.displayName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),l.jsxs("div",{children:[l.jsx("strong",{children:O.displayName}),l.jsxs("p",{style:{margin:0,fontSize:12,color:"#0b78f6",display:"flex",alignItems:"center",gap:8},children:[O.lastMessageSenderId===$?l.jsx("span",{style:{color:O.lastMessageSeen?"#0bda63":"#cbd5e1"},children:O.lastMessageSeen?"":""}):null,l.jsx("span",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:160},children:O.lastMessageText||"New message"}),O.lastMessageSeenAt&&l.jsx("span",{style:{marginLeft:6,color:"#64748b",fontSize:11},children:new Date(O.lastMessageSeenAt).toLocaleTimeString()})]})]})]},O.chatId||ie)),Fn.length===0&&Bn===0&&l.jsx("div",{style:{padding:15},children:"No notifications"})]})]})]}),l.jsx("div",{className:"icon-circle",style:{position:"relative",marginLeft:12},children:l.jsxs("div",{onClick:()=>Xt("/all-chat"),style:{cursor:"pointer",position:"relative"},children:[l.jsx(Ms,{size:22}),Bn>0&&l.jsx("span",{style:{position:"absolute",top:-6,right:-6,background:"#f60b0b",color:"#fff",borderRadius:"50%",minWidth:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 5px"},children:Bn})]})}),l.jsx("div",{className:"icon-circle",onClick:()=>Xt("/settings"),children:l.jsx(Cr,{})}),l.jsx("img",{src:(L==null?void 0:L.profileImage)||"/default-profile.png"})]})]}),l.jsxs("div",{className:"google-dashboard",children:[typeof window<"u"&&y.useEffect(()=>{const O=()=>{window.innerWidth<=600?e(!1):e(!0)};return window.addEventListener("resize",O),O(),()=>window.removeEventListener("resize",O)},[]),typeof window<"u"&&window.innerWidth<=600&&!t&&l.jsx("button",{className:"sidebar-arrow-btn",style:{position:"fixed",left:0,top:0,zIndex:1300,background:"#fff",border:"none",borderRadius:"0 8px 8px 0",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",padding:8,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:()=>e(!0),"aria-label":"Open sidebar menu",children:l.jsx(js,{size:22})}),typeof window<"u"&&window.innerWidth<=600&&t&&l.jsx("div",{className:"sidebar-overlay visible",onClick:()=>e(!1),style:{display:"block",position:"fixed",inset:0,background:"rgba(0,0,0,0.35)",zIndex:1200}}),l.jsxs("div",{className:`google-sidebar${typeof window<"u"&&window.innerWidth<=600&&t?" open":""}`,style:typeof window<"u"&&window.innerWidth<=600?{position:"fixed",top:64,left:t?0:"-220px",width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",zIndex:1200,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto",borderRadius:0,transition:"left 0.25s cubic-bezier(.4,0,.2,1)"}:{position:"fixed",top:64,left:0,width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.04)",zIndex:900,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto",borderRadius:0},children:[l.jsx("style",{children:`
                    @media (max-width: 600px) {
                      .google-sidebar {
                        left: -220px;
                        transition: left 0.25s cubic-bezier(.4,0,.2,1);
                        border-radius: 0 !important;
                      }
                      .google-sidebar.open {
                        left: 0 !important;
                        z-index: 1202;
                        border-radius: 0 !important;
                      }
                      .sidebar-overlay {
                        display: block;
                        position: fixed;
                        inset: 0;
                        background: rgba(0,0,0,0.35);
                        z-index: 1200;
                        transition: opacity 0.2s;
                      }
                      .sidebar-arrow-btn {
                        display: flex !important;
                      }
                    }
                  `}),L&&l.jsxs("div",{className:"sidebar-profile",children:[l.jsx("div",{className:"sidebar-img-circle",children:l.jsx("img",{src:L.profileImage||"/default-profile.png",alt:"profile"})}),l.jsx("h3",{children:L.name}),l.jsx("p",{children:L.username})]}),l.jsxs("div",{className:"sidebar-menu",children:[l.jsxs(ve,{className:"sidebar-btn",to:"/dashboard",children:[l.jsx(Yr,{})," Home"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/students",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[l.jsx(Ke,{})," Students"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/admins",children:[l.jsx(Ke,{})," Admins"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/parents",children:[l.jsx(qr,{})," Parents"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/marks",children:[l.jsx(Er,{})," Marks"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/attendance",children:[l.jsx(Ke,{})," Attendance"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/schedule",children:[l.jsx(Ke,{})," Schedule"]}),l.jsxs("button",{className:"sidebar-btn logout-btn",onClick:Cl,children:[l.jsx(Qr,{})," Logout"]})]})]}),l.jsxs("div",{style:{flex:1,display:"flex",justifyContent:"center",padding:"30px"},children:[l.jsxs("div",{className:"student-list-card-responsive",style:{width:"220px",position:"relative",marginLeft:"30px",marginRight:Qn?0:"30px"},children:[l.jsx("style",{children:`
               @media (max-width: 600px) {
                 .student-list-card-responsive {
                   margin-left: -16px !important;
                   margin-right: auto !important;
                   width: 70vw !important;
                   max-width: 70vw !important;
                 }
               }
             `}),l.jsx("h2",{style:{textAlign:"center",marginBottom:"20px"},children:"My Students"}),l.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px",flexWrap:"wrap"},children:[l.jsx("button",{onClick:()=>c("All"),style:{padding:"8px 15px",borderRadius:"8px",background:o==="All"?"#4b6cb7":"#ddd",color:o==="All"?"#fff":"#000",border:"none"},children:"All Grades"}),fr.map(O=>l.jsxs("button",{onClick:()=>c(O),style:{padding:"8px 15px",borderRadius:"8px",background:o===O?"#4b6cb7":"#ddd",color:o===O?"#fff":"#000",border:"none"},children:["Grade ",O]},O))]}),o!=="All"&&l.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"20px",flexWrap:"wrap"},children:[l.jsx("button",{onClick:()=>d("All"),style:{padding:"6px 12px",borderRadius:"8px",background:u==="All"?"#4b6cb7":"#ddd",color:u==="All"?"#fff":"#000",border:"none"},children:"All Sections"}),f.map(O=>l.jsxs("button",{onClick:()=>d(O),style:{padding:"6px 12px",borderRadius:"8px",background:u===O?"#4b6cb7":"#ddd",color:u===O?"#fff":"#000",border:"none"},children:["Section ",O]},O))]}),$t&&l.jsx("p",{children:"Loading students..."}),s&&l.jsx("p",{style:{color:"red"},children:s}),!$t&&!s&&bl.length===0&&l.jsx("p",{children:"No students found."}),l.jsx("style",{children:`
              .student-list-responsive {
                display: flex;
                flex-direction: column;
                margin-top: 30px;
                gap: 12px;
                width: 100%;
                max-width: 100vw;
                margin-left: 0;
                margin-right: 0;
              }
              @media (max-width: 600px) {
                .student-list-responsive {
                  width: 100vw !important;
                  max-width: 100vw !important;
                  margin-left: 0 !important;
                  margin-right: 0 !important;
                  padding: 0 !important;
                  align-items: flex-start !important;
                }
                .student-list-responsive > div {
                  margin-left: 10px !important;
                  padding-left: 10px !important;
                  width: 100vw !important;
                  max-width: 100vw !important;
                  min-width: 100vw !important;
                  box-sizing: border-box !important;
                }
              }
              @media (min-width: 350px) {
                .student-list-responsive {
                  width: 350px;
                  max-width: 70vw;
                }
              }
               @media (max-width: 600px) {
                 .student-list-card-responsive {
                   margin-left: -32px !important;
                   margin-right: auto !important;
                   width: 80vw !important;
                   max-width: 80vw !important;
                 }
               }
                  width: 500px;
                  max-width: 80vw;
                }
              }
              @media (min-width: 1200px) {
                .student-list-responsive {
                  width: 600px;
                  max-width: 700px;
                  margin-left: -100px;
                }
              }
              @media (min-width: 1500px) {
                .student-list-responsive {
                  width: 600px;
                  max-width: 700px;
                  margin-left: -250px;
                }
              }
            `}),l.jsx("div",{className:"student-list-responsive",children:bl.map((O,ie)=>l.jsx(lT,{student:O,selected:(M==null?void 0:M.userId)===O.userId,onClick:()=>Ie(O)},O.userId||O.id||ie))})]}),M&&l.jsxs("div",{style:{width:Qn?"100%":"30%",height:Qn?"100vh":"calc(100vh - 60px)",position:"fixed",right:0,top:Qn?0:"60px",background:"#fff",zIndex:1e3,display:"flex",flexDirection:"column",overflowY:"auto",boxShadow:Qn?"0 0 0 rgba(0,0,0,0)":"0 0 15px rgba(0,0,0,0.08)",transition:"all 0.35s ease"},children:[l.jsx("button",{onClick:()=>Ie(null),style:{position:"fixed",top:56,right:16,width:42,height:42,borderRadius:12,border:"none",background:"#ffffff",boxShadow:"0 6px 18px rgba(2,6,23,0.15)",cursor:"pointer",fontSize:22,fontWeight:900,zIndex:2e3},children:""}),l.jsxs("div",{style:{textAlign:"center",marginBottom:"20px",paddingTop:20},children:[l.jsx("div",{style:{width:"120px",height:"120px",margin:"0 auto 15px",borderRadius:"50%",overflow:"hidden",border:"4px solid #4b6cb7"},children:l.jsx("img",{src:M.profileImage,alt:M.name,style:{width:"100%",height:"100%",objectFit:"cover"}})}),l.jsx("h2",{style:{margin:0,fontSize:"22px"},children:M.name}),l.jsx("p",{style:{color:"#555",margin:"5px 0"},children:M.studentId}),l.jsxs("p",{style:{color:"#555",margin:"5px 0"},children:[l.jsx("strong",{children:"Grade:"})," ",M.grade,M.section]})]}),l.jsx("div",{style:{display:"flex",marginBottom:"15px"},children:["details","attendance","performance"].map(O=>l.jsx("button",{onClick:()=>j(O),style:{flex:1,padding:"10px",border:"none",background:"none",cursor:"pointer",fontWeight:"600",color:g===O?"#4b6cb7":"#777",borderBottom:g===O?"3px solid #4b6cb7":"3px solid transparent"},children:O.toUpperCase()},O))}),l.jsxs("div",{children:[g==="details"&&l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:28,padding:50,marginLeft:0,marginRight:0,borderRadius:0,background:"linear-gradient(180deg,#eef2ff,#f8fafc)",fontFamily:"Inter, system-ui"},children:l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:24,fontWeight:900,marginBottom:18,marginTop:-30,background:"linear-gradient(90deg,#2563eb,#7c3aed)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Student Details"}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",columnGap:68,rowGap:14},children:[["Phone",q==null?void 0:q.phone],["Gender",q==null?void 0:q.gender],["Email",q==null?void 0:q.email],["Grade",q==null?void 0:q.grade],["Section",q==null?void 0:q.section],["Age",q==null?void 0:q.age],["Birth Date",q==null?void 0:q.dob],["Parent Name",q==null?void 0:q.parentName],["Parent Phone",q==null?void 0:q.parentPhone]].map(([O,ie])=>l.jsxs("div",{style:{padding:18,borderRadius:20,background:"#ffffff",boxShadow:"0 6px 10px rgba(0,0,0,0.08)",marginLeft:-30,marginRight:-30},children:[l.jsx("div",{style:{fontSize:12,fontWeight:700,color:"#000102",textTransform:"uppercase"},children:O}),l.jsx("div",{style:{marginTop:8,fontSize:16,fontWeight:400,color:"#000102"},children:ie||""})]},O))}),l.jsxs("div",{style:{marginTop:36},children:[l.jsx("div",{style:{fontSize:22,fontWeight:900,marginBottom:14,color:"#1e293b"},children:"Teacher Comments"}),l.jsxs("div",{style:{background:"#ffffff",padding:18,borderRadius:22,boxShadow:"0 14px 40px rgba(0,0,0,0.1)"},children:[l.jsx("textarea",{value:te,onChange:O=>z(O.target.value),placeholder:"Write an important comment about the student...",style:{width:"100%",minHeight:30,border:"none",outline:"none",resize:"vertical",fontSize:15,lineHeight:1.6}}),l.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:12},children:l.jsx("button",{onClick:Zu,disabled:ae,style:{padding:"10px 22px",borderRadius:999,border:"none",background:"linear-gradient(135deg,#2563eb,#7c3aed)",color:"#fff",fontWeight:900,cursor:"pointer",boxShadow:"0 12px 30px rgba(37,99,235,0.45)"},children:ae?"Saving...":"Add Comment"})})]}),l.jsx("div",{style:{marginTop:18,display:"flex",flexDirection:"column",gap:14},children:G.length===0?l.jsx("div",{style:{textAlign:"center",padding:18,color:"#64748b",background:"#ffffff",borderRadius:18},children:"No teacher comments yet"}):G.map(O=>{var ie;return l.jsxs("div",{style:{display:"flex",gap:12},children:[l.jsx("div",{style:{width:44,height:44,borderRadius:"50%",background:"linear-gradient(135deg,#60a5fa,#2563eb)",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:900},children:((ie=O.teacherName)==null?void 0:ie.split(" ").map(Ce=>Ce[0]).join("").slice(0,2).toUpperCase())||"T"}),l.jsxs("div",{style:{flex:1,background:"#ffffff",padding:14,borderRadius:18,boxShadow:"0 8px 24px rgba(0,0,0,0.08)"},children:[l.jsx("div",{style:{fontWeight:800,color:"#1e293b"},children:O.teacherName}),l.jsx("div",{style:{marginTop:6},children:O.note}),l.jsx("div",{style:{marginTop:6,fontSize:12,color:"#64748b",textAlign:"right"},children:new Date(O.createdAt).toLocaleString()})]})]},O.id)})})]})]})}),g==="attendance"&&M&&l.jsxs("div",{style:{padding:30,background:"radial-gradient(circle at top,#eef2ff,#f8fafc)",borderRadius:26,fontFamily:"Inter, system-ui"},children:[l.jsx("div",{style:{display:"flex",justifyContent:"center",gap:16,marginBottom:32},children:["daily","weekly","monthly"].map(O=>l.jsx("button",{onClick:()=>xe(O),style:{padding:"12px 28px",borderRadius:999,border:"none",fontWeight:800,fontSize:13,letterSpacing:1,cursor:"pointer",background:Se===O?"linear-gradient(135deg,#4f46e5,#2563eb)":"rgba(255,255,255,.8)",color:Se===O?"#fff":"#1f2937",boxShadow:Se===O?"0 5px 5px rgba(79,70,229,.45)":"0 5px 5px rgba(0,0,0,.08)",transition:"all .3s ease"},children:O.toUpperCase()},O))}),Object.entries(El).filter(([O])=>fe==="All"||O===fe).map(([O,ie])=>{var Je;const Ce=new Date().toDateString(),Be=ie.filter(Le=>{var je,ke,He,mt;return((ke=(je=new Date(Le.date)).getWeek)==null?void 0:ke.call(je))===((mt=(He=new Date).getWeek)==null?void 0:mt.call(He))}),Fe=ie.filter(Le=>new Date(Le.date).getMonth()===new Date().getMonth()),st=Se==="daily"?ie.filter(Le=>new Date(Le.date).toDateString()===Ce):Se==="weekly"?Be:Fe,Qe=Ro(st),Te=`${Se}-${O}`;return l.jsxs("div",{onClick:()=>bi(Te),style:{cursor:"pointer",background:"linear-gradient(180deg,rgba(255,255,255,.95),rgba(255,255,255,.85))",backdropFilter:"blur(14px)",borderRadius:26,padding:26,marginBottom:26,boxShadow:"0 10px 10px rgba(0,0,0,.12)",position:"relative",overflow:"hidden"},children:[l.jsx("div",{style:{position:"absolute",inset:0,background:"radial-gradient(circle at top left,rgba(99,102,241,.15),transparent 60%)",pointerEvents:"none"}}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:18},children:[l.jsxs("div",{children:[l.jsxs("h3",{style:{margin:0,fontSize:20,fontWeight:900,color:"#1e3a8a"},children:[" ",sT(O)]}),l.jsxs("p",{style:{margin:"6px 0 0",fontSize:13,color:"#64748b"},children:[" ",(Je=ie[0])==null?void 0:Je.teacherName]})]}),l.jsxs("div",{style:{padding:"8px 16px",borderRadius:999,fontSize:13,fontWeight:900,background:Qe>=75?"linear-gradient(135deg,#22c55e,#16a34a)":Qe>=50?"linear-gradient(135deg,#facc15,#eab308)":"linear-gradient(135deg,#ef4444,#dc2626)",color:"#fff",boxShadow:"0 10px 25px rgba(0,0,0,.25)"},children:[Qe,"%"]})]}),l.jsx("div",{onClick:()=>bi(Te),style:{height:16,background:"#e5e7eb",borderRadius:999,cursor:"pointer",overflow:"hidden",marginBottom:10},children:l.jsx("div",{style:{height:"100%",width:`${Qe}%`,background:Qe>=75?"linear-gradient(90deg,#22c55e,#16a34a)":Qe>=50?"linear-gradient(90deg,#facc15,#eab308)":"linear-gradient(90deg,#ef4444,#dc2626)",transition:"width .5s cubic-bezier(.4,0,.2,1)"}})}),l.jsxs("div",{style:{fontSize:12,fontWeight:700,color:"#475569",marginBottom:12,letterSpacing:.6},children:["CLICK BAR TO VIEW ",Se.toUpperCase()," DETAILS"]}),At[Te]&&l.jsx("div",{style:{marginTop:14,background:"#f1f5f9",borderRadius:18,padding:14},children:st.map((Le,je)=>l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 8px",borderBottom:je!==st.length-1?"1px solid #e5e7eb":"none"},children:[l.jsx("div",{style:{display:"flex",flexDirection:"column"},children:l.jsxs("span",{style:{fontSize:13,color:"#1f2937"},children:[" ",new Date(Le.date).toDateString()]})}),l.jsx("span",{style:{padding:"6px 14px",borderRadius:999,fontSize:12,fontWeight:900,background:Le.status==="present"?"#dcfce7":Le.status==="late"?"#fef3c7":"#fee2e2",color:Le.status==="present"?"#166534":Le.status==="late"?"#92400e":"#991b1b"},children:Le.status.toUpperCase()})]},je))})]},O)})]}),g==="performance"&&l.jsxs("div",{style:{position:"relative",paddingBottom:"70px",background:"#f8fafc"},children:[l.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"40px",marginBottom:"25px",borderBottom:"2px solid #e5e7eb",paddingBottom:"8px"},children:["semester1","semester2"].map(O=>{const ie=xt===O;return l.jsxs("button",{onClick:()=>Wt(O),style:{background:"none",border:"none",cursor:"pointer",fontSize:"16px",fontWeight:"800",color:ie?"#2563eb":"#64748b",paddingBottom:"10px",position:"relative"},children:[O==="semester1"?"Semester 1":"Semester 2",ie&&l.jsx("span",{style:{position:"absolute",bottom:"-2px",left:0,width:"100%",height:"4px",background:"linear-gradient(135deg,#4b6cb7,#1e40af)",borderRadius:"6px"}})]},O)})}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"20px",padding:"20px"},children:$t?l.jsx("div",{style:{textAlign:"center",gridColumn:"1 / -1",padding:"30px"},children:"Loading performance..."}):Object.keys(ee||{}).length===0?l.jsx("div",{style:{textAlign:"center",padding:"30px",borderRadius:"18px",background:"#ffffff",color:"#475569",fontSize:"16px",fontWeight:"600",boxShadow:"0 10px 25px rgba(0,0,0,0.08)",gridColumn:"1 / -1"},children:" No Performance Records"}):Object.entries(ee).map(([O,ie],Ce)=>{const Be=ie==null?void 0:ie[xt];if(!Be)return null;const Fe=Be.assessments||{},st=Object.values(Fe).reduce((je,ke)=>je+(ke.score||0),0),Qe=Object.values(Fe).reduce((je,ke)=>je+(ke.max||0),0),Te=Qe?st/Qe*100:0,Je=Te>=75?"#16a34a":Te>=50?"#f59e0b":"#dc2626",Le=O.replace("course_","").replace(/_/g," ").toUpperCase();return l.jsxs("div",{style:{padding:"18px",borderRadius:"20px",background:"#ffffff",boxShadow:"0 12px 30px rgba(0,0,0,0.08)"},children:[l.jsx("div",{style:{fontSize:"16px",fontWeight:"800",marginBottom:"14px",color:"#2563eb",textAlign:"center"},children:Le}),l.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"16px"},children:l.jsx("div",{style:{width:"90px",height:"90px",borderRadius:"50%",background:`conic-gradient(${Je} ${Te*3.6}deg, #e5e7eb 0deg)`,display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsxs("div",{style:{width:"66px",height:"66px",borderRadius:"50%",background:"#fff",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[l.jsx("strong",{style:{color:Je},children:st}),l.jsxs("span",{style:{fontSize:"11px"},children:["/ ",Qe]})]})})}),Object.entries(Fe).map(([je,ke])=>l.jsxs("div",{style:{marginBottom:"10px"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"13px",fontWeight:"600"},children:[l.jsx("span",{children:ke.name}),l.jsxs("span",{children:[ke.score," / ",ke.max]})]}),l.jsx("div",{style:{height:"6px",borderRadius:"999px",background:"#e5e7eb",marginTop:"5px"},children:l.jsx("div",{style:{width:`${ke.score/ke.max*100}%`,height:"100%",background:Je}})})]},je)),l.jsx("div",{style:{marginTop:"10px",textAlign:"center",fontWeight:"700",color:Je},children:Te>=75?"Excellent":Te>=50?"Good":"Needs Improvement"}),l.jsxs("div",{style:{marginTop:"6px",textAlign:"center",fontSize:"12px",color:"#64748b"},children:[" ",ie.teacherName||Be.teacherName||"N/A"]})]},`${O}-${Ce}`)})})]})]}),!X&&l.jsx("div",{onClick:()=>C(!0),style:{position:"fixed",bottom:"20px",right:"20px",width:"60px",height:"60px",background:"linear-gradient(135deg, #833ab4, #0259fa, #459afc)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",cursor:"pointer",zIndex:1e3,boxShadow:"0 8px 18px rgba(0,0,0,0.25)",transition:"transform 0.2s ease"},children:l.jsx(Cp,{size:30})}),X&&M&&l.jsxs("div",{style:{position:"fixed",bottom:"20px",right:"20px",width:"360px",height:"480px",background:"#fff",borderRadius:"16px",boxShadow:"0 12px 30px rgba(0,0,0,0.25)",zIndex:2e3,display:"flex",flexDirection:"column",overflow:"hidden"},children:[l.jsxs("div",{style:{padding:"14px",borderBottom:"1px solid #eee",display:"flex",justifyContent:"space-between",alignItems:"center",background:"#fafafa"},children:[l.jsx("strong",{children:M.name}),l.jsxs("div",{style:{display:"flex",gap:"10px"},children:[l.jsx("button",{onClick:()=>{C(!1),Xt("/all-chat",{state:{user:M,tab:"student"}})},style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px"},children:""}),l.jsx("button",{onClick:()=>C(!1),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:""})]})]}),l.jsxs("div",{style:{flex:1,padding:"12px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"6px",background:"#f9f9f9"},children:[B.length===0?l.jsxs("p",{style:{textAlign:"center",color:"#aaa"},children:["Start chatting with ",M.name]}):B.map(O=>{const ie=String(O.senderId)===String(L==null?void 0:L.userId);return l.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:ie?"flex-end":"flex-start",marginBottom:10},children:l.jsxs("div",{style:{maxWidth:"70%",background:ie?"#4facfe":"#fff",color:ie?"#fff":"#000",padding:"10px 14px",borderRadius:18,borderTopRightRadius:ie?0:18,borderTopLeftRadius:ie?18:0,boxShadow:"0 1px 3px rgba(0,0,0,0.1)",wordBreak:"break-word",cursor:"default",position:"relative"},children:[O.text," ",O.edited&&l.jsx("small",{style:{fontSize:10},children:" (edited)"}),l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:6,marginTop:6,fontSize:11,color:ie?"#fff":"#888"},children:[l.jsx("span",{style:{marginRight:6,fontSize:11,opacity:.9},children:aT(O.timeStamp)}),l.jsx("span",{children:oT(O.timeStamp)}),ie&&!O.deleted&&l.jsxs("span",{style:{display:"flex",gap:0,alignItems:"center"},children:[l.jsx(ao,{size:12,color:ie?"#fff":"#888",style:{opacity:.85,marginLeft:6}}),O.seen&&l.jsx(ao,{size:12,color:ie?"#f3f7f8":"#ccc",style:{marginLeft:2,opacity:.95}})]})]})]})},O.messageId||O.id)}),l.jsx("div",{ref:D})]}),l.jsxs("div",{style:{padding:"10px",borderTop:"1px solid #eee",display:"flex",gap:"8px",background:"#fff"},children:[l.jsx("input",{value:re,onChange:O=>se(O.target.value),placeholder:"Type a message...",style:{flex:1,padding:"10px 14px",borderRadius:"25px",border:"1px solid #ccc",outline:"none"},onKeyDown:O=>{O.key==="Enter"&&jl()}}),l.jsx("button",{onClick:()=>jl(),style:{width:45,height:45,borderRadius:"50%",background:"#4facfe",border:"none",color:"#fff",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},children:l.jsx(Dv,{})})]})]})]})]})]})]})}const uT="https://gojo-teacher-web.onrender.com/api",wn="https://ethiostore-17d9f-default-rtdb.firebaseio.com";function dT(){const[t,e]=y.useState(window.innerWidth>600),[n,r]=y.useState(null),[s,i]=y.useState([]),[o,c]=y.useState([]),[u,d]=y.useState(""),[f,p]=y.useState([]),[g,j]=y.useState({}),[v,N]=y.useState(!1),[R,b]=y.useState("semester2"),[_,w]=y.useState([]),[P,V]=y.useState(!1),[X,C]=y.useState([]),[x,E]=y.useState(null),[k,T]=y.useState(!1),A=Ln(),[I,J]=y.useState(!1),[Ee,q]=y.useState([]);y.useEffect(()=>{const D=()=>{window.innerWidth<=600?e(!1):e(!0)};return window.addEventListener("resize",D),D(),()=>window.removeEventListener("resize",D)},[]),y.useEffect(()=>{const D=JSON.parse(localStorage.getItem("teacher"));if(!D){A("/login");return}r(D)},[A]);const ge=n==null?void 0:n.userId;y.useEffect(()=>{n&&ue(n)},[n]),y.useEffect(()=>{if(!u)return;(async()=>{try{const W=await Z.get(`${wn}/ClassMarks/${u}.json`),$=s.find(ye=>ye.id===u);if(!$)return;const ee=o.filter(ye=>ye.grade===$.grade&&ye.section===$.section),ne={};let he=[];ee.forEach(ye=>{var xe,fe;const Se=(fe=(xe=W.data)==null?void 0:xe[ye.id])==null?void 0:fe[R];Se!=null&&Se.assessments?(ne[ye.id]=Se.assessments,he.length||(he=Object.values(Se.assessments))):ne[ye.id]={}}),j(ne),p(he.map(ye=>({name:ye.name,max:ye.max}))),N(he.length>0)}catch(W){console.error("Error loading marks:",W),N(!1),j({})}})()},[u,s,o,R]),y.useEffect(()=>{if(!n)return;(async()=>{try{const[W,$,ee]=await Promise.all([Z.get(`${wn}/TeacherAssignments.json`),Z.get(`${wn}/Courses.json`),Z.get(`${wn}/Teachers.json`)]),ne=Object.entries(ee.data||{}).find(([xe,fe])=>fe.userId===ge);if(!ne)return;const he=ne[0],ye=Object.values(W.data||{}).filter(xe=>xe.teacherId===he).map(xe=>xe.courseId),Se=Object.entries($.data||{}).filter(([xe])=>ye.includes(xe)).map(([xe,fe])=>({id:xe,...fe}));i(Se)}catch(W){console.error("Error fetching courses:",W)}})()},[n,ge]),y.useEffect(()=>{if(!ge)return;(async()=>{try{const[W,$]=await Promise.all([Z.get(`${wn}/Students.json`),Z.get(`${wn}/Users.json`)]),ee=W.data||{},ne=$.data||{},he=Object.entries(ee).map(([ye,Se])=>{var xe,fe;return{id:ye,...Se,name:((xe=ne==null?void 0:ne[Se.userId])==null?void 0:xe.name)||"Unknown",profileImage:((fe=ne==null?void 0:ne[Se.userId])==null?void 0:fe.profileImage)||"/default-profile.png"}});c(he)}catch(W){console.error("Error fetching students:",W),c([])}})()},[ge]),y.useEffect(()=>{u&&(p([]),N(!1),j({}))},[u]);const G=()=>p(D=>[...D,{name:"",max:""}]),U=(D,W,$)=>{const ee=[...f];ee[D][W]=$,p(ee)},te=D=>p(W=>W.filter(($,ee)=>ee!==D)),z=async()=>{if(f.reduce((W,$)=>W+Number($.max||0),0)!==100){alert("Total MAX must be exactly 100");return}const D={};f.forEach((W,$)=>{D[`a${$+1}`]={name:W.name,max:Number(W.max),score:0}});try{const W=s.find(ne=>ne.id===u);if(!W)return;const $=o.filter(ne=>ne.grade===W.grade&&ne.section===W.section);await Promise.all($.map(ne=>Z.put(`${wn}/ClassMarks/${u}/${ne.id}/${R}.json`,{teacherName:n.name,assessments:D})));const ee={};$.forEach(ne=>{ee[ne.id]=D}),j(ee),N(!0),alert("Assessment structure saved!")}catch(W){console.error("Error submitting structure:",W),alert("Failed to submit structure")}},ae=(D,W,$)=>{j(ee=>({...ee,[D]:{...ee[D],[W]:{...ee[D][W],score:Number($)}}}))},_e=async D=>{try{await Z.put(`${wn}/ClassMarks/${u}/${D}/${R}.json`,{teacherName:n.name,assessments:g[D]}),alert("Marks saved successfully")}catch(W){console.error("Save failed:",W),alert("Failed to save marks")}},we=()=>{localStorage.removeItem("teacher"),A("/login")};y.useEffect(()=>{(async()=>{try{let $=(await Z.get(`${uT}/get_posts`)).data||[];!Array.isArray($)&&typeof $=="object"&&($=Object.values($));const[ee,ne]=await Promise.all([Z.get(`${wn}/School_Admins.json`),Z.get(`${wn}/Users.json`)]),he=ee.data||{},ye=ne.data||{},Se=JSON.parse(localStorage.getItem("teacher")),xe=M(Se==null?void 0:Se.userId),fe=Pe=>{const qe=Pe.adminId||Pe.posterAdminId||Pe.poster||Pe.admin||null;if(qe&&he[qe]){const ot=he[qe],$t=ot.userId,Ye=ye[$t]||null,Dt=Ye&&Ye.name||ot.name||Pe.adminName||"Admin",Qt=Ye&&Ye.profileImage||ot.profileImage||Pe.adminProfile||"/default-profile.png";return{name:Dt,profile:Qt}}return{name:Pe.adminName||"Admin",profile:Pe.adminProfile||"/default-profile.png"}},De=$.slice().sort((Pe,qe)=>(qe.time?new Date(qe.time).getTime():0)-(Pe.time?new Date(Pe.time).getTime():0)).filter(Pe=>Pe.postId&&!xe.includes(Pe.postId)).slice(0,5).map(Pe=>{var ot;const qe=fe(Pe);return{type:"post",id:Pe.postId,title:((ot=Pe.message)==null?void 0:ot.substring(0,50))||"Untitled post",adminName:qe.name,adminProfile:qe.profile}});let At=[];try{const Pe=Se;if(Pe&&Pe.userId){const[qe,ot]=await Promise.all([Z.get(`${wn}/Chats.json`),Z.get(`${wn}/Users.json`)]),$t=qe.data||{},Dt=ot.data||{}||{},Qt={};Object.entries(Dt).forEach(([xt,Wt])=>{Wt&&Wt.userId&&(Qt[Wt.userId]=xt)}),At=Object.entries($t).map(([xt,Wt])=>{const Fs=(Wt.unread||{})[Pe.userId]||0;if(!Fs)return null;const zs=Wt.participants||{},Jt=Object.keys(zs||{}).find(zn=>zn!==Pe.userId);if(!Jt)return null;let Fn=Jt,ct=Dt[Fn];if(!ct){const zn=Qt[Jt];zn&&(Fn=zn,ct=Dt[zn])}ct||(ct={userId:Jt,name:Jt,profileImage:"/default-profile.png"});const jr={pushKey:Fn,userId:ct.userId||Jt,name:ct.name||ct.username||Jt,profileImage:ct.profileImage||ct.profile||"/default-profile.png"},dn=Wt.lastMessage||{};return{type:"message",chatId:xt,displayName:jr.name,profile:jr.profileImage,lastMessageText:dn.text||"",lastMessageTime:dn.timeStamp||dn.time||null,unreadForMe:Fs}}).filter(Boolean).sort((xt,Wt)=>(Wt.lastMessageTime||0)-(xt.lastMessageTime||0))}}catch(Pe){console.error("Error fetching message notifications:",Pe)}w([...De,...At]),C(At)}catch(W){console.error("Error fetching notifications:",W)}})()},[]);const ue=async(D=n)=>{try{const W=D||JSON.parse(localStorage.getItem("teacher"));if(!W||!W.userId){q([]);return}const[$,ee]=await Promise.all([Z.get(`${wn}/Chats.json`),Z.get(`${wn}/Users.json`)]),ne=$.data||{},ye=ee.data||{}||{},Se={};Object.entries(ye).forEach(([fe,De])=>{De&&De.userId&&(Se[De.userId]=fe)});const xe=Object.entries(ne).map(([fe,De])=>{const Pe=(De.unread||{})[W.userId]||0;if(!Pe)return null;const qe=De.participants||{},ot=Object.keys(qe||{}).find(xt=>xt!==W.userId);if(!ot)return null;let $t=ot,Ye=ye[$t];if(!Ye){const xt=Se[ot];xt&&($t=xt,Ye=ye[xt])}Ye||(Ye={userId:ot,name:ot,profileImage:"/default-profile.png"});const Dt={pushKey:$t,userId:Ye.userId||ot,name:Ye.name||Ye.username||ot,profileImage:Ye.profileImage||Ye.profile||"/default-profile.png"},Qt=De.lastMessage||{};return{chatId:fe,contact:Dt,displayName:Dt.name,profile:Dt.profileImage,lastMessageText:Qt.text||"",lastMessageTime:Qt.timeStamp||Qt.time||null,unreadForMe:Pe}}).filter(Boolean).sort((fe,De)=>(De.lastMessageTime||0)-(fe.lastMessageTime||0));q(xe)}catch(W){console.error("Error fetching conversations:",W),q([])}},L=X.reduce((D,W)=>D+(W.unreadForMe||0),0),ce=D=>{!n||!D||(Ie(n.userId,D),w(W=>W.filter($=>$.id!==D)),V(!1))};function M(D){return JSON.parse(localStorage.getItem(`seen_posts_${D}`))||[]}function Ie(D,W){const $=M(D);$.includes(W)||localStorage.setItem(`seen_posts_${D}`,JSON.stringify([...$,W]))}const Q=y.useRef(null),[me,B]=y.useState(!1),[Y,re]=y.useState(!1),se=()=>{const D=Q.current;if(!D)return;const{scrollLeft:W,scrollWidth:$,clientWidth:ee}=D;B(W>8),re(W+ee<$-8)};return y.useEffect(()=>{const D=Q.current;if(!D)return;se();const W=()=>se(),$=()=>se();return D.addEventListener("scroll",W,{passive:!0}),window.addEventListener("resize",$),()=>{D.removeEventListener("scroll",W),window.removeEventListener("resize",$)}},[v,f.length]),y.useEffect(()=>{const D="responsive-marks-table-style";if(document.getElementById(D))return;const W=document.createElement("style");W.id=D,W.innerHTML=`
      @media (max-width: 600px) {
        .google-main {
          margin-left: 0 !important;
          padding-left: 0 !important;
          width: 100vw !important;
          max-width: 100vw !important;
          overflow-x: auto !important;
        }
        .marks-table-wrapper {
          width: 100vw !important;
          max-width: 100vw !important;
          overflow-x: auto !important;
          padding: 0 2vw !important;
        }
        .marks-table {
          min-width: 600px !important;
          width: auto !important;
          max-width: 100vw !important;
          table-layout: auto !important;
          overflow-x: auto !important;
        }
        .marks-table th, .marks-table td {
          font-size: 12px !important;
          padding: 8px !important;
          white-space: normal !important;
        }
        .marks-table td input {
          min-width: 40px;
          width: 100%;
          font-size: 12px;
          padding: 8px;
        }
      }
    `,document.head.appendChild(W)},[]),l.jsxs("div",{className:"dashboard-page",children:[l.jsxs("nav",{className:"top-navbar",children:[window.innerWidth<=600&&!t&&l.jsx("button",{className:"sidebar-arrow-btn",style:{position:"fixed",left:0,top:180,transform:"none",zIndex:1300,background:"#fff",border:"none",borderRadius:"0 8px 8px 0",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",padding:8,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:()=>e(!0),"aria-label":"Open sidebar menu",children:l.jsx(js,{size:22})}),l.jsx("h2",{children:"Gojo Dashboard"}),l.jsxs("div",{className:"nav-right",children:[l.jsxs("div",{className:"icon-circle",style:{position:"relative"},children:[l.jsxs("div",{onClick:()=>V(!P),style:{cursor:"pointer",position:"relative"},"aria-label":"Show notifications",tabIndex:0,role:"button",onKeyPress:D=>{D.key==="Enter"&&V(!P)},children:[l.jsx(Ls,{size:24}),_.length+L>0&&l.jsx("span",{style:{position:"absolute",top:-5,right:-5,background:"red",color:"white",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:_.length+L})]}),P&&l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.08)",zIndex:1999},onClick:()=>V(!1)}),l.jsxs("div",{className:"notification-popup",style:typeof window<"u"&&window.innerWidth<=600?{position:"fixed",left:"50%",top:"8%",transform:"translate(-50%, 0)",width:"90vw",maxWidth:340,zIndex:2e3,background:"#fff",borderRadius:12,boxShadow:"0 2px 16px rgba(0,0,0,0.18)",maxHeight:"70vh",overflowY:"auto",padding:12}:{position:"absolute",top:30,right:0,width:300,maxHeight:400,overflowY:"auto",background:"#fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",borderRadius:8,zIndex:100},children:[_.length>0&&_.map((D,W)=>D.type==="post"?l.jsxs("div",{onClick:()=>ce(D.id),style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[l.jsx("img",{src:D.adminProfile,alt:D.adminName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),l.jsxs("div",{children:[l.jsx("strong",{children:D.adminName}),l.jsx("p",{style:{margin:0,fontSize:12},children:D.title})]})]},D.id||W):null),L>0&&Ee.filter(D=>D.unreadForMe>0).map((D,W)=>l.jsxs("div",{onClick:()=>{V(!1),A("/all-chat")},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[l.jsx("img",{src:D.profile||"/default-profile.png",alt:D.displayName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),l.jsxs("div",{children:[l.jsx("strong",{children:D.displayName}),l.jsx("p",{style:{margin:0,fontSize:12,color:"#0b78f6"},children:"New message"})]})]},D.chatId||W)),_.length===0&&L===0&&l.jsx("div",{style:{padding:15},children:"No notifications"})]})]})]}),l.jsx("div",{className:"icon-circle",style:{position:"relative",marginLeft:12},children:l.jsxs("div",{onClick:()=>A("/all-chat"),style:{cursor:"pointer",position:"relative"},children:[l.jsx(Ms,{size:22}),L>0&&l.jsx("span",{style:{position:"absolute",top:-6,right:-6,background:"#f60b0b",color:"#fff",borderRadius:"50%",minWidth:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 6px"},children:L})]})}),l.jsx("div",{className:"icon-circle",onClick:()=>A("/settings"),children:l.jsx(Cr,{})}),l.jsx("img",{src:(n==null?void 0:n.profileImage)||"/default-profile.png",alt:"profile"})]})]}),l.jsxs("div",{className:"google-dashboard",children:[window.innerWidth<=600&&t&&l.jsx("div",{className:"sidebar-overlay visible",onClick:()=>e(!1),style:{display:"block"}}),l.jsxs("div",{className:`google-sidebar${t?" open":""}`,style:window.innerWidth<=600?{position:"fixed",top:64,left:t?0:"-220px",width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",zIndex:1200,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto",transition:"left 0.25s cubic-bezier(.4,0,.2,1)"}:{position:"fixed",top:64,left:0,width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.04)",zIndex:900,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto"},children:[n&&l.jsxs("div",{className:"sidebar-profile",children:[l.jsx("div",{className:"sidebar-img-circle",children:l.jsx("img",{src:n.profileImage||"/default-profile.png",alt:"profile"})}),l.jsx("h3",{children:n.name}),l.jsx("p",{children:n.username})]}),l.jsxs("div",{className:"sidebar-menu",children:[l.jsxs(ve,{className:"sidebar-btn",to:"/dashboard",children:[l.jsx(Yr,{})," Home"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/students",children:[l.jsx(Ke,{})," Students"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/admins",children:[l.jsx(Ke,{})," Admins"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/parents",children:[l.jsx(qr,{})," Parents"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/marks",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[l.jsx(Er,{})," Marks"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/attendance",children:[l.jsx(Ke,{})," Attendance"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/schedule",children:[l.jsx(Ke,{})," Schedule"]}),l.jsxs("button",{className:"sidebar-btn logout-btn",onClick:we,children:[l.jsx(Qr,{})," Logout"]})]})]}),l.jsx("div",{className:"google-main",style:window.innerWidth<=600?{width:"100vw",maxWidth:"100vw",marginLeft:0,paddingLeft:0}:{textAlign:"left",marginLeft:200,paddingLeft:0},children:l.jsxs("div",{className:"main-inner",children:[l.jsx("h2",{style:{textAlign:"center",marginBottom:"35px",color:"#1e3a8a",fontSize:"36px",fontWeight:"700",letterSpacing:"1px"},children:"Marks Entry Dashboard"}),l.jsxs("div",{style:{marginBottom:"30px",display:"flex",justifyContent:"center",alignItems:"center",gap:"15px"},children:[l.jsx("label",{style:{fontWeight:"600",color:"#374151",fontSize:"16px"},children:"Select Course:"}),l.jsxs("select",{value:u,onChange:D=>d(D.target.value),style:{padding:"12px 18px",borderRadius:"12px",border:"1px solid #cbd5e1",background:"#fff",minWidth:"300px",fontSize:"15px",fontWeight:"500",boxShadow:"0 6px 15px rgba(0,0,0,0.08)",transition:"0.3s all"},children:[l.jsx("option",{value:"",children:"-- Select Course --"}),s.map(D=>l.jsxs("option",{value:D.id,children:[D.subject," - Grade ",D.grade," Section ",D.section]},D.id))]})]}),u&&l.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"40px",marginBottom:"35px",borderBottom:"2px solid #c7d2fe",paddingBottom:"10px"},children:["semester1","semester2"].map(D=>{const W=R===D;return l.jsxs("button",{onClick:()=>{b(D),N(!1),p([]),j({})},style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px",fontWeight:"700",letterSpacing:"1px",color:W?"#1e40af":"#6b7280",paddingBottom:"12px",position:"relative",transition:"0.3s all"},children:[D==="semester1"?"Semester 1":"Semester 2",W&&l.jsx("span",{style:{position:"absolute",left:0,bottom:"-2px",width:"100%",height:"4px",borderRadius:"6px",background:"linear-gradient(135deg, #4b6cb7, #1e40af)"}})]},D)})}),v&&l.jsxs("button",{style:{marginBottom:"30px",padding:"10px 18px",background:"linear-gradient(135deg, #f59e0b, #d97706)",color:"#fff",borderRadius:"12px",border:"none",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",boxShadow:"0 8px 20px rgba(0,0,0,0.15)",transition:"0.3s all"},onClick:()=>{N(!1),j({})},children:[l.jsx(bI,{})," Edit Assessment Structure"]}),u&&!v&&l.jsxs("div",{style:{backdropFilter:"blur(15px)",background:"rgba(255, 255, 255, 0.85)",padding:"30px",borderRadius:"20px",boxShadow:"0 15px 30px rgba(0,0,0,0.08)",marginBottom:"40px",transition:"all 0.3s ease"},children:[l.jsx("h3",{style:{marginBottom:"25px",color:"#1f2937",fontWeight:"600",fontSize:"20px"},children:"Assessment Structure"}),f.map((D,W)=>l.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"18px",alignItems:"center"},children:[l.jsx("input",{placeholder:"Assessment Name",value:D.name,onChange:$=>U(W,"name",$.target.value),style:{flex:2,padding:"12px 14px",borderRadius:"12px",border:"1px solid #d1d5db",outline:"none",boxShadow:"inset 0 3px 6px rgba(0,0,0,0.06)",fontWeight:"500"}}),l.jsx("input",{type:"number",placeholder:"Max",value:D.max,onChange:$=>U(W,"max",$.target.value),style:{flex:1,padding:"12px 14px",borderRadius:"12px",border:"1px solid #d1d5db",outline:"none",boxShadow:"inset 0 3px 6px rgba(0,0,0,0.06)",fontWeight:"500"}}),l.jsx("button",{onClick:()=>te(W),style:{background:"#ef4444",color:"#fff",padding:"12px 14px",borderRadius:"12px",border:"none",cursor:"pointer",boxShadow:"0 6px 15px rgba(0,0,0,0.12)",transition:"0.3s all"},children:l.jsx(jI,{})})]},W)),l.jsxs("div",{style:{display:"flex",gap:"20px",alignItems:"center",marginTop:"20px"},children:[l.jsxs("button",{style:{padding:"12px 20px",borderRadius:"14px",background:"#10b981",color:"#fff",border:"none",cursor:"pointer",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 6px 18px rgba(0,0,0,0.12)",transition:"0.3s all"},onClick:G,children:[l.jsx(CI,{})," Add Assessment"]}),l.jsxs("span",{style:{fontWeight:"600",color:"#374151",fontSize:"16px"},children:["Total Max: ",f.reduce((D,W)=>D+Number(W.max||0),0)," / 100"]})]}),l.jsx("button",{style:{marginTop:"30px",padding:"14px 20px",borderRadius:"16px",background:"linear-gradient(135deg, #4b6cb7, #1e40af)",color:"#fff",border:"none",fontWeight:"600",cursor:"pointer",boxShadow:"0 8px 20px rgba(0,0,0,0.15)",transition:"0.3s all",fontSize:"16px"},onClick:z,children:"Submit Structure"})]}),v&&l.jsx("div",{className:"marks-table-wrapper",ref:Q,style:{position:"relative",overflowX:"visible",overflowY:"visible",minHeight:120,width:"100%",maxWidth:"100vw",paddingBottom:32,whiteSpace:"normal"},children:l.jsxs("table",{className:"marks-table",style:{borderCollapse:"separate",borderSpacing:"0 12px",fontSize:"15px",minWidth:0,width:"100%",maxWidth:"100vw",tableLayout:"auto"},children:[l.jsx("thead",{children:l.jsxs("tr",{style:{background:"linear-gradient(135deg, #4b6cb7, #1e3a8a)",color:"#fff",borderRadius:"16px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",textTransform:"uppercase",letterSpacing:"1px",fontWeight:"600",fontSize:"14px"},children:[l.jsx("th",{style:{padding:"16px 20px",textAlign:"left",borderRadius:"16px 0 0 16px",background:"rgba(255,255,255,0.1)"},children:l.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx(Ke,{})," Student"]})}),f.map((D,W)=>l.jsxs("th",{style:{padding:"16px 18px",background:"rgba(255,255,255,0.05)",textAlign:"center",transition:"0.3s all"},children:[D.name," (",D.max,")"]},W)),l.jsx("th",{style:{padding:"16px 18px",background:"rgba(255,255,255,0.05)",textAlign:"center"},children:"Total"}),l.jsx("th",{style:{padding:"16px 18px",background:"rgba(255,255,255,0.05)",textAlign:"center"},children:"Grade"}),l.jsxs("th",{style:{padding:"16px 20px",borderRadius:"0 16px 16px 0",background:"rgba(255,255,255,0.1)",textAlign:"center"},children:[l.jsx(_0,{})," Save"]})]})}),l.jsx("tbody",{children:Object.entries(g).map(([D,W])=>{const $=Object.values(W).reduce((ye,Se)=>ye+(Se.score||0),0),ee=$>=90?"A":$>=80?"B":$>=70?"C":$>=60?"D":"F",ne=o.find(ye=>ye.id===D),he=ee==="A"?"#16a34a":ee==="B"?"#2563eb":ee==="C"?"#f59e0b":ee==="D"?"#f97316":"#ef4444";return l.jsxs("tr",{style:{background:"#f9fafb",borderRadius:"12px",marginBottom:"10px",transition:"0.3s all",cursor:"pointer"},onMouseEnter:ye=>ye.currentTarget.style.background="#e0e7ff",onMouseLeave:ye=>ye.currentTarget.style.background="#f9fafb",children:[l.jsxs("td",{style:{padding:"12px",display:"flex",alignItems:"center",gap:"12px",fontWeight:"600"},children:[l.jsx("div",{style:{width:"45px",height:"45px",borderRadius:"50%",overflow:"hidden",border:"2px solid #4b6cb7"},children:l.jsx("img",{src:(ne==null?void 0:ne.profileImage)||"/default-profile.png",alt:ne==null?void 0:ne.name,style:{width:"100%",height:"100%",objectFit:"cover"}})}),ne==null?void 0:ne.name]}),Object.entries(W).map(([ye,Se])=>l.jsx("td",{style:{padding:"12px"},children:l.jsx("input",{type:"number",min:"0",max:Se.max,value:Se.score,onChange:xe=>ae(D,ye,xe.target.value),style:{width:"70px",padding:"8px 12px",borderRadius:"10px",border:"1px solid #cbd5e1",textAlign:"center",boxShadow:"inset 0 3px 6px rgba(0,0,0,0.06)",transition:"0.3s all",fontWeight:"500"}})},ye)),l.jsx("td",{style:{padding:"12px",fontWeight:"600"},children:$}),l.jsx("td",{style:{padding:"12px",fontWeight:"700",color:he},children:ee}),l.jsx("td",{style:{padding:"12px"},children:l.jsx("button",{style:{padding:"8px 14px",borderRadius:"12px",background:"#2563eb",color:"#fff",border:"none",cursor:"pointer",transition:"0.3s all"},onClick:()=>_e(D),onMouseEnter:ye=>ye.currentTarget.style.background="#1e40af",onMouseLeave:ye=>ye.currentTarget.style.background="#2563eb",children:l.jsx(_0,{})})})]},D)})})]})})]})})]})]})}const Hs="https://ethiostore-17d9f-default-rtdb.firebaseio.com";function hT(){const[t,e]=y.useState(window.innerWidth>600),[n,r]=y.useState([]),[s,i]=y.useState(!0),[o,c]=y.useState(""),[u,d]=y.useState(null),[f,p]=y.useState({}),[g,j]=y.useState(new Date().toISOString().split("T")[0]),[v,N]=y.useState(null),[R,b]=y.useState([]),_=Ln(),[w,P]=y.useState([]),[V,X]=y.useState(!1),[C,x]=y.useState([]),[E,k]=y.useState([]),[T,A]=y.useState(!1);y.useEffect(()=>{const q=()=>{e(window.innerWidth>600)};return window.addEventListener("resize",q),q(),()=>window.removeEventListener("resize",q)},[]),y.useEffect(()=>{const q=JSON.parse(localStorage.getItem("teacher"));if(!q){_("/login");return}d(q)},[_]),y.useEffect(()=>{if(!u)return;(async()=>{try{const[ge,G,U]=await Promise.all([Z.get(`${Hs}/TeacherAssignments.json`),Z.get(`${Hs}/Courses.json`),Z.get(`${Hs}/Teachers.json`)]),te=Object.entries(U.data||{}).find(([,we])=>we.userId===u.userId);if(!te)return;const z=te[0],ae=Object.values(ge.data||{}).filter(we=>we.teacherId===z).map(we=>we.courseId),_e=Object.entries(G.data||{}).filter(([we])=>ae.includes(we)).map(([we,ue])=>({id:we,...ue}));b(_e),!v&&_e.length>0&&N(_e[0])}catch(ge){console.error("Error fetching courses:",ge)}})()},[u]),y.useEffect(()=>{if(!v)return;(async()=>{i(!0);try{const[ge,G]=await Promise.all([Z.get(`${Hs}/Students.json`),Z.get(`${Hs}/Users.json`)]),U=ge.data||{},te=G.data||{},z=Object.entries(U).filter(([,ae])=>ae.grade===v.grade&&ae.section===v.section).map(([ae,_e])=>{var we,ue;return{studentId:ae,..._e,name:((we=te==null?void 0:te[_e.userId])==null?void 0:we.name)||"Unknown",profileImage:((ue=te==null?void 0:te[_e.userId])==null?void 0:ue.profileImage)||"/default-profile.png"}});r(z),c("")}catch{c("Failed to fetch students. Please try again."),r([])}finally{i(!1)}})()},[v]),y.useEffect(()=>{if(!v)return;(async()=>{try{const ge=await Z.get(`${Hs}/Attendance/${v.id}/${g}.json`);p(ge.data||{})}catch{p({})}})()},[v,g]);const I=(q,ge)=>{p(G=>({...G,[q]:ge}))},J=async()=>{if(!v){alert("Please select a course");return}try{await Z.put(`${Hs}/Attendance/${v.id}/${g}.json`,f),alert("Attendance saved successfully!")}catch{alert("Failed to save attendance")}},Ee=()=>{localStorage.removeItem("teacher"),_("/login")};return y.useEffect(()=>{const q="responsive-attendance-table";if(document.getElementById(q))return;const ge=document.createElement("style");ge.id=q,ge.innerHTML=`
      @media (max-width: 600px) {
        .attendance-main-content-responsive {
          margin-left: 0 !important;
          width: 100vw !important;
          max-width: 100vw !important;
          padding: 8px 2vw !important;
          border-radius: 0 !important;
        }
        .attendance-table-wrapper {
          width: 100vw !important;
          max-width: 100vw !important;
          overflow-x: auto !important;
          padding: 0 1vw !important;
          background: #fff !important;
        }
        .attendance-table {
          min-width: 480px !important;
          width: auto !important;
          max-width: 100vw !important;
          table-layout: auto !important;
          overflow-x: auto !important;
          background: #fff !important;
        }
        .attendance-table th, .attendance-table td {
          font-size: 13px !important;
          padding: 7px !important;
          white-space: normal !important;
        }
      }
    `,document.head.appendChild(ge)},[]),l.jsxs("div",{className:"dashboard-page",children:[l.jsxs("nav",{className:"top-navbar",children:[window.innerWidth<=600&&!t&&l.jsx("button",{className:"sidebar-arrow-btn",style:{position:"fixed",left:0,top:180,transform:"none",zIndex:1300,background:"#fff",border:"none",borderRadius:"0 8px 8px 0",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",padding:8,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:()=>e(!0),"aria-label":"Open sidebar menu",children:l.jsx(js,{size:22})}),l.jsx("h2",{children:"Gojo Dashboard"}),l.jsxs("div",{className:"nav-right",children:[l.jsx("div",{className:"icon-circle",onClick:()=>_("/settings"),children:l.jsx(Cr,{})}),l.jsx("img",{src:(u==null?void 0:u.profileImage)||"/default-profile.png",alt:"teacher",className:"profile-img"})]})]}),l.jsxs("div",{className:"google-dashboard",children:[window.innerWidth<=600&&t&&l.jsx("div",{className:"sidebar-overlay visible",onClick:()=>e(!1),style:{display:"block"}}),l.jsxs("div",{className:`google-sidebar${t?" open":""}`,style:window.innerWidth<=600?{position:"fixed",top:54,left:t?0:"-220px",width:200,height:"calc(100vh - 54px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",zIndex:1200,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto",transition:"left 0.25s cubic-bezier(.4,0,.2,1)"}:{position:"fixed",top:64,left:0,width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.04)",zIndex:900,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto"},children:[u&&l.jsxs("div",{className:"sidebar-profile",children:[l.jsx("div",{className:"sidebar-img-circle",children:l.jsx("img",{src:u.profileImage||"/default-profile.png",alt:"profile"})}),l.jsx("h3",{children:u.name}),l.jsx("p",{children:u.username})]}),l.jsxs("div",{className:"sidebar-menu",children:[l.jsxs(ve,{className:"sidebar-btn",to:"/dashboard",children:[l.jsx(Yr,{})," Home"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/students",children:[l.jsx(Ke,{})," Students"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/admins",children:[l.jsx(Ke,{})," Admins"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/parents",children:[l.jsx(qr,{})," Parents"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/marks",children:[l.jsx(Er,{})," Marks"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/attendance",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[l.jsx(Ke,{})," Attendance"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/schedule",children:[l.jsx(Ke,{})," Schedule"]}),l.jsxs("button",{className:"sidebar-btn logout-btn",onClick:Ee,children:[l.jsx(Qr,{})," Logout"]})]})]}),l.jsxs("div",{className:"attendance-main-content-responsive",style:window.innerWidth<=600?{marginLeft:0,width:"100vw",maxWidth:"100vw",padding:"8px 2vw"}:{marginLeft:220,width:"calc(100vw - 240px)",padding:30},children:[l.jsx("h2",{style:{textAlign:"center",marginBottom:"25px",color:"#333"},children:"Attendance"}),l.jsxs("div",{style:{marginBottom:"20px",display:"flex",alignItems:"center",gap:"15px"},children:[l.jsx("label",{style:{fontWeight:"500",color:"#555"},children:"Select Course:"}),l.jsxs("select",{value:(v==null?void 0:v.id)||"",onChange:q=>{const ge=R.find(G=>G.id===q.target.value);N(ge||null)},style:{padding:"8px 12px",borderRadius:"8px",border:"1px solid #ccc",outline:"none",background:"#f9f9f9",minWidth:"200px",fontWeight:"500"},children:[l.jsx("option",{value:"",children:"-- Select Course --"}),R.map(q=>l.jsxs("option",{value:q.id,children:[q.name," - Grade ",q.grade," Section ",q.section]},q.id))]})]}),l.jsxs("div",{style:{marginBottom:"25px",display:"flex",alignItems:"center",gap:"15px"},children:[l.jsx("label",{style:{fontWeight:"500",color:"#555"},children:"Date:"}),l.jsx("input",{type:"date",value:g,onChange:q=>j(q.target.value),style:{padding:"8px 12px",borderRadius:"8px",border:"1px solid #ccc",outline:"none",background:"#f9f9f9"}})]}),l.jsx("div",{className:"attendance-table-wrapper",style:{width:"100%",maxWidth:"100vw",overflowX:"auto",marginBottom:20,background:"#fff",borderRadius:12,boxShadow:"0 2px 8px rgba(0,0,0,0.04)"},children:s?l.jsx("p",{children:"Loading students..."}):o?l.jsx("p",{style:{color:"red"},children:o}):l.jsxs("table",{className:"attendance-table",style:{width:"100%",borderCollapse:"collapse",background:"#fff"},children:[l.jsx("thead",{children:l.jsxs("tr",{style:{background:"#4b6cb7",color:"#fff",textAlign:"left"},children:[l.jsx("th",{style:{padding:"12px"},children:"Student"}),l.jsx("th",{style:{padding:"12px",textAlign:"center"},children:"Present"}),l.jsx("th",{style:{padding:"12px",textAlign:"center"},children:"Absent"}),l.jsx("th",{style:{padding:"12px",textAlign:"center"},children:"Late"})]})}),l.jsx("tbody",{children:n.map(q=>l.jsxs("tr",{style:{borderBottom:"1px solid #eee",transition:"background 0.3s"},onMouseEnter:ge=>ge.currentTarget.style.background="#f9f9f9",onMouseLeave:ge=>ge.currentTarget.style.background="transparent",children:[l.jsxs("td",{style:{padding:"12px",display:"flex",alignItems:"center",gap:"12px"},children:[l.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",overflow:"hidden",border:"2px solid #4b6cb7"},children:l.jsx("img",{src:q.profileImage||"/default-profile.png",alt:q.name,style:{width:"100%",height:"100%",objectFit:"cover"}})}),l.jsx("span",{style:{fontWeight:"500",color:"#333"},children:q.name})]}),l.jsx("td",{style:{padding:"10px",textAlign:"center"},children:l.jsx("button",{style:{background:f[q.studentId]==="present"?"#28a745":"#e0e0e0",color:f[q.studentId]==="present"?"#fff":"#333",padding:"6px 12px",border:"none",borderRadius:"6px",cursor:"pointer",transition:"0.2s"},onClick:()=>I(q.studentId,"present"),children:"Present"})}),l.jsx("td",{style:{padding:"10px",textAlign:"center"},children:l.jsx("button",{style:{background:f[q.studentId]==="absent"?"#dc3545":"#e0e0e0",color:f[q.studentId]==="absent"?"#fff":"#333",padding:"6px 12px",border:"none",borderRadius:"6px",cursor:"pointer",transition:"0.2s"},onClick:()=>I(q.studentId,"absent"),children:"Absent"})}),l.jsx("td",{style:{padding:"10px",textAlign:"center"},children:l.jsx("button",{style:{background:f[q.studentId]==="late"?"#ffc107":"#e0e0e0",color:f[q.studentId]==="late"?"#fff":"#333",padding:"6px 12px",border:"none",borderRadius:"6px",cursor:"pointer",transition:"0.2s"},onClick:()=>I(q.studentId,"late"),children:"Late"})})]},q.studentId))})]})}),l.jsx("div",{style:{textAlign:"center"},children:l.jsx("button",{style:{marginTop:"18px",padding:"12px 25px",borderRadius:"10px",background:"#4b6cb7",color:"#fff",fontWeight:"600",border:"none",cursor:"pointer",boxShadow:"0 4px 10px rgba(0,0,0,0.15)",transition:"0.3s"},onClick:J,onMouseEnter:q=>q.currentTarget.style.background="#3a539b",onMouseLeave:q=>q.currentTarget.style.background="#4b6cb7",children:"Save Attendance"})})]})]})]})}const Ry=(t,e)=>[t,e].sort().join("_"),fT=t=>{if(!t)return"";const e=new Date(t),n=e.getHours().toString().padStart(2,"0"),r=e.getMinutes().toString().padStart(2,"0");return`${n}:${r}`},pT="https://gojo-teacher-web.onrender.com/api",ss="https://ethiostore-17d9f-default-rtdb.firebaseio.com",mT=({admin:t,selected:e,onClick:n})=>l.jsxs("div",{onClick:()=>n(t),style:{width:"100%",borderRadius:"12px",padding:"15px",display:"flex",alignItems:"center",gap:"20px",cursor:"pointer",background:e?"#e0e7ff":"#fff",border:e?"2px solid #4b6cb7":"1px solid #ddd",boxShadow:e?"0 6px 15px rgba(75,108,183,0.3)":"0 4px 10px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},children:[l.jsx("img",{src:t.profileImage||"/default-profile.png",alt:t.name,style:{width:"50px",height:"50px",borderRadius:"50%",objectFit:"cover",border:e?"3px solid #4b6cb7":"3px solid red"}}),l.jsxs("div",{children:[l.jsx("h3",{style:{margin:0},children:t.name}),l.jsx("p",{style:{margin:"4px 0",color:"#555"},children:t.username||t.email})]})]});function gT(){const[t,e]=y.useState(!1),[n,r]=y.useState([]),[s,i]=y.useState(!0),[o,c]=y.useState(""),[u,d]=y.useState(null),[f,p]=y.useState("details"),[g,j]=y.useState(!1),[v,N]=y.useState([]),[R,b]=y.useState(""),_=y.useRef(null),[w,P]=y.useState(null),V=JSON.parse(localStorage.getItem("teacher"))||{},X=String(V.userId||""),[C,x]=y.useState(null),[E,k]=y.useState([]),[T,A]=y.useState(!1),[I,J]=y.useState(null),Ee=y.useRef({}),[q,ge]=y.useState(!1),[G,U]=y.useState([]),te=Ln();y.useEffect(()=>{const Q=JSON.parse(localStorage.getItem("teacher"));if(!Q){te("/login");return}P(Q)},[te]),y.useEffect(()=>{w&&we(w)},[w]);const z=()=>{localStorage.removeItem("teacher"),te("/login")};y.useEffect(()=>{async function Q(){try{i(!0);const[me,B]=await Promise.all([Z.get(`${ss}/Users.json`),Z.get(`${ss}/School_Admins.json`)]),Y=me.data||{},re=B.data||{},se={};Object.entries(re).forEach(([W,$])=>{$.userId&&(se[$.userId]={...$,adminKey:W})});const D=Object.entries(Y).filter(([W,$])=>{const ee=($.role||$.userType||"").toLowerCase();return ee==="admin"||ee==="school_admin"||ee==="school_admins"}).map(([W,$])=>{const ee=se[$.userId];return{adminId:ee&&ee.adminKey||W,...$,...ee?{title:ee.title,status:ee.status,schoolAdminKey:ee.adminKey}:{}}});r(D),c(D.length===0?"No admins found":"")}catch(me){console.error(me),c("Failed to fetch admins")}finally{i(!1)}}Q()},[]),y.useEffect(()=>{var Q;(Q=_.current)==null||Q.scrollIntoView({behavior:"smooth"})},[v]),y.useEffect(()=>{if(!X||!C)return;const Q=Ry(X,C.userId),me=Lt(Vt,`Chats/${Q}/messages`);return Ji(me,B=>{const Y=B.val()||{},re=Object.entries(Y).map(([se,D])=>({id:se,...D,isTeacher:D.senderId===X})).sort((se,D)=>se.timeStamp-D.timeStamp);N(re),Object.entries(Y).forEach(([se,D])=>{if(D&&!D.seen&&D.receiverId===X){const W=Date.now();Nr(Lt(Vt,`Chats/${Q}/messages/${se}`),{seen:!0,seenAt:W}).catch(()=>{})}}),Nr(Lt(Vt,`Chats/${Q}/unread`),{[X]:0}).catch(()=>{})}),()=>_w(me)},[X,C]);const ae=async()=>{if(!R.trim()||!u)return;const Q=X,me=u.userId,B=Ry(Q,me),Y=Date.now(),re={senderId:Q,receiverId:me,type:"text",text:R,imageUrl:null,replyTo:null,seen:!1,edited:!1,deleted:!1,timeStamp:Y};try{await Z.post(`${ss}/Chats/${B}/messages.json`,re),await Z.patch(`${ss}/Chats/${B}.json`,{participants:{[Q]:!0,[me]:!0},lastMessage:{text:R,senderId:Q,seen:!1,timeStamp:Y},unread:{[Q]:0,[me]:1}}),b("")}catch(se){console.error("Send message error:",se)}};y.useEffect(()=>{(async()=>{try{let B=(await Z.get(`${pT}/get_posts`)).data||[];!Array.isArray(B)&&typeof B=="object"&&(B=Object.values(B));const[Y,re]=await Promise.all([Z.get(`${ss}/School_Admins.json`),Z.get(`${ss}/Users.json`)]),se=Y.data||{},D=re.data||{},W=JSON.parse(localStorage.getItem("teacher")),$=_e(W==null?void 0:W.userId),ee=he=>{const ye=he.adminId||he.posterAdminId||he.poster||he.admin||null;if(ye&&se[ye]){const Se=se[ye],xe=Se.userId,fe=D[xe]||null,De=fe&&fe.name||Se.name||he.adminName||"Admin",At=fe&&fe.profileImage||Se.profileImage||he.adminProfile||"/default-profile.png";return{name:De,profile:At}}return{name:he.adminName||"Admin",profile:he.adminProfile||"/default-profile.png"}},ne=B.slice().sort((he,ye)=>{const Se=he.time?new Date(he.time).getTime():0;return(ye.time?new Date(ye.time).getTime():0)-Se}).filter(he=>he.postId&&!$.includes(he.postId)).slice(0,5).map(he=>{var Se;const ye=ee(he);return{id:he.postId,title:((Se=he.message)==null?void 0:Se.substring(0,50))||"Untitled post",adminName:ye.name,adminProfile:ye.profile}});k(ne)}catch(me){console.error("Error fetching notifications:",me)}})()},[]);function _e(Q){return JSON.parse(localStorage.getItem(`seen_posts_${Q}`))||[]}const we=async(Q=w)=>{try{const me=Q||JSON.parse(localStorage.getItem("teacher"));if(!me||!me.userId){U([]);return}const[B,Y]=await Promise.all([Z.get(`${ss}/Chats.json`),Z.get(`${ss}/Users.json`)]),re=B.data||{},D=Y.data||{}||{},W={};Object.entries(D).forEach(([ee,ne])=>{ne&&ne.userId&&(W[ne.userId]=ee)});const $=Object.entries(re).map(([ee,ne])=>{const ye=(ne.unread||{})[me.userId]||0;if(!ye)return null;const Se=ne.participants||{},xe=Object.keys(Se||{}).find(qe=>qe!==me.userId);if(!xe)return null;let fe=xe,De=D[fe];if(!De){const qe=W[xe];qe&&(fe=qe,De=D[qe])}De||(De={userId:xe,name:xe,profileImage:"/default-profile.png"});const At={pushKey:fe,userId:De.userId||xe,name:De.name||De.username||xe,profileImage:De.profileImage||De.profile||"/default-profile.png"},Pe=ne.lastMessage||{};return{chatId:ee,contact:At,displayName:At.name,profile:At.profileImage,lastMessageText:Pe.text||"",lastMessageTime:Pe.timeStamp||Pe.time||null,unreadForMe:ye}}).filter(Boolean).sort((ee,ne)=>(ne.lastMessageTime||0)-(ee.lastMessageTime||0));U($)}catch(me){console.error("Error fetching conversations:",me),U([])}},ue=G.reduce((Q,me)=>Q+(me.unreadForMe||0),0),[L,ce]=mn.useState(window.innerWidth<window.innerHeight),[M,Ie]=mn.useState(window.innerWidth);return mn.useEffect(()=>{const Q=()=>{const me=window.innerWidth;ce(me<window.innerHeight),Ie(me)};return Q(),window.addEventListener("resize",Q),()=>window.removeEventListener("resize",Q)},[]),l.jsxs("div",{className:"dashboard-page",children:[l.jsxs("nav",{className:"top-navbar",children:[l.jsx("h2",{children:"Gojo Dashboard"}),l.jsxs("div",{className:"nav-right",children:[l.jsxs("div",{className:"icon-circle",style:{position:"relative"},children:[l.jsxs("div",{onClick:()=>A(!T),style:{cursor:"pointer",position:"relative"},"aria-label":"Show notifications",tabIndex:0,role:"button",onKeyPress:Q=>{Q.key==="Enter"&&A(!T)},children:[l.jsx(Ls,{size:24}),E.length+ue>0&&l.jsx("span",{style:{position:"absolute",top:-5,right:-5,background:"red",color:"white",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:E.length+ue})]}),T&&l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.08)",zIndex:1999},onClick:()=>A(!1)}),l.jsxs("div",{className:"notification-popup",style:typeof window<"u"&&window.innerWidth<=600?{position:"fixed",left:"50%",top:"8%",transform:"translate(-50%, 0)",width:"90vw",maxWidth:340,zIndex:2e3,background:"#fff",borderRadius:12,boxShadow:"0 2px 16px rgba(0,0,0,0.18)",maxHeight:"70vh",overflowY:"auto",padding:12}:{position:"absolute",top:30,right:0,width:300,maxHeight:400,overflowY:"auto",background:"#fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",borderRadius:8,zIndex:100},children:[E.length>0&&E.map((Q,me)=>l.jsxs("div",{onClick:()=>{te("/dashboard"),setTimeout(()=>{const B=Ee.current[Q.id];B&&(B.scrollIntoView({behavior:"smooth",block:"center"}),J(Q.id),setTimeout(()=>J(null),3e3))},150),k(B=>B.filter((Y,re)=>re!==me)),A(!1)},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[l.jsx("img",{src:Q.adminProfile,alt:Q.adminName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),l.jsxs("div",{children:[l.jsx("strong",{children:Q.adminName}),l.jsx("p",{style:{margin:0,fontSize:12},children:Q.title})]})]},Q.id||me)),ue>0&&G.filter(Q=>Q.unreadForMe>0).map((Q,me)=>l.jsxs("div",{onClick:()=>{A(!1),te("/all-chat")},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[l.jsx("img",{src:Q.profile||"/default-profile.png",alt:Q.displayName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),l.jsxs("div",{children:[l.jsx("strong",{children:Q.displayName}),l.jsx("p",{style:{margin:0,fontSize:12,color:"#0b78f6"},children:"New message"})]})]},Q.chatId||me)),E.length===0&&ue===0&&l.jsx("div",{style:{padding:15},children:"No notifications"})]})]})]}),l.jsx("div",{className:"icon-circle",style:{position:"relative",marginLeft:12},children:l.jsxs("div",{onClick:()=>te("/all-chat"),style:{cursor:"pointer",position:"relative"},children:[l.jsx(Ms,{size:22}),ue>0&&l.jsx("span",{style:{position:"absolute",top:-6,right:-6,background:"#f60b0b",color:"#fff",borderRadius:"50%",minWidth:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 5px"},children:ue})]})}),l.jsx("div",{className:"icon-circle",onClick:()=>te("/settings"),children:l.jsx(Cr,{})}),l.jsx("img",{src:(w==null?void 0:w.profileImage)||"/default-profile.png",alt:"teacher",className:"profile-img"})]})]}),l.jsxs("div",{className:"google-dashboard",children:[typeof window<"u"&&window.innerWidth<=600&&!t&&l.jsx("button",{className:"sidebar-arrow-btn",style:{position:"fixed",left:0,top:0,zIndex:1300,background:"#fff",border:"none",borderRadius:"0 8px 8px 0",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",padding:8,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:()=>e(!0),"aria-label":"Open sidebar menu",children:l.jsx(js,{size:22})}),typeof window<"u"&&window.innerWidth<=600&&t&&l.jsx("div",{className:"sidebar-overlay visible",onClick:()=>e(!1),style:{display:"block",position:"fixed",inset:0,background:"rgba(0,0,0,0.35)",zIndex:1200}}),l.jsxs("div",{className:`google-sidebar${typeof window<"u"&&window.innerWidth<=600&&t?" open":""}`,style:typeof window<"u"&&window.innerWidth<=600?{position:"fixed",top:64,left:t?0:"-220px",width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",zIndex:1200,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto",borderRadius:0,transition:"left 0.25s cubic-bezier(.4,0,.2,1)"}:{position:"fixed",top:64,left:0,width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.04)",zIndex:900,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto",borderRadius:0},children:[l.jsx("style",{children:`
            @media (max-width: 600px) {
              .google-sidebar {
                left: -220px;
                transition: left 0.25s cubic-bezier(.4,0,.2,1);
                border-radius: 0 !important;
              }
              .google-sidebar.open {
                left: 0 !important;
                z-index: 1202;
                border-radius: 0 !important;
              }
              .sidebar-overlay {
                display: block;
                position: fixed;
                inset: 0;
                background: rgba(0,0,0,0.35);
                z-index: 1200;
                transition: opacity 0.2s;
              }
              .sidebar-arrow-btn {
                display: flex !important;
              }
            }
          `}),w&&l.jsxs("div",{className:"sidebar-profile",children:[l.jsx("div",{className:"sidebar-img-circle",children:l.jsx("img",{src:w.profileImage||"/default-profile.png",alt:"profile"})}),l.jsx("h3",{children:w.name}),l.jsx("p",{children:w.username})]}),l.jsxs("div",{className:"sidebar-menu",children:[l.jsxs(ve,{className:"sidebar-btn",to:"/dashboard",children:[l.jsx(Yr,{})," Home"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/students",children:[l.jsx(Ke,{})," Students"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/admins",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[l.jsx(Ke,{})," Admins"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/parents",children:[l.jsx(qr,{})," Parents"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/marks",children:[l.jsx(Er,{})," Marks"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/attendance",children:[l.jsx(Ke,{})," Attendance"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/schedule",children:[l.jsx(Ke,{})," Schedule"]}),l.jsxs("button",{className:"sidebar-btn logout-btn",onClick:z,children:[l.jsx(Qr,{})," Logout"]})]})]}),l.jsxs("div",{style:{flex:1,display:"flex",justifyContent:"center",padding:"30px"},children:[l.jsxs("div",{className:"admin-list-card-responsive",style:{width:"500px",marginLeft:"30px"},children:[l.jsx("style",{children:`
              @media (max-width: 600px) {
                .admin-list-card-responsive {
                  margin-left: -10px !important;
                  margin-right: auto !important;
                  padding-left: 0 !important;
                  width: 90vw !important;
                  max-width: 90vw !important;
                }
              }
              @media (min-width: 1200px) {
                .admin-list-card-responsive {
                  width: 600px !important;
                  max-width: 600px !important;
                }
              }
              @media (min-width: 1500px) {
                .admin-list-card-responsive {
                  width: 700px !important;
                  max-width: 700px !important;
                }
              }
            `}),l.jsx("h2",{style:{textAlign:"center",marginBottom:"20px"},children:"All Admins"}),s&&l.jsx("p",{children:"Loading admins..."}),o&&l.jsx("p",{style:{color:"red"},children:o}),l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:n.map(Q=>l.jsx(mT,{admin:Q,selected:(u==null?void 0:u.adminId)===Q.adminId,onClick:me=>{d(me),x(me)}},Q.adminId))})]}),u&&l.jsxs("div",{style:{width:L?"100%":"30%",height:L?"100vh":"calc(100vh - 60px)",position:"fixed",right:0,top:L?0:"60px",background:"#fff",boxShadow:L?"0 0 0 rgba(0,0,0,0)":"0 0 15px rgba(0,0,0,0.05)",zIndex:1e3,display:"flex",flexDirection:"column",overflowY:"auto",padding:L?"18px":"25px",transition:"all 0.35s ease"},children:[l.jsx("button",{onClick:()=>d(null),"aria-label":"Close admin details",title:"Close",style:{position:"fixed",top:52,right:16,width:42,height:42,borderRadius:"12px",border:"none",background:"#fff",boxShadow:"0 8px 18px rgba(2,6,23,0.15)",cursor:"pointer",display:"grid",placeItems:"center",zIndex:2e3,fontSize:22,fontWeight:900,color:"#0f172a"},children:""}),l.jsxs("div",{style:{textAlign:"center",marginBottom:"20px"},children:[l.jsx("div",{style:{width:"120px",height:"120px",margin:"0 auto 15px",borderRadius:"50%",overflow:"hidden",border:"4px solid #4b6cb7"},children:l.jsx("img",{src:u.profileImage||"/default-profile.png",alt:u.name,style:{width:"100%",height:"100%",objectFit:"cover"}})}),l.jsx("h2",{children:u.name}),l.jsx("p",{children:u.username})]}),l.jsx("div",{style:{display:"flex",marginBottom:"15px"},children:["details","Plan","Report"].map(Q=>l.jsx("button",{onClick:()=>p(Q),style:{flex:1,padding:"10px",border:"none",background:"none",cursor:"pointer",fontWeight:"600",color:f===Q?"#4b6cb7":"#777",borderBottom:f===Q?"3px solid #4b6cb7":"3px solid transparent"},children:Q.toUpperCase()},Q))}),f==="details"&&u&&l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:28,padding:50,marginLeft:0,marginRight:0,borderRadius:0,background:"linear-gradient(180deg,#eef2ff,#f8fafc)",fontFamily:"Inter, system-ui"},children:l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:24,fontWeight:900,marginBottom:18,marginTop:-30,background:"linear-gradient(90deg,#2563eb,#7c3aed)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Administrator Details"}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",columnGap:68,rowGap:14},children:[["Admin ID",u.adminId||u.userId],["Email",u.email],["Phone",u.phone],["Gender",u.gender?u.gender.charAt(0).toUpperCase()+u.gender.slice(1):null],["Title",u.title],["Status",u.status?u.status.charAt(0).toUpperCase()+u.status.slice(1):null]].map(([Q,me])=>l.jsxs("div",{style:{padding:18,borderRadius:20,background:"#ffffff",boxShadow:"0 6px 10px rgba(0,0,0,0.08)",marginLeft:-30,marginRight:-30},children:[l.jsx("div",{style:{fontSize:12,fontWeight:700,color:"#000102",textTransform:"uppercase"},children:Q}),l.jsx("div",{style:{marginTop:8,fontSize:16,fontWeight:400,color:"#000102"},children:me||""})]},Q))})]})}),f==="Plan"&&l.jsx("p",{children:"Plan data here."}),f==="Report"&&l.jsx("p",{children:"Report data here."}),!g&&u&&l.jsx("div",{onClick:()=>j(!0),style:{position:"fixed",bottom:"20px",right:"20px",width:"60px",height:"60px",background:"linear-gradient(135deg, #833ab4, #202ef3, #395a8b)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",cursor:"pointer",zIndex:1e3,boxShadow:"0 8px 18px rgba(0,0,0,0.25)"},children:l.jsx(Cp,{size:30})}),g&&u&&w&&l.jsxs("div",{style:{position:"fixed",bottom:"20px",right:"20px",width:"360px",height:"480px",background:"#fff",borderRadius:"16px",boxShadow:"0 12px 30px rgba(0,0,0,0.25)",zIndex:2e3,display:"flex",flexDirection:"column",overflow:"hidden"},children:[l.jsxs("div",{style:{padding:"14px",borderBottom:"1px solid #eee",display:"flex",justifyContent:"space-between",alignItems:"center",background:"#fafafa"},children:[l.jsx("strong",{children:u.name}),l.jsxs("div",{style:{display:"flex",gap:"10px"},children:[l.jsx("button",{onClick:()=>{j(!1),te("/all-chat",{state:{contact:u,tab:"admin"}})},style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px"},children:""}),l.jsx("button",{onClick:()=>j(!1),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:""})]})]}),l.jsxs("div",{style:{flex:1,padding:"12px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"6px",background:"#f9f9f9"},children:[v.length===0?l.jsxs("p",{style:{textAlign:"center",color:"#aaa"},children:["Start chatting with ",u.name]}):v.map(Q=>l.jsx("div",{style:{display:"flex",flexDirection:Q.isTeacher?"row-reverse":"row",alignItems:"flex-end",marginBottom:10},children:l.jsxs("div",{style:{background:Q.isTeacher?"#4facfe":"#fff",color:Q.isTeacher?"#fff":"#000",padding:"10px 14px",borderRadius:18,maxWidth:"65%",position:"relative",boxShadow:"0 2px 6px rgba(0,0,0,0.05)"},children:[Q.text,l.jsxs("div",{style:{fontSize:10,color:"#888",marginTop:4,display:"flex",justifyContent:"flex-end",alignItems:"center",gap:4},children:[fT(Q.timeStamp),Q.isTeacher&&l.jsx(ao,{size:10,color:Q.seen?"#4facfe":"#ccc"})]})]})},Q.id)),l.jsx("div",{ref:_})]}),l.jsxs("div",{style:{padding:"10px",borderTop:"1px solid #eee",display:"flex",gap:"8px",background:"#fff"},children:[l.jsx("input",{value:R,onChange:Q=>b(Q.target.value),placeholder:"Type a message...",style:{flex:1,padding:"10px 14px",borderRadius:"999px",border:"1px solid #ccc",outline:"none"},onKeyDown:Q=>{Q.key==="Enter"&&ae()}}),l.jsx("button",{onClick:ae,style:{background:"linear-gradient(135deg, #0751f1, #0e35e4, #0f5afc)",border:"none",borderRadius:"50%",width:"42px",height:"42px",color:"#fff",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px"},children:""})]})]})]})]})]})]})}const yT="https://gojo-teacher-web.onrender.com/api";function xT(){const[t,e]=y.useState(null),[n,r]=y.useState([]),[s,i]=y.useState(""),[o,c]=y.useState(""),[u,d]=y.useState(null),[f,p]=y.useState([]),g=Ln(),[j,v]=y.useState([]),[N,R]=y.useState(!1),[b,_]=y.useState(null),w=y.useRef({}),P=t==null?void 0:t.userId;y.useEffect(()=>{const x=JSON.parse(localStorage.getItem("teacher"));if(!x){g("/login");return}e(x)},[]),y.useEffect(()=>{(async()=>{try{const T=((await Z.get(`${yT}/get_posts`)).data||[]).slice(0,5).map(A=>{var I;return{id:A.postId,title:((I=A.message)==null?void 0:I.substring(0,50))||"Untitled post",adminName:A.adminName||"Admin",adminProfile:A.adminProfile||"/default-profile.png"}});v(T)}catch(E){console.error("Error fetching notifications:",E)}})()},[]);const V=(x,E)=>{_(x);const k=w.current[x];k&&k.scrollIntoView({behavior:"smooth",block:"center"});const T=[...j];T.splice(E,1),v(T),R(!1),setTimeout(()=>_(null),3e3)};y.useEffect(()=>{if(!t)return;async function x(){try{const[E,k,T]=await Promise.all([Z.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Courses.json"),Z.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/TeacherAssignments.json"),Z.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Teachers.json")]),A=Object.entries(T.data||{}).find(([q,ge])=>ge.userId===t.userId);if(!A)return;const I=A[0],Ee=Object.values(k.data||{}).filter(q=>q.teacherId===I).map(q=>({id:q.courseId,...E.data[q.courseId]}));r(Ee)}catch(E){console.error("Error fetching courses:",E)}}x()},[t]),y.useEffect(()=>{async function x(){try{const E=await Z.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/TeacherPosts.json");p(Object.entries(E.data||{}).map(([k,T])=>({id:k,...T})))}catch(E){console.error(E)}}x()},[]);const X=async()=>{if(!s||!o&&!u){alert("Please select a class and enter a note or upload a file");return}let x="";u&&(x=URL.createObjectURL(u));const E={teacherId:P,courseId:s,text:o,fileUrl:x,createdAt:new Date().toISOString()};try{await Z.post("https://ethiostore-17d9f-default-rtdb.firebaseio.com/TeacherPosts.json",E),alert("Post submitted!"),c(""),d(null),p(k=>[...k,{...E,id:Date.now()}])}catch(k){console.error(k),alert("Failed to submit post")}},C=()=>{localStorage.removeItem("teacher"),g("/login")};return t?l.jsxs("div",{className:"dashboard-page",children:[l.jsxs("nav",{className:"top-navbar",children:[l.jsx("h2",{children:"Gojo Dashboard"}),l.jsxs("div",{className:"nav-search",children:[l.jsx(II,{className:"search-icon"}),l.jsx("input",{type:"text",placeholder:"Search Teacher and Student..."})]}),l.jsxs("div",{className:"nav-right",children:[l.jsxs("div",{className:"icon-circle",children:[l.jsxs("div",{onClick:()=>R(!N),style:{cursor:"pointer",position:"relative"},children:[l.jsx(Ls,{size:24}),j.length>0&&l.jsx("span",{style:{position:"absolute",top:-5,right:-5,background:"red",color:"white",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:j.length})]}),N&&l.jsx("div",{style:{position:"absolute",top:30,right:0,width:300,maxHeight:400,overflowY:"auto",background:"#fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",borderRadius:8,zIndex:100},children:j.length>0?j.map((x,E)=>l.jsxs("div",{onClick:()=>{g("/dashboard"),setTimeout(()=>V(x.id,E),100)},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[l.jsx("img",{src:x.adminProfile,alt:x.adminName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),l.jsxs("div",{children:[l.jsx("strong",{children:x.adminName}),l.jsx("p",{style:{margin:0,fontSize:12},children:x.title})]})]},x.id||E)):l.jsx("div",{style:{padding:15},children:"No notifications"})})]}),l.jsx("div",{className:"icon-circle",children:l.jsx(Ms,{})}),l.jsx("div",{className:"icon-circle",children:l.jsx(Cr,{})}),l.jsx("img",{src:(t==null?void 0:t.profileImage)||"/default-profile.png",alt:"teacher",className:"profile-img"})]})]}),l.jsxs("div",{className:"google-dashboard",children:[l.jsxs("div",{className:"google-sidebar",children:[l.jsxs("div",{className:"sidebar-profile",children:[l.jsx("div",{className:"sidebar-img-circle",children:l.jsx("img",{src:(t==null?void 0:t.profileImage)||"/default-profile.png",alt:"profile"})}),l.jsx("h3",{children:t==null?void 0:t.name}),l.jsx("p",{children:t==null?void 0:t.username})]}),l.jsxs("div",{className:"sidebar-menu",children:[l.jsxs(ve,{className:"sidebar-btn",to:"/dashboard",children:[l.jsx(Yr,{})," Home"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/notes",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[l.jsx(Er,{})," Notes"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/students",children:[l.jsx(Ke,{})," Students"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/admins",children:[l.jsx(Ke,{})," Admins"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/parents",children:[l.jsx(qr,{})," Parents"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/marks",children:[l.jsx(Er,{})," Marks"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/attendance",children:[l.jsx(Ke,{})," Attendance"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/schedule",children:[l.jsx(Ke,{})," Schedule"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/settings",children:[l.jsx(Cr,{})," Settings"]}),l.jsxs("button",{className:"sidebar-btn logout-btn",onClick:C,children:[l.jsx(Qr,{})," Logout"]})]})]}),l.jsxs("div",{style:{marginLeft:"500px",width:"40%",padding:"100px 30px 50px",background:"#f3f4f6",minHeight:"100vh",fontFamily:"'Inter', sans-serif"},children:[l.jsxs("div",{style:{marginBottom:"30px",display:"flex",justifyContent:"space-between",alignItems:"center",background:"linear-gradient(90deg, #e0e7ff, #c7d2fe)",padding:"20px 25px",borderRadius:"18px",boxShadow:"0 5px 20px rgba(0,0,0,0.08)"},children:[l.jsx("h2",{style:{fontSize:"28px",fontWeight:700,color:"#1e293b"},children:"Post Notes / Files"}),l.jsxs("span",{style:{color:"#475569",fontSize:"16px",fontWeight:500},children:[t==null?void 0:t.name,", share notes with your students"]})]}),l.jsxs("div",{style:{marginBottom:"40px",background:"#fff",padding:"30px 25px",borderRadius:"18px",boxShadow:"0 6px 25px rgba(0,0,0,0.08)"},children:[l.jsxs("select",{value:s,onChange:x=>i(x.target.value),style:{width:"100%",padding:"14px 16px",borderRadius:"12px",border:"1px solid #cbd5e1",fontSize:"15px",marginBottom:"18px",background:"#f8fafc",cursor:"pointer"},children:[l.jsx("option",{value:"",children:"Select Class & Subject"}),n.map(x=>l.jsxs("option",{value:x.id,children:[x.subject,"  Grade ",x.grade,x.section]},x.id))]}),l.jsx("textarea",{placeholder:"Write your note here...",value:o,onChange:x=>c(x.target.value),style:{width:"100%",padding:"18px",borderRadius:"15px",border:"1px solid #cbd5e1",marginBottom:"18px",minHeight:"140px",fontSize:"15px",resize:"vertical",background:"#f8fafc"}}),l.jsx("input",{type:"file",onChange:x=>d(x.target.files[0]),style:{display:"block",marginBottom:"25px",fontSize:"15px",cursor:"pointer",padding:"10px",borderRadius:"12px",border:"1px solid #cbd5e1",background:"#f8fafc",width:"100%"}}),l.jsxs("button",{onClick:X,style:{background:"linear-gradient(90deg, #4b6cb7, #182848)",color:"#fff",border:"none",padding:"14px 30px",borderRadius:"15px",cursor:"pointer",fontSize:"16px",fontWeight:600,width:"100%"},children:[l.jsx(kI,{style:{marginRight:"10px"}})," Submit Post"]})]}),l.jsxs("div",{children:[l.jsx("h3",{style:{fontSize:"22px",fontWeight:700,marginBottom:"20px",color:"#1e293b"},children:"All Posts"}),f.filter(x=>x.teacherId===P||x.courseId===s).map((x,E)=>l.jsxs("div",{style:{background:"#fff",padding:"20px 25px",borderRadius:"18px",marginBottom:"18px",boxShadow:"0 6px 18px rgba(0,0,0,0.06)"},children:[l.jsx("p",{style:{marginBottom:"12px",fontSize:"15px",lineHeight:"1.6",color:"#334155"},children:x.text}),x.fileUrl&&l.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"10px"},children:[l.jsx("span",{style:{fontSize:"20px",marginRight:"10px"},children:""}),l.jsx("a",{href:x.fileUrl,target:"_blank",rel:"noopener noreferrer",download:!0,style:{color:"#2563eb",fontWeight:600,textDecoration:"none",fontSize:"15px"},children:"View / Download File"})]}),l.jsxs("div",{style:{fontSize:"13px",color:"#64748b",textAlign:"right"},children:["Posted: ",new Date(x.createdAt).toLocaleString()]})]},E))]})]})]})]}):null}const Ay=(t,e)=>[t,e].sort().join("_"),vT="https://gojo-teacher-web.onrender.com/api",Nn="https://ethiostore-17d9f-default-rtdb.firebaseio.com",_T=t=>{if(!t)return"";const e=new Date(Number(t)),n=e.getHours().toString().padStart(2,"0"),r=e.getMinutes().toString().padStart(2,"0");return`${n}:${r}`};function wT(){const[t,e]=y.useState(!1),[n,r]=y.useState(null),[s,i]=y.useState([]),[o,c]=y.useState(null),[u,d]=y.useState(!0),[f,p]=y.useState("Details"),[g,j]=y.useState(!1),[v,N]=y.useState([]),[R,b]=y.useState(""),_=y.useRef(null),[w,P]=y.useState([]),[V,X]=y.useState([]),[C,x]=y.useState(!1),[E,k]=y.useState([]),[T,A]=y.useState(null),[I,J]=y.useState(!1),[Ee,q]=y.useState([]),ge=Ln(),[G,U]=y.useState(window.innerWidth<window.innerHeight);y.useEffect(()=>{const L=()=>U(window.innerWidth<window.innerHeight);return window.addEventListener("resize",L),window.addEventListener("orientationchange",L),()=>{window.removeEventListener("resize",L),window.removeEventListener("orientationchange",L)}},[]),y.useEffect(()=>{const L=JSON.parse(localStorage.getItem("teacher"));if(!L){ge("/login");return}r(L)},[ge]);const te=()=>{localStorage.removeItem("teacher"),ge("/login")},z=(n==null?void 0:n.userId)||"";y.useEffect(()=>{if(!n)return;let L=!1;return(async()=>{try{d(!0);const[M,Ie,Q,me,B]=await Promise.all([Z.get(`${Nn}/TeacherAssignments.json`),Z.get(`${Nn}/Courses.json`),Z.get(`${Nn}/Students.json`),Z.get(`${Nn}/Users.json`),Z.get(`${Nn}/Parents.json`)]),Y=M.data||{},re=Ie.data||{},se=Q.data||{},D=me.data||{},W=B.data||{},$=n.userId,ee=Object.values(Y).filter(Se=>Se.teacherId===$).map(Se=>Se.courseId),ne={};Object.entries(W).forEach(([Se,xe])=>{xe.children&&Object.values(xe.children).forEach(fe=>{if(!fe.studentId)return;const De=fe.relationship||fe.relation||fe.relationToChild||fe.type||fe.role||null;ne[fe.studentId]||(ne[fe.studentId]=[]),ne[fe.studentId].push({parentId:Se,relationship:De})})});const he={};Object.entries(se).forEach(([Se,xe])=>{const fe=Object.values(D).find(qe=>String(qe.userId)===String(xe.userId)),De=(fe==null?void 0:fe.name)||"No Name",At=(fe==null?void 0:fe.profileImage)||"/default-profile.png";(ne[Se]||[]).forEach(({parentId:qe,relationship:ot})=>{he[qe]||(he[qe]=[]),he[qe].push({studentId:Se,name:De,grade:xe.grade,section:xe.section,profileImage:At,userId:xe.userId,relationship:ot||"",age:xe.age||(fe==null?void 0:fe.age)||null,city:xe.city||(fe==null?void 0:fe.city)||xe.address&&xe.address.city||null,citizenship:xe.citizenship||(fe==null?void 0:fe.citizenship)||xe.nationality||null,address:xe.address||(fe==null?void 0:fe.address)||null,status:xe.status||"Active"})})});const ye=Object.keys(he).map(Se=>{var Pe;const xe=W[Se]||{},fe=Object.values(D).find(qe=>String(qe.userId)===String(xe.userId))||{},De=he[Se]||[],At=Array.from(new Set(De.map(qe=>qe.relationship).filter(Boolean)));return{id:Se,userId:xe.userId,name:fe.name||xe.name||"No Name",email:fe.email||xe.email||"N/A",phone:fe.phone||xe.phone||"",profileImage:fe.profileImage||xe.profileImage||"/default-profile.png",children:De,relationships:At,age:xe.age||fe.age||null,city:xe.city||fe.city||((Pe=xe.address)==null?void 0:Pe.city)||null,citizenship:xe.citizenship||fe.citizenship||xe.nationality||null,status:xe.status||"Active",createdAt:xe.createdAt,address:xe.address||fe.address||null,extra:xe.extra}});L||i(ye)}catch(M){console.error("Error fetching parents:",M)}finally{L||d(!1)}})(),()=>{L=!0}},[n]),y.useEffect(()=>{var L;(L=_.current)==null||L.scrollIntoView({behavior:"smooth"})},[v]),y.useEffect(()=>{if(!o||!n||!g)return;const L=Ay(z,o.userId),ce=Lt(Vt,`Chats/${L}/messages`);return Ji(ce,M=>{const Ie=M.val()||{},Q=Object.entries(Ie).map(([me,B])=>({messageId:me,...B}));Q.sort((me,B)=>me.timeStamp-B.timeStamp),N(Q)}),_e(L),()=>_w(ce)},[o,n,g]);const ae=async L=>{if(!(L!=null&&L.trim())||!o||!n)return;const ce=z,M=o.userId,Ie=Ay(ce,M),Q=Date.now(),me={senderId:ce,receiverId:M,type:"text",text:L,seen:!1,timeStamp:Q};try{await Z.post(`${Nn}/Chats/${Ie}/messages.json`,me),await Z.patch(`${Nn}/Chats/${Ie}.json`,{participants:{[ce]:!0,[M]:!0},lastMessage:{text:L,senderId:ce,seen:!1,timeStamp:Q},unread:{[ce]:0,[M]:1}}),b("")}catch(B){console.error("Send message error:",B)}},_e=async L=>{try{await Z.patch(`${Nn}/Chats/${L}/unread.json`,{[z]:0}),await Z.patch(`${Nn}/Chats/${L}/lastMessage.json`,{seen:!0})}catch(ce){console.error("Mark as seen error:",ce)}};y.useEffect(()=>{(async()=>{try{let M=(await Z.get(`${vT}/get_posts`)).data||[];!Array.isArray(M)&&typeof M=="object"&&(M=Object.values(M));const[Ie,Q]=await Promise.all([Z.get(`${Nn}/School_Admins.json`),Z.get(`${Nn}/Users.json`)]),me=Ie.data||{},B=Q.data||{},Y=JSON.parse(localStorage.getItem("teacher")),re=we(Y==null?void 0:Y.userId),se=$=>{const ee=$.adminId||$.posterAdminId||$.poster||$.admin||null;if(ee&&me[ee]){const ne=me[ee],he=ne.userId,ye=B[he]||null,Se=ye&&ye.name||ne.name||$.adminName||"Admin",xe=ye&&ye.profileImage||ne.profileImage||$.adminProfile||"/default-profile.png";return{name:Se,profile:xe}}return{name:$.adminName||"Admin",profile:$.adminProfile||"/default-profile.png"}},D=M.slice().sort(($,ee)=>(ee.time?new Date(ee.time).getTime():0)-($.time?new Date($.time).getTime():0)).filter($=>$.postId&&!re.includes($.postId)).slice(0,5).map($=>{var ne;const ee=se($);return{type:"post",id:$.postId,title:((ne=$.message)==null?void 0:ne.substring(0,50))||"Untitled post",adminName:ee.name,adminProfile:ee.profile}});let W=[];try{const $=Y;if($&&$.userId){const[ee,ne]=await Promise.all([Z.get(`${Nn}/Chats.json`),Z.get(`${Nn}/Users.json`)]),he=ee.data||{},Se=ne.data||{}||{},xe={};Object.entries(Se).forEach(([fe,De])=>{De&&De.userId&&(xe[De.userId]=fe)}),W=Object.entries(he).map(([fe,De])=>{const Pe=(De.unread||{})[$.userId]||0;if(!Pe)return null;const qe=De.participants||{},ot=Object.keys(qe||{}).find(xt=>xt!==$.userId);if(!ot)return null;let $t=ot,Ye=Se[$t];if(!Ye){const xt=xe[ot];xt&&($t=xt,Ye=Se[xt])}Ye||(Ye={userId:ot,name:ot,profileImage:"/default-profile.png"});const Dt={pushKey:$t,userId:Ye.userId||ot,name:Ye.name||Ye.username||ot,profileImage:Ye.profileImage||Ye.profile||"/default-profile.png"},Qt=De.lastMessage||{};return{type:"message",chatId:fe,displayName:Dt.name,profile:Dt.profileImage,lastMessageText:Qt.text||"",lastMessageTime:Qt.timeStamp||Qt.time||null,unreadForMe:Pe}}).filter(Boolean).sort((fe,De)=>(De.lastMessageTime||0)-(fe.lastMessageTime||0))}}catch($){console.error("Error fetching message notifications:",$)}X([...D,...W]),k(W)}catch(ce){console.error("Error fetching notifications:",ce)}})()},[]);function we(L){return JSON.parse(localStorage.getItem(`seen_posts_${L}`))||[]}const ue=E.reduce((L,ce)=>L+(ce.unreadForMe||0),0);return y.useEffect(()=>(o?document.body.classList.add("sidebar-open"):document.body.classList.remove("sidebar-open"),()=>document.body.classList.remove("sidebar-open")),[o]),l.jsxs("div",{className:"dashboard-page",children:[l.jsxs("nav",{className:"top-navbar",children:[l.jsx("h2",{children:"Gojo Dashboard"}),l.jsxs("div",{className:"nav-right",children:[l.jsxs("div",{className:"icon-circle",style:{position:"relative"},children:[l.jsxs("div",{onClick:()=>x(!C),style:{cursor:"pointer",position:"relative"},"aria-label":"Show notifications",tabIndex:0,role:"button",onKeyPress:L=>{L.key==="Enter"&&x(!C)},children:[l.jsx(Ls,{size:24}),V.length+ue>0&&l.jsx("span",{style:{position:"absolute",top:-5,right:-5,background:"red",color:"white",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:V.length+ue})]}),C&&l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.08)",zIndex:1999},onClick:()=>x(!1)}),l.jsxs("div",{className:"notification-popup",style:typeof window<"u"&&window.innerWidth<=600?{position:"fixed",left:"50%",top:"8%",transform:"translate(-50%, 0)",width:"90vw",maxWidth:340,zIndex:2e3,background:"#fff",borderRadius:12,boxShadow:"0 2px 16px rgba(0,0,0,0.18)",maxHeight:"70vh",overflowY:"auto",padding:12}:{position:"absolute",top:30,right:0,width:300,maxHeight:400,overflowY:"auto",background:"#fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",borderRadius:8,zIndex:100},children:[V.length>0&&V.map((L,ce)=>L.type==="post"?l.jsxs("div",{onClick:()=>{ge("/dashboard"),setTimeout(()=>{var Ie;const M=(Ie=postRefs==null?void 0:postRefs.current)==null?void 0:Ie[L.id];M&&(M.scrollIntoView({behavior:"smooth",block:"center"}),A(L.id),setTimeout(()=>A(null),3e3))},150),X(M=>M.filter((Ie,Q)=>Q!==ce)),x(!1)},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[l.jsx("img",{src:L.adminProfile,alt:L.adminName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),l.jsxs("div",{children:[l.jsx("strong",{children:L.adminName}),l.jsx("p",{style:{margin:0,fontSize:12},children:L.title})]})]},L.id||ce):null),ue>0&&Ee.filter(L=>L.unreadForMe>0).map((L,ce)=>l.jsxs("div",{onClick:()=>{x(!1),ge("/all-chat")},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[l.jsx("img",{src:L.profile||"/default-profile.png",alt:L.displayName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),l.jsxs("div",{children:[l.jsx("strong",{children:L.displayName}),l.jsx("p",{style:{margin:0,fontSize:12,color:"#0b78f6"},children:"New message"})]})]},L.chatId||ce)),V.length===0&&ue===0&&l.jsx("div",{style:{padding:15},children:"No notifications"})]})]})]}),l.jsx("div",{className:"icon-circle",style:{position:"relative",marginLeft:12},children:l.jsxs("div",{onClick:()=>ge("/all-chat"),style:{cursor:"pointer",position:"relative"},children:[l.jsx(Ms,{size:22}),ue>0&&l.jsx("span",{style:{position:"absolute",top:-6,right:-6,background:"#f60b0b",color:"#fff",borderRadius:"50%",minWidth:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 5px"},children:ue})]})}),l.jsx("div",{className:"icon-circle",onClick:()=>ge("/settings"),children:l.jsx(Cr,{})}),l.jsx("img",{src:(n==null?void 0:n.profileImage)||"/default-profile.png",alt:"teacher",className:"profile-img"})]})]}),l.jsxs("div",{className:"google-dashboard",style:{display:"flex"},children:[typeof window<"u"&&window.innerWidth<=600&&!t&&l.jsx("button",{className:"sidebar-arrow-btn",style:{position:"fixed",left:0,top:0,zIndex:1300,background:"#fff",border:"none",borderRadius:"0 8px 8px 0",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",padding:8,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:()=>e(!0),"aria-label":"Open sidebar menu",children:l.jsx(js,{size:22})}),typeof window<"u"&&window.innerWidth<=600&&t&&l.jsx("div",{className:"sidebar-overlay visible",onClick:()=>e(!1),style:{display:"block",position:"fixed",inset:0,background:"rgba(0,0,0,0.35)",zIndex:1200}}),l.jsxs("div",{className:`google-sidebar${typeof window<"u"&&window.innerWidth<=600&&t?" open":""}`,style:typeof window<"u"&&window.innerWidth<=600?{position:"fixed",top:64,left:t?0:"-220px",width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",zIndex:1200,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto",borderRadius:0,transition:"left 0.25s cubic-bezier(.4,0,.2,1)"}:{position:"fixed",top:64,left:0,width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.04)",zIndex:900,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto",borderRadius:0},children:[l.jsx("style",{children:`
            @media (max-width: 600px) {
              .google-sidebar {
                left: -220px;
                transition: left 0.25s cubic-bezier(.4,0,.2,1);
                border-radius: 0 !important;
              }
              .google-sidebar.open {
                left: 0 !important;
                z-index: 1202;
                border-radius: 0 !important;
              }
              .sidebar-overlay {
                display: block;
                position: fixed;
                inset: 0;
                background: rgba(0,0,0,0.35);
                z-index: 1200;
                transition: opacity 0.2s;
              }
              .sidebar-arrow-btn {
                display: flex !important;
              }
            }
          `}),n&&l.jsxs("div",{className:"sidebar-profile",children:[l.jsx("div",{className:"sidebar-img-circle",children:l.jsx("img",{src:n.profileImage||"/default-profile.png",alt:"profile"})}),l.jsx("h3",{children:n.name}),l.jsx("p",{children:n.username})]}),l.jsxs("div",{className:"sidebar-menu",children:[l.jsxs(ve,{className:"sidebar-btn",to:"/dashboard",children:[l.jsx(Yr,{})," Home"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/students",children:[l.jsx(Ke,{})," Students"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/admins",children:[l.jsx(Ke,{})," Admins"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/parents",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[l.jsx(qr,{})," Parents"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/marks",children:[l.jsx(Er,{})," Marks"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/attendance",children:[l.jsx(Ke,{})," Attendance"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/schedule",children:[l.jsx(Ke,{})," Schedule"]}),l.jsxs("button",{className:"sidebar-btn logout-btn",onClick:te,children:[l.jsx(Qr,{})," Logout"]})]})]}),l.jsx("main",{style:{flex:1,padding:30},children:l.jsxs("div",{className:"parent-list-card-responsive",style:{maxWidth:480,margin:"0 auto",display:"flex",gap:24,alignItems:"flex-start",flexWrap:"wrap"},children:[l.jsxs("section",{style:{flex:"1 1 320px",minWidth:280},children:[l.jsx("h2",{style:{textAlign:"center",marginBottom:20,color:"#4b6cb7",fontWeight:700},children:"Parents"}),u?l.jsx("p",{style:{textAlign:"center",fontSize:18,color:"#555"},children:"Loading..."}):s.length===0?l.jsx("p",{style:{textAlign:"center",fontSize:18,color:"#999"},children:"No parents found."}):l.jsx("div",{className:"parent-list-responsive",style:{display:"flex",flexDirection:"column",gap:15},children:s.map(L=>l.jsxs("div",{onClick:()=>c(L),className:"parent-list-item-responsive",style:{display:"flex",gap:15,width:"calc(100% - 50px)",padding:16,marginLeft:50,borderRadius:12,boxShadow:"0 4px 15px rgba(0,0,0,0.08)",backgroundColor:(o==null?void 0:o.id)===L.id?"#f0f4ff":"#fff",cursor:"pointer",alignItems:"center"},children:[l.jsx("style",{children:`
                                  @media (max-width: 600px) {
                                    .parent-list-card-responsive {
                                      max-width: 99vw !important;
                                      width: 99vw !important;
                                      margin: 0 !important;
                                      padding: 0 !important;
                                    }
                                    .parent-list-responsive {
                                      width: 99vw !important;
                                      max-width: 99vw !important;
                                      margin-left: 0 !important;
                                      margin-right: 0 !important;
                                      padding: 0 !important;
                                      align-items: flex-start !important;
                                    }
                                    .parent-list-item-responsive {
                                      margin-left: -28px !important;
                                      width: 99vw !important;
                                      max-width: 99vw !important;
                                      min-width: 99vw !important;
                                      box-sizing: border-box !important;
                                    }
                                  }
                                `}),l.jsx("img",{src:L.profileImage,alt:L.name,style:{width:60,height:60,borderRadius:"50%",objectFit:"cover"}}),l.jsxs("div",{children:[l.jsx("h3",{style:{margin:0,fontSize:18},children:L.name}),l.jsx("p",{style:{margin:"6px 0 0 0",color:"#777"},children:L.email})]})]},L.id))})]}),o&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"parent-sidebar-overlay",onClick:()=>c(null),style:{display:"none",position:"fixed",inset:0,background:"rgba(0,0,0,0.35)",zIndex:999}}),l.jsxs("aside",{className:"parent-sidebar",style:{width:G?"100%":420,height:G?"100vh":"calc(100vh - 60px)",position:"fixed",right:0,top:G?0:60,background:"#fff",boxShadow:G?"none":"0 0 20px rgba(0,0,0,0.06)",zIndex:1e3,display:"flex",flexDirection:"column",overflowY:"auto",padding:G?18:24,transition:"all 0.32s ease"},role:"dialog","aria-modal":"true",children:[l.jsx("button",{onClick:()=>c(null),style:{position:"absolute",top:G?8:-11,right:18,width:40,height:40,borderRadius:10,border:"none",background:"#fff",boxShadow:"0 8px 18px rgba(2,6,23,0.08)",cursor:"pointer",display:"grid",placeItems:"center",zIndex:1010,fontSize:20},"aria-label":"Close details",children:""}),l.jsxs("div",{style:{textAlign:"center",marginBottom:12},children:[l.jsx("div",{style:{width:100,height:100,margin:"0 auto 12px",borderRadius:"50%",overflow:"hidden",border:"4px solid #4b6cb7"},children:l.jsx("img",{src:o.profileImage,alt:o.name,style:{width:"100%",height:"100%",objectFit:"cover"}})}),l.jsx("h3",{style:{margin:0},children:o.name}),l.jsx("div",{style:{color:"#666",marginTop:6},children:o.email})]}),l.jsx("div",{style:{display:"flex",gap:8,marginBottom:12},children:["Details","Children","Status"].map(L=>l.jsx("button",{onClick:()=>p(L),style:{flex:1,padding:"8px 10px",borderRadius:10,border:"none",cursor:"pointer",background:f===L?"#4b6cb7":"#f0f0f0",color:f===L?"#fff":"#333",fontWeight:700},children:L},L))}),l.jsxs("div",{style:{paddingBottom:40},children:[f==="Details"&&l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:28,padding:50,marginLeft:0,marginRight:0,borderRadius:0,background:"linear-gradient(180deg,#eef2ff,#f8fafc)",fontFamily:"Inter, system-ui"},children:l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:24,fontWeight:900,marginBottom:18,marginTop:-30,background:"linear-gradient(90deg,#2563eb,#7c3aed)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Parent Details"}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",columnGap:68,rowGap:14},children:[["Email",o.email||"N/A"],["Phone",o.phone||"N/A"],["Relationship(s)",o.relationships&&o.relationships.length?o.relationships.join(", "):""],["Age",o.age||""],["City",o.city||(o.address&&typeof o.address=="object"?o.address.city:o.city)||""],["Citizenship",o.citizenship||""],["Status",o.status?o.status.charAt(0).toUpperCase()+o.status.slice(1):""],["Address",(typeof o.address=="string"?o.address:o.address&&(o.address.street||o.address.city||JSON.stringify(o.address)))||"",!0]].map(([L,ce,M])=>l.jsxs("div",{style:{padding:18,borderRadius:20,background:"#ffffff",boxShadow:"0 6px 10px rgba(0,0,0,0.08)",marginLeft:-30,marginRight:-30,gridColumn:M?"span 2":"span 1"},children:[l.jsx("div",{style:{fontSize:12,fontWeight:700,color:"#000102",textTransform:"uppercase"},children:L}),l.jsx("div",{style:{marginTop:8,fontSize:16,fontWeight:400,color:"#000102"},children:ce})]},L))})]})}),f==="Children"&&l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:20,background:"#f5f7fa",padding:18,borderRadius:10},children:o.children.map(L=>l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:22,background:"#fff",borderRadius:16,padding:"22px 30px",boxShadow:"0 4px 24px rgba(80,90,130,0.10)",border:"1px solid #edeef2",transition:"box-shadow 0.2s, transform 0.18s",cursor:"pointer"},onMouseEnter:ce=>ce.currentTarget.style.boxShadow="0 8px 32px 0 rgba(60,72,120,0.17)",onMouseLeave:ce=>ce.currentTarget.style.boxShadow="0 4px 24px rgba(80,90,130,0.10)",children:[l.jsx("img",{src:L.profileImage,alt:L.name,style:{width:66,height:66,borderRadius:"50%",border:"3px solid #2868f1",objectFit:"cover",background:"#f0f4fa",flexShrink:0,boxShadow:"0 2px 8px 0 rgba(60,72,120,0.07)"}}),l.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:5},children:[l.jsx("span",{style:{fontWeight:700,fontSize:21,color:"#213052",marginBottom:2},children:L.name}),l.jsxs("div",{style:{display:"flex",columnGap:1,marginTop:-12,marginLeft:-19},children:[l.jsxs("div",{style:{color:"#050505",fontWeight:400,fontSize:14,padding:"6px 18px",borderRadius:999,letterSpacing:.5,boxShadow:"0 2px 8px rgba(22,119,255,.09)"},children:["Grade:",L.grade]}),l.jsxs("div",{style:{color:"#000000",fontWeight:400,fontSize:14,padding:"6px 1px",borderRadius:999,letterSpacing:.5,boxShadow:"0 2px 8px rgba(255,126,95,.09)"},children:["Section:",L.section]})]}),l.jsx("span",{style:{fontSize:15,color:"#424242",marginTop:"-10px"},children:L.relationship&&`Relation: ${L.relationship}`})]})]},L.studentId))}),f==="Status"&&l.jsxs("div",{children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Status:"})," ",o.status||"Active"]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Created:"})," ",o.createdAt?new Date(o.createdAt).toLocaleString():""]})]})]}),!g&&l.jsx("div",{onClick:()=>j(!0),style:{position:"fixed",bottom:"20px",right:"20px",width:"60px",height:"60px",background:"linear-gradient(135deg, #3a6fb4, #2147f0, #457ffc)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",cursor:"pointer",zIndex:1e3,boxShadow:"0 8px 18px rgba(0,0,0,0.25)",transition:"transform 0.2s ease"},children:l.jsx(Cp,{size:30})}),g&&o&&l.jsxs("div",{style:{position:"fixed",bottom:"20px",right:"20px",width:"360px",height:"480px",background:"#fff",borderRadius:"16px",boxShadow:"0 12px 30px rgba(0,0,0,0.25)",zIndex:2e3,display:"flex",flexDirection:"column",overflow:"hidden"},children:[l.jsxs("div",{style:{padding:"14px",borderBottom:"1px solid #eee",display:"flex",justifyContent:"space-between",alignItems:"center",background:"#fafafa"},children:[l.jsx("strong",{children:o.name}),l.jsxs("div",{style:{display:"flex",gap:"10px"},children:[l.jsx("button",{onClick:()=>{j(!1),ge("/all-chat",{state:{user:o,tab:"parent"}})},style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px"},children:""}),l.jsx("button",{onClick:()=>j(!1),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:""})]})]}),l.jsxs("div",{style:{flex:1,padding:"12px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"6px",background:"#f9f9f9"},children:[v.length===0?l.jsxs("p",{style:{textAlign:"center",color:"#aaa"},children:["Start chatting with ",o.name]}):v.map(L=>l.jsx("div",{style:{display:"flex",flexDirection:L.senderId===z?"row-reverse":"row",alignItems:"flex-end",marginBottom:10},children:l.jsx("div",{style:{maxWidth:"75%",display:"flex",flexDirection:"column",alignItems:L.senderId===z?"flex-end":"flex-start"},children:l.jsxs("div",{style:{background:L.senderId===z?"#4b6cb7":"#fff",color:L.senderId===z?"#fff":"#0f172a",padding:"10px 14px",borderRadius:18,boxShadow:"0 2px 6px rgba(0,0,0,0.04)",wordBreak:"break-word",position:"relative",paddingBottom:"26px"},children:[l.jsx("div",{children:L.text}),l.jsxs("div",{style:{position:"absolute",right:8,bottom:6,display:"flex",alignItems:"center",gap:6,fontSize:11,color:L.senderId===z?"rgba(255,255,255,0.9)":"#64748b"},children:[l.jsx("span",{style:{fontSize:11},children:_T(L.timeStamp)}),L.senderId===z&&l.jsx(ao,{size:12,color:L.seen?(L.seenAt,"#10b981"):L.seen?"#10b981":"#94a3b8"})]})]})})},L.messageId)),l.jsx("div",{ref:_})]}),l.jsxs("div",{style:{padding:"10px",borderTop:"1px solid #eee",display:"flex",gap:"8px",background:"#fff"},children:[l.jsx("input",{value:R,onChange:L=>b(L.target.value),placeholder:"Type a message...",style:{flex:1,padding:"10px 14px",borderRadius:"999px",border:"1px solid #ccc",outline:"none"},onKeyDown:L=>{L.key==="Enter"&&ae(R)}}),l.jsx("button",{onClick:()=>ae(R),style:{background:"linear-gradient(135deg, #3a65b4, #2c4fee, #458efc)",border:"none",borderRadius:"50%",width:"42px",height:"42px",color:"#fff",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px"},children:""})]})]})]}),l.jsx("style",{children:`
                  @media (max-width: 900px), (orientation: portrait) {
                    .parent-sidebar { width: 100vw !important; height: 100vh !important; left: 0 !important; top: 0 !important; border-radius: 0 !important; padding: 16px !important; }
                    .parent-sidebar-overlay { display: block !important; }
                    body.sidebar-open { overflow: hidden !important; }
                  }
                `})]})]})})]})]})}function ST(){const[t,e]=y.useState(localStorage.getItem("darkMode")==="true");return y.useEffect(()=>{t?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode"),localStorage.setItem("darkMode",t)},[t]),[t,()=>e(r=>!r)]}const bT="https://gojo-teacher-web.onrender.com/api",kr="https://ethiostore-17d9f-default-rtdb.firebaseio.com";function ET(){const[t,e]=y.useState(null),[n,r]=y.useState("/default-profile.png"),[s,i]=y.useState(""),[o,c]=y.useState(""),[u,d]=y.useState(null),[f,p]=ST(),[g,j]=y.useState(""),[v,N]=y.useState(""),[R,b]=y.useState([]),[_,w]=y.useState(!1),P=Ln(),[V,X]=y.useState(!1),[C,x]=y.useState([]);y.useEffect(()=>{const U=JSON.parse(localStorage.getItem("teacher"));if(!U){P("/login");return}e(U)},[P]),y.useEffect(()=>{t&&(r(t.profileImage||"/default-profile.png"),i(t.name||""),c(t.username||""),ge(t))},[t]);const E=U=>d(U.target.files[0]),k=async()=>{if(!u)return alert("Select an image first.");try{const U=new FileReader;U.readAsDataURL(u),U.onloadend=async()=>{const te=U.result;await Z.patch(`${kr}/Users/${t.userId}.json`,{profileImage:te});const z={...t,profileImage:te};localStorage.setItem("teacher",JSON.stringify(z)),r(te),d(null),alert("Profile image updated!")}}catch(U){console.error("Error updating profile image:",U)}},T=async()=>{if(!s||!o)return alert("Name and Username required!");try{await Z.patch(`${kr}/Users/${t.userId}.json`,{name:s,username:o});const U={...t,name:s,username:o};localStorage.setItem("teacher",JSON.stringify(U)),e(U),alert("Profile info updated!")}catch(U){console.error("Error updating info:",U)}},A=async()=>{if(!g||!v)return alert("Fill both password fields.");if(g!==v)return alert("Passwords do not match!");try{await Z.patch(`${kr}/Users/${t.userId}.json`,{password:g}),j(""),N(""),alert("Password updated successfully!")}catch(U){console.error("Error updating password:",U)}},I=()=>{localStorage.removeItem("teacher"),P("/login")};y.useEffect(()=>{(async()=>{try{let z=(await Z.get(`${bT}/get_posts`)).data||[];!Array.isArray(z)&&typeof z=="object"&&(z=Object.values(z));const[ae,_e,we]=await Promise.all([Z.get(`${kr}/School_Admins.json`),Z.get(`${kr}/Users.json`),Z.get(`${kr}/Chats.json`)]),ue=ae.data||{},L=_e.data||{},ce=we.data||{},M=JSON.parse(localStorage.getItem("teacher")),Ie=Ee(M==null?void 0:M.userId),Q=re=>{const se=re.adminId||re.posterAdminId||re.poster||re.admin||null;if(se&&ue[se]){const D=ue[se],W=D.userId,$=L[W]||null,ee=$&&$.name||D.name||re.adminName||"Admin",ne=$&&$.profileImage||D.profileImage||re.adminProfile||"/default-profile.png";return{name:ee,profile:ne}}return{name:re.adminName||"Admin",profile:re.adminProfile||"/default-profile.png"}},me=z.slice().sort((re,se)=>{const D=re.time?new Date(re.time).getTime():0;return(se.time?new Date(se.time).getTime():0)-D}).filter(re=>re.postId&&!Ie.includes(re.postId)).slice(0,5).map(re=>{var D;const se=Q(re);return{id:re.postId,type:"post",title:((D=re.message)==null?void 0:D.substring(0,50))||"Untitled post",adminName:se.name,adminProfile:se.profile}});let B=[];M&&M.userId&&Object.entries(ce).forEach(([re,se])=>{const W=(se.unread||{})[M.userId]||0;if(!W)return;const $=se.participants||{},ee=Object.keys($).find(he=>he!==M.userId);let ne=L[ee]||{userId:ee,name:ee,profileImage:"/default-profile.png"};B.push({chatId:re,type:"message",displayName:ne.name||ne.username||ee,profile:ne.profileImage||ne.profile||"/default-profile.png",unreadForMe:W})});const Y=[...me,...B].slice(0,5);b(Y)}catch(te){console.error("Error fetching notifications:",te)}})()},[]);const J=async U=>{if(t){if(U.type==="post"&&U.id)q(t.userId,U.id),b(te=>te.filter(z=>z.id!==U.id)),w(!1),P("/dashboard");else if(U.type==="message"&&U.chatId){b(te=>te.filter(z=>z.chatId!==U.chatId)),w(!1);try{await Z.put(`${kr}/Chats/${U.chatId}/unread/${t.userId}.json`,null)}catch{}P("/all-chat")}}};function Ee(U){return JSON.parse(localStorage.getItem(`seen_posts_${U}`))||[]}function q(U,te){const z=Ee(U);z.includes(te)||localStorage.setItem(`seen_posts_${U}`,JSON.stringify([...z,te]))}const ge=async(U=t)=>{try{const te=U||JSON.parse(localStorage.getItem("teacher"));if(!te||!te.userId){x([]);return}const[z,ae]=await Promise.all([Z.get(`${kr}/Chats.json`),Z.get(`${kr}/Users.json`)]),_e=z.data||{},ue=ae.data||{}||{},L={};Object.entries(ue).forEach(([M,Ie])=>{Ie&&Ie.userId&&(L[Ie.userId]=M)});const ce=Object.entries(_e).map(([M,Ie])=>{const me=(Ie.unread||{})[te.userId]||0;if(!me)return null;const B=Ie.participants||{},Y=Object.keys(B||{}).find($=>$!==te.userId);if(!Y)return null;let re=Y,se=ue[re];if(!se){const $=L[Y];$&&(re=$,se=ue[$])}se||(se={userId:Y,name:Y,profileImage:"/default-profile.png"});const D={pushKey:re,userId:se.userId||Y,name:se.name||se.username||Y,profileImage:se.profileImage||se.profile||"/default-profile.png"},W=Ie.lastMessage||{};return{chatId:M,contact:D,displayName:D.name,profile:D.profileImage,lastMessageText:W.text||"",lastMessageTime:W.timeStamp||W.time||null,unreadForMe:me}}).filter(Boolean).sort((M,Ie)=>(Ie.lastMessageTime||0)-(M.lastMessageTime||0));x(ce)}catch(te){console.error("Error fetching conversations:",te),x([])}},G=R.filter(U=>U.type==="message").reduce((U,te)=>U+(te.unreadForMe||0),0);return l.jsxs("div",{className:"dashboard-page",children:[l.jsxs("nav",{className:"top-navbar",children:[l.jsx("h2",{children:"Gojo Dashboard"}),l.jsxs("div",{className:"nav-right",children:[l.jsxs("div",{className:"icon-circle",children:[l.jsxs("div",{onClick:()=>w(!_),style:{cursor:"pointer",position:"relative"},children:[l.jsx(Ls,{size:24}),R.length>0&&l.jsx("span",{style:{position:"absolute",top:-5,right:-5,background:"red",color:"white",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:R.length})]}),_&&l.jsx("div",{style:{position:"absolute",top:30,right:0,width:300,maxHeight:400,overflowY:"auto",background:"#fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",borderRadius:8,zIndex:100},children:R.length>0?R.map((U,te)=>U.type==="post"?l.jsxs("div",{onClick:()=>J(U),style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[l.jsx("img",{src:U.adminProfile,alt:U.adminName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),l.jsxs("div",{children:[l.jsx("strong",{children:U.adminName}),l.jsx("p",{style:{margin:0,fontSize:12},children:U.title})]})]},U.id||te):l.jsxs("div",{onClick:()=>J(U),style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[l.jsx("img",{src:U.profile||"/default-profile.png",alt:U.displayName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),l.jsxs("div",{children:[l.jsx("strong",{children:U.displayName}),l.jsx("p",{style:{margin:0,fontSize:12,color:"#0b78f6"},children:"New message"})]})]},U.chatId||te)):l.jsx("div",{style:{padding:15},children:"No notifications"})})]}),l.jsx("div",{className:"icon-circle",style:{position:"relative",marginLeft:12},children:l.jsxs("div",{onClick:()=>P("/all-chat"),style:{cursor:"pointer",position:"relative"},children:[l.jsx(Ms,{size:22}),G>0&&l.jsx("span",{style:{position:"absolute",top:-6,right:-6,background:"#f60b0b",color:"#fff",borderRadius:"50%",minWidth:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 5px"},children:G})]})}),l.jsx(ve,{className:"icon-circle",to:"/settings",children:l.jsx(Cr,{})}),l.jsx("img",{src:(t==null?void 0:t.profileImage)||"/default-profile.png",alt:"teacher",className:"profile-img"})]})]}),l.jsxs("div",{className:"google-dashboard",children:[l.jsxs("div",{className:"google-sidebar",children:[t&&l.jsxs("div",{className:"sidebar-profile",children:[l.jsx("div",{className:"sidebar-img-circle",children:l.jsx("img",{src:t.profileImage||"/default-profile.png",alt:"profile"})}),l.jsx("h3",{children:t.name}),l.jsx("p",{children:t.username})]}),l.jsxs("div",{className:"sidebar-menu",children:[l.jsxs(ve,{className:"sidebar-btn",to:"/dashboard",children:[l.jsx(Yr,{})," Home"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/students",children:[l.jsx(Ke,{})," Students"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/admins",children:[l.jsx(Ke,{})," Admins"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/parents",children:[l.jsx(qr,{})," Parents"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/marks",children:[l.jsx(Er,{})," Marks"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/attendance",children:[l.jsx(Ke,{})," Attendance"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/schedule",children:[l.jsx(Ke,{})," Schedule"]}),l.jsxs("button",{className:"sidebar-btn logout-btn",onClick:I,children:[l.jsx(Qr,{})," Logout"]})]})]}),l.jsxs("div",{className:"main-content",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",marginTop:"10px",padding:"10px",width:"100%",gap:"30px"},children:[l.jsx("h2",{children:"Settings"}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"30px",borderRadius:"12px",background:f?"#3a3a3a":"#fff",boxShadow:"0 4px 10px rgba(0,0,0,0.1)"},children:[l.jsx("img",{src:n,alt:"profile",style:{width:"150px",height:"150px",borderRadius:"50%",objectFit:"cover",marginBottom:"15px",border:"3px solid #4b6cb7"}}),l.jsx("input",{type:"file",onChange:E}),l.jsx("button",{onClick:k,style:{marginTop:"15px",padding:"10px 20px",borderRadius:"8px",border:"none",background:"#4b6cb7",color:"#fff",cursor:"pointer"},children:"Update Profile Image"})]}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px",padding:"30px",borderRadius:"12px",background:f?"#3a3a3a":"#fff",boxShadow:"0 4px 10px rgba(0,0,0,0.1)"},children:[l.jsx("input",{type:"text",placeholder:"Name",value:s,onChange:U=>i(U.target.value),style:{padding:"10px",borderRadius:"6px",border:"1px solid #ccc"}}),l.jsx("input",{type:"text",placeholder:"Username",value:o,onChange:U=>c(U.target.value),style:{padding:"10px",borderRadius:"6px",border:"1px solid #ccc"}}),l.jsx("button",{onClick:T,style:{padding:"10px 20px",borderRadius:"8px",border:"none",background:"#4b6cb7",color:"#fff",cursor:"pointer"},children:"Update Info"})]}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px",padding:"30px",borderRadius:"12px",background:f?"#3a3a3a":"#fff",boxShadow:"0 4px 10px rgba(0,0,0,0.1)"},children:[l.jsx("input",{type:"password",placeholder:"New Password",value:g,onChange:U=>j(U.target.value),style:{padding:"10px",borderRadius:"6px",border:"1px solid #ccc"}}),l.jsx("input",{type:"password",placeholder:"Confirm Password",value:v,onChange:U=>N(U.target.value),style:{padding:"10px",borderRadius:"6px",border:"1px solid #ccc"}}),l.jsx("button",{onClick:A,style:{padding:"10px 20px",borderRadius:"8px",border:"none",background:"#4b6cb7",color:"#fff",cursor:"pointer"},children:"Change Password"})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px",padding:"20px",borderRadius:"12px",background:f?"#3a3a3a":"#fff",boxShadow:"0 4px 10px rgba(0,0,0,0.1)"},children:[l.jsx("label",{style:{fontSize:"18px",fontWeight:"500"},children:"Dark Mode"}),l.jsx("input",{type:"checkbox",checked:f,onChange:p})]})]})]})]})}const CT="https://gojo-teacher-web.onrender.com/api",Jo="https://ethiostore-17d9f-default-rtdb.firebaseio.com";function IT(){const[t,e]=y.useState(window.innerWidth>600);y.useEffect(()=>{const z=()=>{window.innerWidth<=600?e(!1):e(!0)};return window.addEventListener("resize",z),z(),()=>window.removeEventListener("resize",z)},[]);const[n,r]=y.useState(null),[s,i]=y.useState({}),[o,c]=y.useState(!0),[u,d]=y.useState(""),[f,p]=y.useState("All"),[g,j]=y.useState("All"),[v,N]=y.useState([]),[R,b]=y.useState(!1),[_,w]=y.useState(null),[P,V]=y.useState(!0),[X,C]=y.useState([]);y.useRef({});const x=Ln(),E=["All","A","B","C","D"],k=["Monday","Tuesday","Wednesday","Thursday","Friday"],[T,A]=y.useState(typeof window<"u"?window.innerWidth<=900:!1);y.useEffect(()=>{const z=()=>A(window.innerWidth<=900);return window.addEventListener("resize",z),()=>window.removeEventListener("resize",z)},[]);const I=v.filter(z=>z.type==="message").reduce((z,ae)=>z+(ae.unreadForMe||0),0);y.useEffect(()=>{const z=JSON.parse(localStorage.getItem("teacher"));if(!z){x("/login");return}r(z)},[x]),y.useEffect(()=>{if(!n)return;async function z(){c(!0);try{const ae=await Z.get(`${Jo}/Schedules.json`);i(ae.data||{}),d("")}catch{d("Failed to load schedule.")}finally{c(!1)}}z()},[n]);const J=()=>{localStorage.removeItem("teacher"),x("/login")},q=(()=>{if(!n||!s)return{};const z={};return Object.entries(s).forEach(([ae,_e])=>{Object.entries(_e||{}).forEach(([we,ue])=>{Object.entries(ue||{}).forEach(([L,ce])=>{var M;ce!=null&&ce.teacherName&&ce.teacherName===n.name&&(z[ae]||(z[ae]={}),z[ae][L]||(z[ae][L]=[]),z[ae][L].push({class:we,subject:ce.subject||"-",time:ce.time||((M=L.match(/\((.*?)\)/))==null?void 0:M[1])||"N/A"}))})})}),z})();function ge(z){return JSON.parse(localStorage.getItem(`seen_posts_${z}`))||[]}function G(z,ae){const _e=ge(z);_e.includes(ae)||localStorage.setItem(`seen_posts_${z}`,JSON.stringify([..._e,ae]))}y.useEffect(()=>{(async()=>{try{let _e=(await Z.get(`${CT}/get_posts`)).data||[];!Array.isArray(_e)&&typeof _e=="object"&&(_e=Object.values(_e));const[we,ue,L]=await Promise.all([Z.get(`${Jo}/School_Admins.json`),Z.get(`${Jo}/Users.json`),Z.get(`${Jo}/Chats.json`)]),ce=we.data||{},M=ue.data||{},Ie=L.data||{},Q=JSON.parse(localStorage.getItem("teacher")),me=se=>{const D=se.adminId||se.posterAdminId||se.poster||se.admin||null;if(D&&ce[D]){const W=ce[D],$=W.userId,ee=M[$]||null,ne=ee&&ee.name||W.name||se.adminName||"Admin",he=ee&&ee.profileImage||W.profileImage||se.adminProfile||"/default-profile.png";return{name:ne,profile:he}}return{name:se.adminName||"Admin",profile:se.adminProfile||"/default-profile.png"}},B=_e.slice().sort((se,D)=>{const W=se.time?new Date(se.time).getTime():0;return(D.time?new Date(D.time).getTime():0)-W}).filter(se=>se.postId).slice(0,5).map(se=>{var W;const D=me(se);return{id:se.postId,type:"post",title:((W=se.message)==null?void 0:W.substring(0,50))||"Untitled post",adminName:D.name,adminProfile:D.profile,time:se.time?new Date(se.time).getTime():0}});let Y=[];Q&&Q.userId&&Object.entries(Ie).forEach(([se,D])=>{var ye;const $=(D.unread||{})[Q.userId]||0;if(!$)return;const ee=D.participants||{},ne=Object.keys(ee).find(Se=>Se!==Q.userId);let he=M[ne]||{userId:ne,name:ne,profileImage:"/default-profile.png"};Y.push({chatId:se,type:"message",displayName:he.name||he.username||ne,profile:he.profileImage||he.profile||"/default-profile.png",unreadForMe:$,time:(ye=D.lastMessage)!=null&&ye.timeStamp?new Date(D.lastMessage.timeStamp).getTime():0})});const re=[...B,...Y].sort((se,D)=>(D.time||0)-(se.time||0)).slice(0,5);N(re)}catch{}})()},[]);const U=async z=>{if(n){if(z.type==="post"&&z.id)G(n.userId,z.id),N(ae=>ae.filter(_e=>_e.id!==z.id)),b(!1),x("/dashboard");else if(z.type==="message"&&z.chatId){N(ae=>ae.filter(_e=>_e.chatId!==z.chatId)),b(!1);try{await Z.put(`${Jo}/Chats/${z.chatId}/unread/${n.userId}.json`,null)}catch{}x("/all-chat")}}};return l.jsxs("div",{className:"gojo-root-dashboard",children:[l.jsx("style",{children:`
    body, html, #root { height: 100%; margin: 0; }
    .gojo-root-dashboard {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      background: #f0f4f8;
      overflow: hidden;
    }
    .top-navbar {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      z-index: 1000;
      background: #fff;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 24px;
      height: 60px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.07);
    }
    .google-sidebar {
      position: fixed;
      top: 60px;
      left: 0;
      width: 220px;
      height: calc(100vh - 60px);
      background: #fff;
      box-shadow: 2px 0 8px rgba(0,0,0,0.04);
      z-index: 900;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-top: 18px;
      overflow-y: auto;
      transition: width 0.2s;
      min-width: 48px;
    }
    .main-area-row {
      display: flex;
      flex: 1;
      flex-direction: row;
      height: 100vh;
      margin-top: 60px;
      width: 100%;
      min-width: 0;
    }
    .schedule-main {
      flex: 1;
      margin-left: 220px;
      padding: 30px;
      background: #f0f4f8;
      min-height: calc(100vh - 60px);
      overflow-y: auto;
      transition: margin-left 0.2s;
      position: relative;
      z-index: 20;
    }
    .right-sidebar {
      position: fixed;
      top: 60px;
      right: 0;
      width: 350px;
      height: calc(100vh - 60px);
      z-index: 300;
      background: #fff;
      box-shadow: 0 0 20px rgba(0,0,0,0.07);
      display: flex;
      flex-direction: column;
      transition: right 0.2s, left 0.2s, width 0.2s;
    }
    .close-sidebar-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      background: linear-gradient(90deg, #2563eb, #3b82f6);
      color: #fff;
      border: none;
      border-radius: 50%;
      width: 36px;
      height: 36px;
      font-size: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
      z-index: 10;
      cursor: pointer;
    }
    @media (max-width: 900px) {
      .google-sidebar { width: 60px; min-width: 60px; }
      .schedule-main { margin-left: 60px; padding: 17px 2vw; }
      .right-sidebar { width: 90vw; left: 60px; right: initial; }
    }
    @media (max-width: 600px) {
      .top-navbar { height: 54px; padding: 0 7px; }
      .google-sidebar {
        top: 54px;
        width: 48px;
        min-width: 48px;
        padding: 0;
        align-items: flex-start;
      }
      .main-area-row { margin-top: 54px; }
      .schedule-main { margin-left: 48px; padding: 8px 2vw; border-radius: 7px; }
      .right-sidebar { left: 48px; right: initial; width: 100vw; height: calc(100vh - 54px); }
      .close-sidebar-btn {
        top: 8px !important;
        right: 8px !important;
        width: 44px !important;
        height: 44px !important;
        font-size: 22px !important;
      }
    }
  `}),l.jsxs("nav",{className:"top-navbar",children:[l.jsx("h2",{children:"Gojo Dashboard"}),l.jsxs("div",{className:"nav-right",style:{display:"flex",alignItems:"center",gap:16},children:[l.jsxs("div",{className:"icon-circle",style:{position:"relative"},children:[l.jsxs("div",{onClick:()=>b(!R),style:{cursor:"pointer",position:"relative"},children:[l.jsx(Ls,{size:24}),v.length>0&&l.jsx("span",{style:{position:"absolute",top:-5,right:-5,background:"red",color:"white",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:v.length})]}),R&&l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.08)",zIndex:1999},onClick:()=>b(!1)}),l.jsx("div",{className:"notification-popup",style:typeof window<"u"&&window.innerWidth<=600?{position:"fixed",left:"50%",top:"8%",transform:"translate(-50%, 0)",width:"90vw",maxWidth:340,zIndex:2e3,background:"#fff",borderRadius:12,boxShadow:"0 2px 16px rgba(0,0,0,0.18)",maxHeight:"70vh",overflowY:"auto",padding:12}:{position:"absolute",top:28,right:0,width:300,maxHeight:400,overflowY:"auto",background:"#fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",borderRadius:8,zIndex:100},children:v.length?v.map((z,ae)=>l.jsxs("div",{onClick:()=>U(z.id),style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[l.jsx("img",{src:z.adminProfile,alt:z.adminName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),l.jsxs("div",{children:[l.jsx("strong",{children:z.adminName}),l.jsx("p",{style:{margin:0,fontSize:12},children:z.title})]})]},z.id||ae)):l.jsx("div",{style:{padding:15},children:"No notifications"})})]})]}),l.jsx("div",{className:"icon-circle",style:{position:"relative",marginLeft:12},children:l.jsxs("div",{onClick:()=>x("/all-chat"),style:{cursor:"pointer",position:"relative"},children:[l.jsx(Ms,{size:22}),I>0&&l.jsx("span",{style:{position:"absolute",top:-6,right:-6,background:"#ff0000",color:"#fff",borderRadius:"50%",minWidth:18,height:18,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 6px",fontSize:12},children:I})]})}),l.jsxs("div",{className:"icon-circle",onClick:()=>x("/settings"),children:[" ",l.jsx(Cr,{})," "]}),l.jsx("img",{src:(n==null?void 0:n.profileImage)||"/default-profile.png",alt:"profile",style:{width:36,height:36,borderRadius:"50%"}})]})]}),l.jsxs("div",{className:"main-area-row",children:[typeof window<"u"&&window.innerWidth<=600&&!t&&l.jsx("button",{className:"sidebar-arrow-btn",style:{position:"fixed",left:0,top:180,transform:"none",zIndex:1300,background:"#fff",border:"none",borderRadius:"0 8px 8px 0",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",padding:8,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:()=>e(!0),"aria-label":"Open sidebar menu",children:l.jsx(js,{size:22})}),typeof window<"u"&&window.innerWidth<=600&&t&&l.jsx("div",{className:"sidebar-overlay visible",onClick:()=>e(!1),style:{display:"block",position:"fixed",inset:0,background:"rgba(0,0,0,0.35)",zIndex:1200}}),l.jsxs("div",{className:`google-sidebar${typeof window<"u"&&window.innerWidth<=600&&t?" open":""}`,style:typeof window<"u"&&window.innerWidth<=600?{position:"fixed",top:64,left:t?0:"-220px",width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",zIndex:1200,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto",transition:"left 0.25s cubic-bezier(.4,0,.2,1)"}:{position:"fixed",top:64,left:0,width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.04)",zIndex:900,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto"},children:[n&&l.jsxs("div",{className:"sidebar-profile",children:[l.jsx("div",{className:"sidebar-img-circle",children:l.jsx("img",{src:n.profileImage||"/default-profile.png",alt:"profile",style:{width:"100%",height:"100%",objectFit:"cover",border:"none",boxShadow:"none"}})}),l.jsx("h3",{children:n.name}),l.jsx("p",{children:n.username})]}),l.jsxs("div",{className:"sidebar-menu",style:{display:"flex",flexDirection:"column",gap:8,width:"100%"},children:[l.jsxs(ve,{className:"sidebar-btn",to:"/dashboard",children:[l.jsx(Yr,{})," Home"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/students",children:[l.jsx(Ke,{})," Students"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/admins",children:[l.jsx(Ke,{})," Admins"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/parents",children:[l.jsx(qr,{})," Parents"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/marks",children:[l.jsx(Er,{})," Marks"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/attendance",children:[l.jsx(Ke,{})," Attendance"]}),l.jsxs(ve,{className:"sidebar-btn",to:"/schedule",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[l.jsx(Ke,{})," Schedule"]}),l.jsxs("button",{className:"sidebar-btn logout-btn",onClick:J,children:[l.jsx(Qr,{})," Logout"]})]})]}),l.jsx("div",{className:"schedule-main",children:l.jsxs("div",{className:"schedule-container",style:{width:"100%",maxWidth:900,margin:"0 auto"},children:[l.jsxs("div",{style:{display:"flex",gap:"20px",marginBottom:"25px",justifyContent:"center",flexWrap:"wrap"},children:[l.jsxs("div",{children:[l.jsx("label",{style:{marginRight:"8px",fontWeight:"600"},children:"Grade:"}),l.jsxs("select",{value:f,onChange:z=>p(z.target.value),style:{padding:"8px 12px",borderRadius:"8px",border:"1px solid #ccc",cursor:"pointer"},children:[l.jsx("option",{value:"All",children:"All"}),l.jsx("option",{value:"9",children:"9"}),l.jsx("option",{value:"10",children:"10"}),l.jsx("option",{value:"12",children:"12"})]})]}),l.jsxs("div",{children:[l.jsx("label",{style:{marginRight:"8px",fontWeight:"600"},children:"Section:"}),l.jsxs("select",{value:g,onChange:z=>j(z.target.value),style:{padding:"8px 12px",borderRadius:"8px",border:"1px solid #ccc",cursor:"pointer"},children:[l.jsx("option",{value:"All",children:"All"}),E.filter(z=>z!=="All").map(z=>l.jsx("option",{value:z,children:z},z))]})]})]}),l.jsx("h2",{style:{textAlign:"center",marginBottom:"30px",color:"#2563eb"},children:"Full Schedule"}),o&&l.jsx("p",{style:{textAlign:"center"},children:"Loading schedule..."}),u&&l.jsx("p",{style:{color:"red",textAlign:"center"},children:u}),!o&&k.map(z=>{const ae=s[z];return ae?l.jsxs("div",{style:{marginBottom:"40px"},children:[l.jsx("h3",{style:{color:"#1c03ffff",marginBottom:"15px"},children:z}),Object.entries(ae).filter(([_e])=>f==="All"||_e.includes(f)).map(([_e,we])=>{const ue=_e.slice(-1);return g!=="All"&&ue!==g?null:l.jsxs("div",{style:{marginBottom:"18px"},children:[l.jsx("h4",{style:{color:"#4603fcff",marginBottom:"10px"},children:_e}),l.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",background:"#fff",borderRadius:"12px",overflow:"hidden",boxShadow:"0 8px 20px rgba(0,0,0,0.1)"},children:[l.jsx("thead",{style:{background:"#2563eb",color:"#fff"},children:l.jsxs("tr",{children:[l.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Period"}),l.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Subject"}),l.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Time"}),l.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Teacher"})]})}),l.jsx("tbody",{children:Object.entries(we).map(([L,ce],M)=>{var me;const Ie=(ce==null?void 0:ce.teacherName)===(n==null?void 0:n.name),Q=ce.time||((me=L.match(/\((.*?)\)/))==null?void 0:me[1])||"N/A";return l.jsxs("tr",{style:{borderBottom:"1px solid #eee",backgroundColor:Ie?"#dbeafe":"#f3f4f6",color:Ie?"#1e40af":"#6b7280",fontWeight:Ie?"700":"400",borderLeft:Ie?"4px solid #2563eb":"none",opacity:Ie?1:.85},children:[l.jsx("td",{style:{padding:"12px"},children:L}),l.jsx("td",{style:{padding:"12px"},children:ce.subject||"-"}),l.jsx("td",{style:{padding:"12px"},children:Q}),l.jsx("td",{style:{padding:"12px"},children:ce.teacherName||"-"})]},M)})})]})]},_e)})]},z):null})]})}),P&&l.jsxs("div",{className:"right-sidebar",children:[l.jsx("button",{title:"Close sidebar",onClick:()=>V(!1),className:"close-sidebar-btn",style:{marginRight:"40px"},children:l.jsx(js,{})}),l.jsx("div",{style:{display:"flex",alignItems:"center",background:"linear-gradient(90deg, #2563eb, #3b82f6)",color:"#fff",padding:"12px 48px 12px 20px",textAlign:"center",fontWeight:"600",fontSize:"1.2rem",boxShadow:"0 2px 6px rgba(0,0,0,0.1)",borderTopLeftRadius:"1px",borderTopRightRadius:"1px",justifyContent:"flex-start"},children:"My Schedule"}),l.jsx("div",{style:{padding:"20px",height:"calc(100% - 60px)",overflowY:"auto",background:"#f9fafb"},children:o?l.jsx("p",{style:{textAlign:"center",color:"#6b7280"},children:"Loading schedule..."}):Object.keys(q).length===0?l.jsx("p",{style:{textAlign:"center",color:"#6b7280"},children:"No schedule found."}):k.map(z=>{const ae=q[z];if(!ae)return null;const we=new Date().toLocaleDateString("en-US",{weekday:"long"})===z;return l.jsxs("div",{style:{marginBottom:"20px",padding:"10px",borderRadius:"12px",background:we?"#e0f2fe":"#fff",boxShadow:we?"0 4px 12px rgba(59, 130, 246, 0.2)":"0 2px 6px rgba(0,0,0,0.05)"},children:[l.jsx("h4",{style:{color:"#1e3a8a",marginBottom:"12px",fontWeight:"600",fontSize:"1.05rem",borderBottom:"1px solid #e5e7eb",paddingBottom:"5px"},children:z}),Object.entries(ae).map(([ue,L])=>l.jsxs("div",{style:{marginBottom:"12px",background:"#f3f4f6",padding:"12px 15px",borderRadius:"10px",borderLeft:"5px solid #2563eb",boxShadow:"0 1px 3px rgba(0,0,0,0.05)",transition:"transform 0.2s, box-shadow 0.2s"},children:[l.jsx("strong",{style:{display:"block",marginBottom:"6px",color:"#1e3a8a",fontSize:"0.98rem"},children:ue}),l.jsx("ul",{style:{paddingLeft:"18px",margin:0},children:L.map((ce,M)=>l.jsxs("li",{style:{marginBottom:"6px",color:"#374151",fontSize:"0.95rem"},children:[l.jsx("span",{style:{fontWeight:"600",color:"#2563eb"},children:ce.class})," - ",ce.subject," (",ce.time,")"]},M))})]},ue))]},z)})})]}),!P&&l.jsx("button",{title:"Open sidebar",onClick:()=>V(!0),style:{position:"fixed",top:"80px",right:"20px",width:"35px",height:"40px",background:"linear-gradient(90deg, #2563eb, #3b82f6)",color:"#fff",border:"none",borderRadius:"20px",boxShadow:"0 4px 12px rgba(59,130,246, 0.15)",zIndex:301,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"right 0.3s"},children:l.jsx(SI,{})})]})]})}const ic=(t,e)=>[String(t),String(e)].sort().join("_");function jT(){const t=Ln(),e=Ds(),n=y.useRef(null),r=JSON.parse(localStorage.getItem("teacher"))||{},s=String(r.userId||""),[i,o]=y.useState([]),[c,u]=y.useState([]),[d,f]=y.useState([]),[p,g]=y.useState([]),[j,v]=y.useState(""),[N,R]=y.useState(!0),[b,_]=y.useState({}),[w,P]=y.useState(!1),[V,X]=y.useState({}),C=e.state||{},x=C.contact||C.user||null,E=C.chatId||null,k=C.tab||null,[T,A]=y.useState(k||"student"),[I,J]=y.useState(x||null),[Ee,q]=y.useState(E||null),[ge,G]=y.useState(null),[U,te]=y.useState({}),[z,ae]=y.useState({}),_e=(B={})=>B.profileImage||B.profile||B.avatar||"/default-profile.png";y.useEffect(()=>{(async()=>{try{const[Y,re,se,D]=await Promise.all([fetch("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Students.json").then(he=>he.json()),fetch("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Parents.json").then(he=>he.json()),fetch("https://ethiostore-17d9f-default-rtdb.firebaseio.com/School_Admins.json").then(he=>he.json()),fetch("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Users.json").then(he=>he.json())]),W=D||{},$=Object.values(Y||{}).map(he=>{const ye=W[he.userId]||{};return{userId:he.userId,name:ye.name||he.name||"Student",profileImage:_e(ye)}}),ee=Object.values(re||{}).map(he=>{const ye=W[he.userId]||{};return{userId:he.userId,name:ye.name||he.name||"Parent",profileImage:_e(ye)}}),ne=Object.values(se||{}).map(he=>{const ye=W[he.userId]||{};return{userId:he.userId,name:he.name||ye.name||"Admin",profileImage:_e(ye)}});o($),u(ee),f(ne)}catch(Y){console.error(" Fetch error:",Y)}})()},[]),y.useEffect(()=>{if(!s)return;const B=[...i,...c,...d],Y=[];return B.forEach(re=>{if(!re||!re.userId)return;const se=ic(s,re.userId);try{const D=Lt(Vt,`Chats/${se}/unread/${s}`),W=Ji(D,$=>{const ee=$.val();X(ne=>({...ne,[re.userId]:Number(ee)||0}))});Y.push(W)}catch{}}),()=>{Y.forEach(re=>re())}},[i,c,d,s]),y.useEffect(()=>{const B=()=>{const Y=typeof window<"u"&&window.innerWidth<640;P(Y),Y&&R(!1)};return B(),window.addEventListener("resize",B),()=>window.removeEventListener("resize",B)},[]),y.useEffect(()=>{x&&J(x),E&&q(E),k&&A(k)},[x,E,k]),y.useEffect(()=>{I||(T==="student"&&i.length&&J(i[0]),T==="parent"&&c.length&&J(c[0]),T==="admin"&&d.length&&J(d[0]))},[T,i,c,d,I]),y.useEffect(()=>{const B=x;if(B){if(T==="student"&&i.length){const Y=i.find(re=>re.userId===B.userId);Y&&J(Y)}if(T==="parent"&&c.length){const Y=c.find(re=>re.userId===B.userId);Y&&J(Y)}if(T==="admin"&&d.length){const Y=d.find(re=>re.userId===B.userId);Y&&J(Y)}}},[i,c,d,x,T]),y.useEffect(()=>{if(!I||!s)return;const B=Ee||ic(s,I.userId);q(B);const Y=Lt(Vt,`Chats/${B}/messages`),re=Ji(Y,se=>{const D=se.val()||{},W=Object.entries(D).filter(([$,ee])=>!ee.deleted).map(([$,ee])=>({id:$,...ee,isTeacher:ee.senderId===s})).sort(($,ee)=>$.timeStamp-ee.timeStamp);g(W),Object.entries(D).forEach(([$,ee])=>{ee&&!ee.seen&&ee.receiverId===s&&Nr(Lt(Vt,`Chats/${B}/messages/${$}`),{seen:!0}).catch(console.error)}),Nr(Lt(Vt,`Chats/${B}/unread`),{[s]:0}).catch(console.error)});return()=>re()},[I,s,Ee]),y.useEffect(()=>{try{const B=Lt(Vt,"Presence"),Y=Ji(B,re=>{const se=re.val()||{};_(se)});return()=>Y()}catch(B){console.warn("Presence listener unavailable:",B)}},[]);const we=async()=>{if(!j.trim()||!I)return;const B=Object.keys(U).find(re=>U[re]),Y=Ee||ic(s,I.userId);if(B)await Nr(Lt(Vt,`Chats/${Y}/messages/${B}`),{text:j,edited:!0}),te({}),G(null),v("");else{const re=Lt(Vt,`Chats/${Y}/messages`),se={senderId:s,receiverId:I.userId,type:"text",text:j,seen:!1,edited:!1,deleted:!1,timeStamp:Date.now()};await d6(re,se),await Nr(Lt(Vt,`Chats/${Y}/participants`),{[s]:!0,[I.userId]:!0}),await Nr(Lt(Vt,`Chats/${Y}/lastMessage`),{text:j,senderId:s,seen:!1,timeStamp:se.timeStamp});try{const D=Lt(Vt,`Chats/${Y}/unread/${I.userId}`);await Nr(Lt(Vt,`Chats/${Y}/unread`),{[s]:0,[I.userId]:1})}catch{}v("")}},ue=B=>{const Y=Ee||ic(s,I.userId);Nr(Lt(Vt,`Chats/${Y}/messages/${B}`),{deleted:!0}).catch(console.error)},L=(B,Y)=>{te({[B]:!0}),v(Y),G(B)},ce=B=>{const Y=new Date(B);return`${Y.getHours().toString().padStart(2,"0")}:${Y.getMinutes().toString().padStart(2,"0")}`},M=B=>{if(!B)return"";const Y=new Date(Number(B)),re=new Date,se=new Date(re.getFullYear(),re.getMonth(),re.getDate()),D=new Date(Y.getFullYear(),Y.getMonth(),Y.getDate()),W=se-D,$=Math.floor(W/(24*60*60*1e3));return $===0?"Today":$===1?"Yesterday":$>1&&$<7?`${$} days ago`:Y.toLocaleDateString()};y.useEffect(()=>{var B;(B=n.current)==null||B.scrollIntoView({behavior:"smooth"})},[p]);const Ie=T==="student"?i:T==="parent"?c:d,Q=B=>{if(!B)return!1;const re=(()=>{if((b==null?void 0:b[B])!==void 0)return b[B];const se=String(B);if((b==null?void 0:b[se])!==void 0)return b[se];const D=Number(B);if(!Number.isNaN(D)&&(b==null?void 0:b[D])!==void 0)return b[D];for(const[,W]of Object.entries(b||{}))try{if(W&&(W.userId===B||String(W.userId)===se))return W}catch{}})();if(re==null)return!1;if(typeof re=="boolean")return re===!0;if(typeof re=="object"){if(re.state==="online"||re.online===!0)return!0;if(re.lastSeen){const se=Number(re.lastSeen)||0;return Date.now()-se<6e4}if(typeof re=="number")return Date.now()-re<6e4}return!1},me=B=>{const Y=b==null?void 0:b[B];if(!Y)return null;let re=null;if((typeof Y=="number"||/^[0-9]+$/.test(String(Y)))&&(re=Number(Y)),typeof Y=="object"&&(re=Y.lastSeen||Y.timestamp||Y.lastActive||Y.last_seen||Y.time||null),!re)return null;const se=Date.now()-Number(re),D=Math.floor(se/1e3);if(D<60)return"last seen just now";const W=Math.floor(D/60);if(W<60)return`last seen ${W}m ago`;const $=Math.floor(W/60);if($<24)return`last seen ${$}h ago`;const ee=Math.floor($/24);return ee<7?`last seen ${ee}d ago`:`last seen on ${new Date(re).toLocaleDateString()}`};return l.jsxs("div",{style:{display:"flex",height:"100vh",background:"#eef2f7",fontFamily:"sans-serif"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"stretch"},children:[l.jsxs("div",{style:{width:N?w?220:280:0,background:"#fff",padding:N?16:0,boxShadow:N?"2px 0 10px rgba(0,0,0,0.1)":"none",display:N?"flex":"none",flexDirection:"column",transition:"width 180ms ease"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[l.jsx("button",{onClick:()=>t(-1),style:{border:"none",background:"none",padding:4,cursor:"pointer"},children:l.jsx(wI,{size:18})}),l.jsx("div",{style:{display:"flex",gap:6,margin:"12px 0",alignItems:"center"},children:["student","parent","admin"].map(B=>l.jsx("button",{onClick:()=>{A(B),J(null),q(null)},style:{flex:1,padding:8,borderRadius:20,border:"none",background:T===B?"#4facfe":"#ddd",color:T===B?"#fff":"#000",cursor:"pointer",fontSize:14},children:B.charAt(0).toUpperCase()+B.slice(1)}))})]}),l.jsx("div",{style:{marginTop:8,overflowY:"auto",flex:1},children:Ie.map(B=>l.jsxs("div",{onClick:()=>{J(B),q(null)},style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:10,padding:10,borderRadius:14,cursor:"pointer",marginBottom:8,background:(I==null?void 0:I.userId)===B.userId?"#dbeafe":"#f9fafb",boxShadow:(I==null?void 0:I.userId)===B.userId?"0 2px 10px rgba(0,0,0,0.1)":"none"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[l.jsxs("div",{style:{position:"relative"},children:[l.jsx("img",{src:B.profileImage,alt:B.name,onError:Y=>Y.target.src="/default-profile.png",style:{width:w?36:40,height:w?36:40,borderRadius:"50%",objectFit:"cover"}}),l.jsx("span",{style:{position:"absolute",right:-2,bottom:-2,width:12,height:12,borderRadius:12,border:"2px solid #fff",background:Q(B.userId)?"#34D399":"#cbd5e1"}})]}),l.jsx("span",{style:{fontWeight:500,marginLeft:0},children:B.name})]}),V[B.userId]>0?l.jsx("div",{style:{minWidth:26,height:26,display:"flex",alignItems:"center",justifyContent:"center",background:"#ef4444",color:"#fff",borderRadius:14,padding:"0 6px",fontSize:12,fontWeight:600},children:V[B.userId]>99?"99+":V[B.userId]}):l.jsx("div",{style:{width:26}})]},B.userId))})]}),l.jsx("div",{style:{width:28,display:"flex",alignItems:"flex-start",justifyContent:"center"},children:l.jsx("button",{onClick:()=>R(B=>!B),style:{border:"none",background:"#fff",borderRadius:4,padding:4,boxShadow:"0 1px 4px rgba(0,0,0,0.08)",cursor:"pointer",marginTop:8},"aria-label":"Toggle sidebar",children:N?"":""})})]}),l.jsx("div",{style:{flex:1,padding:16,display:"flex",flexDirection:"column"},children:I?l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:"12px 0",borderBottom:"1px solid #ccc",boxShadow:"0 2px 6px rgba(0,0,0,0.05)",background:"#fff",borderRadius:8,marginBottom:8},children:[l.jsx("img",{src:I.profileImage,alt:I.name,onError:B=>B.target.src="/default-profile.png",style:{width:w?40:50,height:w?40:50,borderRadius:"50%",objectFit:"cover"}}),l.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[l.jsx("span",{style:{fontWeight:600,fontSize:16},children:I.name}),l.jsx("span",{style:{fontSize:12,color:Q(I.userId)?"#16A34A":"#666"},children:Q(I.userId)?"Online":me(I.userId)||T.charAt(0).toUpperCase()+T.slice(1)})]})]}),l.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"12px 16px",display:"flex",flexDirection:"column"},children:[p.map(B=>{const Y=B.isTeacher,re=!!U[B.id],se=ge===B.id;return l.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:Y?"flex-end":"flex-start",marginBottom:10},children:[l.jsxs("div",{onClick:()=>G(B.id),style:{maxWidth:w?"85%":"70%",background:Y?"#4facfe":"#fff",color:Y?"#fff":"#000",padding:"10px 14px",borderRadius:18,borderTopRightRadius:Y?0:18,borderTopLeftRadius:Y?18:0,boxShadow:"0 1px 3px rgba(0,0,0,0.1)",wordBreak:"break-word",cursor:"pointer",position:"relative"},children:[B.text," ",B.edited&&l.jsx("small",{style:{fontSize:10},children:" (edited)"}),l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:6,marginTop:4,fontSize:11,color:Y?"#fff":"#888"},children:[l.jsx("span",{style:{marginRight:6,fontSize:11,opacity:.9},children:M(B.timeStamp)}),l.jsx("span",{children:ce(B.timeStamp)}),Y&&!B.deleted&&l.jsxs("span",{style:{display:"flex",gap:0},children:[l.jsx(ao,{size:10,color:"#fff",style:{opacity:.8}}),B.seen&&l.jsx(ao,{size:10,color:"#f3f7f8",style:{marginLeft:2,opacity:.95}})]})]})]}),se&&Y&&!B.deleted&&!re&&l.jsxs("div",{style:{display:"flex",gap:6,marginTop:4,fontSize:12,justifyContent:Y?"flex-end":"flex-start"},children:[l.jsx("button",{onClick:()=>L(B.id,B.text),style:{padding:"2px 6px",borderRadius:4,border:"1px solid #ccc",cursor:"pointer",background:"#f1f1f1"},children:"Edit"}),l.jsx("button",{onClick:()=>ue(B.id),style:{padding:"2px 6px",borderRadius:4,border:"1px solid #ccc",cursor:"pointer",background:"#f1f1f1",color:"red"},children:"Delete"})]})]},B.id)}),l.jsx("div",{ref:n})]}),l.jsxs("div",{style:{display:"flex",gap:8,marginTop:8},children:[l.jsx("input",{value:j,onChange:B=>v(B.target.value),onKeyDown:B=>B.key==="Enter"&&we(),placeholder:"Type a message...",style:{flex:1,padding:w?10:12,borderRadius:25,border:"1px solid #ccc",outline:"none"}}),l.jsx("button",{onClick:we,style:{width:w?40:45,height:w?40:45,borderRadius:"50%",background:"#4facfe",border:"none",color:"#fff",display:"flex",justifyContent:"center",alignItems:"center"},children:l.jsx(Dv,{})})]})]}):l.jsx("h3",{style:{textAlign:"center",marginTop:50},children:"Select a user to start chatting "})})]})}function kT(){return l.jsx(IE,{basename:"/Gojo-Teacher-Web",children:l.jsxs(rE,{children:[l.jsx(hn,{path:"/",element:l.jsx(zd,{})}),l.jsx(hn,{path:"/login",element:l.jsx(zd,{})}),l.jsx(hn,{path:"/register",element:l.jsx(fI,{})}),l.jsx(hn,{path:"/dashboard",element:l.jsx(rT,{})}),l.jsx(hn,{path:"/students",element:l.jsx(cT,{})}),l.jsx(hn,{path:"/admins",element:l.jsx(gT,{})}),l.jsx(hn,{path:"/marks",element:l.jsx(dT,{})}),l.jsx(hn,{path:"/attendance",element:l.jsx(hT,{})}),l.jsx(hn,{path:"/notes",element:l.jsx(xT,{})})," ",l.jsx(hn,{path:"/parents",element:l.jsx(wT,{})}),l.jsx(hn,{path:"/settings",element:l.jsx(ET,{})}),l.jsx(hn,{path:"all-chat",element:l.jsx(jT,{})}),l.jsx(hn,{path:"schedule",element:l.jsx(IT,{})}),l.jsx(hn,{path:"*",element:l.jsx(zd,{})})]})})}const TT=y.createContext(),NT=({children:t})=>{const[e,n]=y.useState("light");y.useEffect(()=>{const s=localStorage.getItem("theme");s&&n(s)},[]),y.useEffect(()=>{document.body.className=e==="dark"?"dark-mode":"",localStorage.setItem("theme",e)},[e]);const r=()=>{n(s=>s==="light"?"dark":"light")};return l.jsx(TT.Provider,{value:{theme:e,toggleTheme:r},children:t})};function RT(){return l.jsx(NT,{children:l.jsx(kT,{})})}nh.createRoot(document.getElementById("root")).render(l.jsx(mn.StrictMode,{children:l.jsx(RT,{})}));
