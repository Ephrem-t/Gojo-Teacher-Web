(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Y2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Vy={exports:{}},bu={},Gy={exports:{}},rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ol=Symbol.for("react.element"),Q2=Symbol.for("react.portal"),J2=Symbol.for("react.fragment"),X2=Symbol.for("react.strict_mode"),Z2=Symbol.for("react.profiler"),e_=Symbol.for("react.provider"),t_=Symbol.for("react.context"),n_=Symbol.for("react.forward_ref"),r_=Symbol.for("react.suspense"),s_=Symbol.for("react.memo"),i_=Symbol.for("react.lazy"),qm=Symbol.iterator;function o_(t){return t===null||typeof t!="object"?null:(t=qm&&t[qm]||t["@@iterator"],typeof t=="function"?t:null)}var Ky={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qy=Object.assign,Yy={};function Co(t,e,n){this.props=t,this.context=e,this.refs=Yy,this.updater=n||Ky}Co.prototype.isReactComponent={};Co.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Co.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Qy(){}Qy.prototype=Co.prototype;function Rf(t,e,n){this.props=t,this.context=e,this.refs=Yy,this.updater=n||Ky}var Af=Rf.prototype=new Qy;Af.constructor=Rf;qy(Af,Co.prototype);Af.isPureReactComponent=!0;var Ym=Array.isArray,Jy=Object.prototype.hasOwnProperty,Pf={current:null},Xy={key:!0,ref:!0,__self:!0,__source:!0};function Zy(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Jy.call(e,r)&&!Xy.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:ol,type:t,key:i,ref:o,props:s,_owner:Pf.current}}function a_(t,e){return{$$typeof:ol,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Of(t){return typeof t=="object"&&t!==null&&t.$$typeof===ol}function l_(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Qm=/\/+/g;function pd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?l_(""+t.key):e.toString(36)}function dc(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ol:case Q2:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+pd(o,0):r,Ym(s)?(n="",t!=null&&(n=t.replace(Qm,"$&/")+"/"),dc(s,e,n,"",function(d){return d})):s!=null&&(Of(s)&&(s=a_(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Qm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Ym(t))for(var c=0;c<t.length;c++){i=t[c];var u=r+pd(i,c);o+=dc(i,e,n,u,s)}else if(u=o_(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=r+pd(i,c++),o+=dc(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ul(t,e,n){if(t==null)return t;var r=[],s=0;return dc(t,r,"","",function(i){return e.call(n,i,s++)}),r}function c_(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var kn={current:null},hc={transition:null},u_={ReactCurrentDispatcher:kn,ReactCurrentBatchConfig:hc,ReactCurrentOwner:Pf};function ex(){throw Error("act(...) is not supported in production builds of React.")}rt.Children={map:Ul,forEach:function(t,e,n){Ul(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ul(t,function(){e++}),e},toArray:function(t){return Ul(t,function(e){return e})||[]},only:function(t){if(!Of(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};rt.Component=Co;rt.Fragment=J2;rt.Profiler=Z2;rt.PureComponent=Rf;rt.StrictMode=X2;rt.Suspense=r_;rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=u_;rt.act=ex;rt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=qy({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Pf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)Jy.call(e,u)&&!Xy.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:ol,type:t.type,key:s,ref:i,props:r,_owner:o}};rt.createContext=function(t){return t={$$typeof:t_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:e_,_context:t},t.Consumer=t};rt.createElement=Zy;rt.createFactory=function(t){var e=Zy.bind(null,t);return e.type=t,e};rt.createRef=function(){return{current:null}};rt.forwardRef=function(t){return{$$typeof:n_,render:t}};rt.isValidElement=Of;rt.lazy=function(t){return{$$typeof:i_,_payload:{_status:-1,_result:t},_init:c_}};rt.memo=function(t,e){return{$$typeof:s_,type:t,compare:e===void 0?null:e}};rt.startTransition=function(t){var e=hc.transition;hc.transition={};try{t()}finally{hc.transition=e}};rt.unstable_act=ex;rt.useCallback=function(t,e){return kn.current.useCallback(t,e)};rt.useContext=function(t){return kn.current.useContext(t)};rt.useDebugValue=function(){};rt.useDeferredValue=function(t){return kn.current.useDeferredValue(t)};rt.useEffect=function(t,e){return kn.current.useEffect(t,e)};rt.useId=function(){return kn.current.useId()};rt.useImperativeHandle=function(t,e,n){return kn.current.useImperativeHandle(t,e,n)};rt.useInsertionEffect=function(t,e){return kn.current.useInsertionEffect(t,e)};rt.useLayoutEffect=function(t,e){return kn.current.useLayoutEffect(t,e)};rt.useMemo=function(t,e){return kn.current.useMemo(t,e)};rt.useReducer=function(t,e,n){return kn.current.useReducer(t,e,n)};rt.useRef=function(t){return kn.current.useRef(t)};rt.useState=function(t){return kn.current.useState(t)};rt.useSyncExternalStore=function(t,e,n){return kn.current.useSyncExternalStore(t,e,n)};rt.useTransition=function(){return kn.current.useTransition()};rt.version="18.3.1";Gy.exports=rt;var g=Gy.exports;const Gt=Y2(g);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d_=g,h_=Symbol.for("react.element"),f_=Symbol.for("react.fragment"),p_=Object.prototype.hasOwnProperty,m_=d_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,g_={key:!0,ref:!0,__self:!0,__source:!0};function tx(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)p_.call(e,r)&&!g_.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:h_,type:t,key:i,ref:o,props:s,_owner:m_.current}}bu.Fragment=f_;bu.jsx=tx;bu.jsxs=tx;Vy.exports=bu;var a=Vy.exports,ch={},nx={exports:{}},Vn={},rx={exports:{}},sx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Z,K){var ae=Z.length;Z.push(K);e:for(;0<ae;){var H=ae-1>>>1,ue=Z[H];if(0<s(ue,K))Z[H]=K,Z[ae]=ue,ae=H;else break e}}function n(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var K=Z[0],ae=Z.pop();if(ae!==K){Z[0]=ae;e:for(var H=0,ue=Z.length,Ie=ue>>>1;H<Ie;){var _e=2*(H+1)-1,me=Z[_e],z=_e+1,pe=Z[z];if(0>s(me,ae))z<ue&&0>s(pe,me)?(Z[H]=pe,Z[z]=ae,H=z):(Z[H]=me,Z[_e]=ae,H=_e);else if(z<ue&&0>s(pe,ae))Z[H]=pe,Z[z]=ae,H=z;else break e}}return K}function s(Z,K){var ae=Z.sortIndex-K.sortIndex;return ae!==0?ae:Z.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],f=1,p=null,y=3,I=!1,w=!1,T=!1,A=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(Z){for(var K=n(d);K!==null;){if(K.callback===null)r(d);else if(K.startTime<=Z)r(d),K.sortIndex=K.expirationTime,e(u,K);else break;K=n(d)}}function O(Z){if(T=!1,v(Z),!w)if(n(u)!==null)w=!0,J(G);else{var K=n(d);K!==null&&Ce(O,K.startTime-Z)}}function G(Z,K){w=!1,T&&(T=!1,S(x),x=-1),I=!0;var ae=y;try{for(v(K),p=n(u);p!==null&&(!(p.expirationTime>K)||Z&&!N());){var H=p.callback;if(typeof H=="function"){p.callback=null,y=p.priorityLevel;var ue=H(p.expirationTime<=K);K=t.unstable_now(),typeof ue=="function"?p.callback=ue:p===n(u)&&r(u),v(K)}else r(u);p=n(u)}if(p!==null)var Ie=!0;else{var _e=n(d);_e!==null&&Ce(O,_e.startTime-K),Ie=!1}return Ie}finally{p=null,y=ae,I=!1}}var oe=!1,E=null,x=-1,C=5,k=-1;function N(){return!(t.unstable_now()-k<C)}function R(){if(E!==null){var Z=t.unstable_now();k=Z;var K=!0;try{K=E(!0,Z)}finally{K?j():(oe=!1,E=null)}}else oe=!1}var j;if(typeof _=="function")j=function(){_(R)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,Ee=re.port2;re.port1.onmessage=R,j=function(){Ee.postMessage(null)}}else j=function(){A(R,0)};function J(Z){E=Z,oe||(oe=!0,j())}function Ce(Z,K){x=A(function(){Z(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Z){Z.callback=null},t.unstable_continueExecution=function(){w||I||(w=!0,J(G))},t.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<Z?Math.floor(1e3/Z):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(Z){switch(y){case 1:case 2:case 3:var K=3;break;default:K=y}var ae=y;y=K;try{return Z()}finally{y=ae}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Z,K){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var ae=y;y=Z;try{return K()}finally{y=ae}},t.unstable_scheduleCallback=function(Z,K,ae){var H=t.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?H+ae:H):ae=H,Z){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=ae+ue,Z={id:f++,callback:K,priorityLevel:Z,startTime:ae,expirationTime:ue,sortIndex:-1},ae>H?(Z.sortIndex=ae,e(d,Z),n(u)===null&&Z===n(d)&&(T?(S(x),x=-1):T=!0,Ce(O,ae-H))):(Z.sortIndex=ue,e(u,Z),w||I||(w=!0,J(G))),Z},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(Z){var K=y;return function(){var ae=y;y=K;try{return Z.apply(this,arguments)}finally{y=ae}}}})(sx);rx.exports=sx;var y_=rx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x_=g,Hn=y_;function fe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ix=new Set,ka={};function ji(t,e){oo(t,e),oo(t+"Capture",e)}function oo(t,e){for(ka[t]=e,t=0;t<e.length;t++)ix.add(e[t])}var qr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),uh=Object.prototype.hasOwnProperty,v_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Jm={},Xm={};function w_(t){return uh.call(Xm,t)?!0:uh.call(Jm,t)?!1:v_.test(t)?Xm[t]=!0:(Jm[t]=!0,!1)}function __(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function b_(t,e,n,r){if(e===null||typeof e>"u"||__(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Nn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var gn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){gn[t]=new Nn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];gn[e]=new Nn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){gn[t]=new Nn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){gn[t]=new Nn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){gn[t]=new Nn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){gn[t]=new Nn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){gn[t]=new Nn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){gn[t]=new Nn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){gn[t]=new Nn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Df=/[\-:]([a-z])/g;function Mf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Df,Mf);gn[e]=new Nn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Df,Mf);gn[e]=new Nn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Df,Mf);gn[e]=new Nn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){gn[t]=new Nn(t,1,!1,t.toLowerCase(),null,!1,!1)});gn.xlinkHref=new Nn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){gn[t]=new Nn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Lf(t,e,n,r){var s=gn.hasOwnProperty(e)?gn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(b_(e,n,s,r)&&(n=null),r||s===null?w_(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ts=x_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$l=Symbol.for("react.element"),Li=Symbol.for("react.portal"),Fi=Symbol.for("react.fragment"),Ff=Symbol.for("react.strict_mode"),dh=Symbol.for("react.profiler"),ox=Symbol.for("react.provider"),ax=Symbol.for("react.context"),zf=Symbol.for("react.forward_ref"),hh=Symbol.for("react.suspense"),fh=Symbol.for("react.suspense_list"),Bf=Symbol.for("react.memo"),ms=Symbol.for("react.lazy"),lx=Symbol.for("react.offscreen"),Zm=Symbol.iterator;function Ho(t){return t===null||typeof t!="object"?null:(t=Zm&&t[Zm]||t["@@iterator"],typeof t=="function"?t:null)}var Bt=Object.assign,md;function ia(t){if(md===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);md=e&&e[1]||""}return`
`+md+t}var gd=!1;function yd(t,e){if(!t||gd)return"";gd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,c=i.length-1;1<=o&&0<=c&&s[o]!==i[c];)c--;for(;1<=o&&0<=c;o--,c--)if(s[o]!==i[c]){if(o!==1||c!==1)do if(o--,c--,0>c||s[o]!==i[c]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{gd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ia(t):""}function S_(t){switch(t.tag){case 5:return ia(t.type);case 16:return ia("Lazy");case 13:return ia("Suspense");case 19:return ia("SuspenseList");case 0:case 2:case 15:return t=yd(t.type,!1),t;case 11:return t=yd(t.type.render,!1),t;case 1:return t=yd(t.type,!0),t;default:return""}}function ph(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Fi:return"Fragment";case Li:return"Portal";case dh:return"Profiler";case Ff:return"StrictMode";case hh:return"Suspense";case fh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ax:return(t.displayName||"Context")+".Consumer";case ox:return(t._context.displayName||"Context")+".Provider";case zf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Bf:return e=t.displayName||null,e!==null?e:ph(t.type)||"Memo";case ms:e=t._payload,t=t._init;try{return ph(t(e))}catch{}}return null}function C_(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ph(e);case 8:return e===Ff?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ds(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function cx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function j_(t){var e=cx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Wl(t){t._valueTracker||(t._valueTracker=j_(t))}function ux(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=cx(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Rc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function mh(t,e){var n=e.checked;return Bt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function eg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ds(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function dx(t,e){e=e.checked,e!=null&&Lf(t,"checked",e,!1)}function gh(t,e){dx(t,e);var n=Ds(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?yh(t,e.type,n):e.hasOwnProperty("defaultValue")&&yh(t,e.type,Ds(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function tg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function yh(t,e,n){(e!=="number"||Rc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var oa=Array.isArray;function Qi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ds(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function xh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(fe(91));return Bt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ng(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(fe(92));if(oa(n)){if(1<n.length)throw Error(fe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ds(n)}}function hx(t,e){var n=Ds(e.value),r=Ds(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function rg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function fx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?fx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Hl,px=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Hl=Hl||document.createElement("div"),Hl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Hl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Na(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ca={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},E_=["Webkit","ms","Moz","O"];Object.keys(ca).forEach(function(t){E_.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ca[e]=ca[t]})});function mx(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ca.hasOwnProperty(t)&&ca[t]?(""+e).trim():e+"px"}function gx(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=mx(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var I_=Bt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wh(t,e){if(e){if(I_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(fe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(fe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(fe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(fe(62))}}function _h(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bh=null;function Uf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Sh=null,Ji=null,Xi=null;function sg(t){if(t=cl(t)){if(typeof Sh!="function")throw Error(fe(280));var e=t.stateNode;e&&(e=Iu(e),Sh(t.stateNode,t.type,e))}}function yx(t){Ji?Xi?Xi.push(t):Xi=[t]:Ji=t}function xx(){if(Ji){var t=Ji,e=Xi;if(Xi=Ji=null,sg(t),e)for(t=0;t<e.length;t++)sg(e[t])}}function vx(t,e){return t(e)}function wx(){}var xd=!1;function _x(t,e,n){if(xd)return t(e,n);xd=!0;try{return vx(t,e,n)}finally{xd=!1,(Ji!==null||Xi!==null)&&(wx(),xx())}}function Ta(t,e){var n=t.stateNode;if(n===null)return null;var r=Iu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(fe(231,e,typeof n));return n}var Ch=!1;if(qr)try{var Vo={};Object.defineProperty(Vo,"passive",{get:function(){Ch=!0}}),window.addEventListener("test",Vo,Vo),window.removeEventListener("test",Vo,Vo)}catch{Ch=!1}function k_(t,e,n,r,s,i,o,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var ua=!1,Ac=null,Pc=!1,jh=null,N_={onError:function(t){ua=!0,Ac=t}};function T_(t,e,n,r,s,i,o,c,u){ua=!1,Ac=null,k_.apply(N_,arguments)}function R_(t,e,n,r,s,i,o,c,u){if(T_.apply(this,arguments),ua){if(ua){var d=Ac;ua=!1,Ac=null}else throw Error(fe(198));Pc||(Pc=!0,jh=d)}}function Ei(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function bx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ig(t){if(Ei(t)!==t)throw Error(fe(188))}function A_(t){var e=t.alternate;if(!e){if(e=Ei(t),e===null)throw Error(fe(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return ig(s),t;if(i===r)return ig(s),e;i=i.sibling}throw Error(fe(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o)throw Error(fe(189))}}if(n.alternate!==r)throw Error(fe(190))}if(n.tag!==3)throw Error(fe(188));return n.stateNode.current===n?t:e}function Sx(t){return t=A_(t),t!==null?Cx(t):null}function Cx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Cx(t);if(e!==null)return e;t=t.sibling}return null}var jx=Hn.unstable_scheduleCallback,og=Hn.unstable_cancelCallback,P_=Hn.unstable_shouldYield,O_=Hn.unstable_requestPaint,Kt=Hn.unstable_now,D_=Hn.unstable_getCurrentPriorityLevel,$f=Hn.unstable_ImmediatePriority,Ex=Hn.unstable_UserBlockingPriority,Oc=Hn.unstable_NormalPriority,M_=Hn.unstable_LowPriority,Ix=Hn.unstable_IdlePriority,Su=null,Rr=null;function L_(t){if(Rr&&typeof Rr.onCommitFiberRoot=="function")try{Rr.onCommitFiberRoot(Su,t,void 0,(t.current.flags&128)===128)}catch{}}var fr=Math.clz32?Math.clz32:B_,F_=Math.log,z_=Math.LN2;function B_(t){return t>>>=0,t===0?32:31-(F_(t)/z_|0)|0}var Vl=64,Gl=4194304;function aa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Dc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~s;c!==0?r=aa(c):(i&=o,i!==0&&(r=aa(i)))}else o=n&~s,o!==0?r=aa(o):i!==0&&(r=aa(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-fr(e),s=1<<n,r|=t[n],e&=~s;return r}function U_(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $_(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-fr(i),c=1<<o,u=s[o];u===-1?(!(c&n)||c&r)&&(s[o]=U_(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function Eh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function kx(){var t=Vl;return Vl<<=1,!(Vl&4194240)&&(Vl=64),t}function vd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function al(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-fr(e),t[e]=n}function W_(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-fr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Wf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-fr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var xt=0;function Nx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Tx,Hf,Rx,Ax,Px,Ih=!1,Kl=[],bs=null,Ss=null,Cs=null,Ra=new Map,Aa=new Map,ys=[],H_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ag(t,e){switch(t){case"focusin":case"focusout":bs=null;break;case"dragenter":case"dragleave":Ss=null;break;case"mouseover":case"mouseout":Cs=null;break;case"pointerover":case"pointerout":Ra.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Aa.delete(e.pointerId)}}function Go(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=cl(e),e!==null&&Hf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function V_(t,e,n,r,s){switch(e){case"focusin":return bs=Go(bs,t,e,n,r,s),!0;case"dragenter":return Ss=Go(Ss,t,e,n,r,s),!0;case"mouseover":return Cs=Go(Cs,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ra.set(i,Go(Ra.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Aa.set(i,Go(Aa.get(i)||null,t,e,n,r,s)),!0}return!1}function Ox(t){var e=ri(t.target);if(e!==null){var n=Ei(e);if(n!==null){if(e=n.tag,e===13){if(e=bx(n),e!==null){t.blockedOn=e,Px(t.priority,function(){Rx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function fc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=kh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);bh=r,n.target.dispatchEvent(r),bh=null}else return e=cl(n),e!==null&&Hf(e),t.blockedOn=n,!1;e.shift()}return!0}function lg(t,e,n){fc(t)&&n.delete(e)}function G_(){Ih=!1,bs!==null&&fc(bs)&&(bs=null),Ss!==null&&fc(Ss)&&(Ss=null),Cs!==null&&fc(Cs)&&(Cs=null),Ra.forEach(lg),Aa.forEach(lg)}function Ko(t,e){t.blockedOn===e&&(t.blockedOn=null,Ih||(Ih=!0,Hn.unstable_scheduleCallback(Hn.unstable_NormalPriority,G_)))}function Pa(t){function e(s){return Ko(s,t)}if(0<Kl.length){Ko(Kl[0],t);for(var n=1;n<Kl.length;n++){var r=Kl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(bs!==null&&Ko(bs,t),Ss!==null&&Ko(Ss,t),Cs!==null&&Ko(Cs,t),Ra.forEach(e),Aa.forEach(e),n=0;n<ys.length;n++)r=ys[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ys.length&&(n=ys[0],n.blockedOn===null);)Ox(n),n.blockedOn===null&&ys.shift()}var Zi=ts.ReactCurrentBatchConfig,Mc=!0;function K_(t,e,n,r){var s=xt,i=Zi.transition;Zi.transition=null;try{xt=1,Vf(t,e,n,r)}finally{xt=s,Zi.transition=i}}function q_(t,e,n,r){var s=xt,i=Zi.transition;Zi.transition=null;try{xt=4,Vf(t,e,n,r)}finally{xt=s,Zi.transition=i}}function Vf(t,e,n,r){if(Mc){var s=kh(t,e,n,r);if(s===null)Nd(t,e,r,Lc,n),ag(t,r);else if(V_(s,t,e,n,r))r.stopPropagation();else if(ag(t,r),e&4&&-1<H_.indexOf(t)){for(;s!==null;){var i=cl(s);if(i!==null&&Tx(i),i=kh(t,e,n,r),i===null&&Nd(t,e,r,Lc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Nd(t,e,r,null,n)}}var Lc=null;function kh(t,e,n,r){if(Lc=null,t=Uf(r),t=ri(t),t!==null)if(e=Ei(t),e===null)t=null;else if(n=e.tag,n===13){if(t=bx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Lc=t,null}function Dx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(D_()){case $f:return 1;case Ex:return 4;case Oc:case M_:return 16;case Ix:return 536870912;default:return 16}default:return 16}}var vs=null,Gf=null,pc=null;function Mx(){if(pc)return pc;var t,e=Gf,n=e.length,r,s="value"in vs?vs.value:vs.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return pc=s.slice(t,1<r?1-r:void 0)}function mc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ql(){return!0}function cg(){return!1}function Gn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ql:cg,this.isPropagationStopped=cg,this}return Bt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ql)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ql)},persist:function(){},isPersistent:ql}),e}var jo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kf=Gn(jo),ll=Bt({},jo,{view:0,detail:0}),Y_=Gn(ll),wd,_d,qo,Cu=Bt({},ll,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qo&&(qo&&t.type==="mousemove"?(wd=t.screenX-qo.screenX,_d=t.screenY-qo.screenY):_d=wd=0,qo=t),wd)},movementY:function(t){return"movementY"in t?t.movementY:_d}}),ug=Gn(Cu),Q_=Bt({},Cu,{dataTransfer:0}),J_=Gn(Q_),X_=Bt({},ll,{relatedTarget:0}),bd=Gn(X_),Z_=Bt({},jo,{animationName:0,elapsedTime:0,pseudoElement:0}),eb=Gn(Z_),tb=Bt({},jo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),nb=Gn(tb),rb=Bt({},jo,{data:0}),dg=Gn(rb),sb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ib={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ob={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ab(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ob[t])?!!e[t]:!1}function qf(){return ab}var lb=Bt({},ll,{key:function(t){if(t.key){var e=sb[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=mc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ib[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qf,charCode:function(t){return t.type==="keypress"?mc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?mc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),cb=Gn(lb),ub=Bt({},Cu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hg=Gn(ub),db=Bt({},ll,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qf}),hb=Gn(db),fb=Bt({},jo,{propertyName:0,elapsedTime:0,pseudoElement:0}),pb=Gn(fb),mb=Bt({},Cu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),gb=Gn(mb),yb=[9,13,27,32],Yf=qr&&"CompositionEvent"in window,da=null;qr&&"documentMode"in document&&(da=document.documentMode);var xb=qr&&"TextEvent"in window&&!da,Lx=qr&&(!Yf||da&&8<da&&11>=da),fg=" ",pg=!1;function Fx(t,e){switch(t){case"keyup":return yb.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var zi=!1;function vb(t,e){switch(t){case"compositionend":return zx(e);case"keypress":return e.which!==32?null:(pg=!0,fg);case"textInput":return t=e.data,t===fg&&pg?null:t;default:return null}}function wb(t,e){if(zi)return t==="compositionend"||!Yf&&Fx(t,e)?(t=Mx(),pc=Gf=vs=null,zi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Lx&&e.locale!=="ko"?null:e.data;default:return null}}var _b={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!_b[t.type]:e==="textarea"}function Bx(t,e,n,r){yx(r),e=Fc(e,"onChange"),0<e.length&&(n=new Kf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ha=null,Oa=null;function bb(t){Jx(t,0)}function ju(t){var e=$i(t);if(ux(e))return t}function Sb(t,e){if(t==="change")return e}var Ux=!1;if(qr){var Sd;if(qr){var Cd="oninput"in document;if(!Cd){var gg=document.createElement("div");gg.setAttribute("oninput","return;"),Cd=typeof gg.oninput=="function"}Sd=Cd}else Sd=!1;Ux=Sd&&(!document.documentMode||9<document.documentMode)}function yg(){ha&&(ha.detachEvent("onpropertychange",$x),Oa=ha=null)}function $x(t){if(t.propertyName==="value"&&ju(Oa)){var e=[];Bx(e,Oa,t,Uf(t)),_x(bb,e)}}function Cb(t,e,n){t==="focusin"?(yg(),ha=e,Oa=n,ha.attachEvent("onpropertychange",$x)):t==="focusout"&&yg()}function jb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ju(Oa)}function Eb(t,e){if(t==="click")return ju(e)}function Ib(t,e){if(t==="input"||t==="change")return ju(e)}function kb(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var gr=typeof Object.is=="function"?Object.is:kb;function Da(t,e){if(gr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!uh.call(e,s)||!gr(t[s],e[s]))return!1}return!0}function xg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vg(t,e){var n=xg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=xg(n)}}function Wx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Wx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Hx(){for(var t=window,e=Rc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Rc(t.document)}return e}function Qf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Nb(t){var e=Hx(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Wx(n.ownerDocument.documentElement,n)){if(r!==null&&Qf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=vg(n,i);var o=vg(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Tb=qr&&"documentMode"in document&&11>=document.documentMode,Bi=null,Nh=null,fa=null,Th=!1;function wg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Th||Bi==null||Bi!==Rc(r)||(r=Bi,"selectionStart"in r&&Qf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),fa&&Da(fa,r)||(fa=r,r=Fc(Nh,"onSelect"),0<r.length&&(e=new Kf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Bi)))}function Yl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ui={animationend:Yl("Animation","AnimationEnd"),animationiteration:Yl("Animation","AnimationIteration"),animationstart:Yl("Animation","AnimationStart"),transitionend:Yl("Transition","TransitionEnd")},jd={},Vx={};qr&&(Vx=document.createElement("div").style,"AnimationEvent"in window||(delete Ui.animationend.animation,delete Ui.animationiteration.animation,delete Ui.animationstart.animation),"TransitionEvent"in window||delete Ui.transitionend.transition);function Eu(t){if(jd[t])return jd[t];if(!Ui[t])return t;var e=Ui[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Vx)return jd[t]=e[n];return t}var Gx=Eu("animationend"),Kx=Eu("animationiteration"),qx=Eu("animationstart"),Yx=Eu("transitionend"),Qx=new Map,_g="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Us(t,e){Qx.set(t,e),ji(e,[t])}for(var Ed=0;Ed<_g.length;Ed++){var Id=_g[Ed],Rb=Id.toLowerCase(),Ab=Id[0].toUpperCase()+Id.slice(1);Us(Rb,"on"+Ab)}Us(Gx,"onAnimationEnd");Us(Kx,"onAnimationIteration");Us(qx,"onAnimationStart");Us("dblclick","onDoubleClick");Us("focusin","onFocus");Us("focusout","onBlur");Us(Yx,"onTransitionEnd");oo("onMouseEnter",["mouseout","mouseover"]);oo("onMouseLeave",["mouseout","mouseover"]);oo("onPointerEnter",["pointerout","pointerover"]);oo("onPointerLeave",["pointerout","pointerover"]);ji("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ji("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ji("onBeforeInput",["compositionend","keypress","textInput","paste"]);ji("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ji("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ji("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var la="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pb=new Set("cancel close invalid load scroll toggle".split(" ").concat(la));function bg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,R_(r,e,void 0,t),t.currentTarget=null}function Jx(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;bg(s,c,d),i=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,d=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;bg(s,c,d),i=u}}}if(Pc)throw t=jh,Pc=!1,jh=null,t}function Tt(t,e){var n=e[Dh];n===void 0&&(n=e[Dh]=new Set);var r=t+"__bubble";n.has(r)||(Xx(e,t,2,!1),n.add(r))}function kd(t,e,n){var r=0;e&&(r|=4),Xx(n,t,r,e)}var Ql="_reactListening"+Math.random().toString(36).slice(2);function Ma(t){if(!t[Ql]){t[Ql]=!0,ix.forEach(function(n){n!=="selectionchange"&&(Pb.has(n)||kd(n,!1,t),kd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ql]||(e[Ql]=!0,kd("selectionchange",!1,e))}}function Xx(t,e,n,r){switch(Dx(e)){case 1:var s=K_;break;case 4:s=q_;break;default:s=Vf}n=s.bind(null,e,n,t),s=void 0,!Ch||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Nd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;c!==null;){if(o=ri(c),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}c=c.parentNode}}r=r.return}_x(function(){var d=i,f=Uf(n),p=[];e:{var y=Qx.get(t);if(y!==void 0){var I=Kf,w=t;switch(t){case"keypress":if(mc(n)===0)break e;case"keydown":case"keyup":I=cb;break;case"focusin":w="focus",I=bd;break;case"focusout":w="blur",I=bd;break;case"beforeblur":case"afterblur":I=bd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=ug;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=J_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=hb;break;case Gx:case Kx:case qx:I=eb;break;case Yx:I=pb;break;case"scroll":I=Y_;break;case"wheel":I=gb;break;case"copy":case"cut":case"paste":I=nb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=hg}var T=(e&4)!==0,A=!T&&t==="scroll",S=T?y!==null?y+"Capture":null:y;T=[];for(var _=d,v;_!==null;){v=_;var O=v.stateNode;if(v.tag===5&&O!==null&&(v=O,S!==null&&(O=Ta(_,S),O!=null&&T.push(La(_,O,v)))),A)break;_=_.return}0<T.length&&(y=new I(y,w,null,n,f),p.push({event:y,listeners:T}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",I=t==="mouseout"||t==="pointerout",y&&n!==bh&&(w=n.relatedTarget||n.fromElement)&&(ri(w)||w[Yr]))break e;if((I||y)&&(y=f.window===f?f:(y=f.ownerDocument)?y.defaultView||y.parentWindow:window,I?(w=n.relatedTarget||n.toElement,I=d,w=w?ri(w):null,w!==null&&(A=Ei(w),w!==A||w.tag!==5&&w.tag!==6)&&(w=null)):(I=null,w=d),I!==w)){if(T=ug,O="onMouseLeave",S="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(T=hg,O="onPointerLeave",S="onPointerEnter",_="pointer"),A=I==null?y:$i(I),v=w==null?y:$i(w),y=new T(O,_+"leave",I,n,f),y.target=A,y.relatedTarget=v,O=null,ri(f)===d&&(T=new T(S,_+"enter",w,n,f),T.target=v,T.relatedTarget=A,O=T),A=O,I&&w)t:{for(T=I,S=w,_=0,v=T;v;v=Pi(v))_++;for(v=0,O=S;O;O=Pi(O))v++;for(;0<_-v;)T=Pi(T),_--;for(;0<v-_;)S=Pi(S),v--;for(;_--;){if(T===S||S!==null&&T===S.alternate)break t;T=Pi(T),S=Pi(S)}T=null}else T=null;I!==null&&Sg(p,y,I,T,!1),w!==null&&A!==null&&Sg(p,A,w,T,!0)}}e:{if(y=d?$i(d):window,I=y.nodeName&&y.nodeName.toLowerCase(),I==="select"||I==="input"&&y.type==="file")var G=Sb;else if(mg(y))if(Ux)G=Ib;else{G=jb;var oe=Cb}else(I=y.nodeName)&&I.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(G=Eb);if(G&&(G=G(t,d))){Bx(p,G,n,f);break e}oe&&oe(t,y,d),t==="focusout"&&(oe=y._wrapperState)&&oe.controlled&&y.type==="number"&&yh(y,"number",y.value)}switch(oe=d?$i(d):window,t){case"focusin":(mg(oe)||oe.contentEditable==="true")&&(Bi=oe,Nh=d,fa=null);break;case"focusout":fa=Nh=Bi=null;break;case"mousedown":Th=!0;break;case"contextmenu":case"mouseup":case"dragend":Th=!1,wg(p,n,f);break;case"selectionchange":if(Tb)break;case"keydown":case"keyup":wg(p,n,f)}var E;if(Yf)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else zi?Fx(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(Lx&&n.locale!=="ko"&&(zi||x!=="onCompositionStart"?x==="onCompositionEnd"&&zi&&(E=Mx()):(vs=f,Gf="value"in vs?vs.value:vs.textContent,zi=!0)),oe=Fc(d,x),0<oe.length&&(x=new dg(x,t,null,n,f),p.push({event:x,listeners:oe}),E?x.data=E:(E=zx(n),E!==null&&(x.data=E)))),(E=xb?vb(t,n):wb(t,n))&&(d=Fc(d,"onBeforeInput"),0<d.length&&(f=new dg("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:d}),f.data=E))}Jx(p,e)})}function La(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Fc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ta(t,n),i!=null&&r.unshift(La(t,i,s)),i=Ta(t,e),i!=null&&r.push(La(t,i,s))),t=t.return}return r}function Pi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Sg(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=Ta(n,i),u!=null&&o.unshift(La(n,u,c))):s||(u=Ta(n,i),u!=null&&o.push(La(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Ob=/\r\n?/g,Db=/\u0000|\uFFFD/g;function Cg(t){return(typeof t=="string"?t:""+t).replace(Ob,`
`).replace(Db,"")}function Jl(t,e,n){if(e=Cg(e),Cg(t)!==e&&n)throw Error(fe(425))}function zc(){}var Rh=null,Ah=null;function Ph(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Oh=typeof setTimeout=="function"?setTimeout:void 0,Mb=typeof clearTimeout=="function"?clearTimeout:void 0,jg=typeof Promise=="function"?Promise:void 0,Lb=typeof queueMicrotask=="function"?queueMicrotask:typeof jg<"u"?function(t){return jg.resolve(null).then(t).catch(Fb)}:Oh;function Fb(t){setTimeout(function(){throw t})}function Td(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Pa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Pa(e)}function js(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Eg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Eo=Math.random().toString(36).slice(2),Nr="__reactFiber$"+Eo,Fa="__reactProps$"+Eo,Yr="__reactContainer$"+Eo,Dh="__reactEvents$"+Eo,zb="__reactListeners$"+Eo,Bb="__reactHandles$"+Eo;function ri(t){var e=t[Nr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Yr]||n[Nr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Eg(t);t!==null;){if(n=t[Nr])return n;t=Eg(t)}return e}t=n,n=t.parentNode}return null}function cl(t){return t=t[Nr]||t[Yr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function $i(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(fe(33))}function Iu(t){return t[Fa]||null}var Mh=[],Wi=-1;function $s(t){return{current:t}}function Rt(t){0>Wi||(t.current=Mh[Wi],Mh[Wi]=null,Wi--)}function kt(t,e){Wi++,Mh[Wi]=t.current,t.current=e}var Ms={},bn=$s(Ms),On=$s(!1),pi=Ms;function ao(t,e){var n=t.type.contextTypes;if(!n)return Ms;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Dn(t){return t=t.childContextTypes,t!=null}function Bc(){Rt(On),Rt(bn)}function Ig(t,e,n){if(bn.current!==Ms)throw Error(fe(168));kt(bn,e),kt(On,n)}function Zx(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(fe(108,C_(t)||"Unknown",s));return Bt({},n,r)}function Uc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ms,pi=bn.current,kt(bn,t),kt(On,On.current),!0}function kg(t,e,n){var r=t.stateNode;if(!r)throw Error(fe(169));n?(t=Zx(t,e,pi),r.__reactInternalMemoizedMergedChildContext=t,Rt(On),Rt(bn),kt(bn,t)):Rt(On),kt(On,n)}var Br=null,ku=!1,Rd=!1;function e1(t){Br===null?Br=[t]:Br.push(t)}function Ub(t){ku=!0,e1(t)}function Ws(){if(!Rd&&Br!==null){Rd=!0;var t=0,e=xt;try{var n=Br;for(xt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Br=null,ku=!1}catch(s){throw Br!==null&&(Br=Br.slice(t+1)),jx($f,Ws),s}finally{xt=e,Rd=!1}}return null}var Hi=[],Vi=0,$c=null,Wc=0,Yn=[],Qn=0,mi=null,$r=1,Wr="";function Xs(t,e){Hi[Vi++]=Wc,Hi[Vi++]=$c,$c=t,Wc=e}function t1(t,e,n){Yn[Qn++]=$r,Yn[Qn++]=Wr,Yn[Qn++]=mi,mi=t;var r=$r;t=Wr;var s=32-fr(r)-1;r&=~(1<<s),n+=1;var i=32-fr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,$r=1<<32-fr(e)+s|n<<s|r,Wr=i+t}else $r=1<<i|n<<s|r,Wr=t}function Jf(t){t.return!==null&&(Xs(t,1),t1(t,1,0))}function Xf(t){for(;t===$c;)$c=Hi[--Vi],Hi[Vi]=null,Wc=Hi[--Vi],Hi[Vi]=null;for(;t===mi;)mi=Yn[--Qn],Yn[Qn]=null,Wr=Yn[--Qn],Yn[Qn]=null,$r=Yn[--Qn],Yn[Qn]=null}var Wn=null,$n=null,Ot=!1,lr=null;function n1(t,e){var n=Jn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ng(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Wn=t,$n=js(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Wn=t,$n=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=mi!==null?{id:$r,overflow:Wr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Jn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Wn=t,$n=null,!0):!1;default:return!1}}function Lh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Fh(t){if(Ot){var e=$n;if(e){var n=e;if(!Ng(t,e)){if(Lh(t))throw Error(fe(418));e=js(n.nextSibling);var r=Wn;e&&Ng(t,e)?n1(r,n):(t.flags=t.flags&-4097|2,Ot=!1,Wn=t)}}else{if(Lh(t))throw Error(fe(418));t.flags=t.flags&-4097|2,Ot=!1,Wn=t}}}function Tg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Wn=t}function Xl(t){if(t!==Wn)return!1;if(!Ot)return Tg(t),Ot=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ph(t.type,t.memoizedProps)),e&&(e=$n)){if(Lh(t))throw r1(),Error(fe(418));for(;e;)n1(t,e),e=js(e.nextSibling)}if(Tg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(fe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){$n=js(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}$n=null}}else $n=Wn?js(t.stateNode.nextSibling):null;return!0}function r1(){for(var t=$n;t;)t=js(t.nextSibling)}function lo(){$n=Wn=null,Ot=!1}function Zf(t){lr===null?lr=[t]:lr.push(t)}var $b=ts.ReactCurrentBatchConfig;function Yo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(fe(309));var r=n.stateNode}if(!r)throw Error(fe(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var c=s.refs;o===null?delete c[i]:c[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(fe(284));if(!n._owner)throw Error(fe(290,t))}return t}function Zl(t,e){throw t=Object.prototype.toString.call(e),Error(fe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Rg(t){var e=t._init;return e(t._payload)}function s1(t){function e(S,_){if(t){var v=S.deletions;v===null?(S.deletions=[_],S.flags|=16):v.push(_)}}function n(S,_){if(!t)return null;for(;_!==null;)e(S,_),_=_.sibling;return null}function r(S,_){for(S=new Map;_!==null;)_.key!==null?S.set(_.key,_):S.set(_.index,_),_=_.sibling;return S}function s(S,_){return S=Ns(S,_),S.index=0,S.sibling=null,S}function i(S,_,v){return S.index=v,t?(v=S.alternate,v!==null?(v=v.index,v<_?(S.flags|=2,_):v):(S.flags|=2,_)):(S.flags|=1048576,_)}function o(S){return t&&S.alternate===null&&(S.flags|=2),S}function c(S,_,v,O){return _===null||_.tag!==6?(_=Fd(v,S.mode,O),_.return=S,_):(_=s(_,v),_.return=S,_)}function u(S,_,v,O){var G=v.type;return G===Fi?f(S,_,v.props.children,O,v.key):_!==null&&(_.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===ms&&Rg(G)===_.type)?(O=s(_,v.props),O.ref=Yo(S,_,v),O.return=S,O):(O=bc(v.type,v.key,v.props,null,S.mode,O),O.ref=Yo(S,_,v),O.return=S,O)}function d(S,_,v,O){return _===null||_.tag!==4||_.stateNode.containerInfo!==v.containerInfo||_.stateNode.implementation!==v.implementation?(_=zd(v,S.mode,O),_.return=S,_):(_=s(_,v.children||[]),_.return=S,_)}function f(S,_,v,O,G){return _===null||_.tag!==7?(_=ui(v,S.mode,O,G),_.return=S,_):(_=s(_,v),_.return=S,_)}function p(S,_,v){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Fd(""+_,S.mode,v),_.return=S,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case $l:return v=bc(_.type,_.key,_.props,null,S.mode,v),v.ref=Yo(S,null,_),v.return=S,v;case Li:return _=zd(_,S.mode,v),_.return=S,_;case ms:var O=_._init;return p(S,O(_._payload),v)}if(oa(_)||Ho(_))return _=ui(_,S.mode,v,null),_.return=S,_;Zl(S,_)}return null}function y(S,_,v,O){var G=_!==null?_.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return G!==null?null:c(S,_,""+v,O);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case $l:return v.key===G?u(S,_,v,O):null;case Li:return v.key===G?d(S,_,v,O):null;case ms:return G=v._init,y(S,_,G(v._payload),O)}if(oa(v)||Ho(v))return G!==null?null:f(S,_,v,O,null);Zl(S,v)}return null}function I(S,_,v,O,G){if(typeof O=="string"&&O!==""||typeof O=="number")return S=S.get(v)||null,c(_,S,""+O,G);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case $l:return S=S.get(O.key===null?v:O.key)||null,u(_,S,O,G);case Li:return S=S.get(O.key===null?v:O.key)||null,d(_,S,O,G);case ms:var oe=O._init;return I(S,_,v,oe(O._payload),G)}if(oa(O)||Ho(O))return S=S.get(v)||null,f(_,S,O,G,null);Zl(_,O)}return null}function w(S,_,v,O){for(var G=null,oe=null,E=_,x=_=0,C=null;E!==null&&x<v.length;x++){E.index>x?(C=E,E=null):C=E.sibling;var k=y(S,E,v[x],O);if(k===null){E===null&&(E=C);break}t&&E&&k.alternate===null&&e(S,E),_=i(k,_,x),oe===null?G=k:oe.sibling=k,oe=k,E=C}if(x===v.length)return n(S,E),Ot&&Xs(S,x),G;if(E===null){for(;x<v.length;x++)E=p(S,v[x],O),E!==null&&(_=i(E,_,x),oe===null?G=E:oe.sibling=E,oe=E);return Ot&&Xs(S,x),G}for(E=r(S,E);x<v.length;x++)C=I(E,S,x,v[x],O),C!==null&&(t&&C.alternate!==null&&E.delete(C.key===null?x:C.key),_=i(C,_,x),oe===null?G=C:oe.sibling=C,oe=C);return t&&E.forEach(function(N){return e(S,N)}),Ot&&Xs(S,x),G}function T(S,_,v,O){var G=Ho(v);if(typeof G!="function")throw Error(fe(150));if(v=G.call(v),v==null)throw Error(fe(151));for(var oe=G=null,E=_,x=_=0,C=null,k=v.next();E!==null&&!k.done;x++,k=v.next()){E.index>x?(C=E,E=null):C=E.sibling;var N=y(S,E,k.value,O);if(N===null){E===null&&(E=C);break}t&&E&&N.alternate===null&&e(S,E),_=i(N,_,x),oe===null?G=N:oe.sibling=N,oe=N,E=C}if(k.done)return n(S,E),Ot&&Xs(S,x),G;if(E===null){for(;!k.done;x++,k=v.next())k=p(S,k.value,O),k!==null&&(_=i(k,_,x),oe===null?G=k:oe.sibling=k,oe=k);return Ot&&Xs(S,x),G}for(E=r(S,E);!k.done;x++,k=v.next())k=I(E,S,x,k.value,O),k!==null&&(t&&k.alternate!==null&&E.delete(k.key===null?x:k.key),_=i(k,_,x),oe===null?G=k:oe.sibling=k,oe=k);return t&&E.forEach(function(R){return e(S,R)}),Ot&&Xs(S,x),G}function A(S,_,v,O){if(typeof v=="object"&&v!==null&&v.type===Fi&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case $l:e:{for(var G=v.key,oe=_;oe!==null;){if(oe.key===G){if(G=v.type,G===Fi){if(oe.tag===7){n(S,oe.sibling),_=s(oe,v.props.children),_.return=S,S=_;break e}}else if(oe.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===ms&&Rg(G)===oe.type){n(S,oe.sibling),_=s(oe,v.props),_.ref=Yo(S,oe,v),_.return=S,S=_;break e}n(S,oe);break}else e(S,oe);oe=oe.sibling}v.type===Fi?(_=ui(v.props.children,S.mode,O,v.key),_.return=S,S=_):(O=bc(v.type,v.key,v.props,null,S.mode,O),O.ref=Yo(S,_,v),O.return=S,S=O)}return o(S);case Li:e:{for(oe=v.key;_!==null;){if(_.key===oe)if(_.tag===4&&_.stateNode.containerInfo===v.containerInfo&&_.stateNode.implementation===v.implementation){n(S,_.sibling),_=s(_,v.children||[]),_.return=S,S=_;break e}else{n(S,_);break}else e(S,_);_=_.sibling}_=zd(v,S.mode,O),_.return=S,S=_}return o(S);case ms:return oe=v._init,A(S,_,oe(v._payload),O)}if(oa(v))return w(S,_,v,O);if(Ho(v))return T(S,_,v,O);Zl(S,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,_!==null&&_.tag===6?(n(S,_.sibling),_=s(_,v),_.return=S,S=_):(n(S,_),_=Fd(v,S.mode,O),_.return=S,S=_),o(S)):n(S,_)}return A}var co=s1(!0),i1=s1(!1),Hc=$s(null),Vc=null,Gi=null,ep=null;function tp(){ep=Gi=Vc=null}function np(t){var e=Hc.current;Rt(Hc),t._currentValue=e}function zh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function eo(t,e){Vc=t,ep=Gi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(An=!0),t.firstContext=null)}function er(t){var e=t._currentValue;if(ep!==t)if(t={context:t,memoizedValue:e,next:null},Gi===null){if(Vc===null)throw Error(fe(308));Gi=t,Vc.dependencies={lanes:0,firstContext:t}}else Gi=Gi.next=t;return e}var si=null;function rp(t){si===null?si=[t]:si.push(t)}function o1(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,rp(e)):(n.next=s.next,s.next=n),e.interleaved=n,Qr(t,r)}function Qr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var gs=!1;function sp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function a1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Vr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Es(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ut&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Qr(t,n)}return s=r.interleaved,s===null?(e.next=e,rp(r)):(e.next=s.next,s.next=e),r.interleaved=e,Qr(t,n)}function gc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Wf(t,n)}}function Ag(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Gc(t,e,n,r){var s=t.updateQueue;gs=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==o&&(c===null?f.firstBaseUpdate=d:c.next=d,f.lastBaseUpdate=u))}if(i!==null){var p=s.baseState;o=0,f=d=u=null,c=i;do{var y=c.lane,I=c.eventTime;if((r&y)===y){f!==null&&(f=f.next={eventTime:I,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var w=t,T=c;switch(y=e,I=n,T.tag){case 1:if(w=T.payload,typeof w=="function"){p=w.call(I,p,y);break e}p=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=T.payload,y=typeof w=="function"?w.call(I,p,y):w,y==null)break e;p=Bt({},p,y);break e;case 2:gs=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,y=s.effects,y===null?s.effects=[c]:y.push(c))}else I={eventTime:I,lane:y,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(d=f=I,u=p):f=f.next=I,o|=y;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;y=c,c=y.next,y.next=null,s.lastBaseUpdate=y,s.shared.pending=null}}while(!0);if(f===null&&(u=p),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);yi|=o,t.lanes=o,t.memoizedState=p}}function Pg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(fe(191,s));s.call(r)}}}var ul={},Ar=$s(ul),za=$s(ul),Ba=$s(ul);function ii(t){if(t===ul)throw Error(fe(174));return t}function ip(t,e){switch(kt(Ba,e),kt(za,t),kt(Ar,ul),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:vh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=vh(e,t)}Rt(Ar),kt(Ar,e)}function uo(){Rt(Ar),Rt(za),Rt(Ba)}function l1(t){ii(Ba.current);var e=ii(Ar.current),n=vh(e,t.type);e!==n&&(kt(za,t),kt(Ar,n))}function op(t){za.current===t&&(Rt(Ar),Rt(za))}var Lt=$s(0);function Kc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ad=[];function ap(){for(var t=0;t<Ad.length;t++)Ad[t]._workInProgressVersionPrimary=null;Ad.length=0}var yc=ts.ReactCurrentDispatcher,Pd=ts.ReactCurrentBatchConfig,gi=0,Ft=null,en=null,an=null,qc=!1,pa=!1,Ua=0,Wb=0;function xn(){throw Error(fe(321))}function lp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!gr(t[n],e[n]))return!1;return!0}function cp(t,e,n,r,s,i){if(gi=i,Ft=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,yc.current=t===null||t.memoizedState===null?Kb:qb,t=n(r,s),pa){i=0;do{if(pa=!1,Ua=0,25<=i)throw Error(fe(301));i+=1,an=en=null,e.updateQueue=null,yc.current=Yb,t=n(r,s)}while(pa)}if(yc.current=Yc,e=en!==null&&en.next!==null,gi=0,an=en=Ft=null,qc=!1,e)throw Error(fe(300));return t}function up(){var t=Ua!==0;return Ua=0,t}function jr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return an===null?Ft.memoizedState=an=t:an=an.next=t,an}function tr(){if(en===null){var t=Ft.alternate;t=t!==null?t.memoizedState:null}else t=en.next;var e=an===null?Ft.memoizedState:an.next;if(e!==null)an=e,en=t;else{if(t===null)throw Error(fe(310));en=t,t={memoizedState:en.memoizedState,baseState:en.baseState,baseQueue:en.baseQueue,queue:en.queue,next:null},an===null?Ft.memoizedState=an=t:an=an.next=t}return an}function $a(t,e){return typeof e=="function"?e(t):e}function Od(t){var e=tr(),n=e.queue;if(n===null)throw Error(fe(311));n.lastRenderedReducer=t;var r=en,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=o=null,u=null,d=i;do{var f=d.lane;if((gi&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=p,o=r):u=u.next=p,Ft.lanes|=f,yi|=f}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=c,gr(r,e.memoizedState)||(An=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ft.lanes|=i,yi|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Dd(t){var e=tr(),n=e.queue;if(n===null)throw Error(fe(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);gr(i,e.memoizedState)||(An=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function c1(){}function u1(t,e){var n=Ft,r=tr(),s=e(),i=!gr(r.memoizedState,s);if(i&&(r.memoizedState=s,An=!0),r=r.queue,dp(f1.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||an!==null&&an.memoizedState.tag&1){if(n.flags|=2048,Wa(9,h1.bind(null,n,r,s,e),void 0,null),cn===null)throw Error(fe(349));gi&30||d1(n,e,s)}return s}function d1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ft.updateQueue,e===null?(e={lastEffect:null,stores:null},Ft.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function h1(t,e,n,r){e.value=n,e.getSnapshot=r,p1(e)&&m1(t)}function f1(t,e,n){return n(function(){p1(e)&&m1(t)})}function p1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!gr(t,n)}catch{return!0}}function m1(t){var e=Qr(t,1);e!==null&&pr(e,t,1,-1)}function Og(t){var e=jr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$a,lastRenderedState:t},e.queue=t,t=t.dispatch=Gb.bind(null,Ft,t),[e.memoizedState,t]}function Wa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ft.updateQueue,e===null?(e={lastEffect:null,stores:null},Ft.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function g1(){return tr().memoizedState}function xc(t,e,n,r){var s=jr();Ft.flags|=t,s.memoizedState=Wa(1|e,n,void 0,r===void 0?null:r)}function Nu(t,e,n,r){var s=tr();r=r===void 0?null:r;var i=void 0;if(en!==null){var o=en.memoizedState;if(i=o.destroy,r!==null&&lp(r,o.deps)){s.memoizedState=Wa(e,n,i,r);return}}Ft.flags|=t,s.memoizedState=Wa(1|e,n,i,r)}function Dg(t,e){return xc(8390656,8,t,e)}function dp(t,e){return Nu(2048,8,t,e)}function y1(t,e){return Nu(4,2,t,e)}function x1(t,e){return Nu(4,4,t,e)}function v1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function w1(t,e,n){return n=n!=null?n.concat([t]):null,Nu(4,4,v1.bind(null,e,t),n)}function hp(){}function _1(t,e){var n=tr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&lp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function b1(t,e){var n=tr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&lp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function S1(t,e,n){return gi&21?(gr(n,e)||(n=kx(),Ft.lanes|=n,yi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,An=!0),t.memoizedState=n)}function Hb(t,e){var n=xt;xt=n!==0&&4>n?n:4,t(!0);var r=Pd.transition;Pd.transition={};try{t(!1),e()}finally{xt=n,Pd.transition=r}}function C1(){return tr().memoizedState}function Vb(t,e,n){var r=ks(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},j1(t))E1(e,n);else if(n=o1(t,e,n,r),n!==null){var s=En();pr(n,t,r,s),I1(n,e,r)}}function Gb(t,e,n){var r=ks(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(j1(t))E1(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,c=i(o,n);if(s.hasEagerState=!0,s.eagerState=c,gr(c,o)){var u=e.interleaved;u===null?(s.next=s,rp(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=o1(t,e,s,r),n!==null&&(s=En(),pr(n,t,r,s),I1(n,e,r))}}function j1(t){var e=t.alternate;return t===Ft||e!==null&&e===Ft}function E1(t,e){pa=qc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function I1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Wf(t,n)}}var Yc={readContext:er,useCallback:xn,useContext:xn,useEffect:xn,useImperativeHandle:xn,useInsertionEffect:xn,useLayoutEffect:xn,useMemo:xn,useReducer:xn,useRef:xn,useState:xn,useDebugValue:xn,useDeferredValue:xn,useTransition:xn,useMutableSource:xn,useSyncExternalStore:xn,useId:xn,unstable_isNewReconciler:!1},Kb={readContext:er,useCallback:function(t,e){return jr().memoizedState=[t,e===void 0?null:e],t},useContext:er,useEffect:Dg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,xc(4194308,4,v1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return xc(4194308,4,t,e)},useInsertionEffect:function(t,e){return xc(4,2,t,e)},useMemo:function(t,e){var n=jr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=jr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Vb.bind(null,Ft,t),[r.memoizedState,t]},useRef:function(t){var e=jr();return t={current:t},e.memoizedState=t},useState:Og,useDebugValue:hp,useDeferredValue:function(t){return jr().memoizedState=t},useTransition:function(){var t=Og(!1),e=t[0];return t=Hb.bind(null,t[1]),jr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ft,s=jr();if(Ot){if(n===void 0)throw Error(fe(407));n=n()}else{if(n=e(),cn===null)throw Error(fe(349));gi&30||d1(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Dg(f1.bind(null,r,i,t),[t]),r.flags|=2048,Wa(9,h1.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=jr(),e=cn.identifierPrefix;if(Ot){var n=Wr,r=$r;n=(r&~(1<<32-fr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ua++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Wb++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},qb={readContext:er,useCallback:_1,useContext:er,useEffect:dp,useImperativeHandle:w1,useInsertionEffect:y1,useLayoutEffect:x1,useMemo:b1,useReducer:Od,useRef:g1,useState:function(){return Od($a)},useDebugValue:hp,useDeferredValue:function(t){var e=tr();return S1(e,en.memoizedState,t)},useTransition:function(){var t=Od($a)[0],e=tr().memoizedState;return[t,e]},useMutableSource:c1,useSyncExternalStore:u1,useId:C1,unstable_isNewReconciler:!1},Yb={readContext:er,useCallback:_1,useContext:er,useEffect:dp,useImperativeHandle:w1,useInsertionEffect:y1,useLayoutEffect:x1,useMemo:b1,useReducer:Dd,useRef:g1,useState:function(){return Dd($a)},useDebugValue:hp,useDeferredValue:function(t){var e=tr();return en===null?e.memoizedState=t:S1(e,en.memoizedState,t)},useTransition:function(){var t=Dd($a)[0],e=tr().memoizedState;return[t,e]},useMutableSource:c1,useSyncExternalStore:u1,useId:C1,unstable_isNewReconciler:!1};function or(t,e){if(t&&t.defaultProps){e=Bt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Bh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Bt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Tu={isMounted:function(t){return(t=t._reactInternals)?Ei(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=En(),s=ks(t),i=Vr(r,s);i.payload=e,n!=null&&(i.callback=n),e=Es(t,i,s),e!==null&&(pr(e,t,s,r),gc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=En(),s=ks(t),i=Vr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Es(t,i,s),e!==null&&(pr(e,t,s,r),gc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=En(),r=ks(t),s=Vr(n,r);s.tag=2,e!=null&&(s.callback=e),e=Es(t,s,r),e!==null&&(pr(e,t,r,n),gc(e,t,r))}};function Mg(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Da(n,r)||!Da(s,i):!0}function k1(t,e,n){var r=!1,s=Ms,i=e.contextType;return typeof i=="object"&&i!==null?i=er(i):(s=Dn(e)?pi:bn.current,r=e.contextTypes,i=(r=r!=null)?ao(t,s):Ms),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Tu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Lg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Tu.enqueueReplaceState(e,e.state,null)}function Uh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},sp(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=er(i):(i=Dn(e)?pi:bn.current,s.context=ao(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Bh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Tu.enqueueReplaceState(s,s.state,null),Gc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ho(t,e){try{var n="",r=e;do n+=S_(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Md(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function $h(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Qb=typeof WeakMap=="function"?WeakMap:Map;function N1(t,e,n){n=Vr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Jc||(Jc=!0,Xh=r),$h(t,e)},n}function T1(t,e,n){n=Vr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){$h(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){$h(t,e),typeof r!="function"&&(Is===null?Is=new Set([this]):Is.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Fg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Qb;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=uS.bind(null,t,e,n),e.then(t,t))}function zg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Bg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Vr(-1,1),e.tag=2,Es(n,e,1))),n.lanes|=1),t)}var Jb=ts.ReactCurrentOwner,An=!1;function Sn(t,e,n,r){e.child=t===null?i1(e,null,n,r):co(e,t.child,n,r)}function Ug(t,e,n,r,s){n=n.render;var i=e.ref;return eo(e,s),r=cp(t,e,n,r,i,s),n=up(),t!==null&&!An?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Jr(t,e,s)):(Ot&&n&&Jf(e),e.flags|=1,Sn(t,e,r,s),e.child)}function $g(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!wp(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,R1(t,e,i,r,s)):(t=bc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Da,n(o,r)&&t.ref===e.ref)return Jr(t,e,s)}return e.flags|=1,t=Ns(i,r),t.ref=e.ref,t.return=e,e.child=t}function R1(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Da(i,r)&&t.ref===e.ref)if(An=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(An=!0);else return e.lanes=t.lanes,Jr(t,e,s)}return Wh(t,e,n,r,s)}function A1(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},kt(qi,Un),Un|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,kt(qi,Un),Un|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,kt(qi,Un),Un|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,kt(qi,Un),Un|=r;return Sn(t,e,s,n),e.child}function P1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Wh(t,e,n,r,s){var i=Dn(n)?pi:bn.current;return i=ao(e,i),eo(e,s),n=cp(t,e,n,r,i,s),r=up(),t!==null&&!An?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Jr(t,e,s)):(Ot&&r&&Jf(e),e.flags|=1,Sn(t,e,n,s),e.child)}function Wg(t,e,n,r,s){if(Dn(n)){var i=!0;Uc(e)}else i=!1;if(eo(e,s),e.stateNode===null)vc(t,e),k1(e,n,r),Uh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=er(d):(d=Dn(n)?pi:bn.current,d=ao(e,d));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==d)&&Lg(e,o,r,d),gs=!1;var y=e.memoizedState;o.state=y,Gc(e,r,o,s),u=e.memoizedState,c!==r||y!==u||On.current||gs?(typeof f=="function"&&(Bh(e,n,f,r),u=e.memoizedState),(c=gs||Mg(e,n,c,r,y,u,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,a1(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:or(e.type,c),o.props=d,p=e.pendingProps,y=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=er(u):(u=Dn(n)?pi:bn.current,u=ao(e,u));var I=n.getDerivedStateFromProps;(f=typeof I=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==p||y!==u)&&Lg(e,o,r,u),gs=!1,y=e.memoizedState,o.state=y,Gc(e,r,o,s);var w=e.memoizedState;c!==p||y!==w||On.current||gs?(typeof I=="function"&&(Bh(e,n,I,r),w=e.memoizedState),(d=gs||Mg(e,n,d,r,y,w,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),r=!1)}return Hh(t,e,n,r,i,s)}function Hh(t,e,n,r,s,i){P1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&kg(e,n,!1),Jr(t,e,i);r=e.stateNode,Jb.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=co(e,t.child,null,i),e.child=co(e,null,c,i)):Sn(t,e,c,i),e.memoizedState=r.state,s&&kg(e,n,!0),e.child}function O1(t){var e=t.stateNode;e.pendingContext?Ig(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ig(t,e.context,!1),ip(t,e.containerInfo)}function Hg(t,e,n,r,s){return lo(),Zf(s),e.flags|=256,Sn(t,e,n,r),e.child}var Vh={dehydrated:null,treeContext:null,retryLane:0};function Gh(t){return{baseLanes:t,cachePool:null,transitions:null}}function D1(t,e,n){var r=e.pendingProps,s=Lt.current,i=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),kt(Lt,s&1),t===null)return Fh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Pu(o,r,0,null),t=ui(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Gh(n),e.memoizedState=Vh,t):fp(e,o));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return Xb(t,e,o,r,c,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Ns(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=Ns(c,i):(i=ui(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Gh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Vh,r}return i=t.child,t=i.sibling,r=Ns(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function fp(t,e){return e=Pu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ec(t,e,n,r){return r!==null&&Zf(r),co(e,t.child,null,n),t=fp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Xb(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Md(Error(fe(422))),ec(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Pu({mode:"visible",children:r.children},s,0,null),i=ui(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&co(e,t.child,null,o),e.child.memoizedState=Gh(o),e.memoizedState=Vh,i);if(!(e.mode&1))return ec(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(fe(419)),r=Md(i,r,void 0),ec(t,e,o,r)}if(c=(o&t.childLanes)!==0,An||c){if(r=cn,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Qr(t,s),pr(r,t,s,-1))}return vp(),r=Md(Error(fe(421))),ec(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=dS.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,$n=js(s.nextSibling),Wn=e,Ot=!0,lr=null,t!==null&&(Yn[Qn++]=$r,Yn[Qn++]=Wr,Yn[Qn++]=mi,$r=t.id,Wr=t.overflow,mi=e),e=fp(e,r.children),e.flags|=4096,e)}function Vg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),zh(t.return,e,n)}function Ld(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function M1(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Sn(t,e,r.children,n),r=Lt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Vg(t,n,e);else if(t.tag===19)Vg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(kt(Lt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Kc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Ld(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Kc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Ld(e,!0,n,null,i);break;case"together":Ld(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function vc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Jr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),yi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(fe(153));if(e.child!==null){for(t=e.child,n=Ns(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ns(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Zb(t,e,n){switch(e.tag){case 3:O1(e),lo();break;case 5:l1(e);break;case 1:Dn(e.type)&&Uc(e);break;case 4:ip(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;kt(Hc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(kt(Lt,Lt.current&1),e.flags|=128,null):n&e.child.childLanes?D1(t,e,n):(kt(Lt,Lt.current&1),t=Jr(t,e,n),t!==null?t.sibling:null);kt(Lt,Lt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return M1(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),kt(Lt,Lt.current),r)break;return null;case 22:case 23:return e.lanes=0,A1(t,e,n)}return Jr(t,e,n)}var L1,Kh,F1,z1;L1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Kh=function(){};F1=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ii(Ar.current);var i=null;switch(n){case"input":s=mh(t,s),r=mh(t,r),i=[];break;case"select":s=Bt({},s,{value:void 0}),r=Bt({},r,{value:void 0}),i=[];break;case"textarea":s=xh(t,s),r=xh(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=zc)}wh(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ka.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ka.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Tt("scroll",t),i||c===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};z1=function(t,e,n,r){n!==r&&(e.flags|=4)};function Qo(t,e){if(!Ot)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function vn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function eS(t,e,n){var r=e.pendingProps;switch(Xf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vn(e),null;case 1:return Dn(e.type)&&Bc(),vn(e),null;case 3:return r=e.stateNode,uo(),Rt(On),Rt(bn),ap(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Xl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,lr!==null&&(tf(lr),lr=null))),Kh(t,e),vn(e),null;case 5:op(e);var s=ii(Ba.current);if(n=e.type,t!==null&&e.stateNode!=null)F1(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(fe(166));return vn(e),null}if(t=ii(Ar.current),Xl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Nr]=e,r[Fa]=i,t=(e.mode&1)!==0,n){case"dialog":Tt("cancel",r),Tt("close",r);break;case"iframe":case"object":case"embed":Tt("load",r);break;case"video":case"audio":for(s=0;s<la.length;s++)Tt(la[s],r);break;case"source":Tt("error",r);break;case"img":case"image":case"link":Tt("error",r),Tt("load",r);break;case"details":Tt("toggle",r);break;case"input":eg(r,i),Tt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Tt("invalid",r);break;case"textarea":ng(r,i),Tt("invalid",r)}wh(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&Jl(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&Jl(r.textContent,c,t),s=["children",""+c]):ka.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&Tt("scroll",r)}switch(n){case"input":Wl(r),tg(r,i,!0);break;case"textarea":Wl(r),rg(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=zc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=fx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Nr]=e,t[Fa]=r,L1(t,e,!1,!1),e.stateNode=t;e:{switch(o=_h(n,r),n){case"dialog":Tt("cancel",t),Tt("close",t),s=r;break;case"iframe":case"object":case"embed":Tt("load",t),s=r;break;case"video":case"audio":for(s=0;s<la.length;s++)Tt(la[s],t);s=r;break;case"source":Tt("error",t),s=r;break;case"img":case"image":case"link":Tt("error",t),Tt("load",t),s=r;break;case"details":Tt("toggle",t),s=r;break;case"input":eg(t,r),s=mh(t,r),Tt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Bt({},r,{value:void 0}),Tt("invalid",t);break;case"textarea":ng(t,r),s=xh(t,r),Tt("invalid",t);break;default:s=r}wh(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?gx(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&px(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Na(t,u):typeof u=="number"&&Na(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ka.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Tt("scroll",t):u!=null&&Lf(t,i,u,o))}switch(n){case"input":Wl(t),tg(t,r,!1);break;case"textarea":Wl(t),rg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ds(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Qi(t,!!r.multiple,i,!1):r.defaultValue!=null&&Qi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=zc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return vn(e),null;case 6:if(t&&e.stateNode!=null)z1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(fe(166));if(n=ii(Ba.current),ii(Ar.current),Xl(e)){if(r=e.stateNode,n=e.memoizedProps,r[Nr]=e,(i=r.nodeValue!==n)&&(t=Wn,t!==null))switch(t.tag){case 3:Jl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Jl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Nr]=e,e.stateNode=r}return vn(e),null;case 13:if(Rt(Lt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ot&&$n!==null&&e.mode&1&&!(e.flags&128))r1(),lo(),e.flags|=98560,i=!1;else if(i=Xl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(fe(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(fe(317));i[Nr]=e}else lo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;vn(e),i=!1}else lr!==null&&(tf(lr),lr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Lt.current&1?rn===0&&(rn=3):vp())),e.updateQueue!==null&&(e.flags|=4),vn(e),null);case 4:return uo(),Kh(t,e),t===null&&Ma(e.stateNode.containerInfo),vn(e),null;case 10:return np(e.type._context),vn(e),null;case 17:return Dn(e.type)&&Bc(),vn(e),null;case 19:if(Rt(Lt),i=e.memoizedState,i===null)return vn(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Qo(i,!1);else{if(rn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Kc(t),o!==null){for(e.flags|=128,Qo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return kt(Lt,Lt.current&1|2),e.child}t=t.sibling}i.tail!==null&&Kt()>fo&&(e.flags|=128,r=!0,Qo(i,!1),e.lanes=4194304)}else{if(!r)if(t=Kc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Qo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ot)return vn(e),null}else 2*Kt()-i.renderingStartTime>fo&&n!==1073741824&&(e.flags|=128,r=!0,Qo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Kt(),e.sibling=null,n=Lt.current,kt(Lt,r?n&1|2:n&1),e):(vn(e),null);case 22:case 23:return xp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Un&1073741824&&(vn(e),e.subtreeFlags&6&&(e.flags|=8192)):vn(e),null;case 24:return null;case 25:return null}throw Error(fe(156,e.tag))}function tS(t,e){switch(Xf(e),e.tag){case 1:return Dn(e.type)&&Bc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return uo(),Rt(On),Rt(bn),ap(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return op(e),null;case 13:if(Rt(Lt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(fe(340));lo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Rt(Lt),null;case 4:return uo(),null;case 10:return np(e.type._context),null;case 22:case 23:return xp(),null;case 24:return null;default:return null}}var tc=!1,wn=!1,nS=typeof WeakSet=="function"?WeakSet:Set,Ne=null;function Ki(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){$t(t,e,r)}else n.current=null}function qh(t,e,n){try{n()}catch(r){$t(t,e,r)}}var Gg=!1;function rS(t,e){if(Rh=Mc,t=Hx(),Qf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,d=0,f=0,p=t,y=null;t:for(;;){for(var I;p!==n||s!==0&&p.nodeType!==3||(c=o+s),p!==i||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(I=p.firstChild)!==null;)y=p,p=I;for(;;){if(p===t)break t;if(y===n&&++d===s&&(c=o),y===i&&++f===r&&(u=o),(I=p.nextSibling)!==null)break;p=y,y=p.parentNode}p=I}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ah={focusedElem:t,selectionRange:n},Mc=!1,Ne=e;Ne!==null;)if(e=Ne,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ne=t;else for(;Ne!==null;){e=Ne;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var T=w.memoizedProps,A=w.memoizedState,S=e.stateNode,_=S.getSnapshotBeforeUpdate(e.elementType===e.type?T:or(e.type,T),A);S.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(fe(163))}}catch(O){$t(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,Ne=t;break}Ne=e.return}return w=Gg,Gg=!1,w}function ma(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&qh(e,n,i)}s=s.next}while(s!==r)}}function Ru(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Yh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function B1(t){var e=t.alternate;e!==null&&(t.alternate=null,B1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Nr],delete e[Fa],delete e[Dh],delete e[zb],delete e[Bb])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function U1(t){return t.tag===5||t.tag===3||t.tag===4}function Kg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||U1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Qh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=zc));else if(r!==4&&(t=t.child,t!==null))for(Qh(t,e,n),t=t.sibling;t!==null;)Qh(t,e,n),t=t.sibling}function Jh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Jh(t,e,n),t=t.sibling;t!==null;)Jh(t,e,n),t=t.sibling}var fn=null,ar=!1;function fs(t,e,n){for(n=n.child;n!==null;)$1(t,e,n),n=n.sibling}function $1(t,e,n){if(Rr&&typeof Rr.onCommitFiberUnmount=="function")try{Rr.onCommitFiberUnmount(Su,n)}catch{}switch(n.tag){case 5:wn||Ki(n,e);case 6:var r=fn,s=ar;fn=null,fs(t,e,n),fn=r,ar=s,fn!==null&&(ar?(t=fn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):fn.removeChild(n.stateNode));break;case 18:fn!==null&&(ar?(t=fn,n=n.stateNode,t.nodeType===8?Td(t.parentNode,n):t.nodeType===1&&Td(t,n),Pa(t)):Td(fn,n.stateNode));break;case 4:r=fn,s=ar,fn=n.stateNode.containerInfo,ar=!0,fs(t,e,n),fn=r,ar=s;break;case 0:case 11:case 14:case 15:if(!wn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&qh(n,e,o),s=s.next}while(s!==r)}fs(t,e,n);break;case 1:if(!wn&&(Ki(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){$t(n,e,c)}fs(t,e,n);break;case 21:fs(t,e,n);break;case 22:n.mode&1?(wn=(r=wn)||n.memoizedState!==null,fs(t,e,n),wn=r):fs(t,e,n);break;default:fs(t,e,n)}}function qg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new nS),e.forEach(function(r){var s=hS.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ir(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:fn=c.stateNode,ar=!1;break e;case 3:fn=c.stateNode.containerInfo,ar=!0;break e;case 4:fn=c.stateNode.containerInfo,ar=!0;break e}c=c.return}if(fn===null)throw Error(fe(160));$1(i,o,s),fn=null,ar=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){$t(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)W1(e,t),e=e.sibling}function W1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ir(e,t),Sr(t),r&4){try{ma(3,t,t.return),Ru(3,t)}catch(T){$t(t,t.return,T)}try{ma(5,t,t.return)}catch(T){$t(t,t.return,T)}}break;case 1:ir(e,t),Sr(t),r&512&&n!==null&&Ki(n,n.return);break;case 5:if(ir(e,t),Sr(t),r&512&&n!==null&&Ki(n,n.return),t.flags&32){var s=t.stateNode;try{Na(s,"")}catch(T){$t(t,t.return,T)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&dx(s,i),_h(c,o);var d=_h(c,i);for(o=0;o<u.length;o+=2){var f=u[o],p=u[o+1];f==="style"?gx(s,p):f==="dangerouslySetInnerHTML"?px(s,p):f==="children"?Na(s,p):Lf(s,f,p,d)}switch(c){case"input":gh(s,i);break;case"textarea":hx(s,i);break;case"select":var y=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var I=i.value;I!=null?Qi(s,!!i.multiple,I,!1):y!==!!i.multiple&&(i.defaultValue!=null?Qi(s,!!i.multiple,i.defaultValue,!0):Qi(s,!!i.multiple,i.multiple?[]:"",!1))}s[Fa]=i}catch(T){$t(t,t.return,T)}}break;case 6:if(ir(e,t),Sr(t),r&4){if(t.stateNode===null)throw Error(fe(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(T){$t(t,t.return,T)}}break;case 3:if(ir(e,t),Sr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Pa(e.containerInfo)}catch(T){$t(t,t.return,T)}break;case 4:ir(e,t),Sr(t);break;case 13:ir(e,t),Sr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(gp=Kt())),r&4&&qg(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(wn=(d=wn)||f,ir(e,t),wn=d):ir(e,t),Sr(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(Ne=t,f=t.child;f!==null;){for(p=Ne=f;Ne!==null;){switch(y=Ne,I=y.child,y.tag){case 0:case 11:case 14:case 15:ma(4,y,y.return);break;case 1:Ki(y,y.return);var w=y.stateNode;if(typeof w.componentWillUnmount=="function"){r=y,n=y.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(T){$t(r,n,T)}}break;case 5:Ki(y,y.return);break;case 22:if(y.memoizedState!==null){Qg(p);continue}}I!==null?(I.return=y,Ne=I):Qg(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{s=p.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=mx("display",o))}catch(T){$t(t,t.return,T)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(T){$t(t,t.return,T)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:ir(e,t),Sr(t),r&4&&qg(t);break;case 21:break;default:ir(e,t),Sr(t)}}function Sr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(U1(n)){var r=n;break e}n=n.return}throw Error(fe(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Na(s,""),r.flags&=-33);var i=Kg(t);Jh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,c=Kg(t);Qh(t,c,o);break;default:throw Error(fe(161))}}catch(u){$t(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function sS(t,e,n){Ne=t,H1(t)}function H1(t,e,n){for(var r=(t.mode&1)!==0;Ne!==null;){var s=Ne,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||tc;if(!o){var c=s.alternate,u=c!==null&&c.memoizedState!==null||wn;c=tc;var d=wn;if(tc=o,(wn=u)&&!d)for(Ne=s;Ne!==null;)o=Ne,u=o.child,o.tag===22&&o.memoizedState!==null?Jg(s):u!==null?(u.return=o,Ne=u):Jg(s);for(;i!==null;)Ne=i,H1(i),i=i.sibling;Ne=s,tc=c,wn=d}Yg(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Ne=i):Yg(t)}}function Yg(t){for(;Ne!==null;){var e=Ne;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:wn||Ru(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!wn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:or(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Pg(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Pg(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&Pa(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(fe(163))}wn||e.flags&512&&Yh(e)}catch(y){$t(e,e.return,y)}}if(e===t){Ne=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ne=n;break}Ne=e.return}}function Qg(t){for(;Ne!==null;){var e=Ne;if(e===t){Ne=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ne=n;break}Ne=e.return}}function Jg(t){for(;Ne!==null;){var e=Ne;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ru(4,e)}catch(u){$t(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){$t(e,s,u)}}var i=e.return;try{Yh(e)}catch(u){$t(e,i,u)}break;case 5:var o=e.return;try{Yh(e)}catch(u){$t(e,o,u)}}}catch(u){$t(e,e.return,u)}if(e===t){Ne=null;break}var c=e.sibling;if(c!==null){c.return=e.return,Ne=c;break}Ne=e.return}}var iS=Math.ceil,Qc=ts.ReactCurrentDispatcher,pp=ts.ReactCurrentOwner,Zn=ts.ReactCurrentBatchConfig,ut=0,cn=null,Yt=null,mn=0,Un=0,qi=$s(0),rn=0,Ha=null,yi=0,Au=0,mp=0,ga=null,Rn=null,gp=0,fo=1/0,zr=null,Jc=!1,Xh=null,Is=null,nc=!1,ws=null,Xc=0,ya=0,Zh=null,wc=-1,_c=0;function En(){return ut&6?Kt():wc!==-1?wc:wc=Kt()}function ks(t){return t.mode&1?ut&2&&mn!==0?mn&-mn:$b.transition!==null?(_c===0&&(_c=kx()),_c):(t=xt,t!==0||(t=window.event,t=t===void 0?16:Dx(t.type)),t):1}function pr(t,e,n,r){if(50<ya)throw ya=0,Zh=null,Error(fe(185));al(t,n,r),(!(ut&2)||t!==cn)&&(t===cn&&(!(ut&2)&&(Au|=n),rn===4&&xs(t,mn)),Mn(t,r),n===1&&ut===0&&!(e.mode&1)&&(fo=Kt()+500,ku&&Ws()))}function Mn(t,e){var n=t.callbackNode;$_(t,e);var r=Dc(t,t===cn?mn:0);if(r===0)n!==null&&og(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&og(n),e===1)t.tag===0?Ub(Xg.bind(null,t)):e1(Xg.bind(null,t)),Lb(function(){!(ut&6)&&Ws()}),n=null;else{switch(Nx(r)){case 1:n=$f;break;case 4:n=Ex;break;case 16:n=Oc;break;case 536870912:n=Ix;break;default:n=Oc}n=X1(n,V1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function V1(t,e){if(wc=-1,_c=0,ut&6)throw Error(fe(327));var n=t.callbackNode;if(to()&&t.callbackNode!==n)return null;var r=Dc(t,t===cn?mn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Zc(t,r);else{e=r;var s=ut;ut|=2;var i=K1();(cn!==t||mn!==e)&&(zr=null,fo=Kt()+500,ci(t,e));do try{lS();break}catch(c){G1(t,c)}while(!0);tp(),Qc.current=i,ut=s,Yt!==null?e=0:(cn=null,mn=0,e=rn)}if(e!==0){if(e===2&&(s=Eh(t),s!==0&&(r=s,e=ef(t,s))),e===1)throw n=Ha,ci(t,0),xs(t,r),Mn(t,Kt()),n;if(e===6)xs(t,r);else{if(s=t.current.alternate,!(r&30)&&!oS(s)&&(e=Zc(t,r),e===2&&(i=Eh(t),i!==0&&(r=i,e=ef(t,i))),e===1))throw n=Ha,ci(t,0),xs(t,r),Mn(t,Kt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(fe(345));case 2:Zs(t,Rn,zr);break;case 3:if(xs(t,r),(r&130023424)===r&&(e=gp+500-Kt(),10<e)){if(Dc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){En(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Oh(Zs.bind(null,t,Rn,zr),e);break}Zs(t,Rn,zr);break;case 4:if(xs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-fr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Kt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*iS(r/1960))-r,10<r){t.timeoutHandle=Oh(Zs.bind(null,t,Rn,zr),r);break}Zs(t,Rn,zr);break;case 5:Zs(t,Rn,zr);break;default:throw Error(fe(329))}}}return Mn(t,Kt()),t.callbackNode===n?V1.bind(null,t):null}function ef(t,e){var n=ga;return t.current.memoizedState.isDehydrated&&(ci(t,e).flags|=256),t=Zc(t,e),t!==2&&(e=Rn,Rn=n,e!==null&&tf(e)),t}function tf(t){Rn===null?Rn=t:Rn.push.apply(Rn,t)}function oS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!gr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function xs(t,e){for(e&=~mp,e&=~Au,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-fr(e),r=1<<n;t[n]=-1,e&=~r}}function Xg(t){if(ut&6)throw Error(fe(327));to();var e=Dc(t,0);if(!(e&1))return Mn(t,Kt()),null;var n=Zc(t,e);if(t.tag!==0&&n===2){var r=Eh(t);r!==0&&(e=r,n=ef(t,r))}if(n===1)throw n=Ha,ci(t,0),xs(t,e),Mn(t,Kt()),n;if(n===6)throw Error(fe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Zs(t,Rn,zr),Mn(t,Kt()),null}function yp(t,e){var n=ut;ut|=1;try{return t(e)}finally{ut=n,ut===0&&(fo=Kt()+500,ku&&Ws())}}function xi(t){ws!==null&&ws.tag===0&&!(ut&6)&&to();var e=ut;ut|=1;var n=Zn.transition,r=xt;try{if(Zn.transition=null,xt=1,t)return t()}finally{xt=r,Zn.transition=n,ut=e,!(ut&6)&&Ws()}}function xp(){Un=qi.current,Rt(qi)}function ci(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Mb(n)),Yt!==null)for(n=Yt.return;n!==null;){var r=n;switch(Xf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Bc();break;case 3:uo(),Rt(On),Rt(bn),ap();break;case 5:op(r);break;case 4:uo();break;case 13:Rt(Lt);break;case 19:Rt(Lt);break;case 10:np(r.type._context);break;case 22:case 23:xp()}n=n.return}if(cn=t,Yt=t=Ns(t.current,null),mn=Un=e,rn=0,Ha=null,mp=Au=yi=0,Rn=ga=null,si!==null){for(e=0;e<si.length;e++)if(n=si[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}si=null}return t}function G1(t,e){do{var n=Yt;try{if(tp(),yc.current=Yc,qc){for(var r=Ft.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}qc=!1}if(gi=0,an=en=Ft=null,pa=!1,Ua=0,pp.current=null,n===null||n.return===null){rn=1,Ha=e,Yt=null;break}e:{var i=t,o=n.return,c=n,u=e;if(e=mn,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=c,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var y=f.alternate;y?(f.updateQueue=y.updateQueue,f.memoizedState=y.memoizedState,f.lanes=y.lanes):(f.updateQueue=null,f.memoizedState=null)}var I=zg(o);if(I!==null){I.flags&=-257,Bg(I,o,c,i,e),I.mode&1&&Fg(i,d,e),e=I,u=d;var w=e.updateQueue;if(w===null){var T=new Set;T.add(u),e.updateQueue=T}else w.add(u);break e}else{if(!(e&1)){Fg(i,d,e),vp();break e}u=Error(fe(426))}}else if(Ot&&c.mode&1){var A=zg(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),Bg(A,o,c,i,e),Zf(ho(u,c));break e}}i=u=ho(u,c),rn!==4&&(rn=2),ga===null?ga=[i]:ga.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var S=N1(i,u,e);Ag(i,S);break e;case 1:c=u;var _=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Is===null||!Is.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var O=T1(i,c,e);Ag(i,O);break e}}i=i.return}while(i!==null)}Y1(n)}catch(G){e=G,Yt===n&&n!==null&&(Yt=n=n.return);continue}break}while(!0)}function K1(){var t=Qc.current;return Qc.current=Yc,t===null?Yc:t}function vp(){(rn===0||rn===3||rn===2)&&(rn=4),cn===null||!(yi&268435455)&&!(Au&268435455)||xs(cn,mn)}function Zc(t,e){var n=ut;ut|=2;var r=K1();(cn!==t||mn!==e)&&(zr=null,ci(t,e));do try{aS();break}catch(s){G1(t,s)}while(!0);if(tp(),ut=n,Qc.current=r,Yt!==null)throw Error(fe(261));return cn=null,mn=0,rn}function aS(){for(;Yt!==null;)q1(Yt)}function lS(){for(;Yt!==null&&!P_();)q1(Yt)}function q1(t){var e=J1(t.alternate,t,Un);t.memoizedProps=t.pendingProps,e===null?Y1(t):Yt=e,pp.current=null}function Y1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=tS(n,e),n!==null){n.flags&=32767,Yt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{rn=6,Yt=null;return}}else if(n=eS(n,e,Un),n!==null){Yt=n;return}if(e=e.sibling,e!==null){Yt=e;return}Yt=e=t}while(e!==null);rn===0&&(rn=5)}function Zs(t,e,n){var r=xt,s=Zn.transition;try{Zn.transition=null,xt=1,cS(t,e,n,r)}finally{Zn.transition=s,xt=r}return null}function cS(t,e,n,r){do to();while(ws!==null);if(ut&6)throw Error(fe(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(fe(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(W_(t,i),t===cn&&(Yt=cn=null,mn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||nc||(nc=!0,X1(Oc,function(){return to(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Zn.transition,Zn.transition=null;var o=xt;xt=1;var c=ut;ut|=4,pp.current=null,rS(t,n),W1(n,t),Nb(Ah),Mc=!!Rh,Ah=Rh=null,t.current=n,sS(n),O_(),ut=c,xt=o,Zn.transition=i}else t.current=n;if(nc&&(nc=!1,ws=t,Xc=s),i=t.pendingLanes,i===0&&(Is=null),L_(n.stateNode),Mn(t,Kt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Jc)throw Jc=!1,t=Xh,Xh=null,t;return Xc&1&&t.tag!==0&&to(),i=t.pendingLanes,i&1?t===Zh?ya++:(ya=0,Zh=t):ya=0,Ws(),null}function to(){if(ws!==null){var t=Nx(Xc),e=Zn.transition,n=xt;try{if(Zn.transition=null,xt=16>t?16:t,ws===null)var r=!1;else{if(t=ws,ws=null,Xc=0,ut&6)throw Error(fe(331));var s=ut;for(ut|=4,Ne=t.current;Ne!==null;){var i=Ne,o=i.child;if(Ne.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(Ne=d;Ne!==null;){var f=Ne;switch(f.tag){case 0:case 11:case 15:ma(8,f,i)}var p=f.child;if(p!==null)p.return=f,Ne=p;else for(;Ne!==null;){f=Ne;var y=f.sibling,I=f.return;if(B1(f),f===d){Ne=null;break}if(y!==null){y.return=I,Ne=y;break}Ne=I}}}var w=i.alternate;if(w!==null){var T=w.child;if(T!==null){w.child=null;do{var A=T.sibling;T.sibling=null,T=A}while(T!==null)}}Ne=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ne=o;else e:for(;Ne!==null;){if(i=Ne,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ma(9,i,i.return)}var S=i.sibling;if(S!==null){S.return=i.return,Ne=S;break e}Ne=i.return}}var _=t.current;for(Ne=_;Ne!==null;){o=Ne;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,Ne=v;else e:for(o=_;Ne!==null;){if(c=Ne,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Ru(9,c)}}catch(G){$t(c,c.return,G)}if(c===o){Ne=null;break e}var O=c.sibling;if(O!==null){O.return=c.return,Ne=O;break e}Ne=c.return}}if(ut=s,Ws(),Rr&&typeof Rr.onPostCommitFiberRoot=="function")try{Rr.onPostCommitFiberRoot(Su,t)}catch{}r=!0}return r}finally{xt=n,Zn.transition=e}}return!1}function Zg(t,e,n){e=ho(n,e),e=N1(t,e,1),t=Es(t,e,1),e=En(),t!==null&&(al(t,1,e),Mn(t,e))}function $t(t,e,n){if(t.tag===3)Zg(t,t,n);else for(;e!==null;){if(e.tag===3){Zg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Is===null||!Is.has(r))){t=ho(n,t),t=T1(e,t,1),e=Es(e,t,1),t=En(),e!==null&&(al(e,1,t),Mn(e,t));break}}e=e.return}}function uS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=En(),t.pingedLanes|=t.suspendedLanes&n,cn===t&&(mn&n)===n&&(rn===4||rn===3&&(mn&130023424)===mn&&500>Kt()-gp?ci(t,0):mp|=n),Mn(t,e)}function Q1(t,e){e===0&&(t.mode&1?(e=Gl,Gl<<=1,!(Gl&130023424)&&(Gl=4194304)):e=1);var n=En();t=Qr(t,e),t!==null&&(al(t,e,n),Mn(t,n))}function dS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Q1(t,n)}function hS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(fe(314))}r!==null&&r.delete(e),Q1(t,n)}var J1;J1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||On.current)An=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return An=!1,Zb(t,e,n);An=!!(t.flags&131072)}else An=!1,Ot&&e.flags&1048576&&t1(e,Wc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;vc(t,e),t=e.pendingProps;var s=ao(e,bn.current);eo(e,n),s=cp(null,e,r,t,s,n);var i=up();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Dn(r)?(i=!0,Uc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,sp(e),s.updater=Tu,e.stateNode=s,s._reactInternals=e,Uh(e,r,t,n),e=Hh(null,e,r,!0,i,n)):(e.tag=0,Ot&&i&&Jf(e),Sn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(vc(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=pS(r),t=or(r,t),s){case 0:e=Wh(null,e,r,t,n);break e;case 1:e=Wg(null,e,r,t,n);break e;case 11:e=Ug(null,e,r,t,n);break e;case 14:e=$g(null,e,r,or(r.type,t),n);break e}throw Error(fe(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:or(r,s),Wh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:or(r,s),Wg(t,e,r,s,n);case 3:e:{if(O1(e),t===null)throw Error(fe(387));r=e.pendingProps,i=e.memoizedState,s=i.element,a1(t,e),Gc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ho(Error(fe(423)),e),e=Hg(t,e,r,n,s);break e}else if(r!==s){s=ho(Error(fe(424)),e),e=Hg(t,e,r,n,s);break e}else for($n=js(e.stateNode.containerInfo.firstChild),Wn=e,Ot=!0,lr=null,n=i1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(lo(),r===s){e=Jr(t,e,n);break e}Sn(t,e,r,n)}e=e.child}return e;case 5:return l1(e),t===null&&Fh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Ph(r,s)?o=null:i!==null&&Ph(r,i)&&(e.flags|=32),P1(t,e),Sn(t,e,o,n),e.child;case 6:return t===null&&Fh(e),null;case 13:return D1(t,e,n);case 4:return ip(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=co(e,null,r,n):Sn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:or(r,s),Ug(t,e,r,s,n);case 7:return Sn(t,e,e.pendingProps,n),e.child;case 8:return Sn(t,e,e.pendingProps.children,n),e.child;case 12:return Sn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,kt(Hc,r._currentValue),r._currentValue=o,i!==null)if(gr(i.value,o)){if(i.children===s.children&&!On.current){e=Jr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){o=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Vr(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),zh(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(fe(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),zh(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Sn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,eo(e,n),s=er(s),r=r(s),e.flags|=1,Sn(t,e,r,n),e.child;case 14:return r=e.type,s=or(r,e.pendingProps),s=or(r.type,s),$g(t,e,r,s,n);case 15:return R1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:or(r,s),vc(t,e),e.tag=1,Dn(r)?(t=!0,Uc(e)):t=!1,eo(e,n),k1(e,r,s),Uh(e,r,s,n),Hh(null,e,r,!0,t,n);case 19:return M1(t,e,n);case 22:return A1(t,e,n)}throw Error(fe(156,e.tag))};function X1(t,e){return jx(t,e)}function fS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jn(t,e,n,r){return new fS(t,e,n,r)}function wp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function pS(t){if(typeof t=="function")return wp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===zf)return 11;if(t===Bf)return 14}return 2}function Ns(t,e){var n=t.alternate;return n===null?(n=Jn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function bc(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")wp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Fi:return ui(n.children,s,i,e);case Ff:o=8,s|=8;break;case dh:return t=Jn(12,n,e,s|2),t.elementType=dh,t.lanes=i,t;case hh:return t=Jn(13,n,e,s),t.elementType=hh,t.lanes=i,t;case fh:return t=Jn(19,n,e,s),t.elementType=fh,t.lanes=i,t;case lx:return Pu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ox:o=10;break e;case ax:o=9;break e;case zf:o=11;break e;case Bf:o=14;break e;case ms:o=16,r=null;break e}throw Error(fe(130,t==null?t:typeof t,""))}return e=Jn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ui(t,e,n,r){return t=Jn(7,t,r,e),t.lanes=n,t}function Pu(t,e,n,r){return t=Jn(22,t,r,e),t.elementType=lx,t.lanes=n,t.stateNode={isHidden:!1},t}function Fd(t,e,n){return t=Jn(6,t,null,e),t.lanes=n,t}function zd(t,e,n){return e=Jn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function mS(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vd(0),this.expirationTimes=vd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function _p(t,e,n,r,s,i,o,c,u){return t=new mS(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Jn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},sp(i),t}function gS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Li,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Z1(t){if(!t)return Ms;t=t._reactInternals;e:{if(Ei(t)!==t||t.tag!==1)throw Error(fe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Dn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(fe(171))}if(t.tag===1){var n=t.type;if(Dn(n))return Zx(t,n,e)}return e}function ev(t,e,n,r,s,i,o,c,u){return t=_p(n,r,!0,t,s,i,o,c,u),t.context=Z1(null),n=t.current,r=En(),s=ks(n),i=Vr(r,s),i.callback=e??null,Es(n,i,s),t.current.lanes=s,al(t,s,r),Mn(t,r),t}function Ou(t,e,n,r){var s=e.current,i=En(),o=ks(s);return n=Z1(n),e.context===null?e.context=n:e.pendingContext=n,e=Vr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Es(s,e,o),t!==null&&(pr(t,s,o,i),gc(t,s,o)),o}function eu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function e0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function bp(t,e){e0(t,e),(t=t.alternate)&&e0(t,e)}function yS(){return null}var tv=typeof reportError=="function"?reportError:function(t){console.error(t)};function Sp(t){this._internalRoot=t}Du.prototype.render=Sp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(fe(409));Ou(t,e,null,null)};Du.prototype.unmount=Sp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;xi(function(){Ou(null,t,null,null)}),e[Yr]=null}};function Du(t){this._internalRoot=t}Du.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ax();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ys.length&&e!==0&&e<ys[n].priority;n++);ys.splice(n,0,t),n===0&&Ox(t)}};function Cp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Mu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function t0(){}function xS(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=eu(o);i.call(d)}}var o=ev(e,r,t,0,null,!1,!1,"",t0);return t._reactRootContainer=o,t[Yr]=o.current,Ma(t.nodeType===8?t.parentNode:t),xi(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=eu(u);c.call(d)}}var u=_p(t,0,!1,null,null,!1,!1,"",t0);return t._reactRootContainer=u,t[Yr]=u.current,Ma(t.nodeType===8?t.parentNode:t),xi(function(){Ou(e,u,n,r)}),u}function Lu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var c=s;s=function(){var u=eu(o);c.call(u)}}Ou(e,o,t,s)}else o=xS(n,e,t,s,r);return eu(o)}Tx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=aa(e.pendingLanes);n!==0&&(Wf(e,n|1),Mn(e,Kt()),!(ut&6)&&(fo=Kt()+500,Ws()))}break;case 13:xi(function(){var r=Qr(t,1);if(r!==null){var s=En();pr(r,t,1,s)}}),bp(t,1)}};Hf=function(t){if(t.tag===13){var e=Qr(t,134217728);if(e!==null){var n=En();pr(e,t,134217728,n)}bp(t,134217728)}};Rx=function(t){if(t.tag===13){var e=ks(t),n=Qr(t,e);if(n!==null){var r=En();pr(n,t,e,r)}bp(t,e)}};Ax=function(){return xt};Px=function(t,e){var n=xt;try{return xt=t,e()}finally{xt=n}};Sh=function(t,e,n){switch(e){case"input":if(gh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Iu(r);if(!s)throw Error(fe(90));ux(r),gh(r,s)}}}break;case"textarea":hx(t,n);break;case"select":e=n.value,e!=null&&Qi(t,!!n.multiple,e,!1)}};vx=yp;wx=xi;var vS={usingClientEntryPoint:!1,Events:[cl,$i,Iu,yx,xx,yp]},Jo={findFiberByHostInstance:ri,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wS={bundleType:Jo.bundleType,version:Jo.version,rendererPackageName:Jo.rendererPackageName,rendererConfig:Jo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ts.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Sx(t),t===null?null:t.stateNode},findFiberByHostInstance:Jo.findFiberByHostInstance||yS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{Su=rc.inject(wS),Rr=rc}catch{}}Vn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vS;Vn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cp(e))throw Error(fe(200));return gS(t,e,null,n)};Vn.createRoot=function(t,e){if(!Cp(t))throw Error(fe(299));var n=!1,r="",s=tv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=_p(t,1,!1,null,null,n,!1,r,s),t[Yr]=e.current,Ma(t.nodeType===8?t.parentNode:t),new Sp(e)};Vn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(fe(188)):(t=Object.keys(t).join(","),Error(fe(268,t)));return t=Sx(e),t=t===null?null:t.stateNode,t};Vn.flushSync=function(t){return xi(t)};Vn.hydrate=function(t,e,n){if(!Mu(e))throw Error(fe(200));return Lu(null,t,e,!0,n)};Vn.hydrateRoot=function(t,e,n){if(!Cp(t))throw Error(fe(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=tv;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=ev(e,null,t,1,n??null,s,!1,i,o),t[Yr]=e.current,Ma(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Du(e)};Vn.render=function(t,e,n){if(!Mu(e))throw Error(fe(200));return Lu(null,t,e,!1,n)};Vn.unmountComponentAtNode=function(t){if(!Mu(t))throw Error(fe(40));return t._reactRootContainer?(xi(function(){Lu(null,null,t,!1,function(){t._reactRootContainer=null,t[Yr]=null})}),!0):!1};Vn.unstable_batchedUpdates=yp;Vn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Mu(n))throw Error(fe(200));if(t==null||t._reactInternals===void 0)throw Error(fe(38));return Lu(t,e,n,!1,r)};Vn.version="18.3.1-next-f1338f8080-20240426";function nv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(nv)}catch(t){console.error(t)}}nv(),nx.exports=Vn;var _S=nx.exports,n0=_S;ch.createRoot=n0.createRoot,ch.hydrateRoot=n0.hydrateRoot;/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var r0="popstate";function bS(t={}){function e(r,s){let{pathname:i,search:o,hash:c}=r.location;return nf("",{pathname:i,search:o,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Va(s)}return CS(e,n,null,t)}function zt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function yr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function SS(){return Math.random().toString(36).substring(2,10)}function s0(t,e){return{usr:t.state,key:t.key,idx:e}}function nf(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Io(e):e,state:n,key:e&&e.key||r||SS()}}function Va({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Io(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function CS(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,c="POP",u=null,d=f();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function f(){return(o.state||{idx:null}).idx}function p(){c="POP";let A=f(),S=A==null?null:A-d;d=A,u&&u({action:c,location:T.location,delta:S})}function y(A,S){c="PUSH";let _=nf(T.location,A,S);d=f()+1;let v=s0(_,d),O=T.createHref(_);try{o.pushState(v,"",O)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;s.location.assign(O)}i&&u&&u({action:c,location:T.location,delta:1})}function I(A,S){c="REPLACE";let _=nf(T.location,A,S);d=f();let v=s0(_,d),O=T.createHref(_);o.replaceState(v,"",O),i&&u&&u({action:c,location:T.location,delta:0})}function w(A){return jS(A)}let T={get action(){return c},get location(){return t(s,o)},listen(A){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(r0,p),u=A,()=>{s.removeEventListener(r0,p),u=null}},createHref(A){return e(s,A)},createURL:w,encodeLocation(A){let S=w(A);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:y,replace:I,go(A){return o.go(A)}};return T}function jS(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),zt(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Va(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function rv(t,e,n="/"){return ES(t,e,n,!1)}function ES(t,e,n,r){let s=typeof e=="string"?Io(e):e,i=Xr(s.pathname||"/",n);if(i==null)return null;let o=sv(t);IS(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=FS(i);c=MS(o[u],d,r)}return c}function sv(t,e=[],n=[],r="",s=!1){let i=(o,c,u=s,d)=>{let f={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(r)&&u)return;zt(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length)}let p=Gr([r,f.relativePath]),y=n.concat(f);o.children&&o.children.length>0&&(zt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),sv(o.children,e,y,p,u)),!(o.path==null&&!o.index)&&e.push({path:p,score:OS(p,o.index),routesMeta:y})};return t.forEach((o,c)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))i(o,c);else for(let d of iv(o.path))i(o,c,!0,d)}),e}function iv(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=iv(r.join("/")),c=[];return c.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function IS(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:DS(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var kS=/^:[\w-]+$/,NS=3,TS=2,RS=1,AS=10,PS=-2,i0=t=>t==="*";function OS(t,e){let n=t.split("/"),r=n.length;return n.some(i0)&&(r+=PS),e&&(r+=TS),n.filter(s=>!i0(s)).reduce((s,i)=>s+(kS.test(i)?NS:i===""?RS:AS),r)}function DS(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function MS(t,e,n=!1){let{routesMeta:r}=t,s={},i="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",p=tu({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),y=u.route;if(!p&&d&&n&&!r[r.length-1].route.index&&(p=tu({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:Gr([i,p.pathname]),pathnameBase:WS(Gr([i,p.pathnameBase])),route:y}),p.pathnameBase!=="/"&&(i=Gr([i,p.pathnameBase]))}return o}function tu(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=LS(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((d,{paramName:f,isOptional:p},y)=>{if(f==="*"){let w=c[y]||"";o=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const I=c[y];return p&&!I?d[f]=void 0:d[f]=(I||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function LS(t,e=!1,n=!0){yr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function FS(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return yr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Xr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var zS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,BS=t=>zS.test(t);function US(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Io(t):t,i;if(n)if(BS(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),yr(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${n}`)}n.startsWith("/")?i=o0(n.substring(1),"/"):i=o0(n,e)}else i=e;return{pathname:i,search:HS(r),hash:VS(s)}}function o0(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Bd(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function $S(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ov(t){let e=$S(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function av(t,e,n,r=!1){let s;typeof t=="string"?s=Io(t):(s={...t},zt(!s.pathname||!s.pathname.includes("?"),Bd("?","pathname","search",s)),zt(!s.pathname||!s.pathname.includes("#"),Bd("#","pathname","hash",s)),zt(!s.search||!s.search.includes("#"),Bd("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,c;if(o==null)c=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let y=o.split("/");for(;y[0]==="..";)y.shift(),p-=1;s.pathname=y.join("/")}c=p>=0?e[p]:"/"}let u=US(s,c),d=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}var Gr=t=>t.join("/").replace(/\/\/+/g,"/"),WS=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),HS=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,VS=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function GS(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function KS(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var lv=["POST","PUT","PATCH","DELETE"];new Set(lv);var qS=["GET",...lv];new Set(qS);var ko=g.createContext(null);ko.displayName="DataRouter";var Fu=g.createContext(null);Fu.displayName="DataRouterState";g.createContext(!1);var cv=g.createContext({isTransitioning:!1});cv.displayName="ViewTransition";var YS=g.createContext(new Map);YS.displayName="Fetchers";var QS=g.createContext(null);QS.displayName="Await";var vr=g.createContext(null);vr.displayName="Navigation";var dl=g.createContext(null);dl.displayName="Location";var ns=g.createContext({outlet:null,matches:[],isDataRoute:!1});ns.displayName="Route";var jp=g.createContext(null);jp.displayName="RouteError";function JS(t,{relative:e}={}){zt(hl(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=g.useContext(vr),{hash:s,pathname:i,search:o}=fl(t,{relative:e}),c=i;return n!=="/"&&(c=i==="/"?n:Gr([n,i])),r.createHref({pathname:c,search:o,hash:s})}function hl(){return g.useContext(dl)!=null}function Hs(){return zt(hl(),"useLocation() may be used only in the context of a <Router> component."),g.useContext(dl).location}var uv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function dv(t){g.useContext(vr).static||g.useLayoutEffect(t)}function zn(){let{isDataRoute:t}=g.useContext(ns);return t?uC():XS()}function XS(){zt(hl(),"useNavigate() may be used only in the context of a <Router> component.");let t=g.useContext(ko),{basename:e,navigator:n}=g.useContext(vr),{matches:r}=g.useContext(ns),{pathname:s}=Hs(),i=JSON.stringify(ov(r)),o=g.useRef(!1);return dv(()=>{o.current=!0}),g.useCallback((u,d={})=>{if(yr(o.current,uv),!o.current)return;if(typeof u=="number"){n.go(u);return}let f=av(u,JSON.parse(i),s,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Gr([e,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[e,n,i,s,t])}g.createContext(null);function fl(t,{relative:e}={}){let{matches:n}=g.useContext(ns),{pathname:r}=Hs(),s=JSON.stringify(ov(n));return g.useMemo(()=>av(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function ZS(t,e){return hv(t,e)}function hv(t,e,n,r,s){var _;zt(hl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=g.useContext(vr),{matches:o}=g.useContext(ns),c=o[o.length-1],u=c?c.params:{},d=c?c.pathname:"/",f=c?c.pathnameBase:"/",p=c&&c.route;{let v=p&&p.path||"";fv(d,!p||v.endsWith("*")||v.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${v}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${v}"> to <Route path="${v==="/"?"*":`${v}/*`}">.`)}let y=Hs(),I;if(e){let v=typeof e=="string"?Io(e):e;zt(f==="/"||((_=v.pathname)==null?void 0:_.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${v.pathname}" was given in the \`location\` prop.`),I=v}else I=y;let w=I.pathname||"/",T=w;if(f!=="/"){let v=f.replace(/^\//,"").split("/");T="/"+w.replace(/^\//,"").split("/").slice(v.length).join("/")}let A=rv(t,{pathname:T});yr(p||A!=null,`No routes matched location "${I.pathname}${I.search}${I.hash}" `),yr(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${I.pathname}${I.search}${I.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=sC(A&&A.map(v=>Object.assign({},v,{params:Object.assign({},u,v.params),pathname:Gr([f,i.encodeLocation?i.encodeLocation(v.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?f:Gr([f,i.encodeLocation?i.encodeLocation(v.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:v.pathnameBase])})),o,n,r,s);return e&&S?g.createElement(dl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...I},navigationType:"POP"}},S):S}function eC(){let t=cC(),e=GS(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=g.createElement(g.Fragment,null,g.createElement("p",null," Hey developer "),g.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",g.createElement("code",{style:i},"ErrorBoundary")," or"," ",g.createElement("code",{style:i},"errorElement")," prop on your route.")),g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},e),n?g.createElement("pre",{style:s},n):null,o)}var tC=g.createElement(eC,null),nC=class extends g.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?g.createElement(ns.Provider,{value:this.props.routeContext},g.createElement(jp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function rC({routeContext:t,match:e,children:n}){let r=g.useContext(ko);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),g.createElement(ns.Provider,{value:t},n)}function sC(t,e=[],n=null,r=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=n==null?void 0:n.errors;if(o!=null){let f=i.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);zt(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,f+1))}let c=!1,u=-1;if(n)for(let f=0;f<i.length;f++){let p=i[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=f),p.route.id){let{loaderData:y,errors:I}=n,w=p.route.loader&&!y.hasOwnProperty(p.route.id)&&(!I||I[p.route.id]===void 0);if(p.route.lazy||w){c=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}let d=n&&r?(f,p)=>{var y,I;r(f,{location:n.location,params:((I=(y=n.matches)==null?void 0:y[0])==null?void 0:I.params)??{},unstable_pattern:KS(n.matches),errorInfo:p})}:void 0;return i.reduceRight((f,p,y)=>{let I,w=!1,T=null,A=null;n&&(I=o&&p.route.id?o[p.route.id]:void 0,T=p.route.errorElement||tC,c&&(u<0&&y===0?(fv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,A=null):u===y&&(w=!0,A=p.route.hydrateFallbackElement||null)));let S=e.concat(i.slice(0,y+1)),_=()=>{let v;return I?v=T:w?v=A:p.route.Component?v=g.createElement(p.route.Component,null):p.route.element?v=p.route.element:v=f,g.createElement(rC,{match:p,routeContext:{outlet:f,matches:S,isDataRoute:n!=null},children:v})};return n&&(p.route.ErrorBoundary||p.route.errorElement||y===0)?g.createElement(nC,{location:n.location,revalidation:n.revalidation,component:T,error:I,children:_(),routeContext:{outlet:null,matches:S,isDataRoute:!0},onError:d}):_()},null)}function Ep(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function iC(t){let e=g.useContext(ko);return zt(e,Ep(t)),e}function oC(t){let e=g.useContext(Fu);return zt(e,Ep(t)),e}function aC(t){let e=g.useContext(ns);return zt(e,Ep(t)),e}function Ip(t){let e=aC(t),n=e.matches[e.matches.length-1];return zt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function lC(){return Ip("useRouteId")}function cC(){var r;let t=g.useContext(jp),e=oC("useRouteError"),n=Ip("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function uC(){let{router:t}=iC("useNavigate"),e=Ip("useNavigate"),n=g.useRef(!1);return dv(()=>{n.current=!0}),g.useCallback(async(s,i={})=>{yr(n.current,uv),n.current&&(typeof s=="number"?await t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var a0={};function fv(t,e,n){!e&&!a0[t]&&(a0[t]=!0,yr(!1,n))}g.memo(dC);function dC({routes:t,future:e,state:n,unstable_onError:r}){return hv(t,void 0,n,r,e)}function hn(t){zt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function hC({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:i=!1,unstable_useTransitions:o}){zt(!hl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),u=g.useMemo(()=>({basename:c,navigator:s,static:i,unstable_useTransitions:o,future:{}}),[c,s,i,o]);typeof n=="string"&&(n=Io(n));let{pathname:d="/",search:f="",hash:p="",state:y=null,key:I="default"}=n,w=g.useMemo(()=>{let T=Xr(d,c);return T==null?null:{location:{pathname:T,search:f,hash:p,state:y,key:I},navigationType:r}},[c,d,f,p,y,I,r]);return yr(w!=null,`<Router basename="${c}"> is not able to match the URL "${d}${f}${p}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:g.createElement(vr.Provider,{value:u},g.createElement(dl.Provider,{children:e,value:w}))}function fC({children:t,location:e}){return ZS(rf(t),e)}function rf(t,e=[]){let n=[];return g.Children.forEach(t,(r,s)=>{if(!g.isValidElement(r))return;let i=[...e,s];if(r.type===g.Fragment){n.push.apply(n,rf(r.props.children,i));return}zt(r.type===hn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),zt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=rf(r.props.children,i)),n.push(o)}),n}var Sc="get",Cc="application/x-www-form-urlencoded";function zu(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function pC(t){return zu(t)&&t.tagName.toLowerCase()==="button"}function mC(t){return zu(t)&&t.tagName.toLowerCase()==="form"}function gC(t){return zu(t)&&t.tagName.toLowerCase()==="input"}function yC(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function xC(t,e){return t.button===0&&(!e||e==="_self")&&!yC(t)}var sc=null;function vC(){if(sc===null)try{new FormData(document.createElement("form"),0),sc=!1}catch{sc=!0}return sc}var wC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ud(t){return t!=null&&!wC.has(t)?(yr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Cc}"`),null):t}function _C(t,e){let n,r,s,i,o;if(mC(t)){let c=t.getAttribute("action");r=c?Xr(c,e):null,n=t.getAttribute("method")||Sc,s=Ud(t.getAttribute("enctype"))||Cc,i=new FormData(t)}else if(pC(t)||gC(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||c.getAttribute("action");if(r=u?Xr(u,e):null,n=t.getAttribute("formmethod")||c.getAttribute("method")||Sc,s=Ud(t.getAttribute("formenctype"))||Ud(c.getAttribute("enctype"))||Cc,i=new FormData(c,t),!vC()){let{name:d,type:f,value:p}=t;if(f==="image"){let y=d?`${d}.`:"";i.append(`${y}x`,"0"),i.append(`${y}y`,"0")}else d&&i.append(d,p)}}else{if(zu(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Sc,r=null,s=Cc,o=t}return i&&s==="text/plain"&&(o=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function kp(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function bC(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Xr(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function SC(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function CC(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function jC(t,e,n){let r=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let o=await SC(i,n);return o.links?o.links():[]}return[]}));return NC(r.flat(1).filter(CC).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function l0(t,e,n,r,s,i){let o=(u,d)=>n[d]?u.route.id!==n[d].route.id:!0,c=(u,d)=>{var f;return n[d].pathname!==u.pathname||((f=n[d].route.path)==null?void 0:f.endsWith("*"))&&n[d].params["*"]!==u.params["*"]};return i==="assets"?e.filter((u,d)=>o(u,d)||c(u,d)):i==="data"?e.filter((u,d)=>{var p;let f=r.routes[u.route.id];if(!f||!f.hasLoader)return!1;if(o(u,d)||c(u,d))return!0;if(u.route.shouldRevalidate){let y=u.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((p=n[0])==null?void 0:p.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function EC(t,e,{includeHydrateFallback:n}={}){return IC(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function IC(t){return[...new Set(t)]}function kC(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function NC(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let i=JSON.stringify(kC(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}function pv(){let t=g.useContext(ko);return kp(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function TC(){let t=g.useContext(Fu);return kp(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Np=g.createContext(void 0);Np.displayName="FrameworkContext";function mv(){let t=g.useContext(Np);return kp(t,"You must render this element inside a <HydratedRouter> element"),t}function RC(t,e){let n=g.useContext(Np),[r,s]=g.useState(!1),[i,o]=g.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:d,onMouseLeave:f,onTouchStart:p}=e,y=g.useRef(null);g.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let T=S=>{S.forEach(_=>{o(_.isIntersecting)})},A=new IntersectionObserver(T,{threshold:.5});return y.current&&A.observe(y.current),()=>{A.disconnect()}}},[t]),g.useEffect(()=>{if(r){let T=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(T)}}},[r]);let I=()=>{s(!0)},w=()=>{s(!1),o(!1)};return n?t!=="intent"?[i,y,{}]:[i,y,{onFocus:Xo(c,I),onBlur:Xo(u,w),onMouseEnter:Xo(d,I),onMouseLeave:Xo(f,w),onTouchStart:Xo(p,I)}]:[!1,y,{}]}function Xo(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function AC({page:t,...e}){let{router:n}=pv(),r=g.useMemo(()=>rv(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?g.createElement(OC,{page:t,matches:r,...e}):null}function PC(t){let{manifest:e,routeModules:n}=mv(),[r,s]=g.useState([]);return g.useEffect(()=>{let i=!1;return jC(t,e,n).then(o=>{i||s(o)}),()=>{i=!0}},[t,e,n]),r}function OC({page:t,matches:e,...n}){let r=Hs(),{manifest:s,routeModules:i}=mv(),{basename:o}=pv(),{loaderData:c,matches:u}=TC(),d=g.useMemo(()=>l0(t,e,u,s,r,"data"),[t,e,u,s,r]),f=g.useMemo(()=>l0(t,e,u,s,r,"assets"),[t,e,u,s,r]),p=g.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let w=new Set,T=!1;if(e.forEach(S=>{var v;let _=s.routes[S.route.id];!_||!_.hasLoader||(!d.some(O=>O.route.id===S.route.id)&&S.route.id in c&&((v=i[S.route.id])!=null&&v.shouldRevalidate)||_.hasClientLoader?T=!0:w.add(S.route.id))}),w.size===0)return[];let A=bC(t,o,"data");return T&&w.size>0&&A.searchParams.set("_routes",e.filter(S=>w.has(S.route.id)).map(S=>S.route.id).join(",")),[A.pathname+A.search]},[o,c,r,s,d,e,t,i]),y=g.useMemo(()=>EC(f,s),[f,s]),I=PC(f);return g.createElement(g.Fragment,null,p.map(w=>g.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...n})),y.map(w=>g.createElement("link",{key:w,rel:"modulepreload",href:w,...n})),I.map(({key:w,link:T})=>g.createElement("link",{key:w,nonce:n.nonce,...T})))}function DC(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var gv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{gv&&(window.__reactRouterVersion="7.10.1")}catch{}function MC({basename:t,children:e,unstable_useTransitions:n,window:r}){let s=g.useRef();s.current==null&&(s.current=bS({window:r,v5Compat:!0}));let i=s.current,[o,c]=g.useState({action:i.action,location:i.location}),u=g.useCallback(d=>{n===!1?c(d):g.startTransition(()=>c(d))},[n]);return g.useLayoutEffect(()=>i.listen(u),[i,u]),g.createElement(hC,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:i,unstable_useTransitions:n===!0})}var yv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ye=g.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:o,state:c,target:u,to:d,preventScrollReset:f,viewTransition:p,...y},I){let{basename:w,unstable_useTransitions:T}=g.useContext(vr),A=typeof d=="string"&&yv.test(d),S,_=!1;if(typeof d=="string"&&A&&(S=d,gv))try{let k=new URL(window.location.href),N=d.startsWith("//")?new URL(k.protocol+d):new URL(d),R=Xr(N.pathname,w);N.origin===k.origin&&R!=null?d=R+N.search+N.hash:_=!0}catch{yr(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=JS(d,{relative:s}),[O,G,oe]=RC(r,y),E=BC(d,{replace:o,state:c,target:u,preventScrollReset:f,relative:s,viewTransition:p,unstable_useTransitions:T});function x(k){e&&e(k),k.defaultPrevented||E(k)}let C=g.createElement("a",{...y,...oe,href:S||v,onClick:_||i?e:x,ref:DC(I,G),target:u,"data-discover":!A&&n==="render"?"true":void 0});return O&&!A?g.createElement(g.Fragment,null,C,g.createElement(AC,{page:v})):C});ye.displayName="Link";var LC=g.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:o,viewTransition:c,children:u,...d},f){let p=fl(o,{relative:d.relative}),y=Hs(),I=g.useContext(Fu),{navigator:w,basename:T}=g.useContext(vr),A=I!=null&&VC(p)&&c===!0,S=w.encodeLocation?w.encodeLocation(p).pathname:p.pathname,_=y.pathname,v=I&&I.navigation&&I.navigation.location?I.navigation.location.pathname:null;n||(_=_.toLowerCase(),v=v?v.toLowerCase():null,S=S.toLowerCase()),v&&T&&(v=Xr(v,T)||v);const O=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let G=_===S||!s&&_.startsWith(S)&&_.charAt(O)==="/",oe=v!=null&&(v===S||!s&&v.startsWith(S)&&v.charAt(S.length)==="/"),E={isActive:G,isPending:oe,isTransitioning:A},x=G?e:void 0,C;typeof r=="function"?C=r(E):C=[r,G?"active":null,oe?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let k=typeof i=="function"?i(E):i;return g.createElement(ye,{...d,"aria-current":x,className:C,ref:f,style:k,to:o,viewTransition:c},typeof u=="function"?u(E):u)});LC.displayName="NavLink";var FC=g.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:i,method:o=Sc,action:c,onSubmit:u,relative:d,preventScrollReset:f,viewTransition:p,...y},I)=>{let{unstable_useTransitions:w}=g.useContext(vr),T=WC(),A=HC(c,{relative:d}),S=o.toLowerCase()==="get"?"get":"post",_=typeof c=="string"&&yv.test(c),v=O=>{if(u&&u(O),O.defaultPrevented)return;O.preventDefault();let G=O.nativeEvent.submitter,oe=(G==null?void 0:G.getAttribute("formmethod"))||o,E=()=>T(G||O.currentTarget,{fetcherKey:e,method:oe,navigate:n,replace:s,state:i,relative:d,preventScrollReset:f,viewTransition:p});w&&n!==!1?g.startTransition(()=>E()):E()};return g.createElement("form",{ref:I,method:S,action:A,onSubmit:r?u:v,...y,"data-discover":!_&&t==="render"?"true":void 0})});FC.displayName="Form";function zC(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xv(t){let e=g.useContext(ko);return zt(e,zC(t)),e}function BC(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:o,unstable_useTransitions:c}={}){let u=zn(),d=Hs(),f=fl(t,{relative:i});return g.useCallback(p=>{if(xC(p,e)){p.preventDefault();let y=n!==void 0?n:Va(d)===Va(f),I=()=>u(t,{replace:y,state:r,preventScrollReset:s,relative:i,viewTransition:o});c?g.startTransition(()=>I()):I()}},[d,u,f,n,r,e,t,s,i,o,c])}var UC=0,$C=()=>`__${String(++UC)}__`;function WC(){let{router:t}=xv("useSubmit"),{basename:e}=g.useContext(vr),n=lC(),r=t.fetch,s=t.navigate;return g.useCallback(async(i,o={})=>{let{action:c,method:u,encType:d,formData:f,body:p}=_C(i,e);if(o.navigate===!1){let y=o.fetcherKey||$C();await r(y,n,o.action||c,{preventScrollReset:o.preventScrollReset,formData:f,body:p,formMethod:o.method||u,formEncType:o.encType||d,flushSync:o.flushSync})}else await s(o.action||c,{preventScrollReset:o.preventScrollReset,formData:f,body:p,formMethod:o.method||u,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,s,e,n])}function HC(t,{relative:e}={}){let{basename:n}=g.useContext(vr),r=g.useContext(ns);zt(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...fl(t||".",{relative:e})},o=Hs();if(t==null){i.search=o.search;let c=new URLSearchParams(i.search),u=c.getAll("index");if(u.some(f=>f==="")){c.delete("index"),u.filter(p=>p).forEach(p=>c.append("index",p));let f=c.toString();i.search=f?`?${f}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:Gr([n,i.pathname])),Va(i)}function VC(t,{relative:e}={}){let n=g.useContext(cv);zt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=xv("useViewTransitionState"),s=fl(t,{relative:e});if(!n.isTransitioning)return!1;let i=Xr(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Xr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return tu(s.pathname,o)!=null||tu(s.pathname,i)!=null}function vv(t,e){return function(){return t.apply(e,arguments)}}const{toString:GC}=Object.prototype,{getPrototypeOf:Tp}=Object,{iterator:Bu,toStringTag:wv}=Symbol,Uu=(t=>e=>{const n=GC.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),wr=t=>(t=t.toLowerCase(),e=>Uu(e)===t),$u=t=>e=>typeof e===t,{isArray:No}=Array,po=$u("undefined");function pl(t){return t!==null&&!po(t)&&t.constructor!==null&&!po(t.constructor)&&Ln(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const _v=wr("ArrayBuffer");function KC(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&_v(t.buffer),e}const qC=$u("string"),Ln=$u("function"),bv=$u("number"),ml=t=>t!==null&&typeof t=="object",YC=t=>t===!0||t===!1,jc=t=>{if(Uu(t)!=="object")return!1;const e=Tp(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(wv in t)&&!(Bu in t)},QC=t=>{if(!ml(t)||pl(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},JC=wr("Date"),XC=wr("File"),ZC=wr("Blob"),e4=wr("FileList"),t4=t=>ml(t)&&Ln(t.pipe),n4=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Ln(t.append)&&((e=Uu(t))==="formdata"||e==="object"&&Ln(t.toString)&&t.toString()==="[object FormData]"))},r4=wr("URLSearchParams"),[s4,i4,o4,a4]=["ReadableStream","Request","Response","Headers"].map(wr),l4=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function gl(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),No(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{if(pl(t))return;const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let c;for(r=0;r<o;r++)c=i[r],e.call(null,t[c],c,t)}}function Sv(t,e){if(pl(t))return null;e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const oi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Cv=t=>!po(t)&&t!==oi;function sf(){const{caseless:t,skipUndefined:e}=Cv(this)&&this||{},n={},r=(s,i)=>{const o=t&&Sv(n,i)||i;jc(n[o])&&jc(s)?n[o]=sf(n[o],s):jc(s)?n[o]=sf({},s):No(s)?n[o]=s.slice():(!e||!po(s))&&(n[o]=s)};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&gl(arguments[s],r);return n}const c4=(t,e,n,{allOwnKeys:r}={})=>(gl(e,(s,i)=>{n&&Ln(s)?t[i]=vv(s,n):t[i]=s},{allOwnKeys:r}),t),u4=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),d4=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},h4=(t,e,n,r)=>{let s,i,o;const c={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!r||r(o,t,e))&&!c[o]&&(e[o]=t[o],c[o]=!0);t=n!==!1&&Tp(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},f4=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},p4=t=>{if(!t)return null;if(No(t))return t;let e=t.length;if(!bv(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},m4=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Tp(Uint8Array)),g4=(t,e)=>{const r=(t&&t[Bu]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},y4=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},x4=wr("HTMLFormElement"),v4=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),c0=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),w4=wr("RegExp"),jv=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};gl(n,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(r[i]=o||s)}),Object.defineProperties(t,r)},_4=t=>{jv(t,(e,n)=>{if(Ln(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Ln(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},b4=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return No(t)?r(t):r(String(t).split(e)),n},S4=()=>{},C4=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function j4(t){return!!(t&&Ln(t.append)&&t[wv]==="FormData"&&t[Bu])}const E4=t=>{const e=new Array(10),n=(r,s)=>{if(ml(r)){if(e.indexOf(r)>=0)return;if(pl(r))return r;if(!("toJSON"in r)){e[s]=r;const i=No(r)?[]:{};return gl(r,(o,c)=>{const u=n(o,s+1);!po(u)&&(i[c]=u)}),e[s]=void 0,i}}return r};return n(t,0)},I4=wr("AsyncFunction"),k4=t=>t&&(ml(t)||Ln(t))&&Ln(t.then)&&Ln(t.catch),Ev=((t,e)=>t?setImmediate:e?((n,r)=>(oi.addEventListener("message",({source:s,data:i})=>{s===oi&&i===n&&r.length&&r.shift()()},!1),s=>{r.push(s),oi.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Ln(oi.postMessage)),N4=typeof queueMicrotask<"u"?queueMicrotask.bind(oi):typeof process<"u"&&process.nextTick||Ev,T4=t=>t!=null&&Ln(t[Bu]),q={isArray:No,isArrayBuffer:_v,isBuffer:pl,isFormData:n4,isArrayBufferView:KC,isString:qC,isNumber:bv,isBoolean:YC,isObject:ml,isPlainObject:jc,isEmptyObject:QC,isReadableStream:s4,isRequest:i4,isResponse:o4,isHeaders:a4,isUndefined:po,isDate:JC,isFile:XC,isBlob:ZC,isRegExp:w4,isFunction:Ln,isStream:t4,isURLSearchParams:r4,isTypedArray:m4,isFileList:e4,forEach:gl,merge:sf,extend:c4,trim:l4,stripBOM:u4,inherits:d4,toFlatObject:h4,kindOf:Uu,kindOfTest:wr,endsWith:f4,toArray:p4,forEachEntry:g4,matchAll:y4,isHTMLForm:x4,hasOwnProperty:c0,hasOwnProp:c0,reduceDescriptors:jv,freezeMethods:_4,toObjectSet:b4,toCamelCase:v4,noop:S4,toFiniteNumber:C4,findKey:Sv,global:oi,isContextDefined:Cv,isSpecCompliantForm:j4,toJSONObject:E4,isAsyncFn:I4,isThenable:k4,setImmediate:Ev,asap:N4,isIterable:T4};function Ke(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}q.inherits(Ke,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:q.toJSONObject(this.config),code:this.code,status:this.status}}});const Iv=Ke.prototype,kv={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{kv[t]={value:t}});Object.defineProperties(Ke,kv);Object.defineProperty(Iv,"isAxiosError",{value:!0});Ke.from=(t,e,n,r,s,i)=>{const o=Object.create(Iv);q.toFlatObject(t,o,function(f){return f!==Error.prototype},d=>d!=="isAxiosError");const c=t&&t.message?t.message:"Error",u=e==null&&t?t.code:e;return Ke.call(o,c,u,n,r,s),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",i&&Object.assign(o,i),o};const R4=null;function of(t){return q.isPlainObject(t)||q.isArray(t)}function Nv(t){return q.endsWith(t,"[]")?t.slice(0,-2):t}function u0(t,e,n){return t?t.concat(e).map(function(s,i){return s=Nv(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function A4(t){return q.isArray(t)&&!t.some(of)}const P4=q.toFlatObject(q,{},null,function(e){return/^is[A-Z]/.test(e)});function Wu(t,e,n){if(!q.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=q.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(T,A){return!q.isUndefined(A[T])});const r=n.metaTokens,s=n.visitor||f,i=n.dots,o=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&q.isSpecCompliantForm(e);if(!q.isFunction(s))throw new TypeError("visitor must be a function");function d(w){if(w===null)return"";if(q.isDate(w))return w.toISOString();if(q.isBoolean(w))return w.toString();if(!u&&q.isBlob(w))throw new Ke("Blob is not supported. Use a Buffer instead.");return q.isArrayBuffer(w)||q.isTypedArray(w)?u&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function f(w,T,A){let S=w;if(w&&!A&&typeof w=="object"){if(q.endsWith(T,"{}"))T=r?T:T.slice(0,-2),w=JSON.stringify(w);else if(q.isArray(w)&&A4(w)||(q.isFileList(w)||q.endsWith(T,"[]"))&&(S=q.toArray(w)))return T=Nv(T),S.forEach(function(v,O){!(q.isUndefined(v)||v===null)&&e.append(o===!0?u0([T],O,i):o===null?T:T+"[]",d(v))}),!1}return of(w)?!0:(e.append(u0(A,T,i),d(w)),!1)}const p=[],y=Object.assign(P4,{defaultVisitor:f,convertValue:d,isVisitable:of});function I(w,T){if(!q.isUndefined(w)){if(p.indexOf(w)!==-1)throw Error("Circular reference detected in "+T.join("."));p.push(w),q.forEach(w,function(S,_){(!(q.isUndefined(S)||S===null)&&s.call(e,S,q.isString(_)?_.trim():_,T,y))===!0&&I(S,T?T.concat(_):[_])}),p.pop()}}if(!q.isObject(t))throw new TypeError("data must be an object");return I(t),e}function d0(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Rp(t,e){this._pairs=[],t&&Wu(t,this,e)}const Tv=Rp.prototype;Tv.append=function(e,n){this._pairs.push([e,n])};Tv.toString=function(e){const n=e?function(r){return e.call(this,r,d0)}:d0;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function O4(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Rv(t,e,n){if(!e)return t;const r=n&&n.encode||O4;q.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(s?i=s(e,n):i=q.isURLSearchParams(e)?e.toString():new Rp(e,n).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class h0{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){q.forEach(this.handlers,function(r){r!==null&&e(r)})}}const Av={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},D4=typeof URLSearchParams<"u"?URLSearchParams:Rp,M4=typeof FormData<"u"?FormData:null,L4=typeof Blob<"u"?Blob:null,F4={isBrowser:!0,classes:{URLSearchParams:D4,FormData:M4,Blob:L4},protocols:["http","https","file","blob","url","data"]},Ap=typeof window<"u"&&typeof document<"u",af=typeof navigator=="object"&&navigator||void 0,z4=Ap&&(!af||["ReactNative","NativeScript","NS"].indexOf(af.product)<0),B4=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",U4=Ap&&window.location.href||"http://localhost",$4=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ap,hasStandardBrowserEnv:z4,hasStandardBrowserWebWorkerEnv:B4,navigator:af,origin:U4},Symbol.toStringTag,{value:"Module"})),_n={...$4,...F4};function W4(t,e){return Wu(t,new _n.classes.URLSearchParams,{visitor:function(n,r,s,i){return _n.isNode&&q.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function H4(t){return q.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function V4(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function Pv(t){function e(n,r,s,i){let o=n[i++];if(o==="__proto__")return!0;const c=Number.isFinite(+o),u=i>=n.length;return o=!o&&q.isArray(s)?s.length:o,u?(q.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!c):((!s[o]||!q.isObject(s[o]))&&(s[o]=[]),e(n,r,s[o],i)&&q.isArray(s[o])&&(s[o]=V4(s[o])),!c)}if(q.isFormData(t)&&q.isFunction(t.entries)){const n={};return q.forEachEntry(t,(r,s)=>{e(H4(r),s,n,0)}),n}return null}function G4(t,e,n){if(q.isString(t))try{return(e||JSON.parse)(t),q.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const yl={transitional:Av,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=q.isObject(e);if(i&&q.isHTMLForm(e)&&(e=new FormData(e)),q.isFormData(e))return s?JSON.stringify(Pv(e)):e;if(q.isArrayBuffer(e)||q.isBuffer(e)||q.isStream(e)||q.isFile(e)||q.isBlob(e)||q.isReadableStream(e))return e;if(q.isArrayBufferView(e))return e.buffer;if(q.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let c;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return W4(e,this.formSerializer).toString();if((c=q.isFileList(e))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Wu(c?{"files[]":e}:e,u&&new u,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),G4(e)):e}],transformResponse:[function(e){const n=this.transitional||yl.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(q.isResponse(e)||q.isReadableStream(e))return e;if(e&&q.isString(e)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e,this.parseReviver)}catch(c){if(o)throw c.name==="SyntaxError"?Ke.from(c,Ke.ERR_BAD_RESPONSE,this,null,this.response):c}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:_n.classes.FormData,Blob:_n.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};q.forEach(["delete","get","head","post","put","patch"],t=>{yl.headers[t]={}});const K4=q.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),q4=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||e[n]&&K4[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},f0=Symbol("internals");function Zo(t){return t&&String(t).trim().toLowerCase()}function Ec(t){return t===!1||t==null?t:q.isArray(t)?t.map(Ec):String(t)}function Y4(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const Q4=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function $d(t,e,n,r,s){if(q.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!q.isString(e)){if(q.isString(r))return e.indexOf(r)!==-1;if(q.isRegExp(r))return r.test(e)}}function J4(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function X4(t,e){const n=q.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,o){return this[r].call(this,e,s,i,o)},configurable:!0})})}let Fn=class{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(c,u,d){const f=Zo(u);if(!f)throw new Error("header name must be a non-empty string");const p=q.findKey(s,f);(!p||s[p]===void 0||d===!0||d===void 0&&s[p]!==!1)&&(s[p||u]=Ec(c))}const o=(c,u)=>q.forEach(c,(d,f)=>i(d,f,u));if(q.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(q.isString(e)&&(e=e.trim())&&!Q4(e))o(q4(e),n);else if(q.isObject(e)&&q.isIterable(e)){let c={},u,d;for(const f of e){if(!q.isArray(f))throw TypeError("Object iterator must return a key-value pair");c[d=f[0]]=(u=c[d])?q.isArray(u)?[...u,f[1]]:[u,f[1]]:f[1]}o(c,n)}else e!=null&&i(n,e,r);return this}get(e,n){if(e=Zo(e),e){const r=q.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return Y4(s);if(q.isFunction(n))return n.call(this,s,r);if(q.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Zo(e),e){const r=q.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||$d(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(o){if(o=Zo(o),o){const c=q.findKey(r,o);c&&(!n||$d(r,r[c],c,n))&&(delete r[c],s=!0)}}return q.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||$d(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return q.forEach(this,(s,i)=>{const o=q.findKey(r,i);if(o){n[o]=Ec(s),delete n[i];return}const c=e?J4(i):String(i).trim();c!==i&&delete n[i],n[c]=Ec(s),r[c]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return q.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&q.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[f0]=this[f0]={accessors:{}}).accessors,s=this.prototype;function i(o){const c=Zo(o);r[c]||(X4(s,o),r[c]=!0)}return q.isArray(e)?e.forEach(i):i(e),this}};Fn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);q.reduceDescriptors(Fn.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});q.freezeMethods(Fn);function Wd(t,e){const n=this||yl,r=e||n,s=Fn.from(r.headers);let i=r.data;return q.forEach(t,function(c){i=c.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function Ov(t){return!!(t&&t.__CANCEL__)}function To(t,e,n){Ke.call(this,t??"canceled",Ke.ERR_CANCELED,e,n),this.name="CanceledError"}q.inherits(To,Ke,{__CANCEL__:!0});function Dv(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Ke("Request failed with status code "+n.status,[Ke.ERR_BAD_REQUEST,Ke.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Z4(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function ej(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(u){const d=Date.now(),f=r[i];o||(o=d),n[s]=u,r[s]=d;let p=i,y=0;for(;p!==s;)y+=n[p++],p=p%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),d-o<e)return;const I=f&&d-f;return I?Math.round(y*1e3/I):void 0}}function tj(t,e){let n=0,r=1e3/e,s,i;const o=(d,f=Date.now())=>{n=f,s=null,i&&(clearTimeout(i),i=null),t(...d)};return[(...d)=>{const f=Date.now(),p=f-n;p>=r?o(d,f):(s=d,i||(i=setTimeout(()=>{i=null,o(s)},r-p)))},()=>s&&o(s)]}const nu=(t,e,n=3)=>{let r=0;const s=ej(50,250);return tj(i=>{const o=i.loaded,c=i.lengthComputable?i.total:void 0,u=o-r,d=s(u),f=o<=c;r=o;const p={loaded:o,total:c,progress:c?o/c:void 0,bytes:u,rate:d||void 0,estimated:d&&c&&f?(c-o)/d:void 0,event:i,lengthComputable:c!=null,[e?"download":"upload"]:!0};t(p)},n)},p0=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},m0=t=>(...e)=>q.asap(()=>t(...e)),nj=_n.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,_n.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(_n.origin),_n.navigator&&/(msie|trident)/i.test(_n.navigator.userAgent)):()=>!0,rj=_n.hasStandardBrowserEnv?{write(t,e,n,r,s,i,o){if(typeof document>"u")return;const c=[`${t}=${encodeURIComponent(e)}`];q.isNumber(n)&&c.push(`expires=${new Date(n).toUTCString()}`),q.isString(r)&&c.push(`path=${r}`),q.isString(s)&&c.push(`domain=${s}`),i===!0&&c.push("secure"),q.isString(o)&&c.push(`SameSite=${o}`),document.cookie=c.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function sj(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function ij(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Mv(t,e,n){let r=!sj(e);return t&&(r||n==!1)?ij(t,e):e}const g0=t=>t instanceof Fn?{...t}:t;function vi(t,e){e=e||{};const n={};function r(d,f,p,y){return q.isPlainObject(d)&&q.isPlainObject(f)?q.merge.call({caseless:y},d,f):q.isPlainObject(f)?q.merge({},f):q.isArray(f)?f.slice():f}function s(d,f,p,y){if(q.isUndefined(f)){if(!q.isUndefined(d))return r(void 0,d,p,y)}else return r(d,f,p,y)}function i(d,f){if(!q.isUndefined(f))return r(void 0,f)}function o(d,f){if(q.isUndefined(f)){if(!q.isUndefined(d))return r(void 0,d)}else return r(void 0,f)}function c(d,f,p){if(p in e)return r(d,f);if(p in t)return r(void 0,d)}const u={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c,headers:(d,f,p)=>s(g0(d),g0(f),p,!0)};return q.forEach(Object.keys({...t,...e}),function(f){const p=u[f]||s,y=p(t[f],e[f],f);q.isUndefined(y)&&p!==c||(n[f]=y)}),n}const Lv=t=>{const e=vi({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:c}=e;if(e.headers=o=Fn.from(o),e.url=Rv(Mv(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),c&&o.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),q.isFormData(n)){if(_n.hasStandardBrowserEnv||_n.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(q.isFunction(n.getHeaders)){const u=n.getHeaders(),d=["content-type","content-length"];Object.entries(u).forEach(([f,p])=>{d.includes(f.toLowerCase())&&o.set(f,p)})}}if(_n.hasStandardBrowserEnv&&(r&&q.isFunction(r)&&(r=r(e)),r||r!==!1&&nj(e.url))){const u=s&&i&&rj.read(i);u&&o.set(s,u)}return e},oj=typeof XMLHttpRequest<"u",aj=oj&&function(t){return new Promise(function(n,r){const s=Lv(t);let i=s.data;const o=Fn.from(s.headers).normalize();let{responseType:c,onUploadProgress:u,onDownloadProgress:d}=s,f,p,y,I,w;function T(){I&&I(),w&&w(),s.cancelToken&&s.cancelToken.unsubscribe(f),s.signal&&s.signal.removeEventListener("abort",f)}let A=new XMLHttpRequest;A.open(s.method.toUpperCase(),s.url,!0),A.timeout=s.timeout;function S(){if(!A)return;const v=Fn.from("getAllResponseHeaders"in A&&A.getAllResponseHeaders()),G={data:!c||c==="text"||c==="json"?A.responseText:A.response,status:A.status,statusText:A.statusText,headers:v,config:t,request:A};Dv(function(E){n(E),T()},function(E){r(E),T()},G),A=null}"onloadend"in A?A.onloadend=S:A.onreadystatechange=function(){!A||A.readyState!==4||A.status===0&&!(A.responseURL&&A.responseURL.indexOf("file:")===0)||setTimeout(S)},A.onabort=function(){A&&(r(new Ke("Request aborted",Ke.ECONNABORTED,t,A)),A=null)},A.onerror=function(O){const G=O&&O.message?O.message:"Network Error",oe=new Ke(G,Ke.ERR_NETWORK,t,A);oe.event=O||null,r(oe),A=null},A.ontimeout=function(){let O=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const G=s.transitional||Av;s.timeoutErrorMessage&&(O=s.timeoutErrorMessage),r(new Ke(O,G.clarifyTimeoutError?Ke.ETIMEDOUT:Ke.ECONNABORTED,t,A)),A=null},i===void 0&&o.setContentType(null),"setRequestHeader"in A&&q.forEach(o.toJSON(),function(O,G){A.setRequestHeader(G,O)}),q.isUndefined(s.withCredentials)||(A.withCredentials=!!s.withCredentials),c&&c!=="json"&&(A.responseType=s.responseType),d&&([y,w]=nu(d,!0),A.addEventListener("progress",y)),u&&A.upload&&([p,I]=nu(u),A.upload.addEventListener("progress",p),A.upload.addEventListener("loadend",I)),(s.cancelToken||s.signal)&&(f=v=>{A&&(r(!v||v.type?new To(null,t,A):v),A.abort(),A=null)},s.cancelToken&&s.cancelToken.subscribe(f),s.signal&&(s.signal.aborted?f():s.signal.addEventListener("abort",f)));const _=Z4(s.url);if(_&&_n.protocols.indexOf(_)===-1){r(new Ke("Unsupported protocol "+_+":",Ke.ERR_BAD_REQUEST,t));return}A.send(i||null)})},lj=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,s;const i=function(d){if(!s){s=!0,c();const f=d instanceof Error?d:this.reason;r.abort(f instanceof Ke?f:new To(f instanceof Error?f.message:f))}};let o=e&&setTimeout(()=>{o=null,i(new Ke(`timeout ${e} of ms exceeded`,Ke.ETIMEDOUT))},e);const c=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),t=null)};t.forEach(d=>d.addEventListener("abort",i));const{signal:u}=r;return u.unsubscribe=()=>q.asap(c),u}},cj=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,s;for(;r<n;)s=r+e,yield t.slice(r,s),r=s},uj=async function*(t,e){for await(const n of dj(t))yield*cj(n,e)},dj=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},y0=(t,e,n,r)=>{const s=uj(t,e);let i=0,o,c=u=>{o||(o=!0,r&&r(u))};return new ReadableStream({async pull(u){try{const{done:d,value:f}=await s.next();if(d){c(),u.close();return}let p=f.byteLength;if(n){let y=i+=p;n(y)}u.enqueue(new Uint8Array(f))}catch(d){throw c(d),d}},cancel(u){return c(u),s.return()}},{highWaterMark:2})},x0=64*1024,{isFunction:ic}=q,hj=(({Request:t,Response:e})=>({Request:t,Response:e}))(q.global),{ReadableStream:v0,TextEncoder:w0}=q.global,_0=(t,...e)=>{try{return!!t(...e)}catch{return!1}},fj=t=>{t=q.merge.call({skipUndefined:!0},hj,t);const{fetch:e,Request:n,Response:r}=t,s=e?ic(e):typeof fetch=="function",i=ic(n),o=ic(r);if(!s)return!1;const c=s&&ic(v0),u=s&&(typeof w0=="function"?(w=>T=>w.encode(T))(new w0):async w=>new Uint8Array(await new n(w).arrayBuffer())),d=i&&c&&_0(()=>{let w=!1;const T=new n(_n.origin,{body:new v0,method:"POST",get duplex(){return w=!0,"half"}}).headers.has("Content-Type");return w&&!T}),f=o&&c&&_0(()=>q.isReadableStream(new r("").body)),p={stream:f&&(w=>w.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(w=>{!p[w]&&(p[w]=(T,A)=>{let S=T&&T[w];if(S)return S.call(T);throw new Ke(`Response type '${w}' is not supported`,Ke.ERR_NOT_SUPPORT,A)})});const y=async w=>{if(w==null)return 0;if(q.isBlob(w))return w.size;if(q.isSpecCompliantForm(w))return(await new n(_n.origin,{method:"POST",body:w}).arrayBuffer()).byteLength;if(q.isArrayBufferView(w)||q.isArrayBuffer(w))return w.byteLength;if(q.isURLSearchParams(w)&&(w=w+""),q.isString(w))return(await u(w)).byteLength},I=async(w,T)=>{const A=q.toFiniteNumber(w.getContentLength());return A??y(T)};return async w=>{let{url:T,method:A,data:S,signal:_,cancelToken:v,timeout:O,onDownloadProgress:G,onUploadProgress:oe,responseType:E,headers:x,withCredentials:C="same-origin",fetchOptions:k}=Lv(w),N=e||fetch;E=E?(E+"").toLowerCase():"text";let R=lj([_,v&&v.toAbortSignal()],O),j=null;const re=R&&R.unsubscribe&&(()=>{R.unsubscribe()});let Ee;try{if(oe&&d&&A!=="get"&&A!=="head"&&(Ee=await I(x,S))!==0){let H=new n(T,{method:"POST",body:S,duplex:"half"}),ue;if(q.isFormData(S)&&(ue=H.headers.get("content-type"))&&x.setContentType(ue),H.body){const[Ie,_e]=p0(Ee,nu(m0(oe)));S=y0(H.body,x0,Ie,_e)}}q.isString(C)||(C=C?"include":"omit");const J=i&&"credentials"in n.prototype,Ce={...k,signal:R,method:A.toUpperCase(),headers:x.normalize().toJSON(),body:S,duplex:"half",credentials:J?C:void 0};j=i&&new n(T,Ce);let Z=await(i?N(j,k):N(T,Ce));const K=f&&(E==="stream"||E==="response");if(f&&(G||K&&re)){const H={};["status","statusText","headers"].forEach(me=>{H[me]=Z[me]});const ue=q.toFiniteNumber(Z.headers.get("content-length")),[Ie,_e]=G&&p0(ue,nu(m0(G),!0))||[];Z=new r(y0(Z.body,x0,Ie,()=>{_e&&_e(),re&&re()}),H)}E=E||"text";let ae=await p[q.findKey(p,E)||"text"](Z,w);return!K&&re&&re(),await new Promise((H,ue)=>{Dv(H,ue,{data:ae,headers:Fn.from(Z.headers),status:Z.status,statusText:Z.statusText,config:w,request:j})})}catch(J){throw re&&re(),J&&J.name==="TypeError"&&/Load failed|fetch/i.test(J.message)?Object.assign(new Ke("Network Error",Ke.ERR_NETWORK,w,j),{cause:J.cause||J}):Ke.from(J,J&&J.code,w,j)}}},pj=new Map,Fv=t=>{let e=t&&t.env||{};const{fetch:n,Request:r,Response:s}=e,i=[r,s,n];let o=i.length,c=o,u,d,f=pj;for(;c--;)u=i[c],d=f.get(u),d===void 0&&f.set(u,d=c?new Map:fj(e)),f=d;return d};Fv();const Pp={http:R4,xhr:aj,fetch:{get:Fv}};q.forEach(Pp,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const b0=t=>`- ${t}`,mj=t=>q.isFunction(t)||t===null||t===!1;function gj(t,e){t=q.isArray(t)?t:[t];const{length:n}=t;let r,s;const i={};for(let o=0;o<n;o++){r=t[o];let c;if(s=r,!mj(r)&&(s=Pp[(c=String(r)).toLowerCase()],s===void 0))throw new Ke(`Unknown adapter '${c}'`);if(s&&(q.isFunction(s)||(s=s.get(e))))break;i[c||"#"+o]=s}if(!s){const o=Object.entries(i).map(([u,d])=>`adapter ${u} `+(d===!1?"is not supported by the environment":"is not available in the build"));let c=n?o.length>1?`since :
`+o.map(b0).join(`
`):" "+b0(o[0]):"as no adapter specified";throw new Ke("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return s}const zv={getAdapter:gj,adapters:Pp};function Hd(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new To(null,t)}function S0(t){return Hd(t),t.headers=Fn.from(t.headers),t.data=Wd.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),zv.getAdapter(t.adapter||yl.adapter,t)(t).then(function(r){return Hd(t),r.data=Wd.call(t,t.transformResponse,r),r.headers=Fn.from(r.headers),r},function(r){return Ov(r)||(Hd(t),r&&r.response&&(r.response.data=Wd.call(t,t.transformResponse,r.response),r.response.headers=Fn.from(r.response.headers))),Promise.reject(r)})}const Bv="1.13.2",Hu={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Hu[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const C0={};Hu.transitional=function(e,n,r){function s(i,o){return"[Axios v"+Bv+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,c)=>{if(e===!1)throw new Ke(s(o," has been removed"+(n?" in "+n:"")),Ke.ERR_DEPRECATED);return n&&!C0[o]&&(C0[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,c):!0}};Hu.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function yj(t,e,n){if(typeof t!="object")throw new Ke("options must be an object",Ke.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],o=e[i];if(o){const c=t[i],u=c===void 0||o(c,i,t);if(u!==!0)throw new Ke("option "+i+" must be "+u,Ke.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Ke("Unknown option "+i,Ke.ERR_BAD_OPTION)}}const Ic={assertOptions:yj,validators:Hu},Cr=Ic.validators;let di=class{constructor(e){this.defaults=e||{},this.interceptors={request:new h0,response:new h0}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=vi(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&Ic.assertOptions(r,{silentJSONParsing:Cr.transitional(Cr.boolean),forcedJSONParsing:Cr.transitional(Cr.boolean),clarifyTimeoutError:Cr.transitional(Cr.boolean)},!1),s!=null&&(q.isFunction(s)?n.paramsSerializer={serialize:s}:Ic.assertOptions(s,{encode:Cr.function,serialize:Cr.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Ic.assertOptions(n,{baseUrl:Cr.spelling("baseURL"),withXsrfToken:Cr.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&q.merge(i.common,i[n.method]);i&&q.forEach(["delete","get","head","post","put","patch","common"],w=>{delete i[w]}),n.headers=Fn.concat(o,i);const c=[];let u=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(n)===!1||(u=u&&T.synchronous,c.unshift(T.fulfilled,T.rejected))});const d=[];this.interceptors.response.forEach(function(T){d.push(T.fulfilled,T.rejected)});let f,p=0,y;if(!u){const w=[S0.bind(this),void 0];for(w.unshift(...c),w.push(...d),y=w.length,f=Promise.resolve(n);p<y;)f=f.then(w[p++],w[p++]);return f}y=c.length;let I=n;for(;p<y;){const w=c[p++],T=c[p++];try{I=w(I)}catch(A){T.call(this,A);break}}try{f=S0.call(this,I)}catch(w){return Promise.reject(w)}for(p=0,y=d.length;p<y;)f=f.then(d[p++],d[p++]);return f}getUri(e){e=vi(this.defaults,e);const n=Mv(e.baseURL,e.url,e.allowAbsoluteUrls);return Rv(n,e.params,e.paramsSerializer)}};q.forEach(["delete","get","head","options"],function(e){di.prototype[e]=function(n,r){return this.request(vi(r||{},{method:e,url:n,data:(r||{}).data}))}});q.forEach(["post","put","patch"],function(e){function n(r){return function(i,o,c){return this.request(vi(c||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}di.prototype[e]=n(),di.prototype[e+"Form"]=n(!0)});let xj=class Uv{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(c=>{r.subscribe(c),i=c}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,c){r.reason||(r.reason=new To(i,o,c),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new Uv(function(s){e=s}),cancel:e}}};function vj(t){return function(n){return t.apply(null,n)}}function wj(t){return q.isObject(t)&&t.isAxiosError===!0}const lf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(lf).forEach(([t,e])=>{lf[e]=t});function $v(t){const e=new di(t),n=vv(di.prototype.request,e);return q.extend(n,di.prototype,e,{allOwnKeys:!0}),q.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return $v(vi(t,s))},n}const ee=$v(yl);ee.Axios=di;ee.CanceledError=To;ee.CancelToken=xj;ee.isCancel=Ov;ee.VERSION=Bv;ee.toFormData=Wu;ee.AxiosError=Ke;ee.Cancel=ee.CanceledError;ee.all=function(e){return Promise.all(e)};ee.spread=vj;ee.isAxiosError=wj;ee.mergeConfig=vi;ee.AxiosHeaders=Fn;ee.formToJSON=t=>Pv(q.isHTMLForm(t)?new FormData(t):t);ee.getAdapter=zv.getAdapter;ee.HttpStatusCode=lf;ee.default=ee;const{Axios:KN,AxiosError:qN,CanceledError:YN,isCancel:QN,CancelToken:JN,VERSION:XN,all:ZN,Cancel:e5,isAxiosError:t5,spread:n5,toFormData:r5,AxiosHeaders:s5,HttpStatusCode:i5,formToJSON:o5,getAdapter:a5,mergeConfig:l5}=ee;var Uy,$y;const _j=(($y=(Uy=import.meta)==null?void 0:Uy.env)==null?void 0:$y.VITE_API_BASE)||"https://gojo-teacher-web.onrender.com/api",bj=async(t,e)=>{try{return(await ee.post(`${_j}/teacher_login`,{username:t,password:e})).data}catch(n){return console.error("Login error:",n.response?n.response.data:n.message),{success:!1,message:"Network error or server not reachable"}}};function Vd(){const t=zn(),[e,n]=g.useState(""),[r,s]=g.useState(""),[i,o]=g.useState(""),c=async u=>{u.preventDefault(),o("");const d=await bj(e,r);d.success?(localStorage.setItem("teacher",JSON.stringify(d.teacher)),t("/dashboard")):o(d.message||"Login failed")};return a.jsx("div",{className:"auth-container",children:a.jsxs("div",{className:"auth-box",children:[a.jsx("h2",{children:"Teacher Login"}),i&&a.jsx("p",{className:"auth-error",children:i}),a.jsxs("form",{onSubmit:c,children:[a.jsx("input",{type:"text",placeholder:"Username",value:e,onChange:u=>n(u.target.value),required:!0}),a.jsx("input",{type:"password",placeholder:"Password",value:r,onChange:u=>s(u.target.value),required:!0}),a.jsx("button",{type:"submit",className:"submit-btn",children:"Login"})]}),a.jsxs("p",{className:"auth-link",children:["Don't have an account? ",a.jsx(ye,{to:"/register",children:"Register Here"})]})]})})}function Sj(){zn();const t=["7","8","9","10","11 Social","11 Natural","12 Social","12 Natural"],e=["A","B","C"],n={7:["Mathematics","Amharic","English","Biology","Physics","Chemistry","Geography","History","Civics","ICT","Oromifa","Physical Education"],8:["Mathematics","Amharic","English","Biology","Physics","Chemistry","Geography","History","Civics","ICT","Oromifa","Physical Education"],9:["Mathematics","English","Biology","Physics","Chemistry","Geography","History","Civics","ICT","Physical Education"],10:["Mathematics","English","Biology","Physics","Chemistry","Geography","History","Civics","ICT","Physical Education"],"11 Social":["Mathematics","English","Physics","Chemistry","Biology","Economics","Geography","History"],"11 Natural":["Mathematics","English","Physics","Chemistry","Biology","Economics","Geography","History"],"12 Social":["Mathematics","English","Physics","Chemistry","Biology","Economics","Geography","History"],"12 Natural":["Mathematics","English","Physics","Chemistry","Biology","Economics","Geography","History"]},[r,s]=g.useState({name:"",password:"",email:"",phone:"",gender:"",courses:[{grade:"",section:"",subject:""}]}),[i,o]=g.useState(null),[c,u]=g.useState(""),[d,f]=g.useState(""),p=(_,v=null)=>{const{name:O,value:G}=_.target;if(v!==null){const oe=[...r.courses];oe[v][O]=G,O==="grade"&&(oe[v].subject=""),s({...r,courses:oe})}else s({...r,[O]:G})},y=()=>{s({...r,courses:[...r.courses,{grade:"",section:"",subject:""}]})},I=_=>{const v=r.courses.filter((O,G)=>G!==_);s({...r,courses:v})},w=()=>{const _=new Set;for(let v of r.courses){if(!v.grade||!v.section||!v.subject)continue;const O=`${v.grade}${v.section}-${v.subject}`;if(_.has(O))return!0;_.add(O)}return!1},T=_=>_===""||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(_).toLowerCase()),A=_=>/^[0-9+()\-\s]{6,20}$/.test(String(_).trim()),S=async _=>{if(_.preventDefault(),u(""),f(""),!T(r.email)){u("Please enter a valid email address or leave it empty.");return}if(!A(r.phone)){u("Please enter a valid phone number.");return}if(!r.gender){u("Please select gender.");return}if(!r.name||!r.password){u("Name and password are required.");return}if(w()){u("Duplicate subject detected! A subject can only be taught once per grade and section.");return}try{const v=new FormData;v.append("name",r.name),v.append("password",r.password),v.append("email",r.email),v.append("phone",r.phone),v.append("gender",r.gender),v.append("courses",JSON.stringify(r.courses)),i&&v.append("profile",i);const G=await(await fetch("https://gojo-teacher-web.onrender.com/register/teacher",{method:"POST",body:v})).json();if(G.success){const oe=G.teacherKey||G.teacherId||G.teacherKey||G.teacherId||"";f(oe),s({name:"",password:"",email:"",phone:"",gender:"",courses:[{grade:"",section:"",subject:""}]}),o(null),u("Registration successful. Your teacherId (username) is shown below.")}else u(G.message||"Registration failed.")}catch(v){console.error("Registration error:",v),u("Server error. Check console.")}};return a.jsx("div",{className:"auth-container",children:a.jsxs("div",{className:"auth-box",style:{maxWidth:"600px"},children:[a.jsx("h2",{children:"Teacher Registration"}),c&&a.jsx("p",{className:"auth-error",children:c}),a.jsxs("form",{onSubmit:S,children:[a.jsx("input",{type:"text",name:"name",placeholder:"Full Name",value:r.name,onChange:p,required:!0}),a.jsx("input",{type:"email",name:"email",placeholder:"Email (optional)",value:r.email,onChange:p}),a.jsx("input",{type:"tel",name:"phone",placeholder:"Phone number",value:r.phone,onChange:p,required:!0}),a.jsxs("select",{name:"gender",value:r.gender,onChange:p,required:!0,children:[a.jsx("option",{value:"",children:"Select Gender"}),a.jsx("option",{value:"Male",children:"Male"}),a.jsx("option",{value:"Female",children:"Female"}),a.jsx("option",{value:"Other",children:"Other"}),a.jsx("option",{value:"Prefer not to say",children:"Prefer not to say"})]}),a.jsx("input",{type:"password",name:"password",placeholder:"Password",value:r.password,onChange:p,required:!0}),a.jsxs("div",{className:"profile-upload",children:[i&&a.jsx("img",{src:URL.createObjectURL(i),alt:"Profile Preview",className:"profile-preview"}),a.jsx("input",{type:"file",accept:"image/*",onChange:_=>o(_.target.files[0])})]}),a.jsx("h3",{children:"Courses"}),r.courses.map((_,v)=>a.jsxs("div",{className:"course-group",children:[a.jsxs("select",{name:"grade",value:_.grade,onChange:O=>p(O,v),required:!0,children:[a.jsx("option",{value:"",children:"Select Grade"}),t.map(O=>a.jsx("option",{value:O,children:O},O))]}),a.jsxs("select",{name:"section",value:_.section,onChange:O=>p(O,v),required:!0,children:[a.jsx("option",{value:"",children:"Select Section"}),e.map(O=>a.jsx("option",{value:O,children:O},O))]}),a.jsxs("select",{name:"subject",value:_.subject,onChange:O=>p(O,v),required:!0,disabled:!_.grade,children:[a.jsx("option",{value:"",children:"Select Subject"}),_.grade&&n[_.grade].map(O=>a.jsx("option",{value:O,children:O},O))]}),r.courses.length>1&&a.jsx("button",{type:"button",className:"remove-btn",onClick:()=>I(v),children:"Remove"})]},v)),a.jsx("button",{type:"button",className:"add-btn",onClick:y,children:"Add Course"}),a.jsx("button",{type:"submit",className:"submit-btn",children:"Register"})]}),d&&a.jsxs("div",{className:"auth-success",style:{marginTop:12},children:[a.jsxs("p",{children:["Registration complete. Your teacherId (username) is:"," ",a.jsx("strong",{children:d})]}),a.jsxs("p",{children:["Use this ID to log in: ",a.jsx(ye,{to:"/login",children:"Go to Login"})]})]}),a.jsxs("p",{className:"auth-link",children:["Already have an account? ",a.jsx(ye,{to:"/login",children:"Go to Login"})]})]})})}var Wv={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},j0=Gt.createContext&&Gt.createContext(Wv),Cj=["attr","size","title"];function jj(t,e){if(t==null)return{};var n=Ej(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Ej(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ru(){return ru=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ru.apply(this,arguments)}function E0(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function su(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?E0(Object(n),!0).forEach(function(r){Ij(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E0(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ij(t,e,n){return e=kj(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kj(t){var e=Nj(t,"string");return typeof e=="symbol"?e:e+""}function Nj(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hv(t){return t&&t.map((e,n)=>Gt.createElement(e.tag,su({key:n},e.attr),Hv(e.child)))}function _t(t){return e=>Gt.createElement(Tj,ru({attr:su({},t.attr)},e),Hv(t.child))}function Tj(t){var e=n=>{var{attr:r,size:s,title:i}=t,o=jj(t,Cj),c=s||n.size||"1em",u;return n.className&&(u=n.className),t.className&&(u=(u?u+" ":"")+t.className),Gt.createElement("svg",ru({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:u,style:su(su({color:t.color||n.color},n.style),t.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),i&&Gt.createElement("title",null,i),t.children)};return j0!==void 0?Gt.createElement(j0.Consumer,null,n=>e(n)):e(Wv)}function rs(t){return _t({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256.55 8C116.52 8 8 110.34 8 248.57c0 72.3 29.71 134.78 78.07 177.94 8.35 7.51 6.63 11.86 8.05 58.23A19.92 19.92 0 0 0 122 502.31c52.91-23.3 53.59-25.14 62.56-22.7C337.85 521.8 504 423.7 504 248.57 504 110.34 396.59 8 256.55 8zm149.24 185.13l-73 115.57a37.37 37.37 0 0 1-53.91 9.93l-58.08-43.47a15 15 0 0 0-18 0l-78.37 59.44c-10.46 7.93-24.16-4.6-17.11-15.67l73-115.57a37.36 37.36 0 0 1 53.91-9.93l58.06 43.46a15 15 0 0 0 18 0l78.41-59.38c10.44-7.98 24.14 4.54 17.09 15.62z"},child:[]}]})(t)}function I0(t){return _t({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(t)}function ss(t){return _t({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(t)}function Rj(t){return _t({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"},child:[]}]})(t)}function Or(t){return _t({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M208 352c-2.39 0-4.78.35-7.06 1.09C187.98 357.3 174.35 360 160 360c-14.35 0-27.98-2.7-40.95-6.91-2.28-.74-4.66-1.09-7.05-1.09C49.94 352-.33 402.48 0 464.62.14 490.88 21.73 512 48 512h224c26.27 0 47.86-21.12 48-47.38.33-62.14-49.94-112.62-112-112.62zm-48-32c53.02 0 96-42.98 96-96s-42.98-96-96-96-96 42.98-96 96 42.98 96 96 96zM592 0H208c-26.47 0-48 22.25-48 49.59V96c23.42 0 45.1 6.78 64 17.8V64h352v288h-64v-64H384v64h-76.24c19.1 16.69 33.12 38.73 39.69 64H592c26.47 0 48-22.25 48-49.59V49.59C640 22.25 618.47 0 592 0z"},child:[]}]})(t)}function Aj(t){return _t({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(t)}function mo(t){return _t({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(t)}function Pj(t){return _t({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(t)}function cf(t){return _t({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(t)}function Pr(t){return _t({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(t)}function Oj(t){return _t({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"},child:[]}]})(t)}function Jt(t){return _t({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM192 40c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm121.2 231.8l-143 141.8c-4.7 4.7-12.3 4.6-17-.1l-82.6-83.3c-4.7-4.7-4.6-12.3.1-17L99.1 285c4.7-4.7 12.3-4.6 17 .1l46 46.4 106-105.2c4.7-4.7 12.3-4.6 17 .1l28.2 28.4c4.7 4.8 4.6 12.3-.1 17z"},child:[]}]})(t)}function Dj(t){return _t({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"},child:[]}]})(t)}function xr(t){return _t({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(t)}function Op(t){return _t({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 32C114.6 32 0 125.1 0 240c0 49.6 21.4 95 57 130.7C44.5 421.1 2.7 466 2.2 466.5c-2.2 2.3-2.8 5.7-1.5 8.7S4.8 480 8 480c66.3 0 116-31.8 140.6-51.4 32.7 12.3 69 19.4 107.4 19.4 141.4 0 256-93.1 256-208S397.4 32 256 32zM128 272c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 0c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 0c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"},child:[]}]})(t)}function Mj(t){return _t({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(t)}function Lj(t){return _t({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm60.1 106.5L224 336l60.1 93.5c5.1 8-.6 18.5-10.1 18.5h-34.9c-4.4 0-8.5-2.4-10.6-6.3C208.9 405.5 192 373 192 373c-6.4 14.8-10 20-36.6 68.8-2.1 3.9-6.1 6.3-10.5 6.3H110c-9.5 0-15.2-10.5-10.1-18.5l60.3-93.5-60.3-93.5c-5.2-8 .6-18.5 10.1-18.5h34.8c4.4 0 8.5 2.4 10.6 6.3 26.1 48.8 20 33.6 36.6 68.5 0 0 6.1-11.7 36.6-68.5 2.1-3.9 6.2-6.3 10.6-6.3H274c9.5-.1 15.2 10.4 10.1 18.4zM384 121.9v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"},child:[]}]})(t)}function Fj(t){return _t({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"},child:[]}]})(t)}function Dr(t){return _t({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(t)}function Vv(t){return _t({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"},child:[]}]})(t)}function uf(t){return _t({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(t)}function iu(t){return _t({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"},child:[]}]})(t)}function zj(t){return _t({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(t)}function Mr(t){return _t({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}function kc(t){return _t({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(t)}function Bj(t){return _t({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M296 384h-80c-13.3 0-24-10.7-24-24V192h-87.7c-17.8 0-26.7-21.5-14.1-34.1L242.3 5.7c7.5-7.5 19.8-7.5 27.3 0l152.2 152.2c12.6 12.6 3.7 34.1-14.1 34.1H320v168c0 13.3-10.7 24-24 24zm216-8v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h136v8c0 30.9 25.1 56 56 56h80c30.9 0 56-25.1 56-56v-8h136c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(t)}function Ye(t){return _t({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(t)}function Uj(t){return _t({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M458.4 64.3C400.6 15.7 311.3 23 256 79.3 200.7 23 111.4 15.6 53.6 64.3-21.6 127.6-10.6 230.8 43 285.5l175.4 178.7c10 10.2 23.4 15.9 37.6 15.9 14.3 0 27.6-5.6 37.6-15.8L469 285.6c53.5-54.7 64.7-157.9-10.6-221.3zm-23.6 187.5L259.4 430.5c-2.4 2.4-4.4 2.4-6.8 0L77.2 251.8c-36.5-37.2-43.9-107.6 7.3-150.7 38.9-32.7 98.9-27.8 136.5 10.5l35 35.7 35-35.7c37.8-38.5 97.8-43.2 136.5-10.6 51.1 43.1 43.5 113.9 7.3 150.8z"},child:[]}]})(t)}const $j=()=>{};var k0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xe=function(t,e){if(!t)throw Ro(e)},Ro=function(t){return new Error("Firebase Database ("+Gv.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Wj=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Dp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,f=i>>2,p=(i&3)<<4|c>>4;let y=(c&15)<<2|d>>6,I=d&63;u||(I=64,o||(y=64)),r.push(n[f],n[p],n[y],n[I])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Kv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Wj(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||d==null||p==null)throw new Hj;const y=i<<2|c>>4;if(r.push(y),d!==64){const I=c<<4&240|d>>2;if(r.push(I),p!==64){const w=d<<6&192|p;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Hj extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qv=function(t){const e=Kv(t);return Dp.encodeByteArray(e,!0)},ou=function(t){return qv(t).replace(/\./g,"")},df=function(t){try{return Dp.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vj(t){return Yv(void 0,t)}function Yv(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Gj(n)||(t[n]=Yv(t[n],e[n]));return t}function Gj(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qj=()=>Kj().__FIREBASE_DEFAULTS__,Yj=()=>{if(typeof process>"u"||typeof k0>"u")return;const t=k0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Qj=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&df(t[1]);return e&&JSON.parse(e)},Qv=()=>{try{return $j()||qj()||Yj()||Qj()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Jj=t=>{var e,n;return(n=(e=Qv())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},Jv=t=>{const e=Jj(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Xv=()=>{var t;return(t=Qv())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vu(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Zv(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[ou(JSON.stringify(n)),ou(JSON.stringify(o)),""].join(".")}const xa={};function Xj(){const t={prod:[],emulator:[]};for(const e of Object.keys(xa))xa[e]?t.emulator.push(e):t.prod.push(e);return t}function Zj(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let N0=!1;function tw(t,e){if(typeof window>"u"||typeof document>"u"||!Vu(window.location.host)||xa[t]===e||xa[t]||N0)return;xa[t]=e;function n(y){return`__firebase__banner__${y}`}const r="__firebase__banner",i=Xj().prod.length>0;function o(){const y=document.getElementById(r);y&&y.remove()}function c(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function u(y,I){y.setAttribute("width","24"),y.setAttribute("id",I),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function d(){const y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{N0=!0,o()},y}function f(y,I){y.setAttribute("id",I),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function p(){const y=Zj(r),I=n("text"),w=document.getElementById(I)||document.createElement("span"),T=n("learnmore"),A=document.getElementById(T)||document.createElement("a"),S=n("preprendIcon"),_=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){const v=y.element;c(v),f(A,T);const O=d();u(_,S),v.append(_,w,A,O),document.body.appendChild(v)}i?(w.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(eE())}function tE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function nE(){return Gv.NODE_ADMIN===!0}function rE(){try{return typeof indexedDB=="object"}catch{return!1}}function sE(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE="FirebaseError";class Ao extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=iE,Object.setPrototypeOf(this,Ao.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rw.prototype.create)}}class rw{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?oE(i,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new Ao(s,c,r)}}function oE(t,e){return t.replace(aE,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const aE=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ga(t){return JSON.parse(t)}function nn(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sw=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=Ga(df(i[0])||""),n=Ga(df(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},lE=function(t){const e=sw(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},cE=function(t){const e=sw(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function go(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function T0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function au(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function Ka(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(R0(i)&&R0(o)){if(!Ka(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function R0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uE(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let p=0;p<16;p++)r[p]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let p=0;p<16;p++)r[p]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let p=16;p<80;p++){const y=r[p-3]^r[p-8]^r[p-14]^r[p-16];r[p]=(y<<1|y>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],c=this.chain_[3],u=this.chain_[4],d,f;for(let p=0;p<80;p++){p<40?p<20?(d=c^i&(o^c),f=1518500249):(d=i^o^c,f=1859775393):p<60?(d=i&o|c&(i|o),f=2400959708):(d=i^o^c,f=3395469782);const y=(s<<5|s>>>27)+d+u+f+r[p]&4294967295;u=c,c=o,o=(i<<30|i>>>2)&4294967295,i=s,s=y}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function Gu(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,xe(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Ku=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ii(t){return t&&t._delegate?t._delegate:t}class yo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new xl;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mE(e))try{this.getOrInitializeService({instanceIdentifier:ei})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ei){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ei){return this.instances.has(e)}getOptions(e=ei){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:pE(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ei){return this.component?this.component.multipleInstances?e:ei:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function pE(t){return t===ei?void 0:t}function mE(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new fE(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(yt||(yt={}));const yE={debug:yt.DEBUG,verbose:yt.VERBOSE,info:yt.INFO,warn:yt.WARN,error:yt.ERROR,silent:yt.SILENT},xE=yt.INFO,vE={[yt.DEBUG]:"log",[yt.VERBOSE]:"log",[yt.INFO]:"info",[yt.WARN]:"warn",[yt.ERROR]:"error"},wE=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=vE[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Mp{constructor(e){this.name=e,this._logLevel=xE,this._logHandler=wE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in yt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,yt.DEBUG,...e),this._logHandler(this,yt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,yt.VERBOSE,...e),this._logHandler(this,yt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,yt.INFO,...e),this._logHandler(this,yt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,yt.WARN,...e),this._logHandler(this,yt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,yt.ERROR,...e),this._logHandler(this,yt.ERROR,...e)}}const _E=(t,e)=>e.some(n=>t instanceof n);let A0,P0;function bE(){return A0||(A0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function SE(){return P0||(P0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const iw=new WeakMap,hf=new WeakMap,ow=new WeakMap,Gd=new WeakMap,Lp=new WeakMap;function CE(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ts(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&iw.set(n,t)}).catch(()=>{}),Lp.set(e,t),e}function jE(t){if(hf.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});hf.set(t,e)}let ff={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return hf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ow.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ts(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function EE(t){ff=t(ff)}function IE(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Kd(this),e,...n);return ow.set(r,e.sort?e.sort():[e]),Ts(r)}:SE().includes(t)?function(...e){return t.apply(Kd(this),e),Ts(iw.get(this))}:function(...e){return Ts(t.apply(Kd(this),e))}}function kE(t){return typeof t=="function"?IE(t):(t instanceof IDBTransaction&&jE(t),_E(t,bE())?new Proxy(t,ff):t)}function Ts(t){if(t instanceof IDBRequest)return CE(t);if(Gd.has(t))return Gd.get(t);const e=kE(t);return e!==t&&(Gd.set(t,e),Lp.set(e,t)),e}const Kd=t=>Lp.get(t);function NE(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=Ts(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Ts(o.result),u.oldVersion,u.newVersion,Ts(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const TE=["get","getKey","getAll","getAllKeys","count"],RE=["put","add","delete","clear"],qd=new Map;function O0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(qd.get(e))return qd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=RE.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||TE.includes(n)))return;const i=async function(o,...c){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return qd.set(e,i),i}EE(t=>({...t,get:(e,n,r)=>O0(e,n)||t.get(e,n,r),has:(e,n)=>!!O0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(PE(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function PE(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const pf="@firebase/app",D0="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr=new Mp("@firebase/app"),OE="@firebase/app-compat",DE="@firebase/analytics-compat",ME="@firebase/analytics",LE="@firebase/app-check-compat",FE="@firebase/app-check",zE="@firebase/auth",BE="@firebase/auth-compat",UE="@firebase/database",$E="@firebase/data-connect",WE="@firebase/database-compat",HE="@firebase/functions",VE="@firebase/functions-compat",GE="@firebase/installations",KE="@firebase/installations-compat",qE="@firebase/messaging",YE="@firebase/messaging-compat",QE="@firebase/performance",JE="@firebase/performance-compat",XE="@firebase/remote-config",ZE="@firebase/remote-config-compat",eI="@firebase/storage",tI="@firebase/storage-compat",nI="@firebase/firestore",rI="@firebase/ai",sI="@firebase/firestore-compat",iI="firebase",oI="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf="[DEFAULT]",aI={[pf]:"fire-core",[OE]:"fire-core-compat",[ME]:"fire-analytics",[DE]:"fire-analytics-compat",[FE]:"fire-app-check",[LE]:"fire-app-check-compat",[zE]:"fire-auth",[BE]:"fire-auth-compat",[UE]:"fire-rtdb",[$E]:"fire-data-connect",[WE]:"fire-rtdb-compat",[HE]:"fire-fn",[VE]:"fire-fn-compat",[GE]:"fire-iid",[KE]:"fire-iid-compat",[qE]:"fire-fcm",[YE]:"fire-fcm-compat",[QE]:"fire-perf",[JE]:"fire-perf-compat",[XE]:"fire-rc",[ZE]:"fire-rc-compat",[eI]:"fire-gcs",[tI]:"fire-gcs-compat",[nI]:"fire-fst",[sI]:"fire-fst-compat",[rI]:"fire-vertex","fire-js":"fire-js",[iI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qa=new Map,lI=new Map,gf=new Map;function M0(t,e){try{t.container.addComponent(e)}catch(n){Zr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ya(t){const e=t.name;if(gf.has(e))return Zr.debug(`There were multiple attempts to register component ${e}.`),!1;gf.set(e,t);for(const n of qa.values())M0(n,t);for(const n of lI.values())M0(n,t);return!0}function aw(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function lw(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rs=new rw("app","Firebase",cI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new yo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw=oI;function uw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:mf,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Rs.create("bad-app-name",{appName:String(s)});if(n||(n=Xv()),!n)throw Rs.create("no-options");const i=qa.get(s);if(i){if(Ka(n,i.options)&&Ka(r,i.config))return i;throw Rs.create("duplicate-app",{appName:s})}const o=new gE(s);for(const u of gf.values())o.addComponent(u);const c=new uI(n,r,o);return qa.set(s,c),c}function dw(t=mf){const e=qa.get(t);if(!e&&t===mf&&Xv())return uw();if(!e)throw Rs.create("no-app",{appName:t});return e}function L0(){return Array.from(qa.values())}function As(t,e,n){let r=aI[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zr.warn(o.join(" "));return}Ya(new yo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI="firebase-heartbeat-database",hI=1,Qa="firebase-heartbeat-store";let Yd=null;function hw(){return Yd||(Yd=NE(dI,hI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Qa)}catch(n){console.warn(n)}}}}).catch(t=>{throw Rs.create("idb-open",{originalErrorMessage:t.message})})),Yd}async function fI(t){try{const n=(await hw()).transaction(Qa),r=await n.objectStore(Qa).get(fw(t));return await n.done,r}catch(e){if(e instanceof Ao)Zr.warn(e.message);else{const n=Rs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Zr.warn(n.message)}}}async function F0(t,e){try{const r=(await hw()).transaction(Qa,"readwrite");await r.objectStore(Qa).put(e,fw(t)),await r.done}catch(n){if(n instanceof Ao)Zr.warn(n.message);else{const r=Rs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Zr.warn(r.message)}}}function fw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI=1024,mI=30;class gI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new xI(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=z0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>mI){const o=vI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Zr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=z0(),{heartbeatsToSend:r,unsentEntries:s}=yI(this._heartbeatsCache.heartbeats),i=ou(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Zr.warn(n),""}}}function z0(){return new Date().toISOString().substring(0,10)}function yI(t,e=pI){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),B0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),B0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class xI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rE()?sE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await fI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return F0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return F0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function B0(t){return ou(JSON.stringify({version:2,heartbeats:t})).length}function vI(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wI(t){Ya(new yo("platform-logger",e=>new AE(e),"PRIVATE")),Ya(new yo("heartbeat",e=>new gI(e),"PRIVATE")),As(pf,D0,t),As(pf,D0,"esm2020"),As("fire-js","")}wI("");var _I="firebase",bI="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */As(_I,bI,"app");var U0={};const $0="@firebase/database",W0="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pw="";function SI(t){pw=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),nn(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Ga(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Lr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mw=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new CI(e)}}catch{}return new jI},ai=mw("localStorage"),EI=mw("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no=new Mp("@firebase/database"),II=function(){let t=1;return function(){return t++}}(),gw=function(t){const e=hE(t),n=new dE;n.update(e);const r=n.digest();return Dp.encodeByteArray(r)},vl=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=vl.apply(null,r):typeof r=="object"?e+=nn(r):e+=r,e+=" "}return e};let va=null,H0=!0;const kI=function(t,e){xe(!0,"Can't turn on custom loggers persistently."),no.logLevel=yt.VERBOSE,va=no.log.bind(no)},pn=function(...t){if(H0===!0&&(H0=!1,va===null&&EI.get("logging_enabled")===!0&&kI()),va){const e=vl.apply(null,t);va(e)}},wl=function(t){return function(...e){pn(t,...e)}},yf=function(...t){const e="FIREBASE INTERNAL ERROR: "+vl(...t);no.error(e)},es=function(...t){const e=`FIREBASE FATAL ERROR: ${vl(...t)}`;throw no.error(e),new Error(e)},In=function(...t){const e="FIREBASE WARNING: "+vl(...t);no.warn(e)},NI=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&In("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Fp=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},TI=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},xo="[MIN_NAME]",wi="[MAX_NAME]",ki=function(t,e){if(t===e)return 0;if(t===xo||e===wi)return-1;if(e===xo||t===wi)return 1;{const n=V0(t),r=V0(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},RI=function(t,e){return t===e?0:t<e?-1:1},ea=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+nn(e))},zp=function(t){if(typeof t!="object"||t===null)return nn(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=nn(e[r]),n+=":",n+=zp(t[e[r]]);return n+="}",n},yw=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function yn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const xw=function(t){xe(!Fp(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,c,u;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(c=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=c+r,o=Math.round(t*Math.pow(2,n-c)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const d=[];for(u=n;u;u-=1)d.push(o%2?1:0),o=Math.floor(o/2);for(u=e;u;u-=1)d.push(i%2?1:0),i=Math.floor(i/2);d.push(s?1:0),d.reverse();const f=d.join("");let p="";for(u=0;u<64;u+=8){let y=parseInt(f.substr(u,8),2).toString(16);y.length===1&&(y="0"+y),p=p+y}return p.toLowerCase()},AI=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},PI=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function OI(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const DI=new RegExp("^-?(0*)\\d{1,10}$"),MI=-2147483648,LI=2147483647,V0=function(t){if(DI.test(t)){const e=Number(t);if(e>=MI&&e<=LI)return e}return null},Po=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw In("Exception was thrown by user callback.",n),e},Math.floor(0))}},FI=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},wa=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,lw(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)==null||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){In(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(pn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',In(e)}}class Nc{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Nc.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp="5",vw="v",ww="s",_w="r",bw="f",Sw=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Cw="ls",jw="p",xf="ac",Ew="websocket",Iw="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e,n,r,s,i=!1,o="",c=!1,u=!1,d=null){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=c,this.isUsingEmulator=u,this.emulatorOptions=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ai.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ai.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function UI(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Nw(t,e,n){xe(typeof e=="string","typeof type must == string"),xe(typeof n=="object","typeof params must == object");let r;if(e===Ew)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Iw)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);UI(t)&&(n.ns=t.namespace);const s=[];return yn(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(){this.counters_={}}incrementCounter(e,n=1){Lr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Vj(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qd={},Jd={};function Up(t){const e=t.toString();return Qd[e]||(Qd[e]=new $I),Qd[e]}function WI(t,e){const n=t.toString();return Jd[n]||(Jd[n]=e()),Jd[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&Po(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0="start",VI="close",GI="pLPCommand",KI="pRTLPCB",Tw="id",Rw="pw",Aw="ser",qI="cb",YI="seg",QI="ts",JI="d",XI="dframe",Pw=1870,Ow=30,ZI=Pw-Ow,e6=25e3,t6=3e4;class Yi{constructor(e,n,r,s,i,o,c){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=wl(e),this.stats_=Up(n),this.urlFn=u=>(this.appCheckToken&&(u[xf]=this.appCheckToken),Nw(n,Iw,u))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new HI(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(t6)),TI(()=>{if(this.isClosed_)return;this.scriptTagHolder=new $p((...i)=>{const[o,c,u,d,f]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===G0)this.id=c,this.password=u;else if(o===VI)c?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(c,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,c]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,c)},()=>{this.onClosed_()},this.urlFn);const r={};r[G0]="t",r[Aw]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[qI]=this.scriptTagHolder.uniqueCallbackIdentifier),r[vw]=Bp,this.transportSessionId&&(r[ww]=this.transportSessionId),this.lastSessionId&&(r[Cw]=this.lastSessionId),this.applicationId&&(r[jw]=this.applicationId),this.appCheckToken&&(r[xf]=this.appCheckToken),typeof location<"u"&&location.hostname&&Sw.test(location.hostname)&&(r[_w]=bw);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Yi.forceAllow_=!0}static forceDisallow(){Yi.forceDisallow_=!0}static isAvailable(){return Yi.forceAllow_?!0:!Yi.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!AI()&&!PI()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=nn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=qv(n),s=yw(r,ZI);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[XI]="t",r[Tw]=e,r[Rw]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=nn(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class $p{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=II(),window[GI+this.uniqueCallbackIdentifier]=e,window[KI+this.uniqueCallbackIdentifier]=n,this.myIFrame=$p.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(c){pn("frame writing exception"),c.stack&&pn(c.stack),pn(c)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||pn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Tw]=this.myID,e[Rw]=this.myPW,e[Aw]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Ow+r.length<=Pw;){const o=this.pendingSegs.shift();r=r+"&"+YI+s+"="+o.seg+"&"+QI+s+"="+o.ts+"&"+JI+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(e6)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{pn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n6=16384,r6=45e3;let lu=null;typeof MozWebSocket<"u"?lu=MozWebSocket:typeof WebSocket<"u"&&(lu=WebSocket);class ur{constructor(e,n,r,s,i,o,c){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=wl(this.connId),this.stats_=Up(n),this.connURL=ur.connectionURL_(n,o,c,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[vw]=Bp,typeof location<"u"&&location.hostname&&Sw.test(location.hostname)&&(o[_w]=bw),n&&(o[ww]=n),r&&(o[Cw]=r),s&&(o[xf]=s),i&&(o[jw]=i),Nw(e,Ew,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ai.set("previous_websocket_failure",!0);try{let r;nE(),this.mySock=new lu(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){ur.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&lu!==null&&!ur.forceDisallow_}static previouslyFailed(){return ai.isInMemoryStorage||ai.get("previous_websocket_failure")===!0}markConnectionHealthy(){ai.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Ga(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(xe(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=nn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=yw(n,n6);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(r6))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ur.responsesRequiredToBeHealthy=2;ur.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{static get ALL_TRANSPORTS(){return[Yi,ur]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=ur&&ur.isAvailable();let r=n&&!ur.previouslyFailed();if(e.webSocketOnly&&(n||In("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[ur];else{const s=this.transports_=[];for(const i of Ja.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);Ja.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Ja.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s6=6e4,i6=5e3,o6=10*1024,a6=100*1024,Xd="t",K0="d",l6="s",q0="r",c6="e",Y0="o",Q0="a",J0="n",X0="p",u6="h";class d6{constructor(e,n,r,s,i,o,c,u,d,f){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=c,this.onDisconnect_=u,this.onKill_=d,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=wl("c:"+this.id+":"),this.transportManager_=new Ja(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=wa(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>a6?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>o6?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Xd in e){const n=e[Xd];n===Q0?this.upgradeIfSecondaryHealthy_():n===q0?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Y0&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=ea("t",e),r=ea("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:X0,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Q0,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:J0,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=ea("t",e),r=ea("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=ea(Xd,e);if(K0 in e){const r=e[K0];if(n===u6){const s={...r};this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===J0){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===l6?this.onConnectionShutdown_(r):n===q0?this.onReset_(r):n===c6?yf("Server Error: "+r):n===Y0?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):yf("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Bp!==r&&In("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),wa(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(s6))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):wa(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(i6))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:X0,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ai.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e){this.allowedEvents_=e,this.listeners_={},xe(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){xe(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu extends Mw{static getInstance(){return new cu}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!nw()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return xe(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0=32,ey=768;class wt{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function ht(){return new wt("")}function Je(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Ls(t){return t.pieces_.length-t.pieceNum_}function It(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new wt(t.pieces_,e)}function Wp(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function h6(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Xa(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Lw(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new wt(e,0)}function Wt(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof wt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new wt(n,0)}function nt(t){return t.pieceNum_>=t.pieces_.length}function jn(t,e){const n=Je(t),r=Je(e);if(n===null)return e;if(n===r)return jn(It(t),It(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function f6(t,e){const n=Xa(t,0),r=Xa(e,0);for(let s=0;s<n.length&&s<r.length;s++){const i=ki(n[s],r[s]);if(i!==0)return i}return n.length===r.length?0:n.length<r.length?-1:1}function Hp(t,e){if(Ls(t)!==Ls(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Xn(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Ls(t)>Ls(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class p6{constructor(e,n){this.errorPrefix_=n,this.parts_=Xa(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Ku(this.parts_[r]);Fw(this)}}function m6(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Ku(e),Fw(t)}function g6(t){const e=t.parts_.pop();t.byteLength_-=Ku(e),t.parts_.length>0&&(t.byteLength_-=1)}function Fw(t){if(t.byteLength_>ey)throw new Error(t.errorPrefix_+"has a key path longer than "+ey+" bytes ("+t.byteLength_+").");if(t.parts_.length>Z0)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Z0+") or object contains a cycle "+ti(t))}function ti(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp extends Mw{static getInstance(){return new Vp}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return xe(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta=1e3,y6=60*5*1e3,ty=30*1e3,x6=1.3,v6=3e4,w6="server_kill",ny=3;class Kr extends Dw{constructor(e,n,r,s,i,o,c,u){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=c,this.authOverride_=u,this.id=Kr.nextPersistentConnectionId_++,this.log_=wl("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ta,this.maxReconnectDelay_=y6,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Vp.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&cu.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(nn(i)),xe(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new xl,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const c=o.d;o.s==="ok"?n.resolve(c):n.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),xe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),xe(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const c={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,c),this.connected_&&this.sendListen_(c)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,c=>{const u=c.d,d=c.s;Kr.warnOnListenWarnings_(u,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",c),d!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(d,u))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Lr(e,"w")){const r=go(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();In(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||cE(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=ty)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=lE(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),xe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+nn(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):yf("Unrecognized action received from server: "+nn(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){xe(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ta,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ta,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>v6&&(this.reconnectDelay_=ta),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*x6)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Kr.nextConnectionId_++,i=this.lastSessionId;let o=!1,c=null;const u=function(){c?c.close():(o=!0,r())},d=function(p){xe(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(p)};this.realtime_={close:u,sendRequest:d};const f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[p,y]=await Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);o?pn("getToken() completed but was canceled"):(pn("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=y&&y.token,c=new d6(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,I=>{In(I+" ("+this.repoInfo_.toString()+")"),this.interrupt(w6)},i))}catch(p){this.log_("Failed to get token: "+p),o||(this.repoInfo_.nodeAdmin&&In(p),u())}}}interrupt(e){pn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){pn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],T0(this.interruptReasons_)&&(this.reconnectDelay_=ta,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>zp(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new wt(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){pn("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=ny&&(this.reconnectDelay_=ty,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){pn("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=ny&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+pw.replace(/\./g,"-")]=1,nw()?e["framework.cordova"]=1:tE()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=cu.getInstance().currentlyOnline();return T0(this.interruptReasons_)&&e}}Kr.nextPersistentConnectionId_=0;Kr.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Xe(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Xe(xo,e),s=new Xe(xo,n);return this.compare(r,s)!==0}minPost(){return Xe.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oc;class zw extends qu{static get __EMPTY_NODE(){return oc}static set __EMPTY_NODE(e){oc=e}compare(e,n){return ki(e.name,n.name)}isDefinedOn(e){throw Ro("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Xe.MIN}maxPost(){return new Xe(wi,oc)}makePost(e,n){return xe(typeof e=="string","KeyIndex indexValue must always be a string."),new Xe(e,oc)}toString(){return".key"}}const ro=new zw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class ln{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??ln.RED,this.left=s??Pn.EMPTY_NODE,this.right=i??Pn.EMPTY_NODE}copy(e,n,r,s,i){return new ln(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Pn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Pn.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,ln.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,ln.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}ln.RED=!0;ln.BLACK=!1;class _6{copy(e,n,r,s,i){return this}insert(e,n,r){return new ln(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Pn{constructor(e,n=Pn.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Pn(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,ln.BLACK,null,null))}remove(e){return new Pn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ln.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ac(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new ac(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new ac(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new ac(this.root_,null,this.comparator_,!0,e)}}Pn.EMPTY_NODE=new _6;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b6(t,e){return ki(t.name,e.name)}function Gp(t,e){return ki(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vf;function S6(t){vf=t}const Bw=function(t){return typeof t=="number"?"number:"+xw(t):"string:"+t},Uw=function(t){if(t.isLeafNode()){const e=t.val();xe(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Lr(e,".sv"),"Priority must be a string or number.")}else xe(t===vf||t.isEmpty(),"priority of unexpected type.");xe(t===vf||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ry;class on{static set __childrenNodeConstructor(e){ry=e}static get __childrenNodeConstructor(){return ry}constructor(e,n=on.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,xe(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Uw(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new on(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:on.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return nt(e)?this:Je(e)===".priority"?this.priorityNode_:on.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:on.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Je(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(xe(r!==".priority"||Ls(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,on.__childrenNodeConstructor.EMPTY_NODE.updateChild(It(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Bw(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=xw(this.value_):e+=this.value_,this.lazyHash_=gw(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===on.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof on.__childrenNodeConstructor?-1:(xe(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=on.VALUE_TYPE_ORDER.indexOf(n),i=on.VALUE_TYPE_ORDER.indexOf(r);return xe(s>=0,"Unknown leaf type: "+n),xe(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}on.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $w,Ww;function C6(t){$w=t}function j6(t){Ww=t}class E6 extends qu{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?ki(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Xe.MIN}maxPost(){return new Xe(wi,new on("[PRIORITY-POST]",Ww))}makePost(e,n){const r=$w(e);return new Xe(n,new on("[PRIORITY-POST]",r))}toString(){return".priority"}}const Ht=new E6;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I6=Math.log(2);class k6{constructor(e){const n=i=>parseInt(Math.log(i)/I6,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const uu=function(t,e,n,r){t.sort(e);const s=function(u,d){const f=d-u;let p,y;if(f===0)return null;if(f===1)return p=t[u],y=n?n(p):p,new ln(y,p.node,ln.BLACK,null,null);{const I=parseInt(f/2,10)+u,w=s(u,I),T=s(I+1,d);return p=t[I],y=n?n(p):p,new ln(y,p.node,ln.BLACK,w,T)}},i=function(u){let d=null,f=null,p=t.length;const y=function(w,T){const A=p-w,S=p;p-=w;const _=s(A+1,S),v=t[A],O=n?n(v):v;I(new ln(O,v.node,T,null,_))},I=function(w){d?(d.left=w,d=w):(f=w,d=w)};for(let w=0;w<u.count;++w){const T=u.nextBitIsOne(),A=Math.pow(2,u.count-(w+1));T?y(A,ln.BLACK):(y(A,ln.BLACK),y(A,ln.RED))}return f},o=new k6(t.length),c=i(o);return new Pn(r||e,c)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zd;const Oi={};class Hr{static get Default(){return xe(Oi&&Ht,"ChildrenNode.ts has not been loaded"),Zd=Zd||new Hr({".priority":Oi},{".priority":Ht}),Zd}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=go(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Pn?n:null}hasIndex(e){return Lr(this.indexSet_,e.toString())}addIndex(e,n){xe(e!==ro,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(Xe.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let c;s?c=uu(r,e.getCompare()):c=Oi;const u=e.toString(),d={...this.indexSet_};d[u]=e;const f={...this.indexes_};return f[u]=c,new Hr(f,d)}addToIndexes(e,n){const r=au(this.indexes_,(s,i)=>{const o=go(this.indexSet_,i);if(xe(o,"Missing index implementation for "+i),s===Oi)if(o.isDefinedOn(e.node)){const c=[],u=n.getIterator(Xe.Wrap);let d=u.getNext();for(;d;)d.name!==e.name&&c.push(d),d=u.getNext();return c.push(e),uu(c,o.getCompare())}else return Oi;else{const c=n.get(e.name);let u=s;return c&&(u=u.remove(new Xe(e.name,c))),u.insert(e,e.node)}});return new Hr(r,this.indexSet_)}removeFromIndexes(e,n){const r=au(this.indexes_,s=>{if(s===Oi)return s;{const i=n.get(e.name);return i?s.remove(new Xe(e.name,i)):s}});return new Hr(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let na;class Fe{static get EMPTY_NODE(){return na||(na=new Fe(new Pn(Gp),null,Hr.Default))}constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Uw(this.priorityNode_),this.children_.isEmpty()&&xe(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||na}updatePriority(e){return this.children_.isEmpty()?this:new Fe(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?na:n}}getChild(e){const n=Je(e);return n===null?this:this.getImmediateChild(n).getChild(It(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(xe(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Xe(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?na:this.priorityNode_;return new Fe(s,o,i)}}updateChild(e,n){const r=Je(e);if(r===null)return n;{xe(Je(e)!==".priority"||Ls(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(It(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(Ht,(o,c)=>{n[o]=c.val(e),r++,i&&Fe.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const c in n)o[c]=n[c];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Bw(this.getPriority().val())+":"),this.forEachChild(Ht,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":gw(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new Xe(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Xe(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Xe(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,Xe.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,Xe.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===_l?-1:0}withIndex(e){if(e===ro||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Fe(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===ro||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Ht),s=n.getIterator(Ht);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===ro?null:this.indexMap_.get(e.toString())}}Fe.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class N6 extends Fe{constructor(){super(new Pn(Gp),Fe.EMPTY_NODE,Hr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Fe.EMPTY_NODE}isEmpty(){return!1}}const _l=new N6;Object.defineProperties(Xe,{MIN:{value:new Xe(xo,Fe.EMPTY_NODE)},MAX:{value:new Xe(wi,_l)}});zw.__EMPTY_NODE=Fe.EMPTY_NODE;on.__childrenNodeConstructor=Fe;S6(_l);j6(_l);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T6=!0;function tn(t,e=null){if(t===null)return Fe.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),xe(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new on(n,tn(e))}if(!(t instanceof Array)&&T6){const n=[];let r=!1;if(yn(t,(o,c)=>{if(o.substring(0,1)!=="."){const u=tn(c);u.isEmpty()||(r=r||!u.getPriority().isEmpty(),n.push(new Xe(o,u)))}}),n.length===0)return Fe.EMPTY_NODE;const i=uu(n,b6,o=>o.name,Gp);if(r){const o=uu(n,Ht.getCompare());return new Fe(i,tn(e),new Hr({".priority":o},{".priority":Ht}))}else return new Fe(i,tn(e),Hr.Default)}else{let n=Fe.EMPTY_NODE;return yn(t,(r,s)=>{if(Lr(t,r)&&r.substring(0,1)!=="."){const i=tn(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(tn(e))}}C6(tn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6 extends qu{constructor(e){super(),this.indexPath_=e,xe(!nt(e)&&Je(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?ki(e.name,n.name):i}makePost(e,n){const r=tn(e),s=Fe.EMPTY_NODE.updateChild(this.indexPath_,r);return new Xe(n,s)}maxPost(){const e=Fe.EMPTY_NODE.updateChild(this.indexPath_,_l);return new Xe(wi,e)}toString(){return Xa(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6 extends qu{compare(e,n){const r=e.node.compareTo(n.node);return r===0?ki(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Xe.MIN}maxPost(){return Xe.MAX}makePost(e,n){const r=tn(e);return new Xe(n,r)}toString(){return".value"}}const P6=new A6;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hw(t){return{type:"value",snapshotNode:t}}function vo(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Za(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function el(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function O6(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){xe(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const c=e.getImmediateChild(n);return c.getChild(s).equals(r.getChild(s))&&c.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Za(n,c)):xe(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):c.isEmpty()?o.trackChildChange(vo(n,r)):o.trackChildChange(el(n,r,c))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Ht,(s,i)=>{n.hasChild(s)||r.trackChildChange(Za(s,i))}),n.isLeafNode()||n.forEachChild(Ht,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(el(s,i,o))}else r.trackChildChange(vo(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?Fe.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e){this.indexedFilter_=new Kp(e.getIndex()),this.index_=e.getIndex(),this.startPost_=tl.getStartPost_(e),this.endPost_=tl.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new Xe(n,r))||(r=Fe.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=Fe.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(Fe.EMPTY_NODE);const i=this;return n.forEachChild(Ht,(o,c)=>{i.matches(new Xe(o,c))||(s=s.updateImmediateChild(o,Fe.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new tl(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new Xe(n,r))||(r=Fe.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=Fe.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=Fe.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const c=i.getNext();if(this.withinDirectionalStart(c))if(this.withinDirectionalEnd(c))s=s.updateImmediateChild(c.name,c.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(Fe.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const c=i.getNext();o<this.limit_&&this.withinDirectionalStart(c)&&this.withinDirectionalEnd(c)?o++:s=s.updateImmediateChild(c.name,Fe.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const p=this.index_.getCompare();o=(y,I)=>p(I,y)}else o=this.index_.getCompare();const c=e;xe(c.numChildren()===this.limit_,"");const u=new Xe(n,r),d=this.reverse_?c.getFirstChild(this.index_):c.getLastChild(this.index_),f=this.rangedFilter_.matches(u);if(c.hasChild(n)){const p=c.getImmediateChild(n);let y=s.getChildAfterChild(this.index_,d,this.reverse_);for(;y!=null&&(y.name===n||c.hasChild(y.name));)y=s.getChildAfterChild(this.index_,y,this.reverse_);const I=y==null?1:o(y,u);if(f&&!r.isEmpty()&&I>=0)return i!=null&&i.trackChildChange(el(n,r,p)),c.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(Za(n,p));const T=c.updateImmediateChild(n,Fe.EMPTY_NODE);return y!=null&&this.rangedFilter_.matches(y)?(i!=null&&i.trackChildChange(vo(y.name,y.node)),T.updateImmediateChild(y.name,y.node)):T}}else return r.isEmpty()?e:f&&o(d,u)>=0?(i!=null&&(i.trackChildChange(Za(d.name,d.node)),i.trackChildChange(vo(n,r))),c.updateImmediateChild(n,r).updateImmediateChild(d.name,Fe.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ht}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return xe(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return xe(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:xo}hasEnd(){return this.endSet_}getIndexEndValue(){return xe(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return xe(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:wi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return xe(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ht}copy(){const e=new qp;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function M6(t){return t.loadsAllData()?new Kp(t.getIndex()):t.hasLimit()?new D6(t):new tl(t)}function sy(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Ht?n="$priority":t.index_===P6?n="$value":t.index_===ro?n="$key":(xe(t.index_ instanceof R6,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=nn(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=nn(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+nn(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=nn(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+nn(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function iy(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Ht&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du extends Dw{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(xe(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=wl("p:rest:"),this.listens_={}}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=du.getListenId_(e,r),c={};this.listens_[o]=c;const u=sy(e._queryParams);this.restRequest_(i+".json",u,(d,f)=>{let p=f;if(d===404&&(p=null,d=null),d===null&&this.onDataUpdate_(i,p,!1,r),go(this.listens_,o)===c){let y;d?d===401?y="permission_denied":y="rest_error:"+d:y="ok",s(y,null)}})}unlisten(e,n){const r=du.getListenId_(e,n);delete this.listens_[r]}get(e){const n=sy(e._queryParams),r=e._path.toString(),s=new xl;return this.restRequest_(r+".json",n,(i,o)=>{let c=o;i===404&&(c=null,i=null),i===null?(this.onDataUpdate_(r,c,!1,null),s.resolve(c)):s.reject(new Error(c))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+uE(n);this.log_("Sending REST request for "+o);const c=new XMLHttpRequest;c.onreadystatechange=()=>{if(r&&c.readyState===4){this.log_("REST Response for "+o+" received. status:",c.status,"response:",c.responseText);let u=null;if(c.status>=200&&c.status<300){try{u=Ga(c.responseText)}catch{In("Failed to parse JSON response for "+o+": "+c.responseText)}r(null,u)}else c.status!==401&&c.status!==404&&In("Got unsuccessful REST response for "+o+" Status: "+c.status),r(c.status);r=null}},c.open("GET",o,!0),c.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{constructor(){this.rootNode_=Fe.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hu(){return{value:null,children:new Map}}function Vw(t,e,n){if(nt(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Je(e);t.children.has(r)||t.children.set(r,hu());const s=t.children.get(r);e=It(e),Vw(s,e,n)}}function wf(t,e,n){t.value!==null?n(e,t.value):F6(t,(r,s)=>{const i=new wt(e.toString()+"/"+r);wf(s,i,n)})}function F6(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&yn(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy=10*1e3,B6=30*1e3,U6=5*60*1e3;class $6{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new z6(e);const r=oy+(B6-oy)*Math.random();wa(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;yn(e,(s,i)=>{i>0&&Lr(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),wa(this.reportStats_.bind(this),Math.floor(Math.random()*2*U6))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dr;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(dr||(dr={}));function Yp(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Qp(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Jp(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=dr.ACK_USER_WRITE,this.source=Yp()}operationForChild(e){if(nt(this.path)){if(this.affectedTree.value!=null)return xe(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new wt(e));return new fu(ht(),n,this.revert)}}else return xe(Je(this.path)===e,"operationForChild called for unrelated child."),new fu(It(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,n){this.source=e,this.path=n,this.type=dr.LISTEN_COMPLETE}operationForChild(e){return nt(this.path)?new nl(this.source,ht()):new nl(this.source,It(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=dr.OVERWRITE}operationForChild(e){return nt(this.path)?new _i(this.source,ht(),this.snap.getImmediateChild(e)):new _i(this.source,It(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=dr.MERGE}operationForChild(e){if(nt(this.path)){const n=this.children.subtree(new wt(e));return n.isEmpty()?null:n.value?new _i(this.source,ht(),n.value):new wo(this.source,ht(),n)}else return xe(Je(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new wo(this.source,It(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(nt(e))return this.isFullyInitialized()&&!this.filtered_;const n=Je(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function H6(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(O6(o.childName,o.snapshotNode))}),ra(t,s,"child_removed",e,r,n),ra(t,s,"child_added",e,r,n),ra(t,s,"child_moved",i,r,n),ra(t,s,"child_changed",e,r,n),ra(t,s,"value",e,r,n),s}function ra(t,e,n,r,s,i){const o=r.filter(c=>c.type===n);o.sort((c,u)=>G6(t,c,u)),o.forEach(c=>{const u=V6(t,c,i);s.forEach(d=>{d.respondsTo(c.type)&&e.push(d.createEvent(u,t.query_))})})}function V6(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function G6(t,e,n){if(e.childName==null||n.childName==null)throw Ro("Should only compare child_ events.");const r=new Xe(e.childName,e.snapshotNode),s=new Xe(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yu(t,e){return{eventCache:t,serverCache:e}}function _a(t,e,n,r){return Yu(new Fs(e,n,r),t.serverCache)}function Gw(t,e,n,r){return Yu(t.eventCache,new Fs(e,n,r))}function pu(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function bi(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eh;const K6=()=>(eh||(eh=new Pn(RI)),eh);class Et{static fromObject(e){let n=new Et(null);return yn(e,(r,s)=>{n=n.set(new wt(r),s)}),n}constructor(e,n=K6()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:ht(),value:this.value};if(nt(e))return null;{const r=Je(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(It(e),n);return i!=null?{path:Wt(new wt(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(nt(e))return this;{const n=Je(e),r=this.children.get(n);return r!==null?r.subtree(It(e)):new Et(null)}}set(e,n){if(nt(e))return new Et(n,this.children);{const r=Je(e),i=(this.children.get(r)||new Et(null)).set(It(e),n),o=this.children.insert(r,i);return new Et(this.value,o)}}remove(e){if(nt(e))return this.children.isEmpty()?new Et(null):new Et(null,this.children);{const n=Je(e),r=this.children.get(n);if(r){const s=r.remove(It(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new Et(null):new Et(this.value,i)}else return this}}get(e){if(nt(e))return this.value;{const n=Je(e),r=this.children.get(n);return r?r.get(It(e)):null}}setTree(e,n){if(nt(e))return n;{const r=Je(e),i=(this.children.get(r)||new Et(null)).setTree(It(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new Et(this.value,o)}}fold(e){return this.fold_(ht(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(Wt(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,ht(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(nt(e))return null;{const i=Je(e),o=this.children.get(i);return o?o.findOnPath_(It(e),Wt(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,ht(),n)}foreachOnPath_(e,n,r){if(nt(e))return this;{this.value&&r(n,this.value);const s=Je(e),i=this.children.get(s);return i?i.foreachOnPath_(It(e),Wt(n,s),r):new Et(null)}}foreach(e){this.foreach_(ht(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(Wt(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this.writeTree_=e}static empty(){return new mr(new Et(null))}}function ba(t,e,n){if(nt(e))return new mr(new Et(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=jn(s,e);return i=i.updateChild(o,n),new mr(t.writeTree_.set(s,i))}else{const s=new Et(n),i=t.writeTree_.setTree(e,s);return new mr(i)}}}function _f(t,e,n){let r=t;return yn(n,(s,i)=>{r=ba(r,Wt(e,s),i)}),r}function ay(t,e){if(nt(e))return mr.empty();{const n=t.writeTree_.setTree(e,new Et(null));return new mr(n)}}function bf(t,e){return Ni(t,e)!=null}function Ni(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(jn(n.path,e)):null}function ly(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Ht,(r,s)=>{e.push(new Xe(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new Xe(r,s.value))}),e}function Ps(t,e){if(nt(e))return t;{const n=Ni(t,e);return n!=null?new mr(new Et(n)):new mr(t.writeTree_.subtree(e))}}function Sf(t){return t.writeTree_.isEmpty()}function _o(t,e){return Kw(ht(),t.writeTree_,e)}function Kw(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(xe(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=Kw(Wt(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Wt(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qu(t,e){return Jw(e,t)}function q6(t,e,n,r,s){xe(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=ba(t.visibleWrites,e,n)),t.lastWriteId=r}function Y6(t,e,n,r){xe(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=_f(t.visibleWrites,e,n),t.lastWriteId=r}function Q6(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function J6(t,e){const n=t.allWrites.findIndex(c=>c.writeId===e);xe(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const c=t.allWrites[o];c.visible&&(o>=n&&X6(c,r.path)?s=!1:Xn(r.path,c.path)&&(i=!0)),o--}if(s){if(i)return Z6(t),!0;if(r.snap)t.visibleWrites=ay(t.visibleWrites,r.path);else{const c=r.children;yn(c,u=>{t.visibleWrites=ay(t.visibleWrites,Wt(r.path,u))})}return!0}else return!1}function X6(t,e){if(t.snap)return Xn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Xn(Wt(t.path,n),e))return!0;return!1}function Z6(t){t.visibleWrites=qw(t.allWrites,ek,ht()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function ek(t){return t.visible}function qw(t,e,n){let r=mr.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let c;if(i.snap)Xn(n,o)?(c=jn(n,o),r=ba(r,c,i.snap)):Xn(o,n)&&(c=jn(o,n),r=ba(r,ht(),i.snap.getChild(c)));else if(i.children){if(Xn(n,o))c=jn(n,o),r=_f(r,c,i.children);else if(Xn(o,n))if(c=jn(o,n),nt(c))r=_f(r,ht(),i.children);else{const u=go(i.children,Je(c));if(u){const d=u.getChild(It(c));r=ba(r,ht(),d)}}}else throw Ro("WriteRecord should have .snap or .children")}}return r}function Yw(t,e,n,r,s){if(!r&&!s){const i=Ni(t.visibleWrites,e);if(i!=null)return i;{const o=Ps(t.visibleWrites,e);if(Sf(o))return n;if(n==null&&!bf(o,ht()))return null;{const c=n||Fe.EMPTY_NODE;return _o(o,c)}}}else{const i=Ps(t.visibleWrites,e);if(!s&&Sf(i))return n;if(!s&&n==null&&!bf(i,ht()))return null;{const o=function(d){return(d.visible||s)&&(!r||!~r.indexOf(d.writeId))&&(Xn(d.path,e)||Xn(e,d.path))},c=qw(t.allWrites,o,e),u=n||Fe.EMPTY_NODE;return _o(c,u)}}}function tk(t,e,n){let r=Fe.EMPTY_NODE;const s=Ni(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Ht,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=Ps(t.visibleWrites,e);return n.forEachChild(Ht,(o,c)=>{const u=_o(Ps(i,new wt(o)),c);r=r.updateImmediateChild(o,u)}),ly(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=Ps(t.visibleWrites,e);return ly(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function nk(t,e,n,r,s){xe(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=Wt(e,n);if(bf(t.visibleWrites,i))return null;{const o=Ps(t.visibleWrites,i);return Sf(o)?s.getChild(n):_o(o,s.getChild(n))}}function rk(t,e,n,r){const s=Wt(e,n),i=Ni(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=Ps(t.visibleWrites,s);return _o(o,r.getNode().getImmediateChild(n))}else return null}function sk(t,e){return Ni(t.visibleWrites,e)}function ik(t,e,n,r,s,i,o){let c;const u=Ps(t.visibleWrites,e),d=Ni(u,ht());if(d!=null)c=d;else if(n!=null)c=_o(u,n);else return[];if(c=c.withIndex(o),!c.isEmpty()&&!c.isLeafNode()){const f=[],p=o.getCompare(),y=i?c.getReverseIteratorFrom(r,o):c.getIteratorFrom(r,o);let I=y.getNext();for(;I&&f.length<s;)p(I,r)!==0&&f.push(I),I=y.getNext();return f}else return[]}function ok(){return{visibleWrites:mr.empty(),allWrites:[],lastWriteId:-1}}function mu(t,e,n,r){return Yw(t.writeTree,t.treePath,e,n,r)}function Xp(t,e){return tk(t.writeTree,t.treePath,e)}function cy(t,e,n,r){return nk(t.writeTree,t.treePath,e,n,r)}function gu(t,e){return sk(t.writeTree,Wt(t.treePath,e))}function ak(t,e,n,r,s,i){return ik(t.writeTree,t.treePath,e,n,r,s,i)}function Zp(t,e,n){return rk(t.writeTree,t.treePath,e,n)}function Qw(t,e){return Jw(Wt(t.treePath,e),t.writeTree)}function Jw(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;xe(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),xe(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,el(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,Za(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,vo(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,el(r,e.snapshotNode,s.oldSnap));else throw Ro("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const Xw=new ck;class em{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Fs(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Zp(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:bi(this.viewCache_),i=ak(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uk(t){return{filter:t}}function dk(t,e){xe(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),xe(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function hk(t,e,n,r,s){const i=new lk;let o,c;if(n.type===dr.OVERWRITE){const d=n;d.source.fromUser?o=Cf(t,e,d.path,d.snap,r,s,i):(xe(d.source.fromServer,"Unknown source."),c=d.source.tagged||e.serverCache.isFiltered()&&!nt(d.path),o=yu(t,e,d.path,d.snap,r,s,c,i))}else if(n.type===dr.MERGE){const d=n;d.source.fromUser?o=pk(t,e,d.path,d.children,r,s,i):(xe(d.source.fromServer,"Unknown source."),c=d.source.tagged||e.serverCache.isFiltered(),o=jf(t,e,d.path,d.children,r,s,c,i))}else if(n.type===dr.ACK_USER_WRITE){const d=n;d.revert?o=yk(t,e,d.path,r,s,i):o=mk(t,e,d.path,d.affectedTree,r,s,i)}else if(n.type===dr.LISTEN_COMPLETE)o=gk(t,e,n.path,r,i);else throw Ro("Unknown operation type: "+n.type);const u=i.getChanges();return fk(e,o,u),{viewCache:o,changes:u}}function fk(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=pu(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(Hw(pu(e)))}}function Zw(t,e,n,r,s,i){const o=e.eventCache;if(gu(r,n)!=null)return e;{let c,u;if(nt(n))if(xe(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const d=bi(e),f=d instanceof Fe?d:Fe.EMPTY_NODE,p=Xp(r,f);c=t.filter.updateFullNode(e.eventCache.getNode(),p,i)}else{const d=mu(r,bi(e));c=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const d=Je(n);if(d===".priority"){xe(Ls(n)===1,"Can't have a priority with additional path components");const f=o.getNode();u=e.serverCache.getNode();const p=cy(r,n,f,u);p!=null?c=t.filter.updatePriority(f,p):c=o.getNode()}else{const f=It(n);let p;if(o.isCompleteForChild(d)){u=e.serverCache.getNode();const y=cy(r,n,o.getNode(),u);y!=null?p=o.getNode().getImmediateChild(d).updateChild(f,y):p=o.getNode().getImmediateChild(d)}else p=Zp(r,d,e.serverCache);p!=null?c=t.filter.updateChild(o.getNode(),d,p,f,s,i):c=o.getNode()}}return _a(e,c,o.isFullyInitialized()||nt(n),t.filter.filtersNodes())}}function yu(t,e,n,r,s,i,o,c){const u=e.serverCache;let d;const f=o?t.filter:t.filter.getIndexedFilter();if(nt(n))d=f.updateFullNode(u.getNode(),r,null);else if(f.filtersNodes()&&!u.isFiltered()){const I=u.getNode().updateChild(n,r);d=f.updateFullNode(u.getNode(),I,null)}else{const I=Je(n);if(!u.isCompleteForPath(n)&&Ls(n)>1)return e;const w=It(n),A=u.getNode().getImmediateChild(I).updateChild(w,r);I===".priority"?d=f.updatePriority(u.getNode(),A):d=f.updateChild(u.getNode(),I,A,w,Xw,null)}const p=Gw(e,d,u.isFullyInitialized()||nt(n),f.filtersNodes()),y=new em(s,p,i);return Zw(t,p,n,s,y,c)}function Cf(t,e,n,r,s,i,o){const c=e.eventCache;let u,d;const f=new em(s,e,i);if(nt(n))d=t.filter.updateFullNode(e.eventCache.getNode(),r,o),u=_a(e,d,!0,t.filter.filtersNodes());else{const p=Je(n);if(p===".priority")d=t.filter.updatePriority(e.eventCache.getNode(),r),u=_a(e,d,c.isFullyInitialized(),c.isFiltered());else{const y=It(n),I=c.getNode().getImmediateChild(p);let w;if(nt(y))w=r;else{const T=f.getCompleteChild(p);T!=null?Wp(y)===".priority"&&T.getChild(Lw(y)).isEmpty()?w=T:w=T.updateChild(y,r):w=Fe.EMPTY_NODE}if(I.equals(w))u=e;else{const T=t.filter.updateChild(c.getNode(),p,w,y,f,o);u=_a(e,T,c.isFullyInitialized(),t.filter.filtersNodes())}}}return u}function uy(t,e){return t.eventCache.isCompleteForChild(e)}function pk(t,e,n,r,s,i,o){let c=e;return r.foreach((u,d)=>{const f=Wt(n,u);uy(e,Je(f))&&(c=Cf(t,c,f,d,s,i,o))}),r.foreach((u,d)=>{const f=Wt(n,u);uy(e,Je(f))||(c=Cf(t,c,f,d,s,i,o))}),c}function dy(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function jf(t,e,n,r,s,i,o,c){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u=e,d;nt(n)?d=r:d=new Et(null).setTree(n,r);const f=e.serverCache.getNode();return d.children.inorderTraversal((p,y)=>{if(f.hasChild(p)){const I=e.serverCache.getNode().getImmediateChild(p),w=dy(t,I,y);u=yu(t,u,new wt(p),w,s,i,o,c)}}),d.children.inorderTraversal((p,y)=>{const I=!e.serverCache.isCompleteForChild(p)&&y.value===null;if(!f.hasChild(p)&&!I){const w=e.serverCache.getNode().getImmediateChild(p),T=dy(t,w,y);u=yu(t,u,new wt(p),T,s,i,o,c)}}),u}function mk(t,e,n,r,s,i,o){if(gu(s,n)!=null)return e;const c=e.serverCache.isFiltered(),u=e.serverCache;if(r.value!=null){if(nt(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return yu(t,e,n,u.getNode().getChild(n),s,i,c,o);if(nt(n)){let d=new Et(null);return u.getNode().forEachChild(ro,(f,p)=>{d=d.set(new wt(f),p)}),jf(t,e,n,d,s,i,c,o)}else return e}else{let d=new Et(null);return r.foreach((f,p)=>{const y=Wt(n,f);u.isCompleteForPath(y)&&(d=d.set(f,u.getNode().getChild(y)))}),jf(t,e,n,d,s,i,c,o)}}function gk(t,e,n,r,s){const i=e.serverCache,o=Gw(e,i.getNode(),i.isFullyInitialized()||nt(n),i.isFiltered());return Zw(t,o,n,r,Xw,s)}function yk(t,e,n,r,s,i){let o;if(gu(r,n)!=null)return e;{const c=new em(r,e,s),u=e.eventCache.getNode();let d;if(nt(n)||Je(n)===".priority"){let f;if(e.serverCache.isFullyInitialized())f=mu(r,bi(e));else{const p=e.serverCache.getNode();xe(p instanceof Fe,"serverChildren would be complete if leaf node"),f=Xp(r,p)}f=f,d=t.filter.updateFullNode(u,f,i)}else{const f=Je(n);let p=Zp(r,f,e.serverCache);p==null&&e.serverCache.isCompleteForChild(f)&&(p=u.getImmediateChild(f)),p!=null?d=t.filter.updateChild(u,f,p,It(n),c,i):e.eventCache.getNode().hasChild(f)?d=t.filter.updateChild(u,f,Fe.EMPTY_NODE,It(n),c,i):d=u,d.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=mu(r,bi(e)),o.isLeafNode()&&(d=t.filter.updateFullNode(d,o,i)))}return o=e.serverCache.isFullyInitialized()||gu(r,ht())!=null,_a(e,d,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new Kp(r.getIndex()),i=M6(r);this.processor_=uk(i);const o=n.serverCache,c=n.eventCache,u=s.updateFullNode(Fe.EMPTY_NODE,o.getNode(),null),d=i.updateFullNode(Fe.EMPTY_NODE,c.getNode(),null),f=new Fs(u,o.isFullyInitialized(),s.filtersNodes()),p=new Fs(d,c.isFullyInitialized(),i.filtersNodes());this.viewCache_=Yu(p,f),this.eventGenerator_=new W6(this.query_)}get query(){return this.query_}}function vk(t){return t.viewCache_.serverCache.getNode()}function wk(t){return pu(t.viewCache_)}function _k(t,e){const n=bi(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!nt(e)&&!n.getImmediateChild(Je(e)).isEmpty())?n.getChild(e):null}function hy(t){return t.eventRegistrations_.length===0}function bk(t,e){t.eventRegistrations_.push(e)}function fy(t,e,n){const r=[];if(n){xe(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function py(t,e,n,r){e.type===dr.MERGE&&e.source.queryId!==null&&(xe(bi(t.viewCache_),"We should always have a full cache before handling merges"),xe(pu(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=hk(t.processor_,s,e,n,r);return dk(t.processor_,i.viewCache),xe(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,e2(t,i.changes,i.viewCache.eventCache.getNode(),null)}function Sk(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ht,(i,o)=>{r.push(vo(i,o))}),n.isFullyInitialized()&&r.push(Hw(n.getNode())),e2(t,r,n.getNode(),e)}function e2(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return H6(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xu;class t2{constructor(){this.views=new Map}}function Ck(t){xe(!xu,"__referenceConstructor has already been defined"),xu=t}function jk(){return xe(xu,"Reference.ts has not been loaded"),xu}function Ek(t){return t.views.size===0}function tm(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return xe(i!=null,"SyncTree gave us an op for an invalid query."),py(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(py(o,e,n,r));return i}}function n2(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let c=mu(n,s?r:null),u=!1;c?u=!0:r instanceof Fe?(c=Xp(n,r),u=!1):(c=Fe.EMPTY_NODE,u=!1);const d=Yu(new Fs(c,u,!1),new Fs(r,s,!1));return new xk(e,d)}return o}function Ik(t,e,n,r,s,i){const o=n2(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),bk(o,n),Sk(o,n)}function kk(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const c=zs(t);if(s==="default")for(const[u,d]of t.views.entries())o=o.concat(fy(d,n,r)),hy(d)&&(t.views.delete(u),d.query._queryParams.loadsAllData()||i.push(d.query));else{const u=t.views.get(s);u&&(o=o.concat(fy(u,n,r)),hy(u)&&(t.views.delete(s),u.query._queryParams.loadsAllData()||i.push(u.query)))}return c&&!zs(t)&&i.push(new(jk())(e._repo,e._path)),{removed:i,events:o}}function r2(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Os(t,e){let n=null;for(const r of t.views.values())n=n||_k(r,e);return n}function s2(t,e){if(e._queryParams.loadsAllData())return Ju(t);{const r=e._queryIdentifier;return t.views.get(r)}}function i2(t,e){return s2(t,e)!=null}function zs(t){return Ju(t)!=null}function Ju(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vu;function Nk(t){xe(!vu,"__referenceConstructor has already been defined"),vu=t}function Tk(){return xe(vu,"Reference.ts has not been loaded"),vu}let Rk=1;class my{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Et(null),this.pendingWriteTree_=ok(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function o2(t,e,n,r,s){return q6(t.pendingWriteTree_,e,n,r,s),s?Oo(t,new _i(Yp(),e,n)):[]}function Ak(t,e,n,r){Y6(t.pendingWriteTree_,e,n,r);const s=Et.fromObject(n);return Oo(t,new wo(Yp(),e,s))}function _s(t,e,n=!1){const r=Q6(t.pendingWriteTree_,e);if(J6(t.pendingWriteTree_,e)){let i=new Et(null);return r.snap!=null?i=i.set(ht(),!0):yn(r.children,o=>{i=i.set(new wt(o),!0)}),Oo(t,new fu(r.path,i,n))}else return[]}function bl(t,e,n){return Oo(t,new _i(Qp(),e,n))}function Pk(t,e,n){const r=Et.fromObject(n);return Oo(t,new wo(Qp(),e,r))}function Ok(t,e){return Oo(t,new nl(Qp(),e))}function Dk(t,e,n){const r=rm(t,n);if(r){const s=sm(r),i=s.path,o=s.queryId,c=jn(i,e),u=new nl(Jp(o),c);return im(t,i,u)}else return[]}function wu(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let c=[];if(o&&(e._queryIdentifier==="default"||i2(o,e))){const u=kk(o,e,n,r);Ek(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const d=u.removed;if(c=u.events,!s){const f=d.findIndex(y=>y._queryParams.loadsAllData())!==-1,p=t.syncPointTree_.findOnPath(i,(y,I)=>zs(I));if(f&&!p){const y=t.syncPointTree_.subtree(i);if(!y.isEmpty()){const I=Fk(y);for(let w=0;w<I.length;++w){const T=I[w],A=T.query,S=u2(t,T);t.listenProvider_.startListening(Sa(A),rl(t,A),S.hashFn,S.onComplete)}}}!p&&d.length>0&&!r&&(f?t.listenProvider_.stopListening(Sa(e),null):d.forEach(y=>{const I=t.queryToTagMap.get(Xu(y));t.listenProvider_.stopListening(Sa(y),I)}))}zk(t,d)}return c}function a2(t,e,n,r){const s=rm(t,r);if(s!=null){const i=sm(s),o=i.path,c=i.queryId,u=jn(o,e),d=new _i(Jp(c),u,n);return im(t,o,d)}else return[]}function Mk(t,e,n,r){const s=rm(t,r);if(s){const i=sm(s),o=i.path,c=i.queryId,u=jn(o,e),d=Et.fromObject(n),f=new wo(Jp(c),u,d);return im(t,o,f)}else return[]}function Ef(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(y,I)=>{const w=jn(y,s);i=i||Os(I,w),o=o||zs(I)});let c=t.syncPointTree_.get(s);c?(o=o||zs(c),i=i||Os(c,ht())):(c=new t2,t.syncPointTree_=t.syncPointTree_.set(s,c));let u;i!=null?u=!0:(u=!1,i=Fe.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((I,w)=>{const T=Os(w,ht());T&&(i=i.updateImmediateChild(I,T))}));const d=i2(c,e);if(!d&&!e._queryParams.loadsAllData()){const y=Xu(e);xe(!t.queryToTagMap.has(y),"View does not exist, but we have a tag");const I=Bk();t.queryToTagMap.set(y,I),t.tagToQueryMap.set(I,y)}const f=Qu(t.pendingWriteTree_,s);let p=Ik(c,e,n,f,i,u);if(!d&&!o&&!r){const y=s2(c,e);p=p.concat(Uk(t,e,y))}return p}function nm(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,c)=>{const u=jn(o,e),d=Os(c,u);if(d)return d});return Yw(s,e,i,n,!0)}function Lk(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(d,f)=>{const p=jn(d,n);r=r||Os(f,p)});let s=t.syncPointTree_.get(n);s?r=r||Os(s,ht()):(s=new t2,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new Fs(r,!0,!1):null,c=Qu(t.pendingWriteTree_,e._path),u=n2(s,e,c,i?o.getNode():Fe.EMPTY_NODE,i);return wk(u)}function Oo(t,e){return l2(e,t.syncPointTree_,null,Qu(t.pendingWriteTree_,ht()))}function l2(t,e,n,r){if(nt(t.path))return c2(t,e,n,r);{const s=e.get(ht());n==null&&s!=null&&(n=Os(s,ht()));let i=[];const o=Je(t.path),c=t.operationForChild(o),u=e.children.get(o);if(u&&c){const d=n?n.getImmediateChild(o):null,f=Qw(r,o);i=i.concat(l2(c,u,d,f))}return s&&(i=i.concat(tm(s,t,r,n))),i}}function c2(t,e,n,r){const s=e.get(ht());n==null&&s!=null&&(n=Os(s,ht()));let i=[];return e.children.inorderTraversal((o,c)=>{const u=n?n.getImmediateChild(o):null,d=Qw(r,o),f=t.operationForChild(o);f&&(i=i.concat(c2(f,c,u,d)))}),s&&(i=i.concat(tm(s,t,r,n))),i}function u2(t,e){const n=e.query,r=rl(t,n);return{hashFn:()=>(vk(e)||Fe.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?Dk(t,n._path,r):Ok(t,n._path);{const i=OI(s,n);return wu(t,n,null,i)}}}}function rl(t,e){const n=Xu(e);return t.queryToTagMap.get(n)}function Xu(t){return t._path.toString()+"$"+t._queryIdentifier}function rm(t,e){return t.tagToQueryMap.get(e)}function sm(t){const e=t.indexOf("$");return xe(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new wt(t.substr(0,e))}}function im(t,e,n){const r=t.syncPointTree_.get(e);xe(r,"Missing sync point for query tag that we're tracking");const s=Qu(t.pendingWriteTree_,e);return tm(r,n,s,null)}function Fk(t){return t.fold((e,n,r)=>{if(n&&zs(n))return[Ju(n)];{let s=[];return n&&(s=r2(n)),yn(r,(i,o)=>{s=s.concat(o)}),s}})}function Sa(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Tk())(t._repo,t._path):t}function zk(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=Xu(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function Bk(){return Rk++}function Uk(t,e,n){const r=e._path,s=rl(t,e),i=u2(t,n),o=t.listenProvider_.startListening(Sa(e),s,i.hashFn,i.onComplete),c=t.syncPointTree_.subtree(r);if(s)xe(!zs(c.value),"If we're adding a query, it shouldn't be shadowed");else{const u=c.fold((d,f,p)=>{if(!nt(d)&&f&&zs(f))return[Ju(f).query];{let y=[];return f&&(y=y.concat(r2(f).map(I=>I.query))),yn(p,(I,w)=>{y=y.concat(w)}),y}});for(let d=0;d<u.length;++d){const f=u[d];t.listenProvider_.stopListening(Sa(f),rl(t,f))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new om(n)}node(){return this.node_}}class am{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Wt(this.path_,e);return new am(this.syncTree_,n)}node(){return nm(this.syncTree_,this.path_)}}const $k=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},gy=function(t,e,n){if(!t||typeof t!="object")return t;if(xe(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Wk(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Hk(t[".sv"],e);xe(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Wk=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:xe(!1,"Unexpected server value: "+t)}},Hk=function(t,e,n){t.hasOwnProperty("increment")||xe(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&xe(!1,"Unexpected increment value: "+r);const s=e.node();if(xe(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},d2=function(t,e,n,r){return lm(e,new am(n,t),r)},h2=function(t,e,n){return lm(t,new om(e),n)};function lm(t,e,n){const r=t.getPriority().val(),s=gy(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,c=gy(o.getValue(),e,n);return c!==o.getValue()||s!==o.getPriority().val()?new on(c,tn(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new on(s))),o.forEachChild(Ht,(c,u)=>{const d=lm(u,e.getImmediateChild(c),n);d!==u&&(i=i.updateImmediateChild(c,d))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function um(t,e){let n=e instanceof wt?e:new wt(e),r=t,s=Je(n);for(;s!==null;){const i=go(r.node.children,s)||{children:{},childCount:0};r=new cm(s,r,i),n=It(n),s=Je(n)}return r}function Do(t){return t.node.value}function f2(t,e){t.node.value=e,If(t)}function p2(t){return t.node.childCount>0}function Vk(t){return Do(t)===void 0&&!p2(t)}function Zu(t,e){yn(t.node.children,(n,r)=>{e(new cm(n,t,r))})}function m2(t,e,n,r){n&&e(t),Zu(t,s=>{m2(s,e,!0)})}function Gk(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Sl(t){return new wt(t.parent===null?t.name:Sl(t.parent)+"/"+t.name)}function If(t){t.parent!==null&&Kk(t.parent,t.name,t)}function Kk(t,e,n){const r=Vk(n),s=Lr(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,If(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,If(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qk=/[\[\].#$\/\u0000-\u001F\u007F]/,Yk=/[\[\].#$\u0000-\u001F\u007F]/,th=10*1024*1024,dm=function(t){return typeof t=="string"&&t.length!==0&&!qk.test(t)},g2=function(t){return typeof t=="string"&&t.length!==0&&!Yk.test(t)},Qk=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),g2(t)},Jk=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Fp(t)||t&&typeof t=="object"&&Lr(t,".sv")},y2=function(t,e,n,r){r&&e===void 0||ed(Gu(t,"value"),e,n)},ed=function(t,e,n){const r=n instanceof wt?new p6(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+ti(r));if(typeof e=="function")throw new Error(t+"contains a function "+ti(r)+" with contents = "+e.toString());if(Fp(e))throw new Error(t+"contains "+e.toString()+" "+ti(r));if(typeof e=="string"&&e.length>th/3&&Ku(e)>th)throw new Error(t+"contains a string greater than "+th+" utf8 bytes "+ti(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(yn(e,(o,c)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!dm(o)))throw new Error(t+" contains an invalid key ("+o+") "+ti(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);m6(r,o),ed(t,c,r),g6(r)}),s&&i)throw new Error(t+' contains ".value" child '+ti(r)+" in addition to actual children.")}},Xk=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const i=Xa(r);for(let o=0;o<i.length;o++)if(!(i[o]===".priority"&&o===i.length-1)){if(!dm(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(f6);let s=null;for(n=0;n<e.length;n++){if(r=e[n],s!==null&&Xn(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}},Zk=function(t,e,n,r){const s=Gu(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const i=[];yn(e,(o,c)=>{const u=new wt(o);if(ed(s,c,Wt(n,u)),Wp(u)===".priority"&&!Jk(c))throw new Error(s+"contains an invalid value for '"+u.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");i.push(u)}),Xk(s,i)},x2=function(t,e,n,r){if(!g2(n))throw new Error(Gu(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},e3=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),x2(t,e,n)},v2=function(t,e){if(Je(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},t3=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!dm(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Qk(n))throw new Error(Gu(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function td(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!Hp(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function w2(t,e,n){td(t,n),_2(t,r=>Hp(r,e))}function nr(t,e,n){td(t,n),_2(t,r=>Xn(r,e)||Xn(e,r))}function _2(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(r3(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function r3(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();va&&pn("event: "+n.toString()),Po(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s3="repo_interrupt",i3=25;class o3{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new n3,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=hu(),this.transactionQueueTree_=new cm,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function a3(t,e,n){if(t.stats_=Up(t.repoInfo_),t.forceRestClient_||FI())t.server_=new du(t.repoInfo_,(r,s,i,o)=>{yy(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>xy(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{nn(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Kr(t.repoInfo_,e,(r,s,i,o)=>{yy(t,r,s,i,o)},r=>{xy(t,r)},r=>{l3(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=WI(t.repoInfo_,()=>new $6(t.stats_,t.server_)),t.infoData_=new L6,t.infoSyncTree_=new my({startListening:(r,s,i,o)=>{let c=[];const u=t.infoData_.getNode(r._path);return u.isEmpty()||(c=bl(t.infoSyncTree_,r._path,u),setTimeout(()=>{o("ok")},0)),c},stopListening:()=>{}}),hm(t,"connected",!1),t.serverSyncTree_=new my({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(c,u)=>{const d=o(c,u);nr(t.eventQueue_,r._path,d)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function b2(t){const n=t.infoData_.getNode(new wt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function nd(t){return $k({timestamp:b2(t)})}function yy(t,e,n,r,s){t.dataUpdateCount++;const i=new wt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const u=au(n,d=>tn(d));o=Mk(t.serverSyncTree_,i,u,s)}else{const u=tn(n);o=a2(t.serverSyncTree_,i,u,s)}else if(r){const u=au(n,d=>tn(d));o=Pk(t.serverSyncTree_,i,u)}else{const u=tn(n);o=bl(t.serverSyncTree_,i,u)}let c=i;o.length>0&&(c=bo(t,i)),nr(t.eventQueue_,c,o)}function xy(t,e){hm(t,"connected",e),e===!1&&h3(t)}function l3(t,e){yn(e,(n,r)=>{hm(t,n,r)})}function hm(t,e,n){const r=new wt("/.info/"+e),s=tn(n);t.infoData_.updateSnapshot(r,s);const i=bl(t.infoSyncTree_,r,s);nr(t.eventQueue_,r,i)}function fm(t){return t.nextWriteId_++}function c3(t,e,n){const r=Lk(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=tn(s).withIndex(e._queryParams.getIndex());Ef(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=bl(t.serverSyncTree_,e._path,i);else{const c=rl(t.serverSyncTree_,e);o=a2(t.serverSyncTree_,e._path,i,c)}return nr(t.eventQueue_,e._path,o),wu(t.serverSyncTree_,e,n,null,!0),i},s=>(Cl(t,"get for query "+nn(e)+" failed: "+s),Promise.reject(new Error(s))))}function u3(t,e,n,r,s){Cl(t,"set",{path:e.toString(),value:n,priority:r});const i=nd(t),o=tn(n,r),c=nm(t.serverSyncTree_,e),u=h2(o,c,i),d=fm(t),f=o2(t.serverSyncTree_,e,u,d,!0);td(t.eventQueue_,f),t.server_.put(e.toString(),o.val(!0),(y,I)=>{const w=y==="ok";w||In("set at "+e+" failed: "+y);const T=_s(t.serverSyncTree_,d,!w);nr(t.eventQueue_,e,T),kf(t,s,y,I)});const p=mm(t,e);bo(t,p),nr(t.eventQueue_,p,[])}function d3(t,e,n,r){Cl(t,"update",{path:e.toString(),value:n});let s=!0;const i=nd(t),o={};if(yn(n,(c,u)=>{s=!1,o[c]=d2(Wt(e,c),tn(u),t.serverSyncTree_,i)}),s)pn("update() called with empty data.  Don't do anything."),kf(t,r,"ok",void 0);else{const c=fm(t),u=Ak(t.serverSyncTree_,e,o,c);td(t.eventQueue_,u),t.server_.merge(e.toString(),n,(d,f)=>{const p=d==="ok";p||In("update at "+e+" failed: "+d);const y=_s(t.serverSyncTree_,c,!p),I=y.length>0?bo(t,e):e;nr(t.eventQueue_,I,y),kf(t,r,d,f)}),yn(n,d=>{const f=mm(t,Wt(e,d));bo(t,f)}),nr(t.eventQueue_,e,[])}}function h3(t){Cl(t,"onDisconnectEvents");const e=nd(t),n=hu();wf(t.onDisconnect_,ht(),(s,i)=>{const o=d2(s,i,t.serverSyncTree_,e);Vw(n,s,o)});let r=[];wf(n,ht(),(s,i)=>{r=r.concat(bl(t.serverSyncTree_,s,i));const o=mm(t,s);bo(t,o)}),t.onDisconnect_=hu(),nr(t.eventQueue_,ht(),r)}function f3(t,e,n){let r;Je(e._path)===".info"?r=Ef(t.infoSyncTree_,e,n):r=Ef(t.serverSyncTree_,e,n),w2(t.eventQueue_,e._path,r)}function S2(t,e,n){let r;Je(e._path)===".info"?r=wu(t.infoSyncTree_,e,n):r=wu(t.serverSyncTree_,e,n),w2(t.eventQueue_,e._path,r)}function p3(t){t.persistentConnection_&&t.persistentConnection_.interrupt(s3)}function Cl(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),pn(n,...e)}function kf(t,e,n,r){e&&Po(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function C2(t,e,n){return nm(t.serverSyncTree_,e,n)||Fe.EMPTY_NODE}function pm(t,e=t.transactionQueueTree_){if(e||rd(t,e),Do(e)){const n=E2(t,e);xe(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&m3(t,Sl(e),n)}else p2(e)&&Zu(e,n=>{pm(t,n)})}function m3(t,e,n){const r=n.map(d=>d.currentWriteId),s=C2(t,e,r);let i=s;const o=s.hash();for(let d=0;d<n.length;d++){const f=n[d];xe(f.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=1,f.retryCount++;const p=jn(e,f.path);i=i.updateChild(p,f.currentOutputSnapshotRaw)}const c=i.val(!0),u=e;t.server_.put(u.toString(),c,d=>{Cl(t,"transaction put response",{path:u.toString(),status:d});let f=[];if(d==="ok"){const p=[];for(let y=0;y<n.length;y++)n[y].status=2,f=f.concat(_s(t.serverSyncTree_,n[y].currentWriteId)),n[y].onComplete&&p.push(()=>n[y].onComplete(null,!0,n[y].currentOutputSnapshotResolved)),n[y].unwatcher();rd(t,um(t.transactionQueueTree_,e)),pm(t,t.transactionQueueTree_),nr(t.eventQueue_,e,f);for(let y=0;y<p.length;y++)Po(p[y])}else{if(d==="datastale")for(let p=0;p<n.length;p++)n[p].status===3?n[p].status=4:n[p].status=0;else{In("transaction at "+u.toString()+" failed: "+d);for(let p=0;p<n.length;p++)n[p].status=4,n[p].abortReason=d}bo(t,e)}},o)}function bo(t,e){const n=j2(t,e),r=Sl(n),s=E2(t,n);return g3(t,s,r),r}function g3(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(c=>c.status===0).map(c=>c.currentWriteId);for(let c=0;c<e.length;c++){const u=e[c],d=jn(n,u.path);let f=!1,p;if(xe(d!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===4)f=!0,p=u.abortReason,s=s.concat(_s(t.serverSyncTree_,u.currentWriteId,!0));else if(u.status===0)if(u.retryCount>=i3)f=!0,p="maxretry",s=s.concat(_s(t.serverSyncTree_,u.currentWriteId,!0));else{const y=C2(t,u.path,o);u.currentInputSnapshot=y;const I=e[c].update(y.val());if(I!==void 0){ed("transaction failed: Data returned ",I,u.path);let w=tn(I);typeof I=="object"&&I!=null&&Lr(I,".priority")||(w=w.updatePriority(y.getPriority()));const A=u.currentWriteId,S=nd(t),_=h2(w,y,S);u.currentOutputSnapshotRaw=w,u.currentOutputSnapshotResolved=_,u.currentWriteId=fm(t),o.splice(o.indexOf(A),1),s=s.concat(o2(t.serverSyncTree_,u.path,_,u.currentWriteId,u.applyLocally)),s=s.concat(_s(t.serverSyncTree_,A,!0))}else f=!0,p="nodata",s=s.concat(_s(t.serverSyncTree_,u.currentWriteId,!0))}nr(t.eventQueue_,n,s),s=[],f&&(e[c].status=2,function(y){setTimeout(y,Math.floor(0))}(e[c].unwatcher),e[c].onComplete&&(p==="nodata"?r.push(()=>e[c].onComplete(null,!1,e[c].currentInputSnapshot)):r.push(()=>e[c].onComplete(new Error(p),!1,null))))}rd(t,t.transactionQueueTree_);for(let c=0;c<r.length;c++)Po(r[c]);pm(t,t.transactionQueueTree_)}function j2(t,e){let n,r=t.transactionQueueTree_;for(n=Je(e);n!==null&&Do(r)===void 0;)r=um(r,n),e=It(e),n=Je(e);return r}function E2(t,e){const n=[];return I2(t,e,n),n.sort((r,s)=>r.order-s.order),n}function I2(t,e,n){const r=Do(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);Zu(e,s=>{I2(t,s,n)})}function rd(t,e){const n=Do(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,f2(e,n.length>0?n:void 0)}Zu(e,r=>{rd(t,r)})}function mm(t,e){const n=Sl(j2(t,e)),r=um(t.transactionQueueTree_,e);return Gk(r,s=>{nh(t,s)}),nh(t,r),m2(r,s=>{nh(t,s)}),n}function nh(t,e){const n=Do(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(xe(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(xe(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(_s(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?f2(e,void 0):n.length=i+1,nr(t.eventQueue_,Sl(e),s);for(let o=0;o<r.length;o++)Po(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y3(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function x3(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):In(`Invalid query segment '${n}' in query '${t}'`)}return e}const vy=function(t,e){const n=v3(t),r=n.namespace;n.domain==="firebase.com"&&es(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&es("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||NI();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new kw(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new wt(n.pathString)}},v3=function(t){let e="",n="",r="",s="",i="",o=!0,c="https",u=443;if(typeof t=="string"){let d=t.indexOf("//");d>=0&&(c=t.substring(0,d-1),t=t.substring(d+2));let f=t.indexOf("/");f===-1&&(f=t.length);let p=t.indexOf("?");p===-1&&(p=t.length),e=t.substring(0,Math.min(f,p)),f<p&&(s=y3(t.substring(f,p)));const y=x3(t.substring(Math.min(t.length,p)));d=e.indexOf(":"),d>=0?(o=c==="https"||c==="wss",u=parseInt(e.substring(d+1),10)):d=e.length;const I=e.slice(0,d);if(I.toLowerCase()==="localhost")n="localhost";else if(I.split(".").length<=2)n=I;else{const w=e.indexOf(".");r=e.substring(0,w).toLowerCase(),n=e.substring(w+1),i=r}"ns"in y&&(i=y.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:o,scheme:c,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",w3=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let s;const i=new Array(8);for(s=7;s>=0;s--)i[s]=wy.charAt(n%64),n=Math.floor(n/64);xe(n===0,"Cannot push at time == 0");let o=i.join("");if(r){for(s=11;s>=0&&e[s]===63;s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(Math.random()*64);for(s=0;s<12;s++)o+=wy.charAt(e[s]);return xe(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+nn(this.snapshot.exportVal())}}class b3{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return xe(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return nt(this._path)?null:Wp(this._path)}get ref(){return new is(this._repo,this._path)}get _queryIdentifier(){const e=iy(this._queryParams),n=zp(e);return n==="{}"?"default":n}get _queryObject(){return iy(this._queryParams)}isEqual(e){if(e=Ii(e),!(e instanceof gm))return!1;const n=this._repo===e._repo,r=Hp(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+h6(this._path)}}class is extends gm{constructor(e,n){super(e,n,new qp,!1)}get parent(){const e=Lw(this._path);return e===null?null:new is(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class sl{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new wt(e),r=Si(this.ref,e);return new sl(this._node.getChild(n),r,Ht)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new sl(s,Si(this.ref,r),Ht)))}hasChild(e){const n=new wt(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Pt(t,e){return t=Ii(t),t._checkNotDeleted("ref"),e!==void 0?Si(t._root,e):t._root}function Si(t,e){return t=Ii(t),Je(t._path)===null?e3("child","path",e):x2("child","path",e),new is(t._repo,Wt(t._path,e))}function S3(t,e){t=Ii(t),v2("push",t._path),y2("push",e,t._path,!0);const n=b2(t._repo),r=w3(n),s=Si(t,r),i=Si(t,r);let o;return e!=null?o=N2(i,e).then(()=>i):o=Promise.resolve(i),s.then=o.then.bind(o),s.catch=o.then.bind(o,void 0),s}function N2(t,e){t=Ii(t),v2("set",t._path),y2("set",e,t._path,!1);const n=new xl;return u3(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Er(t,e){Zk("update",e,t._path);const n=new xl;return d3(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function Ca(t){t=Ii(t);const e=new k2(()=>{}),n=new sd(e);return c3(t._repo,t,n).then(r=>new sl(r,new is(t._repo,t._path),t._queryParams.getIndex()))}class sd{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new _3("value",this,new sl(e.snapshotNode,new is(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new b3(this,e,n):null}matches(e){return e instanceof sd?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function C3(t,e,n,r,s){const i=new k2(n,void 0),o=new sd(i);return f3(t._repo,t,o),()=>S2(t._repo,t,o)}function so(t,e,n,r){return C3(t,"value",e)}function T2(t,e,n){S2(t._repo,t,null)}Ck(is);Nk(is);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j3="FIREBASE_DATABASE_EMULATOR_HOST",Nf={};let E3=!1;function I3(t,e,n,r){const s=e.lastIndexOf(":"),i=e.substring(0,s),o=Vu(i);t.repoInfo_=new kw(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(t.authTokenProvider_=r)}function k3(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||es("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),pn("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=vy(i,s),c=o.repoInfo,u;typeof process<"u"&&U0&&(u=U0[j3]),u?(i=`http://${u}?ns=${c.namespace}`,o=vy(i,s),c=o.repoInfo):o.repoInfo.secure;const d=new BI(t.name,t.options,e);t3("Invalid Firebase Database URL",o),nt(o.path)||es("Database URL must point to the root of a Firebase Database (not including a child path).");const f=T3(c,t,d,new zI(t,n));return new R3(f,t)}function N3(t,e){const n=Nf[e];(!n||n[t.key]!==t)&&es(`Database ${e}(${t.repoInfo_}) has already been deleted.`),p3(t),delete n[t.key]}function T3(t,e,n,r){let s=Nf[e.name];s||(s={},Nf[e.name]=s);let i=s[t.toURLString()];return i&&es("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new o3(t,E3,n,r),s[t.toURLString()]=i,i}class R3{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(a3(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new is(this._repo,ht())),this._rootInternal}_delete(){return this._rootInternal!==null&&(N3(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&es("Cannot call "+e+" on a deleted database.")}}function R2(t=dw(),e){const n=aw(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=Jv("database");r&&A3(n,...r)}return n}function A3(t,e,n,r={}){t=Ii(t),t._checkNotDeleted("useEmulator");const s=`${e}:${n}`,i=t._repoInternal;if(t._instanceStarted){if(s===t._repoInternal.repoInfo_.host&&Ka(r,i.repoInfo_.emulatorOptions))return;es("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&es('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Nc(Nc.OWNER);else if(r.mockUserToken){const c=typeof r.mockUserToken=="string"?r.mockUserToken:ew(r.mockUserToken,t.app.options.projectId);o=new Nc(c)}Vu(e)&&(Zv(e),tw("Database",!0)),I3(i,s,r,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P3(t){SI(cw),Ya(new yo("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return k3(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),As($0,W0,t),As($0,W0,"esm2020")}Kr.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Kr.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};P3();var _y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ym;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,x){function C(){}C.prototype=x.prototype,E.F=x.prototype,E.prototype=new C,E.prototype.constructor=E,E.D=function(k,N,R){for(var j=Array(arguments.length-2),re=2;re<arguments.length;re++)j[re-2]=arguments[re];return x.prototype[N].apply(k,j)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,x,C){C||(C=0);const k=Array(16);if(typeof x=="string")for(var N=0;N<16;++N)k[N]=x.charCodeAt(C++)|x.charCodeAt(C++)<<8|x.charCodeAt(C++)<<16|x.charCodeAt(C++)<<24;else for(N=0;N<16;++N)k[N]=x[C++]|x[C++]<<8|x[C++]<<16|x[C++]<<24;x=E.g[0],C=E.g[1],N=E.g[2];let R=E.g[3],j;j=x+(R^C&(N^R))+k[0]+3614090360&4294967295,x=C+(j<<7&4294967295|j>>>25),j=R+(N^x&(C^N))+k[1]+3905402710&4294967295,R=x+(j<<12&4294967295|j>>>20),j=N+(C^R&(x^C))+k[2]+606105819&4294967295,N=R+(j<<17&4294967295|j>>>15),j=C+(x^N&(R^x))+k[3]+3250441966&4294967295,C=N+(j<<22&4294967295|j>>>10),j=x+(R^C&(N^R))+k[4]+4118548399&4294967295,x=C+(j<<7&4294967295|j>>>25),j=R+(N^x&(C^N))+k[5]+1200080426&4294967295,R=x+(j<<12&4294967295|j>>>20),j=N+(C^R&(x^C))+k[6]+2821735955&4294967295,N=R+(j<<17&4294967295|j>>>15),j=C+(x^N&(R^x))+k[7]+4249261313&4294967295,C=N+(j<<22&4294967295|j>>>10),j=x+(R^C&(N^R))+k[8]+1770035416&4294967295,x=C+(j<<7&4294967295|j>>>25),j=R+(N^x&(C^N))+k[9]+2336552879&4294967295,R=x+(j<<12&4294967295|j>>>20),j=N+(C^R&(x^C))+k[10]+4294925233&4294967295,N=R+(j<<17&4294967295|j>>>15),j=C+(x^N&(R^x))+k[11]+2304563134&4294967295,C=N+(j<<22&4294967295|j>>>10),j=x+(R^C&(N^R))+k[12]+1804603682&4294967295,x=C+(j<<7&4294967295|j>>>25),j=R+(N^x&(C^N))+k[13]+4254626195&4294967295,R=x+(j<<12&4294967295|j>>>20),j=N+(C^R&(x^C))+k[14]+2792965006&4294967295,N=R+(j<<17&4294967295|j>>>15),j=C+(x^N&(R^x))+k[15]+1236535329&4294967295,C=N+(j<<22&4294967295|j>>>10),j=x+(N^R&(C^N))+k[1]+4129170786&4294967295,x=C+(j<<5&4294967295|j>>>27),j=R+(C^N&(x^C))+k[6]+3225465664&4294967295,R=x+(j<<9&4294967295|j>>>23),j=N+(x^C&(R^x))+k[11]+643717713&4294967295,N=R+(j<<14&4294967295|j>>>18),j=C+(R^x&(N^R))+k[0]+3921069994&4294967295,C=N+(j<<20&4294967295|j>>>12),j=x+(N^R&(C^N))+k[5]+3593408605&4294967295,x=C+(j<<5&4294967295|j>>>27),j=R+(C^N&(x^C))+k[10]+38016083&4294967295,R=x+(j<<9&4294967295|j>>>23),j=N+(x^C&(R^x))+k[15]+3634488961&4294967295,N=R+(j<<14&4294967295|j>>>18),j=C+(R^x&(N^R))+k[4]+3889429448&4294967295,C=N+(j<<20&4294967295|j>>>12),j=x+(N^R&(C^N))+k[9]+568446438&4294967295,x=C+(j<<5&4294967295|j>>>27),j=R+(C^N&(x^C))+k[14]+3275163606&4294967295,R=x+(j<<9&4294967295|j>>>23),j=N+(x^C&(R^x))+k[3]+4107603335&4294967295,N=R+(j<<14&4294967295|j>>>18),j=C+(R^x&(N^R))+k[8]+1163531501&4294967295,C=N+(j<<20&4294967295|j>>>12),j=x+(N^R&(C^N))+k[13]+2850285829&4294967295,x=C+(j<<5&4294967295|j>>>27),j=R+(C^N&(x^C))+k[2]+4243563512&4294967295,R=x+(j<<9&4294967295|j>>>23),j=N+(x^C&(R^x))+k[7]+1735328473&4294967295,N=R+(j<<14&4294967295|j>>>18),j=C+(R^x&(N^R))+k[12]+2368359562&4294967295,C=N+(j<<20&4294967295|j>>>12),j=x+(C^N^R)+k[5]+4294588738&4294967295,x=C+(j<<4&4294967295|j>>>28),j=R+(x^C^N)+k[8]+2272392833&4294967295,R=x+(j<<11&4294967295|j>>>21),j=N+(R^x^C)+k[11]+1839030562&4294967295,N=R+(j<<16&4294967295|j>>>16),j=C+(N^R^x)+k[14]+4259657740&4294967295,C=N+(j<<23&4294967295|j>>>9),j=x+(C^N^R)+k[1]+2763975236&4294967295,x=C+(j<<4&4294967295|j>>>28),j=R+(x^C^N)+k[4]+1272893353&4294967295,R=x+(j<<11&4294967295|j>>>21),j=N+(R^x^C)+k[7]+4139469664&4294967295,N=R+(j<<16&4294967295|j>>>16),j=C+(N^R^x)+k[10]+3200236656&4294967295,C=N+(j<<23&4294967295|j>>>9),j=x+(C^N^R)+k[13]+681279174&4294967295,x=C+(j<<4&4294967295|j>>>28),j=R+(x^C^N)+k[0]+3936430074&4294967295,R=x+(j<<11&4294967295|j>>>21),j=N+(R^x^C)+k[3]+3572445317&4294967295,N=R+(j<<16&4294967295|j>>>16),j=C+(N^R^x)+k[6]+76029189&4294967295,C=N+(j<<23&4294967295|j>>>9),j=x+(C^N^R)+k[9]+3654602809&4294967295,x=C+(j<<4&4294967295|j>>>28),j=R+(x^C^N)+k[12]+3873151461&4294967295,R=x+(j<<11&4294967295|j>>>21),j=N+(R^x^C)+k[15]+530742520&4294967295,N=R+(j<<16&4294967295|j>>>16),j=C+(N^R^x)+k[2]+3299628645&4294967295,C=N+(j<<23&4294967295|j>>>9),j=x+(N^(C|~R))+k[0]+4096336452&4294967295,x=C+(j<<6&4294967295|j>>>26),j=R+(C^(x|~N))+k[7]+1126891415&4294967295,R=x+(j<<10&4294967295|j>>>22),j=N+(x^(R|~C))+k[14]+2878612391&4294967295,N=R+(j<<15&4294967295|j>>>17),j=C+(R^(N|~x))+k[5]+4237533241&4294967295,C=N+(j<<21&4294967295|j>>>11),j=x+(N^(C|~R))+k[12]+1700485571&4294967295,x=C+(j<<6&4294967295|j>>>26),j=R+(C^(x|~N))+k[3]+2399980690&4294967295,R=x+(j<<10&4294967295|j>>>22),j=N+(x^(R|~C))+k[10]+4293915773&4294967295,N=R+(j<<15&4294967295|j>>>17),j=C+(R^(N|~x))+k[1]+2240044497&4294967295,C=N+(j<<21&4294967295|j>>>11),j=x+(N^(C|~R))+k[8]+1873313359&4294967295,x=C+(j<<6&4294967295|j>>>26),j=R+(C^(x|~N))+k[15]+4264355552&4294967295,R=x+(j<<10&4294967295|j>>>22),j=N+(x^(R|~C))+k[6]+2734768916&4294967295,N=R+(j<<15&4294967295|j>>>17),j=C+(R^(N|~x))+k[13]+1309151649&4294967295,C=N+(j<<21&4294967295|j>>>11),j=x+(N^(C|~R))+k[4]+4149444226&4294967295,x=C+(j<<6&4294967295|j>>>26),j=R+(C^(x|~N))+k[11]+3174756917&4294967295,R=x+(j<<10&4294967295|j>>>22),j=N+(x^(R|~C))+k[2]+718787259&4294967295,N=R+(j<<15&4294967295|j>>>17),j=C+(R^(N|~x))+k[9]+3951481745&4294967295,E.g[0]=E.g[0]+x&4294967295,E.g[1]=E.g[1]+(N+(j<<21&4294967295|j>>>11))&4294967295,E.g[2]=E.g[2]+N&4294967295,E.g[3]=E.g[3]+R&4294967295}r.prototype.v=function(E,x){x===void 0&&(x=E.length);const C=x-this.blockSize,k=this.C;let N=this.h,R=0;for(;R<x;){if(N==0)for(;R<=C;)s(this,E,R),R+=this.blockSize;if(typeof E=="string"){for(;R<x;)if(k[N++]=E.charCodeAt(R++),N==this.blockSize){s(this,k),N=0;break}}else for(;R<x;)if(k[N++]=E[R++],N==this.blockSize){s(this,k),N=0;break}}this.h=N,this.o+=x},r.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var x=1;x<E.length-8;++x)E[x]=0;x=this.o*8;for(var C=E.length-8;C<E.length;++C)E[C]=x&255,x/=256;for(this.v(E),E=Array(16),x=0,C=0;C<4;++C)for(let k=0;k<32;k+=8)E[x++]=this.g[C]>>>k&255;return E};function i(E,x){var C=c;return Object.prototype.hasOwnProperty.call(C,E)?C[E]:C[E]=x(E)}function o(E,x){this.h=x;const C=[];let k=!0;for(let N=E.length-1;N>=0;N--){const R=E[N]|0;k&&R==x||(C[N]=R,k=!1)}this.g=C}var c={};function u(E){return-128<=E&&E<128?i(E,function(x){return new o([x|0],x<0?-1:0)}):new o([E|0],E<0?-1:0)}function d(E){if(isNaN(E)||!isFinite(E))return p;if(E<0)return A(d(-E));const x=[];let C=1;for(let k=0;E>=C;k++)x[k]=E/C|0,C*=4294967296;return new o(x,0)}function f(E,x){if(E.length==0)throw Error("number format error: empty string");if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(E.charAt(0)=="-")return A(f(E.substring(1),x));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=d(Math.pow(x,8));let k=p;for(let R=0;R<E.length;R+=8){var N=Math.min(8,E.length-R);const j=parseInt(E.substring(R,R+N),x);N<8?(N=d(Math.pow(x,N)),k=k.j(N).add(d(j))):(k=k.j(C),k=k.add(d(j)))}return k}var p=u(0),y=u(1),I=u(16777216);t=o.prototype,t.m=function(){if(T(this))return-A(this).m();let E=0,x=1;for(let C=0;C<this.g.length;C++){const k=this.i(C);E+=(k>=0?k:4294967296+k)*x,x*=4294967296}return E},t.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(w(this))return"0";if(T(this))return"-"+A(this).toString(E);const x=d(Math.pow(E,6));var C=this;let k="";for(;;){const N=O(C,x).g;C=S(C,N.j(x));let R=((C.g.length>0?C.g[0]:C.h)>>>0).toString(E);if(C=N,w(C))return R+k;for(;R.length<6;)R="0"+R;k=R+k}},t.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function w(E){if(E.h!=0)return!1;for(let x=0;x<E.g.length;x++)if(E.g[x]!=0)return!1;return!0}function T(E){return E.h==-1}t.l=function(E){return E=S(this,E),T(E)?-1:w(E)?0:1};function A(E){const x=E.g.length,C=[];for(let k=0;k<x;k++)C[k]=~E.g[k];return new o(C,~E.h).add(y)}t.abs=function(){return T(this)?A(this):this},t.add=function(E){const x=Math.max(this.g.length,E.g.length),C=[];let k=0;for(let N=0;N<=x;N++){let R=k+(this.i(N)&65535)+(E.i(N)&65535),j=(R>>>16)+(this.i(N)>>>16)+(E.i(N)>>>16);k=j>>>16,R&=65535,j&=65535,C[N]=j<<16|R}return new o(C,C[C.length-1]&-2147483648?-1:0)};function S(E,x){return E.add(A(x))}t.j=function(E){if(w(this)||w(E))return p;if(T(this))return T(E)?A(this).j(A(E)):A(A(this).j(E));if(T(E))return A(this.j(A(E)));if(this.l(I)<0&&E.l(I)<0)return d(this.m()*E.m());const x=this.g.length+E.g.length,C=[];for(var k=0;k<2*x;k++)C[k]=0;for(k=0;k<this.g.length;k++)for(let N=0;N<E.g.length;N++){const R=this.i(k)>>>16,j=this.i(k)&65535,re=E.i(N)>>>16,Ee=E.i(N)&65535;C[2*k+2*N]+=j*Ee,_(C,2*k+2*N),C[2*k+2*N+1]+=R*Ee,_(C,2*k+2*N+1),C[2*k+2*N+1]+=j*re,_(C,2*k+2*N+1),C[2*k+2*N+2]+=R*re,_(C,2*k+2*N+2)}for(E=0;E<x;E++)C[E]=C[2*E+1]<<16|C[2*E];for(E=x;E<2*x;E++)C[E]=0;return new o(C,0)};function _(E,x){for(;(E[x]&65535)!=E[x];)E[x+1]+=E[x]>>>16,E[x]&=65535,x++}function v(E,x){this.g=E,this.h=x}function O(E,x){if(w(x))throw Error("division by zero");if(w(E))return new v(p,p);if(T(E))return x=O(A(E),x),new v(A(x.g),A(x.h));if(T(x))return x=O(E,A(x)),new v(A(x.g),x.h);if(E.g.length>30){if(T(E)||T(x))throw Error("slowDivide_ only works with positive integers.");for(var C=y,k=x;k.l(E)<=0;)C=G(C),k=G(k);var N=oe(C,1),R=oe(k,1);for(k=oe(k,2),C=oe(C,2);!w(k);){var j=R.add(k);j.l(E)<=0&&(N=N.add(C),R=j),k=oe(k,1),C=oe(C,1)}return x=S(E,N.j(x)),new v(N,x)}for(N=p;E.l(x)>=0;){for(C=Math.max(1,Math.floor(E.m()/x.m())),k=Math.ceil(Math.log(C)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),R=d(C),j=R.j(x);T(j)||j.l(E)>0;)C-=k,R=d(C),j=R.j(x);w(R)&&(R=y),N=N.add(R),E=S(E,j)}return new v(N,E)}t.B=function(E){return O(this,E).h},t.and=function(E){const x=Math.max(this.g.length,E.g.length),C=[];for(let k=0;k<x;k++)C[k]=this.i(k)&E.i(k);return new o(C,this.h&E.h)},t.or=function(E){const x=Math.max(this.g.length,E.g.length),C=[];for(let k=0;k<x;k++)C[k]=this.i(k)|E.i(k);return new o(C,this.h|E.h)},t.xor=function(E){const x=Math.max(this.g.length,E.g.length),C=[];for(let k=0;k<x;k++)C[k]=this.i(k)^E.i(k);return new o(C,this.h^E.h)};function G(E){const x=E.g.length+1,C=[];for(let k=0;k<x;k++)C[k]=E.i(k)<<1|E.i(k-1)>>>31;return new o(C,E.h)}function oe(E,x){const C=x>>5;x%=32;const k=E.g.length-C,N=[];for(let R=0;R<k;R++)N[R]=x>0?E.i(R+C)>>>x|E.i(R+C+1)<<32-x:E.i(R+C);return new o(N,E.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,ym=o}).apply(typeof _y<"u"?_y:typeof self<"u"?self:typeof window<"u"?window:{});var lc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var t,e=Object.defineProperty;function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof lc=="object"&&lc];for(var h=0;h<l.length;++h){var m=l[h];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(l,h){if(h)e:{var m=r;l=l.split(".");for(var b=0;b<l.length-1;b++){var W=l[b];if(!(W in m))break e;m=m[W]}l=l[l.length-1],b=m[l],h=h(b),h!=b&&h!=null&&e(m,l,{configurable:!0,writable:!0,value:h})}}s("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(l){return l||function(h){var m=[],b;for(b in h)Object.prototype.hasOwnProperty.call(h,b)&&m.push([b,h[b]]);return m}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function c(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function u(l,h,m){return l.call.apply(l.bind,arguments)}function d(l,h,m){return d=u,d.apply(null,arguments)}function f(l,h){var m=Array.prototype.slice.call(arguments,1);return function(){var b=m.slice();return b.push.apply(b,arguments),l.apply(this,b)}}function p(l,h){function m(){}m.prototype=h.prototype,l.Z=h.prototype,l.prototype=new m,l.prototype.constructor=l,l.Ob=function(b,W,Y){for(var Se=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)Se[Qe-2]=arguments[Qe];return h.prototype[W].apply(b,Se)}}var y=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function I(l){const h=l.length;if(h>0){const m=Array(h);for(let b=0;b<h;b++)m[b]=l[b];return m}return[]}function w(l,h){for(let b=1;b<arguments.length;b++){const W=arguments[b];var m=typeof W;if(m=m!="object"?m:W?Array.isArray(W)?"array":m:"null",m=="array"||m=="object"&&typeof W.length=="number"){m=l.length||0;const Y=W.length||0;l.length=m+Y;for(let Se=0;Se<Y;Se++)l[m+Se]=W[Se]}else l.push(W)}}class T{constructor(h,m){this.i=h,this.j=m,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function A(l){o.setTimeout(()=>{throw l},0)}function S(){var l=E;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class _{constructor(){this.h=this.g=null}add(h,m){const b=v.get();b.set(h,m),this.h?this.h.next=b:this.g=b,this.h=b}}var v=new T(()=>new O,l=>l.reset());class O{constructor(){this.next=this.g=this.h=null}set(h,m){this.h=h,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let G,oe=!1,E=new _,x=()=>{const l=Promise.resolve(void 0);G=()=>{l.then(C)}};function C(){for(var l;l=S();){try{l.h.call(l.g)}catch(m){A(m)}var h=v;h.j(l),h.h<100&&(h.h++,l.next=h.g,h.g=l)}oe=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const m=()=>{};o.addEventListener("test",m,h),o.removeEventListener("test",m,h)}catch{}return l}();function j(l){return/^[\s\xa0]*$/.test(l)}function re(l,h){N.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,h)}p(re,N),re.prototype.init=function(l,h){const m=this.type=l.type,b=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget,h||(m=="mouseover"?h=l.fromElement:m=="mouseout"&&(h=l.toElement)),this.relatedTarget=h,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&re.Z.h.call(this)},re.prototype.h=function(){re.Z.h.call(this);const l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Ee="closure_listenable_"+(Math.random()*1e6|0),J=0;function Ce(l,h,m,b,W){this.listener=l,this.proxy=null,this.src=h,this.type=m,this.capture=!!b,this.ha=W,this.key=++J,this.da=this.fa=!1}function Z(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function K(l,h,m){for(const b in l)h.call(m,l[b],b,l)}function ae(l,h){for(const m in l)h.call(void 0,l[m],m,l)}function H(l){const h={};for(const m in l)h[m]=l[m];return h}const ue="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ie(l,h){let m,b;for(let W=1;W<arguments.length;W++){b=arguments[W];for(m in b)l[m]=b[m];for(let Y=0;Y<ue.length;Y++)m=ue[Y],Object.prototype.hasOwnProperty.call(b,m)&&(l[m]=b[m])}}function _e(l){this.src=l,this.g={},this.h=0}_e.prototype.add=function(l,h,m,b,W){const Y=l.toString();l=this.g[Y],l||(l=this.g[Y]=[],this.h++);const Se=z(l,h,b,W);return Se>-1?(h=l[Se],m||(h.fa=!1)):(h=new Ce(h,this.src,Y,!!b,W),h.fa=m,l.push(h)),h};function me(l,h){const m=h.type;if(m in l.g){var b=l.g[m],W=Array.prototype.indexOf.call(b,h,void 0),Y;(Y=W>=0)&&Array.prototype.splice.call(b,W,1),Y&&(Z(h),l.g[m].length==0&&(delete l.g[m],l.h--))}}function z(l,h,m,b){for(let W=0;W<l.length;++W){const Y=l[W];if(!Y.da&&Y.listener==h&&Y.capture==!!m&&Y.ha==b)return W}return-1}var pe="closure_lm_"+(Math.random()*1e6|0),F={};function Te(l,h,m,b,W){if(Array.isArray(h)){for(let Y=0;Y<h.length;Y++)Te(l,h[Y],m,b,W);return null}return m=P(m),l&&l[Ee]?l.J(h,m,c(b)?!!b.capture:!1,W):se(l,h,m,!1,b,W)}function se(l,h,m,b,W,Y){if(!h)throw Error("Invalid event type");const Se=c(W)?!!W.capture:!!W;let Qe=X(l);if(Qe||(l[pe]=Qe=new _e(l)),m=Qe.add(h,m,b,Se,Y),m.proxy)return m;if(b=ve(),m.proxy=b,b.src=l,b.listener=m,l.addEventListener)R||(W=Se),W===void 0&&(W=!1),l.addEventListener(h.toString(),b,W);else if(l.attachEvent)l.attachEvent(le(h.toString()),b);else if(l.addListener&&l.removeListener)l.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return m}function ve(){function l(m){return h.call(l.src,l.listener,m)}const h=B;return l}function V(l,h,m,b,W){if(Array.isArray(h))for(var Y=0;Y<h.length;Y++)V(l,h[Y],m,b,W);else b=c(b)?!!b.capture:!!b,m=P(m),l&&l[Ee]?(l=l.i,Y=String(h).toString(),Y in l.g&&(h=l.g[Y],m=z(h,m,b,W),m>-1&&(Z(h[m]),Array.prototype.splice.call(h,m,1),h.length==0&&(delete l.g[Y],l.h--)))):l&&(l=X(l))&&(h=l.g[h.toString()],l=-1,h&&(l=z(h,m,b,W)),(m=l>-1?h[l]:null)&&ie(m))}function ie(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[Ee])me(h.i,l);else{var m=l.type,b=l.proxy;h.removeEventListener?h.removeEventListener(m,b,l.capture):h.detachEvent?h.detachEvent(le(m),b):h.addListener&&h.removeListener&&h.removeListener(b),(m=X(h))?(me(m,l),m.h==0&&(m.src=null,h[pe]=null)):Z(l)}}}function le(l){return l in F?F[l]:F[l]="on"+l}function B(l,h){if(l.da)l=!0;else{h=new re(h,this);const m=l.listener,b=l.ha||l.src;l.fa&&ie(l),l=m.call(b,h)}return l}function X(l){return l=l[pe],l instanceof _e?l:null}var ne="__closure_events_fn_"+(Math.random()*1e9>>>0);function P(l){return typeof l=="function"?l:(l[ne]||(l[ne]=function(h){return l.handleEvent(h)}),l[ne])}function L(){k.call(this),this.i=new _e(this),this.M=this,this.G=null}p(L,k),L.prototype[Ee]=!0,L.prototype.removeEventListener=function(l,h,m,b){V(this,l,h,m,b)};function te(l,h){var m,b=l.G;if(b)for(m=[];b;b=b.G)m.push(b);if(l=l.M,b=h.type||h,typeof h=="string")h=new N(h,l);else if(h instanceof N)h.target=h.target||l;else{var W=h;h=new N(b,l),Ie(h,W)}W=!0;let Y,Se;if(m)for(Se=m.length-1;Se>=0;Se--)Y=h.g=m[Se],W=ce(Y,b,!0,h)&&W;if(Y=h.g=l,W=ce(Y,b,!0,h)&&W,W=ce(Y,b,!1,h)&&W,m)for(Se=0;Se<m.length;Se++)Y=h.g=m[Se],W=ce(Y,b,!1,h)&&W}L.prototype.N=function(){if(L.Z.N.call(this),this.i){var l=this.i;for(const h in l.g){const m=l.g[h];for(let b=0;b<m.length;b++)Z(m[b]);delete l.g[h],l.h--}}this.G=null},L.prototype.J=function(l,h,m,b){return this.i.add(String(l),h,!1,m,b)},L.prototype.K=function(l,h,m,b){return this.i.add(String(l),h,!0,m,b)};function ce(l,h,m,b){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();let W=!0;for(let Y=0;Y<h.length;++Y){const Se=h[Y];if(Se&&!Se.da&&Se.capture==m){const Qe=Se.listener,Zt=Se.ha||Se.src;Se.fa&&me(l.i,Se),W=Qe.call(Zt,b)!==!1&&W}}return W&&!b.defaultPrevented}function we(l,h){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=d(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:o.setTimeout(l,h||0)}function ke(l){l.g=we(()=>{l.g=null,l.i&&(l.i=!1,ke(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class de extends k{constructor(h,m){super(),this.m=h,this.l=m,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:ke(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ge(l){k.call(this),this.h=l,this.g={}}p(ge,k);var Re=[];function Ze(l){K(l.g,function(h,m){this.g.hasOwnProperty(m)&&ie(h)},l),l.g={}}ge.prototype.N=function(){ge.Z.N.call(this),Ze(this)},ge.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pt=o.JSON.stringify,vt=o.JSON.parse,$e=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function St(){}function et(){}var qt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ct(){N.call(this,"d")}p(Ct,N);function At(){N.call(this,"c")}p(At,N);var Xt={},un=null;function D(){return un=un||new L}Xt.Ia="serverreachability";function $(l){N.call(this,Xt.Ia,l)}p($,N);function Q(l){const h=D();te(h,new $(h))}Xt.STAT_EVENT="statevent";function U(l,h){N.call(this,Xt.STAT_EVENT,l),this.stat=h}p(U,N);function be(l){const h=D();te(h,new U(h,l))}Xt.Ja="timingevent";function De(l,h){N.call(this,Xt.Ja,l),this.size=h}p(De,N);function ze(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},h)}function gt(){this.g=!0}gt.prototype.ua=function(){this.g=!1};function jt(l,h,m,b,W,Y){l.info(function(){if(l.g)if(Y){var Se="",Qe=Y.split("&");for(let bt=0;bt<Qe.length;bt++){var Zt=Qe[bt].split("=");if(Zt.length>1){const sn=Zt[0];Zt=Zt[1];const br=sn.split("_");Se=br.length>=2&&br[1]=="type"?Se+(sn+"="+Zt+"&"):Se+(sn+"=redacted&")}}}else Se=null;else Se=Y;return"XMLHTTP REQ ("+b+") [attempt "+W+"]: "+h+`
`+m+`
`+Se})}function st(l,h,m,b,W,Y,Se){l.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+W+"]: "+h+`
`+m+`
`+Y+" "+Se})}function He(l,h,m,b){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+Vs(l,m)+(b?" "+b:"")})}function os(l,h){l.info(function(){return"TIMEOUT: "+h})}gt.prototype.info=function(){};function Vs(l,h){if(!l.g)return h;if(!h)return null;try{const Y=JSON.parse(h);if(Y){for(l=0;l<Y.length;l++)if(Array.isArray(Y[l])){var m=Y[l];if(!(m.length<2)){var b=m[1];if(Array.isArray(b)&&!(b.length<1)){var W=b[0];if(W!="noop"&&W!="stop"&&W!="close")for(let Se=1;Se<b.length;Se++)b[Se]=""}}}}return pt(Y)}catch{return h}}var as={NO_ERROR:0,TIMEOUT:8},Mo={},Il;function Lo(){}p(Lo,St),Lo.prototype.g=function(){return new XMLHttpRequest},Il=new Lo;function Kn(l){return encodeURIComponent(String(l))}function kl(l){var h=1;l=l.split(":");const m=[];for(;h>0&&l.length;)m.push(l.shift()),h--;return l.length&&m.push(l.join(":")),m}function _r(l,h,m,b){this.j=l,this.i=h,this.l=m,this.S=b||1,this.V=new ge(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Gs}function Gs(){this.i=null,this.g="",this.h=!1}var Nl={},Fo={};function Ti(l,h,m){l.M=1,l.A=Ut(We(h)),l.u=m,l.R=!0,Tl(l,null)}function Tl(l,h){l.F=Date.now(),rr(l),l.B=We(l.A);var m=l.B,b=l.S;Array.isArray(b)||(b=[String(b)]),Em(m.i,"t",b),l.C=0,m=l.j.L,l.h=new Gs,l.g=Hm(l.j,m?h:null,!l.u),l.P>0&&(l.O=new de(d(l.Y,l,l.g),l.P)),h=l.V,m=l.g,b=l.ba;var W="readystatechange";Array.isArray(W)||(W&&(Re[0]=W.toString()),W=Re);for(let Y=0;Y<W.length;Y++){const Se=Te(m,W[Y],b||h.handleEvent,!1,h.h||h);if(!Se)break;h.g[Se.key]=Se}h=l.J?H(l.J):{},l.u?(l.v||(l.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,h)):(l.v="GET",l.g.ea(l.B,l.v,null,h)),Q(),jt(l.i,l.v,l.B,l.l,l.S,l.u)}_r.prototype.ba=function(l){l=l.target;const h=this.O;h&&us(l)==3?h.j():this.Y(l)},_r.prototype.Y=function(l){try{if(l==this.g)e:{const Qe=us(this.g),Zt=this.g.ya(),bt=this.g.ca();if(!(Qe<3)&&(Qe!=3||this.g&&(this.h.h||this.g.la()||Pm(this.g)))){this.K||Qe!=4||Zt==7||(Zt==8||bt<=0?Q(3):Q(2)),M(this);var h=this.g.ca();this.X=h;var m=id(this);if(this.o=h==200,st(this.i,this.v,this.B,this.l,this.S,Qe,h),this.o){if(this.U&&!this.L){t:{if(this.g){var b,W=this.g;if((b=W.g?W.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(b)){var Y=b;break t}}Y=null}if(l=Y)He(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,qe(this,l);else{this.o=!1,this.m=3,be(12),Ae(this),he(this);break e}}if(this.R){l=!0;let sn;for(;!this.K&&this.C<m.length;)if(sn=Al(this,m),sn==Fo){Qe==4&&(this.m=4,be(14),l=!1),He(this.i,this.l,null,"[Incomplete Response]");break}else if(sn==Nl){this.m=4,be(15),He(this.i,this.l,m,"[Invalid Chunk]"),l=!1;break}else He(this.i,this.l,sn,null),qe(this,sn);if(Rl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qe!=4||m.length!=0||this.h.h||(this.m=1,be(16),l=!1),this.o=this.o&&l,!l)He(this.i,this.l,m,"[Invalid Chunked Response]"),Ae(this),he(this);else if(m.length>0&&!this.W){this.W=!0;var Se=this.j;Se.g==this&&Se.aa&&!Se.P&&(Se.j.info("Great, no buffering proxy detected. Bytes received: "+m.length),hd(Se),Se.P=!0,be(11))}}else He(this.i,this.l,m,null),qe(this,m);Qe==4&&Ae(this),this.o&&!this.K&&(Qe==4?Bm(this.j,this):(this.o=!1,rr(this)))}else K2(this.g),h==400&&m.indexOf("Unknown SID")>0?(this.m=3,be(12)):(this.m=0,be(13)),Ae(this),he(this)}}}catch{}finally{}};function id(l){if(!Rl(l))return l.g.la();const h=Pm(l.g);if(h==="")return"";let m="";const b=h.length,W=us(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return Ae(l),he(l),"";l.h.i=new o.TextDecoder}for(let Y=0;Y<b;Y++)l.h.h=!0,m+=l.h.i.decode(h[Y],{stream:!(W&&Y==b-1)});return h.length=0,l.h.g+=m,l.C=0,l.h.g}function Rl(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function Al(l,h){var m=l.C,b=h.indexOf(`
`,m);return b==-1?Fo:(m=Number(h.substring(m,b)),isNaN(m)?Nl:(b+=1,b+m>h.length?Fo:(h=h.slice(b,b+m),l.C=b+m,h)))}_r.prototype.cancel=function(){this.K=!0,Ae(this)};function rr(l){l.T=Date.now()+l.H,Pl(l,l.H)}function Pl(l,h){if(l.D!=null)throw Error("WatchDog timer not null");l.D=ze(d(l.aa,l),h)}function M(l){l.D&&(o.clearTimeout(l.D),l.D=null)}_r.prototype.aa=function(){this.D=null;const l=Date.now();l-this.T>=0?(os(this.i,this.B),this.M!=2&&(Q(),be(17)),Ae(this),this.m=2,he(this)):Pl(this,this.T-l)};function he(l){l.j.I==0||l.K||Bm(l.j,l)}function Ae(l){M(l);var h=l.O;h&&typeof h.dispose=="function"&&h.dispose(),l.O=null,Ze(l.V),l.g&&(h=l.g,l.g=null,h.abort(),h.dispose())}function qe(l,h){try{var m=l.j;if(m.I!=0&&(m.g==l||ot(m.h,l))){if(!l.L&&ot(m.h,l)&&m.I==3){try{var b=m.Ba.g.parse(h)}catch{b=null}if(Array.isArray(b)&&b.length==3){var W=b;if(W[0]==0){e:if(!m.v){if(m.g)if(m.g.F+3e3<l.F)zl(m),Ll(m);else break e;dd(m),be(18)}}else m.xa=W[1],0<m.xa-m.K&&W[2]<37500&&m.F&&m.A==0&&!m.C&&(m.C=ze(d(m.Va,m),6e3));Me(m.h)<=1&&m.ta&&(m.ta=void 0)}else qs(m,11)}else if((l.L||m.g==l)&&zl(m),!j(h))for(W=m.Ba.g.parse(h),h=0;h<W.length;h++){let bt=W[h];const sn=bt[0];if(!(sn<=m.K))if(m.K=sn,bt=bt[1],m.I==2)if(bt[0]=="c"){m.M=bt[1],m.ba=bt[2];const br=bt[3];br!=null&&(m.ka=br,m.j.info("VER="+m.ka));const Ys=bt[4];Ys!=null&&(m.za=Ys,m.j.info("SVER="+m.za));const ds=bt[5];ds!=null&&typeof ds=="number"&&ds>0&&(b=1.5*ds,m.O=b,m.j.info("backChannelRequestTimeoutMs_="+b)),b=m;const hs=l.g;if(hs){const Bl=hs.g?hs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bl){var Y=b.h;Y.g||Bl.indexOf("spdy")==-1&&Bl.indexOf("quic")==-1&&Bl.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(Ve(Y,Y.h),Y.h=null))}if(b.G){const fd=hs.g?hs.g.getResponseHeader("X-HTTP-Session-Id"):null;fd&&(b.wa=fd,Ue(b.J,b.G,fd))}}m.I=3,m.l&&m.l.ra(),m.aa&&(m.T=Date.now()-l.F,m.j.info("Handshake RTT: "+m.T+"ms")),b=m;var Se=l;if(b.na=Wm(b,b.L?b.ba:null,b.W),Se.L){Pe(b.h,Se);var Qe=Se,Zt=b.O;Zt&&(Qe.H=Zt),Qe.D&&(M(Qe),rr(Qe)),b.g=Se}else Fm(b);m.i.length>0&&Fl(m)}else bt[0]!="stop"&&bt[0]!="close"||qs(m,7);else m.I==3&&(bt[0]=="stop"||bt[0]=="close"?bt[0]=="stop"?qs(m,7):ud(m):bt[0]!="noop"&&m.l&&m.l.qa(bt),m.A=0)}}Q(4)}catch{}}var Ge=class{constructor(l,h){this.g=l,this.map=h}};function ft(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function it(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Me(l){return l.h?1:l.g?l.g.size:0}function ot(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Ve(l,h){l.g?l.g.add(h):l.h=h}function Pe(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}ft.prototype.cancel=function(){if(this.i=Oe(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Oe(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const m of l.g.values())h=h.concat(m.G);return h}return I(l.i)}var tt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Nt(l,h){if(l){l=l.split("&");for(let m=0;m<l.length;m++){const b=l[m].indexOf("=");let W,Y=null;b>=0?(W=l[m].substring(0,b),Y=l[m].substring(b+1)):W=l[m],h(W,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function Be(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;l instanceof Be?(this.l=l.l,je(this,l.j),this.o=l.o,this.g=l.g,Le(this,l.u),this.h=l.h,dt(this,Im(l.i)),this.m=l.m):l&&(h=String(l).match(tt))?(this.l=!1,je(this,h[1]||"",!0),this.o=Dt(h[2]||""),this.g=Dt(h[3]||"",!0),Le(this,h[4]),this.h=Dt(h[5]||"",!0),dt(this,h[6]||"",!0),this.m=Dt(h[7]||"")):(this.l=!1,this.i=new zo(null,this.l))}Be.prototype.toString=function(){const l=[];var h=this.j;h&&l.push(mt(h,ls,!0),":");var m=this.g;return(m||h=="file")&&(l.push("//"),(h=this.o)&&l.push(mt(h,ls,!0),"@"),l.push(Kn(m).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.u,m!=null&&l.push(":",String(m))),(m=this.h)&&(this.g&&m.charAt(0)!="/"&&l.push("/"),l.push(mt(m,m.charAt(0)=="/"?od:Ol,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",mt(m,bm)),l.join("")},Be.prototype.resolve=function(l){const h=We(this);let m=!!l.j;m?je(h,l.j):m=!!l.o,m?h.o=l.o:m=!!l.g,m?h.g=l.g:m=l.u!=null;var b=l.h;if(m)Le(h,l.u);else if(m=!!l.h){if(b.charAt(0)!="/")if(this.g&&!this.h)b="/"+b;else{var W=h.h.lastIndexOf("/");W!=-1&&(b=h.h.slice(0,W+1)+b)}if(W=b,W==".."||W==".")b="";else if(W.indexOf("./")!=-1||W.indexOf("/.")!=-1){b=W.lastIndexOf("/",0)==0,W=W.split("/");const Y=[];for(let Se=0;Se<W.length;){const Qe=W[Se++];Qe=="."?b&&Se==W.length&&Y.push(""):Qe==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),b&&Se==W.length&&Y.push("")):(Y.push(Qe),b=!0)}b=Y.join("/")}else b=W}return m?h.h=b:m=l.i.toString()!=="",m?dt(h,Im(l.i)):m=!!l.m,m&&(h.m=l.m),h};function We(l){return new Be(l)}function je(l,h,m){l.j=m?Dt(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function Le(l,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);l.u=h}else l.u=null}function dt(l,h,m){h instanceof zo?(l.i=h,U2(l.i,l.l)):(m||(h=mt(h,ad)),l.i=new zo(h,l.l))}function Ue(l,h,m){l.i.set(h,m)}function Ut(l){return Ue(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function Dt(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function mt(l,h,m){return typeof l=="string"?(l=encodeURI(l).replace(h,sr),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function sr(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var ls=/[#\/\?@]/g,Ol=/[#\?:]/g,od=/[#\?]/g,ad=/[#\?@]/g,bm=/#/g;function zo(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function Ks(l){l.g||(l.g=new Map,l.h=0,l.i&&Nt(l.i,function(h,m){l.add(decodeURIComponent(h.replace(/\+/g," ")),m)}))}t=zo.prototype,t.add=function(l,h){Ks(this),this.i=null,l=Ri(this,l);let m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(h),this.h+=1,this};function Sm(l,h){Ks(l),h=Ri(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function Cm(l,h){return Ks(l),h=Ri(l,h),l.g.has(h)}t.forEach=function(l,h){Ks(this),this.g.forEach(function(m,b){m.forEach(function(W){l.call(h,W,b,this)},this)},this)};function jm(l,h){Ks(l);let m=[];if(typeof h=="string")Cm(l,h)&&(m=m.concat(l.g.get(Ri(l,h))));else for(l=Array.from(l.g.values()),h=0;h<l.length;h++)m=m.concat(l[h]);return m}t.set=function(l,h){return Ks(this),this.i=null,l=Ri(this,l),Cm(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=jm(this,l),l.length>0?String(l[0]):h):h};function Em(l,h,m){Sm(l,h),m.length>0&&(l.i=null,l.g.set(Ri(l,h),I(m)),l.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(let b=0;b<h.length;b++){var m=h[b];const W=Kn(m);m=jm(this,m);for(let Y=0;Y<m.length;Y++){let Se=W;m[Y]!==""&&(Se+="="+Kn(m[Y])),l.push(Se)}}return this.i=l.join("&")};function Im(l){const h=new zo;return h.i=l.i,l.g&&(h.g=new Map(l.g),h.h=l.h),h}function Ri(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function U2(l,h){h&&!l.j&&(Ks(l),l.i=null,l.g.forEach(function(m,b){const W=b.toLowerCase();b!=W&&(Sm(this,b),Em(this,W,m))},l)),l.j=h}function $2(l,h){const m=new gt;if(o.Image){const b=new Image;b.onload=f(cs,m,"TestLoadImage: loaded",!0,h,b),b.onerror=f(cs,m,"TestLoadImage: error",!1,h,b),b.onabort=f(cs,m,"TestLoadImage: abort",!1,h,b),b.ontimeout=f(cs,m,"TestLoadImage: timeout",!1,h,b),o.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=l}else h(!1)}function W2(l,h){const m=new gt,b=new AbortController,W=setTimeout(()=>{b.abort(),cs(m,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:b.signal}).then(Y=>{clearTimeout(W),Y.ok?cs(m,"TestPingServer: ok",!0,h):cs(m,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(W),cs(m,"TestPingServer: error",!1,h)})}function cs(l,h,m,b,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),b(m)}catch{}}function H2(){this.g=new $e}function ld(l){this.i=l.Sb||null,this.h=l.ab||!1}p(ld,St),ld.prototype.g=function(){return new Dl(this.i,this.h)};function Dl(l,h){L.call(this),this.H=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Dl,L),t=Dl.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=h,this.readyState=1,Uo(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(h.body=l),(this.H||o).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Bo(this)),this.readyState=0},t.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Uo(this)),this.g&&(this.readyState=3,Uo(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;km(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function km(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}t.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Bo(this):Uo(this),this.readyState==3&&km(this)}},t.Oa=function(l){this.g&&(this.response=this.responseText=l,Bo(this))},t.Na=function(l){this.g&&(this.response=l,Bo(this))},t.ga=function(){this.g&&Bo(this)};function Bo(l){l.readyState=4,l.l=null,l.j=null,l.B=null,Uo(l)}t.setRequestHeader=function(l,h){this.A.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var m=h.next();!m.done;)m=m.value,l.push(m[0]+": "+m[1]),m=h.next();return l.join(`\r
`)};function Uo(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Dl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Nm(l){let h="";return K(l,function(m,b){h+=b,h+=":",h+=m,h+=`\r
`}),h}function cd(l,h,m){e:{for(b in m){var b=!1;break e}b=!0}b||(m=Nm(m),typeof l=="string"?m!=null&&Kn(m):Ue(l,h,m))}function Vt(l){L.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Vt,L);var V2=/^https?$/i,G2=["POST","PUT"];t=Vt.prototype,t.Fa=function(l){this.H=l},t.ea=function(l,h,m,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Il.g(),this.g.onreadystatechange=y(d(this.Ca,this));try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(Y){Tm(this,Y);return}if(l=m||"",m=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var W in b)m.set(W,b[W]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const Y of b.keys())m.set(Y,b.get(Y));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(m.keys()).find(Y=>Y.toLowerCase()=="content-type"),W=o.FormData&&l instanceof o.FormData,!(Array.prototype.indexOf.call(G2,h,void 0)>=0)||b||W||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,Se]of m)this.g.setRequestHeader(Y,Se);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(Y){Tm(this,Y)}};function Tm(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.o=5,Rm(l),Ml(l)}function Rm(l){l.A||(l.A=!0,te(l,"complete"),te(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,te(this,"complete"),te(this,"abort"),Ml(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ml(this,!0)),Vt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Am(this):this.Xa())},t.Xa=function(){Am(this)};function Am(l){if(l.h&&typeof i<"u"){if(l.v&&us(l)==4)setTimeout(l.Ca.bind(l),0);else if(te(l,"readystatechange"),us(l)==4){l.h=!1;try{const Y=l.ca();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var m;if(!(m=h)){var b;if(b=Y===0){let Se=String(l.D).match(tt)[1]||null;!Se&&o.self&&o.self.location&&(Se=o.self.location.protocol.slice(0,-1)),b=!V2.test(Se?Se.toLowerCase():"")}m=b}if(m)te(l,"complete"),te(l,"success");else{l.o=6;try{var W=us(l)>2?l.g.statusText:""}catch{W=""}l.l=W+" ["+l.ca()+"]",Rm(l)}}finally{Ml(l)}}}}function Ml(l,h){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);const m=l.g;l.g=null,h||te(l,"ready");try{m.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function us(l){return l.g?l.g.readyState:0}t.ca=function(){try{return us(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),vt(h)}};function Pm(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function K2(l){const h={};l=(l.g&&us(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<l.length;b++){if(j(l[b]))continue;var m=kl(l[b]);const W=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const Y=h[W]||[];h[W]=Y,Y.push(m)}ae(h,function(b){return b.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function $o(l,h,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||h}function Om(l){this.za=0,this.i=[],this.j=new gt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=$o("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=$o("baseRetryDelayMs",5e3,l),this.Za=$o("retryDelaySeedMs",1e4,l),this.Ta=$o("forwardChannelMaxRetries",2,l),this.va=$o("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new ft(l&&l.concurrentRequestLimit),this.Ba=new H2,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Om.prototype,t.ka=8,t.I=1,t.connect=function(l,h,m,b){be(0),this.W=l,this.H=h||{},m&&b!==void 0&&(this.H.OSID=m,this.H.OAID=b),this.F=this.X,this.J=Wm(this,null,this.W),Fl(this)};function ud(l){if(Dm(l),l.I==3){var h=l.V++,m=We(l.J);if(Ue(m,"SID",l.M),Ue(m,"RID",h),Ue(m,"TYPE","terminate"),Wo(l,m),h=new _r(l,l.j,h),h.M=2,h.A=Ut(We(m)),m=!1,o.navigator&&o.navigator.sendBeacon)try{m=o.navigator.sendBeacon(h.A.toString(),"")}catch{}!m&&o.Image&&(new Image().src=h.A,m=!0),m||(h.g=Hm(h.j,null),h.g.ea(h.A)),h.F=Date.now(),rr(h)}$m(l)}function Ll(l){l.g&&(hd(l),l.g.cancel(),l.g=null)}function Dm(l){Ll(l),l.v&&(o.clearTimeout(l.v),l.v=null),zl(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&o.clearTimeout(l.m),l.m=null)}function Fl(l){if(!it(l.h)&&!l.m){l.m=!0;var h=l.Ea;G||x(),oe||(G(),oe=!0),E.add(h,l),l.D=0}}function q2(l,h){return Me(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=h.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=ze(d(l.Ea,l,h),Um(l,l.D)),l.D++,!0)}t.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;const W=new _r(this,this.j,l);let Y=this.o;if(this.U&&(Y?(Y=H(Y),Ie(Y,this.U)):Y=this.U),this.u!==null||this.R||(W.J=Y,Y=null),this.S)e:{for(var h=0,m=0;m<this.i.length;m++){t:{var b=this.i[m];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(h+=b,h>4096){h=m;break e}if(h===4096||m===this.i.length-1){h=m+1;break e}}h=1e3}else h=1e3;h=Lm(this,W,h),m=We(this.J),Ue(m,"RID",l),Ue(m,"CVER",22),this.G&&Ue(m,"X-HTTP-Session-Id",this.G),Wo(this,m),Y&&(this.R?h="headers="+Kn(Nm(Y))+"&"+h:this.u&&cd(m,this.u,Y)),Ve(this.h,W),this.Ra&&Ue(m,"TYPE","init"),this.S?(Ue(m,"$req",h),Ue(m,"SID","null"),W.U=!0,Ti(W,m,null)):Ti(W,m,h),this.I=2}}else this.I==3&&(l?Mm(this,l):this.i.length==0||it(this.h)||Mm(this))};function Mm(l,h){var m;h?m=h.l:m=l.V++;const b=We(l.J);Ue(b,"SID",l.M),Ue(b,"RID",m),Ue(b,"AID",l.K),Wo(l,b),l.u&&l.o&&cd(b,l.u,l.o),m=new _r(l,l.j,m,l.D+1),l.u===null&&(m.J=l.o),h&&(l.i=h.G.concat(l.i)),h=Lm(l,m,1e3),m.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),Ve(l.h,m),Ti(m,b,h)}function Wo(l,h){l.H&&K(l.H,function(m,b){Ue(h,b,m)}),l.l&&K({},function(m,b){Ue(h,b,m)})}function Lm(l,h,m){m=Math.min(l.i.length,m);const b=l.l?d(l.l.Ka,l.l,l):null;e:{var W=l.i;let Qe=-1;for(;;){const Zt=["count="+m];Qe==-1?m>0?(Qe=W[0].g,Zt.push("ofs="+Qe)):Qe=0:Zt.push("ofs="+Qe);let bt=!0;for(let sn=0;sn<m;sn++){var Y=W[sn].g;const br=W[sn].map;if(Y-=Qe,Y<0)Qe=Math.max(0,W[sn].g-100),bt=!1;else try{Y="req"+Y+"_"||"";try{var Se=br instanceof Map?br:Object.entries(br);for(const[Ys,ds]of Se){let hs=ds;c(ds)&&(hs=pt(ds)),Zt.push(Y+Ys+"="+encodeURIComponent(hs))}}catch(Ys){throw Zt.push(Y+"type="+encodeURIComponent("_badmap")),Ys}}catch{b&&b(br)}}if(bt){Se=Zt.join("&");break e}}Se=void 0}return l=l.i.splice(0,m),h.G=l,Se}function Fm(l){if(!l.g&&!l.v){l.Y=1;var h=l.Da;G||x(),oe||(G(),oe=!0),E.add(h,l),l.A=0}}function dd(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=ze(d(l.Da,l),Um(l,l.A)),l.A++,!0)}t.Da=function(){if(this.v=null,zm(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=ze(d(this.Wa,this),l)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,be(10),Ll(this),zm(this))};function hd(l){l.B!=null&&(o.clearTimeout(l.B),l.B=null)}function zm(l){l.g=new _r(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var h=We(l.na);Ue(h,"RID","rpc"),Ue(h,"SID",l.M),Ue(h,"AID",l.K),Ue(h,"CI",l.F?"0":"1"),!l.F&&l.ia&&Ue(h,"TO",l.ia),Ue(h,"TYPE","xmlhttp"),Wo(l,h),l.u&&l.o&&cd(h,l.u,l.o),l.O&&(l.g.H=l.O);var m=l.g;l=l.ba,m.M=1,m.A=Ut(We(h)),m.u=null,m.R=!0,Tl(m,l)}t.Va=function(){this.C!=null&&(this.C=null,Ll(this),dd(this),be(19))};function zl(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function Bm(l,h){var m=null;if(l.g==h){zl(l),hd(l),l.g=null;var b=2}else if(ot(l.h,h))m=h.G,Pe(l.h,h),b=1;else return;if(l.I!=0){if(h.o)if(b==1){m=h.u?h.u.length:0,h=Date.now()-h.F;var W=l.D;b=D(),te(b,new De(b,m)),Fl(l)}else Fm(l);else if(W=h.m,W==3||W==0&&h.X>0||!(b==1&&q2(l,h)||b==2&&dd(l)))switch(m&&m.length>0&&(h=l.h,h.i=h.i.concat(m)),W){case 1:qs(l,5);break;case 4:qs(l,10);break;case 3:qs(l,6);break;default:qs(l,2)}}}function Um(l,h){let m=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(m*=2),m*h}function qs(l,h){if(l.j.info("Error code "+h),h==2){var m=d(l.bb,l),b=l.Ua;const W=!b;b=new Be(b||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||je(b,"https"),Ut(b),W?$2(b.toString(),m):W2(b.toString(),m)}else be(2);l.I=0,l.l&&l.l.pa(h),$m(l),Dm(l)}t.bb=function(l){l?(this.j.info("Successfully pinged google.com"),be(2)):(this.j.info("Failed to ping google.com"),be(1))};function $m(l){if(l.I=0,l.ja=[],l.l){const h=Oe(l.h);(h.length!=0||l.i.length!=0)&&(w(l.ja,h),w(l.ja,l.i),l.h.i.length=0,I(l.i),l.i.length=0),l.l.oa()}}function Wm(l,h,m){var b=m instanceof Be?We(m):new Be(m);if(b.g!="")h&&(b.g=h+"."+b.g),Le(b,b.u);else{var W=o.location;b=W.protocol,h=h?h+"."+W.hostname:W.hostname,W=+W.port;const Y=new Be(null);b&&je(Y,b),h&&(Y.g=h),W&&Le(Y,W),m&&(Y.h=m),b=Y}return m=l.G,h=l.wa,m&&h&&Ue(b,m,h),Ue(b,"VER",l.ka),Wo(l,b),b}function Hm(l,h,m){if(h&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Aa&&!l.ma?new Vt(new ld({ab:m})):new Vt(l.ma),h.Fa(l.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Vm(){}t=Vm.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function qn(l,h){L.call(this),this.g=new Om(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(l?l["X-WebChannel-Client-Profile"]=h.sa:l={"X-WebChannel-Client-Profile":h.sa}),this.g.U=l,(l=h&&h.Qb)&&!j(l)&&(this.g.u=l),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!j(h)&&(this.g.G=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Ai(this)}p(qn,L),qn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},qn.prototype.close=function(){ud(this.g)},qn.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var m={};m.__data__=l,l=m}else this.v&&(m={},m.__data__=pt(l),l=m);h.i.push(new Ge(h.Ya++,l)),h.I==3&&Fl(h)},qn.prototype.N=function(){this.g.l=null,delete this.j,ud(this.g),delete this.g,qn.Z.N.call(this)};function Gm(l){Ct.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const m in h){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}p(Gm,Ct);function Km(){At.call(this),this.status=1}p(Km,At);function Ai(l){this.g=l}p(Ai,Vm),Ai.prototype.ra=function(){te(this.g,"a")},Ai.prototype.qa=function(l){te(this.g,new Gm(l))},Ai.prototype.pa=function(l){te(this.g,new Km)},Ai.prototype.oa=function(){te(this.g,"b")},qn.prototype.send=qn.prototype.o,qn.prototype.open=qn.prototype.m,qn.prototype.close=qn.prototype.close,as.NO_ERROR=0,as.TIMEOUT=8,as.HTTP_ERROR=6,Mo.COMPLETE="complete",et.EventType=qt,qt.OPEN="a",qt.CLOSE="b",qt.ERROR="c",qt.MESSAGE="d",L.prototype.listen=L.prototype.J,Vt.prototype.listenOnce=Vt.prototype.K,Vt.prototype.getLastError=Vt.prototype.Ha,Vt.prototype.getLastErrorCode=Vt.prototype.ya,Vt.prototype.getStatus=Vt.prototype.ca,Vt.prototype.getResponseJson=Vt.prototype.La,Vt.prototype.getResponseText=Vt.prototype.la,Vt.prototype.send=Vt.prototype.ea,Vt.prototype.setWithCredentials=Vt.prototype.Fa}).apply(typeof lc<"u"?lc:typeof self<"u"?self:typeof window<"u"?window:{});const by="@firebase/firestore",Sy="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Cn.UNAUTHENTICATED=new Cn(null),Cn.GOOGLE_CREDENTIALS=new Cn("google-credentials-uid"),Cn.FIRST_PARTY=new Cn("first-party-uid"),Cn.MOCK_USER=new Cn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jl="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So=new Mp("@firebase/firestore");function hr(t,...e){if(So.logLevel<=yt.DEBUG){const n=e.map(xm);So.debug(`Firestore (${jl}): ${t}`,...n)}}function A2(t,...e){if(So.logLevel<=yt.ERROR){const n=e.map(xm);So.error(`Firestore (${jl}): ${t}`,...n)}}function O3(t,...e){if(So.logLevel<=yt.WARN){const n=e.map(xm);So.warn(`Firestore (${jl}): ${t}`,...n)}}function xm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function il(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,P2(t,r,n)}function P2(t,e,n){let r=`FIRESTORE (${jl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw A2(r),new Error(r)}function ja(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||P2(e,s,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lt={CANCELLED:"cancelled",INVALID_ARGUMENT:"invalid-argument",FAILED_PRECONDITION:"failed-precondition"};class ct extends Ao{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class D3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Cn.UNAUTHENTICATED))}shutdown(){}}class M3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class L3{constructor(e){this.t=e,this.currentUser=Cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ja(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Ea;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Ea,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{hr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(hr("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Ea)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(hr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ja(typeof r.accessToken=="string",31837,{l:r}),new O2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ja(e===null||typeof e=="string",2055,{h:e}),new Cn(e)}}class F3{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Cn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class z3{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new F3(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Cn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Cy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class B3{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,lw(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ja(this.o===void 0,3512);const r=i=>{i.error!=null&&hr("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,hr("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{hr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):hr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Cy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ja(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Cy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=U3(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Bs(t,e){return t<e?-1:t>e?1:0}function W3(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return rh(s)===rh(i)?Bs(s,i):rh(s)?1:-1}return Bs(t.length,e.length)}const H3=55296,V3=57343;function rh(t){const e=t.charCodeAt(0);return e>=H3&&e<=V3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy="__name__";class Ir{constructor(e,n,r){n===void 0?n=0:n>e.length&&il(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&il(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ir.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ir?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Ir.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Bs(e.length,n.length)}static compareSegments(e,n){const r=Ir.isNumericId(e),s=Ir.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Ir.extractNumericId(e).compare(Ir.extractNumericId(n)):W3(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ym.fromString(e.substring(4,e.length-2))}}class cr extends Ir{construct(e,n,r){return new cr(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ct(lt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new cr(n)}static emptyPath(){return new cr([])}}const G3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ni extends Ir{construct(e,n,r){return new ni(e,n,r)}static isValidIdentifier(e){return G3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ni.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===jy}static keyField(){return new ni([jy])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new ct(lt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new ct(lt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ct(lt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(i(),s++)}if(i(),o)throw new ct(lt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ni(n)}static emptyPath(){return new ni([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e){this.path=e}static fromPath(e){return new li(cr.fromString(e))}static fromName(e){return new li(cr.fromString(e).popFirst(5))}static empty(){return new li(cr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&cr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return cr.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new li(new cr(e.slice()))}}function K3(t,e,n,r){if(e===!0&&r===!0)throw new ct(lt.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function q3(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Y3(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":il(12329,{type:typeof t})}function Q3(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ct(lt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Y3(t);throw new ct(lt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(t,e){const n={typeString:t};return e&&(n.value=e),n}function El(t,e){if(!q3(t))throw new ct(lt.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new ct(lt.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey=-62135596800,Iy=1e6;class kr{static now(){return kr.fromMillis(Date.now())}static fromDate(e){return kr.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Iy);return new kr(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ct(lt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ct(lt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Ey)throw new ct(lt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ct(lt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Iy}_compareTo(e){return this.seconds===e.seconds?Bs(this.nanoseconds,e.nanoseconds):Bs(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:kr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(El(e,kr._jsonSchema))return new kr(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ey;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}kr._jsonSchemaVersion="firestore/timestamp/1.0",kr._jsonSchema={type:Qt("string",kr._jsonSchemaVersion),seconds:Qt("number"),nanoseconds:Qt("number")};function J3(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new X3("Invalid base64 string: "+i):i}}(e);return new Ci(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Ci(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Bs(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ci.EMPTY_BYTE_STRING=new Ci("");const Tf="(default)";class _u{constructor(e,n){this.projectId=e,this.database=n||Tf}static empty(){return new _u("","")}get isDefaultDatabase(){return this.database===Tf}isEqual(e){return e instanceof _u&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{constructor(e,n=null,r=[],s=[],i=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function eN(t){return new Z3(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ky,at;(at=ky||(ky={}))[at.OK=0]="OK",at[at.CANCELLED=1]="CANCELLED",at[at.UNKNOWN=2]="UNKNOWN",at[at.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",at[at.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",at[at.NOT_FOUND=5]="NOT_FOUND",at[at.ALREADY_EXISTS=6]="ALREADY_EXISTS",at[at.PERMISSION_DENIED=7]="PERMISSION_DENIED",at[at.UNAUTHENTICATED=16]="UNAUTHENTICATED",at[at.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",at[at.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",at[at.ABORTED=10]="ABORTED",at[at.OUT_OF_RANGE=11]="OUT_OF_RANGE",at[at.UNIMPLEMENTED=12]="UNIMPLEMENTED",at[at.INTERNAL=13]="INTERNAL",at[at.UNAVAILABLE=14]="UNAVAILABLE",at[at.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new ym([4294967295,4294967295],0);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN=41943040;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN=1048576;function sh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&hr("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Ea,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,c=new vm(e,n,o,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ct(lt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}var Ny,Ty;(Ty=Ny||(Ny={})).Ma="default",Ty.Cache="cache";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ry=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2="firestore.googleapis.com",Ay=!0;class Py{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ct(lt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=D2,this.ssl=Ay}else this.host=e.host,this.ssl=e.ssl??Ay;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=tN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<nN)throw new ct(lt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}K3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=sN(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ct(lt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ct(lt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ct(lt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class M2{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Py({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ct(lt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ct(lt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Py(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new D3;switch(r.type){case"firstParty":return new z3(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ct(lt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Ry.get(n);r&&(hr("ComponentProvider","Removing Datastore"),Ry.delete(n),r.terminate())}(this),Promise.resolve()}}function iN(t,e,n,r={}){var d;t=Q3(t,M2);const s=Vu(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;s&&(Zv(`https://${c}`),tw("Firestore",!0)),i.host!==D2&&i.host!==c&&O3("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:c,ssl:s,emulatorOptions:r};if(!Ka(u,o)&&(t._setSettings(u),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=Cn.MOCK_USER;else{f=ew(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new ct(lt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Cn(y)}t._authCredentials=new M3(new O2(f,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new wm(this.firestore,e,this._query)}}class Tr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _m(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tr(this.firestore,e,this._key)}toJSON(){return{type:Tr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(El(n,Tr._jsonSchema))return new Tr(e,r||null,new li(cr.fromString(n.referencePath)))}}Tr._jsonSchemaVersion="firestore/documentReference/1.0",Tr._jsonSchema={type:Qt("string",Tr._jsonSchemaVersion),referencePath:Qt("string")};class _m extends wm{constructor(e,n,r){super(e,n,eN(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tr(this.firestore,null,new li(e))}withConverter(e){return new _m(this.firestore,e,this._path)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oy="AsyncQueue";class Dy{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new rN(this,"async_queue_retry"),this._c=()=>{const r=sh();r&&hr(Oy,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=sh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=sh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Ea;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!J3(e))throw e;hr(Oy,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,A2("INTERNAL UNHANDLED ERROR: ",My(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=vm.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&il(47125,{Pc:My(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function My(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class oN extends M2{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Dy,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Dy(e),this._firestoreClient=void 0,await e}}}function aN(t,e){const n=typeof t=="object"?t:dw(),r=typeof t=="string"?t:Tf,s=aw(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Jv("firestore");i&&iN(s,...i)}return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ur(Ci.fromBase64String(e))}catch(n){throw new ct(lt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ur(Ci.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ur._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(El(e,Ur._jsonSchema))return Ur.fromBase64String(e.bytes)}}Ur._jsonSchemaVersion="firestore/bytes/1.0",Ur._jsonSchema={type:Qt("string",Ur._jsonSchemaVersion),bytes:Qt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ct(lt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ni(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ct(lt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ct(lt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Bs(this._lat,e._lat)||Bs(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:hi._jsonSchemaVersion}}static fromJSON(e){if(El(e,hi._jsonSchema))return new hi(e.latitude,e.longitude)}}hi._jsonSchemaVersion="firestore/geoPoint/1.0",hi._jsonSchema={type:Qt("string",hi._jsonSchemaVersion),latitude:Qt("number"),longitude:Qt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:fi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(El(e,fi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new fi(e.vectorValues);throw new ct(lt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}fi._jsonSchemaVersion="firestore/vectorValue/1.0",fi._jsonSchema={type:Qt("string",fi._jsonSchemaVersion),vectorValues:Qt("object")};const lN=new RegExp("[~\\*/\\[\\]]");function cN(t,e,n){if(e.search(lN)>=0)throw Ly(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t);try{return new L2(...e.split("."))._internalPath}catch{throw Ly(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t)}}function Ly(t,e,n,r,s){let i=`Function ${e}() called with invalid data`;i+=". ";let o="";return new ct(lt.INVALID_ARGUMENT,i+t+o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Tr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new uN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(z2("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class uN extends F2{data(){return super.data()}}function z2(t,e){return typeof e=="string"?cN(t,e):e instanceof L2?e._internalPath:e._delegate._internalPath}class cc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class io extends F2{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Tc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(z2("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ct(lt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=io._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}io._jsonSchemaVersion="firestore/documentSnapshot/1.0",io._jsonSchema={type:Qt("string",io._jsonSchemaVersion),bundleSource:Qt("string","DocumentSnapshot"),bundleName:Qt("string"),bundle:Qt("string")};class Tc extends io{data(e={}){return super.data(e)}}class Ia{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new cc(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Tc(this._firestore,this._userDataWriter,r.key,r,new cc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ct(lt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(c=>{const u=new Tc(s._firestore,s._userDataWriter,c.doc.key,c.doc,new cc(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new Tc(s._firestore,s._userDataWriter,c.doc.key,c.doc,new cc(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:dN(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ct(lt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ia._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=$3.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function dN(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return il(61501,{type:t})}}Ia._jsonSchemaVersion="firestore/querySnapshot/1.0",Ia._jsonSchema={type:Qt("string",Ia._jsonSchemaVersion),bundleSource:Qt("string","QuerySnapshot"),bundleName:Qt("string"),bundle:Qt("string")};(function(e,n=!0){(function(s){jl=s})(cw),Ya(new yo("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),c=new oN(new L3(r.getProvider("auth-internal")),new B3(o,r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ct(lt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _u(d.options.projectId,f)}(o,s),o);return i={useFetchStreams:n,...i},c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),As(by,Sy,e),As(by,Sy,"esm2020")})();const hN={apiKey:"AIzaSyCMkZr4Xz204NjvETje-Rhznf6ECDYiEnE",authDomain:"ethiostore-17d9f.firebaseapp.com",databaseURL:"https://ethiostore-17d9f-default-rtdb.firebaseio.com",projectId:"ethiostore-17d9f",storageBucket:"ethiostore-17d9f.appspot.com",messagingSenderId:"964518277159",appId:"1:964518277159:web:9404cace890edf88961e02"},B2=L0().length>0?L0()[0]:uw(hN),Mt=R2(B2);aN(B2);const fN="https://gojo-teacher-web.onrender.com/api",Di="https://ethiostore-17d9f-default-rtdb.firebaseio.com";function Mi(t){return!t||typeof t!="string"||!t.trim()||t==="null"||t==="undefined"?"/default-profile.png":t}function pN(){const[t,e]=g.useState(window.innerWidth>600),n=zn(),[r,s]=g.useState(null),[i,o]=g.useState([]),[c,u]=g.useState([]),[d,f]=g.useState([]),[p,y]=g.useState(null),[I,w]=g.useState(!1),[T,A]=g.useState(!1),[S,_]=g.useState([]),v=g.useRef({}),O=(r==null?void 0:r.userId)||null;g.useEffect(()=>{const re=JSON.parse(localStorage.getItem("teacher"));if(!re){n("/login");return}const Ee=async()=>{try{const Ce=Pt(Mt,"Users"),K=(await Ca(Ce)).val()||{},ae=Object.values(K).find(H=>H.userId===re.userId);if(ae){const H={...re,...ae};s(H),localStorage.setItem("teacher",JSON.stringify(H))}else s(re)}catch{s(re)}},J=async Ce=>{try{const Z=Ce||JSON.parse(localStorage.getItem("teacher"));if(!Z||!Z.userId){f([]);return}const[K,ae]=await Promise.all([ee.get(`${Di}/Chats.json`),ee.get(`${Di}/Users.json`)]),H=K.data||{},Ie=ae.data||{}||{},_e={};Object.entries(Ie).forEach(([z,pe])=>{pe&&pe.userId&&(_e[pe.userId]=z)});const me=Object.entries(H).map(([z,pe])=>{const Te=(pe.unread||{})[Z.userId]||0;if(!Te)return null;const se=pe.participants||{},ve=Object.keys(se||{}).find(X=>X!==Z.userId);if(!ve)return null;let V=ve,ie=Ie[V];if(!ie){const X=_e[ve];X&&(V=X,ie=Ie[X])}ie||(ie={userId:ve,name:ve,profileImage:"/default-profile.png"});const le={pushKey:V,userId:ie.userId||ve,name:ie.name||ie.username||ve,profileImage:Mi(ie.profileImage||ie.profile||"")},B=pe.lastMessage||{};return{id:z,title:B.text||"New message",adminName:le.name,adminProfile:le.profileImage,isMessage:!0,unreadForMe:Te}}).filter(Boolean);f(me)}catch{f([])}};Ee(),G(),k(re),J(re)},[]),g.useEffect(()=>{r&&console.log("Teacher object (debug):",r)},[r]);const G=async()=>{try{let Ee=(await ee.get(`${fN}/get_posts`)).data||[];!Array.isArray(Ee)&&typeof Ee=="object"&&(Ee=Object.values(Ee));const[J,Ce]=await Promise.all([ee.get(`${Di}/School_Admins.json`),ee.get(`${Di}/Users.json`)]),Z=J.data||{},K=Ce.data||{},ae=me=>{if(!me)return{name:"Admin",profile:"/default-profile.png"};const z=Z[me];if(!z)return{name:me,profile:"/default-profile.png"};const pe=z.userId,F=pe?K[pe]:null,Te=(F==null?void 0:F.name)||(z==null?void 0:z.title)||me,se=Mi(F==null?void 0:F.profileImage);return{name:Te,profile:se}},H=Ee.map(me=>{const z=me.postId||me.id||me.key||"",{name:pe,profile:F}=ae(me.adminId);let Te=[];Array.isArray(me.likes)?Te=me.likes:me.likes&&typeof me.likes=="object"&&(Te=Object.keys(me.likes));const se=me.time||me.timestamp||me.createdAt||null;return{...me,postId:z,adminName:pe,adminProfile:F,time:se,likes:Te,likeCount:me.likeCount||Te.length||0}});H.sort((me,z)=>{const pe=me.time?new Date(me.time).getTime():0;return(z.time?new Date(z.time).getTime():0)-pe}),o(H);const ue=JSON.parse(localStorage.getItem("teacher")),Ie=E(ue==null?void 0:ue.userId),_e=H.filter(me=>!Ie.includes(me.postId)).slice(0,5).map(me=>{var z;return{id:me.postId,title:((z=me.message)==null?void 0:z.substring(0,80))||"Untitled post",adminName:me.adminName,adminProfile:me.adminProfile}});u(_e)}catch(re){console.error("Error fetching posts/admins handshake:",re)}},oe=async re=>{try{if(!O)return;const Ee=await ee.post("https://gojo-teacher-web.onrender.com/api/like_post",{postId:re,teacherId:O});if(Ee.data.success){const J=Ee.data.liked,Ce=Ee.data.likeCount;o(Z=>Z.map(K=>K.postId===re?{...K,likeCount:Ce,likes:{...K.likes,[O]:J?!0:void 0}}:K))}}catch(Ee){console.error("Error liking post:",Ee)}},E=re=>JSON.parse(localStorage.getItem(`seen_posts_${re}`))||[],x=(re,Ee)=>{const J=E(re);J.includes(Ee)||localStorage.setItem(`seen_posts_${re}`,JSON.stringify([...J,Ee]))},C=()=>{localStorage.removeItem("teacher"),n("/login")},k=async(re=r)=>{try{const Ee=re||JSON.parse(localStorage.getItem("teacher"));if(!Ee||!Ee.userId){_([]);return}const[J,Ce]=await Promise.all([ee.get(`${Di}/Chats.json`),ee.get(`${Di}/Users.json`)]),Z=J.data||{},ae=Ce.data||{}||{},H={};Object.entries(ae).forEach(([Ie,_e])=>{_e&&_e.userId&&(H[_e.userId]=Ie)});const ue=Object.entries(Z).map(([Ie,_e])=>{const z=(_e.unread||{})[Ee.userId]||0;if(!z)return null;const pe=_e.participants||{},F=Object.keys(pe||{}).find(ie=>ie!==Ee.userId);if(!F)return null;let Te=F,se=ae[Te];if(!se){const ie=H[F];ie&&(Te=ie,se=ae[ie])}se||(se={userId:F,name:F,profileImage:"/default-profile.png"});const ve={pushKey:Te,userId:se.userId||F,name:se.name||se.username||F,profileImage:Mi(se.profileImage||se.profile||"")},V=_e.lastMessage||{};return{chatId:Ie,contact:ve,displayName:ve.name,profile:ve.profileImage,lastMessageText:V.text||"",lastMessageTime:V.timeStamp||V.time||null,unreadForMe:z}}).filter(Boolean).sort((Ie,_e)=>(_e.lastMessageTime||0)-(Ie.lastMessageTime||0));_(ue)}catch(Ee){console.error("Error fetching conversations:",Ee),_([])}},N=S.reduce((re,Ee)=>re+(Ee.unreadForMe||0),0),R=r||{},j=()=>e(!1);return g.useEffect(()=>{const re=()=>{window.innerWidth<=600?e(!1):e(!0)};return window.addEventListener("resize",re),re(),()=>window.removeEventListener("resize",re)},[]),a.jsxs("div",{className:"dashboard-page",children:[a.jsxs("nav",{className:"top-navbar",children:[window.innerWidth<=600&&!t&&a.jsx("button",{className:"sidebar-arrow-btn",style:{position:"fixed",left:0,top:180,transform:"none",zIndex:1300,background:"#fff",border:"none",borderRadius:"0 8px 8px 0",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",padding:8,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:()=>e(!0),"aria-label":"Open sidebar menu",children:a.jsx(Pr,{size:22})}),a.jsx("h2",{children:"Gojo Dashboard"}),a.jsxs("div",{className:"nav-right",children:[a.jsxs("div",{className:"icon-circle",style:{position:"relative"},children:[a.jsxs("div",{onClick:()=>w(!I),style:{cursor:"pointer",position:"relative"},"aria-label":"Show notifications",tabIndex:0,role:"button",onKeyPress:re=>{re.key==="Enter"&&w(!I)},children:[a.jsx(ss,{size:22}),c.length+d.length>0&&a.jsx("span",{style:{position:"absolute",top:-6,right:-6,background:"red",color:"#fff",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:c.length+d.length})]}),I&&a.jsxs(a.Fragment,{children:[a.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.08)",zIndex:1999},onClick:()=>w(!1)}),a.jsx("div",{className:"notification-popup",style:typeof window<"u"&&window.innerWidth<=600?{position:"fixed",left:"50%",top:"8%",transform:"translate(-50%, 0)",width:"90vw",maxWidth:340,zIndex:2e3,background:"#fff",borderRadius:12,boxShadow:"0 2px 16px rgba(0,0,0,0.18)",maxHeight:"70vh",overflowY:"auto",padding:12}:void 0,children:[...c,...d].length>0?[...c,...d].map((re,Ee)=>a.jsxs("div",{className:"notification-item",onClick:()=>{re.isMessage?(n("/all-chat"),w(!1)):(O&&x(O,re.id),u(J=>J.filter(Ce=>Ce.id!==re.id)),w(!1))},tabIndex:0,role:"button","aria-label":re.isMessage?"See message notification "+re.title:"See post notification "+re.title,onKeyPress:J=>{J.key==="Enter"&&(re.isMessage?(n("/all-chat"),w(!1)):(O&&x(O,re.id),u(Ce=>Ce.filter(Z=>Z.id!==re.id)),w(!1)))},children:[a.jsx("img",{src:Mi(re.adminProfile),alt:re.adminName||"Admin",className:"notification-profile"}),a.jsxs("div",{children:[a.jsx("strong",{children:re.adminName}),a.jsx("div",{className:"notification-title",children:re.title}),re.isMessage&&a.jsx("span",{style:{color:"#0b78f6",fontSize:12,fontWeight:500},children:"[Message]"})]})]},re.id||Ee)):a.jsx("div",{className:"no-notifications",children:"No notifications"})})]})]}),a.jsxs("div",{className:"icon-circle",style:{position:"relative",marginLeft:12,cursor:"pointer"},onClick:()=>n("/all-chat"),"aria-label":"Go to all chat",tabIndex:0,role:"button",onKeyPress:re=>{re.key==="Enter"&&n("/all-chat")},children:[a.jsx(rs,{size:22}),N>0&&a.jsx("span",{style:{position:"absolute",top:1,right:0,background:"#f60b0b",color:"#fff",borderRadius:"50%",minWidth:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 5px"},children:N})]}),a.jsx("div",{className:"icon-circle",onClick:()=>n("/settings"),children:a.jsx(xr,{})}),a.jsx("img",{src:Mi(R.profileImage),alt:"teacher",className:"profile-img"})]})]}),a.jsxs("div",{className:"google-dashboard",children:[window.innerWidth<=600&&t&&a.jsx("div",{className:"sidebar-overlay visible",onClick:j,style:{display:"block"}}),a.jsxs("div",{className:`google-sidebar${t?" open":""}`,style:window.innerWidth<=600?{position:"fixed",top:64,left:t?0:"-220px",width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",zIndex:1200,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto",transition:"left 0.25s cubic-bezier(.4,0,.2,1)"}:{position:"fixed",top:64,left:0,width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.04)",zIndex:900,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto"},children:[r&&a.jsxs("div",{className:"sidebar-profile",children:[a.jsx("div",{className:"sidebar-img-circle",children:a.jsx("img",{src:r.profileImage||"/default-profile.png",alt:"profile",style:{width:"100%",height:"100%",objectFit:"cover",border:"none",boxShadow:"none"}})}),a.jsx("h3",{children:r.name}),a.jsx("p",{children:r.username})]}),a.jsxs("div",{className:"sidebar-menu",children:[a.jsxs(ye,{className:"sidebar-btn",to:"/dashboard",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[a.jsx(Dr,{})," Home"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/students",children:[a.jsx(Ye,{})," Students"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/admins",children:[a.jsx(Ye,{})," Admins"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/parents",children:[a.jsx(Or,{})," Parents"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/marks",children:[a.jsx(Jt,{})," Marks"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/attendance",children:[a.jsx(Ye,{})," Attendance"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/schedule",children:[a.jsx(Ye,{})," Schedule"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/lesson-plan",children:[a.jsx(Jt,{})," Lesson Plan"]}),a.jsxs("button",{className:"sidebar-btn logout-btn",onClick:C,children:[a.jsx(Mr,{})," Logout"]})]})]}),a.jsx("div",{className:"google-main posts-full-mobile",children:a.jsxs("div",{className:"posts-container",children:[i.length===0&&a.jsx("p",{children:"No posts available"}),i.map(re=>a.jsxs("div",{ref:Ee=>v.current[re.postId]=Ee,className:"post-box",style:{border:p===re.postId?"2px solid #4b6cb7":"1px solid #eee",backgroundColor:p===re.postId?"#fff9c4":"#fff",transition:"background-color 0.4s, border 0.2s",marginBottom:18},children:[a.jsxs("div",{className:"fb-post-top",children:[a.jsx("img",{src:Mi(re.adminProfile),alt:re.adminName||"Admin"}),a.jsxs("div",{className:"post-info",children:[a.jsx("h4",{style:{margin:0,fontSize:17,fontWeight:700},children:re.adminName||"Admin"}),a.jsx("div",{style:{fontSize:12,color:"#666"},children:re.time?new Date(re.time).toLocaleString():""})]})]}),a.jsx("div",{style:{marginTop:12,fontSize:17,lineHeight:1.6,color:"#222",wordBreak:"break-word",paddingLeft:"10px"},children:re.message}),re.postUrl&&a.jsx("img",{src:re.postUrl,alt:"post media",className:"post-media",style:{width:"100%",borderRadius:8,marginTop:8,maxHeight:400,objectFit:"cover"}}),a.jsx("div",{className:"post-actions",style:{marginTop:14,display:"flex",alignItems:"center",gap:18},children:a.jsxs("button",{onClick:()=>oe(re.postId),style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 18px",background:"#f0f2f5",border:"none",borderRadius:8,cursor:"pointer",fontSize:"16px",fontWeight:"500",color:re.likes&&O&&re.likes[O]?"#e0245e":"#555",transition:"all 0.2s ease"},children:[re.likes&&O&&re.likes[O]?a.jsx(Fj,{style:{color:"#e0245e",fontSize:"16px"}}):a.jsx(Uj,{style:{fontSize:"16px"}}),re.likes&&O&&re.likes[O]?"Liked":"Like",a.jsx("span",{style:{marginLeft:8,fontSize:"15px",color:"#777"},children:re.likeCount||0})]})})]},re.postId))]})}),a.jsx("style",{children:`
          .posts-container {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            justify-content: flex-start;
            margin-left: 120px;
          }
          .post-box {
            margin-left: 0;
            margin-right: auto;
            margin-top: 12px;
          }
          @media (max-width: 600px) {
            .posts-container {
              margin-left: 0 !important;
            }
            .post-box {
              margin-top: 0 !important;
            }
          }
          @media (max-width: 600px) {
            .posts-full-mobile, .posts-container, .post-box {
              width: 100vw !important;
              max-width: 100vw !important;
              margin: 0 !important;
              padding: 0 !important;
              border-radius: 0 !important;
              box-shadow: none !important;
            }
            .posts-container {
              align-items: stretch;
            }
            .google-sidebar {
              left: -220px;
              transition: left 0.25s cubic-bezier(.4,0,.2,1);
            }
            .google-sidebar.open {
              left: 0 !important;
              z-index: 1202;
            }
            .sidebar-overlay {
              display: block;
              position: fixed;
              inset: 0;
              background: rgba(0,0,0,0.35);
              z-index: 1200;
              transition: opacity 0.2s;
            }
            .sidebar-arrow-btn {
              display: flex !important;
            }
          }
        `})]})]})}const ih=(t,e)=>[t,e].sort().join("_"),mN=(t="")=>t?String(t).replace(/^course_/,"").replace(/_[0-9A-Za-z]+$/,"").replace(/_/g," ").trim().split(/\s+/).map(n=>n?n[0].toUpperCase()+n.slice(1).toLowerCase():"").join(" "):"Unknown",gN="https://gojo-teacher-web.onrender.com/api",dn="https://ethiostore-17d9f-default-rtdb.firebaseio.com",oh=t=>{if(!t)return null;let e;if(typeof t=="number"?e=new Date(t):e=new Date(String(t)),isNaN(e.getTime()))return null;const n=new Date;let r=n.getFullYear()-e.getFullYear();const s=n.getMonth()-e.getMonth();return(s<0||s===0&&n.getDate()<e.getDate())&&r--,r},yN=t=>{if(!t)return"";const e=new Date(Number(t));return`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`},xN=t=>{if(!t)return"";const e=new Date(Number(t)),n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()),s=new Date(e.getFullYear(),e.getMonth(),e.getDate()),i=r-s,o=Math.floor(i/(24*60*60*1e3));return o===0?"Today":o===1?"Yesterday":o>1&&o<7?`${o} days ago`:e.toLocaleDateString()},ah=(t,e)=>!t||!e?null:Object.values(t).find(n=>String(n==null?void 0:n.userId)===String(e))||null,vN=({student:t,selected:e,onClick:n})=>a.jsxs("div",{onClick:()=>n(t),style:{width:"100%",borderRadius:"12px",padding:"15px",display:"flex",alignItems:"center",gap:"20px",cursor:"pointer",background:e?"#e0e7ff":"#fff",border:e?"2px solid #4b6cb7":"1px solid #ddd",boxShadow:e?"0 6px 15px rgba(75,108,183,0.3)":"0 4px 10px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},children:[a.jsx("img",{src:t.profileImage||"/default-profile.png",alt:t.name,style:{width:"50px",height:"50px",borderRadius:"50%",objectFit:"cover",border:e?"3px solid #4b6cb7":"3px solid red"}}),a.jsxs("div",{children:[a.jsx("h3",{style:{margin:0},children:t.name}),a.jsxs("p",{style:{margin:"4px 0",color:"#555"},children:["Grade ",t.grade," - Section ",t.section]})]})]});function wN(){const[t,e]=g.useState(typeof window<"u"?window.innerWidth>600:!0),[n,r]=g.useState([]),[s,i]=g.useState(""),[o,c]=g.useState("All"),[u,d]=g.useState("All"),[f,p]=g.useState([]),[y,I]=g.useState("details"),[w,T]=g.useState([]),[A,S]=g.useState(""),[_,v]=g.useState(null),[O,G]=g.useState(!1),[oe,E]=g.useState(!1),[x,C]=g.useState("daily"),[k,N]=g.useState({}),[R,j]=g.useState({}),[re,Ee]=g.useState({}),[J,Ce]=g.useState(null),[Z,K]=g.useState([]),[ae,H]=g.useState(""),[ue,Ie]=g.useState(!1),[_e,me]=g.useState({}),[z,pe]=g.useState(null),[F,Te]=g.useState(null),[se,ve]=g.useState(!1),[V,ie]=g.useState([]),[le,B]=g.useState(""),X=g.useRef(null),ne=JSON.parse(localStorage.getItem("teacher"))||{},P=String(ne.userId||""),[L,te]=g.useState({}),[ce,we]=g.useState([]),[ke,de]=g.useState("daily"),[ge,Re]=g.useState("All"),[Ze,pt]=g.useState({}),[vt,$e]=g.useState({}),[St,et]=g.useState(!0),[qt,Ct]=g.useState([]),[At,Xt]=g.useState("semester2"),[un,D]=g.useState({}),[$,Q]=g.useState([]),[U,be]=g.useState([]),[De,ze]=g.useState(!1),[gt,jt]=g.useState(null),st=g.useRef({}),He=zn(),[os,Vs]=g.useState(!1),[as,Mo]=g.useState([]);g.useEffect(()=>{const M=JSON.parse(localStorage.getItem("teacher"));if(!M){He("/login");return}pe(M),Lo(M)},[He]),g.useEffect(()=>{const M=JSON.parse(localStorage.getItem("teacher"));if(!M){He("/login");return}v(M)},[He]),g.useEffect(()=>{(async()=>{try{let Ae=(await ee.get(`${gN}/get_posts`)).data||[];!Array.isArray(Ae)&&typeof Ae=="object"&&(Ae=Object.values(Ae));const[qe,Ge]=await Promise.all([ee.get(`${dn}/School_Admins.json`),ee.get(`${dn}/Users.json`)]),ft=qe.data||{},it=Ge.data||{},Me=JSON.parse(localStorage.getItem("teacher")),ot=Il(Me==null?void 0:Me.userId),Ve=Oe=>{const tt=Oe.adminId||Oe.posterAdminId||Oe.poster||Oe.admin||null;if(tt&&ft[tt]){const Nt=ft[tt],Be=Nt.userId,We=it[Be]||null,je=We&&We.name||Nt.name||Oe.adminName||"Admin",Le=We&&We.profileImage||Nt.profileImage||Oe.adminProfile||"/default-profile.png";return{name:je,profile:Le}}return{name:Oe.adminName||"Admin",profile:Oe.adminProfile||"/default-profile.png"}},Pe=Ae.slice().sort((Oe,tt)=>{const Nt=Oe.time?new Date(Oe.time).getTime():0;return(tt.time?new Date(tt.time).getTime():0)-Nt}).filter(Oe=>Oe.postId&&!ot.includes(Oe.postId)).slice(0,5).map(Oe=>{var Nt;const tt=Ve(Oe);return{id:Oe.postId,title:((Nt=Oe.message)==null?void 0:Nt.substring(0,50))||"Untitled post",adminName:tt.name,adminProfile:tt.profile}});be(Pe)}catch(he){console.error("Error fetching notifications:",he)}})()},[]);function Il(M){return JSON.parse(localStorage.getItem(`seen_posts_${M}`))||[]}const Lo=async(M=z)=>{try{const he=M||JSON.parse(localStorage.getItem("teacher"));if(!he||!he.userId){Mo([]);return}const[Ae,qe]=await Promise.all([ee.get(`${dn}/Chats.json`),ee.get(`${dn}/Users.json`)]),Ge=Ae.data||{},it=qe.data||{}||{},Me={};Object.entries(it).forEach(([Ve,Pe])=>{Pe&&Pe.userId&&(Me[Pe.userId]=Ve)});const ot=Object.entries(Ge).map(([Ve,Pe])=>{const tt=(Pe.unread||{})[he.userId]||0;if(!tt)return null;const Nt=Pe.participants||{},Be=Object.keys(Nt||{}).find(Ue=>Ue!==he.userId);if(!Be)return null;let We=Be,je=it[We];if(!je){const Ue=Me[Be];Ue&&(We=Ue,je=it[Ue])}je||(je={userId:Be,name:Be,profileImage:"/default-profile.png"});const Le={pushKey:We,userId:je.userId||Be,name:je.name||je.username||Be,profileImage:je.profileImage||je.profile||"/default-profile.png"},dt=Pe.lastMessage||{};return{chatId:Ve,contact:Le,displayName:Le.name,profile:Le.profileImage,lastMessageText:dt.text||"",lastMessageTime:dt.timeStamp||dt.time||null,lastMessageSeen:!!dt.seen,lastMessageSeenAt:dt.seenAt||dt.seenAt||null,lastMessageSenderId:dt.senderId||null,unreadForMe:tt}}).filter(Boolean).sort((Ve,Pe)=>(Pe.lastMessageTime||0)-(Ve.lastMessageTime||0));Mo(ot)}catch(he){console.error("Error fetching conversations:",he),Mo([])}},Kn=as.reduce((M,he)=>M+(he.unreadForMe||0),0);g.useEffect(()=>{if(!(_!=null&&_.userId))return;let M=!1;return(async()=>{et(!0);try{const[Ae,qe,Ge,ft,it]=await Promise.all([ee.get(`${dn}/Students.json`),ee.get(`${dn}/Users.json`),ee.get(`${dn}/Courses.json`),ee.get(`${dn}/TeacherAssignments.json`),ee.get(`${dn}/Teachers.json`)]),Me=it.data||{},ot=Object.entries(Me).find(([Be,We])=>We.userId===_.userId);if(!ot){console.warn("Teacher not found in Teachers node"),M||(r([]),et(!1),i("No teacher assignment found"));return}const Ve=ot[0],Pe=Object.values(ft.data||{}).filter(Be=>Be.teacherId===Ve).map(Be=>Be.courseId),Oe=qe.data||{};Ee(Oe);const tt=Be=>ah(Oe,Be),Nt=Object.entries(Ae.data||{}).map(([Be,We])=>{var Dt,mt;const je=tt(We.userId),Le=We.parentName||((Dt=We.parent)==null?void 0:Dt.name)||(je==null?void 0:je.parentName)||We.rawParentName||null,dt=We.parentPhone||((mt=We.parent)==null?void 0:mt.phone)||(je==null?void 0:je.parentPhone)||We.rawParentPhone||null,Ue=(je==null?void 0:je.dob)||(je==null?void 0:je.birthDate)||We.dob||We.birthDate||null,Ut=oh(Ue);return{...We,studentId:Be,name:(je==null?void 0:je.name)||We.name||"Unknown",email:(je==null?void 0:je.email)||We.email||"",profileImage:(je==null?void 0:je.profileImage)||We.profileImage||"/default-profile.png",phone:(je==null?void 0:je.phone)||We.phone||"",gender:(je==null?void 0:je.gender)||We.gender||"",dob:Ue,age:Ut,parentName:Le||null,parentPhone:dt||null,raw:We}}).filter(Be=>Pe.some(We=>{var Le;const je=(Le=Ge.data)==null?void 0:Le[We];return je&&je.grade===Be.grade&&je.section===Be.section}));M||(r(Nt),i(""))}catch(Ae){console.error(Ae),M||i("Failed to load students")}finally{M||et(!1)}})(),()=>M=!0},[_]),g.useEffect(()=>{var qe,Ge,ft,it,Me,ot;if(!F){Ce(null);return}const M={fullName:F.name||"",phone:F.phone||((qe=F.raw)==null?void 0:qe.phone)||"",gender:F.gender||((Ge=F.raw)==null?void 0:Ge.gender)||"",email:F.email||"",grade:F.grade||"",section:F.section||"",parentName:F.parentName||((ft=F.raw)==null?void 0:ft.parentName)||"",parentPhone:F.parentPhone||((it=F.raw)==null?void 0:it.parentPhone)||"",dob:F.dob||((Me=F.raw)==null?void 0:Me.dob)||"",age:F.age??oh(F.dob||((ot=F.raw)==null?void 0:ot.dob))??"",profileImage:F.profileImage||"/default-profile.png"};Ce(M);let he=!1;return(async()=>{var Ve,Pe,Oe,tt,Nt,Be,We;try{let je=re;(!je||Object.keys(je).length===0)&&(je=(await ee.get(`${dn}/Users.json`)).data||{},Ee(je));const Le=ah(je,F.userId)||{},dt=((Ve=F.raw)==null?void 0:Ve.parentId)||((Pe=F.raw)==null?void 0:Pe.parentUserId)||(Le==null?void 0:Le.parentId)||(Le==null?void 0:Le.parentUserId)||null,Ue=dt?ah(je,dt):null,Ut=(Ue==null?void 0:Ue.name)||((Oe=F.raw)==null?void 0:Oe.parentName)||F.parentName||"",Dt=(Ue==null?void 0:Ue.phone)||((tt=F.raw)==null?void 0:tt.parentPhone)||F.parentPhone||"",mt=(Le==null?void 0:Le.phone)||F.phone||((Nt=F.raw)==null?void 0:Nt.phone)||"",sr=(Le==null?void 0:Le.gender)||F.gender||((Be=F.raw)==null?void 0:Be.gender)||"",ls=(Le==null?void 0:Le.email)||F.email||"",Ol=(Le==null?void 0:Le.dob)||(Le==null?void 0:Le.birthDate)||F.dob||((We=F.raw)==null?void 0:We.dob)||null,od=oh(Ol)??F.age??"",ad={fullName:(Le==null?void 0:Le.name)||F.name||"",phone:mt,gender:sr,email:ls,grade:F.grade||"",section:F.section||"",parentName:Ut,parentPhone:Dt,dob:Ol||"",age:od,profileImage:(Le==null?void 0:Le.profileImage)||F.profileImage||"/default-profile.png",userRec:Le,parentRec:Ue};he||Ce(ad)}catch(je){console.error("Failed to derive student details",je)}})(),()=>{he=!0}},[F,re]),g.useEffect(()=>{if(!F)return;let M=!1;return(async()=>{var Ae,qe;try{const ft=(await ee.get(`${dn}/Parents.json`)).data||{},it=[(Ae=F.raw)==null?void 0:Ae.parentId,(qe=F.raw)==null?void 0:qe.parentUserId,F.parentId,F.parentUserId].filter(Boolean);let Me=null;for(const Pe of it){if(ft[Pe]){Me=ft[Pe];break}const Oe=Object.values(ft).find(tt=>String(tt.userId)===String(Pe));if(Oe){Me=Oe;break}}if(!Me){const Pe=F.studentId||F.userId;for(const Oe of Object.values(ft)){const tt=(Oe==null?void 0:Oe.children)||{};if(Object.values(tt).find(Be=>String(Be==null?void 0:Be.studentId)===String(Pe))){Me=Oe;break}}}let ot=null,Ve=null;if(Me&&(ot=Me.name||Me.displayName||null,Ve=Me.phone||Me.phoneNumber||Me.contact||null,(!ot||!Ve)&&Me.userId))try{const Oe=(await ee.get(`${dn}/Users.json`)).data||{},tt=Object.values(Oe).find(Nt=>String(Nt.userId)===String(Me.userId));tt&&(ot=ot||tt.name||null,Ve=Ve||tt.phone||null)}catch{}M||Ce(Pe=>({...Pe||{},parentName:ot||(Pe==null?void 0:Pe.parentName)||"",parentPhone:Ve||(Pe==null?void 0:Pe.parentPhone)||""}))}catch(Ge){console.error("Error resolving parent info:",Ge)}})(),()=>M=!0},[F]),g.useEffect(()=>{const M=document.querySelector(".chat-messages");M&&(M.scrollTop=M.scrollHeight)},[w]),g.useEffect(()=>{if(o==="All")p([]),d("All");else{const M=[...new Set(n.filter(he=>he.grade===o).map(he=>he.section))];p(M),d("All")}},[o,n]);const kl=n.filter(M=>!(o!=="All"&&M.grade!==o||u!=="All"&&M.section!==u)),_r=[...new Set(n.map(M=>M.grade))].sort();g.useEffect(()=>{if(!(F!=null&&F.studentId)&&!(F!=null&&F.userId)){Q([]);return}let M=!1;return(async()=>{G(!0);try{const[Ae,qe,Ge,ft]=await Promise.all([ee.get(`${dn}/Attendance.json`),ee.get(`${dn}/Teachers.json`),ee.get(`${dn}/Users.json`),ee.get(`${dn}/TeacherAssignments.json`)]),it=Ae.data||{},Me=qe.data||{},ot=Ge.data||{},Ve=ft.data||{},Pe=[];Object.entries(it).forEach(([Oe,tt])=>{!tt||typeof tt!="object"||Object.entries(tt).forEach(([Nt,Be])=>{if(!Be||typeof Be!="object")return;let je=Be[F.studentId]??Be[F.userId];if(!je&&Be.students&&(je=Be.students[F.studentId]??Be.students[F.userId]),!je){const Ut=Object.entries(Be).find(([Dt,mt])=>!mt||typeof mt!="object"?!1:!!(mt.userId&&(String(mt.userId)===String(F.userId)||String(mt.userId)===String(F.studentId))));Ut&&(je=Ut[1])}if(!je)return;let Le="absent",dt="",Ue=Oe;if(typeof je=="string")Le=je;else if(typeof je=="object"){if(Le=je.status||je.attendance_status||Object.values(je)[0]||"present",dt=je.teacherName||je.teacher||je.tutor||"",!dt){const Ut=je.teacherId||je.teacherKey||null;if(Ut&&Me[Ut]){const Dt=Me[Ut];if(Dt.userId){const mt=Object.values(ot).find(sr=>String(sr==null?void 0:sr.userId)===String(Dt.userId));dt=(mt==null?void 0:mt.name)||Dt.name||dt}else dt=Dt.name||dt}}if(!dt){const Ut=je.teacherUserId||je.teacherUser||je.takenBy||null;if(Ut){const Dt=Object.values(ot).find(mt=>String(mt==null?void 0:mt.userId)===String(Ut));Dt&&(dt=Dt.name||dt)}}Ue=je.subject||Oe}if(!dt){const Ut=Object.values(Ve).find(Dt=>String(Dt.courseId)===String(Oe));if(Ut&&Ut.teacherId){const Dt=Ut.teacherId,mt=Me[Dt];if(mt)if(mt.userId){const sr=Object.values(ot).find(ls=>String(ls==null?void 0:ls.userId)===String(mt.userId));dt=(sr==null?void 0:sr.name)||mt.name||dt}else dt=mt.name||dt}}Pe.push({courseId:Oe,date:Nt,status:String(Le).toLowerCase(),teacherName:dt,subject:Ue})})}),M||(Pe.sort((Oe,tt)=>new Date(tt.date)-new Date(Oe.date)),Q(Pe))}catch(Ae){console.error("Attendance fetch error:",Ae),M||Q([])}finally{M||G(!1)}})(),()=>{M=!0}},[F]);const Gs=Gt.useMemo(()=>$.map(M=>({date:M.date,courseId:M.courseId,teacherName:M.teacherName||"",status:M.status||"absent"})),[$]),Nl=Gt.useMemo(()=>!Gs||Gs.length===0?{}:Gs.reduce((M,he)=>{const Ae=he.courseId||he.subject||"unknown";return M[Ae]||(M[Ae]=[]),M[Ae].push(he),M},{}),[Gs]),Fo=M=>{if(!M||M.length===0)return 0;const he=M.filter(Ae=>Ae.status==="present"||Ae.status==="late").length;return Math.round(he/M.length*100)},Ti=M=>{pt(he=>({...he,[M]:!he[M]}))},Tl=()=>{localStorage.removeItem("teacher"),He("/login")};g.useEffect(()=>{if(!F){te({});return}(async()=>{et(!0);try{const he=R2(),Ae=await Ca(Pt(he,"ClassMarks"));if(!Ae.exists()){te({}),et(!1);return}const qe=Ae.val(),Ge={},ft=new Set([F.studentId,F.userId,F.userId?`student_${F.userId}`:null].filter(Boolean));Object.entries(qe).forEach(([it,Me])=>{if(!Me||typeof Me!="object")return;const ot=Object.entries(Me).find(([Ve,Pe])=>!!(ft.has(Ve)||Pe&&typeof Pe=="object"&&(Pe.userId&&ft.has(Pe.userId)||Pe.studentId&&ft.has(Pe.studentId))));if(ot){const[,Ve]=ot;Ge[it]=Ve}}),te(Ge)}catch(he){console.error("Failed to fetch marks:",he),te({})}finally{et(!1)}})()},[F]),g.useEffect(()=>{if(!(F!=null&&F.userId))return;async function M(){try{const he=await ee.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/StudentNotes/${F==null?void 0:F.userId}.json`);if(!he.data){K([]);return}const Ae=Object.entries(he.data).map(([qe,Ge])=>({id:qe,...Ge}));Ae.sort((qe,Ge)=>new Date(Ge.createdAt)-new Date(qe.createdAt)),K(Ae)}catch(he){console.error("Failed to fetch teacher notes",he),K([])}}M()},[F]);const id=async()=>{if(!ae.trim()||!_||!F)return;Ie(!0);const M={teacherId:_.userId,teacherName:_.name,note:ae.trim(),createdAt:new Date().toISOString()};try{await ee.post(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/StudentNotes/${F==null?void 0:F.userId}.json`,M),K(he=>[M,...he]),H("")}catch(he){console.error("Error saving note",he)}finally{Ie(!1)}},Rl=()=>{var M;(M=X.current)==null||M.scrollIntoView({behavior:"smooth"})};g.useEffect(()=>{Rl()},[V]),g.useEffect(()=>{if(!P||!F)return;const M=ih(P,F.userId),he=Pt(Mt,`Chats/${M}/messages`),Ae=so(he,qe=>{const Ge=qe.val()||{},ft=Object.entries(Ge).map(([it,Me])=>({id:it,...Me,isTeacher:Me.senderId===P})).sort((it,Me)=>it.timeStamp-Me.timeStamp);ie(ft)});return()=>Ae()},[P,F]),g.useEffect(()=>{if(!oe||!F||!P||!V||V.length===0)return;const M=V.filter(Ge=>String(Ge.receiverId)===String(P)&&!Ge.seen);if(M.length===0)return;const he=ih(P,F.userId),Ae=Date.now(),qe={messages:{},unread:{}};M.forEach(Ge=>{qe.messages[Ge.id]={...qe.messages[Ge.id]||{},seen:!0,seenAt:Ae}}),qe.unread[P]=null,qe.lastMessage={seen:!0,seenAt:Ae},ee.patch(`${dn}/Chats/${he}.json`,qe).catch(Ge=>console.error("Failed to mark messages seen:",Ge))},[oe,V,F,P]),g.useEffect(()=>{var M;(M=X.current)==null||M.scrollIntoView({behavior:"smooth"})},[V]);const Al=async()=>{if(!le.trim()||!F)return;const M=P,he=F.userId,Ae=ih(M,he),qe=Date.now(),Ge={senderId:M,receiverId:he,type:"text",text:le,seen:!1,timeStamp:qe};await ee.post(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${Ae}/messages.json`,Ge),await ee.patch(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${Ae}.json`,{participants:{[M]:!0,[he]:!0},lastMessage:{text:le,senderId:M,seen:!1,timeStamp:qe},unread:{[he]:1}}),B("")},[rr,Pl]=Gt.useState(window.innerWidth<window.innerHeight);return Gt.useEffect(()=>{const M=()=>{Pl(window.innerWidth<window.innerHeight)};return window.addEventListener("resize",M),()=>window.removeEventListener("resize",M)},[]),g.useEffect(()=>{const M=document.querySelector(".chat-messages");M&&(M.scrollTop=M.scrollHeight)},[w]),a.jsxs("div",{className:"dashboard-page",children:[a.jsxs("nav",{className:"top-navbar",children:[a.jsx("h2",{children:"Gojo Dashboard"}),a.jsxs("div",{className:"nav-right",children:[a.jsxs("div",{className:"icon-circle",children:[a.jsxs("div",{onClick:()=>ze(!De),style:{cursor:"pointer",position:"relative"},"aria-label":"Show notifications",tabIndex:0,role:"button",onKeyPress:M=>{M.key==="Enter"&&ze(!De)},children:[a.jsx(ss,{size:24}),U.length+Kn>0&&a.jsx("span",{style:{position:"absolute",top:-5,right:-5,background:"red",color:"white",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:U.length+Kn})]}),De&&a.jsxs(a.Fragment,{children:[a.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.08)",zIndex:1999},onClick:()=>ze(!1)}),a.jsxs("div",{className:"notification-popup",style:typeof window<"u"&&window.innerWidth<=600?{position:"fixed",left:"50%",top:"8%",transform:"translate(-50%, 0)",width:"90vw",maxWidth:340,zIndex:2e3,background:"#fff",borderRadius:12,boxShadow:"0 2px 16px rgba(0,0,0,0.18)",maxHeight:"70vh",overflowY:"auto",padding:12}:{zIndex:2e3,position:"absolute",top:30,right:0,width:300,maxHeight:400,overflowY:"auto",background:"#fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",borderRadius:8},onClick:M=>M.stopPropagation(),children:[U.length>0&&U.map((M,he)=>a.jsxs("div",{onClick:()=>{be(Ae=>Ae.filter((qe,Ge)=>Ge!==he)),ze(!1),He("/dashboard"),setTimeout(()=>{const Ae=st.current[M.id];Ae&&(Ae.scrollIntoView({behavior:"smooth",block:"center"}),jt(M.id),setTimeout(()=>jt(null),3e3))},150)},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:M.adminProfile,alt:M.adminName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:M.adminName}),a.jsx("p",{style:{margin:0,fontSize:12},children:M.title})]})]},M.id||he)),Kn>0&&as.filter(M=>M.unreadForMe>0).map((M,he)=>a.jsxs("div",{onClick:()=>{ze(!1),He("/all-chat")},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:M.profile||"/default-profile.png",alt:M.displayName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:M.displayName}),a.jsxs("p",{style:{margin:0,fontSize:12,color:"#0b78f6",display:"flex",alignItems:"center",gap:8},children:[M.lastMessageSenderId===P?a.jsx("span",{style:{color:M.lastMessageSeen?"#0bda63":"#cbd5e1"},children:M.lastMessageSeen?"":""}):null,a.jsx("span",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:160},children:M.lastMessageText||"New message"}),M.lastMessageSeenAt&&a.jsx("span",{style:{marginLeft:6,color:"#64748b",fontSize:11},children:new Date(M.lastMessageSeenAt).toLocaleTimeString()})]})]})]},M.chatId||he)),U.length===0&&Kn===0&&a.jsx("div",{style:{padding:15},children:"No notifications"})]})]})]}),a.jsx("div",{className:"icon-circle",style:{position:"relative",marginLeft:12},children:a.jsxs("div",{onClick:()=>He("/all-chat"),style:{cursor:"pointer",position:"relative"},children:[a.jsx(rs,{size:22}),Kn>0&&a.jsx("span",{style:{position:"absolute",top:-6,right:-6,background:"#f60b0b",color:"#fff",borderRadius:"50%",minWidth:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 5px"},children:Kn})]})}),a.jsx("div",{className:"icon-circle",onClick:()=>He("/settings"),children:a.jsx(xr,{})}),a.jsx("img",{src:(z==null?void 0:z.profileImage)||"/default-profile.png"})]})]}),a.jsxs("div",{className:"google-dashboard",children:[typeof window<"u"&&g.useEffect(()=>{const M=()=>{window.innerWidth<=600?e(!1):e(!0)};return window.addEventListener("resize",M),M(),()=>window.removeEventListener("resize",M)},[]),typeof window<"u"&&window.innerWidth<=600&&!t&&a.jsx("button",{className:"sidebar-arrow-btn",style:{position:"fixed",left:0,top:0,zIndex:1300,background:"#fff",border:"none",borderRadius:"0 8px 8px 0",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",padding:8,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:()=>e(!0),"aria-label":"Open sidebar menu",children:a.jsx(Pr,{size:22})}),typeof window<"u"&&window.innerWidth<=600&&t&&a.jsx("div",{className:"sidebar-overlay visible",onClick:()=>e(!1),style:{display:"block",position:"fixed",inset:0,background:"rgba(0,0,0,0.35)",zIndex:1200}}),a.jsxs("div",{className:`google-sidebar${typeof window<"u"&&window.innerWidth<=600&&t?" open":""}`,style:typeof window<"u"&&window.innerWidth<=600?{position:"fixed",top:64,left:t?0:"-220px",width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",zIndex:1200,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto",borderRadius:0,transition:"left 0.25s cubic-bezier(.4,0,.2,1)"}:{position:"fixed",top:64,left:0,width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.04)",zIndex:900,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto",borderRadius:0},children:[a.jsx("style",{children:`
                    @media (max-width: 600px) {
                      .google-sidebar {
                        left: -220px;
                        transition: left 0.25s cubic-bezier(.4,0,.2,1);
                        border-radius: 0 !important;
                      }
                      .google-sidebar.open {
                        left: 0 !important;
                        z-index: 1202;
                        border-radius: 0 !important;
                      }
                      .sidebar-overlay {
                        display: block;
                        position: fixed;
                        inset: 0;
                        background: rgba(0,0,0,0.35);
                        z-index: 1200;
                        transition: opacity 0.2s;
                      }
                      .sidebar-arrow-btn {
                        display: flex !important;
                      }
                    }
                  `}),z&&a.jsxs("div",{className:"sidebar-profile",children:[a.jsx("div",{className:"sidebar-img-circle",children:a.jsx("img",{src:z.profileImage||"/default-profile.png",alt:"profile"})}),a.jsx("h3",{children:z.name}),a.jsx("p",{children:z.username})]}),a.jsxs("div",{className:"sidebar-menu",children:[a.jsxs(ye,{className:"sidebar-btn",to:"/dashboard",children:[a.jsx(Dr,{})," Home"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/students",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[a.jsx(Ye,{})," Students"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/admins",children:[a.jsx(Ye,{})," Admins"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/parents",children:[a.jsx(Or,{})," Parents"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/marks",children:[a.jsx(Jt,{})," Marks"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/attendance",children:[a.jsx(Ye,{})," Attendance"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/schedule",children:[a.jsx(Ye,{})," Schedule"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/lesson-plan",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[a.jsx(Jt,{})," Lesson Plan"]}),a.jsxs("button",{className:"sidebar-btn logout-btn",onClick:Tl,children:[a.jsx(Mr,{})," Logout"]})]})]}),a.jsxs("div",{style:{flex:1,display:"flex",justifyContent:"center",padding:"30px"},children:[a.jsxs("div",{className:"student-list-card-responsive",style:{width:"220px",position:"relative",marginLeft:"30px",marginRight:rr?0:"30px"},children:[a.jsx("style",{children:`
               @media (max-width: 600px) {
                 .student-list-card-responsive {
                   margin-left: -16px !important;
                   margin-right: auto !important;
                   width: 70vw !important;
                   max-width: 70vw !important;
                 }
               }
             `}),a.jsx("h2",{style:{textAlign:"center",marginBottom:"20px"},children:"My Students"}),a.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px",flexWrap:"wrap"},children:[a.jsx("button",{onClick:()=>c("All"),style:{padding:"8px 15px",borderRadius:"8px",background:o==="All"?"#4b6cb7":"#ddd",color:o==="All"?"#fff":"#000",border:"none"},children:"All Grades"}),_r.map(M=>a.jsxs("button",{onClick:()=>c(M),style:{padding:"8px 15px",borderRadius:"8px",background:o===M?"#4b6cb7":"#ddd",color:o===M?"#fff":"#000",border:"none"},children:["Grade ",M]},M))]}),o!=="All"&&a.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"20px",flexWrap:"wrap"},children:[a.jsx("button",{onClick:()=>d("All"),style:{padding:"6px 12px",borderRadius:"8px",background:u==="All"?"#4b6cb7":"#ddd",color:u==="All"?"#fff":"#000",border:"none"},children:"All Sections"}),f.map(M=>a.jsxs("button",{onClick:()=>d(M),style:{padding:"6px 12px",borderRadius:"8px",background:u===M?"#4b6cb7":"#ddd",color:u===M?"#fff":"#000",border:"none"},children:["Section ",M]},M))]}),St&&a.jsx("p",{children:"Loading students..."}),s&&a.jsx("p",{style:{color:"red"},children:s}),!St&&!s&&kl.length===0&&a.jsx("p",{children:"No students found."}),a.jsx("style",{children:`
              .student-list-responsive {
                display: flex;
                flex-direction: column;
                margin-top: 30px;
                gap: 12px;
                width: 100%;
                max-width: 100vw;
                margin-left: 0;
                margin-right: 0;
              }
              @media (max-width: 600px) {
                .student-list-responsive {
                  width: 100vw !important;
                  max-width: 100vw !important;
                  margin-left: 0 !important;
                  margin-right: 0 !important;
                  padding: 0 !important;
                  align-items: flex-start !important;
                }
                .student-list-responsive > div {
                  margin-left: 10px !important;
                  padding-left: 10px !important;
                  width: 100vw !important;
                  max-width: 100vw !important;
                  min-width: 100vw !important;
                  box-sizing: border-box !important;
                }
              }
              @media (min-width: 350px) {
                .student-list-responsive {
                  width: 350px;
                  max-width: 70vw;
                }
              }
               @media (max-width: 600px) {
                 .student-list-card-responsive {
                   margin-left: -32px !important;
                   margin-right: auto !important;
                   width: 80vw !important;
                   max-width: 80vw !important;
                 }
               }
                  width: 500px;
                  max-width: 80vw;
                }
              }
              @media (min-width: 1200px) {
                .student-list-responsive {
                  width: 600px;
                  max-width: 700px;
                  margin-left: -100px;
                }
              }
              @media (min-width: 1500px) {
                .student-list-responsive {
                  width: 600px;
                  max-width: 700px;
                  margin-left: -250px;
                }
              }
            `}),a.jsx("div",{className:"student-list-responsive",children:kl.map((M,he)=>a.jsx(vN,{student:M,selected:(F==null?void 0:F.userId)===M.userId,onClick:()=>Te(M)},M.userId||M.id||he))})]}),F&&a.jsxs("div",{style:{width:rr?"100%":"30%",height:rr?"100vh":"calc(100vh - 60px)",position:"fixed",right:0,top:rr?0:"60px",background:"#fff",zIndex:1e3,display:"flex",flexDirection:"column",overflowY:"auto",boxShadow:rr?"0 0 0 rgba(0,0,0,0)":"0 0 15px rgba(0,0,0,0.08)",transition:"all 0.35s ease"},children:[a.jsx("button",{onClick:()=>Te(null),style:{position:"fixed",top:56,right:16,width:42,height:42,borderRadius:12,border:"none",background:"#ffffff",boxShadow:"0 6px 18px rgba(2,6,23,0.15)",cursor:"pointer",fontSize:22,fontWeight:900,zIndex:2e3},children:""}),a.jsxs("div",{style:{textAlign:"center",marginBottom:"20px",paddingTop:20},children:[a.jsx("div",{style:{width:"120px",height:"120px",margin:"0 auto 15px",borderRadius:"50%",overflow:"hidden",border:"4px solid #4b6cb7"},children:a.jsx("img",{src:F.profileImage,alt:F.name,style:{width:"100%",height:"100%",objectFit:"cover"}})}),a.jsx("h2",{style:{margin:0,fontSize:"22px"},children:F.name}),a.jsx("p",{style:{color:"#555",margin:"5px 0"},children:F.studentId}),a.jsxs("p",{style:{color:"#555",margin:"5px 0"},children:[a.jsx("strong",{children:"Grade:"})," ",F.grade,F.section]})]}),a.jsx("div",{style:{display:"flex",marginBottom:"15px"},children:["details","attendance","performance"].map(M=>a.jsx("button",{onClick:()=>I(M),style:{flex:1,padding:"10px",border:"none",background:"none",cursor:"pointer",fontWeight:"600",color:y===M?"#4b6cb7":"#777",borderBottom:y===M?"3px solid #4b6cb7":"3px solid transparent"},children:M.toUpperCase()},M))}),a.jsxs("div",{children:[y==="details"&&a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:28,padding:50,marginLeft:0,marginRight:0,borderRadius:0,background:"linear-gradient(180deg,#eef2ff,#f8fafc)",fontFamily:"Inter, system-ui"},children:a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:24,fontWeight:900,marginBottom:18,marginTop:-30,background:"linear-gradient(90deg,#2563eb,#7c3aed)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Student Details"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",columnGap:68,rowGap:14},children:[["Phone",J==null?void 0:J.phone],["Gender",J==null?void 0:J.gender],["Email",J==null?void 0:J.email],["Grade",J==null?void 0:J.grade],["Section",J==null?void 0:J.section],["Age",J==null?void 0:J.age],["Birth Date",J==null?void 0:J.dob],["Parent Name",J==null?void 0:J.parentName],["Parent Phone",J==null?void 0:J.parentPhone]].map(([M,he])=>a.jsxs("div",{style:{padding:18,borderRadius:20,background:"#ffffff",boxShadow:"0 6px 10px rgba(0,0,0,0.08)",marginLeft:-30,marginRight:-30},children:[a.jsx("div",{style:{fontSize:12,fontWeight:700,color:"#000102",textTransform:"uppercase"},children:M}),a.jsx("div",{style:{marginTop:8,fontSize:16,fontWeight:400,color:"#000102"},children:he||""})]},M))}),a.jsxs("div",{style:{marginTop:36},children:[a.jsx("div",{style:{fontSize:22,fontWeight:900,marginBottom:14,color:"#1e293b"},children:"Teacher Comments"}),a.jsxs("div",{style:{background:"#ffffff",padding:18,borderRadius:22,boxShadow:"0 14px 40px rgba(0,0,0,0.1)"},children:[a.jsx("textarea",{value:ae,onChange:M=>H(M.target.value),placeholder:"Write an important comment about the student...",style:{width:"100%",minHeight:30,border:"none",outline:"none",resize:"vertical",fontSize:15,lineHeight:1.6}}),a.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:12},children:a.jsx("button",{onClick:id,disabled:ue,style:{padding:"10px 22px",borderRadius:999,border:"none",background:"linear-gradient(135deg,#2563eb,#7c3aed)",color:"#fff",fontWeight:900,cursor:"pointer",boxShadow:"0 12px 30px rgba(37,99,235,0.45)"},children:ue?"Saving...":"Add Comment"})})]}),a.jsx("div",{style:{marginTop:18,display:"flex",flexDirection:"column",gap:14},children:Z.length===0?a.jsx("div",{style:{textAlign:"center",padding:18,color:"#64748b",background:"#ffffff",borderRadius:18},children:"No teacher comments yet"}):Z.map(M=>{var he;return a.jsxs("div",{style:{display:"flex",gap:12},children:[a.jsx("div",{style:{width:44,height:44,borderRadius:"50%",background:"linear-gradient(135deg,#60a5fa,#2563eb)",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:900},children:((he=M.teacherName)==null?void 0:he.split(" ").map(Ae=>Ae[0]).join("").slice(0,2).toUpperCase())||"T"}),a.jsxs("div",{style:{flex:1,background:"#ffffff",padding:14,borderRadius:18,boxShadow:"0 8px 24px rgba(0,0,0,0.08)"},children:[a.jsx("div",{style:{fontWeight:800,color:"#1e293b"},children:M.teacherName}),a.jsx("div",{style:{marginTop:6},children:M.note}),a.jsx("div",{style:{marginTop:6,fontSize:12,color:"#64748b",textAlign:"right"},children:new Date(M.createdAt).toLocaleString()})]})]},M.id)})})]})]})}),y==="attendance"&&F&&a.jsxs("div",{style:{padding:30,background:"radial-gradient(circle at top,#eef2ff,#f8fafc)",borderRadius:26,fontFamily:"Inter, system-ui"},children:[a.jsx("div",{style:{display:"flex",justifyContent:"center",gap:16,marginBottom:32},children:["daily","weekly","monthly"].map(M=>a.jsx("button",{onClick:()=>de(M),style:{padding:"12px 28px",borderRadius:999,border:"none",fontWeight:800,fontSize:13,letterSpacing:1,cursor:"pointer",background:ke===M?"linear-gradient(135deg,#4f46e5,#2563eb)":"rgba(255,255,255,.8)",color:ke===M?"#fff":"#1f2937",boxShadow:ke===M?"0 5px 5px rgba(79,70,229,.45)":"0 5px 5px rgba(0,0,0,.08)",transition:"all .3s ease"},children:M.toUpperCase()},M))}),Object.entries(Nl).filter(([M])=>ge==="All"||M===ge).map(([M,he])=>{var ot;const Ae=new Date().toDateString(),qe=he.filter(Ve=>{var Pe,Oe,tt,Nt;return((Oe=(Pe=new Date(Ve.date)).getWeek)==null?void 0:Oe.call(Pe))===((Nt=(tt=new Date).getWeek)==null?void 0:Nt.call(tt))}),Ge=he.filter(Ve=>new Date(Ve.date).getMonth()===new Date().getMonth()),ft=ke==="daily"?he.filter(Ve=>new Date(Ve.date).toDateString()===Ae):ke==="weekly"?qe:Ge,it=Fo(ft),Me=`${ke}-${M}`;return a.jsxs("div",{onClick:()=>Ti(Me),style:{cursor:"pointer",background:"linear-gradient(180deg,rgba(255,255,255,.95),rgba(255,255,255,.85))",backdropFilter:"blur(14px)",borderRadius:26,padding:26,marginBottom:26,boxShadow:"0 10px 10px rgba(0,0,0,.12)",position:"relative",overflow:"hidden"},children:[a.jsx("div",{style:{position:"absolute",inset:0,background:"radial-gradient(circle at top left,rgba(99,102,241,.15),transparent 60%)",pointerEvents:"none"}}),a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:18},children:[a.jsxs("div",{children:[a.jsxs("h3",{style:{margin:0,fontSize:20,fontWeight:900,color:"#1e3a8a"},children:[" ",mN(M)]}),a.jsxs("p",{style:{margin:"6px 0 0",fontSize:13,color:"#64748b"},children:[" ",(ot=he[0])==null?void 0:ot.teacherName]})]}),a.jsxs("div",{style:{padding:"8px 16px",borderRadius:999,fontSize:13,fontWeight:900,background:it>=75?"linear-gradient(135deg,#22c55e,#16a34a)":it>=50?"linear-gradient(135deg,#facc15,#eab308)":"linear-gradient(135deg,#ef4444,#dc2626)",color:"#fff",boxShadow:"0 10px 25px rgba(0,0,0,.25)"},children:[it,"%"]})]}),a.jsx("div",{onClick:()=>Ti(Me),style:{height:16,background:"#e5e7eb",borderRadius:999,cursor:"pointer",overflow:"hidden",marginBottom:10},children:a.jsx("div",{style:{height:"100%",width:`${it}%`,background:it>=75?"linear-gradient(90deg,#22c55e,#16a34a)":it>=50?"linear-gradient(90deg,#facc15,#eab308)":"linear-gradient(90deg,#ef4444,#dc2626)",transition:"width .5s cubic-bezier(.4,0,.2,1)"}})}),a.jsxs("div",{style:{fontSize:12,fontWeight:700,color:"#475569",marginBottom:12,letterSpacing:.6},children:["CLICK BAR TO VIEW ",ke.toUpperCase()," DETAILS"]}),Ze[Me]&&a.jsx("div",{style:{marginTop:14,background:"#f1f5f9",borderRadius:18,padding:14},children:ft.map((Ve,Pe)=>a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 8px",borderBottom:Pe!==ft.length-1?"1px solid #e5e7eb":"none"},children:[a.jsx("div",{style:{display:"flex",flexDirection:"column"},children:a.jsxs("span",{style:{fontSize:13,color:"#1f2937"},children:[" ",new Date(Ve.date).toDateString()]})}),a.jsx("span",{style:{padding:"6px 14px",borderRadius:999,fontSize:12,fontWeight:900,background:Ve.status==="present"?"#dcfce7":Ve.status==="late"?"#fef3c7":"#fee2e2",color:Ve.status==="present"?"#166534":Ve.status==="late"?"#92400e":"#991b1b"},children:Ve.status.toUpperCase()})]},Pe))})]},M)})]}),y==="performance"&&a.jsxs("div",{style:{position:"relative",paddingBottom:"70px",background:"#f8fafc"},children:[a.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"40px",marginBottom:"25px",borderBottom:"2px solid #e5e7eb",paddingBottom:"8px"},children:["semester1","semester2"].map(M=>{const he=At===M;return a.jsxs("button",{onClick:()=>Xt(M),style:{background:"none",border:"none",cursor:"pointer",fontSize:"16px",fontWeight:"800",color:he?"#2563eb":"#64748b",paddingBottom:"10px",position:"relative"},children:[M==="semester1"?"Semester 1":"Semester 2",he&&a.jsx("span",{style:{position:"absolute",bottom:"-2px",left:0,width:"100%",height:"4px",background:"linear-gradient(135deg,#4b6cb7,#1e40af)",borderRadius:"6px"}})]},M)})}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"20px",padding:"20px"},children:St?a.jsx("div",{style:{textAlign:"center",gridColumn:"1 / -1",padding:"30px"},children:"Loading performance..."}):Object.keys(L||{}).length===0?a.jsx("div",{style:{textAlign:"center",padding:"30px",borderRadius:"18px",background:"#ffffff",color:"#475569",fontSize:"16px",fontWeight:"600",boxShadow:"0 10px 25px rgba(0,0,0,0.08)",gridColumn:"1 / -1"},children:" No Performance Records"}):Object.entries(L).map(([M,he],Ae)=>{const qe=he==null?void 0:he[At];if(!qe)return null;const Ge=qe.assessments||{},ft=Object.values(Ge).reduce((Pe,Oe)=>Pe+(Oe.score||0),0),it=Object.values(Ge).reduce((Pe,Oe)=>Pe+(Oe.max||0),0),Me=it?ft/it*100:0,ot=Me>=75?"#16a34a":Me>=50?"#f59e0b":"#dc2626",Ve=M.replace("course_","").replace(/_/g," ").toUpperCase();return a.jsxs("div",{style:{padding:"18px",borderRadius:"20px",background:"#ffffff",boxShadow:"0 12px 30px rgba(0,0,0,0.08)"},children:[a.jsx("div",{style:{fontSize:"16px",fontWeight:"800",marginBottom:"14px",color:"#2563eb",textAlign:"center"},children:Ve}),a.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"16px"},children:a.jsx("div",{style:{width:"90px",height:"90px",borderRadius:"50%",background:`conic-gradient(${ot} ${Me*3.6}deg, #e5e7eb 0deg)`,display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsxs("div",{style:{width:"66px",height:"66px",borderRadius:"50%",background:"#fff",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[a.jsx("strong",{style:{color:ot},children:ft}),a.jsxs("span",{style:{fontSize:"11px"},children:["/ ",it]})]})})}),Object.entries(Ge).map(([Pe,Oe])=>a.jsxs("div",{style:{marginBottom:"10px"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"13px",fontWeight:"600"},children:[a.jsx("span",{children:Oe.name}),a.jsxs("span",{children:[Oe.score," / ",Oe.max]})]}),a.jsx("div",{style:{height:"6px",borderRadius:"999px",background:"#e5e7eb",marginTop:"5px"},children:a.jsx("div",{style:{width:`${Oe.score/Oe.max*100}%`,height:"100%",background:ot}})})]},Pe)),a.jsx("div",{style:{marginTop:"10px",textAlign:"center",fontWeight:"700",color:ot},children:Me>=75?"Excellent":Me>=50?"Good":"Needs Improvement"}),a.jsxs("div",{style:{marginTop:"6px",textAlign:"center",fontSize:"12px",color:"#64748b"},children:[" ",he.teacherName||qe.teacherName||"N/A"]})]},`${M}-${Ae}`)})})]})]}),!oe&&a.jsx("div",{onClick:()=>E(!0),style:{position:"fixed",bottom:"20px",right:"20px",width:"60px",height:"60px",background:"linear-gradient(135deg, #833ab4, #0259fa, #459afc)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",cursor:"pointer",zIndex:1e3,boxShadow:"0 8px 18px rgba(0,0,0,0.25)",transition:"transform 0.2s ease"},children:a.jsx(Op,{size:30})}),oe&&F&&a.jsxs("div",{style:{position:"fixed",bottom:"20px",right:"20px",width:"360px",height:"480px",background:"#fff",borderRadius:"16px",boxShadow:"0 12px 30px rgba(0,0,0,0.25)",zIndex:2e3,display:"flex",flexDirection:"column",overflow:"hidden"},children:[a.jsxs("div",{style:{padding:"14px",borderBottom:"1px solid #eee",display:"flex",justifyContent:"space-between",alignItems:"center",background:"#fafafa"},children:[a.jsx("strong",{children:F.name}),a.jsxs("div",{style:{display:"flex",gap:"10px"},children:[a.jsx("button",{onClick:()=>{E(!1),He("/all-chat",{state:{user:F,tab:"student"}})},style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px"},children:""}),a.jsx("button",{onClick:()=>E(!1),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:""})]})]}),a.jsxs("div",{style:{flex:1,padding:"12px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"6px",background:"#f9f9f9"},children:[V.length===0?a.jsxs("p",{style:{textAlign:"center",color:"#aaa"},children:["Start chatting with ",F.name]}):V.map(M=>{const he=String(M.senderId)===String(z==null?void 0:z.userId);return a.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:he?"flex-end":"flex-start",marginBottom:10},children:a.jsxs("div",{style:{maxWidth:"70%",background:he?"#4facfe":"#fff",color:he?"#fff":"#000",padding:"10px 14px",borderRadius:18,borderTopRightRadius:he?0:18,borderTopLeftRadius:he?18:0,boxShadow:"0 1px 3px rgba(0,0,0,0.1)",wordBreak:"break-word",cursor:"default",position:"relative"},children:[M.text," ",M.edited&&a.jsx("small",{style:{fontSize:10},children:" (edited)"}),a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:6,marginTop:6,fontSize:11,color:he?"#fff":"#888"},children:[a.jsx("span",{style:{marginRight:6,fontSize:11,opacity:.9},children:xN(M.timeStamp)}),a.jsx("span",{children:yN(M.timeStamp)}),he&&!M.deleted&&a.jsxs("span",{style:{display:"flex",gap:0,alignItems:"center"},children:[a.jsx(mo,{size:12,color:he?"#fff":"#888",style:{opacity:.85,marginLeft:6}}),M.seen&&a.jsx(mo,{size:12,color:he?"#f3f7f8":"#ccc",style:{marginLeft:2,opacity:.95}})]})]})]})},M.messageId||M.id)}),a.jsx("div",{ref:X})]}),a.jsxs("div",{style:{padding:"10px",borderTop:"1px solid #eee",display:"flex",gap:"8px",background:"#fff"},children:[a.jsx("input",{value:le,onChange:M=>B(M.target.value),placeholder:"Type a message...",style:{flex:1,padding:"10px 14px",borderRadius:"25px",border:"1px solid #ccc",outline:"none"},onKeyDown:M=>{M.key==="Enter"&&Al()}}),a.jsx("button",{onClick:()=>Al(),style:{width:45,height:45,borderRadius:"50%",background:"#4facfe",border:"none",color:"#fff",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},children:a.jsx(Vv,{})})]})]})]})]})]})]})}const _N="https://gojo-teacher-web.onrender.com/api",Tn="https://ethiostore-17d9f-default-rtdb.firebaseio.com";function bN(){const[t,e]=g.useState(window.innerWidth>600),[n,r]=g.useState(null),[s,i]=g.useState([]),[o,c]=g.useState([]),[u,d]=g.useState(""),[f,p]=g.useState([]),[y,I]=g.useState({}),[w,T]=g.useState(!1),[A,S]=g.useState("semester2"),[_,v]=g.useState([]),[O,G]=g.useState(!1),[oe,E]=g.useState([]),[x,C]=g.useState(null),[k,N]=g.useState(!1),R=zn(),[j,re]=g.useState(!1),[Ee,J]=g.useState([]);g.useEffect(()=>{const P=()=>{window.innerWidth<=600?e(!1):e(!0)};return window.addEventListener("resize",P),P(),()=>window.removeEventListener("resize",P)},[]),g.useEffect(()=>{const P=JSON.parse(localStorage.getItem("teacher"));if(!P){R("/login");return}r(P)},[R]);const Ce=n==null?void 0:n.userId;g.useEffect(()=>{n&&me(n)},[n]),g.useEffect(()=>{if(!u)return;(async()=>{try{const L=await ee.get(`${Tn}/ClassMarks/${u}.json`),te=s.find(de=>de.id===u);if(!te)return;const ce=o.filter(de=>de.grade===te.grade&&de.section===te.section),we={};let ke=[];ce.forEach(de=>{var Re,Ze;const ge=(Ze=(Re=L.data)==null?void 0:Re[de.id])==null?void 0:Ze[A];ge!=null&&ge.assessments?(we[de.id]=ge.assessments,ke.length||(ke=Object.values(ge.assessments))):we[de.id]={}}),I(we),p(ke.map(de=>({name:de.name,max:de.max}))),T(ke.length>0)}catch(L){console.error("Error loading marks:",L),T(!1),I({})}})()},[u,s,o,A]),g.useEffect(()=>{if(!n)return;(async()=>{try{const[L,te,ce]=await Promise.all([ee.get(`${Tn}/TeacherAssignments.json`),ee.get(`${Tn}/Courses.json`),ee.get(`${Tn}/Teachers.json`)]),we=Object.entries(ce.data||{}).find(([Re,Ze])=>Ze.userId===Ce);if(!we)return;const ke=we[0],de=Object.values(L.data||{}).filter(Re=>Re.teacherId===ke).map(Re=>Re.courseId),ge=Object.entries(te.data||{}).filter(([Re])=>de.includes(Re)).map(([Re,Ze])=>({id:Re,...Ze}));i(ge)}catch(L){console.error("Error fetching courses:",L)}})()},[n,Ce]),g.useEffect(()=>{if(!Ce)return;(async()=>{try{const[L,te]=await Promise.all([ee.get(`${Tn}/Students.json`),ee.get(`${Tn}/Users.json`)]),ce=L.data||{},we=te.data||{},ke=Object.entries(ce).map(([de,ge])=>{var Re,Ze;return{id:de,...ge,name:((Re=we==null?void 0:we[ge.userId])==null?void 0:Re.name)||"Unknown",profileImage:((Ze=we==null?void 0:we[ge.userId])==null?void 0:Ze.profileImage)||"/default-profile.png"}});c(ke)}catch(L){console.error("Error fetching students:",L),c([])}})()},[Ce]),g.useEffect(()=>{u&&(p([]),T(!1),I({}))},[u]);const Z=()=>p(P=>[...P,{name:"",max:""}]),K=(P,L,te)=>{const ce=[...f];ce[P][L]=te,p(ce)},ae=P=>p(L=>L.filter((te,ce)=>ce!==P)),H=async()=>{if(f.reduce((L,te)=>L+Number(te.max||0),0)!==100){alert("Total MAX must be exactly 100");return}const P={};f.forEach((L,te)=>{P[`a${te+1}`]={name:L.name,max:Number(L.max),score:0}});try{const L=s.find(we=>we.id===u);if(!L)return;const te=o.filter(we=>we.grade===L.grade&&we.section===L.section);await Promise.all(te.map(we=>ee.put(`${Tn}/ClassMarks/${u}/${we.id}/${A}.json`,{teacherName:n.name,assessments:P})));const ce={};te.forEach(we=>{ce[we.id]=P}),I(ce),T(!0),alert("Assessment structure saved!")}catch(L){console.error("Error submitting structure:",L),alert("Failed to submit structure")}},ue=(P,L,te)=>{I(ce=>({...ce,[P]:{...ce[P],[L]:{...ce[P][L],score:Number(te)}}}))},Ie=async P=>{try{await ee.put(`${Tn}/ClassMarks/${u}/${P}/${A}.json`,{teacherName:n.name,assessments:y[P]}),alert("Marks saved successfully")}catch(L){console.error("Save failed:",L),alert("Failed to save marks")}},_e=()=>{localStorage.removeItem("teacher"),R("/login")};g.useEffect(()=>{(async()=>{try{let te=(await ee.get(`${_N}/get_posts`)).data||[];!Array.isArray(te)&&typeof te=="object"&&(te=Object.values(te));const[ce,we]=await Promise.all([ee.get(`${Tn}/School_Admins.json`),ee.get(`${Tn}/Users.json`)]),ke=ce.data||{},de=we.data||{},ge=JSON.parse(localStorage.getItem("teacher")),Re=F(ge==null?void 0:ge.userId),Ze=$e=>{const St=$e.adminId||$e.posterAdminId||$e.poster||$e.admin||null;if(St&&ke[St]){const et=ke[St],qt=et.userId,Ct=de[qt]||null,At=Ct&&Ct.name||et.name||$e.adminName||"Admin",Xt=Ct&&Ct.profileImage||et.profileImage||$e.adminProfile||"/default-profile.png";return{name:At,profile:Xt}}return{name:$e.adminName||"Admin",profile:$e.adminProfile||"/default-profile.png"}},pt=te.slice().sort(($e,St)=>(St.time?new Date(St.time).getTime():0)-($e.time?new Date($e.time).getTime():0)).filter($e=>$e.postId&&!Re.includes($e.postId)).slice(0,5).map($e=>{var et;const St=Ze($e);return{type:"post",id:$e.postId,title:((et=$e.message)==null?void 0:et.substring(0,50))||"Untitled post",adminName:St.name,adminProfile:St.profile}});let vt=[];try{const $e=ge;if($e&&$e.userId){const[St,et]=await Promise.all([ee.get(`${Tn}/Chats.json`),ee.get(`${Tn}/Users.json`)]),qt=St.data||{},At=et.data||{}||{},Xt={};Object.entries(At).forEach(([un,D])=>{D&&D.userId&&(Xt[D.userId]=un)}),vt=Object.entries(qt).map(([un,D])=>{const Q=(D.unread||{})[$e.userId]||0;if(!Q)return null;const U=D.participants||{},be=Object.keys(U||{}).find(st=>st!==$e.userId);if(!be)return null;let De=be,ze=At[De];if(!ze){const st=Xt[be];st&&(De=st,ze=At[st])}ze||(ze={userId:be,name:be,profileImage:"/default-profile.png"});const gt={pushKey:De,userId:ze.userId||be,name:ze.name||ze.username||be,profileImage:ze.profileImage||ze.profile||"/default-profile.png"},jt=D.lastMessage||{};return{type:"message",chatId:un,displayName:gt.name,profile:gt.profileImage,lastMessageText:jt.text||"",lastMessageTime:jt.timeStamp||jt.time||null,unreadForMe:Q}}).filter(Boolean).sort((un,D)=>(D.lastMessageTime||0)-(un.lastMessageTime||0))}}catch($e){console.error("Error fetching message notifications:",$e)}v([...pt,...vt]),E(vt)}catch(L){console.error("Error fetching notifications:",L)}})()},[]);const me=async(P=n)=>{try{const L=P||JSON.parse(localStorage.getItem("teacher"));if(!L||!L.userId){J([]);return}const[te,ce]=await Promise.all([ee.get(`${Tn}/Chats.json`),ee.get(`${Tn}/Users.json`)]),we=te.data||{},de=ce.data||{}||{},ge={};Object.entries(de).forEach(([Ze,pt])=>{pt&&pt.userId&&(ge[pt.userId]=Ze)});const Re=Object.entries(we).map(([Ze,pt])=>{const $e=(pt.unread||{})[L.userId]||0;if(!$e)return null;const St=pt.participants||{},et=Object.keys(St||{}).find(un=>un!==L.userId);if(!et)return null;let qt=et,Ct=de[qt];if(!Ct){const un=ge[et];un&&(qt=un,Ct=de[un])}Ct||(Ct={userId:et,name:et,profileImage:"/default-profile.png"});const At={pushKey:qt,userId:Ct.userId||et,name:Ct.name||Ct.username||et,profileImage:Ct.profileImage||Ct.profile||"/default-profile.png"},Xt=pt.lastMessage||{};return{chatId:Ze,contact:At,displayName:At.name,profile:At.profileImage,lastMessageText:Xt.text||"",lastMessageTime:Xt.timeStamp||Xt.time||null,unreadForMe:$e}}).filter(Boolean).sort((Ze,pt)=>(pt.lastMessageTime||0)-(Ze.lastMessageTime||0));J(Re)}catch(L){console.error("Error fetching conversations:",L),J([])}},z=oe.reduce((P,L)=>P+(L.unreadForMe||0),0),pe=P=>{!n||!P||(Te(n.userId,P),v(L=>L.filter(te=>te.id!==P)),G(!1))};function F(P){return JSON.parse(localStorage.getItem(`seen_posts_${P}`))||[]}function Te(P,L){const te=F(P);te.includes(L)||localStorage.setItem(`seen_posts_${P}`,JSON.stringify([...te,L]))}const se=g.useRef(null),[ve,V]=g.useState(!1),[ie,le]=g.useState(!1),B=()=>{const P=se.current;if(!P)return;const{scrollLeft:L,scrollWidth:te,clientWidth:ce}=P;V(L>8),le(L+ce<te-8)};g.useEffect(()=>{const P=se.current;if(!P)return;B();const L=()=>B(),te=()=>B();return P.addEventListener("scroll",L,{passive:!0}),window.addEventListener("resize",te),()=>{P.removeEventListener("scroll",L),window.removeEventListener("resize",te)}},[w,f.length]),g.useEffect(()=>{const P="responsive-marks-table-style";if(document.getElementById(P))return;const L=document.createElement("style");L.id=P,L.innerHTML=`
      @media (max-width: 600px) {
        .google-main {
          margin-left: 0 !important;
          padding-left: 0 !important;
          width: 100vw !important;
          max-width: 100vw !important;
          overflow-x: auto !important;
        }
        .marks-table-wrapper {
          width: 100vw !important;
          max-width: 100vw !important;
          overflow-x: auto !important;
          padding: 0 2vw !important;
        }
        .marks-table {
          min-width: 600px !important;
          width: auto !important;
          max-width: 100vw !important;
          table-layout: auto !important;
          overflow-x: auto !important;
        }
        .marks-table th, .marks-table td {
          font-size: 12px !important;
          padding: 8px !important;
          white-space: normal !important;
        }
        .marks-table td input {
          min-width: 40px;
          width: 100%;
          font-size: 12px;
          padding: 8px;
        }
      }
    `,document.head.appendChild(L)},[]);const X=()=>{const L=[["Student",...f.map(te=>`${te.name} (${te.max})`),"Total","Grade"]];return Object.entries(y).forEach(([te,ce])=>{const we=o.find(Re=>Re.id===te)||{name:te},ke=Object.values(ce).map(Re=>Re.score!=null?Re.score:""),de=Object.values(ce).reduce((Re,Ze)=>Re+(Ze.score||0),0),ge=de>=90?"A":de>=80?"B":de>=70?"C":de>=60?"D":"F";L.push([we.name,...ke,de,ge])}),L},ne=(P="marks.xls")=>{const L=X();let te="<table border=1>";L.forEach(ke=>{te+="<tr>"+ke.map(de=>`<td>${String(de??"").replace(/</g,"&lt;")}</td>`).join("")+"</tr>"}),te+="</table>";const ce="data:application/vnd.ms-excel;charset=utf-8,"+encodeURIComponent(te),we=document.createElement("a");we.href=ce,we.setAttribute("download",P),document.body.appendChild(we),we.click(),document.body.removeChild(we)};return a.jsxs("div",{className:"dashboard-page",children:[a.jsxs("nav",{className:"top-navbar",children:[window.innerWidth<=600&&!t&&a.jsx("button",{className:"sidebar-arrow-btn",style:{position:"fixed",left:0,top:180,transform:"none",zIndex:1300,background:"#fff",border:"none",borderRadius:"0 8px 8px 0",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",padding:8,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:()=>e(!0),"aria-label":"Open sidebar menu",children:a.jsx(Pr,{size:22})}),a.jsx("h2",{children:"Gojo Dashboard"}),a.jsxs("div",{className:"nav-right",children:[a.jsxs("div",{className:"icon-circle",style:{position:"relative"},children:[a.jsxs("div",{onClick:()=>G(!O),style:{cursor:"pointer",position:"relative"},"aria-label":"Show notifications",tabIndex:0,role:"button",onKeyPress:P=>{P.key==="Enter"&&G(!O)},children:[a.jsx(ss,{size:24}),_.length+z>0&&a.jsx("span",{style:{position:"absolute",top:-5,right:-5,background:"red",color:"white",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:_.length+z})]}),O&&a.jsxs(a.Fragment,{children:[a.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.08)",zIndex:1999},onClick:()=>G(!1)}),a.jsxs("div",{className:"notification-popup",style:typeof window<"u"&&window.innerWidth<=600?{position:"fixed",left:"50%",top:"8%",transform:"translate(-50%, 0)",width:"90vw",maxWidth:340,zIndex:2e3,background:"#fff",borderRadius:12,boxShadow:"0 2px 16px rgba(0,0,0,0.18)",maxHeight:"70vh",overflowY:"auto",padding:12}:{position:"absolute",top:30,right:0,width:300,maxHeight:400,overflowY:"auto",background:"#fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",borderRadius:8,zIndex:100},children:[_.length>0&&_.map((P,L)=>P.type==="post"?a.jsxs("div",{onClick:()=>pe(P.id),style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:P.adminProfile,alt:P.adminName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:P.adminName}),a.jsx("p",{style:{margin:0,fontSize:12},children:P.title})]})]},P.id||L):null),z>0&&Ee.filter(P=>P.unreadForMe>0).map((P,L)=>a.jsxs("div",{onClick:()=>{G(!1),R("/all-chat")},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:P.profile||"/default-profile.png",alt:P.displayName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:P.displayName}),a.jsx("p",{style:{margin:0,fontSize:12,color:"#0b78f6"},children:"New message"})]})]},P.chatId||L)),_.length===0&&z===0&&a.jsx("div",{style:{padding:15},children:"No notifications"})]})]})]}),a.jsx("div",{className:"icon-circle",style:{position:"relative",marginLeft:12},children:a.jsxs("div",{onClick:()=>R("/all-chat"),style:{cursor:"pointer",position:"relative"},children:[a.jsx(rs,{size:22}),z>0&&a.jsx("span",{style:{position:"absolute",top:-6,right:-6,background:"#f60b0b",color:"#fff",borderRadius:"50%",minWidth:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 6px"},children:z})]})}),a.jsx("div",{className:"icon-circle",onClick:()=>R("/settings"),children:a.jsx(xr,{})}),a.jsx("img",{src:(n==null?void 0:n.profileImage)||"/default-profile.png",alt:"profile"})]})]}),a.jsxs("div",{className:"google-dashboard",children:[window.innerWidth<=600&&t&&a.jsx("div",{className:"sidebar-overlay visible",onClick:()=>e(!1),style:{display:"block"}}),a.jsxs("div",{className:`google-sidebar${t?" open":""}`,style:window.innerWidth<=600?{position:"fixed",top:64,left:t?0:"-220px",width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",zIndex:1200,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto",transition:"left 0.25s cubic-bezier(.4,0,.2,1)"}:{position:"fixed",top:64,left:0,width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.04)",zIndex:900,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto"},children:[n&&a.jsxs("div",{className:"sidebar-profile",children:[a.jsx("div",{className:"sidebar-img-circle",children:a.jsx("img",{src:n.profileImage||"/default-profile.png",alt:"profile"})}),a.jsx("h3",{children:n.name}),a.jsx("p",{children:n.username})]}),a.jsxs("div",{className:"sidebar-menu",children:[a.jsxs(ye,{className:"sidebar-btn",to:"/dashboard",children:[a.jsx(Dr,{})," Home"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/students",children:[a.jsx(Ye,{})," Students"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/admins",children:[a.jsx(Ye,{})," Admins"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/parents",children:[a.jsx(Or,{})," Parents"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/marks",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[a.jsx(Jt,{})," Marks"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/attendance",children:[a.jsx(Ye,{})," Attendance"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/schedule",children:[a.jsx(Ye,{})," Schedule"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/lesson-plan",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[a.jsx(Jt,{})," Lesson Plan"]}),a.jsxs("button",{className:"sidebar-btn logout-btn",onClick:_e,children:[a.jsx(Mr,{})," Logout"]})]})]}),a.jsx("div",{className:"google-main",style:window.innerWidth<=600?{width:"100vw",maxWidth:"100vw",marginLeft:0,paddingLeft:0}:{textAlign:"left",marginLeft:200,paddingLeft:0},children:a.jsxs("div",{className:"main-inner",children:[a.jsx("h2",{style:{textAlign:"center",marginBottom:"35px",color:"#1e3a8a",fontSize:"36px",fontWeight:"700",letterSpacing:"1px"},children:"Marks Entry Dashboard"}),a.jsxs("div",{style:{marginBottom:"30px",display:"flex",justifyContent:"center",alignItems:"center",gap:"15px"},children:[a.jsx("label",{style:{fontWeight:"600",color:"#374151",fontSize:"16px"},children:"Select Course:"}),a.jsxs("select",{value:u,onChange:P=>d(P.target.value),style:{padding:"12px 18px",borderRadius:"12px",border:"1px solid #cbd5e1",background:"#fff",minWidth:"300px",fontSize:"15px",fontWeight:"500",boxShadow:"0 6px 15px rgba(0,0,0,0.08)",transition:"0.3s all"},children:[a.jsx("option",{value:"",children:"-- Select Course --"}),s.map(P=>a.jsxs("option",{value:P.id,children:[P.subject," - Grade ",P.grade," Section ",P.section]},P.id))]})]}),u&&a.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"40px",marginBottom:"35px",borderBottom:"2px solid #c7d2fe",paddingBottom:"10px"},children:["semester1","semester2"].map(P=>{const L=A===P;return a.jsxs("button",{onClick:()=>{S(P),T(!1),p([]),I({})},style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px",fontWeight:"700",letterSpacing:"1px",color:L?"#1e40af":"#6b7280",paddingBottom:"12px",position:"relative",transition:"0.3s all"},children:[P==="semester1"?"Semester 1":"Semester 2",L&&a.jsx("span",{style:{position:"absolute",left:0,bottom:"-2px",width:"100%",height:"4px",borderRadius:"6px",background:"linear-gradient(135deg, #4b6cb7, #1e40af)"}})]},P)})}),w&&a.jsxs("div",{style:{display:"flex",gap:"16px",marginBottom:"30px"},children:[a.jsxs("button",{style:{marginBottom:"0px",padding:"10px 18px",background:"linear-gradient(135deg, #f59e0b, #d97706)",color:"#fff",borderRadius:"12px",border:"none",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",boxShadow:"0 8px 20px rgba(0,0,0,0.15)",transition:"0.3s all"},onClick:()=>{T(!1),I({})},children:[a.jsx(Mj,{})," Edit Assessment Structure"]}),a.jsxs("button",{onClick:()=>ne(),style:{padding:"10px 16px",background:"#28a745",color:"#fff",border:"none",borderRadius:"8px",fontWeight:600,display:"flex",alignItems:"center",marginLeft:"0px",gap:8,boxShadow:"0 2px 8px 0 rgba(40,167,69,.07)",cursor:"pointer"},title:"Download as Excel",children:[a.jsx(Lj,{})," Download Excel"]})]}),u&&!w&&a.jsxs("div",{style:{backdropFilter:"blur(15px)",background:"rgba(255, 255, 255, 0.85)",padding:"30px",borderRadius:"20px",boxShadow:"0 15px 30px rgba(0,0,0,0.08)",marginBottom:"40px",transition:"all 0.3s ease"},children:[a.jsx("h3",{style:{marginBottom:"25px",color:"#1f2937",fontWeight:"600",fontSize:"20px"},children:"Assessment Structure"}),f.map((P,L)=>a.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"18px",alignItems:"center"},children:[a.jsx("input",{placeholder:"Assessment Name",value:P.name,onChange:te=>K(L,"name",te.target.value),style:{flex:2,padding:"12px 14px",borderRadius:"12px",border:"1px solid #d1d5db",outline:"none",boxShadow:"inset 0 3px 6px rgba(0,0,0,0.06)",fontWeight:"500"}}),a.jsx("input",{type:"number",placeholder:"Max",value:P.max,onChange:te=>K(L,"max",te.target.value),style:{flex:1,padding:"12px 14px",borderRadius:"12px",border:"1px solid #d1d5db",outline:"none",boxShadow:"inset 0 3px 6px rgba(0,0,0,0.06)",fontWeight:"500"}}),a.jsx("button",{onClick:()=>ae(L),style:{background:"#ef4444",color:"#fff",padding:"12px 14px",borderRadius:"12px",border:"none",cursor:"pointer",boxShadow:"0 6px 15px rgba(0,0,0,0.12)",transition:"0.3s all"},children:a.jsx(kc,{})})]},L)),a.jsxs("div",{style:{display:"flex",gap:"20px",alignItems:"center",marginTop:"20px"},children:[a.jsxs("button",{style:{padding:"12px 20px",borderRadius:"14px",background:"#10b981",color:"#fff",border:"none",cursor:"pointer",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 6px 18px rgba(0,0,0,0.12)",transition:"0.3s all"},onClick:Z,children:[a.jsx(uf,{})," Add Assessment"]}),a.jsxs("span",{style:{fontWeight:"600",color:"#374151",fontSize:"16px"},children:["Total Max: ",f.reduce((P,L)=>P+Number(L.max||0),0)," / 100"]})]}),a.jsx("button",{style:{marginTop:"30px",padding:"14px 20px",borderRadius:"16px",background:"linear-gradient(135deg, #4b6cb7, #1e40af)",color:"#fff",border:"none",fontWeight:"600",cursor:"pointer",boxShadow:"0 8px 20px rgba(0,0,0,0.15)",transition:"0.3s all",fontSize:"16px"},onClick:H,children:"Submit Structure"})]}),w&&a.jsx("div",{className:"marks-table-wrapper",ref:se,style:{position:"relative",overflowX:"visible",overflowY:"visible",minHeight:120,width:"100%",maxWidth:"100vw",paddingBottom:32,whiteSpace:"normal"},children:a.jsxs("table",{className:"marks-table",style:{borderCollapse:"separate",borderSpacing:"0 12px",fontSize:"15px",minWidth:0,width:"100%",maxWidth:"100vw",tableLayout:"auto"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:"linear-gradient(135deg, #4b6cb7, #1e3a8a)",color:"#fff",borderRadius:"16px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",textTransform:"uppercase",letterSpacing:"1px",fontWeight:"600",fontSize:"14px"},children:[a.jsx("th",{style:{padding:"16px 20px",textAlign:"left",borderRadius:"16px 0 0 16px",background:"rgba(255,255,255,0.1)"},children:a.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx(Ye,{})," Student"]})}),f.map((P,L)=>a.jsxs("th",{style:{padding:"16px 18px",background:"rgba(255,255,255,0.05)",textAlign:"center",transition:"0.3s all"},children:[P.name," (",P.max,")"]},L)),a.jsx("th",{style:{padding:"16px 18px",background:"rgba(255,255,255,0.05)",textAlign:"center"},children:"Total"}),a.jsx("th",{style:{padding:"16px 18px",background:"rgba(255,255,255,0.05)",textAlign:"center"},children:"Grade"}),a.jsxs("th",{style:{padding:"16px 20px",borderRadius:"0 16px 16px 0",background:"rgba(255,255,255,0.1)",textAlign:"center"},children:[a.jsx(iu,{})," Save"]})]})}),a.jsx("tbody",{children:Object.entries(y).map(([P,L])=>{const te=Object.values(L).reduce((de,ge)=>de+(ge.score||0),0),ce=te>=90?"A":te>=80?"B":te>=70?"C":te>=60?"D":"F",we=o.find(de=>de.id===P),ke=ce==="A"?"#16a34a":ce==="B"?"#2563eb":ce==="C"?"#f59e0b":ce==="D"?"#f97316":"#ef4444";return a.jsxs("tr",{style:{background:"#f9fafb",borderRadius:"12px",marginBottom:"10px",transition:"0.3s all",cursor:"pointer"},onMouseEnter:de=>de.currentTarget.style.background="#e0e7ff",onMouseLeave:de=>de.currentTarget.style.background="#f9fafb",children:[a.jsxs("td",{style:{padding:"12px",display:"flex",alignItems:"center",gap:"12px",fontWeight:"600"},children:[a.jsx("div",{style:{width:"45px",height:"45px",borderRadius:"50%",overflow:"hidden",border:"2px solid #4b6cb7"},children:a.jsx("img",{src:(we==null?void 0:we.profileImage)||"/default-profile.png",alt:we==null?void 0:we.name,style:{width:"100%",height:"100%",objectFit:"cover"}})}),we==null?void 0:we.name]}),Object.entries(L).map(([de,ge])=>a.jsx("td",{style:{padding:"12px"},children:a.jsx("input",{type:"number",min:"0",max:ge.max,value:ge.score,onChange:Re=>ue(P,de,Re.target.value),style:{width:"70px",padding:"8px 12px",borderRadius:"10px",border:"1px solid #cbd5e1",textAlign:"center",boxShadow:"inset 0 3px 6px rgba(0,0,0,0.06)",transition:"0.3s all",fontWeight:"500"}})},de)),a.jsx("td",{style:{padding:"12px",fontWeight:"600"},children:te}),a.jsx("td",{style:{padding:"12px",fontWeight:"700",color:ke},children:ce}),a.jsx("td",{style:{padding:"12px"},children:a.jsx("button",{style:{padding:"8px 14px",borderRadius:"12px",background:"#2563eb",color:"#fff",border:"none",cursor:"pointer",transition:"0.3s all"},onClick:()=>Ie(P),onMouseEnter:de=>de.currentTarget.style.background="#1e40af",onMouseLeave:de=>de.currentTarget.style.background="#2563eb",children:a.jsx(iu,{})})})]},P)})})]})})]})})]})]})}const Qs="https://ethiostore-17d9f-default-rtdb.firebaseio.com";function SN(){const[t,e]=g.useState(window.innerWidth>600),[n,r]=g.useState([]),[s,i]=g.useState(!0),[o,c]=g.useState(""),[u,d]=g.useState(null),[f,p]=g.useState({}),[y,I]=g.useState(new Date().toISOString().split("T")[0]),[w,T]=g.useState(null),[A,S]=g.useState([]),_=zn(),[v,O]=g.useState([]),[G,oe]=g.useState(!1),[E,x]=g.useState([]),[C,k]=g.useState([]),[N,R]=g.useState(!1);g.useEffect(()=>{const J=()=>{e(window.innerWidth>600)};return window.addEventListener("resize",J),J(),()=>window.removeEventListener("resize",J)},[]),g.useEffect(()=>{const J=JSON.parse(localStorage.getItem("teacher"));if(!J){_("/login");return}d(J)},[_]),g.useEffect(()=>{if(!u)return;(async()=>{try{const[Ce,Z,K]=await Promise.all([ee.get(`${Qs}/TeacherAssignments.json`),ee.get(`${Qs}/Courses.json`),ee.get(`${Qs}/Teachers.json`)]),ae=Object.entries(K.data||{}).find(([,_e])=>_e.userId===u.userId);if(!ae)return;const H=ae[0],ue=Object.values(Ce.data||{}).filter(_e=>_e.teacherId===H).map(_e=>_e.courseId),Ie=Object.entries(Z.data||{}).filter(([_e])=>ue.includes(_e)).map(([_e,me])=>({id:_e,...me}));S(Ie),!w&&Ie.length>0&&T(Ie[0])}catch(Ce){console.error("Error fetching courses:",Ce)}})()},[u]),g.useEffect(()=>{if(!w)return;(async()=>{i(!0);try{const[Ce,Z]=await Promise.all([ee.get(`${Qs}/Students.json`),ee.get(`${Qs}/Users.json`)]),K=Ce.data||{},ae=Z.data||{},H=Object.entries(K).filter(([,ue])=>ue.grade===w.grade&&ue.section===w.section).map(([ue,Ie])=>{var _e,me;return{studentId:ue,...Ie,name:((_e=ae==null?void 0:ae[Ie.userId])==null?void 0:_e.name)||"Unknown",profileImage:((me=ae==null?void 0:ae[Ie.userId])==null?void 0:me.profileImage)||"/default-profile.png"}});r(H),c("")}catch{c("Failed to fetch students. Please try again."),r([])}finally{i(!1)}})()},[w]),g.useEffect(()=>{if(!w)return;(async()=>{try{const Ce=await ee.get(`${Qs}/Attendance/${w.id}/${y}.json`);p(Ce.data||{})}catch{p({})}})()},[w,y]);const j=(J,Ce)=>{p(Z=>({...Z,[J]:Ce}))},re=async()=>{if(!w){alert("Please select a course");return}try{await ee.put(`${Qs}/Attendance/${w.id}/${y}.json`,f),alert("Attendance saved successfully!")}catch{alert("Failed to save attendance")}},Ee=()=>{localStorage.removeItem("teacher"),_("/login")};return g.useEffect(()=>{const J="responsive-attendance-table";if(document.getElementById(J))return;const Ce=document.createElement("style");Ce.id=J,Ce.innerHTML=`
      @media (max-width: 600px) {
        .attendance-main-content-responsive {
          margin-left: 0 !important;
          width: 100vw !important;
          max-width: 100vw !important;
          padding: 8px 2vw !important;
          border-radius: 0 !important;
        }
        .attendance-table-wrapper {
          width: 100vw !important;
          max-width: 100vw !important;
          overflow-x: auto !important;
          padding: 0 1vw !important;
          background: #fff !important;
        }
        .attendance-table {
          min-width: 480px !important;
          width: auto !important;
          max-width: 100vw !important;
          table-layout: auto !important;
          overflow-x: auto !important;
          background: #fff !important;
        }
        .attendance-table th, .attendance-table td {
          font-size: 13px !important;
          padding: 7px !important;
          white-space: normal !important;
        }
      }
    `,document.head.appendChild(Ce)},[]),a.jsxs("div",{className:"dashboard-page",children:[a.jsxs("nav",{className:"top-navbar",children:[window.innerWidth<=600&&!t&&a.jsx("button",{className:"sidebar-arrow-btn",style:{position:"fixed",left:0,top:180,transform:"none",zIndex:1300,background:"#fff",border:"none",borderRadius:"0 8px 8px 0",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",padding:8,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:()=>e(!0),"aria-label":"Open sidebar menu",children:a.jsx(Pr,{size:22})}),a.jsx("h2",{children:"Gojo Dashboard"}),a.jsxs("div",{className:"nav-right",children:[a.jsx("div",{className:"icon-circle",onClick:()=>_("/settings"),children:a.jsx(xr,{})}),a.jsx("img",{src:(u==null?void 0:u.profileImage)||"/default-profile.png",alt:"teacher",className:"profile-img"})]})]}),a.jsxs("div",{className:"google-dashboard",children:[window.innerWidth<=600&&t&&a.jsx("div",{className:"sidebar-overlay visible",onClick:()=>e(!1),style:{display:"block"}}),a.jsxs("div",{className:`google-sidebar${t?" open":""}`,style:window.innerWidth<=600?{position:"fixed",top:54,left:t?0:"-220px",width:200,height:"calc(100vh - 54px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",zIndex:1200,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto",transition:"left 0.25s cubic-bezier(.4,0,.2,1)"}:{position:"fixed",top:64,left:0,width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.04)",zIndex:900,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto"},children:[u&&a.jsxs("div",{className:"sidebar-profile",children:[a.jsx("div",{className:"sidebar-img-circle",children:a.jsx("img",{src:u.profileImage||"/default-profile.png",alt:"profile"})}),a.jsx("h3",{children:u.name}),a.jsx("p",{children:u.username})]}),a.jsxs("div",{className:"sidebar-menu",children:[a.jsxs(ye,{className:"sidebar-btn",to:"/dashboard",children:[a.jsx(Dr,{})," Home"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/students",children:[a.jsx(Ye,{})," Students"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/admins",children:[a.jsx(Ye,{})," Admins"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/parents",children:[a.jsx(Or,{})," Parents"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/marks",children:[a.jsx(Jt,{})," Marks"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/attendance",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[a.jsx(Ye,{})," Attendance"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/schedule",children:[a.jsx(Ye,{})," Schedule"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/lesson-plan",children:[a.jsx(Jt,{})," Lesson Plan"]}),a.jsxs("button",{className:"sidebar-btn logout-btn",onClick:Ee,children:[a.jsx(Mr,{})," Logout"]})]})]}),a.jsxs("div",{className:"attendance-main-content-responsive",style:window.innerWidth<=600?{marginLeft:0,width:"100vw",maxWidth:"100vw",padding:"8px 2vw"}:{marginLeft:220,width:"calc(100vw - 240px)",padding:30},children:[a.jsx("h2",{style:{textAlign:"center",marginBottom:"25px",color:"#333"},children:"Attendance"}),a.jsxs("div",{style:{marginBottom:"20px",display:"flex",alignItems:"center",gap:"15px"},children:[a.jsx("label",{style:{fontWeight:"500",color:"#555"},children:"Select Course:"}),a.jsxs("select",{value:(w==null?void 0:w.id)||"",onChange:J=>{const Ce=A.find(Z=>Z.id===J.target.value);T(Ce||null)},style:{padding:"8px 12px",borderRadius:"8px",border:"1px solid #ccc",outline:"none",background:"#f9f9f9",minWidth:"200px",fontWeight:"500"},children:[a.jsx("option",{value:"",children:"-- Select Course --"}),A.map(J=>a.jsxs("option",{value:J.id,children:[J.name," - Grade ",J.grade," Section ",J.section]},J.id))]})]}),a.jsxs("div",{style:{marginBottom:"25px",display:"flex",alignItems:"center",gap:"15px"},children:[a.jsx("label",{style:{fontWeight:"500",color:"#555"},children:"Date:"}),a.jsx("input",{type:"date",value:y,onChange:J=>I(J.target.value),style:{padding:"8px 12px",borderRadius:"8px",border:"1px solid #ccc",outline:"none",background:"#f9f9f9"}})]}),a.jsx("div",{className:"attendance-table-wrapper",style:{width:"100%",maxWidth:"100vw",overflowX:"auto",marginBottom:20,background:"#fff",borderRadius:12,boxShadow:"0 2px 8px rgba(0,0,0,0.04)"},children:s?a.jsx("p",{children:"Loading students..."}):o?a.jsx("p",{style:{color:"red"},children:o}):a.jsxs("table",{className:"attendance-table",style:{width:"100%",borderCollapse:"collapse",background:"#fff"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:"#4b6cb7",color:"#fff",textAlign:"left"},children:[a.jsx("th",{style:{padding:"12px"},children:"Student"}),a.jsx("th",{style:{padding:"12px",textAlign:"center"},children:"Present"}),a.jsx("th",{style:{padding:"12px",textAlign:"center"},children:"Absent"}),a.jsx("th",{style:{padding:"12px",textAlign:"center"},children:"Late"})]})}),a.jsx("tbody",{children:n.map(J=>a.jsxs("tr",{style:{borderBottom:"1px solid #eee",transition:"background 0.3s"},onMouseEnter:Ce=>Ce.currentTarget.style.background="#f9f9f9",onMouseLeave:Ce=>Ce.currentTarget.style.background="transparent",children:[a.jsxs("td",{style:{padding:"12px",display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",overflow:"hidden",border:"2px solid #4b6cb7"},children:a.jsx("img",{src:J.profileImage||"/default-profile.png",alt:J.name,style:{width:"100%",height:"100%",objectFit:"cover"}})}),a.jsx("span",{style:{fontWeight:"500",color:"#333"},children:J.name})]}),a.jsx("td",{style:{padding:"10px",textAlign:"center"},children:a.jsx("button",{style:{background:f[J.studentId]==="present"?"#28a745":"#e0e0e0",color:f[J.studentId]==="present"?"#fff":"#333",padding:"6px 12px",border:"none",borderRadius:"6px",cursor:"pointer",transition:"0.2s"},onClick:()=>j(J.studentId,"present"),children:"Present"})}),a.jsx("td",{style:{padding:"10px",textAlign:"center"},children:a.jsx("button",{style:{background:f[J.studentId]==="absent"?"#dc3545":"#e0e0e0",color:f[J.studentId]==="absent"?"#fff":"#333",padding:"6px 12px",border:"none",borderRadius:"6px",cursor:"pointer",transition:"0.2s"},onClick:()=>j(J.studentId,"absent"),children:"Absent"})}),a.jsx("td",{style:{padding:"10px",textAlign:"center"},children:a.jsx("button",{style:{background:f[J.studentId]==="late"?"#ffc107":"#e0e0e0",color:f[J.studentId]==="late"?"#fff":"#333",padding:"6px 12px",border:"none",borderRadius:"6px",cursor:"pointer",transition:"0.2s"},onClick:()=>j(J.studentId,"late"),children:"Late"})})]},J.studentId))})]})}),a.jsx("div",{style:{textAlign:"center"},children:a.jsx("button",{style:{marginTop:"18px",padding:"12px 25px",borderRadius:"10px",background:"#4b6cb7",color:"#fff",fontWeight:"600",border:"none",cursor:"pointer",boxShadow:"0 4px 10px rgba(0,0,0,0.15)",transition:"0.3s"},onClick:re,onMouseEnter:J=>J.currentTarget.style.background="#3a539b",onMouseLeave:J=>J.currentTarget.style.background="#4b6cb7",children:"Save Attendance"})})]})]})]})}const Fy=(t,e)=>[t,e].sort().join("_"),CN=t=>{if(!t)return"";const e=new Date(t),n=e.getHours().toString().padStart(2,"0"),r=e.getMinutes().toString().padStart(2,"0");return`${n}:${r}`},jN="https://gojo-teacher-web.onrender.com/api",ps="https://ethiostore-17d9f-default-rtdb.firebaseio.com",EN=({admin:t,selected:e,onClick:n})=>a.jsxs("div",{onClick:()=>n(t),style:{width:"100%",borderRadius:"12px",padding:"15px",display:"flex",alignItems:"center",gap:"20px",cursor:"pointer",background:e?"#e0e7ff":"#fff",border:e?"2px solid #4b6cb7":"1px solid #ddd",boxShadow:e?"0 6px 15px rgba(75,108,183,0.3)":"0 4px 10px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},children:[a.jsx("img",{src:t.profileImage||"/default-profile.png",alt:t.name,style:{width:"50px",height:"50px",borderRadius:"50%",objectFit:"cover",border:e?"3px solid #4b6cb7":"3px solid red"}}),a.jsxs("div",{children:[a.jsx("h3",{style:{margin:0},children:t.name}),a.jsx("p",{style:{margin:"4px 0",color:"#555"},children:t.username||t.email})]})]});function IN(){const[t,e]=g.useState(!1),[n,r]=g.useState([]),[s,i]=g.useState(!0),[o,c]=g.useState(""),[u,d]=g.useState(null),[f,p]=g.useState("details"),[y,I]=g.useState(!1),[w,T]=g.useState([]),[A,S]=g.useState(""),_=g.useRef(null),[v,O]=g.useState(null),G=JSON.parse(localStorage.getItem("teacher"))||{},oe=String(G.userId||""),[E,x]=g.useState(null),[C,k]=g.useState([]),[N,R]=g.useState(!1),[j,re]=g.useState(null),Ee=g.useRef({}),[J,Ce]=g.useState(!1),[Z,K]=g.useState([]),ae=zn();g.useEffect(()=>{const se=JSON.parse(localStorage.getItem("teacher"));if(!se){ae("/login");return}O(se)},[ae]),g.useEffect(()=>{v&&_e(v)},[v]);const H=()=>{localStorage.removeItem("teacher"),ae("/login")};g.useEffect(()=>{async function se(){try{i(!0);const[ve,V]=await Promise.all([ee.get(`${ps}/Users.json`),ee.get(`${ps}/School_Admins.json`)]),ie=ve.data||{},le=V.data||{},B={};Object.entries(le).forEach(([ne,P])=>{P.userId&&(B[P.userId]={...P,adminKey:ne})});const X=Object.entries(ie).filter(([ne,P])=>{const L=(P.role||P.userType||"").toLowerCase();return L==="admin"||L==="school_admin"||L==="school_admins"}).map(([ne,P])=>{const L=B[P.userId];return{adminId:L&&L.adminKey||ne,...P,...L?{title:L.title,status:L.status,schoolAdminKey:L.adminKey}:{}}});r(X),c(X.length===0?"No admins found":"")}catch(ve){console.error(ve),c("Failed to fetch admins")}finally{i(!1)}}se()},[]),g.useEffect(()=>{var se;(se=_.current)==null||se.scrollIntoView({behavior:"smooth"})},[w]),g.useEffect(()=>{if(!oe||!E)return;const se=Fy(oe,E.userId),ve=Pt(Mt,`Chats/${se}/messages`);return so(ve,V=>{const ie=V.val()||{},le=Object.entries(ie).map(([B,X])=>({id:B,...X,isTeacher:X.senderId===oe})).sort((B,X)=>B.timeStamp-X.timeStamp);T(le),Object.entries(ie).forEach(([B,X])=>{if(X&&!X.seen&&X.receiverId===oe){const ne=Date.now();Er(Pt(Mt,`Chats/${se}/messages/${B}`),{seen:!0,seenAt:ne}).catch(()=>{})}}),Er(Pt(Mt,`Chats/${se}/unread`),{[oe]:0}).catch(()=>{})}),()=>T2(ve)},[oe,E]);const ue=async()=>{if(!A.trim()||!u)return;const se=oe,ve=u.userId,V=Fy(se,ve),ie=Date.now(),le={senderId:se,receiverId:ve,type:"text",text:A,imageUrl:null,replyTo:null,seen:!1,edited:!1,deleted:!1,timeStamp:ie};try{await ee.post(`${ps}/Chats/${V}/messages.json`,le),await ee.patch(`${ps}/Chats/${V}.json`,{participants:{[se]:!0,[ve]:!0},lastMessage:{text:A,senderId:se,seen:!1,timeStamp:ie},unread:{[se]:0,[ve]:1}}),S("")}catch(B){console.error("Send message error:",B)}};g.useEffect(()=>{(async()=>{try{let V=(await ee.get(`${jN}/get_posts`)).data||[];!Array.isArray(V)&&typeof V=="object"&&(V=Object.values(V));const[ie,le]=await Promise.all([ee.get(`${ps}/School_Admins.json`),ee.get(`${ps}/Users.json`)]),B=ie.data||{},X=le.data||{},ne=JSON.parse(localStorage.getItem("teacher")),P=Ie(ne==null?void 0:ne.userId),L=ce=>{const we=ce.adminId||ce.posterAdminId||ce.poster||ce.admin||null;if(we&&B[we]){const ke=B[we],de=ke.userId,ge=X[de]||null,Re=ge&&ge.name||ke.name||ce.adminName||"Admin",Ze=ge&&ge.profileImage||ke.profileImage||ce.adminProfile||"/default-profile.png";return{name:Re,profile:Ze}}return{name:ce.adminName||"Admin",profile:ce.adminProfile||"/default-profile.png"}},te=V.slice().sort((ce,we)=>{const ke=ce.time?new Date(ce.time).getTime():0;return(we.time?new Date(we.time).getTime():0)-ke}).filter(ce=>ce.postId&&!P.includes(ce.postId)).slice(0,5).map(ce=>{var ke;const we=L(ce);return{id:ce.postId,title:((ke=ce.message)==null?void 0:ke.substring(0,50))||"Untitled post",adminName:we.name,adminProfile:we.profile}});k(te)}catch(ve){console.error("Error fetching notifications:",ve)}})()},[]);function Ie(se){return JSON.parse(localStorage.getItem(`seen_posts_${se}`))||[]}const _e=async(se=v)=>{try{const ve=se||JSON.parse(localStorage.getItem("teacher"));if(!ve||!ve.userId){K([]);return}const[V,ie]=await Promise.all([ee.get(`${ps}/Chats.json`),ee.get(`${ps}/Users.json`)]),le=V.data||{},X=ie.data||{}||{},ne={};Object.entries(X).forEach(([L,te])=>{te&&te.userId&&(ne[te.userId]=L)});const P=Object.entries(le).map(([L,te])=>{const we=(te.unread||{})[ve.userId]||0;if(!we)return null;const ke=te.participants||{},de=Object.keys(ke||{}).find(vt=>vt!==ve.userId);if(!de)return null;let ge=de,Re=X[ge];if(!Re){const vt=ne[de];vt&&(ge=vt,Re=X[vt])}Re||(Re={userId:de,name:de,profileImage:"/default-profile.png"});const Ze={pushKey:ge,userId:Re.userId||de,name:Re.name||Re.username||de,profileImage:Re.profileImage||Re.profile||"/default-profile.png"},pt=te.lastMessage||{};return{chatId:L,contact:Ze,displayName:Ze.name,profile:Ze.profileImage,lastMessageText:pt.text||"",lastMessageTime:pt.timeStamp||pt.time||null,unreadForMe:we}}).filter(Boolean).sort((L,te)=>(te.lastMessageTime||0)-(L.lastMessageTime||0));K(P)}catch(ve){console.error("Error fetching conversations:",ve),K([])}},me=Z.reduce((se,ve)=>se+(ve.unreadForMe||0),0),[z,pe]=Gt.useState(window.innerWidth<window.innerHeight),[F,Te]=Gt.useState(window.innerWidth);return Gt.useEffect(()=>{const se=()=>{const ve=window.innerWidth;pe(ve<window.innerHeight),Te(ve)};return se(),window.addEventListener("resize",se),()=>window.removeEventListener("resize",se)},[]),a.jsxs("div",{className:"dashboard-page",children:[a.jsxs("nav",{className:"top-navbar",children:[a.jsx("h2",{children:"Gojo Dashboard"}),a.jsxs("div",{className:"nav-right",children:[a.jsxs("div",{className:"icon-circle",style:{position:"relative"},children:[a.jsxs("div",{onClick:()=>R(!N),style:{cursor:"pointer",position:"relative"},"aria-label":"Show notifications",tabIndex:0,role:"button",onKeyPress:se=>{se.key==="Enter"&&R(!N)},children:[a.jsx(ss,{size:24}),C.length+me>0&&a.jsx("span",{style:{position:"absolute",top:-5,right:-5,background:"red",color:"white",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:C.length+me})]}),N&&a.jsxs(a.Fragment,{children:[a.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.08)",zIndex:1999},onClick:()=>R(!1)}),a.jsxs("div",{className:"notification-popup",style:typeof window<"u"&&window.innerWidth<=600?{position:"fixed",left:"50%",top:"8%",transform:"translate(-50%, 0)",width:"90vw",maxWidth:340,zIndex:2e3,background:"#fff",borderRadius:12,boxShadow:"0 2px 16px rgba(0,0,0,0.18)",maxHeight:"70vh",overflowY:"auto",padding:12}:{position:"absolute",top:30,right:0,width:300,maxHeight:400,overflowY:"auto",background:"#fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",borderRadius:8,zIndex:100},children:[C.length>0&&C.map((se,ve)=>a.jsxs("div",{onClick:()=>{ae("/dashboard"),setTimeout(()=>{const V=Ee.current[se.id];V&&(V.scrollIntoView({behavior:"smooth",block:"center"}),re(se.id),setTimeout(()=>re(null),3e3))},150),k(V=>V.filter((ie,le)=>le!==ve)),R(!1)},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:se.adminProfile,alt:se.adminName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:se.adminName}),a.jsx("p",{style:{margin:0,fontSize:12},children:se.title})]})]},se.id||ve)),me>0&&Z.filter(se=>se.unreadForMe>0).map((se,ve)=>a.jsxs("div",{onClick:()=>{R(!1),ae("/all-chat")},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:se.profile||"/default-profile.png",alt:se.displayName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:se.displayName}),a.jsx("p",{style:{margin:0,fontSize:12,color:"#0b78f6"},children:"New message"})]})]},se.chatId||ve)),C.length===0&&me===0&&a.jsx("div",{style:{padding:15},children:"No notifications"})]})]})]}),a.jsx("div",{className:"icon-circle",style:{position:"relative",marginLeft:12},children:a.jsxs("div",{onClick:()=>ae("/all-chat"),style:{cursor:"pointer",position:"relative"},children:[a.jsx(rs,{size:22}),me>0&&a.jsx("span",{style:{position:"absolute",top:-6,right:-6,background:"#f60b0b",color:"#fff",borderRadius:"50%",minWidth:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 5px"},children:me})]})}),a.jsx("div",{className:"icon-circle",onClick:()=>ae("/settings"),children:a.jsx(xr,{})}),a.jsx("img",{src:(v==null?void 0:v.profileImage)||"/default-profile.png",alt:"teacher",className:"profile-img"})]})]}),a.jsxs("div",{className:"google-dashboard",children:[typeof window<"u"&&window.innerWidth<=600&&!t&&a.jsx("button",{className:"sidebar-arrow-btn",style:{position:"fixed",left:0,top:0,zIndex:1300,background:"#fff",border:"none",borderRadius:"0 8px 8px 0",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",padding:8,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:()=>e(!0),"aria-label":"Open sidebar menu",children:a.jsx(Pr,{size:22})}),typeof window<"u"&&window.innerWidth<=600&&t&&a.jsx("div",{className:"sidebar-overlay visible",onClick:()=>e(!1),style:{display:"block",position:"fixed",inset:0,background:"rgba(0,0,0,0.35)",zIndex:1200}}),a.jsxs("div",{className:`google-sidebar${typeof window<"u"&&window.innerWidth<=600&&t?" open":""}`,style:typeof window<"u"&&window.innerWidth<=600?{position:"fixed",top:64,left:t?0:"-220px",width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",zIndex:1200,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto",borderRadius:0,transition:"left 0.25s cubic-bezier(.4,0,.2,1)"}:{position:"fixed",top:64,left:0,width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.04)",zIndex:900,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto",borderRadius:0},children:[a.jsx("style",{children:`
            @media (max-width: 600px) {
              .google-sidebar {
                left: -220px;
                transition: left 0.25s cubic-bezier(.4,0,.2,1);
                border-radius: 0 !important;
              }
              .google-sidebar.open {
                left: 0 !important;
                z-index: 1202;
                border-radius: 0 !important;
              }
              .sidebar-overlay {
                display: block;
                position: fixed;
                inset: 0;
                background: rgba(0,0,0,0.35);
                z-index: 1200;
                transition: opacity 0.2s;
              }
              .sidebar-arrow-btn {
                display: flex !important;
              }
            }
          `}),v&&a.jsxs("div",{className:"sidebar-profile",children:[a.jsx("div",{className:"sidebar-img-circle",children:a.jsx("img",{src:v.profileImage||"/default-profile.png",alt:"profile"})}),a.jsx("h3",{children:v.name}),a.jsx("p",{children:v.username})]}),a.jsxs("div",{className:"sidebar-menu",children:[a.jsxs(ye,{className:"sidebar-btn",to:"/dashboard",children:[a.jsx(Dr,{})," Home"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/students",children:[a.jsx(Ye,{})," Students"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/admins",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[a.jsx(Ye,{})," Admins"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/parents",children:[a.jsx(Or,{})," Parents"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/marks",children:[a.jsx(Jt,{})," Marks"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/attendance",children:[a.jsx(Ye,{})," Attendance"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/schedule",children:[a.jsx(Ye,{})," Schedule"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/lesson-plan",children:[a.jsx(Jt,{})," Lesson Plan"]}),a.jsxs("button",{className:"sidebar-btn logout-btn",onClick:H,children:[a.jsx(Mr,{})," Logout"]})]})]}),a.jsxs("div",{style:{flex:1,display:"flex",justifyContent:"center",padding:"30px"},children:[a.jsxs("div",{className:"admin-list-card-responsive",style:{width:"500px",marginLeft:"30px"},children:[a.jsx("style",{children:`
              @media (max-width: 600px) {
                .admin-list-card-responsive {
                  margin-left: -10px !important;
                  margin-right: auto !important;
                  padding-left: 0 !important;
                  width: 90vw !important;
                  max-width: 90vw !important;
                }
              }
              @media (min-width: 1200px) {
                .admin-list-card-responsive {
                  width: 600px !important;
                  max-width: 600px !important;
                }
              }
              @media (min-width: 1500px) {
                .admin-list-card-responsive {
                  width: 700px !important;
                  max-width: 700px !important;
                }
              }
            `}),a.jsx("h2",{style:{textAlign:"center",marginBottom:"20px"},children:"All Admins"}),s&&a.jsx("p",{children:"Loading admins..."}),o&&a.jsx("p",{style:{color:"red"},children:o}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:n.map(se=>a.jsx(EN,{admin:se,selected:(u==null?void 0:u.adminId)===se.adminId,onClick:ve=>{d(ve),x(ve)}},se.adminId))})]}),u&&a.jsxs("div",{style:{width:z?"100%":"30%",height:z?"100vh":"calc(100vh - 60px)",position:"fixed",right:0,top:z?0:"60px",background:"#fff",boxShadow:z?"0 0 0 rgba(0,0,0,0)":"0 0 15px rgba(0,0,0,0.05)",zIndex:1e3,display:"flex",flexDirection:"column",overflowY:"auto",padding:z?"18px":"25px",transition:"all 0.35s ease"},children:[a.jsx("button",{onClick:()=>d(null),"aria-label":"Close admin details",title:"Close",style:{position:"fixed",top:52,right:16,width:42,height:42,borderRadius:"12px",border:"none",background:"#fff",boxShadow:"0 8px 18px rgba(2,6,23,0.15)",cursor:"pointer",display:"grid",placeItems:"center",zIndex:2e3,fontSize:22,fontWeight:900,color:"#0f172a"},children:""}),a.jsxs("div",{style:{textAlign:"center",marginBottom:"20px"},children:[a.jsx("div",{style:{width:"120px",height:"120px",margin:"0 auto 15px",borderRadius:"50%",overflow:"hidden",border:"4px solid #4b6cb7"},children:a.jsx("img",{src:u.profileImage||"/default-profile.png",alt:u.name,style:{width:"100%",height:"100%",objectFit:"cover"}})}),a.jsx("h2",{children:u.name}),a.jsx("p",{children:u.username})]}),a.jsx("div",{style:{display:"flex",marginBottom:"15px"},children:["details","Plan","Report"].map(se=>a.jsx("button",{onClick:()=>p(se),style:{flex:1,padding:"10px",border:"none",background:"none",cursor:"pointer",fontWeight:"600",color:f===se?"#4b6cb7":"#777",borderBottom:f===se?"3px solid #4b6cb7":"3px solid transparent"},children:se.toUpperCase()},se))}),f==="details"&&u&&a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:28,padding:50,marginLeft:0,marginRight:0,borderRadius:0,background:"linear-gradient(180deg,#eef2ff,#f8fafc)",fontFamily:"Inter, system-ui"},children:a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:24,fontWeight:900,marginBottom:18,marginTop:-30,background:"linear-gradient(90deg,#2563eb,#7c3aed)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Administrator Details"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",columnGap:68,rowGap:14},children:[["Admin ID",u.adminId||u.userId],["Email",u.email],["Phone",u.phone],["Gender",u.gender?u.gender.charAt(0).toUpperCase()+u.gender.slice(1):null],["Title",u.title],["Status",u.status?u.status.charAt(0).toUpperCase()+u.status.slice(1):null]].map(([se,ve])=>a.jsxs("div",{style:{padding:18,borderRadius:20,background:"#ffffff",boxShadow:"0 6px 10px rgba(0,0,0,0.08)",marginLeft:-30,marginRight:-30},children:[a.jsx("div",{style:{fontSize:12,fontWeight:700,color:"#000102",textTransform:"uppercase"},children:se}),a.jsx("div",{style:{marginTop:8,fontSize:16,fontWeight:400,color:"#000102"},children:ve||""})]},se))})]})}),f==="Plan"&&a.jsx("p",{children:"Plan data here."}),f==="Report"&&a.jsx("p",{children:"Report data here."}),!y&&u&&a.jsx("div",{onClick:()=>I(!0),style:{position:"fixed",bottom:"20px",right:"20px",width:"60px",height:"60px",background:"linear-gradient(135deg, #833ab4, #202ef3, #395a8b)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",cursor:"pointer",zIndex:1e3,boxShadow:"0 8px 18px rgba(0,0,0,0.25)"},children:a.jsx(Op,{size:30})}),y&&u&&v&&a.jsxs("div",{style:{position:"fixed",bottom:"20px",right:"20px",width:"360px",height:"480px",background:"#fff",borderRadius:"16px",boxShadow:"0 12px 30px rgba(0,0,0,0.25)",zIndex:2e3,display:"flex",flexDirection:"column",overflow:"hidden"},children:[a.jsxs("div",{style:{padding:"14px",borderBottom:"1px solid #eee",display:"flex",justifyContent:"space-between",alignItems:"center",background:"#fafafa"},children:[a.jsx("strong",{children:u.name}),a.jsxs("div",{style:{display:"flex",gap:"10px"},children:[a.jsx("button",{onClick:()=>{I(!1),ae("/all-chat",{state:{contact:u,tab:"admin"}})},style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px"},children:""}),a.jsx("button",{onClick:()=>I(!1),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:""})]})]}),a.jsxs("div",{style:{flex:1,padding:"12px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"6px",background:"#f9f9f9"},children:[w.length===0?a.jsxs("p",{style:{textAlign:"center",color:"#aaa"},children:["Start chatting with ",u.name]}):w.map(se=>a.jsx("div",{style:{display:"flex",flexDirection:se.isTeacher?"row-reverse":"row",alignItems:"flex-end",marginBottom:10},children:a.jsxs("div",{style:{background:se.isTeacher?"#4facfe":"#fff",color:se.isTeacher?"#fff":"#000",padding:"10px 14px",borderRadius:18,maxWidth:"65%",position:"relative",boxShadow:"0 2px 6px rgba(0,0,0,0.05)"},children:[se.text,a.jsxs("div",{style:{fontSize:10,color:"#888",marginTop:4,display:"flex",justifyContent:"flex-end",alignItems:"center",gap:4},children:[CN(se.timeStamp),se.isTeacher&&a.jsx(mo,{size:10,color:se.seen?"#4facfe":"#ccc"})]})]})},se.id)),a.jsx("div",{ref:_})]}),a.jsxs("div",{style:{padding:"10px",borderTop:"1px solid #eee",display:"flex",gap:"8px",background:"#fff"},children:[a.jsx("input",{value:A,onChange:se=>S(se.target.value),placeholder:"Type a message...",style:{flex:1,padding:"10px 14px",borderRadius:"999px",border:"1px solid #ccc",outline:"none"},onKeyDown:se=>{se.key==="Enter"&&ue()}}),a.jsx("button",{onClick:ue,style:{background:"linear-gradient(135deg, #0751f1, #0e35e4, #0f5afc)",border:"none",borderRadius:"50%",width:"42px",height:"42px",color:"#fff",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px"},children:""})]})]})]})]})]})]})}const kN="https://gojo-teacher-web.onrender.com/api";function NN(){const[t,e]=g.useState(null),[n,r]=g.useState([]),[s,i]=g.useState(""),[o,c]=g.useState(""),[u,d]=g.useState(null),[f,p]=g.useState([]),y=zn(),[I,w]=g.useState([]),[T,A]=g.useState(!1),[S,_]=g.useState(null),v=g.useRef({}),O=t==null?void 0:t.userId;g.useEffect(()=>{const x=JSON.parse(localStorage.getItem("teacher"));if(!x){y("/login");return}e(x)},[]),g.useEffect(()=>{(async()=>{try{const N=((await ee.get(`${kN}/get_posts`)).data||[]).slice(0,5).map(R=>{var j;return{id:R.postId,title:((j=R.message)==null?void 0:j.substring(0,50))||"Untitled post",adminName:R.adminName||"Admin",adminProfile:R.adminProfile||"/default-profile.png"}});w(N)}catch(C){console.error("Error fetching notifications:",C)}})()},[]);const G=(x,C)=>{_(x);const k=v.current[x];k&&k.scrollIntoView({behavior:"smooth",block:"center"});const N=[...I];N.splice(C,1),w(N),A(!1),setTimeout(()=>_(null),3e3)};g.useEffect(()=>{if(!t)return;async function x(){try{const[C,k,N]=await Promise.all([ee.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Courses.json"),ee.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/TeacherAssignments.json"),ee.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Teachers.json")]),R=Object.entries(N.data||{}).find(([J,Ce])=>Ce.userId===t.userId);if(!R)return;const j=R[0],Ee=Object.values(k.data||{}).filter(J=>J.teacherId===j).map(J=>({id:J.courseId,...C.data[J.courseId]}));r(Ee)}catch(C){console.error("Error fetching courses:",C)}}x()},[t]),g.useEffect(()=>{async function x(){try{const C=await ee.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/TeacherPosts.json");p(Object.entries(C.data||{}).map(([k,N])=>({id:k,...N})))}catch(C){console.error(C)}}x()},[]);const oe=async()=>{if(!s||!o&&!u){alert("Please select a class and enter a note or upload a file");return}let x="";u&&(x=URL.createObjectURL(u));const C={teacherId:O,courseId:s,text:o,fileUrl:x,createdAt:new Date().toISOString()};try{await ee.post("https://ethiostore-17d9f-default-rtdb.firebaseio.com/TeacherPosts.json",C),alert("Post submitted!"),c(""),d(null),p(k=>[...k,{...C,id:Date.now()}])}catch(k){console.error(k),alert("Failed to submit post")}},E=()=>{localStorage.removeItem("teacher"),y("/login")};return t?a.jsxs("div",{className:"dashboard-page",children:[a.jsxs("nav",{className:"top-navbar",children:[a.jsx("h2",{children:"Gojo Dashboard"}),a.jsxs("div",{className:"nav-search",children:[a.jsx(zj,{className:"search-icon"}),a.jsx("input",{type:"text",placeholder:"Search Teacher and Student..."})]}),a.jsxs("div",{className:"nav-right",children:[a.jsxs("div",{className:"icon-circle",children:[a.jsxs("div",{onClick:()=>A(!T),style:{cursor:"pointer",position:"relative"},children:[a.jsx(ss,{size:24}),I.length>0&&a.jsx("span",{style:{position:"absolute",top:-5,right:-5,background:"red",color:"white",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:I.length})]}),T&&a.jsx("div",{style:{position:"absolute",top:30,right:0,width:300,maxHeight:400,overflowY:"auto",background:"#fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",borderRadius:8,zIndex:100},children:I.length>0?I.map((x,C)=>a.jsxs("div",{onClick:()=>{y("/dashboard"),setTimeout(()=>G(x.id,C),100)},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:x.adminProfile,alt:x.adminName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:x.adminName}),a.jsx("p",{style:{margin:0,fontSize:12},children:x.title})]})]},x.id||C)):a.jsx("div",{style:{padding:15},children:"No notifications"})})]}),a.jsx("div",{className:"icon-circle",children:a.jsx(rs,{})}),a.jsx("div",{className:"icon-circle",children:a.jsx(xr,{})}),a.jsx("img",{src:(t==null?void 0:t.profileImage)||"/default-profile.png",alt:"teacher",className:"profile-img"})]})]}),a.jsxs("div",{className:"google-dashboard",children:[a.jsxs("div",{className:"google-sidebar",children:[a.jsxs("div",{className:"sidebar-profile",children:[a.jsx("div",{className:"sidebar-img-circle",children:a.jsx("img",{src:(t==null?void 0:t.profileImage)||"/default-profile.png",alt:"profile"})}),a.jsx("h3",{children:t==null?void 0:t.name}),a.jsx("p",{children:t==null?void 0:t.username})]}),a.jsxs("div",{className:"sidebar-menu",children:[a.jsxs(ye,{className:"sidebar-btn",to:"/dashboard",children:[a.jsx(Dr,{})," Home"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/notes",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[a.jsx(Jt,{})," Notes"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/students",children:[a.jsx(Ye,{})," Students"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/admins",children:[a.jsx(Ye,{})," Admins"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/parents",children:[a.jsx(Or,{})," Parents"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/marks",children:[a.jsx(Jt,{})," Marks"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/attendance",children:[a.jsx(Ye,{})," Attendance"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/schedule",children:[a.jsx(Ye,{})," Schedule"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/lesson-plan",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[a.jsx(Jt,{})," Lesson Plan"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/settings",children:[a.jsx(xr,{})," Settings"]}),a.jsxs("button",{className:"sidebar-btn logout-btn",onClick:E,children:[a.jsx(Mr,{})," Logout"]})]})]}),a.jsxs("div",{style:{marginLeft:"500px",width:"40%",padding:"100px 30px 50px",background:"#f3f4f6",minHeight:"100vh",fontFamily:"'Inter', sans-serif"},children:[a.jsxs("div",{style:{marginBottom:"30px",display:"flex",justifyContent:"space-between",alignItems:"center",background:"linear-gradient(90deg, #e0e7ff, #c7d2fe)",padding:"20px 25px",borderRadius:"18px",boxShadow:"0 5px 20px rgba(0,0,0,0.08)"},children:[a.jsx("h2",{style:{fontSize:"28px",fontWeight:700,color:"#1e293b"},children:"Post Notes / Files"}),a.jsxs("span",{style:{color:"#475569",fontSize:"16px",fontWeight:500},children:[t==null?void 0:t.name,", share notes with your students"]})]}),a.jsxs("div",{style:{marginBottom:"40px",background:"#fff",padding:"30px 25px",borderRadius:"18px",boxShadow:"0 6px 25px rgba(0,0,0,0.08)"},children:[a.jsxs("select",{value:s,onChange:x=>i(x.target.value),style:{width:"100%",padding:"14px 16px",borderRadius:"12px",border:"1px solid #cbd5e1",fontSize:"15px",marginBottom:"18px",background:"#f8fafc",cursor:"pointer"},children:[a.jsx("option",{value:"",children:"Select Class & Subject"}),n.map(x=>a.jsxs("option",{value:x.id,children:[x.subject,"  Grade ",x.grade,x.section]},x.id))]}),a.jsx("textarea",{placeholder:"Write your note here...",value:o,onChange:x=>c(x.target.value),style:{width:"100%",padding:"18px",borderRadius:"15px",border:"1px solid #cbd5e1",marginBottom:"18px",minHeight:"140px",fontSize:"15px",resize:"vertical",background:"#f8fafc"}}),a.jsx("input",{type:"file",onChange:x=>d(x.target.files[0]),style:{display:"block",marginBottom:"25px",fontSize:"15px",cursor:"pointer",padding:"10px",borderRadius:"12px",border:"1px solid #cbd5e1",background:"#f8fafc",width:"100%"}}),a.jsxs("button",{onClick:oe,style:{background:"linear-gradient(90deg, #4b6cb7, #182848)",color:"#fff",border:"none",padding:"14px 30px",borderRadius:"15px",cursor:"pointer",fontSize:"16px",fontWeight:600,width:"100%"},children:[a.jsx(Bj,{style:{marginRight:"10px"}})," Submit Post"]})]}),a.jsxs("div",{children:[a.jsx("h3",{style:{fontSize:"22px",fontWeight:700,marginBottom:"20px",color:"#1e293b"},children:"All Posts"}),f.filter(x=>x.teacherId===O||x.courseId===s).map((x,C)=>a.jsxs("div",{style:{background:"#fff",padding:"20px 25px",borderRadius:"18px",marginBottom:"18px",boxShadow:"0 6px 18px rgba(0,0,0,0.06)"},children:[a.jsx("p",{style:{marginBottom:"12px",fontSize:"15px",lineHeight:"1.6",color:"#334155"},children:x.text}),x.fileUrl&&a.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"10px"},children:[a.jsx("span",{style:{fontSize:"20px",marginRight:"10px"},children:""}),a.jsx("a",{href:x.fileUrl,target:"_blank",rel:"noopener noreferrer",download:!0,style:{color:"#2563eb",fontWeight:600,textDecoration:"none",fontSize:"15px"},children:"View / Download File"})]}),a.jsxs("div",{style:{fontSize:"13px",color:"#64748b",textAlign:"right"},children:["Posted: ",new Date(x.createdAt).toLocaleString()]})]},C))]})]})]})]}):null}const zy=(t,e)=>[t,e].sort().join("_"),TN="https://gojo-teacher-web.onrender.com/api",Bn="https://ethiostore-17d9f-default-rtdb.firebaseio.com",RN=t=>{if(!t)return"";const e=new Date(Number(t)),n=e.getHours().toString().padStart(2,"0"),r=e.getMinutes().toString().padStart(2,"0");return`${n}:${r}`};function AN(){const[t,e]=g.useState(!1),[n,r]=g.useState(null),[s,i]=g.useState([]),[o,c]=g.useState(null),[u,d]=g.useState(!0),[f,p]=g.useState("Details"),[y,I]=g.useState(!1),[w,T]=g.useState([]),[A,S]=g.useState(""),_=g.useRef(null),[v,O]=g.useState([]),[G,oe]=g.useState([]),[E,x]=g.useState(!1),[C,k]=g.useState([]),[N,R]=g.useState(null),[j,re]=g.useState(!1),[Ee,J]=g.useState([]),Ce=zn(),[Z,K]=g.useState(window.innerWidth<window.innerHeight);g.useEffect(()=>{const z=()=>K(window.innerWidth<window.innerHeight);return window.addEventListener("resize",z),window.addEventListener("orientationchange",z),()=>{window.removeEventListener("resize",z),window.removeEventListener("orientationchange",z)}},[]),g.useEffect(()=>{const z=JSON.parse(localStorage.getItem("teacher"));if(!z){Ce("/login");return}r(z)},[Ce]);const ae=()=>{localStorage.removeItem("teacher"),Ce("/login")},H=(n==null?void 0:n.userId)||"";g.useEffect(()=>{if(!n)return;let z=!1;return(async()=>{try{d(!0);const[F,Te,se,ve,V]=await Promise.all([ee.get(`${Bn}/TeacherAssignments.json`),ee.get(`${Bn}/Courses.json`),ee.get(`${Bn}/Students.json`),ee.get(`${Bn}/Users.json`),ee.get(`${Bn}/Parents.json`)]),ie=F.data||{},le=Te.data||{},B=se.data||{},X=ve.data||{},ne=V.data||{},P=n.userId,L=Object.values(ie).filter(ke=>ke.teacherId===P).map(ke=>ke.courseId),te={};Object.entries(ne).forEach(([ke,de])=>{de.children&&Object.values(de.children).forEach(ge=>{if(!ge.studentId)return;const Re=ge.relationship||ge.relation||ge.relationToChild||ge.type||ge.role||null;te[ge.studentId]||(te[ge.studentId]=[]),te[ge.studentId].push({parentId:ke,relationship:Re})})});const ce={};Object.entries(B).forEach(([ke,de])=>{const ge=Object.values(X).find(vt=>String(vt.userId)===String(de.userId)),Re=(ge==null?void 0:ge.name)||"No Name",Ze=(ge==null?void 0:ge.profileImage)||"/default-profile.png";(te[ke]||[]).forEach(({parentId:vt,relationship:$e})=>{ce[vt]||(ce[vt]=[]),ce[vt].push({studentId:ke,name:Re,grade:de.grade,section:de.section,profileImage:Ze,userId:de.userId,relationship:$e||"",age:de.age||(ge==null?void 0:ge.age)||null,city:de.city||(ge==null?void 0:ge.city)||de.address&&de.address.city||null,citizenship:de.citizenship||(ge==null?void 0:ge.citizenship)||de.nationality||null,address:de.address||(ge==null?void 0:ge.address)||null,status:de.status||"Active"})})});const we=Object.keys(ce).map(ke=>{var pt;const de=ne[ke]||{},ge=Object.values(X).find(vt=>String(vt.userId)===String(de.userId))||{},Re=ce[ke]||[],Ze=Array.from(new Set(Re.map(vt=>vt.relationship).filter(Boolean)));return{id:ke,userId:de.userId,name:ge.name||de.name||"No Name",email:ge.email||de.email||"N/A",phone:ge.phone||de.phone||"",profileImage:ge.profileImage||de.profileImage||"/default-profile.png",children:Re,relationships:Ze,age:de.age||ge.age||null,city:de.city||ge.city||((pt=de.address)==null?void 0:pt.city)||null,citizenship:de.citizenship||ge.citizenship||de.nationality||null,status:de.status||"Active",createdAt:de.createdAt,address:de.address||ge.address||null,extra:de.extra}});z||i(we)}catch(F){console.error("Error fetching parents:",F)}finally{z||d(!1)}})(),()=>{z=!0}},[n]),g.useEffect(()=>{var z;(z=_.current)==null||z.scrollIntoView({behavior:"smooth"})},[w]),g.useEffect(()=>{if(!o||!n||!y)return;const z=zy(H,o.userId),pe=Pt(Mt,`Chats/${z}/messages`);return so(pe,F=>{const Te=F.val()||{},se=Object.entries(Te).map(([ve,V])=>({messageId:ve,...V}));se.sort((ve,V)=>ve.timeStamp-V.timeStamp),T(se)}),Ie(z),()=>T2(pe)},[o,n,y]);const ue=async z=>{if(!(z!=null&&z.trim())||!o||!n)return;const pe=H,F=o.userId,Te=zy(pe,F),se=Date.now(),ve={senderId:pe,receiverId:F,type:"text",text:z,seen:!1,timeStamp:se};try{await ee.post(`${Bn}/Chats/${Te}/messages.json`,ve),await ee.patch(`${Bn}/Chats/${Te}.json`,{participants:{[pe]:!0,[F]:!0},lastMessage:{text:z,senderId:pe,seen:!1,timeStamp:se},unread:{[pe]:0,[F]:1}}),S("")}catch(V){console.error("Send message error:",V)}},Ie=async z=>{try{await ee.patch(`${Bn}/Chats/${z}/unread.json`,{[H]:0}),await ee.patch(`${Bn}/Chats/${z}/lastMessage.json`,{seen:!0})}catch(pe){console.error("Mark as seen error:",pe)}};g.useEffect(()=>{(async()=>{try{let F=(await ee.get(`${TN}/get_posts`)).data||[];!Array.isArray(F)&&typeof F=="object"&&(F=Object.values(F));const[Te,se]=await Promise.all([ee.get(`${Bn}/School_Admins.json`),ee.get(`${Bn}/Users.json`)]),ve=Te.data||{},V=se.data||{},ie=JSON.parse(localStorage.getItem("teacher")),le=_e(ie==null?void 0:ie.userId),B=P=>{const L=P.adminId||P.posterAdminId||P.poster||P.admin||null;if(L&&ve[L]){const te=ve[L],ce=te.userId,we=V[ce]||null,ke=we&&we.name||te.name||P.adminName||"Admin",de=we&&we.profileImage||te.profileImage||P.adminProfile||"/default-profile.png";return{name:ke,profile:de}}return{name:P.adminName||"Admin",profile:P.adminProfile||"/default-profile.png"}},X=F.slice().sort((P,L)=>(L.time?new Date(L.time).getTime():0)-(P.time?new Date(P.time).getTime():0)).filter(P=>P.postId&&!le.includes(P.postId)).slice(0,5).map(P=>{var te;const L=B(P);return{type:"post",id:P.postId,title:((te=P.message)==null?void 0:te.substring(0,50))||"Untitled post",adminName:L.name,adminProfile:L.profile}});let ne=[];try{const P=ie;if(P&&P.userId){const[L,te]=await Promise.all([ee.get(`${Bn}/Chats.json`),ee.get(`${Bn}/Users.json`)]),ce=L.data||{},ke=te.data||{}||{},de={};Object.entries(ke).forEach(([ge,Re])=>{Re&&Re.userId&&(de[Re.userId]=ge)}),ne=Object.entries(ce).map(([ge,Re])=>{const pt=(Re.unread||{})[P.userId]||0;if(!pt)return null;const vt=Re.participants||{},$e=Object.keys(vt||{}).find(At=>At!==P.userId);if(!$e)return null;let St=$e,et=ke[St];if(!et){const At=de[$e];At&&(St=At,et=ke[At])}et||(et={userId:$e,name:$e,profileImage:"/default-profile.png"});const qt={pushKey:St,userId:et.userId||$e,name:et.name||et.username||$e,profileImage:et.profileImage||et.profile||"/default-profile.png"},Ct=Re.lastMessage||{};return{type:"message",chatId:ge,displayName:qt.name,profile:qt.profileImage,lastMessageText:Ct.text||"",lastMessageTime:Ct.timeStamp||Ct.time||null,unreadForMe:pt}}).filter(Boolean).sort((ge,Re)=>(Re.lastMessageTime||0)-(ge.lastMessageTime||0))}}catch(P){console.error("Error fetching message notifications:",P)}oe([...X,...ne]),k(ne)}catch(pe){console.error("Error fetching notifications:",pe)}})()},[]);function _e(z){return JSON.parse(localStorage.getItem(`seen_posts_${z}`))||[]}const me=C.reduce((z,pe)=>z+(pe.unreadForMe||0),0);return g.useEffect(()=>(o?document.body.classList.add("sidebar-open"):document.body.classList.remove("sidebar-open"),()=>document.body.classList.remove("sidebar-open")),[o]),a.jsxs("div",{className:"dashboard-page",children:[a.jsxs("nav",{className:"top-navbar",children:[a.jsx("h2",{children:"Gojo Dashboard"}),a.jsxs("div",{className:"nav-right",children:[a.jsxs("div",{className:"icon-circle",style:{position:"relative"},children:[a.jsxs("div",{onClick:()=>x(!E),style:{cursor:"pointer",position:"relative"},"aria-label":"Show notifications",tabIndex:0,role:"button",onKeyPress:z=>{z.key==="Enter"&&x(!E)},children:[a.jsx(ss,{size:24}),G.length+me>0&&a.jsx("span",{style:{position:"absolute",top:-5,right:-5,background:"red",color:"white",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:G.length+me})]}),E&&a.jsxs(a.Fragment,{children:[a.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.08)",zIndex:1999},onClick:()=>x(!1)}),a.jsxs("div",{className:"notification-popup",style:typeof window<"u"&&window.innerWidth<=600?{position:"fixed",left:"50%",top:"8%",transform:"translate(-50%, 0)",width:"90vw",maxWidth:340,zIndex:2e3,background:"#fff",borderRadius:12,boxShadow:"0 2px 16px rgba(0,0,0,0.18)",maxHeight:"70vh",overflowY:"auto",padding:12}:{position:"absolute",top:30,right:0,width:300,maxHeight:400,overflowY:"auto",background:"#fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",borderRadius:8,zIndex:100},children:[G.length>0&&G.map((z,pe)=>z.type==="post"?a.jsxs("div",{onClick:()=>{Ce("/dashboard"),setTimeout(()=>{var Te;const F=(Te=postRefs==null?void 0:postRefs.current)==null?void 0:Te[z.id];F&&(F.scrollIntoView({behavior:"smooth",block:"center"}),R(z.id),setTimeout(()=>R(null),3e3))},150),oe(F=>F.filter((Te,se)=>se!==pe)),x(!1)},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:z.adminProfile,alt:z.adminName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:z.adminName}),a.jsx("p",{style:{margin:0,fontSize:12},children:z.title})]})]},z.id||pe):null),me>0&&Ee.filter(z=>z.unreadForMe>0).map((z,pe)=>a.jsxs("div",{onClick:()=>{x(!1),Ce("/all-chat")},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:z.profile||"/default-profile.png",alt:z.displayName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:z.displayName}),a.jsx("p",{style:{margin:0,fontSize:12,color:"#0b78f6"},children:"New message"})]})]},z.chatId||pe)),G.length===0&&me===0&&a.jsx("div",{style:{padding:15},children:"No notifications"})]})]})]}),a.jsx("div",{className:"icon-circle",style:{position:"relative",marginLeft:12},children:a.jsxs("div",{onClick:()=>Ce("/all-chat"),style:{cursor:"pointer",position:"relative"},children:[a.jsx(rs,{size:22}),me>0&&a.jsx("span",{style:{position:"absolute",top:-6,right:-6,background:"#f60b0b",color:"#fff",borderRadius:"50%",minWidth:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 5px"},children:me})]})}),a.jsx("div",{className:"icon-circle",onClick:()=>Ce("/settings"),children:a.jsx(xr,{})}),a.jsx("img",{src:(n==null?void 0:n.profileImage)||"/default-profile.png",alt:"teacher",className:"profile-img"})]})]}),a.jsxs("div",{className:"google-dashboard",style:{display:"flex"},children:[typeof window<"u"&&window.innerWidth<=600&&!t&&a.jsx("button",{className:"sidebar-arrow-btn",style:{position:"fixed",left:0,top:0,zIndex:1300,background:"#fff",border:"none",borderRadius:"0 8px 8px 0",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",padding:8,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:()=>e(!0),"aria-label":"Open sidebar menu",children:a.jsx(Pr,{size:22})}),typeof window<"u"&&window.innerWidth<=600&&t&&a.jsx("div",{className:"sidebar-overlay visible",onClick:()=>e(!1),style:{display:"block",position:"fixed",inset:0,background:"rgba(0,0,0,0.35)",zIndex:1200}}),a.jsxs("div",{className:`google-sidebar${typeof window<"u"&&window.innerWidth<=600&&t?" open":""}`,style:typeof window<"u"&&window.innerWidth<=600?{position:"fixed",top:64,left:t?0:"-220px",width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",zIndex:1200,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto",borderRadius:0,transition:"left 0.25s cubic-bezier(.4,0,.2,1)"}:{position:"fixed",top:64,left:0,width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.04)",zIndex:900,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto",borderRadius:0},children:[a.jsx("style",{children:`
            @media (max-width: 600px) {
              .google-sidebar {
                left: -220px;
                transition: left 0.25s cubic-bezier(.4,0,.2,1);
                border-radius: 0 !important;
              }
              .google-sidebar.open {
                left: 0 !important;
                z-index: 1202;
                border-radius: 0 !important;
              }
              .sidebar-overlay {
                display: block;
                position: fixed;
                inset: 0;
                background: rgba(0,0,0,0.35);
                z-index: 1200;
                transition: opacity 0.2s;
              }
              .sidebar-arrow-btn {
                display: flex !important;
              }
            }
          `}),n&&a.jsxs("div",{className:"sidebar-profile",children:[a.jsx("div",{className:"sidebar-img-circle",children:a.jsx("img",{src:n.profileImage||"/default-profile.png",alt:"profile"})}),a.jsx("h3",{children:n.name}),a.jsx("p",{children:n.username})]}),a.jsxs("div",{className:"sidebar-menu",children:[a.jsxs(ye,{className:"sidebar-btn",to:"/dashboard",children:[a.jsx(Dr,{})," Home"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/students",children:[a.jsx(Ye,{})," Students"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/admins",children:[a.jsx(Ye,{})," Admins"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/parents",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[a.jsx(Or,{})," Parents"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/marks",children:[a.jsx(Jt,{})," Marks"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/attendance",children:[a.jsx(Ye,{})," Attendance"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/schedule",children:[a.jsx(Ye,{})," Schedule"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/lesson-plan",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[a.jsx(Jt,{})," Lesson Plan"]}),a.jsxs("button",{className:"sidebar-btn logout-btn",onClick:ae,children:[a.jsx(Mr,{})," Logout"]})]})]}),a.jsx("main",{style:{flex:1,padding:30},children:a.jsxs("div",{className:"parent-list-card-responsive",style:{maxWidth:480,margin:"0 auto",display:"flex",gap:24,alignItems:"flex-start",flexWrap:"wrap"},children:[a.jsxs("section",{style:{flex:"1 1 320px",minWidth:280},children:[a.jsx("h2",{style:{textAlign:"center",marginBottom:20,color:"#4b6cb7",fontWeight:700},children:"Parents"}),u?a.jsx("p",{style:{textAlign:"center",fontSize:18,color:"#555"},children:"Loading..."}):s.length===0?a.jsx("p",{style:{textAlign:"center",fontSize:18,color:"#999"},children:"No parents found."}):a.jsx("div",{className:"parent-list-responsive",style:{display:"flex",flexDirection:"column",gap:15},children:s.map(z=>a.jsxs("div",{onClick:()=>c(z),className:"parent-list-item-responsive",style:{display:"flex",gap:15,width:"calc(100% - 50px)",padding:16,marginLeft:50,borderRadius:12,boxShadow:"0 4px 15px rgba(0,0,0,0.08)",backgroundColor:(o==null?void 0:o.id)===z.id?"#f0f4ff":"#fff",cursor:"pointer",alignItems:"center"},children:[a.jsx("style",{children:`
                                  @media (max-width: 600px) {
                                    .parent-list-card-responsive {
                                      max-width: 99vw !important;
                                      width: 99vw !important;
                                      margin: 0 !important;
                                      padding: 0 !important;
                                    }
                                    .parent-list-responsive {
                                      width: 99vw !important;
                                      max-width: 99vw !important;
                                      margin-left: 0 !important;
                                      margin-right: 0 !important;
                                      padding: 0 !important;
                                      align-items: flex-start !important;
                                    }
                                    .parent-list-item-responsive {
                                      margin-left: -28px !important;
                                      width: 99vw !important;
                                      max-width: 99vw !important;
                                      min-width: 99vw !important;
                                      box-sizing: border-box !important;
                                    }
                                  }
                                `}),a.jsx("img",{src:z.profileImage,alt:z.name,style:{width:60,height:60,borderRadius:"50%",objectFit:"cover"}}),a.jsxs("div",{children:[a.jsx("h3",{style:{margin:0,fontSize:18},children:z.name}),a.jsx("p",{style:{margin:"6px 0 0 0",color:"#777"},children:z.email})]})]},z.id))})]}),o&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"parent-sidebar-overlay",onClick:()=>c(null),style:{display:"none",position:"fixed",inset:0,background:"rgba(0,0,0,0.35)",zIndex:999}}),a.jsxs("aside",{className:"parent-sidebar",style:{width:Z?"100%":420,height:Z?"100vh":"calc(100vh - 60px)",position:"fixed",right:0,top:Z?0:60,background:"#fff",boxShadow:Z?"none":"0 0 20px rgba(0,0,0,0.06)",zIndex:1e3,display:"flex",flexDirection:"column",overflowY:"auto",padding:Z?18:24,transition:"all 0.32s ease"},role:"dialog","aria-modal":"true",children:[a.jsx("button",{onClick:()=>c(null),style:{position:"absolute",top:Z?8:-11,right:18,width:40,height:40,borderRadius:10,border:"none",background:"#fff",boxShadow:"0 8px 18px rgba(2,6,23,0.08)",cursor:"pointer",display:"grid",placeItems:"center",zIndex:1010,fontSize:20},"aria-label":"Close details",children:""}),a.jsxs("div",{style:{textAlign:"center",marginBottom:12},children:[a.jsx("div",{style:{width:100,height:100,margin:"0 auto 12px",borderRadius:"50%",overflow:"hidden",border:"4px solid #4b6cb7"},children:a.jsx("img",{src:o.profileImage,alt:o.name,style:{width:"100%",height:"100%",objectFit:"cover"}})}),a.jsx("h3",{style:{margin:0},children:o.name}),a.jsx("div",{style:{color:"#666",marginTop:6},children:o.email})]}),a.jsx("div",{style:{display:"flex",gap:8,marginBottom:12},children:["Details","Children","Status"].map(z=>a.jsx("button",{onClick:()=>p(z),style:{flex:1,padding:"8px 10px",borderRadius:10,border:"none",cursor:"pointer",background:f===z?"#4b6cb7":"#f0f0f0",color:f===z?"#fff":"#333",fontWeight:700},children:z},z))}),a.jsxs("div",{style:{paddingBottom:40},children:[f==="Details"&&a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:28,padding:50,marginLeft:0,marginRight:0,borderRadius:0,background:"linear-gradient(180deg,#eef2ff,#f8fafc)",fontFamily:"Inter, system-ui"},children:a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:24,fontWeight:900,marginBottom:18,marginTop:-30,background:"linear-gradient(90deg,#2563eb,#7c3aed)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Parent Details"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",columnGap:68,rowGap:14},children:[["Email",o.email||"N/A"],["Phone",o.phone||"N/A"],["Relationship(s)",o.relationships&&o.relationships.length?o.relationships.join(", "):""],["Age",o.age||""],["City",o.city||(o.address&&typeof o.address=="object"?o.address.city:o.city)||""],["Citizenship",o.citizenship||""],["Status",o.status?o.status.charAt(0).toUpperCase()+o.status.slice(1):""],["Address",(typeof o.address=="string"?o.address:o.address&&(o.address.street||o.address.city||JSON.stringify(o.address)))||"",!0]].map(([z,pe,F])=>a.jsxs("div",{style:{padding:18,borderRadius:20,background:"#ffffff",boxShadow:"0 6px 10px rgba(0,0,0,0.08)",marginLeft:-30,marginRight:-30,gridColumn:F?"span 2":"span 1"},children:[a.jsx("div",{style:{fontSize:12,fontWeight:700,color:"#000102",textTransform:"uppercase"},children:z}),a.jsx("div",{style:{marginTop:8,fontSize:16,fontWeight:400,color:"#000102"},children:pe})]},z))})]})}),f==="Children"&&a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:20,background:"#f5f7fa",padding:18,borderRadius:10},children:o.children.map(z=>a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:22,background:"#fff",borderRadius:16,padding:"22px 30px",boxShadow:"0 4px 24px rgba(80,90,130,0.10)",border:"1px solid #edeef2",transition:"box-shadow 0.2s, transform 0.18s",cursor:"pointer"},onMouseEnter:pe=>pe.currentTarget.style.boxShadow="0 8px 32px 0 rgba(60,72,120,0.17)",onMouseLeave:pe=>pe.currentTarget.style.boxShadow="0 4px 24px rgba(80,90,130,0.10)",children:[a.jsx("img",{src:z.profileImage,alt:z.name,style:{width:66,height:66,borderRadius:"50%",border:"3px solid #2868f1",objectFit:"cover",background:"#f0f4fa",flexShrink:0,boxShadow:"0 2px 8px 0 rgba(60,72,120,0.07)"}}),a.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:5},children:[a.jsx("span",{style:{fontWeight:700,fontSize:21,color:"#213052",marginBottom:2},children:z.name}),a.jsxs("div",{style:{display:"flex",columnGap:1,marginTop:-12,marginLeft:-19},children:[a.jsxs("div",{style:{color:"#050505",fontWeight:400,fontSize:14,padding:"6px 18px",borderRadius:999,letterSpacing:.5,boxShadow:"0 2px 8px rgba(22,119,255,.09)"},children:["Grade:",z.grade]}),a.jsxs("div",{style:{color:"#000000",fontWeight:400,fontSize:14,padding:"6px 1px",borderRadius:999,letterSpacing:.5,boxShadow:"0 2px 8px rgba(255,126,95,.09)"},children:["Section:",z.section]})]}),a.jsx("span",{style:{fontSize:15,color:"#424242",marginTop:"-10px"},children:z.relationship&&`Relation: ${z.relationship}`})]})]},z.studentId))}),f==="Status"&&a.jsxs("div",{children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Status:"})," ",o.status||"Active"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Created:"})," ",o.createdAt?new Date(o.createdAt).toLocaleString():""]})]})]}),!y&&a.jsx("div",{onClick:()=>I(!0),style:{position:"fixed",bottom:"20px",right:"20px",width:"60px",height:"60px",background:"linear-gradient(135deg, #3a6fb4, #2147f0, #457ffc)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",cursor:"pointer",zIndex:1e3,boxShadow:"0 8px 18px rgba(0,0,0,0.25)",transition:"transform 0.2s ease"},children:a.jsx(Op,{size:30})}),y&&o&&a.jsxs("div",{style:{position:"fixed",bottom:"20px",right:"20px",width:"360px",height:"480px",background:"#fff",borderRadius:"16px",boxShadow:"0 12px 30px rgba(0,0,0,0.25)",zIndex:2e3,display:"flex",flexDirection:"column",overflow:"hidden"},children:[a.jsxs("div",{style:{padding:"14px",borderBottom:"1px solid #eee",display:"flex",justifyContent:"space-between",alignItems:"center",background:"#fafafa"},children:[a.jsx("strong",{children:o.name}),a.jsxs("div",{style:{display:"flex",gap:"10px"},children:[a.jsx("button",{onClick:()=>{I(!1),Ce("/all-chat",{state:{user:o,tab:"parent"}})},style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px"},children:""}),a.jsx("button",{onClick:()=>I(!1),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:""})]})]}),a.jsxs("div",{style:{flex:1,padding:"12px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"6px",background:"#f9f9f9"},children:[w.length===0?a.jsxs("p",{style:{textAlign:"center",color:"#aaa"},children:["Start chatting with ",o.name]}):w.map(z=>a.jsx("div",{style:{display:"flex",flexDirection:z.senderId===H?"row-reverse":"row",alignItems:"flex-end",marginBottom:10},children:a.jsx("div",{style:{maxWidth:"75%",display:"flex",flexDirection:"column",alignItems:z.senderId===H?"flex-end":"flex-start"},children:a.jsxs("div",{style:{background:z.senderId===H?"#4b6cb7":"#fff",color:z.senderId===H?"#fff":"#0f172a",padding:"10px 14px",borderRadius:18,boxShadow:"0 2px 6px rgba(0,0,0,0.04)",wordBreak:"break-word",position:"relative",paddingBottom:"26px"},children:[a.jsx("div",{children:z.text}),a.jsxs("div",{style:{position:"absolute",right:8,bottom:6,display:"flex",alignItems:"center",gap:6,fontSize:11,color:z.senderId===H?"rgba(255,255,255,0.9)":"#64748b"},children:[a.jsx("span",{style:{fontSize:11},children:RN(z.timeStamp)}),z.senderId===H&&a.jsx(mo,{size:12,color:z.seen?(z.seenAt,"#10b981"):z.seen?"#10b981":"#94a3b8"})]})]})})},z.messageId)),a.jsx("div",{ref:_})]}),a.jsxs("div",{style:{padding:"10px",borderTop:"1px solid #eee",display:"flex",gap:"8px",background:"#fff"},children:[a.jsx("input",{value:A,onChange:z=>S(z.target.value),placeholder:"Type a message...",style:{flex:1,padding:"10px 14px",borderRadius:"999px",border:"1px solid #ccc",outline:"none"},onKeyDown:z=>{z.key==="Enter"&&ue(A)}}),a.jsx("button",{onClick:()=>ue(A),style:{background:"linear-gradient(135deg, #3a65b4, #2c4fee, #458efc)",border:"none",borderRadius:"50%",width:"42px",height:"42px",color:"#fff",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px"},children:""})]})]})]}),a.jsx("style",{children:`
                  @media (max-width: 900px), (orientation: portrait) {
                    .parent-sidebar { width: 100vw !important; height: 100vh !important; left: 0 !important; top: 0 !important; border-radius: 0 !important; padding: 16px !important; }
                    .parent-sidebar-overlay { display: block !important; }
                    body.sidebar-open { overflow: hidden !important; }
                  }
                `})]})]})})]})]})}function PN(){const[t,e]=g.useState(localStorage.getItem("darkMode")==="true");return g.useEffect(()=>{t?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode"),localStorage.setItem("darkMode",t)},[t]),[t,()=>e(r=>!r)]}const ON="https://gojo-teacher-web.onrender.com/api",Fr="https://ethiostore-17d9f-default-rtdb.firebaseio.com";function DN(){const[t,e]=g.useState(null),[n,r]=g.useState("/default-profile.png"),[s,i]=g.useState(""),[o,c]=g.useState(""),[u,d]=g.useState(null),[f,p]=PN(),[y,I]=g.useState(""),[w,T]=g.useState(""),[A,S]=g.useState([]),[_,v]=g.useState(!1),O=zn(),[G,oe]=g.useState(!1),[E,x]=g.useState([]);g.useEffect(()=>{const K=JSON.parse(localStorage.getItem("teacher"));if(!K){O("/login");return}e(K)},[O]),g.useEffect(()=>{t&&(r(t.profileImage||"/default-profile.png"),i(t.name||""),c(t.username||""),Ce(t))},[t]);const C=K=>d(K.target.files[0]),k=async()=>{if(!u)return alert("Select an image first.");try{const K=new FileReader;K.readAsDataURL(u),K.onloadend=async()=>{const ae=K.result;await ee.patch(`${Fr}/Users/${t.userId}.json`,{profileImage:ae});const H={...t,profileImage:ae};localStorage.setItem("teacher",JSON.stringify(H)),r(ae),d(null),alert("Profile image updated!")}}catch(K){console.error("Error updating profile image:",K)}},N=async()=>{if(!s||!o)return alert("Name and Username required!");try{await ee.patch(`${Fr}/Users/${t.userId}.json`,{name:s,username:o});const K={...t,name:s,username:o};localStorage.setItem("teacher",JSON.stringify(K)),e(K),alert("Profile info updated!")}catch(K){console.error("Error updating info:",K)}},R=async()=>{if(!y||!w)return alert("Fill both password fields.");if(y!==w)return alert("Passwords do not match!");try{await ee.patch(`${Fr}/Users/${t.userId}.json`,{password:y}),I(""),T(""),alert("Password updated successfully!")}catch(K){console.error("Error updating password:",K)}},j=()=>{localStorage.removeItem("teacher"),O("/login")};g.useEffect(()=>{(async()=>{try{let H=(await ee.get(`${ON}/get_posts`)).data||[];!Array.isArray(H)&&typeof H=="object"&&(H=Object.values(H));const[ue,Ie,_e]=await Promise.all([ee.get(`${Fr}/School_Admins.json`),ee.get(`${Fr}/Users.json`),ee.get(`${Fr}/Chats.json`)]),me=ue.data||{},z=Ie.data||{},pe=_e.data||{},F=JSON.parse(localStorage.getItem("teacher")),Te=Ee(F==null?void 0:F.userId),se=le=>{const B=le.adminId||le.posterAdminId||le.poster||le.admin||null;if(B&&me[B]){const X=me[B],ne=X.userId,P=z[ne]||null,L=P&&P.name||X.name||le.adminName||"Admin",te=P&&P.profileImage||X.profileImage||le.adminProfile||"/default-profile.png";return{name:L,profile:te}}return{name:le.adminName||"Admin",profile:le.adminProfile||"/default-profile.png"}},ve=H.slice().sort((le,B)=>{const X=le.time?new Date(le.time).getTime():0;return(B.time?new Date(B.time).getTime():0)-X}).filter(le=>le.postId&&!Te.includes(le.postId)).slice(0,5).map(le=>{var X;const B=se(le);return{id:le.postId,type:"post",title:((X=le.message)==null?void 0:X.substring(0,50))||"Untitled post",adminName:B.name,adminProfile:B.profile}});let V=[];F&&F.userId&&Object.entries(pe).forEach(([le,B])=>{const ne=(B.unread||{})[F.userId]||0;if(!ne)return;const P=B.participants||{},L=Object.keys(P).find(ce=>ce!==F.userId);let te=z[L]||{userId:L,name:L,profileImage:"/default-profile.png"};V.push({chatId:le,type:"message",displayName:te.name||te.username||L,profile:te.profileImage||te.profile||"/default-profile.png",unreadForMe:ne})});const ie=[...ve,...V].slice(0,5);S(ie)}catch(ae){console.error("Error fetching notifications:",ae)}})()},[]);const re=async K=>{if(t){if(K.type==="post"&&K.id)J(t.userId,K.id),S(ae=>ae.filter(H=>H.id!==K.id)),v(!1),O("/dashboard");else if(K.type==="message"&&K.chatId){S(ae=>ae.filter(H=>H.chatId!==K.chatId)),v(!1);try{await ee.put(`${Fr}/Chats/${K.chatId}/unread/${t.userId}.json`,null)}catch{}O("/all-chat")}}};function Ee(K){return JSON.parse(localStorage.getItem(`seen_posts_${K}`))||[]}function J(K,ae){const H=Ee(K);H.includes(ae)||localStorage.setItem(`seen_posts_${K}`,JSON.stringify([...H,ae]))}const Ce=async(K=t)=>{try{const ae=K||JSON.parse(localStorage.getItem("teacher"));if(!ae||!ae.userId){x([]);return}const[H,ue]=await Promise.all([ee.get(`${Fr}/Chats.json`),ee.get(`${Fr}/Users.json`)]),Ie=H.data||{},me=ue.data||{}||{},z={};Object.entries(me).forEach(([F,Te])=>{Te&&Te.userId&&(z[Te.userId]=F)});const pe=Object.entries(Ie).map(([F,Te])=>{const ve=(Te.unread||{})[ae.userId]||0;if(!ve)return null;const V=Te.participants||{},ie=Object.keys(V||{}).find(P=>P!==ae.userId);if(!ie)return null;let le=ie,B=me[le];if(!B){const P=z[ie];P&&(le=P,B=me[P])}B||(B={userId:ie,name:ie,profileImage:"/default-profile.png"});const X={pushKey:le,userId:B.userId||ie,name:B.name||B.username||ie,profileImage:B.profileImage||B.profile||"/default-profile.png"},ne=Te.lastMessage||{};return{chatId:F,contact:X,displayName:X.name,profile:X.profileImage,lastMessageText:ne.text||"",lastMessageTime:ne.timeStamp||ne.time||null,unreadForMe:ve}}).filter(Boolean).sort((F,Te)=>(Te.lastMessageTime||0)-(F.lastMessageTime||0));x(pe)}catch(ae){console.error("Error fetching conversations:",ae),x([])}},Z=A.filter(K=>K.type==="message").reduce((K,ae)=>K+(ae.unreadForMe||0),0);return a.jsxs("div",{className:"dashboard-page",children:[a.jsxs("nav",{className:"top-navbar",children:[a.jsx("h2",{children:"Gojo Dashboard"}),a.jsxs("div",{className:"nav-right",children:[a.jsxs("div",{className:"icon-circle",children:[a.jsxs("div",{onClick:()=>v(!_),style:{cursor:"pointer",position:"relative"},children:[a.jsx(ss,{size:24}),A.length>0&&a.jsx("span",{style:{position:"absolute",top:-5,right:-5,background:"red",color:"white",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:A.length})]}),_&&a.jsx("div",{style:{position:"absolute",top:30,right:0,width:300,maxHeight:400,overflowY:"auto",background:"#fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",borderRadius:8,zIndex:100},children:A.length>0?A.map((K,ae)=>K.type==="post"?a.jsxs("div",{onClick:()=>re(K),style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:K.adminProfile,alt:K.adminName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:K.adminName}),a.jsx("p",{style:{margin:0,fontSize:12},children:K.title})]})]},K.id||ae):a.jsxs("div",{onClick:()=>re(K),style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:K.profile||"/default-profile.png",alt:K.displayName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:K.displayName}),a.jsx("p",{style:{margin:0,fontSize:12,color:"#0b78f6"},children:"New message"})]})]},K.chatId||ae)):a.jsx("div",{style:{padding:15},children:"No notifications"})})]}),a.jsx("div",{className:"icon-circle",style:{position:"relative",marginLeft:12},children:a.jsxs("div",{onClick:()=>O("/all-chat"),style:{cursor:"pointer",position:"relative"},children:[a.jsx(rs,{size:22}),Z>0&&a.jsx("span",{style:{position:"absolute",top:-6,right:-6,background:"#f60b0b",color:"#fff",borderRadius:"50%",minWidth:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 5px"},children:Z})]})}),a.jsx(ye,{className:"icon-circle",to:"/settings",children:a.jsx(xr,{})}),a.jsx("img",{src:(t==null?void 0:t.profileImage)||"/default-profile.png",alt:"teacher",className:"profile-img"})]})]}),a.jsxs("div",{className:"google-dashboard",children:[a.jsxs("div",{className:"google-sidebar",children:[t&&a.jsxs("div",{className:"sidebar-profile",children:[a.jsx("div",{className:"sidebar-img-circle",children:a.jsx("img",{src:t.profileImage||"/default-profile.png",alt:"profile"})}),a.jsx("h3",{children:t.name}),a.jsx("p",{children:t.username})]}),a.jsxs("div",{className:"sidebar-menu",children:[a.jsxs(ye,{className:"sidebar-btn",to:"/dashboard",children:[a.jsx(Dr,{})," Home"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/students",children:[a.jsx(Ye,{})," Students"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/admins",children:[a.jsx(Ye,{})," Admins"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/parents",children:[a.jsx(Or,{})," Parents"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/marks",children:[a.jsx(Jt,{})," Marks"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/attendance",children:[a.jsx(Ye,{})," Attendance"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/schedule",children:[a.jsx(Ye,{})," Schedule"]}),a.jsxs("button",{className:"sidebar-btn logout-btn",onClick:j,children:[a.jsx(Mr,{})," Logout"]})]})]}),a.jsxs("div",{className:"main-content",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",marginTop:"10px",padding:"10px",width:"100%",gap:"30px"},children:[a.jsx("h2",{children:"Settings"}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"30px",borderRadius:"12px",background:f?"#3a3a3a":"#fff",boxShadow:"0 4px 10px rgba(0,0,0,0.1)"},children:[a.jsx("img",{src:n,alt:"profile",style:{width:"150px",height:"150px",borderRadius:"50%",objectFit:"cover",marginBottom:"15px",border:"3px solid #4b6cb7"}}),a.jsx("input",{type:"file",onChange:C}),a.jsx("button",{onClick:k,style:{marginTop:"15px",padding:"10px 20px",borderRadius:"8px",border:"none",background:"#4b6cb7",color:"#fff",cursor:"pointer"},children:"Update Profile Image"})]}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px",padding:"30px",borderRadius:"12px",background:f?"#3a3a3a":"#fff",boxShadow:"0 4px 10px rgba(0,0,0,0.1)"},children:[a.jsx("input",{type:"text",placeholder:"Name",value:s,onChange:K=>i(K.target.value),style:{padding:"10px",borderRadius:"6px",border:"1px solid #ccc"}}),a.jsx("input",{type:"text",placeholder:"Username",value:o,onChange:K=>c(K.target.value),style:{padding:"10px",borderRadius:"6px",border:"1px solid #ccc"}}),a.jsx("button",{onClick:N,style:{padding:"10px 20px",borderRadius:"8px",border:"none",background:"#4b6cb7",color:"#fff",cursor:"pointer"},children:"Update Info"})]}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px",padding:"30px",borderRadius:"12px",background:f?"#3a3a3a":"#fff",boxShadow:"0 4px 10px rgba(0,0,0,0.1)"},children:[a.jsx("input",{type:"password",placeholder:"New Password",value:y,onChange:K=>I(K.target.value),style:{padding:"10px",borderRadius:"6px",border:"1px solid #ccc"}}),a.jsx("input",{type:"password",placeholder:"Confirm Password",value:w,onChange:K=>T(K.target.value),style:{padding:"10px",borderRadius:"6px",border:"1px solid #ccc"}}),a.jsx("button",{onClick:R,style:{padding:"10px 20px",borderRadius:"8px",border:"none",background:"#4b6cb7",color:"#fff",cursor:"pointer"},children:"Change Password"})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px",padding:"20px",borderRadius:"12px",background:f?"#3a3a3a":"#fff",boxShadow:"0 4px 10px rgba(0,0,0,0.1)"},children:[a.jsx("label",{style:{fontSize:"18px",fontWeight:"500"},children:"Dark Mode"}),a.jsx("input",{type:"checkbox",checked:f,onChange:p})]})]})]})]})}const MN="https://gojo-teacher-web.onrender.com/api",sa="https://ethiostore-17d9f-default-rtdb.firebaseio.com";function LN(){const[t,e]=g.useState(window.innerWidth>600);g.useEffect(()=>{const H=()=>{window.innerWidth<=600?e(!1):e(!0)};return window.addEventListener("resize",H),H(),()=>window.removeEventListener("resize",H)},[]);const[n,r]=g.useState(null),[s,i]=g.useState({}),[o,c]=g.useState(!0),[u,d]=g.useState(""),[f,p]=g.useState("All"),[y,I]=g.useState("All"),[w,T]=g.useState([]),[A,S]=g.useState(!1),[_,v]=g.useState(null),[O,G]=g.useState(!0),[oe,E]=g.useState([]);g.useRef({});const x=zn(),C=["All","A","B","C","D"],k=["Monday","Tuesday","Wednesday","Thursday","Friday"],[N,R]=g.useState(typeof window<"u"?window.innerWidth<=900:!1);g.useEffect(()=>{const H=()=>R(window.innerWidth<=900);return window.addEventListener("resize",H),()=>window.removeEventListener("resize",H)},[]);const j=w.filter(H=>H.type==="message").reduce((H,ue)=>H+(ue.unreadForMe||0),0);g.useEffect(()=>{const H=JSON.parse(localStorage.getItem("teacher"));if(!H){x("/login");return}r(H)},[x]),g.useEffect(()=>{if(!n)return;async function H(){c(!0);try{const ue=await ee.get(`${sa}/Schedules.json`);i(ue.data||{}),d("")}catch{d("Failed to load schedule.")}finally{c(!1)}}H()},[n]);const re=()=>{localStorage.removeItem("teacher"),x("/login")},J=(()=>{if(!n||!s)return{};const H={};return Object.entries(s).forEach(([ue,Ie])=>{Object.entries(Ie||{}).forEach(([_e,me])=>{Object.entries(me||{}).forEach(([z,pe])=>{var F;pe!=null&&pe.teacherName&&pe.teacherName===n.name&&(H[ue]||(H[ue]={}),H[ue][z]||(H[ue][z]=[]),H[ue][z].push({class:_e,subject:pe.subject||"-",time:pe.time||((F=z.match(/\((.*?)\)/))==null?void 0:F[1])||"N/A"}))})})}),H})();function Ce(H){return JSON.parse(localStorage.getItem(`seen_posts_${H}`))||[]}function Z(H,ue){const Ie=Ce(H);Ie.includes(ue)||localStorage.setItem(`seen_posts_${H}`,JSON.stringify([...Ie,ue]))}g.useEffect(()=>{(async()=>{try{let Ie=(await ee.get(`${MN}/get_posts`)).data||[];!Array.isArray(Ie)&&typeof Ie=="object"&&(Ie=Object.values(Ie));const[_e,me,z]=await Promise.all([ee.get(`${sa}/School_Admins.json`),ee.get(`${sa}/Users.json`),ee.get(`${sa}/Chats.json`)]),pe=_e.data||{},F=me.data||{},Te=z.data||{},se=JSON.parse(localStorage.getItem("teacher")),ve=B=>{const X=B.adminId||B.posterAdminId||B.poster||B.admin||null;if(X&&pe[X]){const ne=pe[X],P=ne.userId,L=F[P]||null,te=L&&L.name||ne.name||B.adminName||"Admin",ce=L&&L.profileImage||ne.profileImage||B.adminProfile||"/default-profile.png";return{name:te,profile:ce}}return{name:B.adminName||"Admin",profile:B.adminProfile||"/default-profile.png"}},V=Ie.slice().sort((B,X)=>{const ne=B.time?new Date(B.time).getTime():0;return(X.time?new Date(X.time).getTime():0)-ne}).filter(B=>B.postId).slice(0,5).map(B=>{var ne;const X=ve(B);return{id:B.postId,type:"post",title:((ne=B.message)==null?void 0:ne.substring(0,50))||"Untitled post",adminName:X.name,adminProfile:X.profile,time:B.time?new Date(B.time).getTime():0}});let ie=[];se&&se.userId&&Object.entries(Te).forEach(([B,X])=>{var we;const P=(X.unread||{})[se.userId]||0;if(!P)return;const L=X.participants||{},te=Object.keys(L).find(ke=>ke!==se.userId);let ce=F[te]||{userId:te,name:te,profileImage:"/default-profile.png"};ie.push({chatId:B,type:"message",displayName:ce.name||ce.username||te,profile:ce.profileImage||ce.profile||"/default-profile.png",unreadForMe:P,time:(we=X.lastMessage)!=null&&we.timeStamp?new Date(X.lastMessage.timeStamp).getTime():0})});const le=[...V,...ie].sort((B,X)=>(X.time||0)-(B.time||0)).slice(0,5);T(le)}catch{}})()},[]);const K=async H=>{if(n){if(H.type==="post"&&H.id)Z(n.userId,H.id),T(ue=>ue.filter(Ie=>Ie.id!==H.id)),S(!1),x("/dashboard");else if(H.type==="message"&&H.chatId){T(ue=>ue.filter(Ie=>Ie.chatId!==H.chatId)),S(!1);try{await ee.put(`${sa}/Chats/${H.chatId}/unread/${n.userId}.json`,null)}catch{}x("/all-chat")}}};return a.jsxs("div",{className:"gojo-root-dashboard",children:[a.jsx("style",{children:`
    body, html, #root { height: 100%; margin: 0; }
    .gojo-root-dashboard {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      background: #f0f4f8;
      overflow: hidden;
    }
    .top-navbar {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      z-index: 1000;
      background: #fff;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 24px;
      height: 60px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.07);
    }
    .google-sidebar {
      position: fixed;
      top: 60px;
      left: 0;
      width: 220px;
      height: calc(100vh - 60px);
      background: #fff;
      box-shadow: 2px 0 8px rgba(0,0,0,0.04);
      z-index: 900;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-top: 18px;
      overflow-y: auto;
      transition: width 0.2s;
      min-width: 48px;
    }
    .main-area-row {
      display: flex;
      flex: 1;
      flex-direction: row;
      height: 100vh;
      margin-top: 60px;
      width: 100%;
      min-width: 0;
    }
    .schedule-main {
      flex: 1;
      margin-left: 220px;
      padding: 30px;
      background: #f0f4f8;
      min-height: calc(100vh - 60px);
      overflow-y: auto;
      transition: margin-left 0.2s;
      position: relative;
      z-index: 20;
    }
    .right-sidebar {
      position: fixed;
      top: 60px;
      right: 0;
      width: 420px;
      height: calc(100vh - 60px);
      z-index: 300;
      background: #fff;
      box-shadow: 0 0 20px rgba(0,0,0,0.07);
      display: flex;
      flex-direction: column;
      transition: right 0.2s, left 0.2s, width 0.2s;
    }
    .close-sidebar-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      background: linear-gradient(90deg, #2563eb, #3b82f6);
      color: #fff;
      border: none;
      border-radius: 50%;
      width: 36px;
      height: 36px;
      font-size: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
      z-index: 10;
      cursor: pointer;
    }
    @media (max-width: 900px) {
      .google-sidebar { width: 60px; min-width: 60px; }
      .schedule-main { margin-left: 60px; padding: 17px 2vw; }
      .right-sidebar { width: 100vw; left: 0; right: initial; }
    }
    @media (max-width: 600px) {
      .top-navbar { height: 54px; padding: 0 7px; }
      .google-sidebar {
        top: 54px;
        width: 48px;
        min-width: 48px;
        padding: 0;
        align-items: flex-start;
      }
      .main-area-row { margin-top: 54px; }
      .schedule-main { margin-left: 48px; padding: 8px 2vw; border-radius: 7px; }
      .right-sidebar { left: 0; right: initial; width: 100vw; height: calc(100vh - 54px); }
      .close-sidebar-btn {
        top: 8px !important;
        right: 8px !important;
        width: 44px !important;
        height: 44px !important;
        font-size: 22px !important;
      }
    }
  `}),a.jsxs("nav",{className:"top-navbar",children:[a.jsx("h2",{children:"Gojo Dashboard"}),a.jsxs("div",{className:"nav-right",style:{display:"flex",alignItems:"center",gap:16},children:[a.jsxs("div",{className:"icon-circle",style:{position:"relative"},children:[a.jsxs("div",{onClick:()=>S(!A),style:{cursor:"pointer",position:"relative"},children:[a.jsx(ss,{size:24}),w.length>0&&a.jsx("span",{style:{position:"absolute",top:-5,right:-5,background:"red",color:"white",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:w.length})]}),A&&a.jsxs(a.Fragment,{children:[a.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.08)",zIndex:1999},onClick:()=>S(!1)}),a.jsx("div",{className:"notification-popup",style:typeof window<"u"&&window.innerWidth<=600?{position:"fixed",left:"50%",top:"8%",transform:"translate(-50%, 0)",width:"90vw",maxWidth:340,zIndex:2e3,background:"#fff",borderRadius:12,boxShadow:"0 2px 16px rgba(0,0,0,0.18)",maxHeight:"70vh",overflowY:"auto",padding:12}:{position:"absolute",top:28,right:0,width:300,maxHeight:400,overflowY:"auto",background:"#fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",borderRadius:8,zIndex:100},children:w.length?w.map((H,ue)=>a.jsxs("div",{onClick:()=>K(H.id),style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:H.adminProfile,alt:H.adminName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:H.adminName}),a.jsx("p",{style:{margin:0,fontSize:12},children:H.title})]})]},H.id||ue)):a.jsx("div",{style:{padding:15},children:"No notifications"})})]})]}),a.jsx("div",{className:"icon-circle",style:{position:"relative",marginLeft:12},children:a.jsxs("div",{onClick:()=>x("/all-chat"),style:{cursor:"pointer",position:"relative"},children:[a.jsx(rs,{size:22}),j>0&&a.jsx("span",{style:{position:"absolute",top:-6,right:-6,background:"#ff0000",color:"#fff",borderRadius:"50%",minWidth:18,height:18,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 6px",fontSize:12},children:j})]})}),a.jsxs("div",{className:"icon-circle",onClick:()=>x("/settings"),children:[" ",a.jsx(xr,{})," "]}),a.jsx("img",{src:(n==null?void 0:n.profileImage)||"/default-profile.png",alt:"profile",style:{width:36,height:36,borderRadius:"50%"}})]})]}),a.jsxs("div",{className:"main-area-row",children:[typeof window<"u"&&window.innerWidth<=600&&!t&&a.jsx("button",{className:"sidebar-arrow-btn",style:{position:"fixed",left:0,top:180,transform:"none",zIndex:1300,background:"#fff",border:"none",borderRadius:"0 8px 8px 0",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",padding:8,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:()=>e(!0),"aria-label":"Open sidebar menu",children:a.jsx(Pr,{size:22})}),typeof window<"u"&&window.innerWidth<=600&&t&&a.jsx("div",{className:"sidebar-overlay visible",onClick:()=>e(!1),style:{display:"block",position:"fixed",inset:0,background:"rgba(0,0,0,0.35)",zIndex:1200}}),a.jsxs("div",{className:`google-sidebar${typeof window<"u"&&window.innerWidth<=600&&t?" open":""}`,style:typeof window<"u"&&window.innerWidth<=600?{position:"fixed",top:64,left:t?0:"-220px",width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",zIndex:1200,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto",transition:"left 0.25s cubic-bezier(.4,0,.2,1)"}:{position:"fixed",top:64,left:0,width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.04)",zIndex:900,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto"},children:[n&&a.jsxs("div",{className:"sidebar-profile",children:[a.jsx("div",{className:"sidebar-img-circle",children:a.jsx("img",{src:n.profileImage||"/default-profile.png",alt:"profile",style:{width:"100%",height:"100%",objectFit:"cover",border:"none",boxShadow:"none"}})}),a.jsx("h3",{children:n.name}),a.jsx("p",{children:n.username})]}),a.jsxs("div",{className:"sidebar-menu",style:{display:"flex",flexDirection:"column",gap:8,width:"100%"},children:[a.jsxs(ye,{className:"sidebar-btn",to:"/dashboard",children:[a.jsx(Dr,{})," Home"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/students",children:[a.jsx(Ye,{})," Students"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/admins",children:[a.jsx(Ye,{})," Admins"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/parents",children:[a.jsx(Or,{})," Parents"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/marks",children:[a.jsx(Jt,{})," Marks"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/attendance",children:[a.jsx(Ye,{})," Attendance"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/schedule",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[a.jsx(Ye,{})," Schedule"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/lesson-plan",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[a.jsx(Jt,{})," Lesson Plan"]}),a.jsxs("button",{className:"sidebar-btn logout-btn",onClick:re,children:[a.jsx(Mr,{})," Logout"]})]})]}),a.jsx("div",{className:"schedule-main",children:a.jsxs("div",{className:"schedule-container",style:{width:"100%",maxWidth:900,margin:"0 auto",marginLeft:"150px"},children:[a.jsxs("div",{style:{display:"flex",gap:"20px",marginBottom:"25px",justifyContent:"center",flexWrap:"wrap"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{marginRight:"8px",fontWeight:"600"},children:"Grade:"}),a.jsxs("select",{value:f,onChange:H=>p(H.target.value),style:{padding:"8px 12px",borderRadius:"8px",border:"1px solid #ccc",cursor:"pointer"},children:[a.jsx("option",{value:"All",children:"All"}),a.jsx("option",{value:"9",children:"9"}),a.jsx("option",{value:"10",children:"10"}),a.jsx("option",{value:"12",children:"12"})]})]}),a.jsxs("div",{children:[a.jsx("label",{style:{marginRight:"8px",fontWeight:"600"},children:"Section:"}),a.jsxs("select",{value:y,onChange:H=>I(H.target.value),style:{padding:"8px 12px",borderRadius:"8px",border:"1px solid #ccc",cursor:"pointer"},children:[a.jsx("option",{value:"All",children:"All"}),C.filter(H=>H!=="All").map(H=>a.jsx("option",{value:H,children:H},H))]})]})]}),a.jsx("h2",{style:{textAlign:"center",marginBottom:"30px",color:"#2563eb"},children:"Full Schedule"}),o&&a.jsx("p",{style:{textAlign:"center"},children:"Loading schedule..."}),u&&a.jsx("p",{style:{color:"red",textAlign:"center"},children:u}),!o&&k.map(H=>{const ue=s[H];return ue?a.jsxs("div",{style:{marginBottom:"40px"},children:[a.jsx("h3",{style:{color:"#1c03ffff",marginBottom:"15px"},children:H}),Object.entries(ue).filter(([Ie])=>f==="All"||Ie.includes(f)).map(([Ie,_e])=>{const me=Ie.slice(-1);return y!=="All"&&me!==y?null:a.jsxs("div",{style:{marginBottom:"18px"},children:[a.jsx("h4",{style:{color:"#4603fcff",marginBottom:"10px"},children:Ie}),a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",background:"#fff",borderRadius:"12px",overflow:"hidden",boxShadow:"0 8px 20px rgba(0,0,0,0.1)"},children:[a.jsx("thead",{style:{background:"#2563eb",color:"#fff"},children:a.jsxs("tr",{children:[a.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Period"}),a.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Subject"}),a.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Time"}),a.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Teacher"})]})}),a.jsx("tbody",{children:Object.entries(_e).map(([z,pe],F)=>{var ve;const Te=(pe==null?void 0:pe.teacherName)===(n==null?void 0:n.name),se=pe.time||((ve=z.match(/\((.*?)\)/))==null?void 0:ve[1])||"N/A";return a.jsxs("tr",{style:{borderBottom:"1px solid #eee",backgroundColor:Te?"#dbeafe":"#f3f4f6",color:Te?"#1e40af":"#6b7280",fontWeight:Te?"700":"400",borderLeft:Te?"4px solid #2563eb":"none",opacity:Te?1:.85},children:[a.jsx("td",{style:{padding:"12px"},children:z}),a.jsx("td",{style:{padding:"12px"},children:pe.subject||"-"}),a.jsx("td",{style:{padding:"12px"},children:se}),a.jsx("td",{style:{padding:"12px"},children:pe.teacherName||"-"})]},F)})})]})]},Ie)})]},H):null})]})}),O&&a.jsxs("div",{className:"right-sidebar",children:[a.jsx("button",{title:"Close sidebar",onClick:()=>G(!1),className:"close-sidebar-btn",style:{marginRight:"40px"},children:a.jsx(Pr,{})}),a.jsx("div",{style:{display:"flex",alignItems:"center",background:"linear-gradient(90deg, #2563eb, #3b82f6)",color:"#fff",padding:"12px 48px 12px 20px",textAlign:"center",fontWeight:"600",fontSize:"1.2rem",boxShadow:"0 2px 6px rgba(0,0,0,0.1)",borderTopLeftRadius:"1px",borderTopRightRadius:"1px",justifyContent:"flex-start"},children:"My Schedule"}),a.jsx("div",{style:{padding:"20px",height:"calc(100% - 60px)",overflowY:"auto",background:"#f9fafb"},children:o?a.jsx("p",{style:{textAlign:"center",color:"#6b7280"},children:"Loading schedule..."}):Object.keys(J).length===0?a.jsx("p",{style:{textAlign:"center",color:"#6b7280"},children:"No schedule found."}):k.map(H=>{const ue=J[H];if(!ue)return null;const _e=new Date().toLocaleDateString("en-US",{weekday:"long"})===H;return a.jsxs("div",{style:{marginBottom:"20px",padding:"10px",borderRadius:"12px",background:_e?"#e0f2fe":"#fff",boxShadow:_e?"0 4px 12px rgba(59, 130, 246, 0.2)":"0 2px 6px rgba(0,0,0,0.05)"},children:[a.jsx("h4",{style:{color:"#1e3a8a",marginBottom:"12px",fontWeight:"600",fontSize:"1.05rem",borderBottom:"1px solid #e5e7eb",paddingBottom:"5px"},children:H}),Object.entries(ue).map(([me,z])=>a.jsxs("div",{style:{marginBottom:"12px",background:"#f3f4f6",padding:"12px 15px",borderRadius:"10px",borderLeft:"5px solid #2563eb",boxShadow:"0 1px 3px rgba(0,0,0,0.05)",transition:"transform 0.2s, box-shadow 0.2s"},children:[a.jsx("strong",{style:{display:"block",marginBottom:"6px",color:"#1e3a8a",fontSize:"0.98rem"},children:me}),a.jsx("ul",{style:{paddingLeft:"18px",margin:0},children:z.map((pe,F)=>a.jsxs("li",{style:{marginBottom:"6px",color:"#374151",fontSize:"0.95rem"},children:[a.jsx("span",{style:{fontWeight:"600",color:"#2563eb"},children:pe.class})," - ",pe.subject," (",pe.time,")"]},F))})]},me))]},H)})})]}),!O&&a.jsx("button",{title:"Open sidebar",onClick:()=>G(!0),style:{position:"fixed",top:"80px",right:"20px",width:"35px",height:"40px",background:"linear-gradient(90deg, #2563eb, #3b82f6)",color:"#fff",border:"none",borderRadius:"20px",boxShadow:"0 4px 12px rgba(59,130,246, 0.15)",zIndex:301,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"right 0.3s"},children:a.jsx(cf,{})})]})]})}const lh={id:"",title:"",contentUrl:"",hasExam:!1,order:1},By={question:"",options:{A:"",B:"",C:"",D:""},correct:"A",points:1,explanation:""},FN=()=>{const[t,e]=g.useState(!1),[n,r]=g.useState(""),[s,i]=g.useState(""),[o,c]=g.useState([{...lh}]),[u,d]=g.useState(!1),[f,p]=g.useState(""),[y,I]=g.useState(""),w=(B,X,ne)=>{c(P=>{const L=[...P];return L[B][X]=ne,L})},T=()=>c(B=>[...B,{...lh,order:B.length+1}]),A=B=>{o.length!==1&&c(X=>X.filter((ne,P)=>P!==B))},[S,_]=g.useState(""),[v,O]=g.useState(""),[G,oe]=g.useState(""),[E,x]=g.useState(30),[C,k]=g.useState(1),[N,R]=g.useState(1),[j,re]=g.useState(!1),[Ee,J]=g.useState([{...By}]),[Ce,Z]=g.useState(!1),[K,ae]=g.useState(""),[H,ue]=g.useState(""),[Ie,_e]=g.useState([]),[me,z]=g.useState([]),[pe,F]=g.useState([]),Te=async()=>{try{const X=(await Ca(Pt(Mt,"Curriculum"))).val()||{};_e(Object.keys(X))}catch{_e([])}};g.useEffect(()=>{Te()},[]);const se=async B=>{B.preventDefault(),d(!0),p(""),I("");try{if(!n||!s)throw new Error("Grade and Subject required");const X=n.startsWith("grade_")?n:`grade_${n}`,ne={};o.forEach((P,L)=>{if(!P.id)throw new Error("Each chapter must have an ID");ne[P.id]={...P,order:L+1}}),await Er(Pt(Mt,`Curriculum/${X}/${s}`),{subjectName:s,totalChapters:o.length,chapters:ne}),p("Curriculum created/updated successfully!"),r(""),i(""),c([{...lh}]),await Te()}catch(X){I(X.message||"Failed to create curriculum")}finally{d(!1)}};g.useEffect(()=>{if(!S){z([]),O("");return}async function B(){try{const ne=(await Ca(Si(Pt(Mt),`Curriculum/${S}`))).val()||{};z(Object.keys(ne))}catch{z([])}}B()},[S]),g.useEffect(()=>{if(!S||!v){F([]),oe("");return}async function B(){try{const ne=(await Ca(Si(Pt(Mt),`Curriculum/${S}/${v}/chapters`))).val()||{},P=Object.entries(ne).map(([L,te])=>({id:L,title:te.title||L}));F(P)}catch{F([])}}B()},[S,v]);const ve=(B,X,ne)=>{J(P=>{const L=[...P];return X==="options"?L[B].options={...L[B].options,...ne}:L[B][X]=ne,L})},V=()=>{J(B=>[...B,{...By}]),k(B=>B+1)},ie=B=>{Ee.length!==1&&(J(X=>X.filter((ne,P)=>P!==B)),k(X=>X-1))},le=async B=>{B.preventDefault(),Z(!0),ae(""),ue("");try{if(!S||!v||!G)throw new Error("Grade, Subject, and Chapter are required");const X=`${v}_${S}`,ne={};Ee.forEach((P,L)=>{ne[`q_${String(L+1).padStart(3,"0")}`]=P}),await N2(Pt(Mt,`Exams/${X}/${G}`),{durationMinutes:Number(E),totalQuestions:Number(C),passScore:Number(N),published:j,questions:ne,examId:`${X}_${G}`}),ae("Exam saved successfully!")}catch(X){ue(X.message||"Failed to save exam")}finally{Z(!1)}};return a.jsxs(a.Fragment,{children:[a.jsx("style",{children:`
        .exam-pro {
          width: 100vw;
          min-height: 100vh;
          margin: 0;
          padding: 0;
          background: linear-gradient(120deg, #f8fafc 60%, #e3f0fc 100%);
          border-radius: 0;
          box-shadow: none;
          font-family: 'Segoe UI', 'Roboto', Arial, sans-serif;
          animation: fadeInExam 0.7s cubic-bezier(.4,0,.2,1);
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: flex-start;
        }
        @keyframes fadeInExam {
          from { opacity: 0; transform: translateY(40px) scale(0.98); }
          to { opacity: 1; transform: none; }
        }
        .exam-section-title {
          font-size: 2.4rem;
          font-weight: 900;
          margin-bottom: 28px;
          color: #0d133d;
          letter-spacing: 0.7px;
          text-shadow: 0 2px 12px #e3e7ed;
        }
        .exam-form-group {
          margin-bottom: 26px;
          display: flex;
          flex-direction: column;
          gap: 8px;
        }
        .exam-label {
          font-weight: 700;
          color: #28384a;
          font-size: 1.13rem;
        }
        .exam-input, .exam-select {
          padding: 12px 16px;
          border: 2px solid #b0bec5;
          border-radius: 8px;
          font-size: 1.13rem;
          background: #f4f8fb;
          transition: border 0.2s, box-shadow 0.2s;
        }
        .exam-input:focus, .exam-select:focus {
          border: 2.5px solid #1976d2;
          outline: none;
          box-shadow: 0 0 0 3px #90caf9;
        }
        .exam-button {
          background: linear-gradient(90deg, #1976d2 60%, #42a5f5 100%);
          color: #fff;
          border: none;
          border-radius: 8px;
          padding: 14px 32px;
          font-size: 1.18rem;
          font-weight: 800;
          cursor: pointer;
          margin-top: 12px;
          box-shadow: 0 3px 14px rgba(25, 118, 210, 0.13);
          transition: background 0.2s, box-shadow 0.2s, transform 0.1s;
        }
        .exam-button:hover:not(:disabled) {
          background: linear-gradient(90deg, #1565c0 60%, #1976d2 100%);
          transform: translateY(-3px) scale(1.04);
          box-shadow: 0 7px 24px rgba(25, 118, 210, 0.16);
        }
        .exam-button:disabled {
          background: #b0bec5;
          cursor: not-allowed;
        }
        .exam-success {
          color: #388e3c;
          font-weight: 700;
          margin-top: 14px;
          font-size: 1.13rem;
        }
        .exam-error {
          color: #d32f2f;
          font-weight: 700;
          margin-top: 14px;
          font-size: 1.13rem;
        }
        .exam-question-card {
          border: 2px solid #e3e7ed;
          border-radius: 14px;
          padding: 26px 22px;
          margin-bottom: 28px;
          background: #f9fbfd;
          box-shadow: 0 4px 16px rgba(44,62,80,0.09);
          transition: box-shadow 0.22s, border 0.18s;
          animation: fadeInExam 0.6s cubic-bezier(.4,0,.2,1);
        }
        .exam-question-card:hover {
          box-shadow: 0 10px 32px rgba(44,62,80,0.13);
          border: 2.5px solid #90caf9;
        }
        .exam-question-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          font-weight: 800;
          color: #1976d2;
          margin-bottom: 14px;
          font-size: 1.18rem;
        }
        .exam-options-row {
          display: flex;
          gap: 16px;
          margin-top: 8px;
        }
        .exam-remove-btn {
          color: #d32f2f;
          background: none;
          border: none;
          font-weight: 800;
          cursor: pointer;
          margin-left: 14px;
          font-size: 1.11rem;
          transition: color 0.15s, text-decoration 0.15s;
        }
        .exam-remove-btn:hover {
          color: #b71c1c;
          text-decoration: underline;
        }
      `}),a.jsxs("div",{className:"exam-pro",children:[a.jsx("h2",{className:"exam-section-title",children:"Create or Edit Curriculum"}),a.jsx("button",{type:"button",className:"exam-button",onClick:()=>e(B=>!B),style:{marginBottom:18},children:t?"Hide Curriculum Form":"Show Curriculum Form"}),t&&a.jsxs("form",{onSubmit:se,style:{border:"1px solid #bbb",borderRadius:8,padding:18,marginBottom:32},children:[a.jsxs("div",{className:"exam-form-group",children:[a.jsx("label",{className:"exam-label",children:"Grade: "}),a.jsx("input",{className:"exam-input",value:n,onChange:B=>r(B.target.value),placeholder:"e.g. 7",required:!0})]}),a.jsxs("div",{className:"exam-form-group",children:[a.jsx("label",{className:"exam-label",children:"Subject: "}),a.jsx("input",{className:"exam-input",value:s,onChange:B=>i(B.target.value),placeholder:"e.g. mathematics",required:!0})]}),a.jsx("h4",{children:"Chapters"}),o.map((B,X)=>a.jsx("div",{className:"exam-question-card",children:a.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[a.jsx("label",{className:"exam-label",children:"ID: "}),a.jsx("input",{className:"exam-input",value:B.id,onChange:ne=>w(X,"id",ne.target.value),placeholder:"chapter_01",required:!0,style:{width:110}}),a.jsx("label",{className:"exam-label",children:"Title: "}),a.jsx("input",{className:"exam-input",value:B.title,onChange:ne=>w(X,"title",ne.target.value),placeholder:"Chapter Title",required:!0,style:{width:180}}),a.jsx("label",{className:"exam-label",children:"PDF URL: "}),a.jsx("input",{className:"exam-input",value:B.contentUrl,onChange:ne=>w(X,"contentUrl",ne.target.value),placeholder:"PDF URL",style:{width:180}}),a.jsx("label",{className:"exam-label",children:"Has Exam: "}),a.jsx("input",{type:"checkbox",checked:!!B.hasExam,onChange:ne=>w(X,"hasExam",ne.target.checked)}),a.jsx("button",{type:"button",className:"exam-remove-btn",onClick:()=>A(X),children:"Remove"})]})},X)),a.jsx("button",{type:"button",className:"exam-button",onClick:T,style:{marginBottom:12},children:"Add Chapter"}),a.jsx("div",{children:a.jsx("button",{type:"submit",className:"exam-button",disabled:u,children:u?"Saving...":"Save Curriculum"})}),f&&a.jsx("div",{className:"exam-success",children:f}),y&&a.jsx("div",{className:"exam-error",children:y})]}),a.jsx("h2",{className:"exam-section-title",children:"Create Exam"}),a.jsxs("form",{onSubmit:le,children:[a.jsxs("div",{className:"exam-form-group",children:[a.jsx("label",{className:"exam-label",children:"Grade: "}),a.jsxs("select",{className:"exam-select",value:S,onChange:B=>_(B.target.value),required:!0,children:[a.jsx("option",{value:"",children:"Select Grade"}),Ie.map(B=>a.jsx("option",{value:B,children:B.replace("grade_","Grade ")},B))]})]}),a.jsxs("div",{className:"exam-form-group",children:[a.jsx("label",{className:"exam-label",children:"Subject: "}),a.jsxs("select",{className:"exam-select",value:v,onChange:B=>O(B.target.value),required:!0,disabled:!S,children:[a.jsx("option",{value:"",children:"Select Subject"}),me.map(B=>a.jsx("option",{value:B,children:B.charAt(0).toUpperCase()+B.slice(1)},B))]})]}),a.jsxs("div",{className:"exam-form-group",children:[a.jsx("label",{className:"exam-label",children:"Chapter: "}),a.jsxs("select",{className:"exam-select",value:G,onChange:B=>oe(B.target.value),required:!0,disabled:!v,children:[a.jsx("option",{value:"",children:"Select Chapter"}),pe.map(B=>a.jsxs("option",{value:B.id,children:[B.title," (",B.id,")"]},B.id))]})]}),a.jsxs("div",{className:"exam-form-group",children:[a.jsx("label",{className:"exam-label",children:"Duration (minutes): "}),a.jsx("input",{className:"exam-input",type:"number",value:E,onChange:B=>x(B.target.value),min:1,required:!0})]}),a.jsxs("div",{className:"exam-form-group",children:[a.jsx("label",{className:"exam-label",children:"Total Questions: "}),a.jsx("input",{className:"exam-input",type:"number",value:C,onChange:B=>k(B.target.value),min:1,required:!0})]}),a.jsxs("div",{className:"exam-form-group",children:[a.jsx("label",{className:"exam-label",children:"Pass Score: "}),a.jsx("input",{className:"exam-input",type:"number",value:N,onChange:B=>R(B.target.value),min:1,required:!0})]}),a.jsxs("div",{className:"exam-form-group",children:[a.jsx("label",{className:"exam-label",children:"Published: "}),a.jsx("input",{type:"checkbox",checked:j,onChange:B=>re(B.target.checked)})]}),a.jsx("h3",{className:"exam-section-title",style:{fontSize:"1.3rem",marginTop:24},children:"Questions"}),Ee.map((B,X)=>a.jsxs("div",{className:"exam-question-card",children:[a.jsxs("div",{className:"exam-question-header",children:[a.jsxs("span",{children:["Question ",X+1]}),Ee.length>1&&a.jsx("button",{type:"button",className:"exam-remove-btn",onClick:()=>ie(X),children:"Remove"})]}),a.jsxs("div",{className:"exam-form-group",children:[a.jsx("label",{className:"exam-label",children:"Question: "}),a.jsx("input",{className:"exam-input",value:B.question,onChange:ne=>ve(X,"question",ne.target.value),required:!0})]}),a.jsxs("div",{className:"exam-form-group",children:[a.jsx("label",{className:"exam-label",children:"Options:"}),a.jsx("div",{className:"exam-options-row",children:Object.keys(B.options).map(ne=>a.jsxs("span",{children:[ne,": ",a.jsx("input",{className:"exam-input",value:B.options[ne],onChange:P=>ve(X,"options",{[ne]:P.target.value}),required:!0,style:{width:80}})]},ne))})]}),a.jsxs("div",{className:"exam-form-group",children:[a.jsx("label",{className:"exam-label",children:"Correct Option: "}),a.jsx("select",{className:"exam-select",value:B.correct,onChange:ne=>ve(X,"correct",ne.target.value),children:Object.keys(B.options).map(ne=>a.jsx("option",{value:ne,children:ne},ne))})]}),a.jsxs("div",{className:"exam-form-group",children:[a.jsx("label",{className:"exam-label",children:"Points: "}),a.jsx("input",{className:"exam-input",type:"number",value:B.points,min:1,onChange:ne=>ve(X,"points",ne.target.value),required:!0,style:{width:60}})]}),a.jsxs("div",{className:"exam-form-group",children:[a.jsx("label",{className:"exam-label",children:"Explanation: "}),a.jsx("input",{className:"exam-input",value:B.explanation,onChange:ne=>ve(X,"explanation",ne.target.value)})]})]},X)),a.jsx("button",{type:"button",className:"exam-button",onClick:V,style:{marginBottom:18},children:"Add Question"}),a.jsx("div",{children:a.jsx("button",{type:"submit",className:"exam-button",disabled:Ce,children:Ce?"Saving...":"Save Exam"})}),K&&a.jsx("div",{className:"exam-success",children:K}),H&&a.jsx("div",{className:"exam-error",children:H})]})]})]})};var Wy,Hy;const Js=((Hy=(Wy=import.meta)==null?void 0:Wy.env)==null?void 0:Hy.VITE_API_BASE)||"/api";function zN(){const[t,e]=g.useState(null),[n,r]=g.useState([]),[s,i]=g.useState(""),[o,c]=g.useState(""),[u,d]=g.useState(null),[f,p]=g.useState([]),y=zn(),[I,w]=g.useState([]),[T,A]=g.useState(!1),[S,_]=g.useState(null),[v,O]=g.useState(null),[G,oe]=g.useState(""),E=()=>({dayName:"",topic:"",method:"",aids:"",assessment:""}),[x,C]=g.useState([]),[k,N]=g.useState([]),[R,j]=g.useState([{month:"",week:"",days:"",topic:"",objective:"",method:"",aids:"",assessment:""}]),[re,Ee]=g.useState([]),[J,Ce]=g.useState([]),[Z,K]=g.useState(!1),[ae,H]=g.useState("daily"),[ue,Ie]=g.useState(!0),_e=n.find(D=>D.id===s)||null,me={sunday:0,monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6};g.useEffect(()=>{if(!t)return Ee([]);const D=new Date().getDay(),$=[];R.forEach((U,be)=>{(Array.isArray(U.weekDays)?U.weekDays:Array.isArray(U.days)?U.days:[]).forEach((ze,gt)=>{const jt=(ze.dayName||ze.name||"").toString().trim(),st=`${t.userId}::${s||"nocourse"}::${U.week||be}::${jt||gt}`,He=J.includes(st),os=(jt||"").toLowerCase(),Vs=os&&me.hasOwnProperty(os)?me[os]:null,as=He?"submitted":Vs!==null&&Vs<D?"missed":"pending";$.push({key:st,dayName:jt||`Day ${gt+1}`,topic:ze.topic||U.topic||"",week:U.week,status:as,scheduledIndex:Vs})})});const Q=$.filter(U=>U.scheduledIndex===D);Ee(Q)},[R,s,t,J]);const z=async()=>{if(!(!t||!t.userId||!s)){try{const D=await ee.get(`${Js}/lesson-plans/submissions`,{params:{teacherId:t.userId,courseId:s,academicYear:"2025/26"}});if(D.data&&D.data.success&&Array.isArray(D.data.data)){const $=D.data.data.map(Q=>Q.key).filter(Boolean);return Ce($),$}}catch(D){console.warn("Could not fetch submissions from API, will rely on local cache",(D==null?void 0:D.message)||D)}return[]}};g.useEffect(()=>{z()},[t,s]),g.useEffect(()=>{!t||!t.userId||!s||!R||R.length===0||z().catch(()=>{})},[t,s,R]);const pe=async D=>{var $;if(D){if(D.status==="missed"){alert("Cannot submit a lesson for a day that has already passed.");return}if(J.includes(D.key)){Ee(Q=>Q.map(U=>U.key===D.key?{...U,status:"submitted"}:U));return}try{const Q={teacherId:t.userId,courseId:s,academicYear:"2025/26",week:D.week,dayName:D.dayName,key:D.key,submittedAt:new Date().toISOString()},U=await ee.post(`${Js}/lesson-plans/submit-daily`,Q);if(U!=null&&U.data&&U.data.success)await z(),Ee(be=>be.map(De=>De.key===D.key?{...De,status:"submitted"}:De));else{const be=(($=U==null?void 0:U.data)==null?void 0:$.message)||JSON.stringify(U==null?void 0:U.data)||"Submission failed";throw new Error(be)}}catch(Q){console.error("Submit daily plan failed:",Q);try{localStorage.setItem(D.key,"submitted"),Ce(U=>[...U,D.key]),Ee(U=>U.map(be=>be.key===D.key?{...be,status:"submitted"}:be)),alert("Unable to reach server; saved locally. Submission marked locally.")}catch{alert("Failed to submit daily plan. Please try again.")}}}},F=g.useRef({});t==null||t.userId;const Te=g.useRef(null),se=(D=1,$=400)=>{const Q=Te.current;if(Q)try{Q.scrollBy({left:D*$,behavior:"smooth"})}catch{Q.scrollLeft=Q.scrollLeft+D*$}};g.useEffect(()=>{const D=JSON.parse(localStorage.getItem("teacher"));if(!D){y("/login");return}e(D)},[]),g.useEffect(()=>{(async()=>{if(!(!t||!t.userId||!s)){K(!0),j([]);try{const $=await ee.get(`${Js}/lesson-plans/${t.userId}`,{params:{academicYear:"2025/26",courseId:s}});if($.data&&$.data.success){const Q=$.data.data||{};let U=null;if(Q.annual&&Array.isArray(Q.annual.annualRows)?U=Q.annual.annualRows:Array.isArray(Q.annualRows)&&(U=Q.annualRows),Array.isArray(U)&&U.length>0){j(le(U));try{await z()}catch{}}else{const be=pt(Q);be.length?j(le(be)):j([]);try{await z()}catch{}}}}catch($){console.error("Error fetching lesson plans:",$),j([])}finally{K(!1)}}})()},[t,s]),g.useEffect(()=>{if(!t)return;(async()=>{try{const $="https://ethiostore-17d9f-default-rtdb.firebaseio.com",[Q,U,be]=await Promise.all([ee.get(`${$}/Courses.json`),ee.get(`${$}/TeacherAssignments.json`),ee.get(`${$}/Teachers.json`)]),De=Object.entries(be.data||{}).find(([st,He])=>He.userId===t.userId);if(!De)return;const ze=De[0],jt=Object.values(U.data||{}).filter(st=>st.teacherId===ze).map(st=>({id:st.courseId,...Q.data?Q.data[st.courseId]:{}}));r(jt),!s&&jt.length&&i(jt[0].id)}catch($){console.error("Error fetching courses for lesson plan:",$)}})()},[t]),g.useEffect(()=>{(async()=>{try{const U=((await ee.get(`${Js}/get_posts`)).data||[]).slice(0,5).map(be=>{var De;return{id:be.postId,title:((De=be.message)==null?void 0:De.substring(0,50))||"Untitled post",adminName:be.adminName||"Admin",adminProfile:be.adminProfile||"/default-profile.png"}});w(U)}catch($){console.error("Error fetching notifications:",$)}})()},[]);const ve=(D,$)=>{_(D);const Q=F.current[D];Q&&Q.scrollIntoView({behavior:"smooth",block:"center"});const U=[...I];U.splice($,1),w(U),A(!1),setTimeout(()=>_(null),3e3)},V=async(D=null)=>{var $;try{const Q=typeof D=="number"?D:v,U=typeof Q=="number"&&(($=R[Q])==null?void 0:$.week)||Q,be={teacherId:t.userId,courseId:s,academicYear:"2025/26",week:U,weekTopic:G,days:x},De=await ee.post(`${Js}/lesson-plans/save-week`,be);if(typeof Q=="number"){const ze=[...R];ze[Q]={...ze[Q],topic:G,weekDays:x},j(ze)}console.info("Save week response:",(De==null?void 0:De.data)||De),alert("Week plan saved successfully!"),O(null)}catch(Q){console.error("Save week error:",Q);let U="Failed to save lesson plan";Q.response?U+=`  server responded ${Q.response.status}: ${JSON.stringify(Q.response.data)}`:Q.request?U+="  no response received (network/CORS issue)":Q.message&&(U+=`  ${Q.message}`),alert(U)}},ie=()=>[],le=D=>Array.isArray(D)?D.map($=>({month:$.month||"",week:$.week||$.weekNumber||"",days:$.weekDays||$.days||$.daysList||"",topic:$.topic||$.weekTopic||"",objective:$.objective||$.goals||"",method:$.method||$.methods||"",material:$.aids||$.material||$.materials||"",assessment:$.assessment||$.assess||""})):[],B=D=>D?Array.isArray(D)?D.map($=>({dayName:$.dayName||$.name||$.day||$.label||"",topic:$.topic||$.subject||$.title||"",method:$.method||$.methods||"",aids:$.aids||$.material||$.materials||$.aid||"",assessment:$.assessment||$.assess||$.evaluation||""})):typeof D=="object"?Object.keys(D).map($=>{const Q=D[$]||{};return typeof Q=="string"?{dayName:$,topic:Q,method:"",aids:"",assessment:""}:{dayName:Q.dayName||Q.name||$,topic:Q.topic||Q.subject||"",method:Q.method||Q.methods||"",aids:Q.aids||Q.material||"",assessment:Q.assessment||Q.assess||""}}):[]:[],X=typeof v=="number"?v:R&&R.length?0:null,ne=X!==null&&R[X]?R[X]:null,P=ne?B(ne.weekDays||ne.days||[]):[],L=Gt.useMemo(()=>{const D={};return(R||[]).forEach($=>{const Q=($.month||"Unspecified").toString();D[Q]||(D[Q]=[]),D[Q].push($)}),D},[R]),te=D=>{if(!D)return null;const $=(D||"").toString().toLowerCase();return me.hasOwnProperty($)?me[$]:null},ce=(D,$,Q)=>`${(t==null?void 0:t.userId)||"anon"}::${s||"nocourse"}::${D||X||0}::${$||Q}`,we=(D,$)=>{const Q=new Date().getDay(),U=te(D.dayName||""),be=ce((ne==null?void 0:ne.week)||X,D.dayName,$);return J.includes(be)?{status:"submitted",key:be}:U!==null&&U<Q?{status:"missed",key:be}:{status:"pending",key:be}},ke=Gt.useMemo(()=>{const D={submitted:0,missed:0,pending:0,total:0};return(P||[]).forEach(($,Q)=>{const U=we($,Q);D[U.status]=(D[U.status]||0)+1,D.total+=1}),D},[P,J]),de=Gt.useMemo(()=>{const D={submitted:0,missed:0,pending:0,total:0};return(re||[]).forEach($=>{const Q=$.status||"pending";D[Q]=(D[Q]||0)+1,D.total+=1}),D},[re,J]),ge=Gt.useMemo(()=>Object.values(L||{}).reduce((D,$)=>D+(($==null?void 0:$.length)||0),0),[L]),Re=Gt.useMemo(()=>{const D={};return Object.entries(L||{}).forEach(([$,Q])=>{const U={submitted:0,missed:0,pending:0,total:0,topics:[]};(Q||[]).forEach(be=>{const De=Array.isArray(be.weekDays)?be.weekDays:Array.isArray(be.days)?be.days:[];B(De||[]).forEach((gt,jt)=>{const st=te(gt.dayName||""),He=new Date().getDay(),os=ce(be.week||X,gt.dayName,jt);J.includes(os)?U.submitted+=1:st!==null&&st<He?U.missed+=1:U.pending+=1,U.total+=1}),be.topic&&U.topics.push(be.topic)}),D[$]=U}),D},[L,J,R]),Ze=()=>ae==="daily"?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsx("h3",{className:"font-semibold",children:"Today's Plan"}),a.jsxs("div",{style:{textAlign:"right"},children:[a.jsx("div",{style:{fontSize:12,color:"#666"},children:"Today"}),a.jsx("div",{style:{fontWeight:700},children:de.total})]})]}),re&&re.length>0?a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:10},children:re.map((D,$)=>{const Q=D.status||"pending",U=Q==="submitted"?"#2f855a":Q==="missed"?"#c53030":"#4a5568";return a.jsxs("div",{style:{display:"flex",gap:12,padding:12,borderRadius:10,background:"#fff",boxShadow:"0 4px 10px rgba(11,20,30,0.04)",alignItems:"center"},children:[a.jsx("div",{style:{width:8,height:48,borderRadius:6,background:U}}),a.jsxs("div",{style:{flex:1},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsx("div",{style:{fontWeight:700},children:D.dayName||`Plan ${$+1}`}),a.jsxs("div",{style:{fontSize:12,color:"#666"},children:["Week: ",D.week||"-"]})]}),a.jsx("div",{style:{fontSize:13,color:"#333",marginTop:6},children:D.topic||"No topic provided"}),a.jsxs("div",{style:{fontSize:12,color:"#666",marginTop:6},children:["Quick note: ",D.note||D.description||"-"]})]}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:8},children:[a.jsx("div",{style:{background:U,color:"#fff",padding:"6px 10px",borderRadius:999,fontSize:12,fontWeight:700},children:Q==="submitted"?"Submitted":Q==="missed"?"Missed":"Pending"}),Q==="pending"?a.jsx("button",{onClick:()=>pe(D),className:"btn btn-primary",style:{padding:"6px 10px",borderRadius:8},children:"Submit"}):Q==="missed"?a.jsx("button",{className:"btn",disabled:!0,style:{padding:"6px 10px",borderRadius:8,background:"#c53030",color:"#fff"},children:"Missed"}):null]})]},D.key||$)})}):a.jsx("div",{style:{textAlign:"center",color:"#666"},children:"No plans for today."})]}):ae==="weekly"?a.jsxs("div",{className:"sidebar-week-list",children:[a.jsx("h3",{className:"font-semibold",children:"Week Plan"}),(P||[]).map((D,$)=>{const Q=we(D,$),U=Q.status,be=U==="submitted"?"#2f855a":U==="missed"?"#c53030":"#4a5568",De=U==="submitted"?"#d9f8d5":U==="missed"?"#ffe4e4":"#ffffff";return a.jsxs("div",{className:`sidebar-week-card ${U}`,style:{display:"flex",gap:22,color:"#333",padding:12,borderRadius:10,background:De,alignItems:"center",boxShadow:"0 6px 14px rgba(11,20,30,0.04)"},children:[a.jsx("div",{style:{width:10,height:46,borderRadius:6,background:U==="submitted"?"linear-gradient(180deg,#9ae6b4,#2f855a)":U==="missed"?"linear-gradient(180deg,#feb2b2,#c53030)":"linear-gradient(180deg,#e2e8f0,#4a5568)"}}),a.jsxs("div",{style:{flex:1},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsx("div",{style:{fontWeight:700},children:D.dayName||`Day ${$+1}`}),a.jsx("div",{style:{fontSize:12,color:"#666"},children:ne!=null&&ne.week?`Week ${ne.week}`:""})]}),a.jsx("div",{style:{fontSize:13,color:"#333",marginTop:6},children:D.topic||(ne==null?void 0:ne.topic)||"No topic set"})]}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:8},children:[a.jsx("div",{style:{background:be,color:"#fff",padding:"6px 10px",borderRadius:999,fontSize:12,fontWeight:700},children:U==="submitted"?"Submitted":U==="missed"?"Missed":"Pending"}),U==="pending"&&a.jsx("button",{onClick:()=>pe({key:Q.key,week:ne==null?void 0:ne.week,dayName:D.dayName,status:U}),className:"btn btn-primary",style:{padding:"6px 10px",borderRadius:8},children:"Submit"})]})]},$)})]}):a.jsxs("div",{className:"space-y-2",children:[a.jsx("h3",{className:"font-semibold",children:"Monthly"}),Object.keys(L).length===0&&a.jsx("div",{className:"text-xs text-gray-500",children:"No monthly data."}),Object.entries(L).map(([D,$])=>{const Q=Re[D]||{total:0,submitted:0,missed:0,pending:0,topics:[]},U=Q.total?Math.round(Q.submitted/Q.total*100):0;return a.jsxs("div",{style:{padding:12,borderRadius:10,background:"#fff",boxShadow:"0 6px 14px rgba(12,20,30,0.04)",marginBottom:8},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:800},children:D}),a.jsxs("div",{style:{fontSize:12,color:"#666"},children:[$.length," week(s)  ",Q.total," day(s)"]})]}),a.jsxs("div",{style:{textAlign:"right"},children:[a.jsx("div",{style:{fontSize:12,color:"#666"},children:"Completed"}),a.jsxs("div",{style:{fontWeight:700},children:[U,"%"]})]})]}),a.jsx("div",{style:{height:8,background:"#edf2f7",borderRadius:999,marginTop:10,overflow:"hidden"},children:a.jsx("div",{style:{width:`${U}%`,height:"100%",background:"linear-gradient(90deg,#67e8f9,#4b6cb7)"}})}),a.jsx("div",{style:{display:"flex",gap:8,marginTop:10,alignItems:"center"},children:a.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[a.jsxs("div",{style:{fontSize:12,color:"#2f855a"},children:["Submitted: ",a.jsx("strong",{children:Q.submitted})]}),a.jsxs("div",{style:{fontSize:12,color:"#c53030"},children:["Missed: ",a.jsx("strong",{children:Q.missed})]}),a.jsxs("div",{style:{fontSize:12,color:"#4a5568"},children:["Pending: ",a.jsx("strong",{children:Q.pending})]})]})}),Q.topics&&Q.topics.length>0&&a.jsxs("div",{style:{marginTop:10},children:[a.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:6},children:"Topics this month"}),a.jsx("ul",{style:{margin:0,paddingLeft:16},children:Q.topics.slice(0,3).map((be,De)=>a.jsx("li",{style:{fontSize:13,color:"#333"},children:be},De))})]})]},D)})]}),pt=D=>{const $=[];return Object.keys(D).forEach(Q=>{if(Q.startsWith("week_")){const U=D[Q]||{};$.push({month:U.month||"",week:U.week||Q.replace("week_",""),days:U.days||U.weekDays||[],topic:U.weekTopic||U.topic||"",objective:U.objective||"",method:U.method||"",material:U.aids||U.material||"",assessment:U.assessment||""})}}),$},vt=(D=null)=>{C(D===null?[...x,E()]:[...x.slice(0,D),E(),...x.slice(D)])},$e=D=>{C(x.filter(($,Q)=>Q!==D))},St=D=>{const $=R.filter((U,be)=>be!==D);j($);const Q=k.filter(U=>U!==D).map(U=>U>D?U-1:U);N(Q),v===D?O(null):typeof v=="number"&&v>D&&O(v-1)},et=async()=>{try{const D={teacherId:t.userId,courseId:s,academicYear:"2025/26",annualRows:R},$=await ee.post(`${Js}/lesson-plans/save-annual`,D);console.info("Save annual response:",($==null?void 0:$.data)||$),alert("Annual plan saved successfully!")}catch(D){console.error("Save annual error:",D);let $="Failed to save annual plan";D.response?$+=`  ${D.response.status}: ${JSON.stringify(D.response.data)}`:D.request?$+="  no response (network/CORS)":D.message&&($+=`  ${D.message}`),alert($)}},qt=[];R.forEach(D=>{const $=Array.isArray(D.weekDays)?D.weekDays:Array.isArray(D.days)?D.days:[];$.length?$.forEach(Q=>{qt.push([D.month||"",D.week||"",Q.dayName||"",Q.topic||"",Q.method||"",Q.aids||"",Q.assessment||"",D.topic||"",D.objective||""])}):qt.push([D.month||"",D.week||"","",D.topic||"",D.method||"",D.aids||"",D.assessment||"",D.topic||"",D.objective||""])});const Ct=D=>{const $=R[D]||{};O(D),oe($.topic||"");const Q=U=>{C(Array.isArray(U)&&U.length?U:ie())};$.weekDays&&Array.isArray($.weekDays)&&$.weekDays.length?Q($.weekDays):(async()=>{try{if(!t||!t.userId)return Q([]);const U=await ee.get(`${Js}/lesson-plans/${t.userId}`,{params:{academicYear:"2025/26",courseId:s}});if(U.data&&U.data.success){const be=U.data.data||{},De=`week_${$.week||$.weekNumber||$.weekId||D}`,ze=be[De]||(be.annual&&Array.isArray(be.annual.week)?{}:null);let gt=null;if(be[De]?gt=be[De]:be.annual&&be.annual.annualRows&&(gt=be.annual.annualRows.find(jt=>String(jt.week)===String($.week))),gt){const jt=B(gt.days||gt.weekDays||gt.weekDays||[]);Q(jt);const st=[...R];st[D]={...st[D],weekDays:jt},j(st)}else Q([])}else Q([])}catch(U){console.error("Error fetching week details:",U),Q([])}})(),k.includes(D)||N([...k,D])},At=D=>{k.includes(D)?(N(k.filter($=>$!==D)),v===D&&O(null)):(Ct(D),N([D]))},Xt=()=>{localStorage.removeItem("teacher"),y("/login")};if(!t)return null;const un=ue?"50%":"75%";return a.jsxs("div",{className:"dashboard-page",children:[a.jsxs("nav",{className:"top-navbar",children:[a.jsx("h2",{children:"Gojo Dashboard"}),a.jsxs("div",{className:"nav-right",children:[a.jsxs("div",{className:"icon-circle",children:[a.jsxs("div",{onClick:()=>A(!T),style:{cursor:"pointer",position:"relative"},children:[a.jsx(ss,{size:24}),I.length>0&&a.jsx("span",{style:{position:"absolute",top:-5,right:-5,background:"red",color:"white",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:I.length})]}),T&&a.jsx("div",{style:{position:"absolute",top:30,right:0,width:300,maxHeight:400,overflowY:"auto",background:"#fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",borderRadius:8,zIndex:100},children:I.length>0?I.map((D,$)=>a.jsxs("div",{onClick:()=>{y("/dashboard"),setTimeout(()=>ve(D.id,$),100)},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:D.adminProfile,alt:D.adminName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:D.adminName}),a.jsx("button",{"aria-label":"scroll-left-fixed",onClick:()=>se(-1),style:{position:"absolute",bottom:12,left:12,zIndex:120,width:44,height:44,borderRadius:22,border:"1px solid #ddd",background:"#fff",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 6px rgba(0,0,0,0.15)"},children:a.jsx(cf,{})}),a.jsx("button",{"aria-label":"scroll-right-fixed",onClick:()=>se(1),style:{position:"absolute",bottom:12,right:12,zIndex:120,width:44,height:44,borderRadius:22,border:"1px solid #ddd",background:"#fff",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 6px rgba(0,0,0,0.15)"},children:a.jsx(Pr,{})}),a.jsx("p",{style:{margin:0,fontSize:12},children:D.title})]})]},D.id||$)):a.jsx("div",{style:{padding:15},children:"No notifications"})})]}),a.jsx("div",{className:"icon-circle",children:a.jsx(rs,{})}),a.jsx(ye,{className:"icon-circle",to:"/settings",children:a.jsx(xr,{})}),a.jsx("img",{src:(t==null?void 0:t.profileImage)||"/default-profile.png",alt:"teacher",className:"profile-img"})]})]}),a.jsxs("div",{className:"google-dashboard",children:[a.jsxs("div",{className:"google-sidebar",children:[a.jsxs("div",{className:"sidebar-profile",children:[a.jsx("div",{className:"sidebar-img-circle",children:a.jsx("img",{src:(t==null?void 0:t.profileImage)||"/default-profile.png",alt:"profile"})}),a.jsx("h3",{children:t==null?void 0:t.name}),a.jsx("p",{children:t==null?void 0:t.username})]}),a.jsxs("div",{className:"sidebar-menu",children:[a.jsxs(ye,{className:"sidebar-btn",to:"/dashboard",children:[a.jsx(Dr,{})," Home"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/students",children:[a.jsx(Ye,{})," Students"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/admins",children:[a.jsx(Ye,{})," Admins"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/parents",children:[a.jsx(Or,{})," Parents"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/marks",children:[a.jsx(Jt,{})," Marks"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/attendance",children:[a.jsx(Ye,{})," Attendance"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/schedule",children:[a.jsx(Ye,{})," Schedule"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/lesson-plan",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[a.jsx(Jt,{})," Lesson Plan"]}),a.jsxs("button",{className:"sidebar-btn logout-btn",onClick:Xt,children:[a.jsx(Mr,{})," Logout"]})]})]}),a.jsxs("div",{className:"lesson-main",style:{width:un,position:"relative"},children:[a.jsxs("div",{className:"lesson-card-header",children:[a.jsxs("div",{className:"lesson-title",children:[a.jsx("h2",{children:"Annual Lesson Plan"}),a.jsx("p",{className:"muted",children:"Create your course roadmap  add rows, expand weeks and save."}),_e?a.jsxs("div",{className:"course-info",children:[a.jsx("div",{className:"course-name",children:_e.title||_e.name||_e.subject||"Selected Course"}),a.jsxs("div",{className:"course-meta",children:[_e.grade&&a.jsxs("span",{className:"meta-badge",children:["Grade ",_e.grade]}),_e.section&&a.jsxs("span",{className:"meta-badge",children:["Section ",_e.section]}),_e.subject&&a.jsx("span",{className:"meta-badge",children:_e.subject}),a.jsx("span",{className:"meta-badge",children:"Academic Year: 2025/26"})]})]}):a.jsx("div",{style:{marginTop:8,color:"#666",fontSize:13},children:"Please select a course to view its lesson plan."})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:6},children:[a.jsx("label",{style:{fontSize:18,color:"#1f1818",fontWeight:600},children:"Course"}),a.jsxs("select",{value:s,onChange:D=>i(D.target.value),style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:"#fff"},children:[a.jsx("option",{value:"",children:"-- Select Course --"}),n.map((D,$)=>a.jsx("option",{value:D.id,children:D.title||D.name||D.subject||D.courseName||`Course ${$+1}`},D.id||$))]})]}),a.jsx("div",{style:{display:"flex",gap:8},children:a.jsxs("button",{onClick:et,className:"btn btn-success",children:[a.jsx(iu,{style:{marginRight:8}}),"Save Annual"]})})]})]}),a.jsxs("div",{className:"lesson-card",ref:Te,style:{marginTop:16,overflowX:"auto"},children:[Z?a.jsx("div",{style:{padding:24,textAlign:"center"},children:"Loading lesson plan for selected course..."}):a.jsx(a.Fragment,{children:a.jsxs("table",{className:"lesson-table",children:[a.jsx("thead",{children:a.jsx("tr",{children:["Month","Week","Days","Topic","Objective","Method","Materials","Assessment"].map(D=>a.jsx("th",{children:D},D))})}),a.jsx("tbody",{children:R.map((D,$)=>a.jsxs(Gt.Fragment,{children:[a.jsxs("tr",{children:[["month","week","days","topic","objective","method","material","assessment"].map(U=>{if(U==="week")return a.jsx("td",{style:{padding:8},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("input",{className:"input input-full",value:D.week||"",onChange:De=>{const ze=[...R];ze[$].week=De.target.value,j(ze)}}),a.jsx("button",{onClick:()=>At($),title:k.includes($)?"Hide Days":"Add Days","aria-label":k.includes($)?"Hide Days":"Add Days",className:"btn "+(k.includes($)?"btn-ghost":"btn-primary"),style:{width:36,height:36,borderRadius:18,padding:0,display:"inline-flex",alignItems:"center",justifyContent:"center"},children:k.includes($)?a.jsx(Oj,{}):a.jsx(Pj,{})})]})},U);if(U==="days"){const De=D.days||[],ze=Array.isArray(De)?De.map(gt=>gt.dayName||gt.name||"").filter(Boolean).join(", ")||`${De.length} day(s)`:String(De||"");return a.jsx("td",{style:{padding:8},children:a.jsx("div",{className:"muted-italic",children:ze})},U)}return["topic","objective","method","material","assessment","aids"].includes(U)?a.jsx("td",{style:{padding:8},children:a.jsx("textarea",{className:"input textarea-full",rows:3,value:D[U]||"",onChange:De=>{const ze=[...R];ze[$][U]=De.target.value,j(ze)}})},U):a.jsx("td",{style:{padding:8},children:a.jsx("input",{className:"input input-full",value:D[U]||"",onChange:De=>{const ze=[...R];ze[$][U]=De.target.value,j(ze)}})},U)}),a.jsx("td",{style:{border:"1px solid #000",padding:5,textAlign:"center"},children:a.jsx("button",{onClick:()=>St($),title:"Remove Row",className:"btn btn-danger",children:a.jsx(kc,{})})})]}),k.includes($)&&a.jsx("tr",{children:a.jsx("td",{colSpan:9,style:{background:"#fafafa",padding:12},children:a.jsxs("div",{className:"expand-panel",style:{display:"flex",flexDirection:"column",gap:10},children:[a.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:a.jsxs("strong",{children:["Daily Plan for Week ",D.week||$]})}),a.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[a.jsx("div",{}),a.jsx("div",{style:{flex:1}}),a.jsx("div",{style:{display:"flex",gap:8},children:a.jsx("button",{onClick:()=>V($),className:"btn btn-primary",children:"Save Week Plan"})})]}),x.length===0&&a.jsx("div",{className:"muted",style:{padding:12},children:'No days yet. Click "Add Day" to create a day.'}),x.length>0&&a.jsx("div",{style:{overflowX:"auto",marginTop:6},children:a.jsx("table",{className:"mini-day-table",style:{width:"100%",marginBottom:10},children:a.jsx("thead",{children:a.jsxs("tr",{style:{marginLeft:"220px",gap:"28px"},children:[a.jsx("th",{children:"Day"}),a.jsx("th",{children:"Sub Topic"}),a.jsx("th",{children:"Method"}),a.jsx("th",{children:"Material"}),a.jsx("th",{children:"Assessment"})]})})})}),x.map((Q,U)=>{var be,De,ze,gt,jt;return a.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[a.jsx("input",{placeholder:"Day name (e.g. Monday or Topic Day)",value:((be=x[U])==null?void 0:be.dayName)||"",onChange:st=>{const He=[...x];He[U]={...He[U],dayName:st.target.value},C(He)},className:"input",style:{width:140}}),a.jsx("input",{placeholder:"Topic",value:((De=x[U])==null?void 0:De.topic)||"",onChange:st=>{const He=[...x];He[U]={...He[U],topic:st.target.value},C(He)},className:"input input-full",style:{width:240}}),a.jsx("textarea",{placeholder:"Method",value:((ze=x[U])==null?void 0:ze.method)||"",onChange:st=>{const He=[...x];He[U]={...He[U],method:st.target.value},C(He)},className:"input small-textarea",rows:2,style:{width:240}}),a.jsx("textarea",{placeholder:"Aids",value:((gt=x[U])==null?void 0:gt.aids)||"",onChange:st=>{const He=[...x];He[U]={...He[U],aids:st.target.value},C(He)},className:"input small-textarea",rows:2,style:{width:240}}),a.jsx("textarea",{placeholder:"Assessment",value:((jt=x[U])==null?void 0:jt.assessment)||"",onChange:st=>{const He=[...x];He[U]={...He[U],assessment:st.target.value},C(He)},className:"input small-textarea",rows:2,style:{width:240}}),a.jsx("button",{onClick:()=>$e(U),title:"Remove day",className:"btn btn-danger",children:a.jsx(kc,{})})]},U)}),a.jsxs("div",{children:[a.jsxs("button",{onClick:()=>vt(),className:"btn btn-primary",style:{marginLeft:1108,width:100},children:[a.jsx(uf,{style:{marginRight:1}}),"Add Day"]})," "]})]})})})]},$))})]})}),!Z&&R.length===0&&a.jsx("div",{style:{padding:16,color:"#666"},children:'No lesson plan found for the selected course. Use "Add Row" to start creating one.'}),a.jsx("button",{onClick:()=>j([...R,{month:"",week:"",days:"",topic:"",objective:"",method:"",aids:"",assessment:""}]),className:"btn btn-primary",style:{marginTop:15},children:"+ Add Row"})]}),v&&a.jsxs("div",{style:{background:"#fff",padding:20,borderRadius:10},children:[a.jsxs("h3",{children:["Week ",v," Plan"]}),a.jsx("input",{type:"text",placeholder:"Week Topic (e.g. Cell Biology)",value:G,onChange:D=>oe(D.target.value),style:{width:"100%",padding:8,marginBottom:15}}),a.jsx("div",{style:{marginBottom:12},children:a.jsxs("button",{onClick:()=>vt(),className:"btn btn-primary",children:[a.jsx(uf,{style:{marginRight:8}}),"Add Day"]})}),x.length===0&&a.jsx("div",{style:{padding:12,color:"#666"},children:'No days yet. Click "Add Day" to create a day.'}),x.map((D,$)=>a.jsxs("div",{style:{borderBottom:"1px solid #eee",paddingBottom:10,marginBottom:10},children:[a.jsx("input",{placeholder:"Day name (e.g. Monday)",value:D.dayName,onChange:Q=>{const U=[...x];U[$].dayName=Q.target.value,C(U)},style:{marginBottom:8,width:"100%"}}),a.jsx("input",{placeholder:"Topic",value:D.topic,onChange:Q=>{const U=[...x];U[$].topic=Q.target.value,C(U)}}),a.jsx("input",{placeholder:"Method",value:D.method,onChange:Q=>{const U=[...x];U[$].method=Q.target.value,C(U)}}),a.jsx("input",{placeholder:"Teaching Aids",value:D.aids,onChange:Q=>{const U=[...x];U[$].aids=Q.target.value,C(U)}}),a.jsx("input",{placeholder:"Assessment",value:D.assessment,onChange:Q=>{const U=[...x];U[$].assessment=Q.target.value,C(U)}}),a.jsx("div",{style:{marginTop:8},children:a.jsx("button",{onClick:()=>$e($),className:"btn btn-danger",children:a.jsx(kc,{})})})]},$)),a.jsx("div",{style:{display:"flex",gap:8},children:a.jsxs("button",{onClick:V,className:"btn btn-primary",children:[a.jsx(iu,{style:{marginRight:8}}),"Save Week Plan"]})})]})]}),a.jsxs("div",{className:"right-sidebar",style:{width:ue?"26%":48,padding:ue?16:6,background:"#f7fafc",borderLeft:"1px solid #eee",display:"flex",flexDirection:"column",gap:12,transition:"width 220ms ease"},children:[a.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:a.jsx("button",{"aria-label":ue?"Close sidebar":"Open sidebar",onClick:()=>Ie(!ue),style:{width:36,height:36,borderRadius:8,border:"none",background:"#fff",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",display:"flex",alignItems:"center",justifyContent:"center"},children:ue?a.jsx(Pr,{}):a.jsx(cf,{})})}),ue&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{style:{background:"#fff",padding:12,borderRadius:12,boxShadow:"0 6px 18px rgba(14,30,37,0.06)"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[a.jsx("div",{style:{background:"#eef2ff",padding:8,borderRadius:8},children:a.jsx(Rj,{color:"#4b6cb7"})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:700},children:"Lesson Overview"}),a.jsx("div",{style:{fontSize:12,color:"#666"},children:new Date().toLocaleDateString()})]})]}),a.jsx("div",{style:{display:"flex",gap:8},children:a.jsxs("div",{style:{textAlign:"right"},children:[a.jsx("div",{style:{fontSize:12,color:"#666"},children:"This Week"}),a.jsx("div",{style:{fontWeight:700},children:ke.total})]})})]}),a.jsxs("div",{style:{display:"flex",gap:8,marginTop:12},children:[a.jsxs("div",{style:{flex:1,background:"#f0fff4",padding:8,borderRadius:8,textAlign:"center"},children:[a.jsx("div",{style:{fontSize:12,color:"#2f855a"},children:a.jsx(Aj,{})}),a.jsx("div",{style:{fontWeight:700},children:ke.submitted}),a.jsx("div",{style:{fontSize:11,color:"#555"},children:"Submitted"})]}),a.jsxs("div",{style:{flex:1,background:"#fff7f7",padding:8,borderRadius:8,textAlign:"center"},children:[a.jsx("div",{style:{fontSize:12,color:"#c53030"},children:a.jsx(Dj,{})}),a.jsx("div",{style:{fontWeight:700},children:ke.missed}),a.jsx("div",{style:{fontSize:11,color:"#555"},children:"Missed"})]}),a.jsxs("div",{style:{flex:1,background:"#f7fafc",padding:8,borderRadius:8,textAlign:"center"},children:[a.jsx("div",{style:{fontSize:12,color:"#4a5568"},children:""}),a.jsx("div",{style:{fontWeight:700},children:ke.pending}),a.jsx("div",{style:{fontSize:11,color:"#555"},children:"Pending"})]})]})]}),a.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[a.jsx("button",{onClick:()=>H("daily"),className:"btn "+(ae==="daily"?"btn-primary":"btn-ghost"),style:{flex:1,borderRadius:999},children:"Daily"}),a.jsx("button",{onClick:()=>H("weekly"),className:"btn "+(ae==="weekly"?"btn-primary":"btn-ghost"),style:{flex:1,borderRadius:999},children:"Weekly"}),a.jsx("button",{onClick:()=>H("monthly"),className:"btn "+(ae==="monthly"?"btn-primary":"btn-ghost"),style:{flex:1,borderRadius:999},children:"Monthly"})]}),a.jsx("div",{style:{background:"#fff",padding:12,borderRadius:12,boxShadow:"0 6px 18px rgba(14,30,37,0.04)",overflowY:"auto",maxHeight:"56vh"},children:Ze()}),a.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"space-between"},children:[a.jsxs("div",{style:{fontSize:12,color:"#666"},children:["Monthly entries: ",a.jsx("strong",{children:ge})]}),a.jsx("div",{children:a.jsx("button",{className:"btn btn-ghost",onClick:()=>{Ce([]),z()},children:"Refresh"})})]})]})]})]})]})}const uc=(t,e)=>[String(t),String(e)].sort().join("_");function BN(){const t=zn(),e=Hs(),n=g.useRef(null),r=JSON.parse(localStorage.getItem("teacher"))||{},s=String(r.userId||""),[i,o]=g.useState([]),[c,u]=g.useState([]),[d,f]=g.useState([]),[p,y]=g.useState([]),[I,w]=g.useState(""),[T,A]=g.useState(!0),[S,_]=g.useState({}),[v,O]=g.useState(!1),[G,oe]=g.useState({}),E=e.state||{},x=E.contact||E.user||null,C=E.chatId||null,k=E.tab||null,[N,R]=g.useState(k||"student"),[j,re]=g.useState(x||null),[Ee,J]=g.useState(C||null),[Ce,Z]=g.useState(null),[K,ae]=g.useState({}),[H,ue]=g.useState({}),Ie=(V={})=>V.profileImage||V.profile||V.avatar||"/default-profile.png";g.useEffect(()=>{(async()=>{try{const[ie,le,B,X]=await Promise.all([fetch("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Students.json").then(ce=>ce.json()),fetch("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Parents.json").then(ce=>ce.json()),fetch("https://ethiostore-17d9f-default-rtdb.firebaseio.com/School_Admins.json").then(ce=>ce.json()),fetch("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Users.json").then(ce=>ce.json())]),ne=X||{},P=Object.values(ie||{}).map(ce=>{const we=ne[ce.userId]||{};return{userId:ce.userId,name:we.name||ce.name||"Student",profileImage:Ie(we)}}),L=Object.values(le||{}).map(ce=>{const we=ne[ce.userId]||{};return{userId:ce.userId,name:we.name||ce.name||"Parent",profileImage:Ie(we)}}),te=Object.values(B||{}).map(ce=>{const we=ne[ce.userId]||{};return{userId:ce.userId,name:ce.name||we.name||"Admin",profileImage:Ie(we)}});o(P),u(L),f(te)}catch(ie){console.error(" Fetch error:",ie)}})()},[]),g.useEffect(()=>{if(!s)return;const V=[...i,...c,...d],ie=[];return V.forEach(le=>{if(!le||!le.userId)return;const B=uc(s,le.userId);try{const X=Pt(Mt,`Chats/${B}/unread/${s}`),ne=so(X,P=>{const L=P.val();oe(te=>({...te,[le.userId]:Number(L)||0}))});ie.push(ne)}catch{}}),()=>{ie.forEach(le=>le())}},[i,c,d,s]),g.useEffect(()=>{const V=()=>{const ie=typeof window<"u"&&window.innerWidth<640;O(ie),ie&&A(!1)};return V(),window.addEventListener("resize",V),()=>window.removeEventListener("resize",V)},[]),g.useEffect(()=>{x&&re(x),C&&J(C),k&&R(k)},[x,C,k]),g.useEffect(()=>{const V=x;if(V){if(N==="student"&&i.length){const ie=i.find(le=>le.userId===V.userId);ie&&re(ie)}if(N==="parent"&&c.length){const ie=c.find(le=>le.userId===V.userId);ie&&re(ie)}if(N==="admin"&&d.length){const ie=d.find(le=>le.userId===V.userId);ie&&re(ie)}}},[i,c,d,x,N]),g.useEffect(()=>{if(!j||!s)return;const V=Ee||uc(s,j.userId);J(V);const ie=Pt(Mt,`Chats/${V}/messages`),le=so(ie,B=>{const X=B.val()||{},ne=Object.entries(X).filter(([P,L])=>!L.deleted).map(([P,L])=>({id:P,...L,isTeacher:L.senderId===s})).sort((P,L)=>P.timeStamp-L.timeStamp);y(ne),Object.entries(X).forEach(([P,L])=>{L&&!L.seen&&L.receiverId===s&&Er(Pt(Mt,`Chats/${V}/messages/${P}`),{seen:!0}).catch(console.error)}),Er(Pt(Mt,`Chats/${V}/unread`),{[s]:0}).catch(console.error)});return()=>le()},[j,s,Ee]),g.useEffect(()=>{try{const V=Pt(Mt,"Presence"),ie=so(V,le=>{const B=le.val()||{};_(B)});return()=>ie()}catch(V){console.warn("Presence listener unavailable:",V)}},[]);const _e=async()=>{if(!I.trim()||!j)return;const V=Object.keys(K).find(le=>K[le]),ie=Ee||uc(s,j.userId);if(V)await Er(Pt(Mt,`Chats/${ie}/messages/${V}`),{text:I,edited:!0}),ae({}),Z(null),w("");else{const le=Pt(Mt,`Chats/${ie}/messages`),B={senderId:s,receiverId:j.userId,type:"text",text:I,seen:!1,edited:!1,deleted:!1,timeStamp:Date.now()};await S3(le,B),await Er(Pt(Mt,`Chats/${ie}/participants`),{[s]:!0,[j.userId]:!0}),await Er(Pt(Mt,`Chats/${ie}/lastMessage`),{text:I,senderId:s,seen:!1,timeStamp:B.timeStamp});try{const X=Pt(Mt,`Chats/${ie}/unread/${j.userId}`);await Er(Pt(Mt,`Chats/${ie}/unread`),{[s]:0,[j.userId]:1})}catch{}w("")}},me=V=>{const ie=Ee||uc(s,j.userId);Er(Pt(Mt,`Chats/${ie}/messages/${V}`),{deleted:!0}).catch(console.error)},z=(V,ie)=>{ae({[V]:!0}),w(ie),Z(V)},pe=V=>{const ie=new Date(V);return`${ie.getHours().toString().padStart(2,"0")}:${ie.getMinutes().toString().padStart(2,"0")}`},F=V=>{if(!V)return"";const ie=new Date(Number(V)),le=new Date,B=new Date(le.getFullYear(),le.getMonth(),le.getDate()),X=new Date(ie.getFullYear(),ie.getMonth(),ie.getDate()),ne=B-X,P=Math.floor(ne/(24*60*60*1e3));return P===0?"Today":P===1?"Yesterday":P>1&&P<7?`${P} days ago`:ie.toLocaleDateString()};g.useEffect(()=>{var V;(V=n.current)==null||V.scrollIntoView({behavior:"smooth"})},[p]);const Te=N==="student"?i:N==="parent"?c:d,se=V=>{if(!V)return!1;const le=(()=>{if((S==null?void 0:S[V])!==void 0)return S[V];const B=String(V);if((S==null?void 0:S[B])!==void 0)return S[B];const X=Number(V);if(!Number.isNaN(X)&&(S==null?void 0:S[X])!==void 0)return S[X];for(const[,ne]of Object.entries(S||{}))try{if(ne&&(ne.userId===V||String(ne.userId)===B))return ne}catch{}})();if(le==null)return!1;if(typeof le=="boolean")return le===!0;if(typeof le=="object"){if(le.state==="online"||le.online===!0)return!0;if(le.lastSeen){const B=Number(le.lastSeen)||0;return Date.now()-B<6e4}if(typeof le=="number")return Date.now()-le<6e4}return!1},ve=V=>{const ie=S==null?void 0:S[V];if(!ie)return null;let le=null;if((typeof ie=="number"||/^[0-9]+$/.test(String(ie)))&&(le=Number(ie)),typeof ie=="object"&&(le=ie.lastSeen||ie.timestamp||ie.lastActive||ie.last_seen||ie.time||null),!le)return null;const B=Date.now()-Number(le),X=Math.floor(B/1e3);if(X<60)return"last seen just now";const ne=Math.floor(X/60);if(ne<60)return`last seen ${ne}m ago`;const P=Math.floor(ne/60);if(P<24)return`last seen ${P}h ago`;const L=Math.floor(P/24);return L<7?`last seen ${L}d ago`:`last seen on ${new Date(le).toLocaleDateString()}`};return a.jsxs("div",{style:{display:"flex",height:"100vh",background:"#eef2f7",fontFamily:"sans-serif",position:"relative"},children:[a.jsxs("div",{style:{display:v&&!j?"flex":v&&j?"none":"flex",alignItems:"stretch",position:v&&!j?"fixed":"static",top:0,left:0,width:v&&!j?"100vw":void 0,height:v&&!j?"100vh":void 0,background:v&&!j?"#fff":void 0,zIndex:v&&!j?100:void 0},children:[a.jsxs("div",{style:{width:v&&!j?"100vw":T?v?220:280:0,height:v&&!j?"100vh":"auto",background:"#fff",padding:T||v&&!j?16:0,boxShadow:T||v&&!j?"2px 0 10px rgba(0,0,0,0.1)":"none",display:T||v&&!j?"flex":"none",flexDirection:"column",transition:"width 180ms ease",overflowY:v&&!j?"auto":"visible"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[a.jsx("button",{onClick:()=>t(-1),style:{border:"none",background:"none",padding:4,cursor:"pointer"},children:a.jsx(I0,{size:18})}),a.jsx("div",{style:{display:"flex",gap:6,margin:"12px 0",alignItems:"center"},children:["student","parent","admin"].map(V=>a.jsx("button",{onClick:()=>{R(V),re(null),J(null)},style:{flex:1,padding:8,borderRadius:20,border:"none",background:N===V?"#4facfe":"#ddd",color:N===V?"#fff":"#000",cursor:"pointer",fontSize:14},children:V.charAt(0).toUpperCase()+V.slice(1)}))})]}),a.jsx("div",{style:{marginTop:8,overflowY:"auto",flex:1},children:Te.map(V=>a.jsxs("div",{onClick:()=>{re(V),J(null),v&&A(!1)},style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:10,padding:v?18:10,borderRadius:14,cursor:"pointer",marginBottom:8,background:(j==null?void 0:j.userId)===V.userId?"#dbeafe":"#f9fafb",boxShadow:(j==null?void 0:j.userId)===V.userId?"0 2px 10px rgba(0,0,0,0.1)":"none",fontSize:v?18:15},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[a.jsxs("div",{style:{position:"relative"},children:[a.jsx("img",{src:V.profileImage,alt:V.name,onError:ie=>ie.target.src="/default-profile.png",style:{width:v?36:40,height:v?36:40,borderRadius:"50%",objectFit:"cover"}}),a.jsx("span",{style:{position:"absolute",right:-2,bottom:-2,width:12,height:12,borderRadius:12,border:"2px solid #fff",background:se(V.userId)?"#34D399":"#cbd5e1"}})]}),a.jsx("span",{style:{fontWeight:500,marginLeft:0},children:V.name})]}),G[V.userId]>0?a.jsx("div",{style:{minWidth:26,height:26,display:"flex",alignItems:"center",justifyContent:"center",background:"#ef4444",color:"#fff",borderRadius:14,padding:"0 6px",fontSize:12,fontWeight:600},children:G[V.userId]>99?"99+":G[V.userId]}):a.jsx("div",{style:{width:26}})]},V.userId))})]}),a.jsx("div",{style:{width:28,display:"flex",alignItems:"flex-start",justifyContent:"center"},children:a.jsx("button",{onClick:()=>A(V=>!V),style:{border:"none",background:"#fff",borderRadius:4,padding:4,boxShadow:"0 1px 4px rgba(0,0,0,0.08)",cursor:"pointer",marginTop:8},"aria-label":"Toggle sidebar",children:T?"":""})})]}),a.jsx("div",{style:{flex:1,padding:16,display:"flex",flexDirection:"column"},children:j?a.jsxs(a.Fragment,{children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:"12px 0",borderBottom:"1px solid #ccc",boxShadow:"0 2px 6px rgba(0,0,0,0.05)",background:"#fff",borderRadius:8,marginBottom:8},children:[v&&a.jsx("button",{onClick:()=>re(null),style:{border:"none",background:"none",padding:4,marginRight:8,cursor:"pointer",fontSize:20},"aria-label":"Back to user list",children:a.jsx(I0,{size:22})}),a.jsx("img",{src:j.profileImage,alt:j.name,onError:V=>V.target.src="/default-profile.png",style:{width:v?40:50,height:v?40:50,borderRadius:"50%",objectFit:"cover"}}),a.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[a.jsx("span",{style:{fontWeight:600,fontSize:16},children:j.name}),a.jsx("span",{style:{fontSize:12,color:se(j.userId)?"#16A34A":"#666"},children:se(j.userId)?"Online":ve(j.userId)||N.charAt(0).toUpperCase()+N.slice(1)})]})]}),a.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"12px 16px",display:"flex",flexDirection:"column"},children:[p.map(V=>{const ie=V.isTeacher,le=!!K[V.id],B=Ce===V.id;return a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:ie?"flex-end":"flex-start",marginBottom:10},children:[a.jsxs("div",{onClick:()=>Z(V.id),style:{maxWidth:v?"85%":"70%",background:ie?"#4facfe":"#fff",color:ie?"#fff":"#000",padding:"10px 14px",borderRadius:18,borderTopRightRadius:ie?0:18,borderTopLeftRadius:ie?18:0,boxShadow:"0 1px 3px rgba(0,0,0,0.1)",wordBreak:"break-word",cursor:"pointer",position:"relative"},children:[V.text," ",V.edited&&a.jsx("small",{style:{fontSize:10},children:" (edited)"}),a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:6,marginTop:4,fontSize:11,color:ie?"#fff":"#888"},children:[a.jsx("span",{style:{marginRight:6,fontSize:11,opacity:.9},children:F(V.timeStamp)}),a.jsx("span",{children:pe(V.timeStamp)}),ie&&!V.deleted&&a.jsxs("span",{style:{display:"flex",gap:0},children:[a.jsx(mo,{size:10,color:"#fff",style:{opacity:.8}}),V.seen&&a.jsx(mo,{size:10,color:"#f3f7f8",style:{marginLeft:2,opacity:.95}})]})]})]}),B&&ie&&!V.deleted&&!le&&a.jsxs("div",{style:{display:"flex",gap:6,marginTop:4,fontSize:12,justifyContent:ie?"flex-end":"flex-start"},children:[a.jsx("button",{onClick:()=>z(V.id,V.text),style:{padding:"2px 6px",borderRadius:4,border:"1px solid #ccc",cursor:"pointer",background:"#f1f1f1"},children:"Edit"}),a.jsx("button",{onClick:()=>me(V.id),style:{padding:"2px 6px",borderRadius:4,border:"1px solid #ccc",cursor:"pointer",background:"#f1f1f1",color:"red"},children:"Delete"})]})]},V.id)}),a.jsx("div",{ref:n})]}),a.jsxs("div",{style:{display:"flex",gap:8,marginTop:8},children:[a.jsx("input",{value:I,onChange:V=>w(V.target.value),onKeyDown:V=>V.key==="Enter"&&_e(),placeholder:"Type a message...",style:{flex:1,padding:v?10:12,borderRadius:25,border:"1px solid #ccc",outline:"none"}}),a.jsx("button",{onClick:_e,style:{width:v?40:45,height:v?40:45,borderRadius:"50%",background:"#4facfe",border:"none",color:"#fff",display:"flex",justifyContent:"center",alignItems:"center"},children:a.jsx(Vv,{})})]})]}):a.jsx("h3",{style:{textAlign:"center",marginTop:50},children:"Select a user to start chatting "})})]})}function UN(){return a.jsx(MC,{basename:"/Gojo-Teacher-Web",children:a.jsxs(fC,{children:[a.jsx(hn,{path:"/",element:a.jsx(Vd,{})}),a.jsx(hn,{path:"/login",element:a.jsx(Vd,{})}),a.jsx(hn,{path:"/register",element:a.jsx(Sj,{})}),a.jsx(hn,{path:"/dashboard",element:a.jsx(pN,{})}),a.jsx(hn,{path:"/students",element:a.jsx(wN,{})}),a.jsx(hn,{path:"/admins",element:a.jsx(IN,{})}),a.jsx(hn,{path:"/marks",element:a.jsx(bN,{})}),a.jsx(hn,{path:"/attendance",element:a.jsx(SN,{})}),a.jsx(hn,{path:"/notes",element:a.jsx(NN,{})})," ",a.jsx(hn,{path:"/parents",element:a.jsx(AN,{})}),a.jsx(hn,{path:"/settings",element:a.jsx(DN,{})}),a.jsx(hn,{path:"all-chat",element:a.jsx(BN,{})}),a.jsx(hn,{path:"schedule",element:a.jsx(LN,{})}),a.jsx(hn,{path:"exam",element:a.jsx(FN,{})}),a.jsx(hn,{path:"lesson-plan",element:a.jsx(zN,{})}),a.jsx(hn,{path:"*",element:a.jsx(Vd,{})})]})})}const $N=g.createContext(),WN=({children:t})=>{const[e,n]=g.useState("light");g.useEffect(()=>{const s=localStorage.getItem("theme");s&&n(s)},[]),g.useEffect(()=>{document.body.className=e==="dark"?"dark-mode":"",localStorage.setItem("theme",e)},[e]);const r=()=>{n(s=>s==="light"?"dark":"light")};return a.jsx($N.Provider,{value:{theme:e,toggleTheme:r},children:t})};function HN(){return a.jsx(WN,{children:a.jsx(UN,{})})}ch.createRoot(document.getElementById("root")).render(a.jsx(Gt.StrictMode,{children:a.jsx(HN,{})}));
