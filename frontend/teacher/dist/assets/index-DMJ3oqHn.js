(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Fw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var A0={exports:{}},pu={},P0={exports:{}},He={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var na=Symbol.for("react.element"),zw=Symbol.for("react.portal"),Bw=Symbol.for("react.fragment"),Uw=Symbol.for("react.strict_mode"),$w=Symbol.for("react.profiler"),Ww=Symbol.for("react.provider"),Vw=Symbol.for("react.context"),Hw=Symbol.for("react.forward_ref"),Kw=Symbol.for("react.suspense"),Gw=Symbol.for("react.memo"),qw=Symbol.for("react.lazy"),Lg=Symbol.iterator;function Yw(t){return t===null||typeof t!="object"?null:(t=Lg&&t[Lg]||t["@@iterator"],typeof t=="function"?t:null)}var O0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D0=Object.assign,M0={};function yo(t,e,n){this.props=t,this.context=e,this.refs=M0,this.updater=n||O0}yo.prototype.isReactComponent={};yo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};yo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function L0(){}L0.prototype=yo.prototype;function xf(t,e,n){this.props=t,this.context=e,this.refs=M0,this.updater=n||O0}var _f=xf.prototype=new L0;_f.constructor=xf;D0(_f,yo.prototype);_f.isPureReactComponent=!0;var Fg=Array.isArray,F0=Object.prototype.hasOwnProperty,wf={current:null},z0={key:!0,ref:!0,__self:!0,__source:!0};function B0(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)F0.call(e,r)&&!z0.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:na,type:t,key:i,ref:o,props:s,_owner:wf.current}}function Qw(t,e){return{$$typeof:na,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Sf(t){return typeof t=="object"&&t!==null&&t.$$typeof===na}function Jw(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var zg=/\/+/g;function od(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Jw(""+t.key):e.toString(36)}function ic(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case na:case zw:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+od(o,0):r,Fg(s)?(n="",t!=null&&(n=t.replace(zg,"$&/")+"/"),ic(s,e,n,"",function(d){return d})):s!=null&&(Sf(s)&&(s=Qw(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(zg,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Fg(t))for(var c=0;c<t.length;c++){i=t[c];var u=r+od(i,c);o+=ic(i,e,n,u,s)}else if(u=Yw(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=r+od(i,c++),o+=ic(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Da(t,e,n){if(t==null)return t;var r=[],s=0;return ic(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Xw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var mn={current:null},oc={transition:null},Zw={ReactCurrentDispatcher:mn,ReactCurrentBatchConfig:oc,ReactCurrentOwner:wf};function U0(){throw Error("act(...) is not supported in production builds of React.")}He.Children={map:Da,forEach:function(t,e,n){Da(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Da(t,function(){e++}),e},toArray:function(t){return Da(t,function(e){return e})||[]},only:function(t){if(!Sf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};He.Component=yo;He.Fragment=Bw;He.Profiler=$w;He.PureComponent=xf;He.StrictMode=Uw;He.Suspense=Kw;He.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zw;He.act=U0;He.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=D0({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=wf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)F0.call(e,u)&&!z0.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:na,type:t.type,key:s,ref:i,props:r,_owner:o}};He.createContext=function(t){return t={$$typeof:Vw,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Ww,_context:t},t.Consumer=t};He.createElement=B0;He.createFactory=function(t){var e=B0.bind(null,t);return e.type=t,e};He.createRef=function(){return{current:null}};He.forwardRef=function(t){return{$$typeof:Hw,render:t}};He.isValidElement=Sf;He.lazy=function(t){return{$$typeof:qw,_payload:{_status:-1,_result:t},_init:Xw}};He.memo=function(t,e){return{$$typeof:Gw,type:t,compare:e===void 0?null:e}};He.startTransition=function(t){var e=oc.transition;oc.transition={};try{t()}finally{oc.transition=e}};He.unstable_act=U0;He.useCallback=function(t,e){return mn.current.useCallback(t,e)};He.useContext=function(t){return mn.current.useContext(t)};He.useDebugValue=function(){};He.useDeferredValue=function(t){return mn.current.useDeferredValue(t)};He.useEffect=function(t,e){return mn.current.useEffect(t,e)};He.useId=function(){return mn.current.useId()};He.useImperativeHandle=function(t,e,n){return mn.current.useImperativeHandle(t,e,n)};He.useInsertionEffect=function(t,e){return mn.current.useInsertionEffect(t,e)};He.useLayoutEffect=function(t,e){return mn.current.useLayoutEffect(t,e)};He.useMemo=function(t,e){return mn.current.useMemo(t,e)};He.useReducer=function(t,e,n){return mn.current.useReducer(t,e,n)};He.useRef=function(t){return mn.current.useRef(t)};He.useState=function(t){return mn.current.useState(t)};He.useSyncExternalStore=function(t,e,n){return mn.current.useSyncExternalStore(t,e,n)};He.useTransition=function(){return mn.current.useTransition()};He.version="18.3.1";P0.exports=He;var y=P0.exports;const Qt=Fw(y);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e2=y,t2=Symbol.for("react.element"),n2=Symbol.for("react.fragment"),r2=Object.prototype.hasOwnProperty,s2=e2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i2={key:!0,ref:!0,__self:!0,__source:!0};function $0(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)r2.call(e,r)&&!i2.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:t2,type:t,key:i,ref:o,props:s,_owner:s2.current}}pu.Fragment=n2;pu.jsx=$0;pu.jsxs=$0;A0.exports=pu;var a=A0.exports,Zd={},W0={exports:{}},Pn={},V0={exports:{}},H0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(J,D){var q=J.length;J.push(D);e:for(;0<q;){var re=q-1>>>1,fe=J[re];if(0<s(fe,D))J[re]=D,J[q]=fe,q=re;else break e}}function n(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var D=J[0],q=J.pop();if(q!==D){J[0]=q;e:for(var re=0,fe=J.length,H=fe>>>1;re<H;){var M=2*(re+1)-1,Z=J[M],F=M+1,ye=J[F];if(0>s(Z,q))F<fe&&0>s(ye,Z)?(J[re]=ye,J[F]=q,re=F):(J[re]=Z,J[M]=q,re=M);else if(F<fe&&0>s(ye,q))J[re]=ye,J[F]=q,re=F;else break e}}return D}function s(J,D){var q=J.sortIndex-D.sortIndex;return q!==0?q:J.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],p=1,f=null,m=3,T=!1,b=!1,N=!1,A=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(J){for(var D=n(d);D!==null;){if(D.callback===null)r(d);else if(D.startTime<=J)r(d),D.sortIndex=D.expirationTime,e(u,D);else break;D=n(d)}}function O(J){if(N=!1,_(J),!b)if(n(u)!==null)b=!0,we(G);else{var D=n(d);D!==null&&Ae(O,D.startTime-J)}}function G(J,D){b=!1,N&&(N=!1,E(v),v=-1),T=!0;var q=m;try{for(_(D),f=n(u);f!==null&&(!(f.expirationTime>D)||J&&!x());){var re=f.callback;if(typeof re=="function"){f.callback=null,m=f.priorityLevel;var fe=re(f.expirationTime<=D);D=t.unstable_now(),typeof fe=="function"?f.callback=fe:f===n(u)&&r(u),_(D)}else r(u);f=n(u)}if(f!==null)var H=!0;else{var M=n(d);M!==null&&Ae(O,M.startTime-D),H=!1}return H}finally{f=null,m=q,T=!1}}var X=!1,j=null,v=-1,I=5,k=-1;function x(){return!(t.unstable_now()-k<I)}function R(){if(j!==null){var J=t.unstable_now();k=J;var D=!0;try{D=j(!0,J)}finally{D?C():(X=!1,j=null)}}else X=!1}var C;if(typeof w=="function")C=function(){w(R)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,_e=oe.port2;oe.port1.onmessage=R,C=function(){_e.postMessage(null)}}else C=function(){A(R,0)};function we(J){j=J,X||(X=!0,C())}function Ae(J,D){v=A(function(){J(t.unstable_now())},D)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(J){J.callback=null},t.unstable_continueExecution=function(){b||T||(b=!0,we(G))},t.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<J?Math.floor(1e3/J):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(J){switch(m){case 1:case 2:case 3:var D=3;break;default:D=m}var q=m;m=D;try{return J()}finally{m=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(J,D){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var q=m;m=J;try{return D()}finally{m=q}},t.unstable_scheduleCallback=function(J,D,q){var re=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?re+q:re):q=re,J){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=q+fe,J={id:p++,callback:D,priorityLevel:J,startTime:q,expirationTime:fe,sortIndex:-1},q>re?(J.sortIndex=q,e(d,J),n(u)===null&&J===n(d)&&(N?(E(v),v=-1):N=!0,Ae(O,q-re))):(J.sortIndex=fe,e(u,J),b||T||(b=!0,we(G))),J},t.unstable_shouldYield=x,t.unstable_wrapCallback=function(J){var D=m;return function(){var q=m;m=D;try{return J.apply(this,arguments)}finally{m=q}}}})(H0);V0.exports=H0;var o2=V0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l2=y,An=o2;function ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var K0=new Set,bl={};function vi(t,e){Zi(t,e),Zi(t+"Capture",e)}function Zi(t,e){for(bl[t]=e,t=0;t<e.length;t++)K0.add(e[t])}var zr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),eh=Object.prototype.hasOwnProperty,a2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Bg={},Ug={};function c2(t){return eh.call(Ug,t)?!0:eh.call(Bg,t)?!1:a2.test(t)?Ug[t]=!0:(Bg[t]=!0,!1)}function u2(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function d2(t,e,n,r){if(e===null||typeof e>"u"||u2(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function yn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Xt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Xt[t]=new yn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Xt[e]=new yn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Xt[t]=new yn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Xt[t]=new yn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Xt[t]=new yn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Xt[t]=new yn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Xt[t]=new yn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Xt[t]=new yn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Xt[t]=new yn(t,5,!1,t.toLowerCase(),null,!1,!1)});var bf=/[\-:]([a-z])/g;function Ef(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(bf,Ef);Xt[e]=new yn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(bf,Ef);Xt[e]=new yn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(bf,Ef);Xt[e]=new yn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Xt[t]=new yn(t,1,!1,t.toLowerCase(),null,!1,!1)});Xt.xlinkHref=new yn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Xt[t]=new yn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Cf(t,e,n,r){var s=Xt.hasOwnProperty(e)?Xt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(d2(e,n,s,r)&&(n=null),r||s===null?c2(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Kr=l2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ma=Symbol.for("react.element"),Ni=Symbol.for("react.portal"),Ri=Symbol.for("react.fragment"),If=Symbol.for("react.strict_mode"),th=Symbol.for("react.profiler"),G0=Symbol.for("react.provider"),q0=Symbol.for("react.context"),jf=Symbol.for("react.forward_ref"),nh=Symbol.for("react.suspense"),rh=Symbol.for("react.suspense_list"),kf=Symbol.for("react.memo"),as=Symbol.for("react.lazy"),Y0=Symbol.for("react.offscreen"),$g=Symbol.iterator;function Bo(t){return t===null||typeof t!="object"?null:(t=$g&&t[$g]||t["@@iterator"],typeof t=="function"?t:null)}var bt=Object.assign,ld;function tl(t){if(ld===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ld=e&&e[1]||""}return`
`+ld+t}var ad=!1;function cd(t,e){if(!t||ad)return"";ad=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,c=i.length-1;1<=o&&0<=c&&s[o]!==i[c];)c--;for(;1<=o&&0<=c;o--,c--)if(s[o]!==i[c]){if(o!==1||c!==1)do if(o--,c--,0>c||s[o]!==i[c]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{ad=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?tl(t):""}function h2(t){switch(t.tag){case 5:return tl(t.type);case 16:return tl("Lazy");case 13:return tl("Suspense");case 19:return tl("SuspenseList");case 0:case 2:case 15:return t=cd(t.type,!1),t;case 11:return t=cd(t.type.render,!1),t;case 1:return t=cd(t.type,!0),t;default:return""}}function sh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ri:return"Fragment";case Ni:return"Portal";case th:return"Profiler";case If:return"StrictMode";case nh:return"Suspense";case rh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case q0:return(t.displayName||"Context")+".Consumer";case G0:return(t._context.displayName||"Context")+".Provider";case jf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case kf:return e=t.displayName||null,e!==null?e:sh(t.type)||"Memo";case as:e=t._payload,t=t._init;try{return sh(t(e))}catch{}}return null}function f2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sh(e);case 8:return e===If?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ks(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Q0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function p2(t){var e=Q0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function La(t){t._valueTracker||(t._valueTracker=p2(t))}function J0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Q0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ec(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ih(t,e){var n=e.checked;return bt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Wg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ks(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function X0(t,e){e=e.checked,e!=null&&Cf(t,"checked",e,!1)}function oh(t,e){X0(t,e);var n=ks(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?lh(t,e.type,n):e.hasOwnProperty("defaultValue")&&lh(t,e.type,ks(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Vg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function lh(t,e,n){(e!=="number"||Ec(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var nl=Array.isArray;function Wi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ks(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function ah(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ae(91));return bt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Hg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ae(92));if(nl(n)){if(1<n.length)throw Error(ae(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ks(n)}}function Z0(t,e){var n=ks(e.value),r=ks(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Kg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function e1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ch(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?e1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Fa,t1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Fa=Fa||document.createElement("div"),Fa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Fa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function El(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var il={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},g2=["Webkit","ms","Moz","O"];Object.keys(il).forEach(function(t){g2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),il[e]=il[t]})});function n1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||il.hasOwnProperty(t)&&il[t]?(""+e).trim():e+"px"}function r1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=n1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var m2=bt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function uh(t,e){if(e){if(m2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ae(62))}}function dh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hh=null;function Tf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var fh=null,Vi=null,Hi=null;function Gg(t){if(t=ia(t)){if(typeof fh!="function")throw Error(ae(280));var e=t.stateNode;e&&(e=xu(e),fh(t.stateNode,t.type,e))}}function s1(t){Vi?Hi?Hi.push(t):Hi=[t]:Vi=t}function i1(){if(Vi){var t=Vi,e=Hi;if(Hi=Vi=null,Gg(t),e)for(t=0;t<e.length;t++)Gg(e[t])}}function o1(t,e){return t(e)}function l1(){}var ud=!1;function a1(t,e,n){if(ud)return t(e,n);ud=!0;try{return o1(t,e,n)}finally{ud=!1,(Vi!==null||Hi!==null)&&(l1(),i1())}}function Cl(t,e){var n=t.stateNode;if(n===null)return null;var r=xu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ae(231,e,typeof n));return n}var ph=!1;if(zr)try{var Uo={};Object.defineProperty(Uo,"passive",{get:function(){ph=!0}}),window.addEventListener("test",Uo,Uo),window.removeEventListener("test",Uo,Uo)}catch{ph=!1}function y2(t,e,n,r,s,i,o,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(p){this.onError(p)}}var ol=!1,Cc=null,Ic=!1,gh=null,v2={onError:function(t){ol=!0,Cc=t}};function x2(t,e,n,r,s,i,o,c,u){ol=!1,Cc=null,y2.apply(v2,arguments)}function _2(t,e,n,r,s,i,o,c,u){if(x2.apply(this,arguments),ol){if(ol){var d=Cc;ol=!1,Cc=null}else throw Error(ae(198));Ic||(Ic=!0,gh=d)}}function xi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function c1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function qg(t){if(xi(t)!==t)throw Error(ae(188))}function w2(t){var e=t.alternate;if(!e){if(e=xi(t),e===null)throw Error(ae(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return qg(s),t;if(i===r)return qg(s),e;i=i.sibling}throw Error(ae(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o)throw Error(ae(189))}}if(n.alternate!==r)throw Error(ae(190))}if(n.tag!==3)throw Error(ae(188));return n.stateNode.current===n?t:e}function u1(t){return t=w2(t),t!==null?d1(t):null}function d1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=d1(t);if(e!==null)return e;t=t.sibling}return null}var h1=An.unstable_scheduleCallback,Yg=An.unstable_cancelCallback,S2=An.unstable_shouldYield,b2=An.unstable_requestPaint,Nt=An.unstable_now,E2=An.unstable_getCurrentPriorityLevel,Nf=An.unstable_ImmediatePriority,f1=An.unstable_UserBlockingPriority,jc=An.unstable_NormalPriority,C2=An.unstable_LowPriority,p1=An.unstable_IdlePriority,gu=null,xr=null;function I2(t){if(xr&&typeof xr.onCommitFiberRoot=="function")try{xr.onCommitFiberRoot(gu,t,void 0,(t.current.flags&128)===128)}catch{}}var nr=Math.clz32?Math.clz32:T2,j2=Math.log,k2=Math.LN2;function T2(t){return t>>>=0,t===0?32:31-(j2(t)/k2|0)|0}var za=64,Ba=4194304;function rl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function kc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~s;c!==0?r=rl(c):(i&=o,i!==0&&(r=rl(i)))}else o=n&~s,o!==0?r=rl(o):i!==0&&(r=rl(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-nr(e),s=1<<n,r|=t[n],e&=~s;return r}function N2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function R2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-nr(i),c=1<<o,u=s[o];u===-1?(!(c&n)||c&r)&&(s[o]=N2(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function mh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function g1(){var t=za;return za<<=1,!(za&4194240)&&(za=64),t}function dd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ra(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-nr(e),t[e]=n}function A2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-nr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Rf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-nr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var lt=0;function m1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var y1,Af,v1,x1,_1,yh=!1,Ua=[],gs=null,ms=null,ys=null,Il=new Map,jl=new Map,us=[],P2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qg(t,e){switch(t){case"focusin":case"focusout":gs=null;break;case"dragenter":case"dragleave":ms=null;break;case"mouseover":case"mouseout":ys=null;break;case"pointerover":case"pointerout":Il.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":jl.delete(e.pointerId)}}function $o(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ia(e),e!==null&&Af(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function O2(t,e,n,r,s){switch(e){case"focusin":return gs=$o(gs,t,e,n,r,s),!0;case"dragenter":return ms=$o(ms,t,e,n,r,s),!0;case"mouseover":return ys=$o(ys,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Il.set(i,$o(Il.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,jl.set(i,$o(jl.get(i)||null,t,e,n,r,s)),!0}return!1}function w1(t){var e=Js(t.target);if(e!==null){var n=xi(e);if(n!==null){if(e=n.tag,e===13){if(e=c1(n),e!==null){t.blockedOn=e,_1(t.priority,function(){v1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function lc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=vh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);hh=r,n.target.dispatchEvent(r),hh=null}else return e=ia(n),e!==null&&Af(e),t.blockedOn=n,!1;e.shift()}return!0}function Jg(t,e,n){lc(t)&&n.delete(e)}function D2(){yh=!1,gs!==null&&lc(gs)&&(gs=null),ms!==null&&lc(ms)&&(ms=null),ys!==null&&lc(ys)&&(ys=null),Il.forEach(Jg),jl.forEach(Jg)}function Wo(t,e){t.blockedOn===e&&(t.blockedOn=null,yh||(yh=!0,An.unstable_scheduleCallback(An.unstable_NormalPriority,D2)))}function kl(t){function e(s){return Wo(s,t)}if(0<Ua.length){Wo(Ua[0],t);for(var n=1;n<Ua.length;n++){var r=Ua[n];r.blockedOn===t&&(r.blockedOn=null)}}for(gs!==null&&Wo(gs,t),ms!==null&&Wo(ms,t),ys!==null&&Wo(ys,t),Il.forEach(e),jl.forEach(e),n=0;n<us.length;n++)r=us[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<us.length&&(n=us[0],n.blockedOn===null);)w1(n),n.blockedOn===null&&us.shift()}var Ki=Kr.ReactCurrentBatchConfig,Tc=!0;function M2(t,e,n,r){var s=lt,i=Ki.transition;Ki.transition=null;try{lt=1,Pf(t,e,n,r)}finally{lt=s,Ki.transition=i}}function L2(t,e,n,r){var s=lt,i=Ki.transition;Ki.transition=null;try{lt=4,Pf(t,e,n,r)}finally{lt=s,Ki.transition=i}}function Pf(t,e,n,r){if(Tc){var s=vh(t,e,n,r);if(s===null)wd(t,e,r,Nc,n),Qg(t,r);else if(O2(s,t,e,n,r))r.stopPropagation();else if(Qg(t,r),e&4&&-1<P2.indexOf(t)){for(;s!==null;){var i=ia(s);if(i!==null&&y1(i),i=vh(t,e,n,r),i===null&&wd(t,e,r,Nc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else wd(t,e,r,null,n)}}var Nc=null;function vh(t,e,n,r){if(Nc=null,t=Tf(r),t=Js(t),t!==null)if(e=xi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=c1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Nc=t,null}function S1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(E2()){case Nf:return 1;case f1:return 4;case jc:case C2:return 16;case p1:return 536870912;default:return 16}default:return 16}}var hs=null,Of=null,ac=null;function b1(){if(ac)return ac;var t,e=Of,n=e.length,r,s="value"in hs?hs.value:hs.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return ac=s.slice(t,1<r?1-r:void 0)}function cc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function $a(){return!0}function Xg(){return!1}function On(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?$a:Xg,this.isPropagationStopped=Xg,this}return bt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=$a)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=$a)},persist:function(){},isPersistent:$a}),e}var vo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Df=On(vo),sa=bt({},vo,{view:0,detail:0}),F2=On(sa),hd,fd,Vo,mu=bt({},sa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Vo&&(Vo&&t.type==="mousemove"?(hd=t.screenX-Vo.screenX,fd=t.screenY-Vo.screenY):fd=hd=0,Vo=t),hd)},movementY:function(t){return"movementY"in t?t.movementY:fd}}),Zg=On(mu),z2=bt({},mu,{dataTransfer:0}),B2=On(z2),U2=bt({},sa,{relatedTarget:0}),pd=On(U2),$2=bt({},vo,{animationName:0,elapsedTime:0,pseudoElement:0}),W2=On($2),V2=bt({},vo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),H2=On(V2),K2=bt({},vo,{data:0}),em=On(K2),G2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},q2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Y2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Q2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Y2[t])?!!e[t]:!1}function Mf(){return Q2}var J2=bt({},sa,{key:function(t){if(t.key){var e=G2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=cc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?q2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mf,charCode:function(t){return t.type==="keypress"?cc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?cc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),X2=On(J2),Z2=bt({},mu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tm=On(Z2),eS=bt({},sa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mf}),tS=On(eS),nS=bt({},vo,{propertyName:0,elapsedTime:0,pseudoElement:0}),rS=On(nS),sS=bt({},mu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),iS=On(sS),oS=[9,13,27,32],Lf=zr&&"CompositionEvent"in window,ll=null;zr&&"documentMode"in document&&(ll=document.documentMode);var lS=zr&&"TextEvent"in window&&!ll,E1=zr&&(!Lf||ll&&8<ll&&11>=ll),nm=" ",rm=!1;function C1(t,e){switch(t){case"keyup":return oS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function I1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ai=!1;function aS(t,e){switch(t){case"compositionend":return I1(e);case"keypress":return e.which!==32?null:(rm=!0,nm);case"textInput":return t=e.data,t===nm&&rm?null:t;default:return null}}function cS(t,e){if(Ai)return t==="compositionend"||!Lf&&C1(t,e)?(t=b1(),ac=Of=hs=null,Ai=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return E1&&e.locale!=="ko"?null:e.data;default:return null}}var uS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!uS[t.type]:e==="textarea"}function j1(t,e,n,r){s1(r),e=Rc(e,"onChange"),0<e.length&&(n=new Df("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var al=null,Tl=null;function dS(t){F1(t,0)}function yu(t){var e=Di(t);if(J0(e))return t}function hS(t,e){if(t==="change")return e}var k1=!1;if(zr){var gd;if(zr){var md="oninput"in document;if(!md){var im=document.createElement("div");im.setAttribute("oninput","return;"),md=typeof im.oninput=="function"}gd=md}else gd=!1;k1=gd&&(!document.documentMode||9<document.documentMode)}function om(){al&&(al.detachEvent("onpropertychange",T1),Tl=al=null)}function T1(t){if(t.propertyName==="value"&&yu(Tl)){var e=[];j1(e,Tl,t,Tf(t)),a1(dS,e)}}function fS(t,e,n){t==="focusin"?(om(),al=e,Tl=n,al.attachEvent("onpropertychange",T1)):t==="focusout"&&om()}function pS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return yu(Tl)}function gS(t,e){if(t==="click")return yu(e)}function mS(t,e){if(t==="input"||t==="change")return yu(e)}function yS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ir=typeof Object.is=="function"?Object.is:yS;function Nl(t,e){if(ir(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!eh.call(e,s)||!ir(t[s],e[s]))return!1}return!0}function lm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function am(t,e){var n=lm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=lm(n)}}function N1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?N1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function R1(){for(var t=window,e=Ec();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ec(t.document)}return e}function Ff(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function vS(t){var e=R1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&N1(n.ownerDocument.documentElement,n)){if(r!==null&&Ff(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=am(n,i);var o=am(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var xS=zr&&"documentMode"in document&&11>=document.documentMode,Pi=null,xh=null,cl=null,_h=!1;function cm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;_h||Pi==null||Pi!==Ec(r)||(r=Pi,"selectionStart"in r&&Ff(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),cl&&Nl(cl,r)||(cl=r,r=Rc(xh,"onSelect"),0<r.length&&(e=new Df("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Pi)))}function Wa(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Oi={animationend:Wa("Animation","AnimationEnd"),animationiteration:Wa("Animation","AnimationIteration"),animationstart:Wa("Animation","AnimationStart"),transitionend:Wa("Transition","TransitionEnd")},yd={},A1={};zr&&(A1=document.createElement("div").style,"AnimationEvent"in window||(delete Oi.animationend.animation,delete Oi.animationiteration.animation,delete Oi.animationstart.animation),"TransitionEvent"in window||delete Oi.transitionend.transition);function vu(t){if(yd[t])return yd[t];if(!Oi[t])return t;var e=Oi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in A1)return yd[t]=e[n];return t}var P1=vu("animationend"),O1=vu("animationiteration"),D1=vu("animationstart"),M1=vu("transitionend"),L1=new Map,um="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Os(t,e){L1.set(t,e),vi(e,[t])}for(var vd=0;vd<um.length;vd++){var xd=um[vd],_S=xd.toLowerCase(),wS=xd[0].toUpperCase()+xd.slice(1);Os(_S,"on"+wS)}Os(P1,"onAnimationEnd");Os(O1,"onAnimationIteration");Os(D1,"onAnimationStart");Os("dblclick","onDoubleClick");Os("focusin","onFocus");Os("focusout","onBlur");Os(M1,"onTransitionEnd");Zi("onMouseEnter",["mouseout","mouseover"]);Zi("onMouseLeave",["mouseout","mouseover"]);Zi("onPointerEnter",["pointerout","pointerover"]);Zi("onPointerLeave",["pointerout","pointerover"]);vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vi("onBeforeInput",["compositionend","keypress","textInput","paste"]);vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SS=new Set("cancel close invalid load scroll toggle".split(" ").concat(sl));function dm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,_2(r,e,void 0,t),t.currentTarget=null}function F1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;dm(s,c,d),i=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,d=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;dm(s,c,d),i=u}}}if(Ic)throw t=gh,Ic=!1,gh=null,t}function mt(t,e){var n=e[Ch];n===void 0&&(n=e[Ch]=new Set);var r=t+"__bubble";n.has(r)||(z1(e,t,2,!1),n.add(r))}function _d(t,e,n){var r=0;e&&(r|=4),z1(n,t,r,e)}var Va="_reactListening"+Math.random().toString(36).slice(2);function Rl(t){if(!t[Va]){t[Va]=!0,K0.forEach(function(n){n!=="selectionchange"&&(SS.has(n)||_d(n,!1,t),_d(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Va]||(e[Va]=!0,_d("selectionchange",!1,e))}}function z1(t,e,n,r){switch(S1(e)){case 1:var s=M2;break;case 4:s=L2;break;default:s=Pf}n=s.bind(null,e,n,t),s=void 0,!ph||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function wd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;c!==null;){if(o=Js(c),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}c=c.parentNode}}r=r.return}a1(function(){var d=i,p=Tf(n),f=[];e:{var m=L1.get(t);if(m!==void 0){var T=Df,b=t;switch(t){case"keypress":if(cc(n)===0)break e;case"keydown":case"keyup":T=X2;break;case"focusin":b="focus",T=pd;break;case"focusout":b="blur",T=pd;break;case"beforeblur":case"afterblur":T=pd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=Zg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=B2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=tS;break;case P1:case O1:case D1:T=W2;break;case M1:T=rS;break;case"scroll":T=F2;break;case"wheel":T=iS;break;case"copy":case"cut":case"paste":T=H2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=tm}var N=(e&4)!==0,A=!N&&t==="scroll",E=N?m!==null?m+"Capture":null:m;N=[];for(var w=d,_;w!==null;){_=w;var O=_.stateNode;if(_.tag===5&&O!==null&&(_=O,E!==null&&(O=Cl(w,E),O!=null&&N.push(Al(w,O,_)))),A)break;w=w.return}0<N.length&&(m=new T(m,b,null,n,p),f.push({event:m,listeners:N}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",m&&n!==hh&&(b=n.relatedTarget||n.fromElement)&&(Js(b)||b[Br]))break e;if((T||m)&&(m=p.window===p?p:(m=p.ownerDocument)?m.defaultView||m.parentWindow:window,T?(b=n.relatedTarget||n.toElement,T=d,b=b?Js(b):null,b!==null&&(A=xi(b),b!==A||b.tag!==5&&b.tag!==6)&&(b=null)):(T=null,b=d),T!==b)){if(N=Zg,O="onMouseLeave",E="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(N=tm,O="onPointerLeave",E="onPointerEnter",w="pointer"),A=T==null?m:Di(T),_=b==null?m:Di(b),m=new N(O,w+"leave",T,n,p),m.target=A,m.relatedTarget=_,O=null,Js(p)===d&&(N=new N(E,w+"enter",b,n,p),N.target=_,N.relatedTarget=A,O=N),A=O,T&&b)t:{for(N=T,E=b,w=0,_=N;_;_=ji(_))w++;for(_=0,O=E;O;O=ji(O))_++;for(;0<w-_;)N=ji(N),w--;for(;0<_-w;)E=ji(E),_--;for(;w--;){if(N===E||E!==null&&N===E.alternate)break t;N=ji(N),E=ji(E)}N=null}else N=null;T!==null&&hm(f,m,T,N,!1),b!==null&&A!==null&&hm(f,A,b,N,!0)}}e:{if(m=d?Di(d):window,T=m.nodeName&&m.nodeName.toLowerCase(),T==="select"||T==="input"&&m.type==="file")var G=hS;else if(sm(m))if(k1)G=mS;else{G=pS;var X=fS}else(T=m.nodeName)&&T.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(G=gS);if(G&&(G=G(t,d))){j1(f,G,n,p);break e}X&&X(t,m,d),t==="focusout"&&(X=m._wrapperState)&&X.controlled&&m.type==="number"&&lh(m,"number",m.value)}switch(X=d?Di(d):window,t){case"focusin":(sm(X)||X.contentEditable==="true")&&(Pi=X,xh=d,cl=null);break;case"focusout":cl=xh=Pi=null;break;case"mousedown":_h=!0;break;case"contextmenu":case"mouseup":case"dragend":_h=!1,cm(f,n,p);break;case"selectionchange":if(xS)break;case"keydown":case"keyup":cm(f,n,p)}var j;if(Lf)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Ai?C1(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(E1&&n.locale!=="ko"&&(Ai||v!=="onCompositionStart"?v==="onCompositionEnd"&&Ai&&(j=b1()):(hs=p,Of="value"in hs?hs.value:hs.textContent,Ai=!0)),X=Rc(d,v),0<X.length&&(v=new em(v,t,null,n,p),f.push({event:v,listeners:X}),j?v.data=j:(j=I1(n),j!==null&&(v.data=j)))),(j=lS?aS(t,n):cS(t,n))&&(d=Rc(d,"onBeforeInput"),0<d.length&&(p=new em("onBeforeInput","beforeinput",null,n,p),f.push({event:p,listeners:d}),p.data=j))}F1(f,e)})}function Al(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Rc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Cl(t,n),i!=null&&r.unshift(Al(t,i,s)),i=Cl(t,e),i!=null&&r.push(Al(t,i,s))),t=t.return}return r}function ji(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function hm(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=Cl(n,i),u!=null&&o.unshift(Al(n,u,c))):s||(u=Cl(n,i),u!=null&&o.push(Al(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var bS=/\r\n?/g,ES=/\u0000|\uFFFD/g;function fm(t){return(typeof t=="string"?t:""+t).replace(bS,`
`).replace(ES,"")}function Ha(t,e,n){if(e=fm(e),fm(t)!==e&&n)throw Error(ae(425))}function Ac(){}var wh=null,Sh=null;function bh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Eh=typeof setTimeout=="function"?setTimeout:void 0,CS=typeof clearTimeout=="function"?clearTimeout:void 0,pm=typeof Promise=="function"?Promise:void 0,IS=typeof queueMicrotask=="function"?queueMicrotask:typeof pm<"u"?function(t){return pm.resolve(null).then(t).catch(jS)}:Eh;function jS(t){setTimeout(function(){throw t})}function Sd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),kl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);kl(e)}function vs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function gm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var xo=Math.random().toString(36).slice(2),yr="__reactFiber$"+xo,Pl="__reactProps$"+xo,Br="__reactContainer$"+xo,Ch="__reactEvents$"+xo,kS="__reactListeners$"+xo,TS="__reactHandles$"+xo;function Js(t){var e=t[yr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Br]||n[yr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=gm(t);t!==null;){if(n=t[yr])return n;t=gm(t)}return e}t=n,n=t.parentNode}return null}function ia(t){return t=t[yr]||t[Br],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Di(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ae(33))}function xu(t){return t[Pl]||null}var Ih=[],Mi=-1;function Ds(t){return{current:t}}function yt(t){0>Mi||(t.current=Ih[Mi],Ih[Mi]=null,Mi--)}function pt(t,e){Mi++,Ih[Mi]=t.current,t.current=e}var Ts={},on=Ds(Ts),Sn=Ds(!1),ai=Ts;function eo(t,e){var n=t.type.contextTypes;if(!n)return Ts;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function bn(t){return t=t.childContextTypes,t!=null}function Pc(){yt(Sn),yt(on)}function mm(t,e,n){if(on.current!==Ts)throw Error(ae(168));pt(on,e),pt(Sn,n)}function B1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ae(108,f2(t)||"Unknown",s));return bt({},n,r)}function Oc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ts,ai=on.current,pt(on,t),pt(Sn,Sn.current),!0}function ym(t,e,n){var r=t.stateNode;if(!r)throw Error(ae(169));n?(t=B1(t,e,ai),r.__reactInternalMemoizedMergedChildContext=t,yt(Sn),yt(on),pt(on,t)):yt(Sn),pt(Sn,n)}var Rr=null,_u=!1,bd=!1;function U1(t){Rr===null?Rr=[t]:Rr.push(t)}function NS(t){_u=!0,U1(t)}function Ms(){if(!bd&&Rr!==null){bd=!0;var t=0,e=lt;try{var n=Rr;for(lt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Rr=null,_u=!1}catch(s){throw Rr!==null&&(Rr=Rr.slice(t+1)),h1(Nf,Ms),s}finally{lt=e,bd=!1}}return null}var Li=[],Fi=0,Dc=null,Mc=0,zn=[],Bn=0,ci=null,Pr=1,Or="";function Ks(t,e){Li[Fi++]=Mc,Li[Fi++]=Dc,Dc=t,Mc=e}function $1(t,e,n){zn[Bn++]=Pr,zn[Bn++]=Or,zn[Bn++]=ci,ci=t;var r=Pr;t=Or;var s=32-nr(r)-1;r&=~(1<<s),n+=1;var i=32-nr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Pr=1<<32-nr(e)+s|n<<s|r,Or=i+t}else Pr=1<<i|n<<s|r,Or=t}function zf(t){t.return!==null&&(Ks(t,1),$1(t,1,0))}function Bf(t){for(;t===Dc;)Dc=Li[--Fi],Li[Fi]=null,Mc=Li[--Fi],Li[Fi]=null;for(;t===ci;)ci=zn[--Bn],zn[Bn]=null,Or=zn[--Bn],zn[Bn]=null,Pr=zn[--Bn],zn[Bn]=null}var Rn=null,Nn=null,vt=!1,Jn=null;function W1(t,e){var n=Un(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function vm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Rn=t,Nn=vs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Rn=t,Nn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ci!==null?{id:Pr,overflow:Or}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Un(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Rn=t,Nn=null,!0):!1;default:return!1}}function jh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function kh(t){if(vt){var e=Nn;if(e){var n=e;if(!vm(t,e)){if(jh(t))throw Error(ae(418));e=vs(n.nextSibling);var r=Rn;e&&vm(t,e)?W1(r,n):(t.flags=t.flags&-4097|2,vt=!1,Rn=t)}}else{if(jh(t))throw Error(ae(418));t.flags=t.flags&-4097|2,vt=!1,Rn=t}}}function xm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Rn=t}function Ka(t){if(t!==Rn)return!1;if(!vt)return xm(t),vt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!bh(t.type,t.memoizedProps)),e&&(e=Nn)){if(jh(t))throw V1(),Error(ae(418));for(;e;)W1(t,e),e=vs(e.nextSibling)}if(xm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Nn=vs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Nn=null}}else Nn=Rn?vs(t.stateNode.nextSibling):null;return!0}function V1(){for(var t=Nn;t;)t=vs(t.nextSibling)}function to(){Nn=Rn=null,vt=!1}function Uf(t){Jn===null?Jn=[t]:Jn.push(t)}var RS=Kr.ReactCurrentBatchConfig;function Ho(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ae(309));var r=n.stateNode}if(!r)throw Error(ae(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var c=s.refs;o===null?delete c[i]:c[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(ae(284));if(!n._owner)throw Error(ae(290,t))}return t}function Ga(t,e){throw t=Object.prototype.toString.call(e),Error(ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function _m(t){var e=t._init;return e(t._payload)}function H1(t){function e(E,w){if(t){var _=E.deletions;_===null?(E.deletions=[w],E.flags|=16):_.push(w)}}function n(E,w){if(!t)return null;for(;w!==null;)e(E,w),w=w.sibling;return null}function r(E,w){for(E=new Map;w!==null;)w.key!==null?E.set(w.key,w):E.set(w.index,w),w=w.sibling;return E}function s(E,w){return E=Ss(E,w),E.index=0,E.sibling=null,E}function i(E,w,_){return E.index=_,t?(_=E.alternate,_!==null?(_=_.index,_<w?(E.flags|=2,w):_):(E.flags|=2,w)):(E.flags|=1048576,w)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function c(E,w,_,O){return w===null||w.tag!==6?(w=Nd(_,E.mode,O),w.return=E,w):(w=s(w,_),w.return=E,w)}function u(E,w,_,O){var G=_.type;return G===Ri?p(E,w,_.props.children,O,_.key):w!==null&&(w.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===as&&_m(G)===w.type)?(O=s(w,_.props),O.ref=Ho(E,w,_),O.return=E,O):(O=mc(_.type,_.key,_.props,null,E.mode,O),O.ref=Ho(E,w,_),O.return=E,O)}function d(E,w,_,O){return w===null||w.tag!==4||w.stateNode.containerInfo!==_.containerInfo||w.stateNode.implementation!==_.implementation?(w=Rd(_,E.mode,O),w.return=E,w):(w=s(w,_.children||[]),w.return=E,w)}function p(E,w,_,O,G){return w===null||w.tag!==7?(w=si(_,E.mode,O,G),w.return=E,w):(w=s(w,_),w.return=E,w)}function f(E,w,_){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Nd(""+w,E.mode,_),w.return=E,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ma:return _=mc(w.type,w.key,w.props,null,E.mode,_),_.ref=Ho(E,null,w),_.return=E,_;case Ni:return w=Rd(w,E.mode,_),w.return=E,w;case as:var O=w._init;return f(E,O(w._payload),_)}if(nl(w)||Bo(w))return w=si(w,E.mode,_,null),w.return=E,w;Ga(E,w)}return null}function m(E,w,_,O){var G=w!==null?w.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return G!==null?null:c(E,w,""+_,O);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ma:return _.key===G?u(E,w,_,O):null;case Ni:return _.key===G?d(E,w,_,O):null;case as:return G=_._init,m(E,w,G(_._payload),O)}if(nl(_)||Bo(_))return G!==null?null:p(E,w,_,O,null);Ga(E,_)}return null}function T(E,w,_,O,G){if(typeof O=="string"&&O!==""||typeof O=="number")return E=E.get(_)||null,c(w,E,""+O,G);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Ma:return E=E.get(O.key===null?_:O.key)||null,u(w,E,O,G);case Ni:return E=E.get(O.key===null?_:O.key)||null,d(w,E,O,G);case as:var X=O._init;return T(E,w,_,X(O._payload),G)}if(nl(O)||Bo(O))return E=E.get(_)||null,p(w,E,O,G,null);Ga(w,O)}return null}function b(E,w,_,O){for(var G=null,X=null,j=w,v=w=0,I=null;j!==null&&v<_.length;v++){j.index>v?(I=j,j=null):I=j.sibling;var k=m(E,j,_[v],O);if(k===null){j===null&&(j=I);break}t&&j&&k.alternate===null&&e(E,j),w=i(k,w,v),X===null?G=k:X.sibling=k,X=k,j=I}if(v===_.length)return n(E,j),vt&&Ks(E,v),G;if(j===null){for(;v<_.length;v++)j=f(E,_[v],O),j!==null&&(w=i(j,w,v),X===null?G=j:X.sibling=j,X=j);return vt&&Ks(E,v),G}for(j=r(E,j);v<_.length;v++)I=T(j,E,v,_[v],O),I!==null&&(t&&I.alternate!==null&&j.delete(I.key===null?v:I.key),w=i(I,w,v),X===null?G=I:X.sibling=I,X=I);return t&&j.forEach(function(x){return e(E,x)}),vt&&Ks(E,v),G}function N(E,w,_,O){var G=Bo(_);if(typeof G!="function")throw Error(ae(150));if(_=G.call(_),_==null)throw Error(ae(151));for(var X=G=null,j=w,v=w=0,I=null,k=_.next();j!==null&&!k.done;v++,k=_.next()){j.index>v?(I=j,j=null):I=j.sibling;var x=m(E,j,k.value,O);if(x===null){j===null&&(j=I);break}t&&j&&x.alternate===null&&e(E,j),w=i(x,w,v),X===null?G=x:X.sibling=x,X=x,j=I}if(k.done)return n(E,j),vt&&Ks(E,v),G;if(j===null){for(;!k.done;v++,k=_.next())k=f(E,k.value,O),k!==null&&(w=i(k,w,v),X===null?G=k:X.sibling=k,X=k);return vt&&Ks(E,v),G}for(j=r(E,j);!k.done;v++,k=_.next())k=T(j,E,v,k.value,O),k!==null&&(t&&k.alternate!==null&&j.delete(k.key===null?v:k.key),w=i(k,w,v),X===null?G=k:X.sibling=k,X=k);return t&&j.forEach(function(R){return e(E,R)}),vt&&Ks(E,v),G}function A(E,w,_,O){if(typeof _=="object"&&_!==null&&_.type===Ri&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Ma:e:{for(var G=_.key,X=w;X!==null;){if(X.key===G){if(G=_.type,G===Ri){if(X.tag===7){n(E,X.sibling),w=s(X,_.props.children),w.return=E,E=w;break e}}else if(X.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===as&&_m(G)===X.type){n(E,X.sibling),w=s(X,_.props),w.ref=Ho(E,X,_),w.return=E,E=w;break e}n(E,X);break}else e(E,X);X=X.sibling}_.type===Ri?(w=si(_.props.children,E.mode,O,_.key),w.return=E,E=w):(O=mc(_.type,_.key,_.props,null,E.mode,O),O.ref=Ho(E,w,_),O.return=E,E=O)}return o(E);case Ni:e:{for(X=_.key;w!==null;){if(w.key===X)if(w.tag===4&&w.stateNode.containerInfo===_.containerInfo&&w.stateNode.implementation===_.implementation){n(E,w.sibling),w=s(w,_.children||[]),w.return=E,E=w;break e}else{n(E,w);break}else e(E,w);w=w.sibling}w=Rd(_,E.mode,O),w.return=E,E=w}return o(E);case as:return X=_._init,A(E,w,X(_._payload),O)}if(nl(_))return b(E,w,_,O);if(Bo(_))return N(E,w,_,O);Ga(E,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,w!==null&&w.tag===6?(n(E,w.sibling),w=s(w,_),w.return=E,E=w):(n(E,w),w=Nd(_,E.mode,O),w.return=E,E=w),o(E)):n(E,w)}return A}var no=H1(!0),K1=H1(!1),Lc=Ds(null),Fc=null,zi=null,$f=null;function Wf(){$f=zi=Fc=null}function Vf(t){var e=Lc.current;yt(Lc),t._currentValue=e}function Th(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Gi(t,e){Fc=t,$f=zi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(_n=!0),t.firstContext=null)}function Vn(t){var e=t._currentValue;if($f!==t)if(t={context:t,memoizedValue:e,next:null},zi===null){if(Fc===null)throw Error(ae(308));zi=t,Fc.dependencies={lanes:0,firstContext:t}}else zi=zi.next=t;return e}var Xs=null;function Hf(t){Xs===null?Xs=[t]:Xs.push(t)}function G1(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Hf(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ur(t,r)}function Ur(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var cs=!1;function Kf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function q1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Mr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function xs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,tt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Ur(t,n)}return s=r.interleaved,s===null?(e.next=e,Hf(r)):(e.next=s.next,s.next=e),r.interleaved=e,Ur(t,n)}function uc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Rf(t,n)}}function wm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function zc(t,e,n,r){var s=t.updateQueue;cs=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var p=t.alternate;p!==null&&(p=p.updateQueue,c=p.lastBaseUpdate,c!==o&&(c===null?p.firstBaseUpdate=d:c.next=d,p.lastBaseUpdate=u))}if(i!==null){var f=s.baseState;o=0,p=d=u=null,c=i;do{var m=c.lane,T=c.eventTime;if((r&m)===m){p!==null&&(p=p.next={eventTime:T,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var b=t,N=c;switch(m=e,T=n,N.tag){case 1:if(b=N.payload,typeof b=="function"){f=b.call(T,f,m);break e}f=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=N.payload,m=typeof b=="function"?b.call(T,f,m):b,m==null)break e;f=bt({},f,m);break e;case 2:cs=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[c]:m.push(c))}else T={eventTime:T,lane:m,tag:c.tag,payload:c.payload,callback:c.callback,next:null},p===null?(d=p=T,u=f):p=p.next=T,o|=m;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;m=c,c=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(p===null&&(u=f),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);di|=o,t.lanes=o,t.memoizedState=f}}function Sm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ae(191,s));s.call(r)}}}var oa={},_r=Ds(oa),Ol=Ds(oa),Dl=Ds(oa);function Zs(t){if(t===oa)throw Error(ae(174));return t}function Gf(t,e){switch(pt(Dl,e),pt(Ol,t),pt(_r,oa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ch(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ch(e,t)}yt(_r),pt(_r,e)}function ro(){yt(_r),yt(Ol),yt(Dl)}function Y1(t){Zs(Dl.current);var e=Zs(_r.current),n=ch(e,t.type);e!==n&&(pt(Ol,t),pt(_r,n))}function qf(t){Ol.current===t&&(yt(_r),yt(Ol))}var _t=Ds(0);function Bc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ed=[];function Yf(){for(var t=0;t<Ed.length;t++)Ed[t]._workInProgressVersionPrimary=null;Ed.length=0}var dc=Kr.ReactCurrentDispatcher,Cd=Kr.ReactCurrentBatchConfig,ui=0,wt=null,Dt=null,Wt=null,Uc=!1,ul=!1,Ml=0,AS=0;function tn(){throw Error(ae(321))}function Qf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ir(t[n],e[n]))return!1;return!0}function Jf(t,e,n,r,s,i){if(ui=i,wt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,dc.current=t===null||t.memoizedState===null?MS:LS,t=n(r,s),ul){i=0;do{if(ul=!1,Ml=0,25<=i)throw Error(ae(301));i+=1,Wt=Dt=null,e.updateQueue=null,dc.current=FS,t=n(r,s)}while(ul)}if(dc.current=$c,e=Dt!==null&&Dt.next!==null,ui=0,Wt=Dt=wt=null,Uc=!1,e)throw Error(ae(300));return t}function Xf(){var t=Ml!==0;return Ml=0,t}function pr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wt===null?wt.memoizedState=Wt=t:Wt=Wt.next=t,Wt}function Hn(){if(Dt===null){var t=wt.alternate;t=t!==null?t.memoizedState:null}else t=Dt.next;var e=Wt===null?wt.memoizedState:Wt.next;if(e!==null)Wt=e,Dt=t;else{if(t===null)throw Error(ae(310));Dt=t,t={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},Wt===null?wt.memoizedState=Wt=t:Wt=Wt.next=t}return Wt}function Ll(t,e){return typeof e=="function"?e(t):e}function Id(t){var e=Hn(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var r=Dt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=o=null,u=null,d=i;do{var p=d.lane;if((ui&p)===p)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var f={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=f,o=r):u=u.next=f,wt.lanes|=p,di|=p}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=c,ir(r,e.memoizedState)||(_n=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,wt.lanes|=i,di|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function jd(t){var e=Hn(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);ir(i,e.memoizedState)||(_n=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Q1(){}function J1(t,e){var n=wt,r=Hn(),s=e(),i=!ir(r.memoizedState,s);if(i&&(r.memoizedState=s,_n=!0),r=r.queue,Zf(ev.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Wt!==null&&Wt.memoizedState.tag&1){if(n.flags|=2048,Fl(9,Z1.bind(null,n,r,s,e),void 0,null),Ht===null)throw Error(ae(349));ui&30||X1(n,e,s)}return s}function X1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=wt.updateQueue,e===null?(e={lastEffect:null,stores:null},wt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Z1(t,e,n,r){e.value=n,e.getSnapshot=r,tv(e)&&nv(t)}function ev(t,e,n){return n(function(){tv(e)&&nv(t)})}function tv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ir(t,n)}catch{return!0}}function nv(t){var e=Ur(t,1);e!==null&&rr(e,t,1,-1)}function bm(t){var e=pr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ll,lastRenderedState:t},e.queue=t,t=t.dispatch=DS.bind(null,wt,t),[e.memoizedState,t]}function Fl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=wt.updateQueue,e===null?(e={lastEffect:null,stores:null},wt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function rv(){return Hn().memoizedState}function hc(t,e,n,r){var s=pr();wt.flags|=t,s.memoizedState=Fl(1|e,n,void 0,r===void 0?null:r)}function wu(t,e,n,r){var s=Hn();r=r===void 0?null:r;var i=void 0;if(Dt!==null){var o=Dt.memoizedState;if(i=o.destroy,r!==null&&Qf(r,o.deps)){s.memoizedState=Fl(e,n,i,r);return}}wt.flags|=t,s.memoizedState=Fl(1|e,n,i,r)}function Em(t,e){return hc(8390656,8,t,e)}function Zf(t,e){return wu(2048,8,t,e)}function sv(t,e){return wu(4,2,t,e)}function iv(t,e){return wu(4,4,t,e)}function ov(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function lv(t,e,n){return n=n!=null?n.concat([t]):null,wu(4,4,ov.bind(null,e,t),n)}function ep(){}function av(t,e){var n=Hn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Qf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function cv(t,e){var n=Hn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Qf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function uv(t,e,n){return ui&21?(ir(n,e)||(n=g1(),wt.lanes|=n,di|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,_n=!0),t.memoizedState=n)}function PS(t,e){var n=lt;lt=n!==0&&4>n?n:4,t(!0);var r=Cd.transition;Cd.transition={};try{t(!1),e()}finally{lt=n,Cd.transition=r}}function dv(){return Hn().memoizedState}function OS(t,e,n){var r=ws(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},hv(t))fv(e,n);else if(n=G1(t,e,n,r),n!==null){var s=pn();rr(n,t,r,s),pv(n,e,r)}}function DS(t,e,n){var r=ws(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(hv(t))fv(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,c=i(o,n);if(s.hasEagerState=!0,s.eagerState=c,ir(c,o)){var u=e.interleaved;u===null?(s.next=s,Hf(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=G1(t,e,s,r),n!==null&&(s=pn(),rr(n,t,r,s),pv(n,e,r))}}function hv(t){var e=t.alternate;return t===wt||e!==null&&e===wt}function fv(t,e){ul=Uc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function pv(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Rf(t,n)}}var $c={readContext:Vn,useCallback:tn,useContext:tn,useEffect:tn,useImperativeHandle:tn,useInsertionEffect:tn,useLayoutEffect:tn,useMemo:tn,useReducer:tn,useRef:tn,useState:tn,useDebugValue:tn,useDeferredValue:tn,useTransition:tn,useMutableSource:tn,useSyncExternalStore:tn,useId:tn,unstable_isNewReconciler:!1},MS={readContext:Vn,useCallback:function(t,e){return pr().memoizedState=[t,e===void 0?null:e],t},useContext:Vn,useEffect:Em,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,hc(4194308,4,ov.bind(null,e,t),n)},useLayoutEffect:function(t,e){return hc(4194308,4,t,e)},useInsertionEffect:function(t,e){return hc(4,2,t,e)},useMemo:function(t,e){var n=pr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=pr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=OS.bind(null,wt,t),[r.memoizedState,t]},useRef:function(t){var e=pr();return t={current:t},e.memoizedState=t},useState:bm,useDebugValue:ep,useDeferredValue:function(t){return pr().memoizedState=t},useTransition:function(){var t=bm(!1),e=t[0];return t=PS.bind(null,t[1]),pr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=wt,s=pr();if(vt){if(n===void 0)throw Error(ae(407));n=n()}else{if(n=e(),Ht===null)throw Error(ae(349));ui&30||X1(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Em(ev.bind(null,r,i,t),[t]),r.flags|=2048,Fl(9,Z1.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=pr(),e=Ht.identifierPrefix;if(vt){var n=Or,r=Pr;n=(r&~(1<<32-nr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ml++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=AS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},LS={readContext:Vn,useCallback:av,useContext:Vn,useEffect:Zf,useImperativeHandle:lv,useInsertionEffect:sv,useLayoutEffect:iv,useMemo:cv,useReducer:Id,useRef:rv,useState:function(){return Id(Ll)},useDebugValue:ep,useDeferredValue:function(t){var e=Hn();return uv(e,Dt.memoizedState,t)},useTransition:function(){var t=Id(Ll)[0],e=Hn().memoizedState;return[t,e]},useMutableSource:Q1,useSyncExternalStore:J1,useId:dv,unstable_isNewReconciler:!1},FS={readContext:Vn,useCallback:av,useContext:Vn,useEffect:Zf,useImperativeHandle:lv,useInsertionEffect:sv,useLayoutEffect:iv,useMemo:cv,useReducer:jd,useRef:rv,useState:function(){return jd(Ll)},useDebugValue:ep,useDeferredValue:function(t){var e=Hn();return Dt===null?e.memoizedState=t:uv(e,Dt.memoizedState,t)},useTransition:function(){var t=jd(Ll)[0],e=Hn().memoizedState;return[t,e]},useMutableSource:Q1,useSyncExternalStore:J1,useId:dv,unstable_isNewReconciler:!1};function Yn(t,e){if(t&&t.defaultProps){e=bt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Nh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:bt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Su={isMounted:function(t){return(t=t._reactInternals)?xi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=pn(),s=ws(t),i=Mr(r,s);i.payload=e,n!=null&&(i.callback=n),e=xs(t,i,s),e!==null&&(rr(e,t,s,r),uc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=pn(),s=ws(t),i=Mr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=xs(t,i,s),e!==null&&(rr(e,t,s,r),uc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=pn(),r=ws(t),s=Mr(n,r);s.tag=2,e!=null&&(s.callback=e),e=xs(t,s,r),e!==null&&(rr(e,t,r,n),uc(e,t,r))}};function Cm(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Nl(n,r)||!Nl(s,i):!0}function gv(t,e,n){var r=!1,s=Ts,i=e.contextType;return typeof i=="object"&&i!==null?i=Vn(i):(s=bn(e)?ai:on.current,r=e.contextTypes,i=(r=r!=null)?eo(t,s):Ts),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Su,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Im(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Su.enqueueReplaceState(e,e.state,null)}function Rh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Kf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Vn(i):(i=bn(e)?ai:on.current,s.context=eo(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Nh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Su.enqueueReplaceState(s,s.state,null),zc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function so(t,e){try{var n="",r=e;do n+=h2(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function kd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ah(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var zS=typeof WeakMap=="function"?WeakMap:Map;function mv(t,e,n){n=Mr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Vc||(Vc=!0,$h=r),Ah(t,e)},n}function yv(t,e,n){n=Mr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Ah(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Ah(t,e),typeof r!="function"&&(_s===null?_s=new Set([this]):_s.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function jm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new zS;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=ZS.bind(null,t,e,n),e.then(t,t))}function km(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Tm(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Mr(-1,1),e.tag=2,xs(n,e,1))),n.lanes|=1),t)}var BS=Kr.ReactCurrentOwner,_n=!1;function dn(t,e,n,r){e.child=t===null?K1(e,null,n,r):no(e,t.child,n,r)}function Nm(t,e,n,r,s){n=n.render;var i=e.ref;return Gi(e,s),r=Jf(t,e,n,r,i,s),n=Xf(),t!==null&&!_n?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,$r(t,e,s)):(vt&&n&&zf(e),e.flags|=1,dn(t,e,r,s),e.child)}function Rm(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!ap(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,vv(t,e,i,r,s)):(t=mc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Nl,n(o,r)&&t.ref===e.ref)return $r(t,e,s)}return e.flags|=1,t=Ss(i,r),t.ref=e.ref,t.return=e,e.child=t}function vv(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Nl(i,r)&&t.ref===e.ref)if(_n=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(_n=!0);else return e.lanes=t.lanes,$r(t,e,s)}return Ph(t,e,n,r,s)}function xv(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},pt(Ui,Tn),Tn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,pt(Ui,Tn),Tn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,pt(Ui,Tn),Tn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,pt(Ui,Tn),Tn|=r;return dn(t,e,s,n),e.child}function _v(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ph(t,e,n,r,s){var i=bn(n)?ai:on.current;return i=eo(e,i),Gi(e,s),n=Jf(t,e,n,r,i,s),r=Xf(),t!==null&&!_n?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,$r(t,e,s)):(vt&&r&&zf(e),e.flags|=1,dn(t,e,n,s),e.child)}function Am(t,e,n,r,s){if(bn(n)){var i=!0;Oc(e)}else i=!1;if(Gi(e,s),e.stateNode===null)fc(t,e),gv(e,n,r),Rh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Vn(d):(d=bn(n)?ai:on.current,d=eo(e,d));var p=n.getDerivedStateFromProps,f=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==d)&&Im(e,o,r,d),cs=!1;var m=e.memoizedState;o.state=m,zc(e,r,o,s),u=e.memoizedState,c!==r||m!==u||Sn.current||cs?(typeof p=="function"&&(Nh(e,n,p,r),u=e.memoizedState),(c=cs||Cm(e,n,c,r,m,u,d))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,q1(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:Yn(e.type,c),o.props=d,f=e.pendingProps,m=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Vn(u):(u=bn(n)?ai:on.current,u=eo(e,u));var T=n.getDerivedStateFromProps;(p=typeof T=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==f||m!==u)&&Im(e,o,r,u),cs=!1,m=e.memoizedState,o.state=m,zc(e,r,o,s);var b=e.memoizedState;c!==f||m!==b||Sn.current||cs?(typeof T=="function"&&(Nh(e,n,T,r),b=e.memoizedState),(d=cs||Cm(e,n,d,r,m,b,u)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Oh(t,e,n,r,i,s)}function Oh(t,e,n,r,s,i){_v(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&ym(e,n,!1),$r(t,e,i);r=e.stateNode,BS.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=no(e,t.child,null,i),e.child=no(e,null,c,i)):dn(t,e,c,i),e.memoizedState=r.state,s&&ym(e,n,!0),e.child}function wv(t){var e=t.stateNode;e.pendingContext?mm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&mm(t,e.context,!1),Gf(t,e.containerInfo)}function Pm(t,e,n,r,s){return to(),Uf(s),e.flags|=256,dn(t,e,n,r),e.child}var Dh={dehydrated:null,treeContext:null,retryLane:0};function Mh(t){return{baseLanes:t,cachePool:null,transitions:null}}function Sv(t,e,n){var r=e.pendingProps,s=_t.current,i=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),pt(_t,s&1),t===null)return kh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Cu(o,r,0,null),t=si(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Mh(n),e.memoizedState=Dh,t):tp(e,o));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return US(t,e,o,r,c,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Ss(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=Ss(c,i):(i=si(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Mh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Dh,r}return i=t.child,t=i.sibling,r=Ss(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function tp(t,e){return e=Cu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function qa(t,e,n,r){return r!==null&&Uf(r),no(e,t.child,null,n),t=tp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function US(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=kd(Error(ae(422))),qa(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Cu({mode:"visible",children:r.children},s,0,null),i=si(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&no(e,t.child,null,o),e.child.memoizedState=Mh(o),e.memoizedState=Dh,i);if(!(e.mode&1))return qa(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(ae(419)),r=kd(i,r,void 0),qa(t,e,o,r)}if(c=(o&t.childLanes)!==0,_n||c){if(r=Ht,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ur(t,s),rr(r,t,s,-1))}return lp(),r=kd(Error(ae(421))),qa(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=eb.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Nn=vs(s.nextSibling),Rn=e,vt=!0,Jn=null,t!==null&&(zn[Bn++]=Pr,zn[Bn++]=Or,zn[Bn++]=ci,Pr=t.id,Or=t.overflow,ci=e),e=tp(e,r.children),e.flags|=4096,e)}function Om(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Th(t.return,e,n)}function Td(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function bv(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(dn(t,e,r.children,n),r=_t.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Om(t,n,e);else if(t.tag===19)Om(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(pt(_t,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Bc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Td(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Bc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Td(e,!0,n,null,i);break;case"together":Td(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function fc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function $r(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),di|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ae(153));if(e.child!==null){for(t=e.child,n=Ss(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ss(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function $S(t,e,n){switch(e.tag){case 3:wv(e),to();break;case 5:Y1(e);break;case 1:bn(e.type)&&Oc(e);break;case 4:Gf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;pt(Lc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(pt(_t,_t.current&1),e.flags|=128,null):n&e.child.childLanes?Sv(t,e,n):(pt(_t,_t.current&1),t=$r(t,e,n),t!==null?t.sibling:null);pt(_t,_t.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return bv(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),pt(_t,_t.current),r)break;return null;case 22:case 23:return e.lanes=0,xv(t,e,n)}return $r(t,e,n)}var Ev,Lh,Cv,Iv;Ev=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Lh=function(){};Cv=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Zs(_r.current);var i=null;switch(n){case"input":s=ih(t,s),r=ih(t,r),i=[];break;case"select":s=bt({},s,{value:void 0}),r=bt({},r,{value:void 0}),i=[];break;case"textarea":s=ah(t,s),r=ah(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ac)}uh(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(bl.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(bl.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&mt("scroll",t),i||c===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};Iv=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ko(t,e){if(!vt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function nn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function WS(t,e,n){var r=e.pendingProps;switch(Bf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nn(e),null;case 1:return bn(e.type)&&Pc(),nn(e),null;case 3:return r=e.stateNode,ro(),yt(Sn),yt(on),Yf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ka(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Jn!==null&&(Hh(Jn),Jn=null))),Lh(t,e),nn(e),null;case 5:qf(e);var s=Zs(Dl.current);if(n=e.type,t!==null&&e.stateNode!=null)Cv(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ae(166));return nn(e),null}if(t=Zs(_r.current),Ka(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[yr]=e,r[Pl]=i,t=(e.mode&1)!==0,n){case"dialog":mt("cancel",r),mt("close",r);break;case"iframe":case"object":case"embed":mt("load",r);break;case"video":case"audio":for(s=0;s<sl.length;s++)mt(sl[s],r);break;case"source":mt("error",r);break;case"img":case"image":case"link":mt("error",r),mt("load",r);break;case"details":mt("toggle",r);break;case"input":Wg(r,i),mt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},mt("invalid",r);break;case"textarea":Hg(r,i),mt("invalid",r)}uh(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&Ha(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&Ha(r.textContent,c,t),s=["children",""+c]):bl.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&mt("scroll",r)}switch(n){case"input":La(r),Vg(r,i,!0);break;case"textarea":La(r),Kg(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ac)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=e1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[yr]=e,t[Pl]=r,Ev(t,e,!1,!1),e.stateNode=t;e:{switch(o=dh(n,r),n){case"dialog":mt("cancel",t),mt("close",t),s=r;break;case"iframe":case"object":case"embed":mt("load",t),s=r;break;case"video":case"audio":for(s=0;s<sl.length;s++)mt(sl[s],t);s=r;break;case"source":mt("error",t),s=r;break;case"img":case"image":case"link":mt("error",t),mt("load",t),s=r;break;case"details":mt("toggle",t),s=r;break;case"input":Wg(t,r),s=ih(t,r),mt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=bt({},r,{value:void 0}),mt("invalid",t);break;case"textarea":Hg(t,r),s=ah(t,r),mt("invalid",t);break;default:s=r}uh(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?r1(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&t1(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&El(t,u):typeof u=="number"&&El(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(bl.hasOwnProperty(i)?u!=null&&i==="onScroll"&&mt("scroll",t):u!=null&&Cf(t,i,u,o))}switch(n){case"input":La(t),Vg(t,r,!1);break;case"textarea":La(t),Kg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ks(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Wi(t,!!r.multiple,i,!1):r.defaultValue!=null&&Wi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ac)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return nn(e),null;case 6:if(t&&e.stateNode!=null)Iv(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ae(166));if(n=Zs(Dl.current),Zs(_r.current),Ka(e)){if(r=e.stateNode,n=e.memoizedProps,r[yr]=e,(i=r.nodeValue!==n)&&(t=Rn,t!==null))switch(t.tag){case 3:Ha(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ha(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[yr]=e,e.stateNode=r}return nn(e),null;case 13:if(yt(_t),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(vt&&Nn!==null&&e.mode&1&&!(e.flags&128))V1(),to(),e.flags|=98560,i=!1;else if(i=Ka(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(ae(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ae(317));i[yr]=e}else to(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;nn(e),i=!1}else Jn!==null&&(Hh(Jn),Jn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||_t.current&1?Ft===0&&(Ft=3):lp())),e.updateQueue!==null&&(e.flags|=4),nn(e),null);case 4:return ro(),Lh(t,e),t===null&&Rl(e.stateNode.containerInfo),nn(e),null;case 10:return Vf(e.type._context),nn(e),null;case 17:return bn(e.type)&&Pc(),nn(e),null;case 19:if(yt(_t),i=e.memoizedState,i===null)return nn(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Ko(i,!1);else{if(Ft!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Bc(t),o!==null){for(e.flags|=128,Ko(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return pt(_t,_t.current&1|2),e.child}t=t.sibling}i.tail!==null&&Nt()>io&&(e.flags|=128,r=!0,Ko(i,!1),e.lanes=4194304)}else{if(!r)if(t=Bc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ko(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!vt)return nn(e),null}else 2*Nt()-i.renderingStartTime>io&&n!==1073741824&&(e.flags|=128,r=!0,Ko(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Nt(),e.sibling=null,n=_t.current,pt(_t,r?n&1|2:n&1),e):(nn(e),null);case 22:case 23:return op(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Tn&1073741824&&(nn(e),e.subtreeFlags&6&&(e.flags|=8192)):nn(e),null;case 24:return null;case 25:return null}throw Error(ae(156,e.tag))}function VS(t,e){switch(Bf(e),e.tag){case 1:return bn(e.type)&&Pc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ro(),yt(Sn),yt(on),Yf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return qf(e),null;case 13:if(yt(_t),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ae(340));to()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return yt(_t),null;case 4:return ro(),null;case 10:return Vf(e.type._context),null;case 22:case 23:return op(),null;case 24:return null;default:return null}}var Ya=!1,rn=!1,HS=typeof WeakSet=="function"?WeakSet:Set,xe=null;function Bi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Et(t,e,r)}else n.current=null}function Fh(t,e,n){try{n()}catch(r){Et(t,e,r)}}var Dm=!1;function KS(t,e){if(wh=Tc,t=R1(),Ff(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,d=0,p=0,f=t,m=null;t:for(;;){for(var T;f!==n||s!==0&&f.nodeType!==3||(c=o+s),f!==i||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(T=f.firstChild)!==null;)m=f,f=T;for(;;){if(f===t)break t;if(m===n&&++d===s&&(c=o),m===i&&++p===r&&(u=o),(T=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=T}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Sh={focusedElem:t,selectionRange:n},Tc=!1,xe=e;xe!==null;)if(e=xe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,xe=t;else for(;xe!==null;){e=xe;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var N=b.memoizedProps,A=b.memoizedState,E=e.stateNode,w=E.getSnapshotBeforeUpdate(e.elementType===e.type?N:Yn(e.type,N),A);E.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(O){Et(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,xe=t;break}xe=e.return}return b=Dm,Dm=!1,b}function dl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Fh(e,n,i)}s=s.next}while(s!==r)}}function bu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function zh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function jv(t){var e=t.alternate;e!==null&&(t.alternate=null,jv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[yr],delete e[Pl],delete e[Ch],delete e[kS],delete e[TS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function kv(t){return t.tag===5||t.tag===3||t.tag===4}function Mm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||kv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Bh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ac));else if(r!==4&&(t=t.child,t!==null))for(Bh(t,e,n),t=t.sibling;t!==null;)Bh(t,e,n),t=t.sibling}function Uh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Uh(t,e,n),t=t.sibling;t!==null;)Uh(t,e,n),t=t.sibling}var qt=null,Qn=!1;function os(t,e,n){for(n=n.child;n!==null;)Tv(t,e,n),n=n.sibling}function Tv(t,e,n){if(xr&&typeof xr.onCommitFiberUnmount=="function")try{xr.onCommitFiberUnmount(gu,n)}catch{}switch(n.tag){case 5:rn||Bi(n,e);case 6:var r=qt,s=Qn;qt=null,os(t,e,n),qt=r,Qn=s,qt!==null&&(Qn?(t=qt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):qt.removeChild(n.stateNode));break;case 18:qt!==null&&(Qn?(t=qt,n=n.stateNode,t.nodeType===8?Sd(t.parentNode,n):t.nodeType===1&&Sd(t,n),kl(t)):Sd(qt,n.stateNode));break;case 4:r=qt,s=Qn,qt=n.stateNode.containerInfo,Qn=!0,os(t,e,n),qt=r,Qn=s;break;case 0:case 11:case 14:case 15:if(!rn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Fh(n,e,o),s=s.next}while(s!==r)}os(t,e,n);break;case 1:if(!rn&&(Bi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Et(n,e,c)}os(t,e,n);break;case 21:os(t,e,n);break;case 22:n.mode&1?(rn=(r=rn)||n.memoizedState!==null,os(t,e,n),rn=r):os(t,e,n);break;default:os(t,e,n)}}function Lm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new HS),e.forEach(function(r){var s=tb.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function qn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:qt=c.stateNode,Qn=!1;break e;case 3:qt=c.stateNode.containerInfo,Qn=!0;break e;case 4:qt=c.stateNode.containerInfo,Qn=!0;break e}c=c.return}if(qt===null)throw Error(ae(160));Tv(i,o,s),qt=null,Qn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Et(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Nv(e,t),e=e.sibling}function Nv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(qn(e,t),hr(t),r&4){try{dl(3,t,t.return),bu(3,t)}catch(N){Et(t,t.return,N)}try{dl(5,t,t.return)}catch(N){Et(t,t.return,N)}}break;case 1:qn(e,t),hr(t),r&512&&n!==null&&Bi(n,n.return);break;case 5:if(qn(e,t),hr(t),r&512&&n!==null&&Bi(n,n.return),t.flags&32){var s=t.stateNode;try{El(s,"")}catch(N){Et(t,t.return,N)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&X0(s,i),dh(c,o);var d=dh(c,i);for(o=0;o<u.length;o+=2){var p=u[o],f=u[o+1];p==="style"?r1(s,f):p==="dangerouslySetInnerHTML"?t1(s,f):p==="children"?El(s,f):Cf(s,p,f,d)}switch(c){case"input":oh(s,i);break;case"textarea":Z0(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var T=i.value;T!=null?Wi(s,!!i.multiple,T,!1):m!==!!i.multiple&&(i.defaultValue!=null?Wi(s,!!i.multiple,i.defaultValue,!0):Wi(s,!!i.multiple,i.multiple?[]:"",!1))}s[Pl]=i}catch(N){Et(t,t.return,N)}}break;case 6:if(qn(e,t),hr(t),r&4){if(t.stateNode===null)throw Error(ae(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(N){Et(t,t.return,N)}}break;case 3:if(qn(e,t),hr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{kl(e.containerInfo)}catch(N){Et(t,t.return,N)}break;case 4:qn(e,t),hr(t);break;case 13:qn(e,t),hr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(sp=Nt())),r&4&&Lm(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(rn=(d=rn)||p,qn(e,t),rn=d):qn(e,t),hr(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!p&&t.mode&1)for(xe=t,p=t.child;p!==null;){for(f=xe=p;xe!==null;){switch(m=xe,T=m.child,m.tag){case 0:case 11:case 14:case 15:dl(4,m,m.return);break;case 1:Bi(m,m.return);var b=m.stateNode;if(typeof b.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(N){Et(r,n,N)}}break;case 5:Bi(m,m.return);break;case 22:if(m.memoizedState!==null){zm(f);continue}}T!==null?(T.return=m,xe=T):zm(f)}p=p.sibling}e:for(p=null,f=t;;){if(f.tag===5){if(p===null){p=f;try{s=f.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=n1("display",o))}catch(N){Et(t,t.return,N)}}}else if(f.tag===6){if(p===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(N){Et(t,t.return,N)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;p===f&&(p=null),f=f.return}p===f&&(p=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:qn(e,t),hr(t),r&4&&Lm(t);break;case 21:break;default:qn(e,t),hr(t)}}function hr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(kv(n)){var r=n;break e}n=n.return}throw Error(ae(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(El(s,""),r.flags&=-33);var i=Mm(t);Uh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,c=Mm(t);Bh(t,c,o);break;default:throw Error(ae(161))}}catch(u){Et(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function GS(t,e,n){xe=t,Rv(t)}function Rv(t,e,n){for(var r=(t.mode&1)!==0;xe!==null;){var s=xe,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ya;if(!o){var c=s.alternate,u=c!==null&&c.memoizedState!==null||rn;c=Ya;var d=rn;if(Ya=o,(rn=u)&&!d)for(xe=s;xe!==null;)o=xe,u=o.child,o.tag===22&&o.memoizedState!==null?Bm(s):u!==null?(u.return=o,xe=u):Bm(s);for(;i!==null;)xe=i,Rv(i),i=i.sibling;xe=s,Ya=c,rn=d}Fm(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,xe=i):Fm(t)}}function Fm(t){for(;xe!==null;){var e=xe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:rn||bu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!rn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Yn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Sm(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Sm(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var f=p.dehydrated;f!==null&&kl(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}rn||e.flags&512&&zh(e)}catch(m){Et(e,e.return,m)}}if(e===t){xe=null;break}if(n=e.sibling,n!==null){n.return=e.return,xe=n;break}xe=e.return}}function zm(t){for(;xe!==null;){var e=xe;if(e===t){xe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,xe=n;break}xe=e.return}}function Bm(t){for(;xe!==null;){var e=xe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{bu(4,e)}catch(u){Et(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Et(e,s,u)}}var i=e.return;try{zh(e)}catch(u){Et(e,i,u)}break;case 5:var o=e.return;try{zh(e)}catch(u){Et(e,o,u)}}}catch(u){Et(e,e.return,u)}if(e===t){xe=null;break}var c=e.sibling;if(c!==null){c.return=e.return,xe=c;break}xe=e.return}}var qS=Math.ceil,Wc=Kr.ReactCurrentDispatcher,np=Kr.ReactCurrentOwner,Wn=Kr.ReactCurrentBatchConfig,tt=0,Ht=null,Rt=null,Jt=0,Tn=0,Ui=Ds(0),Ft=0,zl=null,di=0,Eu=0,rp=0,hl=null,xn=null,sp=0,io=1/0,Tr=null,Vc=!1,$h=null,_s=null,Qa=!1,fs=null,Hc=0,fl=0,Wh=null,pc=-1,gc=0;function pn(){return tt&6?Nt():pc!==-1?pc:pc=Nt()}function ws(t){return t.mode&1?tt&2&&Jt!==0?Jt&-Jt:RS.transition!==null?(gc===0&&(gc=g1()),gc):(t=lt,t!==0||(t=window.event,t=t===void 0?16:S1(t.type)),t):1}function rr(t,e,n,r){if(50<fl)throw fl=0,Wh=null,Error(ae(185));ra(t,n,r),(!(tt&2)||t!==Ht)&&(t===Ht&&(!(tt&2)&&(Eu|=n),Ft===4&&ds(t,Jt)),En(t,r),n===1&&tt===0&&!(e.mode&1)&&(io=Nt()+500,_u&&Ms()))}function En(t,e){var n=t.callbackNode;R2(t,e);var r=kc(t,t===Ht?Jt:0);if(r===0)n!==null&&Yg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Yg(n),e===1)t.tag===0?NS(Um.bind(null,t)):U1(Um.bind(null,t)),IS(function(){!(tt&6)&&Ms()}),n=null;else{switch(m1(r)){case 1:n=Nf;break;case 4:n=f1;break;case 16:n=jc;break;case 536870912:n=p1;break;default:n=jc}n=zv(n,Av.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Av(t,e){if(pc=-1,gc=0,tt&6)throw Error(ae(327));var n=t.callbackNode;if(qi()&&t.callbackNode!==n)return null;var r=kc(t,t===Ht?Jt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Kc(t,r);else{e=r;var s=tt;tt|=2;var i=Ov();(Ht!==t||Jt!==e)&&(Tr=null,io=Nt()+500,ri(t,e));do try{JS();break}catch(c){Pv(t,c)}while(!0);Wf(),Wc.current=i,tt=s,Rt!==null?e=0:(Ht=null,Jt=0,e=Ft)}if(e!==0){if(e===2&&(s=mh(t),s!==0&&(r=s,e=Vh(t,s))),e===1)throw n=zl,ri(t,0),ds(t,r),En(t,Nt()),n;if(e===6)ds(t,r);else{if(s=t.current.alternate,!(r&30)&&!YS(s)&&(e=Kc(t,r),e===2&&(i=mh(t),i!==0&&(r=i,e=Vh(t,i))),e===1))throw n=zl,ri(t,0),ds(t,r),En(t,Nt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ae(345));case 2:Gs(t,xn,Tr);break;case 3:if(ds(t,r),(r&130023424)===r&&(e=sp+500-Nt(),10<e)){if(kc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){pn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Eh(Gs.bind(null,t,xn,Tr),e);break}Gs(t,xn,Tr);break;case 4:if(ds(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-nr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Nt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*qS(r/1960))-r,10<r){t.timeoutHandle=Eh(Gs.bind(null,t,xn,Tr),r);break}Gs(t,xn,Tr);break;case 5:Gs(t,xn,Tr);break;default:throw Error(ae(329))}}}return En(t,Nt()),t.callbackNode===n?Av.bind(null,t):null}function Vh(t,e){var n=hl;return t.current.memoizedState.isDehydrated&&(ri(t,e).flags|=256),t=Kc(t,e),t!==2&&(e=xn,xn=n,e!==null&&Hh(e)),t}function Hh(t){xn===null?xn=t:xn.push.apply(xn,t)}function YS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!ir(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ds(t,e){for(e&=~rp,e&=~Eu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-nr(e),r=1<<n;t[n]=-1,e&=~r}}function Um(t){if(tt&6)throw Error(ae(327));qi();var e=kc(t,0);if(!(e&1))return En(t,Nt()),null;var n=Kc(t,e);if(t.tag!==0&&n===2){var r=mh(t);r!==0&&(e=r,n=Vh(t,r))}if(n===1)throw n=zl,ri(t,0),ds(t,e),En(t,Nt()),n;if(n===6)throw Error(ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Gs(t,xn,Tr),En(t,Nt()),null}function ip(t,e){var n=tt;tt|=1;try{return t(e)}finally{tt=n,tt===0&&(io=Nt()+500,_u&&Ms())}}function hi(t){fs!==null&&fs.tag===0&&!(tt&6)&&qi();var e=tt;tt|=1;var n=Wn.transition,r=lt;try{if(Wn.transition=null,lt=1,t)return t()}finally{lt=r,Wn.transition=n,tt=e,!(tt&6)&&Ms()}}function op(){Tn=Ui.current,yt(Ui)}function ri(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,CS(n)),Rt!==null)for(n=Rt.return;n!==null;){var r=n;switch(Bf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Pc();break;case 3:ro(),yt(Sn),yt(on),Yf();break;case 5:qf(r);break;case 4:ro();break;case 13:yt(_t);break;case 19:yt(_t);break;case 10:Vf(r.type._context);break;case 22:case 23:op()}n=n.return}if(Ht=t,Rt=t=Ss(t.current,null),Jt=Tn=e,Ft=0,zl=null,rp=Eu=di=0,xn=hl=null,Xs!==null){for(e=0;e<Xs.length;e++)if(n=Xs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Xs=null}return t}function Pv(t,e){do{var n=Rt;try{if(Wf(),dc.current=$c,Uc){for(var r=wt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Uc=!1}if(ui=0,Wt=Dt=wt=null,ul=!1,Ml=0,np.current=null,n===null||n.return===null){Ft=1,zl=e,Rt=null;break}e:{var i=t,o=n.return,c=n,u=e;if(e=Jt,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,p=c,f=p.tag;if(!(p.mode&1)&&(f===0||f===11||f===15)){var m=p.alternate;m?(p.updateQueue=m.updateQueue,p.memoizedState=m.memoizedState,p.lanes=m.lanes):(p.updateQueue=null,p.memoizedState=null)}var T=km(o);if(T!==null){T.flags&=-257,Tm(T,o,c,i,e),T.mode&1&&jm(i,d,e),e=T,u=d;var b=e.updateQueue;if(b===null){var N=new Set;N.add(u),e.updateQueue=N}else b.add(u);break e}else{if(!(e&1)){jm(i,d,e),lp();break e}u=Error(ae(426))}}else if(vt&&c.mode&1){var A=km(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),Tm(A,o,c,i,e),Uf(so(u,c));break e}}i=u=so(u,c),Ft!==4&&(Ft=2),hl===null?hl=[i]:hl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=mv(i,u,e);wm(i,E);break e;case 1:c=u;var w=i.type,_=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(_s===null||!_s.has(_)))){i.flags|=65536,e&=-e,i.lanes|=e;var O=yv(i,c,e);wm(i,O);break e}}i=i.return}while(i!==null)}Mv(n)}catch(G){e=G,Rt===n&&n!==null&&(Rt=n=n.return);continue}break}while(!0)}function Ov(){var t=Wc.current;return Wc.current=$c,t===null?$c:t}function lp(){(Ft===0||Ft===3||Ft===2)&&(Ft=4),Ht===null||!(di&268435455)&&!(Eu&268435455)||ds(Ht,Jt)}function Kc(t,e){var n=tt;tt|=2;var r=Ov();(Ht!==t||Jt!==e)&&(Tr=null,ri(t,e));do try{QS();break}catch(s){Pv(t,s)}while(!0);if(Wf(),tt=n,Wc.current=r,Rt!==null)throw Error(ae(261));return Ht=null,Jt=0,Ft}function QS(){for(;Rt!==null;)Dv(Rt)}function JS(){for(;Rt!==null&&!S2();)Dv(Rt)}function Dv(t){var e=Fv(t.alternate,t,Tn);t.memoizedProps=t.pendingProps,e===null?Mv(t):Rt=e,np.current=null}function Mv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=VS(n,e),n!==null){n.flags&=32767,Rt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ft=6,Rt=null;return}}else if(n=WS(n,e,Tn),n!==null){Rt=n;return}if(e=e.sibling,e!==null){Rt=e;return}Rt=e=t}while(e!==null);Ft===0&&(Ft=5)}function Gs(t,e,n){var r=lt,s=Wn.transition;try{Wn.transition=null,lt=1,XS(t,e,n,r)}finally{Wn.transition=s,lt=r}return null}function XS(t,e,n,r){do qi();while(fs!==null);if(tt&6)throw Error(ae(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ae(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(A2(t,i),t===Ht&&(Rt=Ht=null,Jt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Qa||(Qa=!0,zv(jc,function(){return qi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Wn.transition,Wn.transition=null;var o=lt;lt=1;var c=tt;tt|=4,np.current=null,KS(t,n),Nv(n,t),vS(Sh),Tc=!!wh,Sh=wh=null,t.current=n,GS(n),b2(),tt=c,lt=o,Wn.transition=i}else t.current=n;if(Qa&&(Qa=!1,fs=t,Hc=s),i=t.pendingLanes,i===0&&(_s=null),I2(n.stateNode),En(t,Nt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Vc)throw Vc=!1,t=$h,$h=null,t;return Hc&1&&t.tag!==0&&qi(),i=t.pendingLanes,i&1?t===Wh?fl++:(fl=0,Wh=t):fl=0,Ms(),null}function qi(){if(fs!==null){var t=m1(Hc),e=Wn.transition,n=lt;try{if(Wn.transition=null,lt=16>t?16:t,fs===null)var r=!1;else{if(t=fs,fs=null,Hc=0,tt&6)throw Error(ae(331));var s=tt;for(tt|=4,xe=t.current;xe!==null;){var i=xe,o=i.child;if(xe.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(xe=d;xe!==null;){var p=xe;switch(p.tag){case 0:case 11:case 15:dl(8,p,i)}var f=p.child;if(f!==null)f.return=p,xe=f;else for(;xe!==null;){p=xe;var m=p.sibling,T=p.return;if(jv(p),p===d){xe=null;break}if(m!==null){m.return=T,xe=m;break}xe=T}}}var b=i.alternate;if(b!==null){var N=b.child;if(N!==null){b.child=null;do{var A=N.sibling;N.sibling=null,N=A}while(N!==null)}}xe=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,xe=o;else e:for(;xe!==null;){if(i=xe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:dl(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,xe=E;break e}xe=i.return}}var w=t.current;for(xe=w;xe!==null;){o=xe;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,xe=_;else e:for(o=w;xe!==null;){if(c=xe,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:bu(9,c)}}catch(G){Et(c,c.return,G)}if(c===o){xe=null;break e}var O=c.sibling;if(O!==null){O.return=c.return,xe=O;break e}xe=c.return}}if(tt=s,Ms(),xr&&typeof xr.onPostCommitFiberRoot=="function")try{xr.onPostCommitFiberRoot(gu,t)}catch{}r=!0}return r}finally{lt=n,Wn.transition=e}}return!1}function $m(t,e,n){e=so(n,e),e=mv(t,e,1),t=xs(t,e,1),e=pn(),t!==null&&(ra(t,1,e),En(t,e))}function Et(t,e,n){if(t.tag===3)$m(t,t,n);else for(;e!==null;){if(e.tag===3){$m(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(_s===null||!_s.has(r))){t=so(n,t),t=yv(e,t,1),e=xs(e,t,1),t=pn(),e!==null&&(ra(e,1,t),En(e,t));break}}e=e.return}}function ZS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=pn(),t.pingedLanes|=t.suspendedLanes&n,Ht===t&&(Jt&n)===n&&(Ft===4||Ft===3&&(Jt&130023424)===Jt&&500>Nt()-sp?ri(t,0):rp|=n),En(t,e)}function Lv(t,e){e===0&&(t.mode&1?(e=Ba,Ba<<=1,!(Ba&130023424)&&(Ba=4194304)):e=1);var n=pn();t=Ur(t,e),t!==null&&(ra(t,e,n),En(t,n))}function eb(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Lv(t,n)}function tb(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ae(314))}r!==null&&r.delete(e),Lv(t,n)}var Fv;Fv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Sn.current)_n=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return _n=!1,$S(t,e,n);_n=!!(t.flags&131072)}else _n=!1,vt&&e.flags&1048576&&$1(e,Mc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;fc(t,e),t=e.pendingProps;var s=eo(e,on.current);Gi(e,n),s=Jf(null,e,r,t,s,n);var i=Xf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,bn(r)?(i=!0,Oc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Kf(e),s.updater=Su,e.stateNode=s,s._reactInternals=e,Rh(e,r,t,n),e=Oh(null,e,r,!0,i,n)):(e.tag=0,vt&&i&&zf(e),dn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(fc(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=rb(r),t=Yn(r,t),s){case 0:e=Ph(null,e,r,t,n);break e;case 1:e=Am(null,e,r,t,n);break e;case 11:e=Nm(null,e,r,t,n);break e;case 14:e=Rm(null,e,r,Yn(r.type,t),n);break e}throw Error(ae(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yn(r,s),Ph(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yn(r,s),Am(t,e,r,s,n);case 3:e:{if(wv(e),t===null)throw Error(ae(387));r=e.pendingProps,i=e.memoizedState,s=i.element,q1(t,e),zc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=so(Error(ae(423)),e),e=Pm(t,e,r,n,s);break e}else if(r!==s){s=so(Error(ae(424)),e),e=Pm(t,e,r,n,s);break e}else for(Nn=vs(e.stateNode.containerInfo.firstChild),Rn=e,vt=!0,Jn=null,n=K1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(to(),r===s){e=$r(t,e,n);break e}dn(t,e,r,n)}e=e.child}return e;case 5:return Y1(e),t===null&&kh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,bh(r,s)?o=null:i!==null&&bh(r,i)&&(e.flags|=32),_v(t,e),dn(t,e,o,n),e.child;case 6:return t===null&&kh(e),null;case 13:return Sv(t,e,n);case 4:return Gf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=no(e,null,r,n):dn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yn(r,s),Nm(t,e,r,s,n);case 7:return dn(t,e,e.pendingProps,n),e.child;case 8:return dn(t,e,e.pendingProps.children,n),e.child;case 12:return dn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,pt(Lc,r._currentValue),r._currentValue=o,i!==null)if(ir(i.value,o)){if(i.children===s.children&&!Sn.current){e=$r(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){o=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Mr(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?u.next=u:(u.next=p.next,p.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Th(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ae(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Th(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}dn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Gi(e,n),s=Vn(s),r=r(s),e.flags|=1,dn(t,e,r,n),e.child;case 14:return r=e.type,s=Yn(r,e.pendingProps),s=Yn(r.type,s),Rm(t,e,r,s,n);case 15:return vv(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yn(r,s),fc(t,e),e.tag=1,bn(r)?(t=!0,Oc(e)):t=!1,Gi(e,n),gv(e,r,s),Rh(e,r,s,n),Oh(null,e,r,!0,t,n);case 19:return bv(t,e,n);case 22:return xv(t,e,n)}throw Error(ae(156,e.tag))};function zv(t,e){return h1(t,e)}function nb(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Un(t,e,n,r){return new nb(t,e,n,r)}function ap(t){return t=t.prototype,!(!t||!t.isReactComponent)}function rb(t){if(typeof t=="function")return ap(t)?1:0;if(t!=null){if(t=t.$$typeof,t===jf)return 11;if(t===kf)return 14}return 2}function Ss(t,e){var n=t.alternate;return n===null?(n=Un(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function mc(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")ap(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ri:return si(n.children,s,i,e);case If:o=8,s|=8;break;case th:return t=Un(12,n,e,s|2),t.elementType=th,t.lanes=i,t;case nh:return t=Un(13,n,e,s),t.elementType=nh,t.lanes=i,t;case rh:return t=Un(19,n,e,s),t.elementType=rh,t.lanes=i,t;case Y0:return Cu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case G0:o=10;break e;case q0:o=9;break e;case jf:o=11;break e;case kf:o=14;break e;case as:o=16,r=null;break e}throw Error(ae(130,t==null?t:typeof t,""))}return e=Un(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function si(t,e,n,r){return t=Un(7,t,r,e),t.lanes=n,t}function Cu(t,e,n,r){return t=Un(22,t,r,e),t.elementType=Y0,t.lanes=n,t.stateNode={isHidden:!1},t}function Nd(t,e,n){return t=Un(6,t,null,e),t.lanes=n,t}function Rd(t,e,n){return e=Un(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function sb(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=dd(0),this.expirationTimes=dd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function cp(t,e,n,r,s,i,o,c,u){return t=new sb(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Un(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kf(i),t}function ib(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ni,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Bv(t){if(!t)return Ts;t=t._reactInternals;e:{if(xi(t)!==t||t.tag!==1)throw Error(ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(bn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ae(171))}if(t.tag===1){var n=t.type;if(bn(n))return B1(t,n,e)}return e}function Uv(t,e,n,r,s,i,o,c,u){return t=cp(n,r,!0,t,s,i,o,c,u),t.context=Bv(null),n=t.current,r=pn(),s=ws(n),i=Mr(r,s),i.callback=e??null,xs(n,i,s),t.current.lanes=s,ra(t,s,r),En(t,r),t}function Iu(t,e,n,r){var s=e.current,i=pn(),o=ws(s);return n=Bv(n),e.context===null?e.context=n:e.pendingContext=n,e=Mr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=xs(s,e,o),t!==null&&(rr(t,s,o,i),uc(t,s,o)),o}function Gc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Wm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function up(t,e){Wm(t,e),(t=t.alternate)&&Wm(t,e)}function ob(){return null}var $v=typeof reportError=="function"?reportError:function(t){console.error(t)};function dp(t){this._internalRoot=t}ju.prototype.render=dp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ae(409));Iu(t,e,null,null)};ju.prototype.unmount=dp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;hi(function(){Iu(null,t,null,null)}),e[Br]=null}};function ju(t){this._internalRoot=t}ju.prototype.unstable_scheduleHydration=function(t){if(t){var e=x1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<us.length&&e!==0&&e<us[n].priority;n++);us.splice(n,0,t),n===0&&w1(t)}};function hp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ku(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Vm(){}function lb(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Gc(o);i.call(d)}}var o=Uv(e,r,t,0,null,!1,!1,"",Vm);return t._reactRootContainer=o,t[Br]=o.current,Rl(t.nodeType===8?t.parentNode:t),hi(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=Gc(u);c.call(d)}}var u=cp(t,0,!1,null,null,!1,!1,"",Vm);return t._reactRootContainer=u,t[Br]=u.current,Rl(t.nodeType===8?t.parentNode:t),hi(function(){Iu(e,u,n,r)}),u}function Tu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var c=s;s=function(){var u=Gc(o);c.call(u)}}Iu(e,o,t,s)}else o=lb(n,e,t,s,r);return Gc(o)}y1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=rl(e.pendingLanes);n!==0&&(Rf(e,n|1),En(e,Nt()),!(tt&6)&&(io=Nt()+500,Ms()))}break;case 13:hi(function(){var r=Ur(t,1);if(r!==null){var s=pn();rr(r,t,1,s)}}),up(t,1)}};Af=function(t){if(t.tag===13){var e=Ur(t,134217728);if(e!==null){var n=pn();rr(e,t,134217728,n)}up(t,134217728)}};v1=function(t){if(t.tag===13){var e=ws(t),n=Ur(t,e);if(n!==null){var r=pn();rr(n,t,e,r)}up(t,e)}};x1=function(){return lt};_1=function(t,e){var n=lt;try{return lt=t,e()}finally{lt=n}};fh=function(t,e,n){switch(e){case"input":if(oh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=xu(r);if(!s)throw Error(ae(90));J0(r),oh(r,s)}}}break;case"textarea":Z0(t,n);break;case"select":e=n.value,e!=null&&Wi(t,!!n.multiple,e,!1)}};o1=ip;l1=hi;var ab={usingClientEntryPoint:!1,Events:[ia,Di,xu,s1,i1,ip]},Go={findFiberByHostInstance:Js,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},cb={bundleType:Go.bundleType,version:Go.version,rendererPackageName:Go.rendererPackageName,rendererConfig:Go.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Kr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=u1(t),t===null?null:t.stateNode},findFiberByHostInstance:Go.findFiberByHostInstance||ob,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ja=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ja.isDisabled&&Ja.supportsFiber)try{gu=Ja.inject(cb),xr=Ja}catch{}}Pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ab;Pn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hp(e))throw Error(ae(200));return ib(t,e,null,n)};Pn.createRoot=function(t,e){if(!hp(t))throw Error(ae(299));var n=!1,r="",s=$v;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=cp(t,1,!1,null,null,n,!1,r,s),t[Br]=e.current,Rl(t.nodeType===8?t.parentNode:t),new dp(e)};Pn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ae(188)):(t=Object.keys(t).join(","),Error(ae(268,t)));return t=u1(e),t=t===null?null:t.stateNode,t};Pn.flushSync=function(t){return hi(t)};Pn.hydrate=function(t,e,n){if(!ku(e))throw Error(ae(200));return Tu(null,t,e,!0,n)};Pn.hydrateRoot=function(t,e,n){if(!hp(t))throw Error(ae(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=$v;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Uv(e,null,t,1,n??null,s,!1,i,o),t[Br]=e.current,Rl(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new ju(e)};Pn.render=function(t,e,n){if(!ku(e))throw Error(ae(200));return Tu(null,t,e,!1,n)};Pn.unmountComponentAtNode=function(t){if(!ku(t))throw Error(ae(40));return t._reactRootContainer?(hi(function(){Tu(null,null,t,!1,function(){t._reactRootContainer=null,t[Br]=null})}),!0):!1};Pn.unstable_batchedUpdates=ip;Pn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ku(n))throw Error(ae(200));if(t==null||t._reactInternals===void 0)throw Error(ae(38));return Tu(t,e,n,!1,r)};Pn.version="18.3.1-next-f1338f8080-20240426";function Wv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Wv)}catch(t){console.error(t)}}Wv(),W0.exports=Pn;var ub=W0.exports,Hm=ub;Zd.createRoot=Hm.createRoot,Zd.hydrateRoot=Hm.hydrateRoot;/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Km="popstate";function db(t={}){function e(r,s){let{pathname:i,search:o,hash:c}=r.location;return Kh("",{pathname:i,search:o,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Bl(s)}return fb(e,n,null,t)}function St(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function or(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function hb(){return Math.random().toString(36).substring(2,10)}function Gm(t,e){return{usr:t.state,key:t.key,idx:e}}function Kh(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?_o(e):e,state:n,key:e&&e.key||r||hb()}}function Bl({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function _o(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function fb(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,c="POP",u=null,d=p();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function p(){return(o.state||{idx:null}).idx}function f(){c="POP";let A=p(),E=A==null?null:A-d;d=A,u&&u({action:c,location:N.location,delta:E})}function m(A,E){c="PUSH";let w=Kh(N.location,A,E);d=p()+1;let _=Gm(w,d),O=N.createHref(w);try{o.pushState(_,"",O)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;s.location.assign(O)}i&&u&&u({action:c,location:N.location,delta:1})}function T(A,E){c="REPLACE";let w=Kh(N.location,A,E);d=p();let _=Gm(w,d),O=N.createHref(w);o.replaceState(_,"",O),i&&u&&u({action:c,location:N.location,delta:0})}function b(A){return pb(A)}let N={get action(){return c},get location(){return t(s,o)},listen(A){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Km,f),u=A,()=>{s.removeEventListener(Km,f),u=null}},createHref(A){return e(s,A)},createURL:b,encodeLocation(A){let E=b(A);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:m,replace:T,go(A){return o.go(A)}};return N}function pb(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),St(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Bl(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function Vv(t,e,n="/"){return gb(t,e,n,!1)}function gb(t,e,n,r){let s=typeof e=="string"?_o(e):e,i=Wr(s.pathname||"/",n);if(i==null)return null;let o=Hv(t);mb(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=jb(i);c=Cb(o[u],d,r)}return c}function Hv(t,e=[],n=[],r="",s=!1){let i=(o,c,u=s,d)=>{let p={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(r)&&u)return;St(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length)}let f=Lr([r,p.relativePath]),m=n.concat(p);o.children&&o.children.length>0&&(St(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),Hv(o.children,e,m,f,u)),!(o.path==null&&!o.index)&&e.push({path:f,score:bb(f,o.index),routesMeta:m})};return t.forEach((o,c)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))i(o,c);else for(let d of Kv(o.path))i(o,c,!0,d)}),e}function Kv(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Kv(r.join("/")),c=[];return c.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function mb(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Eb(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var yb=/^:[\w-]+$/,vb=3,xb=2,_b=1,wb=10,Sb=-2,qm=t=>t==="*";function bb(t,e){let n=t.split("/"),r=n.length;return n.some(qm)&&(r+=Sb),e&&(r+=xb),n.filter(s=>!qm(s)).reduce((s,i)=>s+(yb.test(i)?vb:i===""?_b:wb),r)}function Eb(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Cb(t,e,n=!1){let{routesMeta:r}=t,s={},i="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,p=i==="/"?e:e.slice(i.length)||"/",f=qc({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},p),m=u.route;if(!f&&d&&n&&!r[r.length-1].route.index&&(f=qc({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},p)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:Lr([i,f.pathname]),pathnameBase:Ab(Lr([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=Lr([i,f.pathnameBase]))}return o}function qc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Ib(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((d,{paramName:p,isOptional:f},m)=>{if(p==="*"){let b=c[m]||"";o=i.slice(0,i.length-b.length).replace(/(.)\/+$/,"$1")}const T=c[m];return f&&!T?d[p]=void 0:d[p]=(T||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function Ib(t,e=!1,n=!0){or(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function jb(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return or(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Wr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var kb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Tb=t=>kb.test(t);function Nb(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?_o(t):t,i;if(n)if(Tb(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),or(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${n}`)}n.startsWith("/")?i=Ym(n.substring(1),"/"):i=Ym(n,e)}else i=e;return{pathname:i,search:Pb(r),hash:Ob(s)}}function Ym(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Ad(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Rb(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Gv(t){let e=Rb(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function qv(t,e,n,r=!1){let s;typeof t=="string"?s=_o(t):(s={...t},St(!s.pathname||!s.pathname.includes("?"),Ad("?","pathname","search",s)),St(!s.pathname||!s.pathname.includes("#"),Ad("#","pathname","hash",s)),St(!s.search||!s.search.includes("#"),Ad("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,c;if(o==null)c=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}c=f>=0?e[f]:"/"}let u=Nb(s,c),d=o&&o!=="/"&&o.endsWith("/"),p=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||p)&&(u.pathname+="/"),u}var Lr=t=>t.join("/").replace(/\/\/+/g,"/"),Ab=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Pb=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Ob=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Db(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function Mb(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Yv=["POST","PUT","PATCH","DELETE"];new Set(Yv);var Lb=["GET",...Yv];new Set(Lb);var wo=y.createContext(null);wo.displayName="DataRouter";var Nu=y.createContext(null);Nu.displayName="DataRouterState";y.createContext(!1);var Qv=y.createContext({isTransitioning:!1});Qv.displayName="ViewTransition";var Fb=y.createContext(new Map);Fb.displayName="Fetchers";var zb=y.createContext(null);zb.displayName="Await";var lr=y.createContext(null);lr.displayName="Navigation";var la=y.createContext(null);la.displayName="Location";var Gr=y.createContext({outlet:null,matches:[],isDataRoute:!1});Gr.displayName="Route";var fp=y.createContext(null);fp.displayName="RouteError";function Bb(t,{relative:e}={}){St(aa(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=y.useContext(lr),{hash:s,pathname:i,search:o}=ca(t,{relative:e}),c=i;return n!=="/"&&(c=i==="/"?n:Lr([n,i])),r.createHref({pathname:c,search:o,hash:s})}function aa(){return y.useContext(la)!=null}function Ls(){return St(aa(),"useLocation() may be used only in the context of a <Router> component."),y.useContext(la).location}var Jv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Xv(t){y.useContext(lr).static||y.useLayoutEffect(t)}function Dn(){let{isDataRoute:t}=y.useContext(Gr);return t?Zb():Ub()}function Ub(){St(aa(),"useNavigate() may be used only in the context of a <Router> component.");let t=y.useContext(wo),{basename:e,navigator:n}=y.useContext(lr),{matches:r}=y.useContext(Gr),{pathname:s}=Ls(),i=JSON.stringify(Gv(r)),o=y.useRef(!1);return Xv(()=>{o.current=!0}),y.useCallback((u,d={})=>{if(or(o.current,Jv),!o.current)return;if(typeof u=="number"){n.go(u);return}let p=qv(u,JSON.parse(i),s,d.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Lr([e,p.pathname])),(d.replace?n.replace:n.push)(p,d.state,d)},[e,n,i,s,t])}y.createContext(null);function ca(t,{relative:e}={}){let{matches:n}=y.useContext(Gr),{pathname:r}=Ls(),s=JSON.stringify(Gv(n));return y.useMemo(()=>qv(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function $b(t,e){return Zv(t,e)}function Zv(t,e,n,r,s){var w;St(aa(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=y.useContext(lr),{matches:o}=y.useContext(Gr),c=o[o.length-1],u=c?c.params:{},d=c?c.pathname:"/",p=c?c.pathnameBase:"/",f=c&&c.route;{let _=f&&f.path||"";ex(d,!f||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let m=Ls(),T;if(e){let _=typeof e=="string"?_o(e):e;St(p==="/"||((w=_.pathname)==null?void 0:w.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${_.pathname}" was given in the \`location\` prop.`),T=_}else T=m;let b=T.pathname||"/",N=b;if(p!=="/"){let _=p.replace(/^\//,"").split("/");N="/"+b.replace(/^\//,"").split("/").slice(_.length).join("/")}let A=Vv(t,{pathname:N});or(f||A!=null,`No routes matched location "${T.pathname}${T.search}${T.hash}" `),or(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=Gb(A&&A.map(_=>Object.assign({},_,{params:Object.assign({},u,_.params),pathname:Lr([p,i.encodeLocation?i.encodeLocation(_.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?p:Lr([p,i.encodeLocation?i.encodeLocation(_.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathnameBase])})),o,n,r,s);return e&&E?y.createElement(la.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...T},navigationType:"POP"}},E):E}function Wb(){let t=Xb(),e=Db(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=y.createElement(y.Fragment,null,y.createElement("p",null," Hey developer "),y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",y.createElement("code",{style:i},"ErrorBoundary")," or"," ",y.createElement("code",{style:i},"errorElement")," prop on your route.")),y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},e),n?y.createElement("pre",{style:s},n):null,o)}var Vb=y.createElement(Wb,null),Hb=class extends y.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?y.createElement(Gr.Provider,{value:this.props.routeContext},y.createElement(fp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Kb({routeContext:t,match:e,children:n}){let r=y.useContext(wo);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),y.createElement(Gr.Provider,{value:t},n)}function Gb(t,e=[],n=null,r=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=n==null?void 0:n.errors;if(o!=null){let p=i.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);St(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,p+1))}let c=!1,u=-1;if(n)for(let p=0;p<i.length;p++){let f=i[p];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=p),f.route.id){let{loaderData:m,errors:T}=n,b=f.route.loader&&!m.hasOwnProperty(f.route.id)&&(!T||T[f.route.id]===void 0);if(f.route.lazy||b){c=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}let d=n&&r?(p,f)=>{var m,T;r(p,{location:n.location,params:((T=(m=n.matches)==null?void 0:m[0])==null?void 0:T.params)??{},unstable_pattern:Mb(n.matches),errorInfo:f})}:void 0;return i.reduceRight((p,f,m)=>{let T,b=!1,N=null,A=null;n&&(T=o&&f.route.id?o[f.route.id]:void 0,N=f.route.errorElement||Vb,c&&(u<0&&m===0?(ex("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,A=null):u===m&&(b=!0,A=f.route.hydrateFallbackElement||null)));let E=e.concat(i.slice(0,m+1)),w=()=>{let _;return T?_=N:b?_=A:f.route.Component?_=y.createElement(f.route.Component,null):f.route.element?_=f.route.element:_=p,y.createElement(Kb,{match:f,routeContext:{outlet:p,matches:E,isDataRoute:n!=null},children:_})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?y.createElement(Hb,{location:n.location,revalidation:n.revalidation,component:N,error:T,children:w(),routeContext:{outlet:null,matches:E,isDataRoute:!0},onError:d}):w()},null)}function pp(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qb(t){let e=y.useContext(wo);return St(e,pp(t)),e}function Yb(t){let e=y.useContext(Nu);return St(e,pp(t)),e}function Qb(t){let e=y.useContext(Gr);return St(e,pp(t)),e}function gp(t){let e=Qb(t),n=e.matches[e.matches.length-1];return St(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function Jb(){return gp("useRouteId")}function Xb(){var r;let t=y.useContext(fp),e=Yb("useRouteError"),n=gp("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function Zb(){let{router:t}=qb("useNavigate"),e=gp("useNavigate"),n=y.useRef(!1);return Xv(()=>{n.current=!0}),y.useCallback(async(s,i={})=>{or(n.current,Jv),n.current&&(typeof s=="number"?await t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var Qm={};function ex(t,e,n){!e&&!Qm[t]&&(Qm[t]=!0,or(!1,n))}y.memo(eE);function eE({routes:t,future:e,state:n,unstable_onError:r}){return Zv(t,void 0,n,r,e)}function vn(t){St(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function tE({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:i=!1,unstable_useTransitions:o}){St(!aa(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),u=y.useMemo(()=>({basename:c,navigator:s,static:i,unstable_useTransitions:o,future:{}}),[c,s,i,o]);typeof n=="string"&&(n=_o(n));let{pathname:d="/",search:p="",hash:f="",state:m=null,key:T="default"}=n,b=y.useMemo(()=>{let N=Wr(d,c);return N==null?null:{location:{pathname:N,search:p,hash:f,state:m,key:T},navigationType:r}},[c,d,p,f,m,T,r]);return or(b!=null,`<Router basename="${c}"> is not able to match the URL "${d}${p}${f}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:y.createElement(lr.Provider,{value:u},y.createElement(la.Provider,{children:e,value:b}))}function nE({children:t,location:e}){return $b(Gh(t),e)}function Gh(t,e=[]){let n=[];return y.Children.forEach(t,(r,s)=>{if(!y.isValidElement(r))return;let i=[...e,s];if(r.type===y.Fragment){n.push.apply(n,Gh(r.props.children,i));return}St(r.type===vn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),St(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Gh(r.props.children,i)),n.push(o)}),n}var yc="get",vc="application/x-www-form-urlencoded";function Ru(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function rE(t){return Ru(t)&&t.tagName.toLowerCase()==="button"}function sE(t){return Ru(t)&&t.tagName.toLowerCase()==="form"}function iE(t){return Ru(t)&&t.tagName.toLowerCase()==="input"}function oE(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function lE(t,e){return t.button===0&&(!e||e==="_self")&&!oE(t)}var Xa=null;function aE(){if(Xa===null)try{new FormData(document.createElement("form"),0),Xa=!1}catch{Xa=!0}return Xa}var cE=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Pd(t){return t!=null&&!cE.has(t)?(or(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${vc}"`),null):t}function uE(t,e){let n,r,s,i,o;if(sE(t)){let c=t.getAttribute("action");r=c?Wr(c,e):null,n=t.getAttribute("method")||yc,s=Pd(t.getAttribute("enctype"))||vc,i=new FormData(t)}else if(rE(t)||iE(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||c.getAttribute("action");if(r=u?Wr(u,e):null,n=t.getAttribute("formmethod")||c.getAttribute("method")||yc,s=Pd(t.getAttribute("formenctype"))||Pd(c.getAttribute("enctype"))||vc,i=new FormData(c,t),!aE()){let{name:d,type:p,value:f}=t;if(p==="image"){let m=d?`${d}.`:"";i.append(`${m}x`,"0"),i.append(`${m}y`,"0")}else d&&i.append(d,f)}}else{if(Ru(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=yc,r=null,s=vc,o=t}return i&&s==="text/plain"&&(o=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function mp(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function dE(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Wr(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function hE(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function fE(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function pE(t,e,n){let r=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let o=await hE(i,n);return o.links?o.links():[]}return[]}));return vE(r.flat(1).filter(fE).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Jm(t,e,n,r,s,i){let o=(u,d)=>n[d]?u.route.id!==n[d].route.id:!0,c=(u,d)=>{var p;return n[d].pathname!==u.pathname||((p=n[d].route.path)==null?void 0:p.endsWith("*"))&&n[d].params["*"]!==u.params["*"]};return i==="assets"?e.filter((u,d)=>o(u,d)||c(u,d)):i==="data"?e.filter((u,d)=>{var f;let p=r.routes[u.route.id];if(!p||!p.hasLoader)return!1;if(o(u,d)||c(u,d))return!0;if(u.route.shouldRevalidate){let m=u.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function gE(t,e,{includeHydrateFallback:n}={}){return mE(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function mE(t){return[...new Set(t)]}function yE(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function vE(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let i=JSON.stringify(yE(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}function tx(){let t=y.useContext(wo);return mp(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function xE(){let t=y.useContext(Nu);return mp(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var yp=y.createContext(void 0);yp.displayName="FrameworkContext";function nx(){let t=y.useContext(yp);return mp(t,"You must render this element inside a <HydratedRouter> element"),t}function _E(t,e){let n=y.useContext(yp),[r,s]=y.useState(!1),[i,o]=y.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:d,onMouseLeave:p,onTouchStart:f}=e,m=y.useRef(null);y.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let N=E=>{E.forEach(w=>{o(w.isIntersecting)})},A=new IntersectionObserver(N,{threshold:.5});return m.current&&A.observe(m.current),()=>{A.disconnect()}}},[t]),y.useEffect(()=>{if(r){let N=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(N)}}},[r]);let T=()=>{s(!0)},b=()=>{s(!1),o(!1)};return n?t!=="intent"?[i,m,{}]:[i,m,{onFocus:qo(c,T),onBlur:qo(u,b),onMouseEnter:qo(d,T),onMouseLeave:qo(p,b),onTouchStart:qo(f,T)}]:[!1,m,{}]}function qo(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function wE({page:t,...e}){let{router:n}=tx(),r=y.useMemo(()=>Vv(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?y.createElement(bE,{page:t,matches:r,...e}):null}function SE(t){let{manifest:e,routeModules:n}=nx(),[r,s]=y.useState([]);return y.useEffect(()=>{let i=!1;return pE(t,e,n).then(o=>{i||s(o)}),()=>{i=!0}},[t,e,n]),r}function bE({page:t,matches:e,...n}){let r=Ls(),{manifest:s,routeModules:i}=nx(),{basename:o}=tx(),{loaderData:c,matches:u}=xE(),d=y.useMemo(()=>Jm(t,e,u,s,r,"data"),[t,e,u,s,r]),p=y.useMemo(()=>Jm(t,e,u,s,r,"assets"),[t,e,u,s,r]),f=y.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let b=new Set,N=!1;if(e.forEach(E=>{var _;let w=s.routes[E.route.id];!w||!w.hasLoader||(!d.some(O=>O.route.id===E.route.id)&&E.route.id in c&&((_=i[E.route.id])!=null&&_.shouldRevalidate)||w.hasClientLoader?N=!0:b.add(E.route.id))}),b.size===0)return[];let A=dE(t,o,"data");return N&&b.size>0&&A.searchParams.set("_routes",e.filter(E=>b.has(E.route.id)).map(E=>E.route.id).join(",")),[A.pathname+A.search]},[o,c,r,s,d,e,t,i]),m=y.useMemo(()=>gE(p,s),[p,s]),T=SE(p);return y.createElement(y.Fragment,null,f.map(b=>y.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...n})),m.map(b=>y.createElement("link",{key:b,rel:"modulepreload",href:b,...n})),T.map(({key:b,link:N})=>y.createElement("link",{key:b,nonce:n.nonce,...N})))}function EE(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var rx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{rx&&(window.__reactRouterVersion="7.10.1")}catch{}function CE({basename:t,children:e,unstable_useTransitions:n,window:r}){let s=y.useRef();s.current==null&&(s.current=db({window:r,v5Compat:!0}));let i=s.current,[o,c]=y.useState({action:i.action,location:i.location}),u=y.useCallback(d=>{n===!1?c(d):y.startTransition(()=>c(d))},[n]);return y.useLayoutEffect(()=>i.listen(u),[i,u]),y.createElement(tE,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:i,unstable_useTransitions:n===!0})}var sx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,me=y.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:o,state:c,target:u,to:d,preventScrollReset:p,viewTransition:f,...m},T){let{basename:b,unstable_useTransitions:N}=y.useContext(lr),A=typeof d=="string"&&sx.test(d),E,w=!1;if(typeof d=="string"&&A&&(E=d,rx))try{let k=new URL(window.location.href),x=d.startsWith("//")?new URL(k.protocol+d):new URL(d),R=Wr(x.pathname,b);x.origin===k.origin&&R!=null?d=R+x.search+x.hash:w=!0}catch{or(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let _=Bb(d,{relative:s}),[O,G,X]=_E(r,m),j=TE(d,{replace:o,state:c,target:u,preventScrollReset:p,relative:s,viewTransition:f,unstable_useTransitions:N});function v(k){e&&e(k),k.defaultPrevented||j(k)}let I=y.createElement("a",{...m,...X,href:E||_,onClick:w||i?e:v,ref:EE(T,G),target:u,"data-discover":!A&&n==="render"?"true":void 0});return O&&!A?y.createElement(y.Fragment,null,I,y.createElement(wE,{page:_})):I});me.displayName="Link";var IE=y.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:o,viewTransition:c,children:u,...d},p){let f=ca(o,{relative:d.relative}),m=Ls(),T=y.useContext(Nu),{navigator:b,basename:N}=y.useContext(lr),A=T!=null&&OE(f)&&c===!0,E=b.encodeLocation?b.encodeLocation(f).pathname:f.pathname,w=m.pathname,_=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;n||(w=w.toLowerCase(),_=_?_.toLowerCase():null,E=E.toLowerCase()),_&&N&&(_=Wr(_,N)||_);const O=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let G=w===E||!s&&w.startsWith(E)&&w.charAt(O)==="/",X=_!=null&&(_===E||!s&&_.startsWith(E)&&_.charAt(E.length)==="/"),j={isActive:G,isPending:X,isTransitioning:A},v=G?e:void 0,I;typeof r=="function"?I=r(j):I=[r,G?"active":null,X?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let k=typeof i=="function"?i(j):i;return y.createElement(me,{...d,"aria-current":v,className:I,ref:p,style:k,to:o,viewTransition:c},typeof u=="function"?u(j):u)});IE.displayName="NavLink";var jE=y.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:i,method:o=yc,action:c,onSubmit:u,relative:d,preventScrollReset:p,viewTransition:f,...m},T)=>{let{unstable_useTransitions:b}=y.useContext(lr),N=AE(),A=PE(c,{relative:d}),E=o.toLowerCase()==="get"?"get":"post",w=typeof c=="string"&&sx.test(c),_=O=>{if(u&&u(O),O.defaultPrevented)return;O.preventDefault();let G=O.nativeEvent.submitter,X=(G==null?void 0:G.getAttribute("formmethod"))||o,j=()=>N(G||O.currentTarget,{fetcherKey:e,method:X,navigate:n,replace:s,state:i,relative:d,preventScrollReset:p,viewTransition:f});b&&n!==!1?y.startTransition(()=>j()):j()};return y.createElement("form",{ref:T,method:E,action:A,onSubmit:r?u:_,...m,"data-discover":!w&&t==="render"?"true":void 0})});jE.displayName="Form";function kE(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ix(t){let e=y.useContext(wo);return St(e,kE(t)),e}function TE(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:o,unstable_useTransitions:c}={}){let u=Dn(),d=Ls(),p=ca(t,{relative:i});return y.useCallback(f=>{if(lE(f,e)){f.preventDefault();let m=n!==void 0?n:Bl(d)===Bl(p),T=()=>u(t,{replace:m,state:r,preventScrollReset:s,relative:i,viewTransition:o});c?y.startTransition(()=>T()):T()}},[d,u,p,n,r,e,t,s,i,o,c])}var NE=0,RE=()=>`__${String(++NE)}__`;function AE(){let{router:t}=ix("useSubmit"),{basename:e}=y.useContext(lr),n=Jb(),r=t.fetch,s=t.navigate;return y.useCallback(async(i,o={})=>{let{action:c,method:u,encType:d,formData:p,body:f}=uE(i,e);if(o.navigate===!1){let m=o.fetcherKey||RE();await r(m,n,o.action||c,{preventScrollReset:o.preventScrollReset,formData:p,body:f,formMethod:o.method||u,formEncType:o.encType||d,flushSync:o.flushSync})}else await s(o.action||c,{preventScrollReset:o.preventScrollReset,formData:p,body:f,formMethod:o.method||u,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,s,e,n])}function PE(t,{relative:e}={}){let{basename:n}=y.useContext(lr),r=y.useContext(Gr);St(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...ca(t||".",{relative:e})},o=Ls();if(t==null){i.search=o.search;let c=new URLSearchParams(i.search),u=c.getAll("index");if(u.some(p=>p==="")){c.delete("index"),u.filter(f=>f).forEach(f=>c.append("index",f));let p=c.toString();i.search=p?`?${p}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:Lr([n,i.pathname])),Bl(i)}function OE(t,{relative:e}={}){let n=y.useContext(Qv);St(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=ix("useViewTransitionState"),s=ca(t,{relative:e});if(!n.isTransitioning)return!1;let i=Wr(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Wr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return qc(s.pathname,o)!=null||qc(s.pathname,i)!=null}function ox(t,e){return function(){return t.apply(e,arguments)}}const{toString:DE}=Object.prototype,{getPrototypeOf:vp}=Object,{iterator:Au,toStringTag:lx}=Symbol,Pu=(t=>e=>{const n=DE.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),ar=t=>(t=t.toLowerCase(),e=>Pu(e)===t),Ou=t=>e=>typeof e===t,{isArray:So}=Array,oo=Ou("undefined");function ua(t){return t!==null&&!oo(t)&&t.constructor!==null&&!oo(t.constructor)&&Cn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const ax=ar("ArrayBuffer");function ME(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&ax(t.buffer),e}const LE=Ou("string"),Cn=Ou("function"),cx=Ou("number"),da=t=>t!==null&&typeof t=="object",FE=t=>t===!0||t===!1,xc=t=>{if(Pu(t)!=="object")return!1;const e=vp(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(lx in t)&&!(Au in t)},zE=t=>{if(!da(t)||ua(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},BE=ar("Date"),UE=ar("File"),$E=ar("Blob"),WE=ar("FileList"),VE=t=>da(t)&&Cn(t.pipe),HE=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Cn(t.append)&&((e=Pu(t))==="formdata"||e==="object"&&Cn(t.toString)&&t.toString()==="[object FormData]"))},KE=ar("URLSearchParams"),[GE,qE,YE,QE]=["ReadableStream","Request","Response","Headers"].map(ar),JE=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ha(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),So(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{if(ua(t))return;const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let c;for(r=0;r<o;r++)c=i[r],e.call(null,t[c],c,t)}}function ux(t,e){if(ua(t))return null;e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const ei=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,dx=t=>!oo(t)&&t!==ei;function qh(){const{caseless:t,skipUndefined:e}=dx(this)&&this||{},n={},r=(s,i)=>{const o=t&&ux(n,i)||i;xc(n[o])&&xc(s)?n[o]=qh(n[o],s):xc(s)?n[o]=qh({},s):So(s)?n[o]=s.slice():(!e||!oo(s))&&(n[o]=s)};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&ha(arguments[s],r);return n}const XE=(t,e,n,{allOwnKeys:r}={})=>(ha(e,(s,i)=>{n&&Cn(s)?t[i]=ox(s,n):t[i]=s},{allOwnKeys:r}),t),ZE=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),eC=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},tC=(t,e,n,r)=>{let s,i,o;const c={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!r||r(o,t,e))&&!c[o]&&(e[o]=t[o],c[o]=!0);t=n!==!1&&vp(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},nC=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},rC=t=>{if(!t)return null;if(So(t))return t;let e=t.length;if(!cx(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},sC=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&vp(Uint8Array)),iC=(t,e)=>{const r=(t&&t[Au]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},oC=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},lC=ar("HTMLFormElement"),aC=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),Xm=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),cC=ar("RegExp"),hx=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};ha(n,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(r[i]=o||s)}),Object.defineProperties(t,r)},uC=t=>{hx(t,(e,n)=>{if(Cn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Cn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},dC=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return So(t)?r(t):r(String(t).split(e)),n},hC=()=>{},fC=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function pC(t){return!!(t&&Cn(t.append)&&t[lx]==="FormData"&&t[Au])}const gC=t=>{const e=new Array(10),n=(r,s)=>{if(da(r)){if(e.indexOf(r)>=0)return;if(ua(r))return r;if(!("toJSON"in r)){e[s]=r;const i=So(r)?[]:{};return ha(r,(o,c)=>{const u=n(o,s+1);!oo(u)&&(i[c]=u)}),e[s]=void 0,i}}return r};return n(t,0)},mC=ar("AsyncFunction"),yC=t=>t&&(da(t)||Cn(t))&&Cn(t.then)&&Cn(t.catch),fx=((t,e)=>t?setImmediate:e?((n,r)=>(ei.addEventListener("message",({source:s,data:i})=>{s===ei&&i===n&&r.length&&r.shift()()},!1),s=>{r.push(s),ei.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Cn(ei.postMessage)),vC=typeof queueMicrotask<"u"?queueMicrotask.bind(ei):typeof process<"u"&&process.nextTick||fx,xC=t=>t!=null&&Cn(t[Au]),$={isArray:So,isArrayBuffer:ax,isBuffer:ua,isFormData:HE,isArrayBufferView:ME,isString:LE,isNumber:cx,isBoolean:FE,isObject:da,isPlainObject:xc,isEmptyObject:zE,isReadableStream:GE,isRequest:qE,isResponse:YE,isHeaders:QE,isUndefined:oo,isDate:BE,isFile:UE,isBlob:$E,isRegExp:cC,isFunction:Cn,isStream:VE,isURLSearchParams:KE,isTypedArray:sC,isFileList:WE,forEach:ha,merge:qh,extend:XE,trim:JE,stripBOM:ZE,inherits:eC,toFlatObject:tC,kindOf:Pu,kindOfTest:ar,endsWith:nC,toArray:rC,forEachEntry:iC,matchAll:oC,isHTMLForm:lC,hasOwnProperty:Xm,hasOwnProp:Xm,reduceDescriptors:hx,freezeMethods:uC,toObjectSet:dC,toCamelCase:aC,noop:hC,toFiniteNumber:fC,findKey:ux,global:ei,isContextDefined:dx,isSpecCompliantForm:pC,toJSONObject:gC,isAsyncFn:mC,isThenable:yC,setImmediate:fx,asap:vC,isIterable:xC};function Me(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}$.inherits(Me,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:$.toJSONObject(this.config),code:this.code,status:this.status}}});const px=Me.prototype,gx={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{gx[t]={value:t}});Object.defineProperties(Me,gx);Object.defineProperty(px,"isAxiosError",{value:!0});Me.from=(t,e,n,r,s,i)=>{const o=Object.create(px);$.toFlatObject(t,o,function(p){return p!==Error.prototype},d=>d!=="isAxiosError");const c=t&&t.message?t.message:"Error",u=e==null&&t?t.code:e;return Me.call(o,c,u,n,r,s),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",i&&Object.assign(o,i),o};const _C=null;function Yh(t){return $.isPlainObject(t)||$.isArray(t)}function mx(t){return $.endsWith(t,"[]")?t.slice(0,-2):t}function Zm(t,e,n){return t?t.concat(e).map(function(s,i){return s=mx(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function wC(t){return $.isArray(t)&&!t.some(Yh)}const SC=$.toFlatObject($,{},null,function(e){return/^is[A-Z]/.test(e)});function Du(t,e,n){if(!$.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=$.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(N,A){return!$.isUndefined(A[N])});const r=n.metaTokens,s=n.visitor||p,i=n.dots,o=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&$.isSpecCompliantForm(e);if(!$.isFunction(s))throw new TypeError("visitor must be a function");function d(b){if(b===null)return"";if($.isDate(b))return b.toISOString();if($.isBoolean(b))return b.toString();if(!u&&$.isBlob(b))throw new Me("Blob is not supported. Use a Buffer instead.");return $.isArrayBuffer(b)||$.isTypedArray(b)?u&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function p(b,N,A){let E=b;if(b&&!A&&typeof b=="object"){if($.endsWith(N,"{}"))N=r?N:N.slice(0,-2),b=JSON.stringify(b);else if($.isArray(b)&&wC(b)||($.isFileList(b)||$.endsWith(N,"[]"))&&(E=$.toArray(b)))return N=mx(N),E.forEach(function(_,O){!($.isUndefined(_)||_===null)&&e.append(o===!0?Zm([N],O,i):o===null?N:N+"[]",d(_))}),!1}return Yh(b)?!0:(e.append(Zm(A,N,i),d(b)),!1)}const f=[],m=Object.assign(SC,{defaultVisitor:p,convertValue:d,isVisitable:Yh});function T(b,N){if(!$.isUndefined(b)){if(f.indexOf(b)!==-1)throw Error("Circular reference detected in "+N.join("."));f.push(b),$.forEach(b,function(E,w){(!($.isUndefined(E)||E===null)&&s.call(e,E,$.isString(w)?w.trim():w,N,m))===!0&&T(E,N?N.concat(w):[w])}),f.pop()}}if(!$.isObject(t))throw new TypeError("data must be an object");return T(t),e}function ey(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function xp(t,e){this._pairs=[],t&&Du(t,this,e)}const yx=xp.prototype;yx.append=function(e,n){this._pairs.push([e,n])};yx.toString=function(e){const n=e?function(r){return e.call(this,r,ey)}:ey;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function bC(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function vx(t,e,n){if(!e)return t;const r=n&&n.encode||bC;$.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(s?i=s(e,n):i=$.isURLSearchParams(e)?e.toString():new xp(e,n).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class ty{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){$.forEach(this.handlers,function(r){r!==null&&e(r)})}}const xx={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},EC=typeof URLSearchParams<"u"?URLSearchParams:xp,CC=typeof FormData<"u"?FormData:null,IC=typeof Blob<"u"?Blob:null,jC={isBrowser:!0,classes:{URLSearchParams:EC,FormData:CC,Blob:IC},protocols:["http","https","file","blob","url","data"]},_p=typeof window<"u"&&typeof document<"u",Qh=typeof navigator=="object"&&navigator||void 0,kC=_p&&(!Qh||["ReactNative","NativeScript","NS"].indexOf(Qh.product)<0),TC=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",NC=_p&&window.location.href||"http://localhost",RC=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:_p,hasStandardBrowserEnv:kC,hasStandardBrowserWebWorkerEnv:TC,navigator:Qh,origin:NC},Symbol.toStringTag,{value:"Module"})),sn={...RC,...jC};function AC(t,e){return Du(t,new sn.classes.URLSearchParams,{visitor:function(n,r,s,i){return sn.isNode&&$.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function PC(t){return $.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function OC(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function _x(t){function e(n,r,s,i){let o=n[i++];if(o==="__proto__")return!0;const c=Number.isFinite(+o),u=i>=n.length;return o=!o&&$.isArray(s)?s.length:o,u?($.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!c):((!s[o]||!$.isObject(s[o]))&&(s[o]=[]),e(n,r,s[o],i)&&$.isArray(s[o])&&(s[o]=OC(s[o])),!c)}if($.isFormData(t)&&$.isFunction(t.entries)){const n={};return $.forEachEntry(t,(r,s)=>{e(PC(r),s,n,0)}),n}return null}function DC(t,e,n){if($.isString(t))try{return(e||JSON.parse)(t),$.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const fa={transitional:xx,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=$.isObject(e);if(i&&$.isHTMLForm(e)&&(e=new FormData(e)),$.isFormData(e))return s?JSON.stringify(_x(e)):e;if($.isArrayBuffer(e)||$.isBuffer(e)||$.isStream(e)||$.isFile(e)||$.isBlob(e)||$.isReadableStream(e))return e;if($.isArrayBufferView(e))return e.buffer;if($.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let c;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return AC(e,this.formSerializer).toString();if((c=$.isFileList(e))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Du(c?{"files[]":e}:e,u&&new u,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),DC(e)):e}],transformResponse:[function(e){const n=this.transitional||fa.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if($.isResponse(e)||$.isReadableStream(e))return e;if(e&&$.isString(e)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e,this.parseReviver)}catch(c){if(o)throw c.name==="SyntaxError"?Me.from(c,Me.ERR_BAD_RESPONSE,this,null,this.response):c}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:sn.classes.FormData,Blob:sn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};$.forEach(["delete","get","head","post","put","patch"],t=>{fa.headers[t]={}});const MC=$.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),LC=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||e[n]&&MC[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},ny=Symbol("internals");function Yo(t){return t&&String(t).trim().toLowerCase()}function _c(t){return t===!1||t==null?t:$.isArray(t)?t.map(_c):String(t)}function FC(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const zC=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Od(t,e,n,r,s){if($.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!$.isString(e)){if($.isString(r))return e.indexOf(r)!==-1;if($.isRegExp(r))return r.test(e)}}function BC(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function UC(t,e){const n=$.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,o){return this[r].call(this,e,s,i,o)},configurable:!0})})}let In=class{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(c,u,d){const p=Yo(u);if(!p)throw new Error("header name must be a non-empty string");const f=$.findKey(s,p);(!f||s[f]===void 0||d===!0||d===void 0&&s[f]!==!1)&&(s[f||u]=_c(c))}const o=(c,u)=>$.forEach(c,(d,p)=>i(d,p,u));if($.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if($.isString(e)&&(e=e.trim())&&!zC(e))o(LC(e),n);else if($.isObject(e)&&$.isIterable(e)){let c={},u,d;for(const p of e){if(!$.isArray(p))throw TypeError("Object iterator must return a key-value pair");c[d=p[0]]=(u=c[d])?$.isArray(u)?[...u,p[1]]:[u,p[1]]:p[1]}o(c,n)}else e!=null&&i(n,e,r);return this}get(e,n){if(e=Yo(e),e){const r=$.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return FC(s);if($.isFunction(n))return n.call(this,s,r);if($.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Yo(e),e){const r=$.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Od(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(o){if(o=Yo(o),o){const c=$.findKey(r,o);c&&(!n||Od(r,r[c],c,n))&&(delete r[c],s=!0)}}return $.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||Od(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return $.forEach(this,(s,i)=>{const o=$.findKey(r,i);if(o){n[o]=_c(s),delete n[i];return}const c=e?BC(i):String(i).trim();c!==i&&delete n[i],n[c]=_c(s),r[c]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return $.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&$.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[ny]=this[ny]={accessors:{}}).accessors,s=this.prototype;function i(o){const c=Yo(o);r[c]||(UC(s,o),r[c]=!0)}return $.isArray(e)?e.forEach(i):i(e),this}};In.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);$.reduceDescriptors(In.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});$.freezeMethods(In);function Dd(t,e){const n=this||fa,r=e||n,s=In.from(r.headers);let i=r.data;return $.forEach(t,function(c){i=c.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function wx(t){return!!(t&&t.__CANCEL__)}function bo(t,e,n){Me.call(this,t??"canceled",Me.ERR_CANCELED,e,n),this.name="CanceledError"}$.inherits(bo,Me,{__CANCEL__:!0});function Sx(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Me("Request failed with status code "+n.status,[Me.ERR_BAD_REQUEST,Me.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function $C(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function WC(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(u){const d=Date.now(),p=r[i];o||(o=d),n[s]=u,r[s]=d;let f=i,m=0;for(;f!==s;)m+=n[f++],f=f%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),d-o<e)return;const T=p&&d-p;return T?Math.round(m*1e3/T):void 0}}function VC(t,e){let n=0,r=1e3/e,s,i;const o=(d,p=Date.now())=>{n=p,s=null,i&&(clearTimeout(i),i=null),t(...d)};return[(...d)=>{const p=Date.now(),f=p-n;f>=r?o(d,p):(s=d,i||(i=setTimeout(()=>{i=null,o(s)},r-f)))},()=>s&&o(s)]}const Yc=(t,e,n=3)=>{let r=0;const s=WC(50,250);return VC(i=>{const o=i.loaded,c=i.lengthComputable?i.total:void 0,u=o-r,d=s(u),p=o<=c;r=o;const f={loaded:o,total:c,progress:c?o/c:void 0,bytes:u,rate:d||void 0,estimated:d&&c&&p?(c-o)/d:void 0,event:i,lengthComputable:c!=null,[e?"download":"upload"]:!0};t(f)},n)},ry=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},sy=t=>(...e)=>$.asap(()=>t(...e)),HC=sn.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,sn.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(sn.origin),sn.navigator&&/(msie|trident)/i.test(sn.navigator.userAgent)):()=>!0,KC=sn.hasStandardBrowserEnv?{write(t,e,n,r,s,i,o){if(typeof document>"u")return;const c=[`${t}=${encodeURIComponent(e)}`];$.isNumber(n)&&c.push(`expires=${new Date(n).toUTCString()}`),$.isString(r)&&c.push(`path=${r}`),$.isString(s)&&c.push(`domain=${s}`),i===!0&&c.push("secure"),$.isString(o)&&c.push(`SameSite=${o}`),document.cookie=c.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function GC(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function qC(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function bx(t,e,n){let r=!GC(e);return t&&(r||n==!1)?qC(t,e):e}const iy=t=>t instanceof In?{...t}:t;function fi(t,e){e=e||{};const n={};function r(d,p,f,m){return $.isPlainObject(d)&&$.isPlainObject(p)?$.merge.call({caseless:m},d,p):$.isPlainObject(p)?$.merge({},p):$.isArray(p)?p.slice():p}function s(d,p,f,m){if($.isUndefined(p)){if(!$.isUndefined(d))return r(void 0,d,f,m)}else return r(d,p,f,m)}function i(d,p){if(!$.isUndefined(p))return r(void 0,p)}function o(d,p){if($.isUndefined(p)){if(!$.isUndefined(d))return r(void 0,d)}else return r(void 0,p)}function c(d,p,f){if(f in e)return r(d,p);if(f in t)return r(void 0,d)}const u={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c,headers:(d,p,f)=>s(iy(d),iy(p),f,!0)};return $.forEach(Object.keys({...t,...e}),function(p){const f=u[p]||s,m=f(t[p],e[p],p);$.isUndefined(m)&&f!==c||(n[p]=m)}),n}const Ex=t=>{const e=fi({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:c}=e;if(e.headers=o=In.from(o),e.url=vx(bx(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),c&&o.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),$.isFormData(n)){if(sn.hasStandardBrowserEnv||sn.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if($.isFunction(n.getHeaders)){const u=n.getHeaders(),d=["content-type","content-length"];Object.entries(u).forEach(([p,f])=>{d.includes(p.toLowerCase())&&o.set(p,f)})}}if(sn.hasStandardBrowserEnv&&(r&&$.isFunction(r)&&(r=r(e)),r||r!==!1&&HC(e.url))){const u=s&&i&&KC.read(i);u&&o.set(s,u)}return e},YC=typeof XMLHttpRequest<"u",QC=YC&&function(t){return new Promise(function(n,r){const s=Ex(t);let i=s.data;const o=In.from(s.headers).normalize();let{responseType:c,onUploadProgress:u,onDownloadProgress:d}=s,p,f,m,T,b;function N(){T&&T(),b&&b(),s.cancelToken&&s.cancelToken.unsubscribe(p),s.signal&&s.signal.removeEventListener("abort",p)}let A=new XMLHttpRequest;A.open(s.method.toUpperCase(),s.url,!0),A.timeout=s.timeout;function E(){if(!A)return;const _=In.from("getAllResponseHeaders"in A&&A.getAllResponseHeaders()),G={data:!c||c==="text"||c==="json"?A.responseText:A.response,status:A.status,statusText:A.statusText,headers:_,config:t,request:A};Sx(function(j){n(j),N()},function(j){r(j),N()},G),A=null}"onloadend"in A?A.onloadend=E:A.onreadystatechange=function(){!A||A.readyState!==4||A.status===0&&!(A.responseURL&&A.responseURL.indexOf("file:")===0)||setTimeout(E)},A.onabort=function(){A&&(r(new Me("Request aborted",Me.ECONNABORTED,t,A)),A=null)},A.onerror=function(O){const G=O&&O.message?O.message:"Network Error",X=new Me(G,Me.ERR_NETWORK,t,A);X.event=O||null,r(X),A=null},A.ontimeout=function(){let O=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const G=s.transitional||xx;s.timeoutErrorMessage&&(O=s.timeoutErrorMessage),r(new Me(O,G.clarifyTimeoutError?Me.ETIMEDOUT:Me.ECONNABORTED,t,A)),A=null},i===void 0&&o.setContentType(null),"setRequestHeader"in A&&$.forEach(o.toJSON(),function(O,G){A.setRequestHeader(G,O)}),$.isUndefined(s.withCredentials)||(A.withCredentials=!!s.withCredentials),c&&c!=="json"&&(A.responseType=s.responseType),d&&([m,b]=Yc(d,!0),A.addEventListener("progress",m)),u&&A.upload&&([f,T]=Yc(u),A.upload.addEventListener("progress",f),A.upload.addEventListener("loadend",T)),(s.cancelToken||s.signal)&&(p=_=>{A&&(r(!_||_.type?new bo(null,t,A):_),A.abort(),A=null)},s.cancelToken&&s.cancelToken.subscribe(p),s.signal&&(s.signal.aborted?p():s.signal.addEventListener("abort",p)));const w=$C(s.url);if(w&&sn.protocols.indexOf(w)===-1){r(new Me("Unsupported protocol "+w+":",Me.ERR_BAD_REQUEST,t));return}A.send(i||null)})},JC=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,s;const i=function(d){if(!s){s=!0,c();const p=d instanceof Error?d:this.reason;r.abort(p instanceof Me?p:new bo(p instanceof Error?p.message:p))}};let o=e&&setTimeout(()=>{o=null,i(new Me(`timeout ${e} of ms exceeded`,Me.ETIMEDOUT))},e);const c=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),t=null)};t.forEach(d=>d.addEventListener("abort",i));const{signal:u}=r;return u.unsubscribe=()=>$.asap(c),u}},XC=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,s;for(;r<n;)s=r+e,yield t.slice(r,s),r=s},ZC=async function*(t,e){for await(const n of eI(t))yield*XC(n,e)},eI=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},oy=(t,e,n,r)=>{const s=ZC(t,e);let i=0,o,c=u=>{o||(o=!0,r&&r(u))};return new ReadableStream({async pull(u){try{const{done:d,value:p}=await s.next();if(d){c(),u.close();return}let f=p.byteLength;if(n){let m=i+=f;n(m)}u.enqueue(new Uint8Array(p))}catch(d){throw c(d),d}},cancel(u){return c(u),s.return()}},{highWaterMark:2})},ly=64*1024,{isFunction:Za}=$,tI=(({Request:t,Response:e})=>({Request:t,Response:e}))($.global),{ReadableStream:ay,TextEncoder:cy}=$.global,uy=(t,...e)=>{try{return!!t(...e)}catch{return!1}},nI=t=>{t=$.merge.call({skipUndefined:!0},tI,t);const{fetch:e,Request:n,Response:r}=t,s=e?Za(e):typeof fetch=="function",i=Za(n),o=Za(r);if(!s)return!1;const c=s&&Za(ay),u=s&&(typeof cy=="function"?(b=>N=>b.encode(N))(new cy):async b=>new Uint8Array(await new n(b).arrayBuffer())),d=i&&c&&uy(()=>{let b=!1;const N=new n(sn.origin,{body:new ay,method:"POST",get duplex(){return b=!0,"half"}}).headers.has("Content-Type");return b&&!N}),p=o&&c&&uy(()=>$.isReadableStream(new r("").body)),f={stream:p&&(b=>b.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(b=>{!f[b]&&(f[b]=(N,A)=>{let E=N&&N[b];if(E)return E.call(N);throw new Me(`Response type '${b}' is not supported`,Me.ERR_NOT_SUPPORT,A)})});const m=async b=>{if(b==null)return 0;if($.isBlob(b))return b.size;if($.isSpecCompliantForm(b))return(await new n(sn.origin,{method:"POST",body:b}).arrayBuffer()).byteLength;if($.isArrayBufferView(b)||$.isArrayBuffer(b))return b.byteLength;if($.isURLSearchParams(b)&&(b=b+""),$.isString(b))return(await u(b)).byteLength},T=async(b,N)=>{const A=$.toFiniteNumber(b.getContentLength());return A??m(N)};return async b=>{let{url:N,method:A,data:E,signal:w,cancelToken:_,timeout:O,onDownloadProgress:G,onUploadProgress:X,responseType:j,headers:v,withCredentials:I="same-origin",fetchOptions:k}=Ex(b),x=e||fetch;j=j?(j+"").toLowerCase():"text";let R=JC([w,_&&_.toAbortSignal()],O),C=null;const oe=R&&R.unsubscribe&&(()=>{R.unsubscribe()});let _e;try{if(X&&d&&A!=="get"&&A!=="head"&&(_e=await T(v,E))!==0){let re=new n(N,{method:"POST",body:E,duplex:"half"}),fe;if($.isFormData(E)&&(fe=re.headers.get("content-type"))&&v.setContentType(fe),re.body){const[H,M]=ry(_e,Yc(sy(X)));E=oy(re.body,ly,H,M)}}$.isString(I)||(I=I?"include":"omit");const we=i&&"credentials"in n.prototype,Ae={...k,signal:R,method:A.toUpperCase(),headers:v.normalize().toJSON(),body:E,duplex:"half",credentials:we?I:void 0};C=i&&new n(N,Ae);let J=await(i?x(C,k):x(N,Ae));const D=p&&(j==="stream"||j==="response");if(p&&(G||D&&oe)){const re={};["status","statusText","headers"].forEach(Z=>{re[Z]=J[Z]});const fe=$.toFiniteNumber(J.headers.get("content-length")),[H,M]=G&&ry(fe,Yc(sy(G),!0))||[];J=new r(oy(J.body,ly,H,()=>{M&&M(),oe&&oe()}),re)}j=j||"text";let q=await f[$.findKey(f,j)||"text"](J,b);return!D&&oe&&oe(),await new Promise((re,fe)=>{Sx(re,fe,{data:q,headers:In.from(J.headers),status:J.status,statusText:J.statusText,config:b,request:C})})}catch(we){throw oe&&oe(),we&&we.name==="TypeError"&&/Load failed|fetch/i.test(we.message)?Object.assign(new Me("Network Error",Me.ERR_NETWORK,b,C),{cause:we.cause||we}):Me.from(we,we&&we.code,b,C)}}},rI=new Map,Cx=t=>{let e=t&&t.env||{};const{fetch:n,Request:r,Response:s}=e,i=[r,s,n];let o=i.length,c=o,u,d,p=rI;for(;c--;)u=i[c],d=p.get(u),d===void 0&&p.set(u,d=c?new Map:nI(e)),p=d;return d};Cx();const wp={http:_C,xhr:QC,fetch:{get:Cx}};$.forEach(wp,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const dy=t=>`- ${t}`,sI=t=>$.isFunction(t)||t===null||t===!1;function iI(t,e){t=$.isArray(t)?t:[t];const{length:n}=t;let r,s;const i={};for(let o=0;o<n;o++){r=t[o];let c;if(s=r,!sI(r)&&(s=wp[(c=String(r)).toLowerCase()],s===void 0))throw new Me(`Unknown adapter '${c}'`);if(s&&($.isFunction(s)||(s=s.get(e))))break;i[c||"#"+o]=s}if(!s){const o=Object.entries(i).map(([u,d])=>`adapter ${u} `+(d===!1?"is not supported by the environment":"is not available in the build"));let c=n?o.length>1?`since :
`+o.map(dy).join(`
`):" "+dy(o[0]):"as no adapter specified";throw new Me("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return s}const Ix={getAdapter:iI,adapters:wp};function Md(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new bo(null,t)}function hy(t){return Md(t),t.headers=In.from(t.headers),t.data=Dd.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Ix.getAdapter(t.adapter||fa.adapter,t)(t).then(function(r){return Md(t),r.data=Dd.call(t,t.transformResponse,r),r.headers=In.from(r.headers),r},function(r){return wx(r)||(Md(t),r&&r.response&&(r.response.data=Dd.call(t,t.transformResponse,r.response),r.response.headers=In.from(r.response.headers))),Promise.reject(r)})}const jx="1.13.2",Mu={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Mu[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const fy={};Mu.transitional=function(e,n,r){function s(i,o){return"[Axios v"+jx+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,c)=>{if(e===!1)throw new Me(s(o," has been removed"+(n?" in "+n:"")),Me.ERR_DEPRECATED);return n&&!fy[o]&&(fy[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,c):!0}};Mu.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function oI(t,e,n){if(typeof t!="object")throw new Me("options must be an object",Me.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],o=e[i];if(o){const c=t[i],u=c===void 0||o(c,i,t);if(u!==!0)throw new Me("option "+i+" must be "+u,Me.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Me("Unknown option "+i,Me.ERR_BAD_OPTION)}}const wc={assertOptions:oI,validators:Mu},fr=wc.validators;let ii=class{constructor(e){this.defaults=e||{},this.interceptors={request:new ty,response:new ty}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=fi(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&wc.assertOptions(r,{silentJSONParsing:fr.transitional(fr.boolean),forcedJSONParsing:fr.transitional(fr.boolean),clarifyTimeoutError:fr.transitional(fr.boolean)},!1),s!=null&&($.isFunction(s)?n.paramsSerializer={serialize:s}:wc.assertOptions(s,{encode:fr.function,serialize:fr.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),wc.assertOptions(n,{baseUrl:fr.spelling("baseURL"),withXsrfToken:fr.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&$.merge(i.common,i[n.method]);i&&$.forEach(["delete","get","head","post","put","patch","common"],b=>{delete i[b]}),n.headers=In.concat(o,i);const c=[];let u=!0;this.interceptors.request.forEach(function(N){typeof N.runWhen=="function"&&N.runWhen(n)===!1||(u=u&&N.synchronous,c.unshift(N.fulfilled,N.rejected))});const d=[];this.interceptors.response.forEach(function(N){d.push(N.fulfilled,N.rejected)});let p,f=0,m;if(!u){const b=[hy.bind(this),void 0];for(b.unshift(...c),b.push(...d),m=b.length,p=Promise.resolve(n);f<m;)p=p.then(b[f++],b[f++]);return p}m=c.length;let T=n;for(;f<m;){const b=c[f++],N=c[f++];try{T=b(T)}catch(A){N.call(this,A);break}}try{p=hy.call(this,T)}catch(b){return Promise.reject(b)}for(f=0,m=d.length;f<m;)p=p.then(d[f++],d[f++]);return p}getUri(e){e=fi(this.defaults,e);const n=bx(e.baseURL,e.url,e.allowAbsoluteUrls);return vx(n,e.params,e.paramsSerializer)}};$.forEach(["delete","get","head","options"],function(e){ii.prototype[e]=function(n,r){return this.request(fi(r||{},{method:e,url:n,data:(r||{}).data}))}});$.forEach(["post","put","patch"],function(e){function n(r){return function(i,o,c){return this.request(fi(c||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}ii.prototype[e]=n(),ii.prototype[e+"Form"]=n(!0)});let lI=class kx{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(c=>{r.subscribe(c),i=c}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,c){r.reason||(r.reason=new bo(i,o,c),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new kx(function(s){e=s}),cancel:e}}};function aI(t){return function(n){return t.apply(null,n)}}function cI(t){return $.isObject(t)&&t.isAxiosError===!0}const Jh={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Jh).forEach(([t,e])=>{Jh[e]=t});function Tx(t){const e=new ii(t),n=ox(ii.prototype.request,e);return $.extend(n,ii.prototype,e,{allOwnKeys:!0}),$.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return Tx(fi(t,s))},n}const Y=Tx(fa);Y.Axios=ii;Y.CanceledError=bo;Y.CancelToken=lI;Y.isCancel=wx;Y.VERSION=jx;Y.toFormData=Du;Y.AxiosError=Me;Y.Cancel=Y.CanceledError;Y.all=function(e){return Promise.all(e)};Y.spread=aI;Y.isAxiosError=cI;Y.mergeConfig=fi;Y.AxiosHeaders=In;Y.formToJSON=t=>_x($.isHTMLForm(t)?new FormData(t):t);Y.getAdapter=Ix.getAdapter;Y.HttpStatusCode=Jh;Y.default=Y;const{Axios:DN,AxiosError:MN,CanceledError:LN,isCancel:FN,CancelToken:zN,VERSION:BN,all:UN,Cancel:$N,isAxiosError:WN,spread:VN,toFormData:HN,AxiosHeaders:KN,HttpStatusCode:GN,formToJSON:qN,getAdapter:YN,mergeConfig:QN}=Y;var N0,R0;const uI=((R0=(N0=import.meta)==null?void 0:N0.env)==null?void 0:R0.VITE_API_BASE)||"https://gojo-teacher-web.onrender.com/api",dI=async(t,e)=>{try{return(await Y.post(`${uI}/teacher_login`,{username:t,password:e})).data}catch(n){return console.error("Login error:",n.response?n.response.data:n.message),{success:!1,message:"Network error or server not reachable"}}};function py(){const t=Dn(),[e,n]=y.useState(""),[r,s]=y.useState(""),[i,o]=y.useState(""),c=async u=>{u.preventDefault(),o("");const d=await dI(e,r);d.success?(localStorage.setItem("teacher",JSON.stringify(d.teacher)),t("/dashboard")):o(d.message||"Login failed")};return a.jsx("div",{className:"auth-container",children:a.jsxs("div",{className:"auth-box",children:[a.jsx("h2",{children:"Teacher Login"}),i&&a.jsx("p",{className:"auth-error",children:i}),a.jsxs("form",{onSubmit:c,children:[a.jsx("input",{type:"text",placeholder:"Username",value:e,onChange:u=>n(u.target.value),required:!0}),a.jsx("input",{type:"password",placeholder:"Password",value:r,onChange:u=>s(u.target.value),required:!0}),a.jsx("button",{type:"submit",className:"submit-btn",children:"Login"})]}),a.jsxs("p",{className:"auth-link",children:["Don't have an account? ",a.jsx(me,{to:"/register",children:"Register Here"})]})]})})}function hI(){Dn();const t=["7","8","9","10","11 Social","11 Natural","12 Social","12 Natural"],e=["A","B","C"],n={7:["Mathematics","Amharic","English","Biology","Physics","Chemistry","Geography","History","Civics","ICT","Oromifa","Physical Education"],8:["Mathematics","Amharic","English","Biology","Physics","Chemistry","Geography","History","Civics","ICT","Oromifa","Physical Education"],9:["Mathematics","English","Biology","Physics","Chemistry","Geography","History","Civics","ICT","Physical Education"],10:["Mathematics","English","Biology","Physics","Chemistry","Geography","History","Civics","ICT","Physical Education"],"11 Social":["Mathematics","English","Physics","Chemistry","Biology","Economics","Geography","History"],"11 Natural":["Mathematics","English","Physics","Chemistry","Biology","Economics","Geography","History"],"12 Social":["Mathematics","English","Physics","Chemistry","Biology","Economics","Geography","History"],"12 Natural":["Mathematics","English","Physics","Chemistry","Biology","Economics","Geography","History"]},[r,s]=y.useState({name:"",password:"",email:"",phone:"",gender:"",courses:[{grade:"",section:"",subject:""}]}),[i,o]=y.useState(null),[c,u]=y.useState(""),[d,p]=y.useState(""),f=(w,_=null)=>{const{name:O,value:G}=w.target;if(_!==null){const X=[...r.courses];X[_][O]=G,O==="grade"&&(X[_].subject=""),s({...r,courses:X})}else s({...r,[O]:G})},m=()=>{s({...r,courses:[...r.courses,{grade:"",section:"",subject:""}]})},T=w=>{const _=r.courses.filter((O,G)=>G!==w);s({...r,courses:_})},b=()=>{const w=new Set;for(let _ of r.courses){if(!_.grade||!_.section||!_.subject)continue;const O=`${_.grade}${_.section}-${_.subject}`;if(w.has(O))return!0;w.add(O)}return!1},N=w=>w===""||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(w).toLowerCase()),A=w=>/^[0-9+()\-\s]{6,20}$/.test(String(w).trim()),E=async w=>{if(w.preventDefault(),u(""),p(""),!N(r.email)){u("Please enter a valid email address or leave it empty.");return}if(!A(r.phone)){u("Please enter a valid phone number.");return}if(!r.gender){u("Please select gender.");return}if(!r.name||!r.password){u("Name and password are required.");return}if(b()){u("Duplicate subject detected! A subject can only be taught once per grade and section.");return}try{const _=new FormData;_.append("name",r.name),_.append("password",r.password),_.append("email",r.email),_.append("phone",r.phone),_.append("gender",r.gender),_.append("courses",JSON.stringify(r.courses)),i&&_.append("profile",i);const G=await(await fetch("https://gojo-teacher-web.onrender.com/register/teacher",{method:"POST",body:_})).json();if(G.success){const X=G.teacherKey||G.teacherId||G.teacherKey||G.teacherId||"";p(X),s({name:"",password:"",email:"",phone:"",gender:"",courses:[{grade:"",section:"",subject:""}]}),o(null),u("Registration successful. Your teacherId (username) is shown below.")}else u(G.message||"Registration failed.")}catch(_){console.error("Registration error:",_),u("Server error. Check console.")}};return a.jsx("div",{className:"auth-container",children:a.jsxs("div",{className:"auth-box",style:{maxWidth:"600px"},children:[a.jsx("h2",{children:"Teacher Registration"}),c&&a.jsx("p",{className:"auth-error",children:c}),a.jsxs("form",{onSubmit:E,children:[a.jsx("input",{type:"text",name:"name",placeholder:"Full Name",value:r.name,onChange:f,required:!0}),a.jsx("input",{type:"email",name:"email",placeholder:"Email (optional)",value:r.email,onChange:f}),a.jsx("input",{type:"tel",name:"phone",placeholder:"Phone number",value:r.phone,onChange:f,required:!0}),a.jsxs("select",{name:"gender",value:r.gender,onChange:f,required:!0,children:[a.jsx("option",{value:"",children:"Select Gender"}),a.jsx("option",{value:"Male",children:"Male"}),a.jsx("option",{value:"Female",children:"Female"}),a.jsx("option",{value:"Other",children:"Other"}),a.jsx("option",{value:"Prefer not to say",children:"Prefer not to say"})]}),a.jsx("input",{type:"password",name:"password",placeholder:"Password",value:r.password,onChange:f,required:!0}),a.jsxs("div",{className:"profile-upload",children:[i&&a.jsx("img",{src:URL.createObjectURL(i),alt:"Profile Preview",className:"profile-preview"}),a.jsx("input",{type:"file",accept:"image/*",onChange:w=>o(w.target.files[0])})]}),a.jsx("h3",{children:"Courses"}),r.courses.map((w,_)=>a.jsxs("div",{className:"course-group",children:[a.jsxs("select",{name:"grade",value:w.grade,onChange:O=>f(O,_),required:!0,children:[a.jsx("option",{value:"",children:"Select Grade"}),t.map(O=>a.jsx("option",{value:O,children:O},O))]}),a.jsxs("select",{name:"section",value:w.section,onChange:O=>f(O,_),required:!0,children:[a.jsx("option",{value:"",children:"Select Section"}),e.map(O=>a.jsx("option",{value:O,children:O},O))]}),a.jsxs("select",{name:"subject",value:w.subject,onChange:O=>f(O,_),required:!0,disabled:!w.grade,children:[a.jsx("option",{value:"",children:"Select Subject"}),w.grade&&n[w.grade].map(O=>a.jsx("option",{value:O,children:O},O))]}),r.courses.length>1&&a.jsx("button",{type:"button",className:"remove-btn",onClick:()=>T(_),children:"Remove"})]},_)),a.jsx("button",{type:"button",className:"add-btn",onClick:m,children:"Add Course"}),a.jsx("button",{type:"submit",className:"submit-btn",children:"Register"})]}),d&&a.jsxs("div",{className:"auth-success",style:{marginTop:12},children:[a.jsxs("p",{children:["Registration complete. Your teacherId (username) is:"," ",a.jsx("strong",{children:d})]}),a.jsxs("p",{children:["Use this ID to log in: ",a.jsx(me,{to:"/login",children:"Go to Login"})]})]}),a.jsxs("p",{className:"auth-link",children:["Already have an account? ",a.jsx(me,{to:"/login",children:"Go to Login"})]})]})})}var Nx={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},gy=Qt.createContext&&Qt.createContext(Nx),fI=["attr","size","title"];function pI(t,e){if(t==null)return{};var n=gI(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function gI(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Qc(){return Qc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qc.apply(this,arguments)}function my(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Jc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?my(Object(n),!0).forEach(function(r){mI(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):my(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mI(t,e,n){return e=yI(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yI(t){var e=vI(t,"string");return typeof e=="symbol"?e:e+""}function vI(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Rx(t){return t&&t.map((e,n)=>Qt.createElement(e.tag,Jc({key:n},e.attr),Rx(e.child)))}function jt(t){return e=>Qt.createElement(xI,Qc({attr:Jc({},t.attr)},e),Rx(t.child))}function xI(t){var e=n=>{var{attr:r,size:s,title:i}=t,o=pI(t,fI),c=s||n.size||"1em",u;return n.className&&(u=n.className),t.className&&(u=(u?u+" ":"")+t.className),Qt.createElement("svg",Qc({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:u,style:Jc(Jc({color:t.color||n.color},n.style),t.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),i&&Qt.createElement("title",null,i),t.children)};return gy!==void 0?Qt.createElement(gy.Consumer,null,n=>e(n)):e(Nx)}function qr(t){return jt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256.55 8C116.52 8 8 110.34 8 248.57c0 72.3 29.71 134.78 78.07 177.94 8.35 7.51 6.63 11.86 8.05 58.23A19.92 19.92 0 0 0 122 502.31c52.91-23.3 53.59-25.14 62.56-22.7C337.85 521.8 504 423.7 504 248.57 504 110.34 396.59 8 256.55 8zm149.24 185.13l-73 115.57a37.37 37.37 0 0 1-53.91 9.93l-58.08-43.47a15 15 0 0 0-18 0l-78.37 59.44c-10.46 7.93-24.16-4.6-17.11-15.67l73-115.57a37.36 37.36 0 0 1 53.91-9.93l58.06 43.46a15 15 0 0 0 18 0l78.41-59.38c10.44-7.98 24.14 4.54 17.09 15.62z"},child:[]}]})(t)}function _I(t){return jt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(t)}function Yr(t){return jt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(t)}function Qr(t){return jt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M208 352c-2.39 0-4.78.35-7.06 1.09C187.98 357.3 174.35 360 160 360c-14.35 0-27.98-2.7-40.95-6.91-2.28-.74-4.66-1.09-7.05-1.09C49.94 352-.33 402.48 0 464.62.14 490.88 21.73 512 48 512h224c26.27 0 47.86-21.12 48-47.38.33-62.14-49.94-112.62-112-112.62zm-48-32c53.02 0 96-42.98 96-96s-42.98-96-96-96-96 42.98-96 96 42.98 96 96 96zM592 0H208c-26.47 0-48 22.25-48 49.59V96c23.42 0 45.1 6.78 64 17.8V64h352v288h-64v-64H384v64h-76.24c19.1 16.69 33.12 38.73 39.69 64H592c26.47 0 48-22.25 48-49.59V49.59C640 22.25 618.47 0 592 0z"},child:[]}]})(t)}function lo(t){return jt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(t)}function wI(t){return jt({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(t)}function SI(t){return jt({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(t)}function wr(t){return jt({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM192 40c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm121.2 231.8l-143 141.8c-4.7 4.7-12.3 4.6-17-.1l-82.6-83.3c-4.7-4.7-4.6-12.3.1-17L99.1 285c4.7-4.7 12.3-4.6 17 .1l46 46.4 106-105.2c4.7-4.7 12.3-4.6 17 .1l28.2 28.4c4.7 4.8 4.6 12.3-.1 17z"},child:[]}]})(t)}function Sr(t){return jt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(t)}function Sp(t){return jt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 32C114.6 32 0 125.1 0 240c0 49.6 21.4 95 57 130.7C44.5 421.1 2.7 466 2.2 466.5c-2.2 2.3-2.8 5.7-1.5 8.7S4.8 480 8 480c66.3 0 116-31.8 140.6-51.4 32.7 12.3 69 19.4 107.4 19.4 141.4 0 256-93.1 256-208S397.4 32 256 32zM128 272c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 0c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 0c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"},child:[]}]})(t)}function bI(t){return jt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(t)}function EI(t){return jt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"},child:[]}]})(t)}function Jr(t){return jt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(t)}function Ax(t){return jt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"},child:[]}]})(t)}function CI(t){return jt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(t)}function yy(t){return jt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"},child:[]}]})(t)}function II(t){return jt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(t)}function Xr(t){return jt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}function jI(t){return jt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(t)}function kI(t){return jt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M296 384h-80c-13.3 0-24-10.7-24-24V192h-87.7c-17.8 0-26.7-21.5-14.1-34.1L242.3 5.7c7.5-7.5 19.8-7.5 27.3 0l152.2 152.2c12.6 12.6 3.7 34.1-14.1 34.1H320v168c0 13.3-10.7 24-24 24zm216-8v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h136v8c0 30.9 25.1 56 56 56h80c30.9 0 56-25.1 56-56v-8h136c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(t)}function Ve(t){return jt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(t)}function TI(t){return jt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M458.4 64.3C400.6 15.7 311.3 23 256 79.3 200.7 23 111.4 15.6 53.6 64.3-21.6 127.6-10.6 230.8 43 285.5l175.4 178.7c10 10.2 23.4 15.9 37.6 15.9 14.3 0 27.6-5.6 37.6-15.8L469 285.6c53.5-54.7 64.7-157.9-10.6-221.3zm-23.6 187.5L259.4 430.5c-2.4 2.4-4.4 2.4-6.8 0L77.2 251.8c-36.5-37.2-43.9-107.6 7.3-150.7 38.9-32.7 98.9-27.8 136.5 10.5l35 35.7 35-35.7c37.8-38.5 97.8-43.2 136.5-10.6 51.1 43.1 43.5 113.9 7.3 150.8z"},child:[]}]})(t)}const NI=()=>{};var vy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const de=function(t,e){if(!t)throw Eo(e)},Eo=function(t){return new Error("Firebase Database ("+Px.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},RI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},bp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,p=i>>2,f=(i&3)<<4|c>>4;let m=(c&15)<<2|d>>6,T=d&63;u||(T=64,o||(m=64)),r.push(n[p],n[f],n[m],n[T])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ox(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):RI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||d==null||f==null)throw new AI;const m=i<<2|c>>4;if(r.push(m),d!==64){const T=c<<4&240|d>>2;if(r.push(T),f!==64){const b=d<<6&192|f;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class AI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Dx=function(t){const e=Ox(t);return bp.encodeByteArray(e,!0)},Xc=function(t){return Dx(t).replace(/\./g,"")},Xh=function(t){try{return bp.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(t){return Mx(void 0,t)}function Mx(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!OI(n)||(t[n]=Mx(t[n],e[n]));return t}function OI(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI=()=>DI().__FIREBASE_DEFAULTS__,LI=()=>{if(typeof process>"u"||typeof vy>"u")return;const t=vy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},FI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Xh(t[1]);return e&&JSON.parse(e)},Lx=()=>{try{return NI()||MI()||LI()||FI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},zI=t=>{var e,n;return(n=(e=Lx())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},Fx=t=>{const e=zI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},zx=()=>{var t;return(t=Lx())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lu(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Bx(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ux(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Xc(JSON.stringify(n)),Xc(JSON.stringify(o)),""].join(".")}const pl={};function BI(){const t={prod:[],emulator:[]};for(const e of Object.keys(pl))pl[e]?t.emulator.push(e):t.prod.push(e);return t}function UI(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let xy=!1;function $x(t,e){if(typeof window>"u"||typeof document>"u"||!Lu(window.location.host)||pl[t]===e||pl[t]||xy)return;pl[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=BI().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,T){m.setAttribute("width","24"),m.setAttribute("id",T),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function d(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{xy=!0,o()},m}function p(m,T){m.setAttribute("id",T),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=UI(r),T=n("text"),b=document.getElementById(T)||document.createElement("span"),N=n("learnmore"),A=document.getElementById(N)||document.createElement("a"),E=n("preprendIcon"),w=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const _=m.element;c(_),p(A,N);const O=d();u(w,E),_.append(w,b,A,O),document.body.appendChild(_)}i?(b.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Wx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($I())}function WI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function VI(){return Px.NODE_ADMIN===!0}function HI(){try{return typeof indexedDB=="object"}catch{return!1}}function KI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI="FirebaseError";class Co extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=GI,Object.setPrototypeOf(this,Co.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vx.prototype.create)}}class Vx{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?qI(i,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new Co(s,c,r)}}function qI(t,e){return t.replace(YI,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const YI=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ul(t){return JSON.parse(t)}function Lt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=Ul(Xh(i[0])||""),n=Ul(Xh(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},QI=function(t){const e=Hx(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},JI=function(t){const e=Hx(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function br(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ao(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function _y(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Zc(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function $l(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(wy(i)&&wy(o)){if(!$l(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function wy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let f=0;f<16;f++)r[f]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let f=0;f<16;f++)r[f]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let f=16;f<80;f++){const m=r[f-3]^r[f-8]^r[f-14]^r[f-16];r[f]=(m<<1|m>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],c=this.chain_[3],u=this.chain_[4],d,p;for(let f=0;f<80;f++){f<40?f<20?(d=c^i&(o^c),p=1518500249):(d=i^o^c,p=1859775393):f<60?(d=i&o|c&(i|o),p=2400959708):(d=i^o^c,p=3395469782);const m=(s<<5|s>>>27)+d+u+p+r[f]&4294967295;u=c,c=o,o=(i<<30|i>>>2)&4294967295,i=s,s=m}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function Fu(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e4=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,de(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},zu=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(t){return t&&t._delegate?t._delegate:t}class co{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new pa;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(r4(e))try{this.getOrInitializeService({instanceIdentifier:qs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=qs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qs){return this.instances.has(e)}getOptions(e=qs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:n4(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=qs){return this.component?this.component.multipleInstances?e:qs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function n4(t){return t===qs?void 0:t}function r4(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new t4(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ot||(ot={}));const i4={debug:ot.DEBUG,verbose:ot.VERBOSE,info:ot.INFO,warn:ot.WARN,error:ot.ERROR,silent:ot.SILENT},o4=ot.INFO,l4={[ot.DEBUG]:"log",[ot.VERBOSE]:"log",[ot.INFO]:"info",[ot.WARN]:"warn",[ot.ERROR]:"error"},a4=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=l4[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ep{constructor(e){this.name=e,this._logLevel=o4,this._logHandler=a4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ot))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?i4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ot.DEBUG,...e),this._logHandler(this,ot.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ot.VERBOSE,...e),this._logHandler(this,ot.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ot.INFO,...e),this._logHandler(this,ot.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ot.WARN,...e),this._logHandler(this,ot.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ot.ERROR,...e),this._logHandler(this,ot.ERROR,...e)}}const c4=(t,e)=>e.some(n=>t instanceof n);let Sy,by;function u4(){return Sy||(Sy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function d4(){return by||(by=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Kx=new WeakMap,Zh=new WeakMap,Gx=new WeakMap,Ld=new WeakMap,Cp=new WeakMap;function h4(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(bs(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Kx.set(n,t)}).catch(()=>{}),Cp.set(e,t),e}function f4(t){if(Zh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Zh.set(t,e)}let ef={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Zh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Gx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return bs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function p4(t){ef=t(ef)}function g4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Fd(this),e,...n);return Gx.set(r,e.sort?e.sort():[e]),bs(r)}:d4().includes(t)?function(...e){return t.apply(Fd(this),e),bs(Kx.get(this))}:function(...e){return bs(t.apply(Fd(this),e))}}function m4(t){return typeof t=="function"?g4(t):(t instanceof IDBTransaction&&f4(t),c4(t,u4())?new Proxy(t,ef):t)}function bs(t){if(t instanceof IDBRequest)return h4(t);if(Ld.has(t))return Ld.get(t);const e=m4(t);return e!==t&&(Ld.set(t,e),Cp.set(e,t)),e}const Fd=t=>Cp.get(t);function y4(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=bs(o);return r&&o.addEventListener("upgradeneeded",u=>{r(bs(o.result),u.oldVersion,u.newVersion,bs(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const v4=["get","getKey","getAll","getAllKeys","count"],x4=["put","add","delete","clear"],zd=new Map;function Ey(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(zd.get(e))return zd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=x4.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||v4.includes(n)))return;const i=async function(o,...c){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return zd.set(e,i),i}p4(t=>({...t,get:(e,n,r)=>Ey(e,n)||t.get(e,n,r),has:(e,n)=>!!Ey(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(w4(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function w4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const tf="@firebase/app",Cy="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr=new Ep("@firebase/app"),S4="@firebase/app-compat",b4="@firebase/analytics-compat",E4="@firebase/analytics",C4="@firebase/app-check-compat",I4="@firebase/app-check",j4="@firebase/auth",k4="@firebase/auth-compat",T4="@firebase/database",N4="@firebase/data-connect",R4="@firebase/database-compat",A4="@firebase/functions",P4="@firebase/functions-compat",O4="@firebase/installations",D4="@firebase/installations-compat",M4="@firebase/messaging",L4="@firebase/messaging-compat",F4="@firebase/performance",z4="@firebase/performance-compat",B4="@firebase/remote-config",U4="@firebase/remote-config-compat",$4="@firebase/storage",W4="@firebase/storage-compat",V4="@firebase/firestore",H4="@firebase/ai",K4="@firebase/firestore-compat",G4="firebase",q4="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nf="[DEFAULT]",Y4={[tf]:"fire-core",[S4]:"fire-core-compat",[E4]:"fire-analytics",[b4]:"fire-analytics-compat",[I4]:"fire-app-check",[C4]:"fire-app-check-compat",[j4]:"fire-auth",[k4]:"fire-auth-compat",[T4]:"fire-rtdb",[N4]:"fire-data-connect",[R4]:"fire-rtdb-compat",[A4]:"fire-fn",[P4]:"fire-fn-compat",[O4]:"fire-iid",[D4]:"fire-iid-compat",[M4]:"fire-fcm",[L4]:"fire-fcm-compat",[F4]:"fire-perf",[z4]:"fire-perf-compat",[B4]:"fire-rc",[U4]:"fire-rc-compat",[$4]:"fire-gcs",[W4]:"fire-gcs-compat",[V4]:"fire-fst",[K4]:"fire-fst-compat",[H4]:"fire-vertex","fire-js":"fire-js",[G4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wl=new Map,Q4=new Map,rf=new Map;function Iy(t,e){try{t.container.addComponent(e)}catch(n){Vr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Vl(t){const e=t.name;if(rf.has(e))return Vr.debug(`There were multiple attempts to register component ${e}.`),!1;rf.set(e,t);for(const n of Wl.values())Iy(n,t);for(const n of Q4.values())Iy(n,t);return!0}function qx(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Yx(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Es=new Vx("app","Firebase",J4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new co("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Es.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx=q4;function Jx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:nf,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Es.create("bad-app-name",{appName:String(s)});if(n||(n=zx()),!n)throw Es.create("no-options");const i=Wl.get(s);if(i){if($l(n,i.options)&&$l(r,i.config))return i;throw Es.create("duplicate-app",{appName:s})}const o=new s4(s);for(const u of rf.values())o.addComponent(u);const c=new X4(n,r,o);return Wl.set(s,c),c}function Xx(t=nf){const e=Wl.get(t);if(!e&&t===nf&&zx())return Jx();if(!e)throw Es.create("no-app",{appName:t});return e}function jy(){return Array.from(Wl.values())}function Cs(t,e,n){let r=Y4[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Vr.warn(o.join(" "));return}Vl(new co(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z4="firebase-heartbeat-database",ej=1,Hl="firebase-heartbeat-store";let Bd=null;function Zx(){return Bd||(Bd=y4(Z4,ej,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Hl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Es.create("idb-open",{originalErrorMessage:t.message})})),Bd}async function tj(t){try{const n=(await Zx()).transaction(Hl),r=await n.objectStore(Hl).get(e_(t));return await n.done,r}catch(e){if(e instanceof Co)Vr.warn(e.message);else{const n=Es.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Vr.warn(n.message)}}}async function ky(t,e){try{const r=(await Zx()).transaction(Hl,"readwrite");await r.objectStore(Hl).put(e,e_(t)),await r.done}catch(n){if(n instanceof Co)Vr.warn(n.message);else{const r=Es.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Vr.warn(r.message)}}}function e_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nj=1024,rj=30;class sj{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new oj(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Ty();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>rj){const o=lj(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Vr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ty(),{heartbeatsToSend:r,unsentEntries:s}=ij(this._heartbeatsCache.heartbeats),i=Xc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Vr.warn(n),""}}}function Ty(){return new Date().toISOString().substring(0,10)}function ij(t,e=nj){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Ny(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Ny(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class oj{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return HI()?KI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await tj(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ky(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ky(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Ny(t){return Xc(JSON.stringify({version:2,heartbeats:t})).length}function lj(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aj(t){Vl(new co("platform-logger",e=>new _4(e),"PRIVATE")),Vl(new co("heartbeat",e=>new sj(e),"PRIVATE")),Cs(tf,Cy,t),Cs(tf,Cy,"esm2020"),Cs("fire-js","")}aj("");var cj="firebase",uj="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cs(cj,uj,"app");var Ry={};const Ay="@firebase/database",Py="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let t_="";function dj(t){t_=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Lt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Ul(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return br(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new hj(e)}}catch{}return new fj},ti=n_("localStorage"),pj=n_("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi=new Ep("@firebase/database"),gj=function(){let t=1;return function(){return t++}}(),r_=function(t){const e=e4(t),n=new ZI;n.update(e);const r=n.digest();return bp.encodeByteArray(r)},ga=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=ga.apply(null,r):typeof r=="object"?e+=Lt(r):e+=r,e+=" "}return e};let gl=null,Oy=!0;const mj=function(t,e){de(!0,"Can't turn on custom loggers persistently."),Yi.logLevel=ot.VERBOSE,gl=Yi.log.bind(Yi)},Yt=function(...t){if(Oy===!0&&(Oy=!1,gl===null&&pj.get("logging_enabled")===!0&&mj()),gl){const e=ga.apply(null,t);gl(e)}},ma=function(t){return function(...e){Yt(t,...e)}},sf=function(...t){const e="FIREBASE INTERNAL ERROR: "+ga(...t);Yi.error(e)},Hr=function(...t){const e=`FIREBASE FATAL ERROR: ${ga(...t)}`;throw Yi.error(e),new Error(e)},gn=function(...t){const e="FIREBASE WARNING: "+ga(...t);Yi.warn(e)},yj=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&gn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Ip=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},vj=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},uo="[MIN_NAME]",pi="[MAX_NAME]",wi=function(t,e){if(t===e)return 0;if(t===uo||e===pi)return-1;if(e===uo||t===pi)return 1;{const n=Dy(t),r=Dy(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},xj=function(t,e){return t===e?0:t<e?-1:1},Qo=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Lt(e))},jp=function(t){if(typeof t!="object"||t===null)return Lt(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Lt(e[r]),n+=":",n+=jp(t[e[r]]);return n+="}",n},s_=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function Zt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const i_=function(t){de(!Ip(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,c,u;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(c=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=c+r,o=Math.round(t*Math.pow(2,n-c)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const d=[];for(u=n;u;u-=1)d.push(o%2?1:0),o=Math.floor(o/2);for(u=e;u;u-=1)d.push(i%2?1:0),i=Math.floor(i/2);d.push(s?1:0),d.reverse();const p=d.join("");let f="";for(u=0;u<64;u+=8){let m=parseInt(p.substr(u,8),2).toString(16);m.length===1&&(m="0"+m),f=f+m}return f.toLowerCase()},_j=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},wj=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Sj(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const bj=new RegExp("^-?(0*)\\d{1,10}$"),Ej=-2147483648,Cj=2147483647,Dy=function(t){if(bj.test(t)){const e=Number(t);if(e>=Ej&&e<=Cj)return e}return null},Io=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw gn("Exception was thrown by user callback.",n),e},Math.floor(0))}},Ij=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ml=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,Yx(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)==null||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){gn(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Yt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',gn(e)}}class Sc{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Sc.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kp="5",o_="v",l_="s",a_="r",c_="f",u_=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,d_="ls",h_="p",of="ac",f_="websocket",p_="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e,n,r,s,i=!1,o="",c=!1,u=!1,d=null){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=c,this.isUsingEmulator=u,this.emulatorOptions=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ti.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ti.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Tj(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function m_(t,e,n){de(typeof e=="string","typeof type must == string"),de(typeof n=="object","typeof params must == object");let r;if(e===f_)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===p_)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Tj(t)&&(n.ns=t.namespace);const s=[];return Zt(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(){this.counters_={}}incrementCounter(e,n=1){br(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return PI(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ud={},$d={};function Tp(t){const e=t.toString();return Ud[e]||(Ud[e]=new Nj),Ud[e]}function Rj(t,e){const n=t.toString();return $d[n]||($d[n]=e()),$d[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&Io(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My="start",Pj="close",Oj="pLPCommand",Dj="pRTLPCB",y_="id",v_="pw",x_="ser",Mj="cb",Lj="seg",Fj="ts",zj="d",Bj="dframe",__=1870,w_=30,Uj=__-w_,$j=25e3,Wj=3e4;class $i{constructor(e,n,r,s,i,o,c){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ma(e),this.stats_=Tp(n),this.urlFn=u=>(this.appCheckToken&&(u[of]=this.appCheckToken),m_(n,p_,u))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Aj(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Wj)),vj(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Np((...i)=>{const[o,c,u,d,p]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===My)this.id=c,this.password=u;else if(o===Pj)c?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(c,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,c]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,c)},()=>{this.onClosed_()},this.urlFn);const r={};r[My]="t",r[x_]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Mj]=this.scriptTagHolder.uniqueCallbackIdentifier),r[o_]=kp,this.transportSessionId&&(r[l_]=this.transportSessionId),this.lastSessionId&&(r[d_]=this.lastSessionId),this.applicationId&&(r[h_]=this.applicationId),this.appCheckToken&&(r[of]=this.appCheckToken),typeof location<"u"&&location.hostname&&u_.test(location.hostname)&&(r[a_]=c_);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){$i.forceAllow_=!0}static forceDisallow(){$i.forceDisallow_=!0}static isAvailable(){return $i.forceAllow_?!0:!$i.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!_j()&&!wj()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Lt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Dx(n),s=s_(r,Uj);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[Bj]="t",r[y_]=e,r[v_]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Lt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Np{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=gj(),window[Oj+this.uniqueCallbackIdentifier]=e,window[Dj+this.uniqueCallbackIdentifier]=n,this.myIFrame=Np.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(c){Yt("frame writing exception"),c.stack&&Yt(c.stack),Yt(c)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Yt("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[y_]=this.myID,e[v_]=this.myPW,e[x_]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+w_+r.length<=__;){const o=this.pendingSegs.shift();r=r+"&"+Lj+s+"="+o.seg+"&"+Fj+s+"="+o.ts+"&"+zj+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor($j)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Yt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vj=16384,Hj=45e3;let eu=null;typeof MozWebSocket<"u"?eu=MozWebSocket:typeof WebSocket<"u"&&(eu=WebSocket);class Zn{constructor(e,n,r,s,i,o,c){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ma(this.connId),this.stats_=Tp(n),this.connURL=Zn.connectionURL_(n,o,c,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[o_]=kp,typeof location<"u"&&location.hostname&&u_.test(location.hostname)&&(o[a_]=c_),n&&(o[l_]=n),r&&(o[d_]=r),s&&(o[of]=s),i&&(o[h_]=i),m_(e,f_,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ti.set("previous_websocket_failure",!0);try{let r;VI(),this.mySock=new eu(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Zn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&eu!==null&&!Zn.forceDisallow_}static previouslyFailed(){return ti.isInMemoryStorage||ti.get("previous_websocket_failure")===!0}markConnectionHealthy(){ti.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Ul(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(de(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Lt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=s_(n,Vj);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Hj))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Zn.responsesRequiredToBeHealthy=2;Zn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{static get ALL_TRANSPORTS(){return[$i,Zn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=Zn&&Zn.isAvailable();let r=n&&!Zn.previouslyFailed();if(e.webSocketOnly&&(n||gn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Zn];else{const s=this.transports_=[];for(const i of Kl.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);Kl.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Kl.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kj=6e4,Gj=5e3,qj=10*1024,Yj=100*1024,Wd="t",Ly="d",Qj="s",Fy="r",Jj="e",zy="o",By="a",Uy="n",$y="p",Xj="h";class Zj{constructor(e,n,r,s,i,o,c,u,d,p){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=c,this.onDisconnect_=u,this.onKill_=d,this.lastSessionId=p,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ma("c:"+this.id+":"),this.transportManager_=new Kl(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=ml(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Yj?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>qj?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Wd in e){const n=e[Wd];n===By?this.upgradeIfSecondaryHealthy_():n===Fy?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===zy&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Qo("t",e),r=Qo("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:$y,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:By,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Uy,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Qo("t",e),r=Qo("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Qo(Wd,e);if(Ly in e){const r=e[Ly];if(n===Xj){const s={...r};this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===Uy){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Qj?this.onConnectionShutdown_(r):n===Fy?this.onReset_(r):n===Jj?sf("Server Error: "+r):n===zy?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):sf("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),kp!==r&&gn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),ml(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Kj))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ml(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Gj))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:$y,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ti.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e){this.allowedEvents_=e,this.listeners_={},de(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){de(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu extends b_{static getInstance(){return new tu}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Wx()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return de(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy=32,Vy=768;class at{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function rt(){return new at("")}function ze(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Ns(t){return t.pieces_.length-t.pieceNum_}function ft(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new at(t.pieces_,e)}function Rp(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function e3(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Gl(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function E_(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new at(e,0)}function Ct(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof at)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new at(n,0)}function We(t){return t.pieceNum_>=t.pieces_.length}function fn(t,e){const n=ze(t),r=ze(e);if(n===null)return e;if(n===r)return fn(ft(t),ft(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function t3(t,e){const n=Gl(t,0),r=Gl(e,0);for(let s=0;s<n.length&&s<r.length;s++){const i=wi(n[s],r[s]);if(i!==0)return i}return n.length===r.length?0:n.length<r.length?-1:1}function Ap(t,e){if(Ns(t)!==Ns(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function $n(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Ns(t)>Ns(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class n3{constructor(e,n){this.errorPrefix_=n,this.parts_=Gl(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=zu(this.parts_[r]);C_(this)}}function r3(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=zu(e),C_(t)}function s3(t){const e=t.parts_.pop();t.byteLength_-=zu(e),t.parts_.length>0&&(t.byteLength_-=1)}function C_(t){if(t.byteLength_>Vy)throw new Error(t.errorPrefix_+"has a key path longer than "+Vy+" bytes ("+t.byteLength_+").");if(t.parts_.length>Wy)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Wy+") or object contains a cycle "+Ys(t))}function Ys(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp extends b_{static getInstance(){return new Pp}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return de(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo=1e3,i3=60*5*1e3,Hy=30*1e3,o3=1.3,l3=3e4,a3="server_kill",Ky=3;class Fr extends S_{constructor(e,n,r,s,i,o,c,u){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=c,this.authOverride_=u,this.id=Fr.nextPersistentConnectionId_++,this.log_=ma("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Jo,this.maxReconnectDelay_=i3,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Pp.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&tu.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(Lt(i)),de(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new pa,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const c=o.d;o.s==="ok"?n.resolve(c):n.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),de(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),de(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const c={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,c),this.connected_&&this.sendListen_(c)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,c=>{const u=c.d,d=c.s;Fr.warnOnListenWarnings_(u,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",c),d!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(d,u))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&br(e,"w")){const r=ao(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();gn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||JI(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Hy)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=QI(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),de(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Lt(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):sf("Unrecognized action received from server: "+Lt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){de(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Jo,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Jo,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>l3&&(this.reconnectDelay_=Jo),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*o3)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Fr.nextConnectionId_++,i=this.lastSessionId;let o=!1,c=null;const u=function(){c?c.close():(o=!0,r())},d=function(f){de(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(f)};this.realtime_={close:u,sendRequest:d};const p=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[f,m]=await Promise.all([this.authTokenProvider_.getToken(p),this.appCheckTokenProvider_.getToken(p)]);o?Yt("getToken() completed but was canceled"):(Yt("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=m&&m.token,c=new Zj(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,T=>{gn(T+" ("+this.repoInfo_.toString()+")"),this.interrupt(a3)},i))}catch(f){this.log_("Failed to get token: "+f),o||(this.repoInfo_.nodeAdmin&&gn(f),u())}}}interrupt(e){Yt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Yt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],_y(this.interruptReasons_)&&(this.reconnectDelay_=Jo,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>jp(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new at(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){Yt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Ky&&(this.reconnectDelay_=Hy,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Yt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Ky&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+t_.replace(/\./g,"-")]=1,Wx()?e["framework.cordova"]=1:WI()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=tu.getInstance().currentlyOnline();return _y(this.interruptReasons_)&&e}}Fr.nextPersistentConnectionId_=0;Fr.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Be(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Be(uo,e),s=new Be(uo,n);return this.compare(r,s)!==0}minPost(){return Be.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ec;class I_ extends Bu{static get __EMPTY_NODE(){return ec}static set __EMPTY_NODE(e){ec=e}compare(e,n){return wi(e.name,n.name)}isDefinedOn(e){throw Eo("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Be.MIN}maxPost(){return new Be(pi,ec)}makePost(e,n){return de(typeof e=="string","KeyIndex indexValue must always be a string."),new Be(e,ec)}toString(){return".key"}}const Qi=new I_;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Vt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Vt.RED,this.left=s??wn.EMPTY_NODE,this.right=i??wn.EMPTY_NODE}copy(e,n,r,s,i){return new Vt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return wn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return wn.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Vt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Vt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Vt.RED=!0;Vt.BLACK=!1;class c3{copy(e,n,r,s,i){return this}insert(e,n,r){return new Vt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class wn{constructor(e,n=wn.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new wn(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Vt.BLACK,null,null))}remove(e){return new wn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Vt.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new tc(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new tc(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new tc(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new tc(this.root_,null,this.comparator_,!0,e)}}wn.EMPTY_NODE=new c3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u3(t,e){return wi(t.name,e.name)}function Op(t,e){return wi(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lf;function d3(t){lf=t}const j_=function(t){return typeof t=="number"?"number:"+i_(t):"string:"+t},k_=function(t){if(t.isLeafNode()){const e=t.val();de(typeof e=="string"||typeof e=="number"||typeof e=="object"&&br(e,".sv"),"Priority must be a string or number.")}else de(t===lf||t.isEmpty(),"priority of unexpected type.");de(t===lf||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gy;class $t{static set __childrenNodeConstructor(e){Gy=e}static get __childrenNodeConstructor(){return Gy}constructor(e,n=$t.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,de(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),k_(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new $t(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:$t.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return We(e)?this:ze(e)===".priority"?this.priorityNode_:$t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:$t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=ze(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(de(r!==".priority"||Ns(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,$t.__childrenNodeConstructor.EMPTY_NODE.updateChild(ft(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+j_(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=i_(this.value_):e+=this.value_,this.lazyHash_=r_(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===$t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof $t.__childrenNodeConstructor?-1:(de(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=$t.VALUE_TYPE_ORDER.indexOf(n),i=$t.VALUE_TYPE_ORDER.indexOf(r);return de(s>=0,"Unknown leaf type: "+n),de(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}$t.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let T_,N_;function h3(t){T_=t}function f3(t){N_=t}class p3 extends Bu{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?wi(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Be.MIN}maxPost(){return new Be(pi,new $t("[PRIORITY-POST]",N_))}makePost(e,n){const r=T_(e);return new Be(n,new $t("[PRIORITY-POST]",r))}toString(){return".priority"}}const It=new p3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g3=Math.log(2);class m3{constructor(e){const n=i=>parseInt(Math.log(i)/g3,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const nu=function(t,e,n,r){t.sort(e);const s=function(u,d){const p=d-u;let f,m;if(p===0)return null;if(p===1)return f=t[u],m=n?n(f):f,new Vt(m,f.node,Vt.BLACK,null,null);{const T=parseInt(p/2,10)+u,b=s(u,T),N=s(T+1,d);return f=t[T],m=n?n(f):f,new Vt(m,f.node,Vt.BLACK,b,N)}},i=function(u){let d=null,p=null,f=t.length;const m=function(b,N){const A=f-b,E=f;f-=b;const w=s(A+1,E),_=t[A],O=n?n(_):_;T(new Vt(O,_.node,N,null,w))},T=function(b){d?(d.left=b,d=b):(p=b,d=b)};for(let b=0;b<u.count;++b){const N=u.nextBitIsOne(),A=Math.pow(2,u.count-(b+1));N?m(A,Vt.BLACK):(m(A,Vt.BLACK),m(A,Vt.RED))}return p},o=new m3(t.length),c=i(o);return new wn(r||e,c)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vd;const ki={};class Dr{static get Default(){return de(ki&&It,"ChildrenNode.ts has not been loaded"),Vd=Vd||new Dr({".priority":ki},{".priority":It}),Vd}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=ao(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof wn?n:null}hasIndex(e){return br(this.indexSet_,e.toString())}addIndex(e,n){de(e!==Qi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(Be.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let c;s?c=nu(r,e.getCompare()):c=ki;const u=e.toString(),d={...this.indexSet_};d[u]=e;const p={...this.indexes_};return p[u]=c,new Dr(p,d)}addToIndexes(e,n){const r=Zc(this.indexes_,(s,i)=>{const o=ao(this.indexSet_,i);if(de(o,"Missing index implementation for "+i),s===ki)if(o.isDefinedOn(e.node)){const c=[],u=n.getIterator(Be.Wrap);let d=u.getNext();for(;d;)d.name!==e.name&&c.push(d),d=u.getNext();return c.push(e),nu(c,o.getCompare())}else return ki;else{const c=n.get(e.name);let u=s;return c&&(u=u.remove(new Be(e.name,c))),u.insert(e,e.node)}});return new Dr(r,this.indexSet_)}removeFromIndexes(e,n){const r=Zc(this.indexes_,s=>{if(s===ki)return s;{const i=n.get(e.name);return i?s.remove(new Be(e.name,i)):s}});return new Dr(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xo;class ke{static get EMPTY_NODE(){return Xo||(Xo=new ke(new wn(Op),null,Dr.Default))}constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&k_(this.priorityNode_),this.children_.isEmpty()&&de(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Xo}updatePriority(e){return this.children_.isEmpty()?this:new ke(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Xo:n}}getChild(e){const n=ze(e);return n===null?this:this.getImmediateChild(n).getChild(ft(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(de(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Be(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?Xo:this.priorityNode_;return new ke(s,o,i)}}updateChild(e,n){const r=ze(e);if(r===null)return n;{de(ze(e)!==".priority"||Ns(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(ft(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(It,(o,c)=>{n[o]=c.val(e),r++,i&&ke.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const c in n)o[c]=n[c];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+j_(this.getPriority().val())+":"),this.forEachChild(It,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":r_(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new Be(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Be(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Be(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,Be.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,Be.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ya?-1:0}withIndex(e){if(e===Qi||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ke(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Qi||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(It),s=n.getIterator(It);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Qi?null:this.indexMap_.get(e.toString())}}ke.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class y3 extends ke{constructor(){super(new wn(Op),ke.EMPTY_NODE,Dr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ke.EMPTY_NODE}isEmpty(){return!1}}const ya=new y3;Object.defineProperties(Be,{MIN:{value:new Be(uo,ke.EMPTY_NODE)},MAX:{value:new Be(pi,ya)}});I_.__EMPTY_NODE=ke.EMPTY_NODE;$t.__childrenNodeConstructor=ke;d3(ya);f3(ya);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v3=!0;function Mt(t,e=null){if(t===null)return ke.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),de(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new $t(n,Mt(e))}if(!(t instanceof Array)&&v3){const n=[];let r=!1;if(Zt(t,(o,c)=>{if(o.substring(0,1)!=="."){const u=Mt(c);u.isEmpty()||(r=r||!u.getPriority().isEmpty(),n.push(new Be(o,u)))}}),n.length===0)return ke.EMPTY_NODE;const i=nu(n,u3,o=>o.name,Op);if(r){const o=nu(n,It.getCompare());return new ke(i,Mt(e),new Dr({".priority":o},{".priority":It}))}else return new ke(i,Mt(e),Dr.Default)}else{let n=ke.EMPTY_NODE;return Zt(t,(r,s)=>{if(br(t,r)&&r.substring(0,1)!=="."){const i=Mt(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(Mt(e))}}h3(Mt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3 extends Bu{constructor(e){super(),this.indexPath_=e,de(!We(e)&&ze(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?wi(e.name,n.name):i}makePost(e,n){const r=Mt(e),s=ke.EMPTY_NODE.updateChild(this.indexPath_,r);return new Be(n,s)}maxPost(){const e=ke.EMPTY_NODE.updateChild(this.indexPath_,ya);return new Be(pi,e)}toString(){return Gl(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3 extends Bu{compare(e,n){const r=e.node.compareTo(n.node);return r===0?wi(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Be.MIN}maxPost(){return Be.MAX}makePost(e,n){const r=Mt(e);return new Be(n,r)}toString(){return".value"}}const w3=new _3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R_(t){return{type:"value",snapshotNode:t}}function ho(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ql(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Yl(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function S3(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){de(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const c=e.getImmediateChild(n);return c.getChild(s).equals(r.getChild(s))&&c.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(ql(n,c)):de(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):c.isEmpty()?o.trackChildChange(ho(n,r)):o.trackChildChange(Yl(n,r,c))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(It,(s,i)=>{n.hasChild(s)||r.trackChildChange(ql(s,i))}),n.isLeafNode()||n.forEachChild(It,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(Yl(s,i,o))}else r.trackChildChange(ho(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?ke.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e){this.indexedFilter_=new Dp(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Ql.getStartPost_(e),this.endPost_=Ql.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new Be(n,r))||(r=ke.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=ke.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(ke.EMPTY_NODE);const i=this;return n.forEachChild(It,(o,c)=>{i.matches(new Be(o,c))||(s=s.updateImmediateChild(o,ke.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Ql(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new Be(n,r))||(r=ke.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=ke.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=ke.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const c=i.getNext();if(this.withinDirectionalStart(c))if(this.withinDirectionalEnd(c))s=s.updateImmediateChild(c.name,c.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(ke.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const c=i.getNext();o<this.limit_&&this.withinDirectionalStart(c)&&this.withinDirectionalEnd(c)?o++:s=s.updateImmediateChild(c.name,ke.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const f=this.index_.getCompare();o=(m,T)=>f(T,m)}else o=this.index_.getCompare();const c=e;de(c.numChildren()===this.limit_,"");const u=new Be(n,r),d=this.reverse_?c.getFirstChild(this.index_):c.getLastChild(this.index_),p=this.rangedFilter_.matches(u);if(c.hasChild(n)){const f=c.getImmediateChild(n);let m=s.getChildAfterChild(this.index_,d,this.reverse_);for(;m!=null&&(m.name===n||c.hasChild(m.name));)m=s.getChildAfterChild(this.index_,m,this.reverse_);const T=m==null?1:o(m,u);if(p&&!r.isEmpty()&&T>=0)return i!=null&&i.trackChildChange(Yl(n,r,f)),c.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(ql(n,f));const N=c.updateImmediateChild(n,ke.EMPTY_NODE);return m!=null&&this.rangedFilter_.matches(m)?(i!=null&&i.trackChildChange(ho(m.name,m.node)),N.updateImmediateChild(m.name,m.node)):N}}else return r.isEmpty()?e:p&&o(d,u)>=0?(i!=null&&(i.trackChildChange(ql(d.name,d.node)),i.trackChildChange(ho(n,r))),c.updateImmediateChild(n,r).updateImmediateChild(d.name,ke.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=It}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return de(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return de(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:uo}hasEnd(){return this.endSet_}getIndexEndValue(){return de(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return de(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:pi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return de(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===It}copy(){const e=new Mp;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function E3(t){return t.loadsAllData()?new Dp(t.getIndex()):t.hasLimit()?new b3(t):new Ql(t)}function qy(t){const e={};if(t.isDefault())return e;let n;if(t.index_===It?n="$priority":t.index_===w3?n="$value":t.index_===Qi?n="$key":(de(t.index_ instanceof x3,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Lt(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Lt(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Lt(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Lt(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Lt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Yy(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==It&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru extends S_{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(de(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=ma("p:rest:"),this.listens_={}}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=ru.getListenId_(e,r),c={};this.listens_[o]=c;const u=qy(e._queryParams);this.restRequest_(i+".json",u,(d,p)=>{let f=p;if(d===404&&(f=null,d=null),d===null&&this.onDataUpdate_(i,f,!1,r),ao(this.listens_,o)===c){let m;d?d===401?m="permission_denied":m="rest_error:"+d:m="ok",s(m,null)}})}unlisten(e,n){const r=ru.getListenId_(e,n);delete this.listens_[r]}get(e){const n=qy(e._queryParams),r=e._path.toString(),s=new pa;return this.restRequest_(r+".json",n,(i,o)=>{let c=o;i===404&&(c=null,i=null),i===null?(this.onDataUpdate_(r,c,!1,null),s.resolve(c)):s.reject(new Error(c))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+XI(n);this.log_("Sending REST request for "+o);const c=new XMLHttpRequest;c.onreadystatechange=()=>{if(r&&c.readyState===4){this.log_("REST Response for "+o+" received. status:",c.status,"response:",c.responseText);let u=null;if(c.status>=200&&c.status<300){try{u=Ul(c.responseText)}catch{gn("Failed to parse JSON response for "+o+": "+c.responseText)}r(null,u)}else c.status!==401&&c.status!==404&&gn("Got unsuccessful REST response for "+o+" Status: "+c.status),r(c.status);r=null}},c.open("GET",o,!0),c.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3{constructor(){this.rootNode_=ke.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function su(){return{value:null,children:new Map}}function A_(t,e,n){if(We(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=ze(e);t.children.has(r)||t.children.set(r,su());const s=t.children.get(r);e=ft(e),A_(s,e,n)}}function af(t,e,n){t.value!==null?n(e,t.value):I3(t,(r,s)=>{const i=new at(e.toString()+"/"+r);af(s,i,n)})}function I3(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j3{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&Zt(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy=10*1e3,k3=30*1e3,T3=5*60*1e3;class N3{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new j3(e);const r=Qy+(k3-Qy)*Math.random();ml(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Zt(e,(s,i)=>{i>0&&br(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),ml(this.reportStats_.bind(this),Math.floor(Math.random()*2*T3))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var er;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(er||(er={}));function Lp(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Fp(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function zp(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=er.ACK_USER_WRITE,this.source=Lp()}operationForChild(e){if(We(this.path)){if(this.affectedTree.value!=null)return de(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new at(e));return new iu(rt(),n,this.revert)}}else return de(ze(this.path)===e,"operationForChild called for unrelated child."),new iu(ft(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,n){this.source=e,this.path=n,this.type=er.LISTEN_COMPLETE}operationForChild(e){return We(this.path)?new Jl(this.source,rt()):new Jl(this.source,ft(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=er.OVERWRITE}operationForChild(e){return We(this.path)?new gi(this.source,rt(),this.snap.getImmediateChild(e)):new gi(this.source,ft(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=er.MERGE}operationForChild(e){if(We(this.path)){const n=this.children.subtree(new at(e));return n.isEmpty()?null:n.value?new gi(this.source,rt(),n.value):new fo(this.source,rt(),n)}else return de(ze(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new fo(this.source,ft(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(We(e))return this.isFullyInitialized()&&!this.filtered_;const n=ze(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function A3(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(S3(o.childName,o.snapshotNode))}),Zo(t,s,"child_removed",e,r,n),Zo(t,s,"child_added",e,r,n),Zo(t,s,"child_moved",i,r,n),Zo(t,s,"child_changed",e,r,n),Zo(t,s,"value",e,r,n),s}function Zo(t,e,n,r,s,i){const o=r.filter(c=>c.type===n);o.sort((c,u)=>O3(t,c,u)),o.forEach(c=>{const u=P3(t,c,i);s.forEach(d=>{d.respondsTo(c.type)&&e.push(d.createEvent(u,t.query_))})})}function P3(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function O3(t,e,n){if(e.childName==null||n.childName==null)throw Eo("Should only compare child_ events.");const r=new Be(e.childName,e.snapshotNode),s=new Be(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uu(t,e){return{eventCache:t,serverCache:e}}function yl(t,e,n,r){return Uu(new Rs(e,n,r),t.serverCache)}function P_(t,e,n,r){return Uu(t.eventCache,new Rs(e,n,r))}function ou(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function mi(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hd;const D3=()=>(Hd||(Hd=new wn(xj)),Hd);class ht{static fromObject(e){let n=new ht(null);return Zt(e,(r,s)=>{n=n.set(new at(r),s)}),n}constructor(e,n=D3()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:rt(),value:this.value};if(We(e))return null;{const r=ze(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(ft(e),n);return i!=null?{path:Ct(new at(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(We(e))return this;{const n=ze(e),r=this.children.get(n);return r!==null?r.subtree(ft(e)):new ht(null)}}set(e,n){if(We(e))return new ht(n,this.children);{const r=ze(e),i=(this.children.get(r)||new ht(null)).set(ft(e),n),o=this.children.insert(r,i);return new ht(this.value,o)}}remove(e){if(We(e))return this.children.isEmpty()?new ht(null):new ht(null,this.children);{const n=ze(e),r=this.children.get(n);if(r){const s=r.remove(ft(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new ht(null):new ht(this.value,i)}else return this}}get(e){if(We(e))return this.value;{const n=ze(e),r=this.children.get(n);return r?r.get(ft(e)):null}}setTree(e,n){if(We(e))return n;{const r=ze(e),i=(this.children.get(r)||new ht(null)).setTree(ft(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new ht(this.value,o)}}fold(e){return this.fold_(rt(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(Ct(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,rt(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(We(e))return null;{const i=ze(e),o=this.children.get(i);return o?o.findOnPath_(ft(e),Ct(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,rt(),n)}foreachOnPath_(e,n,r){if(We(e))return this;{this.value&&r(n,this.value);const s=ze(e),i=this.children.get(s);return i?i.foreachOnPath_(ft(e),Ct(n,s),r):new ht(null)}}foreach(e){this.foreach_(rt(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(Ct(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this.writeTree_=e}static empty(){return new sr(new ht(null))}}function vl(t,e,n){if(We(e))return new sr(new ht(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=fn(s,e);return i=i.updateChild(o,n),new sr(t.writeTree_.set(s,i))}else{const s=new ht(n),i=t.writeTree_.setTree(e,s);return new sr(i)}}}function cf(t,e,n){let r=t;return Zt(n,(s,i)=>{r=vl(r,Ct(e,s),i)}),r}function Jy(t,e){if(We(e))return sr.empty();{const n=t.writeTree_.setTree(e,new ht(null));return new sr(n)}}function uf(t,e){return Si(t,e)!=null}function Si(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(fn(n.path,e)):null}function Xy(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(It,(r,s)=>{e.push(new Be(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new Be(r,s.value))}),e}function Is(t,e){if(We(e))return t;{const n=Si(t,e);return n!=null?new sr(new ht(n)):new sr(t.writeTree_.subtree(e))}}function df(t){return t.writeTree_.isEmpty()}function po(t,e){return O_(rt(),t.writeTree_,e)}function O_(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(de(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=O_(Ct(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Ct(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $u(t,e){return F_(e,t)}function M3(t,e,n,r,s){de(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=vl(t.visibleWrites,e,n)),t.lastWriteId=r}function L3(t,e,n,r){de(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=cf(t.visibleWrites,e,n),t.lastWriteId=r}function F3(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function z3(t,e){const n=t.allWrites.findIndex(c=>c.writeId===e);de(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const c=t.allWrites[o];c.visible&&(o>=n&&B3(c,r.path)?s=!1:$n(r.path,c.path)&&(i=!0)),o--}if(s){if(i)return U3(t),!0;if(r.snap)t.visibleWrites=Jy(t.visibleWrites,r.path);else{const c=r.children;Zt(c,u=>{t.visibleWrites=Jy(t.visibleWrites,Ct(r.path,u))})}return!0}else return!1}function B3(t,e){if(t.snap)return $n(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&$n(Ct(t.path,n),e))return!0;return!1}function U3(t){t.visibleWrites=D_(t.allWrites,$3,rt()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function $3(t){return t.visible}function D_(t,e,n){let r=sr.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let c;if(i.snap)$n(n,o)?(c=fn(n,o),r=vl(r,c,i.snap)):$n(o,n)&&(c=fn(o,n),r=vl(r,rt(),i.snap.getChild(c)));else if(i.children){if($n(n,o))c=fn(n,o),r=cf(r,c,i.children);else if($n(o,n))if(c=fn(o,n),We(c))r=cf(r,rt(),i.children);else{const u=ao(i.children,ze(c));if(u){const d=u.getChild(ft(c));r=vl(r,rt(),d)}}}else throw Eo("WriteRecord should have .snap or .children")}}return r}function M_(t,e,n,r,s){if(!r&&!s){const i=Si(t.visibleWrites,e);if(i!=null)return i;{const o=Is(t.visibleWrites,e);if(df(o))return n;if(n==null&&!uf(o,rt()))return null;{const c=n||ke.EMPTY_NODE;return po(o,c)}}}else{const i=Is(t.visibleWrites,e);if(!s&&df(i))return n;if(!s&&n==null&&!uf(i,rt()))return null;{const o=function(d){return(d.visible||s)&&(!r||!~r.indexOf(d.writeId))&&($n(d.path,e)||$n(e,d.path))},c=D_(t.allWrites,o,e),u=n||ke.EMPTY_NODE;return po(c,u)}}}function W3(t,e,n){let r=ke.EMPTY_NODE;const s=Si(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(It,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=Is(t.visibleWrites,e);return n.forEachChild(It,(o,c)=>{const u=po(Is(i,new at(o)),c);r=r.updateImmediateChild(o,u)}),Xy(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=Is(t.visibleWrites,e);return Xy(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function V3(t,e,n,r,s){de(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=Ct(e,n);if(uf(t.visibleWrites,i))return null;{const o=Is(t.visibleWrites,i);return df(o)?s.getChild(n):po(o,s.getChild(n))}}function H3(t,e,n,r){const s=Ct(e,n),i=Si(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=Is(t.visibleWrites,s);return po(o,r.getNode().getImmediateChild(n))}else return null}function K3(t,e){return Si(t.visibleWrites,e)}function G3(t,e,n,r,s,i,o){let c;const u=Is(t.visibleWrites,e),d=Si(u,rt());if(d!=null)c=d;else if(n!=null)c=po(u,n);else return[];if(c=c.withIndex(o),!c.isEmpty()&&!c.isLeafNode()){const p=[],f=o.getCompare(),m=i?c.getReverseIteratorFrom(r,o):c.getIteratorFrom(r,o);let T=m.getNext();for(;T&&p.length<s;)f(T,r)!==0&&p.push(T),T=m.getNext();return p}else return[]}function q3(){return{visibleWrites:sr.empty(),allWrites:[],lastWriteId:-1}}function lu(t,e,n,r){return M_(t.writeTree,t.treePath,e,n,r)}function Bp(t,e){return W3(t.writeTree,t.treePath,e)}function Zy(t,e,n,r){return V3(t.writeTree,t.treePath,e,n,r)}function au(t,e){return K3(t.writeTree,Ct(t.treePath,e))}function Y3(t,e,n,r,s,i){return G3(t.writeTree,t.treePath,e,n,r,s,i)}function Up(t,e,n){return H3(t.writeTree,t.treePath,e,n)}function L_(t,e){return F_(Ct(t.treePath,e),t.writeTree)}function F_(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;de(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),de(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,Yl(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,ql(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,ho(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,Yl(r,e.snapshotNode,s.oldSnap));else throw Eo("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const z_=new J3;class $p{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Rs(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Up(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:mi(this.viewCache_),i=Y3(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X3(t){return{filter:t}}function Z3(t,e){de(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),de(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function ek(t,e,n,r,s){const i=new Q3;let o,c;if(n.type===er.OVERWRITE){const d=n;d.source.fromUser?o=hf(t,e,d.path,d.snap,r,s,i):(de(d.source.fromServer,"Unknown source."),c=d.source.tagged||e.serverCache.isFiltered()&&!We(d.path),o=cu(t,e,d.path,d.snap,r,s,c,i))}else if(n.type===er.MERGE){const d=n;d.source.fromUser?o=nk(t,e,d.path,d.children,r,s,i):(de(d.source.fromServer,"Unknown source."),c=d.source.tagged||e.serverCache.isFiltered(),o=ff(t,e,d.path,d.children,r,s,c,i))}else if(n.type===er.ACK_USER_WRITE){const d=n;d.revert?o=ik(t,e,d.path,r,s,i):o=rk(t,e,d.path,d.affectedTree,r,s,i)}else if(n.type===er.LISTEN_COMPLETE)o=sk(t,e,n.path,r,i);else throw Eo("Unknown operation type: "+n.type);const u=i.getChanges();return tk(e,o,u),{viewCache:o,changes:u}}function tk(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=ou(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(R_(ou(e)))}}function B_(t,e,n,r,s,i){const o=e.eventCache;if(au(r,n)!=null)return e;{let c,u;if(We(n))if(de(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const d=mi(e),p=d instanceof ke?d:ke.EMPTY_NODE,f=Bp(r,p);c=t.filter.updateFullNode(e.eventCache.getNode(),f,i)}else{const d=lu(r,mi(e));c=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const d=ze(n);if(d===".priority"){de(Ns(n)===1,"Can't have a priority with additional path components");const p=o.getNode();u=e.serverCache.getNode();const f=Zy(r,n,p,u);f!=null?c=t.filter.updatePriority(p,f):c=o.getNode()}else{const p=ft(n);let f;if(o.isCompleteForChild(d)){u=e.serverCache.getNode();const m=Zy(r,n,o.getNode(),u);m!=null?f=o.getNode().getImmediateChild(d).updateChild(p,m):f=o.getNode().getImmediateChild(d)}else f=Up(r,d,e.serverCache);f!=null?c=t.filter.updateChild(o.getNode(),d,f,p,s,i):c=o.getNode()}}return yl(e,c,o.isFullyInitialized()||We(n),t.filter.filtersNodes())}}function cu(t,e,n,r,s,i,o,c){const u=e.serverCache;let d;const p=o?t.filter:t.filter.getIndexedFilter();if(We(n))d=p.updateFullNode(u.getNode(),r,null);else if(p.filtersNodes()&&!u.isFiltered()){const T=u.getNode().updateChild(n,r);d=p.updateFullNode(u.getNode(),T,null)}else{const T=ze(n);if(!u.isCompleteForPath(n)&&Ns(n)>1)return e;const b=ft(n),A=u.getNode().getImmediateChild(T).updateChild(b,r);T===".priority"?d=p.updatePriority(u.getNode(),A):d=p.updateChild(u.getNode(),T,A,b,z_,null)}const f=P_(e,d,u.isFullyInitialized()||We(n),p.filtersNodes()),m=new $p(s,f,i);return B_(t,f,n,s,m,c)}function hf(t,e,n,r,s,i,o){const c=e.eventCache;let u,d;const p=new $p(s,e,i);if(We(n))d=t.filter.updateFullNode(e.eventCache.getNode(),r,o),u=yl(e,d,!0,t.filter.filtersNodes());else{const f=ze(n);if(f===".priority")d=t.filter.updatePriority(e.eventCache.getNode(),r),u=yl(e,d,c.isFullyInitialized(),c.isFiltered());else{const m=ft(n),T=c.getNode().getImmediateChild(f);let b;if(We(m))b=r;else{const N=p.getCompleteChild(f);N!=null?Rp(m)===".priority"&&N.getChild(E_(m)).isEmpty()?b=N:b=N.updateChild(m,r):b=ke.EMPTY_NODE}if(T.equals(b))u=e;else{const N=t.filter.updateChild(c.getNode(),f,b,m,p,o);u=yl(e,N,c.isFullyInitialized(),t.filter.filtersNodes())}}}return u}function e0(t,e){return t.eventCache.isCompleteForChild(e)}function nk(t,e,n,r,s,i,o){let c=e;return r.foreach((u,d)=>{const p=Ct(n,u);e0(e,ze(p))&&(c=hf(t,c,p,d,s,i,o))}),r.foreach((u,d)=>{const p=Ct(n,u);e0(e,ze(p))||(c=hf(t,c,p,d,s,i,o))}),c}function t0(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function ff(t,e,n,r,s,i,o,c){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u=e,d;We(n)?d=r:d=new ht(null).setTree(n,r);const p=e.serverCache.getNode();return d.children.inorderTraversal((f,m)=>{if(p.hasChild(f)){const T=e.serverCache.getNode().getImmediateChild(f),b=t0(t,T,m);u=cu(t,u,new at(f),b,s,i,o,c)}}),d.children.inorderTraversal((f,m)=>{const T=!e.serverCache.isCompleteForChild(f)&&m.value===null;if(!p.hasChild(f)&&!T){const b=e.serverCache.getNode().getImmediateChild(f),N=t0(t,b,m);u=cu(t,u,new at(f),N,s,i,o,c)}}),u}function rk(t,e,n,r,s,i,o){if(au(s,n)!=null)return e;const c=e.serverCache.isFiltered(),u=e.serverCache;if(r.value!=null){if(We(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return cu(t,e,n,u.getNode().getChild(n),s,i,c,o);if(We(n)){let d=new ht(null);return u.getNode().forEachChild(Qi,(p,f)=>{d=d.set(new at(p),f)}),ff(t,e,n,d,s,i,c,o)}else return e}else{let d=new ht(null);return r.foreach((p,f)=>{const m=Ct(n,p);u.isCompleteForPath(m)&&(d=d.set(p,u.getNode().getChild(m)))}),ff(t,e,n,d,s,i,c,o)}}function sk(t,e,n,r,s){const i=e.serverCache,o=P_(e,i.getNode(),i.isFullyInitialized()||We(n),i.isFiltered());return B_(t,o,n,r,z_,s)}function ik(t,e,n,r,s,i){let o;if(au(r,n)!=null)return e;{const c=new $p(r,e,s),u=e.eventCache.getNode();let d;if(We(n)||ze(n)===".priority"){let p;if(e.serverCache.isFullyInitialized())p=lu(r,mi(e));else{const f=e.serverCache.getNode();de(f instanceof ke,"serverChildren would be complete if leaf node"),p=Bp(r,f)}p=p,d=t.filter.updateFullNode(u,p,i)}else{const p=ze(n);let f=Up(r,p,e.serverCache);f==null&&e.serverCache.isCompleteForChild(p)&&(f=u.getImmediateChild(p)),f!=null?d=t.filter.updateChild(u,p,f,ft(n),c,i):e.eventCache.getNode().hasChild(p)?d=t.filter.updateChild(u,p,ke.EMPTY_NODE,ft(n),c,i):d=u,d.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=lu(r,mi(e)),o.isLeafNode()&&(d=t.filter.updateFullNode(d,o,i)))}return o=e.serverCache.isFullyInitialized()||au(r,rt())!=null,yl(e,d,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new Dp(r.getIndex()),i=E3(r);this.processor_=X3(i);const o=n.serverCache,c=n.eventCache,u=s.updateFullNode(ke.EMPTY_NODE,o.getNode(),null),d=i.updateFullNode(ke.EMPTY_NODE,c.getNode(),null),p=new Rs(u,o.isFullyInitialized(),s.filtersNodes()),f=new Rs(d,c.isFullyInitialized(),i.filtersNodes());this.viewCache_=Uu(f,p),this.eventGenerator_=new R3(this.query_)}get query(){return this.query_}}function lk(t){return t.viewCache_.serverCache.getNode()}function ak(t){return ou(t.viewCache_)}function ck(t,e){const n=mi(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!We(e)&&!n.getImmediateChild(ze(e)).isEmpty())?n.getChild(e):null}function n0(t){return t.eventRegistrations_.length===0}function uk(t,e){t.eventRegistrations_.push(e)}function r0(t,e,n){const r=[];if(n){de(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function s0(t,e,n,r){e.type===er.MERGE&&e.source.queryId!==null&&(de(mi(t.viewCache_),"We should always have a full cache before handling merges"),de(ou(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=ek(t.processor_,s,e,n,r);return Z3(t.processor_,i.viewCache),de(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,U_(t,i.changes,i.viewCache.eventCache.getNode(),null)}function dk(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(It,(i,o)=>{r.push(ho(i,o))}),n.isFullyInitialized()&&r.push(R_(n.getNode())),U_(t,r,n.getNode(),e)}function U_(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return A3(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uu;class $_{constructor(){this.views=new Map}}function hk(t){de(!uu,"__referenceConstructor has already been defined"),uu=t}function fk(){return de(uu,"Reference.ts has not been loaded"),uu}function pk(t){return t.views.size===0}function Wp(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return de(i!=null,"SyncTree gave us an op for an invalid query."),s0(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(s0(o,e,n,r));return i}}function W_(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let c=lu(n,s?r:null),u=!1;c?u=!0:r instanceof ke?(c=Bp(n,r),u=!1):(c=ke.EMPTY_NODE,u=!1);const d=Uu(new Rs(c,u,!1),new Rs(r,s,!1));return new ok(e,d)}return o}function gk(t,e,n,r,s,i){const o=W_(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),uk(o,n),dk(o,n)}function mk(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const c=As(t);if(s==="default")for(const[u,d]of t.views.entries())o=o.concat(r0(d,n,r)),n0(d)&&(t.views.delete(u),d.query._queryParams.loadsAllData()||i.push(d.query));else{const u=t.views.get(s);u&&(o=o.concat(r0(u,n,r)),n0(u)&&(t.views.delete(s),u.query._queryParams.loadsAllData()||i.push(u.query)))}return c&&!As(t)&&i.push(new(fk())(e._repo,e._path)),{removed:i,events:o}}function V_(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function js(t,e){let n=null;for(const r of t.views.values())n=n||ck(r,e);return n}function H_(t,e){if(e._queryParams.loadsAllData())return Wu(t);{const r=e._queryIdentifier;return t.views.get(r)}}function K_(t,e){return H_(t,e)!=null}function As(t){return Wu(t)!=null}function Wu(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let du;function yk(t){de(!du,"__referenceConstructor has already been defined"),du=t}function vk(){return de(du,"Reference.ts has not been loaded"),du}let xk=1;class i0{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ht(null),this.pendingWriteTree_=q3(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function G_(t,e,n,r,s){return M3(t.pendingWriteTree_,e,n,r,s),s?jo(t,new gi(Lp(),e,n)):[]}function _k(t,e,n,r){L3(t.pendingWriteTree_,e,n,r);const s=ht.fromObject(n);return jo(t,new fo(Lp(),e,s))}function ps(t,e,n=!1){const r=F3(t.pendingWriteTree_,e);if(z3(t.pendingWriteTree_,e)){let i=new ht(null);return r.snap!=null?i=i.set(rt(),!0):Zt(r.children,o=>{i=i.set(new at(o),!0)}),jo(t,new iu(r.path,i,n))}else return[]}function va(t,e,n){return jo(t,new gi(Fp(),e,n))}function wk(t,e,n){const r=ht.fromObject(n);return jo(t,new fo(Fp(),e,r))}function Sk(t,e){return jo(t,new Jl(Fp(),e))}function bk(t,e,n){const r=Hp(t,n);if(r){const s=Kp(r),i=s.path,o=s.queryId,c=fn(i,e),u=new Jl(zp(o),c);return Gp(t,i,u)}else return[]}function hu(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let c=[];if(o&&(e._queryIdentifier==="default"||K_(o,e))){const u=mk(o,e,n,r);pk(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const d=u.removed;if(c=u.events,!s){const p=d.findIndex(m=>m._queryParams.loadsAllData())!==-1,f=t.syncPointTree_.findOnPath(i,(m,T)=>As(T));if(p&&!f){const m=t.syncPointTree_.subtree(i);if(!m.isEmpty()){const T=Ik(m);for(let b=0;b<T.length;++b){const N=T[b],A=N.query,E=J_(t,N);t.listenProvider_.startListening(xl(A),Xl(t,A),E.hashFn,E.onComplete)}}}!f&&d.length>0&&!r&&(p?t.listenProvider_.stopListening(xl(e),null):d.forEach(m=>{const T=t.queryToTagMap.get(Vu(m));t.listenProvider_.stopListening(xl(m),T)}))}jk(t,d)}return c}function q_(t,e,n,r){const s=Hp(t,r);if(s!=null){const i=Kp(s),o=i.path,c=i.queryId,u=fn(o,e),d=new gi(zp(c),u,n);return Gp(t,o,d)}else return[]}function Ek(t,e,n,r){const s=Hp(t,r);if(s){const i=Kp(s),o=i.path,c=i.queryId,u=fn(o,e),d=ht.fromObject(n),p=new fo(zp(c),u,d);return Gp(t,o,p)}else return[]}function pf(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(m,T)=>{const b=fn(m,s);i=i||js(T,b),o=o||As(T)});let c=t.syncPointTree_.get(s);c?(o=o||As(c),i=i||js(c,rt())):(c=new $_,t.syncPointTree_=t.syncPointTree_.set(s,c));let u;i!=null?u=!0:(u=!1,i=ke.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((T,b)=>{const N=js(b,rt());N&&(i=i.updateImmediateChild(T,N))}));const d=K_(c,e);if(!d&&!e._queryParams.loadsAllData()){const m=Vu(e);de(!t.queryToTagMap.has(m),"View does not exist, but we have a tag");const T=kk();t.queryToTagMap.set(m,T),t.tagToQueryMap.set(T,m)}const p=$u(t.pendingWriteTree_,s);let f=gk(c,e,n,p,i,u);if(!d&&!o&&!r){const m=H_(c,e);f=f.concat(Tk(t,e,m))}return f}function Vp(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,c)=>{const u=fn(o,e),d=js(c,u);if(d)return d});return M_(s,e,i,n,!0)}function Ck(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(d,p)=>{const f=fn(d,n);r=r||js(p,f)});let s=t.syncPointTree_.get(n);s?r=r||js(s,rt()):(s=new $_,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new Rs(r,!0,!1):null,c=$u(t.pendingWriteTree_,e._path),u=W_(s,e,c,i?o.getNode():ke.EMPTY_NODE,i);return ak(u)}function jo(t,e){return Y_(e,t.syncPointTree_,null,$u(t.pendingWriteTree_,rt()))}function Y_(t,e,n,r){if(We(t.path))return Q_(t,e,n,r);{const s=e.get(rt());n==null&&s!=null&&(n=js(s,rt()));let i=[];const o=ze(t.path),c=t.operationForChild(o),u=e.children.get(o);if(u&&c){const d=n?n.getImmediateChild(o):null,p=L_(r,o);i=i.concat(Y_(c,u,d,p))}return s&&(i=i.concat(Wp(s,t,r,n))),i}}function Q_(t,e,n,r){const s=e.get(rt());n==null&&s!=null&&(n=js(s,rt()));let i=[];return e.children.inorderTraversal((o,c)=>{const u=n?n.getImmediateChild(o):null,d=L_(r,o),p=t.operationForChild(o);p&&(i=i.concat(Q_(p,c,u,d)))}),s&&(i=i.concat(Wp(s,t,r,n))),i}function J_(t,e){const n=e.query,r=Xl(t,n);return{hashFn:()=>(lk(e)||ke.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?bk(t,n._path,r):Sk(t,n._path);{const i=Sj(s,n);return hu(t,n,null,i)}}}}function Xl(t,e){const n=Vu(e);return t.queryToTagMap.get(n)}function Vu(t){return t._path.toString()+"$"+t._queryIdentifier}function Hp(t,e){return t.tagToQueryMap.get(e)}function Kp(t){const e=t.indexOf("$");return de(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new at(t.substr(0,e))}}function Gp(t,e,n){const r=t.syncPointTree_.get(e);de(r,"Missing sync point for query tag that we're tracking");const s=$u(t.pendingWriteTree_,e);return Wp(r,n,s,null)}function Ik(t){return t.fold((e,n,r)=>{if(n&&As(n))return[Wu(n)];{let s=[];return n&&(s=V_(n)),Zt(r,(i,o)=>{s=s.concat(o)}),s}})}function xl(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(vk())(t._repo,t._path):t}function jk(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=Vu(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function kk(){return xk++}function Tk(t,e,n){const r=e._path,s=Xl(t,e),i=J_(t,n),o=t.listenProvider_.startListening(xl(e),s,i.hashFn,i.onComplete),c=t.syncPointTree_.subtree(r);if(s)de(!As(c.value),"If we're adding a query, it shouldn't be shadowed");else{const u=c.fold((d,p,f)=>{if(!We(d)&&p&&As(p))return[Wu(p).query];{let m=[];return p&&(m=m.concat(V_(p).map(T=>T.query))),Zt(f,(T,b)=>{m=m.concat(b)}),m}});for(let d=0;d<u.length;++d){const p=u[d];t.listenProvider_.stopListening(xl(p),Xl(t,p))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new qp(n)}node(){return this.node_}}class Yp{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Ct(this.path_,e);return new Yp(this.syncTree_,n)}node(){return Vp(this.syncTree_,this.path_)}}const Nk=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},o0=function(t,e,n){if(!t||typeof t!="object")return t;if(de(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Rk(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Ak(t[".sv"],e);de(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Rk=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:de(!1,"Unexpected server value: "+t)}},Ak=function(t,e,n){t.hasOwnProperty("increment")||de(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&de(!1,"Unexpected increment value: "+r);const s=e.node();if(de(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},X_=function(t,e,n,r){return Qp(e,new Yp(n,t),r)},Z_=function(t,e,n){return Qp(t,new qp(e),n)};function Qp(t,e,n){const r=t.getPriority().val(),s=o0(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,c=o0(o.getValue(),e,n);return c!==o.getValue()||s!==o.getPriority().val()?new $t(c,Mt(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new $t(s))),o.forEachChild(It,(c,u)=>{const d=Qp(u,e.getImmediateChild(c),n);d!==u&&(i=i.updateImmediateChild(c,d))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function Xp(t,e){let n=e instanceof at?e:new at(e),r=t,s=ze(n);for(;s!==null;){const i=ao(r.node.children,s)||{children:{},childCount:0};r=new Jp(s,r,i),n=ft(n),s=ze(n)}return r}function ko(t){return t.node.value}function ew(t,e){t.node.value=e,gf(t)}function tw(t){return t.node.childCount>0}function Pk(t){return ko(t)===void 0&&!tw(t)}function Hu(t,e){Zt(t.node.children,(n,r)=>{e(new Jp(n,t,r))})}function nw(t,e,n,r){n&&e(t),Hu(t,s=>{nw(s,e,!0)})}function Ok(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function xa(t){return new at(t.parent===null?t.name:xa(t.parent)+"/"+t.name)}function gf(t){t.parent!==null&&Dk(t.parent,t.name,t)}function Dk(t,e,n){const r=Pk(n),s=br(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,gf(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,gf(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk=/[\[\].#$\/\u0000-\u001F\u007F]/,Lk=/[\[\].#$\u0000-\u001F\u007F]/,Kd=10*1024*1024,Zp=function(t){return typeof t=="string"&&t.length!==0&&!Mk.test(t)},rw=function(t){return typeof t=="string"&&t.length!==0&&!Lk.test(t)},Fk=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),rw(t)},zk=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Ip(t)||t&&typeof t=="object"&&br(t,".sv")},sw=function(t,e,n,r){r&&e===void 0||Ku(Fu(t,"value"),e,n)},Ku=function(t,e,n){const r=n instanceof at?new n3(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Ys(r));if(typeof e=="function")throw new Error(t+"contains a function "+Ys(r)+" with contents = "+e.toString());if(Ip(e))throw new Error(t+"contains "+e.toString()+" "+Ys(r));if(typeof e=="string"&&e.length>Kd/3&&zu(e)>Kd)throw new Error(t+"contains a string greater than "+Kd+" utf8 bytes "+Ys(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(Zt(e,(o,c)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!Zp(o)))throw new Error(t+" contains an invalid key ("+o+") "+Ys(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);r3(r,o),Ku(t,c,r),s3(r)}),s&&i)throw new Error(t+' contains ".value" child '+Ys(r)+" in addition to actual children.")}},Bk=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const i=Gl(r);for(let o=0;o<i.length;o++)if(!(i[o]===".priority"&&o===i.length-1)){if(!Zp(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(t3);let s=null;for(n=0;n<e.length;n++){if(r=e[n],s!==null&&$n(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}},Uk=function(t,e,n,r){const s=Fu(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const i=[];Zt(e,(o,c)=>{const u=new at(o);if(Ku(s,c,Ct(n,u)),Rp(u)===".priority"&&!zk(c))throw new Error(s+"contains an invalid value for '"+u.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");i.push(u)}),Bk(s,i)},iw=function(t,e,n,r){if(!rw(n))throw new Error(Fu(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},$k=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),iw(t,e,n)},ow=function(t,e){if(ze(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},Wk=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Zp(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Fk(n))throw new Error(Fu(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Gu(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!Ap(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function lw(t,e,n){Gu(t,n),aw(t,r=>Ap(r,e))}function Kn(t,e,n){Gu(t,n),aw(t,r=>$n(r,e)||$n(e,r))}function aw(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(Hk(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function Hk(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();gl&&Yt("event: "+n.toString()),Io(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk="repo_interrupt",Gk=25;class qk{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Vk,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=su(),this.transactionQueueTree_=new Jp,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Yk(t,e,n){if(t.stats_=Tp(t.repoInfo_),t.forceRestClient_||Ij())t.server_=new ru(t.repoInfo_,(r,s,i,o)=>{l0(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>a0(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Lt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Fr(t.repoInfo_,e,(r,s,i,o)=>{l0(t,r,s,i,o)},r=>{a0(t,r)},r=>{Qk(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=Rj(t.repoInfo_,()=>new N3(t.stats_,t.server_)),t.infoData_=new C3,t.infoSyncTree_=new i0({startListening:(r,s,i,o)=>{let c=[];const u=t.infoData_.getNode(r._path);return u.isEmpty()||(c=va(t.infoSyncTree_,r._path,u),setTimeout(()=>{o("ok")},0)),c},stopListening:()=>{}}),eg(t,"connected",!1),t.serverSyncTree_=new i0({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(c,u)=>{const d=o(c,u);Kn(t.eventQueue_,r._path,d)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function cw(t){const n=t.infoData_.getNode(new at(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function qu(t){return Nk({timestamp:cw(t)})}function l0(t,e,n,r,s){t.dataUpdateCount++;const i=new at(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const u=Zc(n,d=>Mt(d));o=Ek(t.serverSyncTree_,i,u,s)}else{const u=Mt(n);o=q_(t.serverSyncTree_,i,u,s)}else if(r){const u=Zc(n,d=>Mt(d));o=wk(t.serverSyncTree_,i,u)}else{const u=Mt(n);o=va(t.serverSyncTree_,i,u)}let c=i;o.length>0&&(c=go(t,i)),Kn(t.eventQueue_,c,o)}function a0(t,e){eg(t,"connected",e),e===!1&&eT(t)}function Qk(t,e){Zt(e,(n,r)=>{eg(t,n,r)})}function eg(t,e,n){const r=new at("/.info/"+e),s=Mt(n);t.infoData_.updateSnapshot(r,s);const i=va(t.infoSyncTree_,r,s);Kn(t.eventQueue_,r,i)}function tg(t){return t.nextWriteId_++}function Jk(t,e,n){const r=Ck(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=Mt(s).withIndex(e._queryParams.getIndex());pf(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=va(t.serverSyncTree_,e._path,i);else{const c=Xl(t.serverSyncTree_,e);o=q_(t.serverSyncTree_,e._path,i,c)}return Kn(t.eventQueue_,e._path,o),hu(t.serverSyncTree_,e,n,null,!0),i},s=>(_a(t,"get for query "+Lt(e)+" failed: "+s),Promise.reject(new Error(s))))}function Xk(t,e,n,r,s){_a(t,"set",{path:e.toString(),value:n,priority:r});const i=qu(t),o=Mt(n,r),c=Vp(t.serverSyncTree_,e),u=Z_(o,c,i),d=tg(t),p=G_(t.serverSyncTree_,e,u,d,!0);Gu(t.eventQueue_,p),t.server_.put(e.toString(),o.val(!0),(m,T)=>{const b=m==="ok";b||gn("set at "+e+" failed: "+m);const N=ps(t.serverSyncTree_,d,!b);Kn(t.eventQueue_,e,N),mf(t,s,m,T)});const f=rg(t,e);go(t,f),Kn(t.eventQueue_,f,[])}function Zk(t,e,n,r){_a(t,"update",{path:e.toString(),value:n});let s=!0;const i=qu(t),o={};if(Zt(n,(c,u)=>{s=!1,o[c]=X_(Ct(e,c),Mt(u),t.serverSyncTree_,i)}),s)Yt("update() called with empty data.  Don't do anything."),mf(t,r,"ok",void 0);else{const c=tg(t),u=_k(t.serverSyncTree_,e,o,c);Gu(t.eventQueue_,u),t.server_.merge(e.toString(),n,(d,p)=>{const f=d==="ok";f||gn("update at "+e+" failed: "+d);const m=ps(t.serverSyncTree_,c,!f),T=m.length>0?go(t,e):e;Kn(t.eventQueue_,T,m),mf(t,r,d,p)}),Zt(n,d=>{const p=rg(t,Ct(e,d));go(t,p)}),Kn(t.eventQueue_,e,[])}}function eT(t){_a(t,"onDisconnectEvents");const e=qu(t),n=su();af(t.onDisconnect_,rt(),(s,i)=>{const o=X_(s,i,t.serverSyncTree_,e);A_(n,s,o)});let r=[];af(n,rt(),(s,i)=>{r=r.concat(va(t.serverSyncTree_,s,i));const o=rg(t,s);go(t,o)}),t.onDisconnect_=su(),Kn(t.eventQueue_,rt(),r)}function tT(t,e,n){let r;ze(e._path)===".info"?r=pf(t.infoSyncTree_,e,n):r=pf(t.serverSyncTree_,e,n),lw(t.eventQueue_,e._path,r)}function uw(t,e,n){let r;ze(e._path)===".info"?r=hu(t.infoSyncTree_,e,n):r=hu(t.serverSyncTree_,e,n),lw(t.eventQueue_,e._path,r)}function nT(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Kk)}function _a(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Yt(n,...e)}function mf(t,e,n,r){e&&Io(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function dw(t,e,n){return Vp(t.serverSyncTree_,e,n)||ke.EMPTY_NODE}function ng(t,e=t.transactionQueueTree_){if(e||Yu(t,e),ko(e)){const n=fw(t,e);de(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&rT(t,xa(e),n)}else tw(e)&&Hu(e,n=>{ng(t,n)})}function rT(t,e,n){const r=n.map(d=>d.currentWriteId),s=dw(t,e,r);let i=s;const o=s.hash();for(let d=0;d<n.length;d++){const p=n[d];de(p.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),p.status=1,p.retryCount++;const f=fn(e,p.path);i=i.updateChild(f,p.currentOutputSnapshotRaw)}const c=i.val(!0),u=e;t.server_.put(u.toString(),c,d=>{_a(t,"transaction put response",{path:u.toString(),status:d});let p=[];if(d==="ok"){const f=[];for(let m=0;m<n.length;m++)n[m].status=2,p=p.concat(ps(t.serverSyncTree_,n[m].currentWriteId)),n[m].onComplete&&f.push(()=>n[m].onComplete(null,!0,n[m].currentOutputSnapshotResolved)),n[m].unwatcher();Yu(t,Xp(t.transactionQueueTree_,e)),ng(t,t.transactionQueueTree_),Kn(t.eventQueue_,e,p);for(let m=0;m<f.length;m++)Io(f[m])}else{if(d==="datastale")for(let f=0;f<n.length;f++)n[f].status===3?n[f].status=4:n[f].status=0;else{gn("transaction at "+u.toString()+" failed: "+d);for(let f=0;f<n.length;f++)n[f].status=4,n[f].abortReason=d}go(t,e)}},o)}function go(t,e){const n=hw(t,e),r=xa(n),s=fw(t,n);return sT(t,s,r),r}function sT(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(c=>c.status===0).map(c=>c.currentWriteId);for(let c=0;c<e.length;c++){const u=e[c],d=fn(n,u.path);let p=!1,f;if(de(d!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===4)p=!0,f=u.abortReason,s=s.concat(ps(t.serverSyncTree_,u.currentWriteId,!0));else if(u.status===0)if(u.retryCount>=Gk)p=!0,f="maxretry",s=s.concat(ps(t.serverSyncTree_,u.currentWriteId,!0));else{const m=dw(t,u.path,o);u.currentInputSnapshot=m;const T=e[c].update(m.val());if(T!==void 0){Ku("transaction failed: Data returned ",T,u.path);let b=Mt(T);typeof T=="object"&&T!=null&&br(T,".priority")||(b=b.updatePriority(m.getPriority()));const A=u.currentWriteId,E=qu(t),w=Z_(b,m,E);u.currentOutputSnapshotRaw=b,u.currentOutputSnapshotResolved=w,u.currentWriteId=tg(t),o.splice(o.indexOf(A),1),s=s.concat(G_(t.serverSyncTree_,u.path,w,u.currentWriteId,u.applyLocally)),s=s.concat(ps(t.serverSyncTree_,A,!0))}else p=!0,f="nodata",s=s.concat(ps(t.serverSyncTree_,u.currentWriteId,!0))}Kn(t.eventQueue_,n,s),s=[],p&&(e[c].status=2,function(m){setTimeout(m,Math.floor(0))}(e[c].unwatcher),e[c].onComplete&&(f==="nodata"?r.push(()=>e[c].onComplete(null,!1,e[c].currentInputSnapshot)):r.push(()=>e[c].onComplete(new Error(f),!1,null))))}Yu(t,t.transactionQueueTree_);for(let c=0;c<r.length;c++)Io(r[c]);ng(t,t.transactionQueueTree_)}function hw(t,e){let n,r=t.transactionQueueTree_;for(n=ze(e);n!==null&&ko(r)===void 0;)r=Xp(r,n),e=ft(e),n=ze(e);return r}function fw(t,e){const n=[];return pw(t,e,n),n.sort((r,s)=>r.order-s.order),n}function pw(t,e,n){const r=ko(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);Hu(e,s=>{pw(t,s,n)})}function Yu(t,e){const n=ko(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,ew(e,n.length>0?n:void 0)}Hu(e,r=>{Yu(t,r)})}function rg(t,e){const n=xa(hw(t,e)),r=Xp(t.transactionQueueTree_,e);return Ok(r,s=>{Gd(t,s)}),Gd(t,r),nw(r,s=>{Gd(t,s)}),n}function Gd(t,e){const n=ko(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(de(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(de(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(ps(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?ew(e,void 0):n.length=i+1,Kn(t.eventQueue_,xa(e),s);for(let o=0;o<r.length;o++)Io(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iT(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function oT(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):gn(`Invalid query segment '${n}' in query '${t}'`)}return e}const c0=function(t,e){const n=lT(t),r=n.namespace;n.domain==="firebase.com"&&Hr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Hr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||yj();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new g_(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new at(n.pathString)}},lT=function(t){let e="",n="",r="",s="",i="",o=!0,c="https",u=443;if(typeof t=="string"){let d=t.indexOf("//");d>=0&&(c=t.substring(0,d-1),t=t.substring(d+2));let p=t.indexOf("/");p===-1&&(p=t.length);let f=t.indexOf("?");f===-1&&(f=t.length),e=t.substring(0,Math.min(p,f)),p<f&&(s=iT(t.substring(p,f)));const m=oT(t.substring(Math.min(t.length,f)));d=e.indexOf(":"),d>=0?(o=c==="https"||c==="wss",u=parseInt(e.substring(d+1),10)):d=e.length;const T=e.slice(0,d);if(T.toLowerCase()==="localhost")n="localhost";else if(T.split(".").length<=2)n=T;else{const b=e.indexOf(".");r=e.substring(0,b).toLowerCase(),n=e.substring(b+1),i=r}"ns"in m&&(i=m.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:o,scheme:c,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",aT=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let s;const i=new Array(8);for(s=7;s>=0;s--)i[s]=u0.charAt(n%64),n=Math.floor(n/64);de(n===0,"Cannot push at time == 0");let o=i.join("");if(r){for(s=11;s>=0&&e[s]===63;s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(Math.random()*64);for(s=0;s<12;s++)o+=u0.charAt(e[s]);return de(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Lt(this.snapshot.exportVal())}}class uT{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return de(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return We(this._path)?null:Rp(this._path)}get ref(){return new Zr(this._repo,this._path)}get _queryIdentifier(){const e=Yy(this._queryParams),n=jp(e);return n==="{}"?"default":n}get _queryObject(){return Yy(this._queryParams)}isEqual(e){if(e=_i(e),!(e instanceof sg))return!1;const n=this._repo===e._repo,r=Ap(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+e3(this._path)}}class Zr extends sg{constructor(e,n){super(e,n,new Mp,!1)}get parent(){const e=E_(this._path);return e===null?null:new Zr(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Zl{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new at(e),r=ea(this.ref,e);return new Zl(this._node.getChild(n),r,It)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new Zl(s,ea(this.ref,r),It)))}hasChild(e){const n=new at(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Ot(t,e){return t=_i(t),t._checkNotDeleted("ref"),e!==void 0?ea(t._root,e):t._root}function ea(t,e){return t=_i(t),ze(t._path)===null?$k("child","path",e):iw("child","path",e),new Zr(t._repo,Ct(t._path,e))}function dT(t,e){t=_i(t),ow("push",t._path),sw("push",e,t._path,!0);const n=cw(t._repo),r=aT(n),s=ea(t,r),i=ea(t,r);let o;return e!=null?o=hT(i,e).then(()=>i):o=Promise.resolve(i),s.then=o.then.bind(o),s.catch=o.then.bind(o,void 0),s}function hT(t,e){t=_i(t),ow("set",t._path),sw("set",e,t._path,!1);const n=new pa;return Xk(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Nr(t,e){Uk("update",e,t._path);const n=new pa;return Zk(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function mw(t){t=_i(t);const e=new gw(()=>{}),n=new Qu(e);return Jk(t._repo,t,n).then(r=>new Zl(r,new Zr(t._repo,t._path),t._queryParams.getIndex()))}class Qu{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new cT("value",this,new Zl(e.snapshotNode,new Zr(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new uT(this,e,n):null}matches(e){return e instanceof Qu?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function fT(t,e,n,r,s){const i=new gw(n,void 0),o=new Qu(i);return tT(t._repo,t,o),()=>uw(t._repo,t,o)}function Ji(t,e,n,r){return fT(t,"value",e)}function yw(t,e,n){uw(t._repo,t,null)}hk(Zr);yk(Zr);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT="FIREBASE_DATABASE_EMULATOR_HOST",yf={};let gT=!1;function mT(t,e,n,r){const s=e.lastIndexOf(":"),i=e.substring(0,s),o=Lu(i);t.repoInfo_=new g_(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(t.authTokenProvider_=r)}function yT(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||Hr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Yt("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=c0(i,s),c=o.repoInfo,u;typeof process<"u"&&Ry&&(u=Ry[pT]),u?(i=`http://${u}?ns=${c.namespace}`,o=c0(i,s),c=o.repoInfo):o.repoInfo.secure;const d=new kj(t.name,t.options,e);Wk("Invalid Firebase Database URL",o),We(o.path)||Hr("Database URL must point to the root of a Firebase Database (not including a child path).");const p=xT(c,t,d,new jj(t,n));return new _T(p,t)}function vT(t,e){const n=yf[e];(!n||n[t.key]!==t)&&Hr(`Database ${e}(${t.repoInfo_}) has already been deleted.`),nT(t),delete n[t.key]}function xT(t,e,n,r){let s=yf[e.name];s||(s={},yf[e.name]=s);let i=s[t.toURLString()];return i&&Hr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new qk(t,gT,n,r),s[t.toURLString()]=i,i}class _T{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Yk(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Zr(this._repo,rt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(vT(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Hr("Cannot call "+e+" on a deleted database.")}}function vw(t=Xx(),e){const n=qx(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=Fx("database");r&&wT(n,...r)}return n}function wT(t,e,n,r={}){t=_i(t),t._checkNotDeleted("useEmulator");const s=`${e}:${n}`,i=t._repoInternal;if(t._instanceStarted){if(s===t._repoInternal.repoInfo_.host&&$l(r,i.repoInfo_.emulatorOptions))return;Hr("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Hr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Sc(Sc.OWNER);else if(r.mockUserToken){const c=typeof r.mockUserToken=="string"?r.mockUserToken:Ux(r.mockUserToken,t.app.options.projectId);o=new Sc(c)}Lu(e)&&(Bx(e),$x("Database",!0)),mT(i,s,r,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ST(t){dj(Qx),Vl(new co("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return yT(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),Cs(Ay,Py,t),Cs(Ay,Py,"esm2020")}Fr.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Fr.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};ST();var d0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ig;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,v){function I(){}I.prototype=v.prototype,j.F=v.prototype,j.prototype=new I,j.prototype.constructor=j,j.D=function(k,x,R){for(var C=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)C[oe-2]=arguments[oe];return v.prototype[x].apply(k,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(j,v,I){I||(I=0);const k=Array(16);if(typeof v=="string")for(var x=0;x<16;++x)k[x]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(x=0;x<16;++x)k[x]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=j.g[0],I=j.g[1],x=j.g[2];let R=j.g[3],C;C=v+(R^I&(x^R))+k[0]+3614090360&4294967295,v=I+(C<<7&4294967295|C>>>25),C=R+(x^v&(I^x))+k[1]+3905402710&4294967295,R=v+(C<<12&4294967295|C>>>20),C=x+(I^R&(v^I))+k[2]+606105819&4294967295,x=R+(C<<17&4294967295|C>>>15),C=I+(v^x&(R^v))+k[3]+3250441966&4294967295,I=x+(C<<22&4294967295|C>>>10),C=v+(R^I&(x^R))+k[4]+4118548399&4294967295,v=I+(C<<7&4294967295|C>>>25),C=R+(x^v&(I^x))+k[5]+1200080426&4294967295,R=v+(C<<12&4294967295|C>>>20),C=x+(I^R&(v^I))+k[6]+2821735955&4294967295,x=R+(C<<17&4294967295|C>>>15),C=I+(v^x&(R^v))+k[7]+4249261313&4294967295,I=x+(C<<22&4294967295|C>>>10),C=v+(R^I&(x^R))+k[8]+1770035416&4294967295,v=I+(C<<7&4294967295|C>>>25),C=R+(x^v&(I^x))+k[9]+2336552879&4294967295,R=v+(C<<12&4294967295|C>>>20),C=x+(I^R&(v^I))+k[10]+4294925233&4294967295,x=R+(C<<17&4294967295|C>>>15),C=I+(v^x&(R^v))+k[11]+2304563134&4294967295,I=x+(C<<22&4294967295|C>>>10),C=v+(R^I&(x^R))+k[12]+1804603682&4294967295,v=I+(C<<7&4294967295|C>>>25),C=R+(x^v&(I^x))+k[13]+4254626195&4294967295,R=v+(C<<12&4294967295|C>>>20),C=x+(I^R&(v^I))+k[14]+2792965006&4294967295,x=R+(C<<17&4294967295|C>>>15),C=I+(v^x&(R^v))+k[15]+1236535329&4294967295,I=x+(C<<22&4294967295|C>>>10),C=v+(x^R&(I^x))+k[1]+4129170786&4294967295,v=I+(C<<5&4294967295|C>>>27),C=R+(I^x&(v^I))+k[6]+3225465664&4294967295,R=v+(C<<9&4294967295|C>>>23),C=x+(v^I&(R^v))+k[11]+643717713&4294967295,x=R+(C<<14&4294967295|C>>>18),C=I+(R^v&(x^R))+k[0]+3921069994&4294967295,I=x+(C<<20&4294967295|C>>>12),C=v+(x^R&(I^x))+k[5]+3593408605&4294967295,v=I+(C<<5&4294967295|C>>>27),C=R+(I^x&(v^I))+k[10]+38016083&4294967295,R=v+(C<<9&4294967295|C>>>23),C=x+(v^I&(R^v))+k[15]+3634488961&4294967295,x=R+(C<<14&4294967295|C>>>18),C=I+(R^v&(x^R))+k[4]+3889429448&4294967295,I=x+(C<<20&4294967295|C>>>12),C=v+(x^R&(I^x))+k[9]+568446438&4294967295,v=I+(C<<5&4294967295|C>>>27),C=R+(I^x&(v^I))+k[14]+3275163606&4294967295,R=v+(C<<9&4294967295|C>>>23),C=x+(v^I&(R^v))+k[3]+4107603335&4294967295,x=R+(C<<14&4294967295|C>>>18),C=I+(R^v&(x^R))+k[8]+1163531501&4294967295,I=x+(C<<20&4294967295|C>>>12),C=v+(x^R&(I^x))+k[13]+2850285829&4294967295,v=I+(C<<5&4294967295|C>>>27),C=R+(I^x&(v^I))+k[2]+4243563512&4294967295,R=v+(C<<9&4294967295|C>>>23),C=x+(v^I&(R^v))+k[7]+1735328473&4294967295,x=R+(C<<14&4294967295|C>>>18),C=I+(R^v&(x^R))+k[12]+2368359562&4294967295,I=x+(C<<20&4294967295|C>>>12),C=v+(I^x^R)+k[5]+4294588738&4294967295,v=I+(C<<4&4294967295|C>>>28),C=R+(v^I^x)+k[8]+2272392833&4294967295,R=v+(C<<11&4294967295|C>>>21),C=x+(R^v^I)+k[11]+1839030562&4294967295,x=R+(C<<16&4294967295|C>>>16),C=I+(x^R^v)+k[14]+4259657740&4294967295,I=x+(C<<23&4294967295|C>>>9),C=v+(I^x^R)+k[1]+2763975236&4294967295,v=I+(C<<4&4294967295|C>>>28),C=R+(v^I^x)+k[4]+1272893353&4294967295,R=v+(C<<11&4294967295|C>>>21),C=x+(R^v^I)+k[7]+4139469664&4294967295,x=R+(C<<16&4294967295|C>>>16),C=I+(x^R^v)+k[10]+3200236656&4294967295,I=x+(C<<23&4294967295|C>>>9),C=v+(I^x^R)+k[13]+681279174&4294967295,v=I+(C<<4&4294967295|C>>>28),C=R+(v^I^x)+k[0]+3936430074&4294967295,R=v+(C<<11&4294967295|C>>>21),C=x+(R^v^I)+k[3]+3572445317&4294967295,x=R+(C<<16&4294967295|C>>>16),C=I+(x^R^v)+k[6]+76029189&4294967295,I=x+(C<<23&4294967295|C>>>9),C=v+(I^x^R)+k[9]+3654602809&4294967295,v=I+(C<<4&4294967295|C>>>28),C=R+(v^I^x)+k[12]+3873151461&4294967295,R=v+(C<<11&4294967295|C>>>21),C=x+(R^v^I)+k[15]+530742520&4294967295,x=R+(C<<16&4294967295|C>>>16),C=I+(x^R^v)+k[2]+3299628645&4294967295,I=x+(C<<23&4294967295|C>>>9),C=v+(x^(I|~R))+k[0]+4096336452&4294967295,v=I+(C<<6&4294967295|C>>>26),C=R+(I^(v|~x))+k[7]+1126891415&4294967295,R=v+(C<<10&4294967295|C>>>22),C=x+(v^(R|~I))+k[14]+2878612391&4294967295,x=R+(C<<15&4294967295|C>>>17),C=I+(R^(x|~v))+k[5]+4237533241&4294967295,I=x+(C<<21&4294967295|C>>>11),C=v+(x^(I|~R))+k[12]+1700485571&4294967295,v=I+(C<<6&4294967295|C>>>26),C=R+(I^(v|~x))+k[3]+2399980690&4294967295,R=v+(C<<10&4294967295|C>>>22),C=x+(v^(R|~I))+k[10]+4293915773&4294967295,x=R+(C<<15&4294967295|C>>>17),C=I+(R^(x|~v))+k[1]+2240044497&4294967295,I=x+(C<<21&4294967295|C>>>11),C=v+(x^(I|~R))+k[8]+1873313359&4294967295,v=I+(C<<6&4294967295|C>>>26),C=R+(I^(v|~x))+k[15]+4264355552&4294967295,R=v+(C<<10&4294967295|C>>>22),C=x+(v^(R|~I))+k[6]+2734768916&4294967295,x=R+(C<<15&4294967295|C>>>17),C=I+(R^(x|~v))+k[13]+1309151649&4294967295,I=x+(C<<21&4294967295|C>>>11),C=v+(x^(I|~R))+k[4]+4149444226&4294967295,v=I+(C<<6&4294967295|C>>>26),C=R+(I^(v|~x))+k[11]+3174756917&4294967295,R=v+(C<<10&4294967295|C>>>22),C=x+(v^(R|~I))+k[2]+718787259&4294967295,x=R+(C<<15&4294967295|C>>>17),C=I+(R^(x|~v))+k[9]+3951481745&4294967295,j.g[0]=j.g[0]+v&4294967295,j.g[1]=j.g[1]+(x+(C<<21&4294967295|C>>>11))&4294967295,j.g[2]=j.g[2]+x&4294967295,j.g[3]=j.g[3]+R&4294967295}r.prototype.v=function(j,v){v===void 0&&(v=j.length);const I=v-this.blockSize,k=this.C;let x=this.h,R=0;for(;R<v;){if(x==0)for(;R<=I;)s(this,j,R),R+=this.blockSize;if(typeof j=="string"){for(;R<v;)if(k[x++]=j.charCodeAt(R++),x==this.blockSize){s(this,k),x=0;break}}else for(;R<v;)if(k[x++]=j[R++],x==this.blockSize){s(this,k),x=0;break}}this.h=x,this.o+=v},r.prototype.A=function(){var j=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);j[0]=128;for(var v=1;v<j.length-8;++v)j[v]=0;v=this.o*8;for(var I=j.length-8;I<j.length;++I)j[I]=v&255,v/=256;for(this.v(j),j=Array(16),v=0,I=0;I<4;++I)for(let k=0;k<32;k+=8)j[v++]=this.g[I]>>>k&255;return j};function i(j,v){var I=c;return Object.prototype.hasOwnProperty.call(I,j)?I[j]:I[j]=v(j)}function o(j,v){this.h=v;const I=[];let k=!0;for(let x=j.length-1;x>=0;x--){const R=j[x]|0;k&&R==v||(I[x]=R,k=!1)}this.g=I}var c={};function u(j){return-128<=j&&j<128?i(j,function(v){return new o([v|0],v<0?-1:0)}):new o([j|0],j<0?-1:0)}function d(j){if(isNaN(j)||!isFinite(j))return f;if(j<0)return A(d(-j));const v=[];let I=1;for(let k=0;j>=I;k++)v[k]=j/I|0,I*=4294967296;return new o(v,0)}function p(j,v){if(j.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(j.charAt(0)=="-")return A(p(j.substring(1),v));if(j.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=d(Math.pow(v,8));let k=f;for(let R=0;R<j.length;R+=8){var x=Math.min(8,j.length-R);const C=parseInt(j.substring(R,R+x),v);x<8?(x=d(Math.pow(v,x)),k=k.j(x).add(d(C))):(k=k.j(I),k=k.add(d(C)))}return k}var f=u(0),m=u(1),T=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-A(this).m();let j=0,v=1;for(let I=0;I<this.g.length;I++){const k=this.i(I);j+=(k>=0?k:4294967296+k)*v,v*=4294967296}return j},t.toString=function(j){if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(b(this))return"0";if(N(this))return"-"+A(this).toString(j);const v=d(Math.pow(j,6));var I=this;let k="";for(;;){const x=O(I,v).g;I=E(I,x.j(v));let R=((I.g.length>0?I.g[0]:I.h)>>>0).toString(j);if(I=x,b(I))return R+k;for(;R.length<6;)R="0"+R;k=R+k}},t.i=function(j){return j<0?0:j<this.g.length?this.g[j]:this.h};function b(j){if(j.h!=0)return!1;for(let v=0;v<j.g.length;v++)if(j.g[v]!=0)return!1;return!0}function N(j){return j.h==-1}t.l=function(j){return j=E(this,j),N(j)?-1:b(j)?0:1};function A(j){const v=j.g.length,I=[];for(let k=0;k<v;k++)I[k]=~j.g[k];return new o(I,~j.h).add(m)}t.abs=function(){return N(this)?A(this):this},t.add=function(j){const v=Math.max(this.g.length,j.g.length),I=[];let k=0;for(let x=0;x<=v;x++){let R=k+(this.i(x)&65535)+(j.i(x)&65535),C=(R>>>16)+(this.i(x)>>>16)+(j.i(x)>>>16);k=C>>>16,R&=65535,C&=65535,I[x]=C<<16|R}return new o(I,I[I.length-1]&-2147483648?-1:0)};function E(j,v){return j.add(A(v))}t.j=function(j){if(b(this)||b(j))return f;if(N(this))return N(j)?A(this).j(A(j)):A(A(this).j(j));if(N(j))return A(this.j(A(j)));if(this.l(T)<0&&j.l(T)<0)return d(this.m()*j.m());const v=this.g.length+j.g.length,I=[];for(var k=0;k<2*v;k++)I[k]=0;for(k=0;k<this.g.length;k++)for(let x=0;x<j.g.length;x++){const R=this.i(k)>>>16,C=this.i(k)&65535,oe=j.i(x)>>>16,_e=j.i(x)&65535;I[2*k+2*x]+=C*_e,w(I,2*k+2*x),I[2*k+2*x+1]+=R*_e,w(I,2*k+2*x+1),I[2*k+2*x+1]+=C*oe,w(I,2*k+2*x+1),I[2*k+2*x+2]+=R*oe,w(I,2*k+2*x+2)}for(j=0;j<v;j++)I[j]=I[2*j+1]<<16|I[2*j];for(j=v;j<2*v;j++)I[j]=0;return new o(I,0)};function w(j,v){for(;(j[v]&65535)!=j[v];)j[v+1]+=j[v]>>>16,j[v]&=65535,v++}function _(j,v){this.g=j,this.h=v}function O(j,v){if(b(v))throw Error("division by zero");if(b(j))return new _(f,f);if(N(j))return v=O(A(j),v),new _(A(v.g),A(v.h));if(N(v))return v=O(j,A(v)),new _(A(v.g),v.h);if(j.g.length>30){if(N(j)||N(v))throw Error("slowDivide_ only works with positive integers.");for(var I=m,k=v;k.l(j)<=0;)I=G(I),k=G(k);var x=X(I,1),R=X(k,1);for(k=X(k,2),I=X(I,2);!b(k);){var C=R.add(k);C.l(j)<=0&&(x=x.add(I),R=C),k=X(k,1),I=X(I,1)}return v=E(j,x.j(v)),new _(x,v)}for(x=f;j.l(v)>=0;){for(I=Math.max(1,Math.floor(j.m()/v.m())),k=Math.ceil(Math.log(I)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),R=d(I),C=R.j(v);N(C)||C.l(j)>0;)I-=k,R=d(I),C=R.j(v);b(R)&&(R=m),x=x.add(R),j=E(j,C)}return new _(x,j)}t.B=function(j){return O(this,j).h},t.and=function(j){const v=Math.max(this.g.length,j.g.length),I=[];for(let k=0;k<v;k++)I[k]=this.i(k)&j.i(k);return new o(I,this.h&j.h)},t.or=function(j){const v=Math.max(this.g.length,j.g.length),I=[];for(let k=0;k<v;k++)I[k]=this.i(k)|j.i(k);return new o(I,this.h|j.h)},t.xor=function(j){const v=Math.max(this.g.length,j.g.length),I=[];for(let k=0;k<v;k++)I[k]=this.i(k)^j.i(k);return new o(I,this.h^j.h)};function G(j){const v=j.g.length+1,I=[];for(let k=0;k<v;k++)I[k]=j.i(k)<<1|j.i(k-1)>>>31;return new o(I,j.h)}function X(j,v){const I=v>>5;v%=32;const k=j.g.length-I,x=[];for(let R=0;R<k;R++)x[R]=v>0?j.i(R+I)>>>v|j.i(R+I+1)<<32-v:j.i(R+I);return new o(x,j.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=p,ig=o}).apply(typeof d0<"u"?d0:typeof self<"u"?self:typeof window<"u"?window:{});var nc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var t,e=Object.defineProperty;function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof nc=="object"&&nc];for(var h=0;h<l.length;++h){var g=l[h];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(l,h){if(h)e:{var g=r;l=l.split(".");for(var S=0;S<l.length-1;S++){var B=l[S];if(!(B in g))break e;g=g[B]}l=l[l.length-1],S=g[l],h=h(S),h!=S&&h!=null&&e(g,l,{configurable:!0,writable:!0,value:h})}}s("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(l){return l||function(h){var g=[],S;for(S in h)Object.prototype.hasOwnProperty.call(h,S)&&g.push([S,h[S]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function c(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function u(l,h,g){return l.call.apply(l.bind,arguments)}function d(l,h,g){return d=u,d.apply(null,arguments)}function p(l,h){var g=Array.prototype.slice.call(arguments,1);return function(){var S=g.slice();return S.push.apply(S,arguments),l.apply(this,S)}}function f(l,h){function g(){}g.prototype=h.prototype,l.Z=h.prototype,l.prototype=new g,l.prototype.constructor=l,l.Ob=function(S,B,V){for(var ge=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)ge[Fe-2]=arguments[Fe];return h.prototype[B].apply(S,ge)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function T(l){const h=l.length;if(h>0){const g=Array(h);for(let S=0;S<h;S++)g[S]=l[S];return g}return[]}function b(l,h){for(let S=1;S<arguments.length;S++){const B=arguments[S];var g=typeof B;if(g=g!="object"?g:B?Array.isArray(B)?"array":g:"null",g=="array"||g=="object"&&typeof B.length=="number"){g=l.length||0;const V=B.length||0;l.length=g+V;for(let ge=0;ge<V;ge++)l[g+ge]=B[ge]}else l.push(B)}}class N{constructor(h,g){this.i=h,this.j=g,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function A(l){o.setTimeout(()=>{throw l},0)}function E(){var l=j;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class w{constructor(){this.h=this.g=null}add(h,g){const S=_.get();S.set(h,g),this.h?this.h.next=S:this.g=S,this.h=S}}var _=new N(()=>new O,l=>l.reset());class O{constructor(){this.next=this.g=this.h=null}set(h,g){this.h=h,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let G,X=!1,j=new w,v=()=>{const l=Promise.resolve(void 0);G=()=>{l.then(I)}};function I(){for(var l;l=E();){try{l.h.call(l.g)}catch(g){A(g)}var h=_;h.j(l),h.h<100&&(h.h++,l.next=h.g,h.g=l)}X=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function x(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};o.addEventListener("test",g,h),o.removeEventListener("test",g,h)}catch{}return l}();function C(l){return/^[\s\xa0]*$/.test(l)}function oe(l,h){x.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,h)}f(oe,x),oe.prototype.init=function(l,h){const g=this.type=l.type,S=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget,h||(g=="mouseover"?h=l.fromElement:g=="mouseout"&&(h=l.toElement)),this.relatedTarget=h,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&oe.Z.h.call(this)},oe.prototype.h=function(){oe.Z.h.call(this);const l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var _e="closure_listenable_"+(Math.random()*1e6|0),we=0;function Ae(l,h,g,S,B){this.listener=l,this.proxy=null,this.src=h,this.type=g,this.capture=!!S,this.ha=B,this.key=++we,this.da=this.fa=!1}function J(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function D(l,h,g){for(const S in l)h.call(g,l[S],S,l)}function q(l,h){for(const g in l)h.call(void 0,l[g],g,l)}function re(l){const h={};for(const g in l)h[g]=l[g];return h}const fe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function H(l,h){let g,S;for(let B=1;B<arguments.length;B++){S=arguments[B];for(g in S)l[g]=S[g];for(let V=0;V<fe.length;V++)g=fe[V],Object.prototype.hasOwnProperty.call(S,g)&&(l[g]=S[g])}}function M(l){this.src=l,this.g={},this.h=0}M.prototype.add=function(l,h,g,S,B){const V=l.toString();l=this.g[V],l||(l=this.g[V]=[],this.h++);const ge=F(l,h,S,B);return ge>-1?(h=l[ge],g||(h.fa=!1)):(h=new Ae(h,this.src,V,!!S,B),h.fa=g,l.push(h)),h};function Z(l,h){const g=h.type;if(g in l.g){var S=l.g[g],B=Array.prototype.indexOf.call(S,h,void 0),V;(V=B>=0)&&Array.prototype.splice.call(S,B,1),V&&(J(h),l.g[g].length==0&&(delete l.g[g],l.h--))}}function F(l,h,g,S){for(let B=0;B<l.length;++B){const V=l[B];if(!V.da&&V.listener==h&&V.capture==!!g&&V.ha==S)return B}return-1}var ye="closure_lm_"+(Math.random()*1e6|0),ve={};function Q(l,h,g,S,B){if(Array.isArray(h)){for(let V=0;V<h.length;V++)Q(l,h[V],g,S,B);return null}return g=K(g),l&&l[_e]?l.J(h,g,c(S)?!!S.capture:!1,B):le(l,h,g,!1,S,B)}function le(l,h,g,S,B,V){if(!h)throw Error("Invalid event type");const ge=c(B)?!!B.capture:!!B;let Fe=U(l);if(Fe||(l[ye]=Fe=new M(l)),g=Fe.add(h,g,S,ge,V),g.proxy)return g;if(S=Ee(),g.proxy=S,S.src=l,S.listener=g,l.addEventListener)R||(B=ge),B===void 0&&(B=!1),l.addEventListener(h.toString(),S,B);else if(l.attachEvent)l.attachEvent(P(h.toString()),S);else if(l.addListener&&l.removeListener)l.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Ee(){function l(g){return h.call(l.src,l.listener,g)}const h=z;return l}function W(l,h,g,S,B){if(Array.isArray(h))for(var V=0;V<h.length;V++)W(l,h[V],g,S,B);else S=c(S)?!!S.capture:!!S,g=K(g),l&&l[_e]?(l=l.i,V=String(h).toString(),V in l.g&&(h=l.g[V],g=F(h,g,S,B),g>-1&&(J(h[g]),Array.prototype.splice.call(h,g,1),h.length==0&&(delete l.g[V],l.h--)))):l&&(l=U(l))&&(h=l.g[h.toString()],l=-1,h&&(l=F(h,g,S,B)),(g=l>-1?h[l]:null)&&ee(g))}function ee(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[_e])Z(h.i,l);else{var g=l.type,S=l.proxy;h.removeEventListener?h.removeEventListener(g,S,l.capture):h.detachEvent?h.detachEvent(P(g),S):h.addListener&&h.removeListener&&h.removeListener(S),(g=U(h))?(Z(g,l),g.h==0&&(g.src=null,h[ye]=null)):J(l)}}}function P(l){return l in ve?ve[l]:ve[l]="on"+l}function z(l,h){if(l.da)l=!0;else{h=new oe(h,this);const g=l.listener,S=l.ha||l.src;l.fa&&ee(l),l=g.call(S,h)}return l}function U(l){return l=l[ye],l instanceof M?l:null}var ne="__closure_events_fn_"+(Math.random()*1e9>>>0);function K(l){return typeof l=="function"?l:(l[ne]||(l[ne]=function(h){return l.handleEvent(h)}),l[ne])}function se(){k.call(this),this.i=new M(this),this.M=this,this.G=null}f(se,k),se.prototype[_e]=!0,se.prototype.removeEventListener=function(l,h,g,S){W(this,l,h,g,S)};function te(l,h){var g,S=l.G;if(S)for(g=[];S;S=S.G)g.push(S);if(l=l.M,S=h.type||h,typeof h=="string")h=new x(h,l);else if(h instanceof x)h.target=h.target||l;else{var B=h;h=new x(S,l),H(h,B)}B=!0;let V,ge;if(g)for(ge=g.length-1;ge>=0;ge--)V=h.g=g[ge],B=ie(V,S,!0,h)&&B;if(V=h.g=l,B=ie(V,S,!0,h)&&B,B=ie(V,S,!1,h)&&B,g)for(ge=0;ge<g.length;ge++)V=h.g=g[ge],B=ie(V,S,!1,h)&&B}se.prototype.N=function(){if(se.Z.N.call(this),this.i){var l=this.i;for(const h in l.g){const g=l.g[h];for(let S=0;S<g.length;S++)J(g[S]);delete l.g[h],l.h--}}this.G=null},se.prototype.J=function(l,h,g,S){return this.i.add(String(l),h,!1,g,S)},se.prototype.K=function(l,h,g,S){return this.i.add(String(l),h,!0,g,S)};function ie(l,h,g,S){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();let B=!0;for(let V=0;V<h.length;++V){const ge=h[V];if(ge&&!ge.da&&ge.capture==g){const Fe=ge.listener,Pt=ge.ha||ge.src;ge.fa&&Z(l.i,ge),B=Fe.call(Pt,S)!==!1&&B}}return B&&!S.defaultPrevented}function ue(l,h){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=d(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:o.setTimeout(l,h||0)}function he(l){l.g=ue(()=>{l.g=null,l.i&&(l.i=!1,he(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class Ne extends k{constructor(h,g){super(),this.m=h,this.l=g,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:he(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function st(l){k.call(this),this.h=l,this.g={}}f(st,k);var Re=[];function Xe(l){D(l.g,function(h,g){this.g.hasOwnProperty(g)&&ee(h)},l),l.g={}}st.prototype.N=function(){st.Z.N.call(this),Xe(this)},st.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ue=o.JSON.stringify,Kt=o.JSON.parse,Ge=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function en(){}function ln(){}var ut={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function an(){x.call(this,"d")}f(an,x);function To(){x.call(this,"c")}f(To,x);var cr={},Fs=null;function cn(){return Fs=Fs||new se}cr.Ia="serverreachability";function Mn(l){x.call(this,cr.Ia,l)}f(Mn,x);function zt(l){const h=cn();te(h,new Mn(h))}cr.STAT_EVENT="statevent";function es(l,h){x.call(this,cr.STAT_EVENT,l),this.stat=h}f(es,x);function xt(l){const h=cn();te(h,new es(h,l))}cr.Ja="timingevent";function Er(l,h){x.call(this,cr.Ja,l),this.size=h}f(Er,x);function ts(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},h)}function zs(){this.g=!0}zs.prototype.ua=function(){this.g=!1};function Ln(l,h,g,S,B,V){l.info(function(){if(l.g)if(V){var ge="",Fe=V.split("&");for(let ct=0;ct<Fe.length;ct++){var Pt=Fe[ct].split("=");if(Pt.length>1){const Bt=Pt[0];Pt=Pt[1];const dr=Bt.split("_");ge=dr.length>=2&&dr[1]=="type"?ge+(Bt+"="+Pt+"&"):ge+(Bt+"=redacted&")}}}else ge=null;else ge=V;return"XMLHTTP REQ ("+S+") [attempt "+B+"]: "+h+`
`+g+`
`+ge})}function ug(l,h,g,S,B,V,ge){l.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+B+"]: "+h+`
`+g+`
`+V+" "+ge})}function Bs(l,h,g,S){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+No(l,g)+(S?" "+S:"")})}function ba(l,h){l.info(function(){return"TIMEOUT: "+h})}zs.prototype.info=function(){};function No(l,h){if(!l.g)return h;if(!h)return null;try{const V=JSON.parse(h);if(V){for(l=0;l<V.length;l++)if(Array.isArray(V[l])){var g=V[l];if(!(g.length<2)){var S=g[1];if(Array.isArray(S)&&!(S.length<1)){var B=S[0];if(B!="noop"&&B!="stop"&&B!="close")for(let ge=1;ge<S.length;ge++)S[ge]=""}}}}return Ue(V)}catch{return h}}var Ro={NO_ERROR:0,TIMEOUT:8},Ju={},Cr;function bi(){}f(bi,en),bi.prototype.g=function(){return new XMLHttpRequest},Cr=new bi;function Us(l){return encodeURIComponent(String(l))}function Ei(l){var h=1;l=l.split(":");const g=[];for(;h>0&&l.length;)g.push(l.shift()),h--;return l.length&&g.push(l.join(":")),g}function ur(l,h,g,S){this.j=l,this.i=h,this.l=g,this.S=S||1,this.V=new st(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ea}function Ea(){this.i=null,this.g="",this.h=!1}var Ao={},Po={};function Oo(l,h,g){l.M=1,l.A=it(Ie(h)),l.u=g,l.R=!0,Ca(l,null)}function Ca(l,h){l.F=Date.now(),L(l),l.B=Ie(l.A);var g=l.B,S=l.S;Array.isArray(S)||(S=[String(S)]),gg(g.i,"t",S),l.C=0,g=l.j.L,l.h=new Ea,l.g=Pg(l.j,g?h:null,!l.u),l.P>0&&(l.O=new Ne(d(l.Y,l,l.g),l.P)),h=l.V,g=l.g,S=l.ba;var B="readystatechange";Array.isArray(B)||(B&&(Re[0]=B.toString()),B=Re);for(let V=0;V<B.length;V++){const ge=Q(g,B[V],S||h.handleEvent,!1,h.h||h);if(!ge)break;h.g[ge.key]=ge}h=l.J?re(l.J):{},l.u?(l.v||(l.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,h)):(l.v="GET",l.g.ea(l.B,l.v,null,h)),zt(),Ln(l.i,l.v,l.B,l.l,l.S,l.u)}ur.prototype.ba=function(l){l=l.target;const h=this.O;h&&rs(l)==3?h.j():this.Y(l)},ur.prototype.Y=function(l){try{if(l==this.g)e:{const Fe=rs(this.g),Pt=this.g.ya(),ct=this.g.ca();if(!(Fe<3)&&(Fe!=3||this.g&&(this.h.h||this.g.la()||Sg(this.g)))){this.K||Fe!=4||Pt==7||(Pt==8||ct<=0?zt(3):zt(2)),Ce(this);var h=this.g.ca();this.X=h;var g=Ia(this);if(this.o=h==200,ug(this.i,this.v,this.B,this.l,this.S,Fe,h),this.o){if(this.U&&!this.L){t:{if(this.g){var S,B=this.g;if((S=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(S)){var V=S;break t}}V=null}if(l=V)Bs(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,nt(this,l);else{this.o=!1,this.m=3,xt(12),Te(this),Pe(this);break e}}if(this.R){l=!0;let Bt;for(;!this.K&&this.C<g.length;)if(Bt=Xu(this,g),Bt==Po){Fe==4&&(this.m=4,xt(14),l=!1),Bs(this.i,this.l,null,"[Incomplete Response]");break}else if(Bt==Ao){this.m=4,xt(15),Bs(this.i,this.l,g,"[Invalid Chunk]"),l=!1;break}else Bs(this.i,this.l,Bt,null),nt(this,Bt);if(Ir(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fe!=4||g.length!=0||this.h.h||(this.m=1,xt(16),l=!1),this.o=this.o&&l,!l)Bs(this.i,this.l,g,"[Invalid Chunked Response]"),Te(this),Pe(this);else if(g.length>0&&!this.W){this.W=!0;var ge=this.j;ge.g==this&&ge.aa&&!ge.P&&(ge.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),sd(ge),ge.P=!0,xt(11))}}else Bs(this.i,this.l,g,null),nt(this,g);Fe==4&&Te(this),this.o&&!this.K&&(Fe==4?Tg(this.j,this):(this.o=!1,L(this)))}else Mw(this.g),h==400&&g.indexOf("Unknown SID")>0?(this.m=3,xt(12)):(this.m=0,xt(13)),Te(this),Pe(this)}}}catch{}finally{}};function Ia(l){if(!Ir(l))return l.g.la();const h=Sg(l.g);if(h==="")return"";let g="";const S=h.length,B=rs(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return Te(l),Pe(l),"";l.h.i=new o.TextDecoder}for(let V=0;V<S;V++)l.h.h=!0,g+=l.h.i.decode(h[V],{stream:!(B&&V==S-1)});return h.length=0,l.h.g+=g,l.C=0,l.h.g}function Ir(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function Xu(l,h){var g=l.C,S=h.indexOf(`
`,g);return S==-1?Po:(g=Number(h.substring(g,S)),isNaN(g)?Ao:(S+=1,S+g>h.length?Po:(h=h.slice(S,S+g),l.C=S+g,h)))}ur.prototype.cancel=function(){this.K=!0,Te(this)};function L(l){l.T=Date.now()+l.H,ce(l,l.H)}function ce(l,h){if(l.D!=null)throw Error("WatchDog timer not null");l.D=ts(d(l.aa,l),h)}function Ce(l){l.D&&(o.clearTimeout(l.D),l.D=null)}ur.prototype.aa=function(){this.D=null;const l=Date.now();l-this.T>=0?(ba(this.i,this.B),this.M!=2&&(zt(),xt(17)),Te(this),this.m=2,Pe(this)):ce(this,this.T-l)};function Pe(l){l.j.I==0||l.K||Tg(l.j,l)}function Te(l){Ce(l);var h=l.O;h&&typeof h.dispose=="function"&&h.dispose(),l.O=null,Xe(l.V),l.g&&(h=l.g,l.g=null,h.abort(),h.dispose())}function nt(l,h){try{var g=l.j;if(g.I!=0&&(g.g==l||Se(g.h,l))){if(!l.L&&Se(g.h,l)&&g.I==3){try{var S=g.Ba.g.parse(h)}catch{S=null}if(Array.isArray(S)&&S.length==3){var B=S;if(B[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<l.F)Pa(g),Ra(g);else break e;rd(g),xt(18)}}else g.xa=B[1],0<g.xa-g.K&&B[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=ts(d(g.Va,g),6e3));De(g.h)<=1&&g.ta&&(g.ta=void 0)}else Ws(g,11)}else if((l.L||g.g==l)&&Pa(g),!C(h))for(B=g.Ba.g.parse(h),h=0;h<B.length;h++){let ct=B[h];const Bt=ct[0];if(!(Bt<=g.K))if(g.K=Bt,ct=ct[1],g.I==2)if(ct[0]=="c"){g.M=ct[1],g.ba=ct[2];const dr=ct[3];dr!=null&&(g.ka=dr,g.j.info("VER="+g.ka));const Vs=ct[4];Vs!=null&&(g.za=Vs,g.j.info("SVER="+g.za));const ss=ct[5];ss!=null&&typeof ss=="number"&&ss>0&&(S=1.5*ss,g.O=S,g.j.info("backChannelRequestTimeoutMs_="+S)),S=g;const is=l.g;if(is){const Oa=is.g?is.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Oa){var V=S.h;V.g||Oa.indexOf("spdy")==-1&&Oa.indexOf("quic")==-1&&Oa.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(be(V,V.h),V.h=null))}if(S.G){const id=is.g?is.g.getResponseHeader("X-HTTP-Session-Id"):null;id&&(S.wa=id,Oe(S.J,S.G,id))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-l.F,g.j.info("Handshake RTT: "+g.T+"ms")),S=g;var ge=l;if(S.na=Ag(S,S.L?S.ba:null,S.W),ge.L){$e(S.h,ge);var Fe=ge,Pt=S.O;Pt&&(Fe.H=Pt),Fe.D&&(Ce(Fe),L(Fe)),S.g=ge}else jg(S);g.i.length>0&&Aa(g)}else ct[0]!="stop"&&ct[0]!="close"||Ws(g,7);else g.I==3&&(ct[0]=="stop"||ct[0]=="close"?ct[0]=="stop"?Ws(g,7):nd(g):ct[0]!="noop"&&g.l&&g.l.qa(ct),g.A=0)}}zt(4)}catch{}}var Ze=class{constructor(l,h){this.g=l,this.map=h}};function je(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function et(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function De(l){return l.h?1:l.g?l.g.size:0}function Se(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function be(l,h){l.g?l.g.add(h):l.h=h}function $e(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}je.prototype.cancel=function(){if(this.i=dt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function dt(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const g of l.g.values())h=h.concat(g.G);return h}return T(l.i)}var Le=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ke(l,h){if(l){l=l.split("&");for(let g=0;g<l.length;g++){const S=l[g].indexOf("=");let B,V=null;S>=0?(B=l[g].substring(0,S),V=l[g].substring(S+1)):B=l[g],h(B,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function pe(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;l instanceof pe?(this.l=l.l,qe(this,l.j),this.o=l.o,this.g=l.g,gt(this,l.u),this.h=l.h,kt(this,mg(l.i)),this.m=l.m):l&&(h=String(l).match(Le))?(this.l=!1,qe(this,h[1]||"",!0),this.o=un(h[2]||""),this.g=un(h[3]||"",!0),gt(this,h[4]),this.h=un(h[5]||"",!0),kt(this,h[6]||"",!0),this.m=un(h[7]||"")):(this.l=!1,this.i=new Do(null,this.l))}pe.prototype.toString=function(){const l=[];var h=this.j;h&&l.push(Gn(h,ka,!0),":");var g=this.g;return(g||h=="file")&&(l.push("//"),(h=this.o)&&l.push(Gn(h,ka,!0),"@"),l.push(Us(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&l.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(Gn(g,g.charAt(0)=="/"?dg:Zu,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",Gn(g,Tw)),l.join("")},pe.prototype.resolve=function(l){const h=Ie(this);let g=!!l.j;g?qe(h,l.j):g=!!l.o,g?h.o=l.o:g=!!l.g,g?h.g=l.g:g=l.u!=null;var S=l.h;if(g)gt(h,l.u);else if(g=!!l.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var B=h.h.lastIndexOf("/");B!=-1&&(S=h.h.slice(0,B+1)+S)}if(B=S,B==".."||B==".")S="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){S=B.lastIndexOf("/",0)==0,B=B.split("/");const V=[];for(let ge=0;ge<B.length;){const Fe=B[ge++];Fe=="."?S&&ge==B.length&&V.push(""):Fe==".."?((V.length>1||V.length==1&&V[0]!="")&&V.pop(),S&&ge==B.length&&V.push("")):(V.push(Fe),S=!0)}S=V.join("/")}else S=B}return g?h.h=S:g=l.i.toString()!=="",g?kt(h,mg(l.i)):g=!!l.m,g&&(h.m=l.m),h};function Ie(l){return new pe(l)}function qe(l,h,g){l.j=g?un(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function gt(l,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);l.u=h}else l.u=null}function kt(l,h,g){h instanceof Do?(l.i=h,Nw(l.i,l.l)):(g||(h=Gn(h,kw)),l.i=new Do(h,l.l))}function Oe(l,h,g){l.i.set(h,g)}function it(l){return Oe(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function un(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Gn(l,h,g){return typeof l=="string"?(l=encodeURI(l).replace(h,ja),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function ja(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var ka=/[#\/\?@]/g,Zu=/[#\?:]/g,dg=/[#\?]/g,kw=/[#\?@]/g,Tw=/#/g;function Do(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function $s(l){l.g||(l.g=new Map,l.h=0,l.i&&Ke(l.i,function(h,g){l.add(decodeURIComponent(h.replace(/\+/g," ")),g)}))}t=Do.prototype,t.add=function(l,h){$s(this),this.i=null,l=Ci(this,l);let g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(h),this.h+=1,this};function hg(l,h){$s(l),h=Ci(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function fg(l,h){return $s(l),h=Ci(l,h),l.g.has(h)}t.forEach=function(l,h){$s(this),this.g.forEach(function(g,S){g.forEach(function(B){l.call(h,B,S,this)},this)},this)};function pg(l,h){$s(l);let g=[];if(typeof h=="string")fg(l,h)&&(g=g.concat(l.g.get(Ci(l,h))));else for(l=Array.from(l.g.values()),h=0;h<l.length;h++)g=g.concat(l[h]);return g}t.set=function(l,h){return $s(this),this.i=null,l=Ci(this,l),fg(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=pg(this,l),l.length>0?String(l[0]):h):h};function gg(l,h,g){hg(l,h),g.length>0&&(l.i=null,l.g.set(Ci(l,h),T(g)),l.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(let S=0;S<h.length;S++){var g=h[S];const B=Us(g);g=pg(this,g);for(let V=0;V<g.length;V++){let ge=B;g[V]!==""&&(ge+="="+Us(g[V])),l.push(ge)}}return this.i=l.join("&")};function mg(l){const h=new Do;return h.i=l.i,l.g&&(h.g=new Map(l.g),h.h=l.h),h}function Ci(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function Nw(l,h){h&&!l.j&&($s(l),l.i=null,l.g.forEach(function(g,S){const B=S.toLowerCase();S!=B&&(hg(this,S),gg(this,B,g))},l)),l.j=h}function Rw(l,h){const g=new zs;if(o.Image){const S=new Image;S.onload=p(ns,g,"TestLoadImage: loaded",!0,h,S),S.onerror=p(ns,g,"TestLoadImage: error",!1,h,S),S.onabort=p(ns,g,"TestLoadImage: abort",!1,h,S),S.ontimeout=p(ns,g,"TestLoadImage: timeout",!1,h,S),o.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=l}else h(!1)}function Aw(l,h){const g=new zs,S=new AbortController,B=setTimeout(()=>{S.abort(),ns(g,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:S.signal}).then(V=>{clearTimeout(B),V.ok?ns(g,"TestPingServer: ok",!0,h):ns(g,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(B),ns(g,"TestPingServer: error",!1,h)})}function ns(l,h,g,S,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),S(g)}catch{}}function Pw(){this.g=new Ge}function ed(l){this.i=l.Sb||null,this.h=l.ab||!1}f(ed,en),ed.prototype.g=function(){return new Ta(this.i,this.h)};function Ta(l,h){se.call(this),this.H=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Ta,se),t=Ta.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=h,this.readyState=1,Lo(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(h.body=l),(this.H||o).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Mo(this)),this.readyState=0},t.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Lo(this)),this.g&&(this.readyState=3,Lo(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;yg(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function yg(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}t.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Mo(this):Lo(this),this.readyState==3&&yg(this)}},t.Oa=function(l){this.g&&(this.response=this.responseText=l,Mo(this))},t.Na=function(l){this.g&&(this.response=l,Mo(this))},t.ga=function(){this.g&&Mo(this)};function Mo(l){l.readyState=4,l.l=null,l.j=null,l.B=null,Lo(l)}t.setRequestHeader=function(l,h){this.A.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var g=h.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=h.next();return l.join(`\r
`)};function Lo(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Ta.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function vg(l){let h="";return D(l,function(g,S){h+=S,h+=":",h+=g,h+=`\r
`}),h}function td(l,h,g){e:{for(S in g){var S=!1;break e}S=!0}S||(g=vg(g),typeof l=="string"?g!=null&&Us(g):Oe(l,h,g))}function Tt(l){se.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(Tt,se);var Ow=/^https?$/i,Dw=["POST","PUT"];t=Tt.prototype,t.Fa=function(l){this.H=l},t.ea=function(l,h,g,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Cr.g(),this.g.onreadystatechange=m(d(this.Ca,this));try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(V){xg(this,V);return}if(l=g||"",g=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var B in S)g.set(B,S[B]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const V of S.keys())g.set(V,S.get(V));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(g.keys()).find(V=>V.toLowerCase()=="content-type"),B=o.FormData&&l instanceof o.FormData,!(Array.prototype.indexOf.call(Dw,h,void 0)>=0)||S||B||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,ge]of g)this.g.setRequestHeader(V,ge);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(V){xg(this,V)}};function xg(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.o=5,_g(l),Na(l)}function _g(l){l.A||(l.A=!0,te(l,"complete"),te(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,te(this,"complete"),te(this,"abort"),Na(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Na(this,!0)),Tt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?wg(this):this.Xa())},t.Xa=function(){wg(this)};function wg(l){if(l.h&&typeof i<"u"){if(l.v&&rs(l)==4)setTimeout(l.Ca.bind(l),0);else if(te(l,"readystatechange"),rs(l)==4){l.h=!1;try{const V=l.ca();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var g;if(!(g=h)){var S;if(S=V===0){let ge=String(l.D).match(Le)[1]||null;!ge&&o.self&&o.self.location&&(ge=o.self.location.protocol.slice(0,-1)),S=!Ow.test(ge?ge.toLowerCase():"")}g=S}if(g)te(l,"complete"),te(l,"success");else{l.o=6;try{var B=rs(l)>2?l.g.statusText:""}catch{B=""}l.l=B+" ["+l.ca()+"]",_g(l)}}finally{Na(l)}}}}function Na(l,h){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);const g=l.g;l.g=null,h||te(l,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function rs(l){return l.g?l.g.readyState:0}t.ca=function(){try{return rs(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),Kt(h)}};function Sg(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Mw(l){const h={};l=(l.g&&rs(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<l.length;S++){if(C(l[S]))continue;var g=Ei(l[S]);const B=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const V=h[B]||[];h[B]=V,V.push(g)}q(h,function(S){return S.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fo(l,h,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||h}function bg(l){this.za=0,this.i=[],this.j=new zs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Fo("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Fo("baseRetryDelayMs",5e3,l),this.Za=Fo("retryDelaySeedMs",1e4,l),this.Ta=Fo("forwardChannelMaxRetries",2,l),this.va=Fo("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new je(l&&l.concurrentRequestLimit),this.Ba=new Pw,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=bg.prototype,t.ka=8,t.I=1,t.connect=function(l,h,g,S){xt(0),this.W=l,this.H=h||{},g&&S!==void 0&&(this.H.OSID=g,this.H.OAID=S),this.F=this.X,this.J=Ag(this,null,this.W),Aa(this)};function nd(l){if(Eg(l),l.I==3){var h=l.V++,g=Ie(l.J);if(Oe(g,"SID",l.M),Oe(g,"RID",h),Oe(g,"TYPE","terminate"),zo(l,g),h=new ur(l,l.j,h),h.M=2,h.A=it(Ie(g)),g=!1,o.navigator&&o.navigator.sendBeacon)try{g=o.navigator.sendBeacon(h.A.toString(),"")}catch{}!g&&o.Image&&(new Image().src=h.A,g=!0),g||(h.g=Pg(h.j,null),h.g.ea(h.A)),h.F=Date.now(),L(h)}Rg(l)}function Ra(l){l.g&&(sd(l),l.g.cancel(),l.g=null)}function Eg(l){Ra(l),l.v&&(o.clearTimeout(l.v),l.v=null),Pa(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&o.clearTimeout(l.m),l.m=null)}function Aa(l){if(!et(l.h)&&!l.m){l.m=!0;var h=l.Ea;G||v(),X||(G(),X=!0),j.add(h,l),l.D=0}}function Lw(l,h){return De(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=h.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=ts(d(l.Ea,l,h),Ng(l,l.D)),l.D++,!0)}t.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;const B=new ur(this,this.j,l);let V=this.o;if(this.U&&(V?(V=re(V),H(V,this.U)):V=this.U),this.u!==null||this.R||(B.J=V,V=null),this.S)e:{for(var h=0,g=0;g<this.i.length;g++){t:{var S=this.i[g];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(h+=S,h>4096){h=g;break e}if(h===4096||g===this.i.length-1){h=g+1;break e}}h=1e3}else h=1e3;h=Ig(this,B,h),g=Ie(this.J),Oe(g,"RID",l),Oe(g,"CVER",22),this.G&&Oe(g,"X-HTTP-Session-Id",this.G),zo(this,g),V&&(this.R?h="headers="+Us(vg(V))+"&"+h:this.u&&td(g,this.u,V)),be(this.h,B),this.Ra&&Oe(g,"TYPE","init"),this.S?(Oe(g,"$req",h),Oe(g,"SID","null"),B.U=!0,Oo(B,g,null)):Oo(B,g,h),this.I=2}}else this.I==3&&(l?Cg(this,l):this.i.length==0||et(this.h)||Cg(this))};function Cg(l,h){var g;h?g=h.l:g=l.V++;const S=Ie(l.J);Oe(S,"SID",l.M),Oe(S,"RID",g),Oe(S,"AID",l.K),zo(l,S),l.u&&l.o&&td(S,l.u,l.o),g=new ur(l,l.j,g,l.D+1),l.u===null&&(g.J=l.o),h&&(l.i=h.G.concat(l.i)),h=Ig(l,g,1e3),g.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),be(l.h,g),Oo(g,S,h)}function zo(l,h){l.H&&D(l.H,function(g,S){Oe(h,S,g)}),l.l&&D({},function(g,S){Oe(h,S,g)})}function Ig(l,h,g){g=Math.min(l.i.length,g);const S=l.l?d(l.l.Ka,l.l,l):null;e:{var B=l.i;let Fe=-1;for(;;){const Pt=["count="+g];Fe==-1?g>0?(Fe=B[0].g,Pt.push("ofs="+Fe)):Fe=0:Pt.push("ofs="+Fe);let ct=!0;for(let Bt=0;Bt<g;Bt++){var V=B[Bt].g;const dr=B[Bt].map;if(V-=Fe,V<0)Fe=Math.max(0,B[Bt].g-100),ct=!1;else try{V="req"+V+"_"||"";try{var ge=dr instanceof Map?dr:Object.entries(dr);for(const[Vs,ss]of ge){let is=ss;c(ss)&&(is=Ue(ss)),Pt.push(V+Vs+"="+encodeURIComponent(is))}}catch(Vs){throw Pt.push(V+"type="+encodeURIComponent("_badmap")),Vs}}catch{S&&S(dr)}}if(ct){ge=Pt.join("&");break e}}ge=void 0}return l=l.i.splice(0,g),h.G=l,ge}function jg(l){if(!l.g&&!l.v){l.Y=1;var h=l.Da;G||v(),X||(G(),X=!0),j.add(h,l),l.A=0}}function rd(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=ts(d(l.Da,l),Ng(l,l.A)),l.A++,!0)}t.Da=function(){if(this.v=null,kg(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=ts(d(this.Wa,this),l)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,xt(10),Ra(this),kg(this))};function sd(l){l.B!=null&&(o.clearTimeout(l.B),l.B=null)}function kg(l){l.g=new ur(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var h=Ie(l.na);Oe(h,"RID","rpc"),Oe(h,"SID",l.M),Oe(h,"AID",l.K),Oe(h,"CI",l.F?"0":"1"),!l.F&&l.ia&&Oe(h,"TO",l.ia),Oe(h,"TYPE","xmlhttp"),zo(l,h),l.u&&l.o&&td(h,l.u,l.o),l.O&&(l.g.H=l.O);var g=l.g;l=l.ba,g.M=1,g.A=it(Ie(h)),g.u=null,g.R=!0,Ca(g,l)}t.Va=function(){this.C!=null&&(this.C=null,Ra(this),rd(this),xt(19))};function Pa(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function Tg(l,h){var g=null;if(l.g==h){Pa(l),sd(l),l.g=null;var S=2}else if(Se(l.h,h))g=h.G,$e(l.h,h),S=1;else return;if(l.I!=0){if(h.o)if(S==1){g=h.u?h.u.length:0,h=Date.now()-h.F;var B=l.D;S=cn(),te(S,new Er(S,g)),Aa(l)}else jg(l);else if(B=h.m,B==3||B==0&&h.X>0||!(S==1&&Lw(l,h)||S==2&&rd(l)))switch(g&&g.length>0&&(h=l.h,h.i=h.i.concat(g)),B){case 1:Ws(l,5);break;case 4:Ws(l,10);break;case 3:Ws(l,6);break;default:Ws(l,2)}}}function Ng(l,h){let g=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(g*=2),g*h}function Ws(l,h){if(l.j.info("Error code "+h),h==2){var g=d(l.bb,l),S=l.Ua;const B=!S;S=new pe(S||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||qe(S,"https"),it(S),B?Rw(S.toString(),g):Aw(S.toString(),g)}else xt(2);l.I=0,l.l&&l.l.pa(h),Rg(l),Eg(l)}t.bb=function(l){l?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function Rg(l){if(l.I=0,l.ja=[],l.l){const h=dt(l.h);(h.length!=0||l.i.length!=0)&&(b(l.ja,h),b(l.ja,l.i),l.h.i.length=0,T(l.i),l.i.length=0),l.l.oa()}}function Ag(l,h,g){var S=g instanceof pe?Ie(g):new pe(g);if(S.g!="")h&&(S.g=h+"."+S.g),gt(S,S.u);else{var B=o.location;S=B.protocol,h=h?h+"."+B.hostname:B.hostname,B=+B.port;const V=new pe(null);S&&qe(V,S),h&&(V.g=h),B&&gt(V,B),g&&(V.h=g),S=V}return g=l.G,h=l.wa,g&&h&&Oe(S,g,h),Oe(S,"VER",l.ka),zo(l,S),S}function Pg(l,h,g){if(h&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Aa&&!l.ma?new Tt(new ed({ab:g})):new Tt(l.ma),h.Fa(l.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Og(){}t=Og.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Fn(l,h){se.call(this),this.g=new bg(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(l?l["X-WebChannel-Client-Profile"]=h.sa:l={"X-WebChannel-Client-Profile":h.sa}),this.g.U=l,(l=h&&h.Qb)&&!C(l)&&(this.g.u=l),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!C(h)&&(this.g.G=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Ii(this)}f(Fn,se),Fn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Fn.prototype.close=function(){nd(this.g)},Fn.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.v&&(g={},g.__data__=Ue(l),l=g);h.i.push(new Ze(h.Ya++,l)),h.I==3&&Aa(h)},Fn.prototype.N=function(){this.g.l=null,delete this.j,nd(this.g),delete this.g,Fn.Z.N.call(this)};function Dg(l){an.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const g in h){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}f(Dg,an);function Mg(){To.call(this),this.status=1}f(Mg,To);function Ii(l){this.g=l}f(Ii,Og),Ii.prototype.ra=function(){te(this.g,"a")},Ii.prototype.qa=function(l){te(this.g,new Dg(l))},Ii.prototype.pa=function(l){te(this.g,new Mg)},Ii.prototype.oa=function(){te(this.g,"b")},Fn.prototype.send=Fn.prototype.o,Fn.prototype.open=Fn.prototype.m,Fn.prototype.close=Fn.prototype.close,Ro.NO_ERROR=0,Ro.TIMEOUT=8,Ro.HTTP_ERROR=6,Ju.COMPLETE="complete",ln.EventType=ut,ut.OPEN="a",ut.CLOSE="b",ut.ERROR="c",ut.MESSAGE="d",se.prototype.listen=se.prototype.J,Tt.prototype.listenOnce=Tt.prototype.K,Tt.prototype.getLastError=Tt.prototype.Ha,Tt.prototype.getLastErrorCode=Tt.prototype.ya,Tt.prototype.getStatus=Tt.prototype.ca,Tt.prototype.getResponseJson=Tt.prototype.La,Tt.prototype.getResponseText=Tt.prototype.la,Tt.prototype.send=Tt.prototype.ea,Tt.prototype.setWithCredentials=Tt.prototype.Fa}).apply(typeof nc<"u"?nc:typeof self<"u"?self:typeof window<"u"?window:{});const h0="@firebase/firestore",f0="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hn.UNAUTHENTICATED=new hn(null),hn.GOOGLE_CREDENTIALS=new hn("google-credentials-uid"),hn.FIRST_PARTY=new hn("first-party-uid"),hn.MOCK_USER=new hn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wa="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo=new Ep("@firebase/firestore");function tr(t,...e){if(mo.logLevel<=ot.DEBUG){const n=e.map(og);mo.debug(`Firestore (${wa}): ${t}`,...n)}}function xw(t,...e){if(mo.logLevel<=ot.ERROR){const n=e.map(og);mo.error(`Firestore (${wa}): ${t}`,...n)}}function bT(t,...e){if(mo.logLevel<=ot.WARN){const n=e.map(og);mo.warn(`Firestore (${wa}): ${t}`,...n)}}function og(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ta(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,_w(t,r,n)}function _w(t,e,n){let r=`FIRESTORE (${wa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw xw(r),new Error(r)}function _l(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||_w(e,s,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qe={CANCELLED:"cancelled",INVALID_ARGUMENT:"invalid-argument",FAILED_PRECONDITION:"failed-precondition"};class Je extends Co{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ET{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(hn.UNAUTHENTICATED))}shutdown(){}}class CT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class IT{constructor(e){this.t=e,this.currentUser=hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){_l(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new wl;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new wl,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{tr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(tr("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new wl)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(tr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_l(typeof r.accessToken=="string",31837,{l:r}),new ww(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _l(e===null||typeof e=="string",2055,{h:e}),new hn(e)}}class jT{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=hn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class kT{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new jT(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(hn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class p0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TT{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Yx(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){_l(this.o===void 0,3512);const r=i=>{i.error!=null&&tr("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,tr("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{tr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):tr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new p0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(_l(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new p0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=NT(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Ps(t,e){return t<e?-1:t>e?1:0}function AT(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return qd(s)===qd(i)?Ps(s,i):qd(s)?1:-1}return Ps(t.length,e.length)}const PT=55296,OT=57343;function qd(t){const e=t.charCodeAt(0);return e>=PT&&e<=OT}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0="__name__";class gr{constructor(e,n,r){n===void 0?n=0:n>e.length&&ta(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ta(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return gr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof gr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=gr.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Ps(e.length,n.length)}static compareSegments(e,n){const r=gr.isNumericId(e),s=gr.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?gr.extractNumericId(e).compare(gr.extractNumericId(n)):AT(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ig.fromString(e.substring(4,e.length-2))}}class Xn extends gr{construct(e,n,r){return new Xn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Je(Qe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Xn(n)}static emptyPath(){return new Xn([])}}const DT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qs extends gr{construct(e,n,r){return new Qs(e,n,r)}static isValidIdentifier(e){return DT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qs.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===g0}static keyField(){return new Qs([g0])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Je(Qe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new Je(Qe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Je(Qe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(i(),s++)}if(i(),o)throw new Je(Qe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qs(n)}static emptyPath(){return new Qs([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this.path=e}static fromPath(e){return new ni(Xn.fromString(e))}static fromName(e){return new ni(Xn.fromString(e).popFirst(5))}static empty(){return new ni(Xn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Xn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Xn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ni(new Xn(e.slice()))}}function MT(t,e,n,r){if(e===!0&&r===!0)throw new Je(Qe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function LT(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function FT(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ta(12329,{type:typeof t})}function zT(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Je(Qe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=FT(t);throw new Je(Qe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(t,e){const n={typeString:t};return e&&(n.value=e),n}function Sa(t,e){if(!LT(t))throw new Je(Qe.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new Je(Qe.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0=-62135596800,y0=1e6;class mr{static now(){return mr.fromMillis(Date.now())}static fromDate(e){return mr.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*y0);return new mr(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Je(Qe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Je(Qe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<m0)throw new Je(Qe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Je(Qe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/y0}_compareTo(e){return this.seconds===e.seconds?Ps(this.nanoseconds,e.nanoseconds):Ps(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:mr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Sa(e,mr._jsonSchema))return new mr(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-m0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}mr._jsonSchemaVersion="firestore/timestamp/1.0",mr._jsonSchema={type:At("string",mr._jsonSchemaVersion),seconds:At("number"),nanoseconds:At("number")};function BT(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new UT("Invalid base64 string: "+i):i}}(e);return new yi(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new yi(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ps(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yi.EMPTY_BYTE_STRING=new yi("");const vf="(default)";class fu{constructor(e,n){this.projectId=e,this.database=n||vf}static empty(){return new fu("","")}get isDefaultDatabase(){return this.database===vf}isEqual(e){return e instanceof fu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e,n=null,r=[],s=[],i=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function WT(t){return new $T(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var v0,Ye;(Ye=v0||(v0={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new ig([4294967295,4294967295],0);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT=41943040;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT=1048576;function Yd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&tr("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new wl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,c=new lg(e,n,o,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Je(Qe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}var x0,_0;(_0=x0||(x0={})).Ma="default",_0.Cache="cache";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw="firestore.googleapis.com",S0=!0;class b0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Je(Qe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Sw,this.ssl=S0}else this.host=e.host,this.ssl=e.ssl??S0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=VT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<HT)throw new Je(Qe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}MT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=GT(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Je(Qe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Je(Qe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Je(Qe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class bw{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new b0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Je(Qe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Je(Qe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new b0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ET;switch(r.type){case"firstParty":return new kT(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Je(Qe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=w0.get(n);r&&(tr("ComponentProvider","Removing Datastore"),w0.delete(n),r.terminate())}(this),Promise.resolve()}}function qT(t,e,n,r={}){var d;t=zT(t,bw);const s=Lu(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;s&&(Bx(`https://${c}`),$x("Firestore",!0)),i.host!==Sw&&i.host!==c&&bT("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:c,ssl:s,emulatorOptions:r};if(!$l(u,o)&&(t._setSettings(u),r.mockUserToken)){let p,f;if(typeof r.mockUserToken=="string")p=r.mockUserToken,f=hn.MOCK_USER;else{p=Ux(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Je(Qe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new hn(m)}t._authCredentials=new CT(new ww(p,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ag(this.firestore,e,this._query)}}class vr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cg(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vr(this.firestore,e,this._key)}toJSON(){return{type:vr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Sa(n,vr._jsonSchema))return new vr(e,r||null,new ni(Xn.fromString(n.referencePath)))}}vr._jsonSchemaVersion="firestore/documentReference/1.0",vr._jsonSchema={type:At("string",vr._jsonSchemaVersion),referencePath:At("string")};class cg extends ag{constructor(e,n,r){super(e,n,WT(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vr(this.firestore,null,new ni(e))}withConverter(e){return new cg(this.firestore,e,this._path)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0="AsyncQueue";class C0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new KT(this,"async_queue_retry"),this._c=()=>{const r=Yd();r&&tr(E0,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Yd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Yd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new wl;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!BT(e))throw e;tr(E0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,xw("INTERNAL UNHANDLED ERROR: ",I0(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=lg.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&ta(47125,{Pc:I0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function I0(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class YT extends bw{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new C0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new C0(e),this._firestoreClient=void 0,await e}}}function QT(t,e){const n=typeof t=="object"?t:Xx(),r=typeof t=="string"?t:vf,s=qx(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Fx("firestore");i&&qT(s,...i)}return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ar(yi.fromBase64String(e))}catch(n){throw new Je(Qe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ar(yi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ar._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Sa(e,Ar._jsonSchema))return Ar.fromBase64String(e.bytes)}}Ar._jsonSchemaVersion="firestore/bytes/1.0",Ar._jsonSchema={type:At("string",Ar._jsonSchemaVersion),bytes:At("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Je(Qe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qs(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Je(Qe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Je(Qe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ps(this._lat,e._lat)||Ps(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:oi._jsonSchemaVersion}}static fromJSON(e){if(Sa(e,oi._jsonSchema))return new oi(e.latitude,e.longitude)}}oi._jsonSchemaVersion="firestore/geoPoint/1.0",oi._jsonSchema={type:At("string",oi._jsonSchemaVersion),latitude:At("number"),longitude:At("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:li._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Sa(e,li._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new li(e.vectorValues);throw new Je(Qe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}li._jsonSchemaVersion="firestore/vectorValue/1.0",li._jsonSchema={type:At("string",li._jsonSchemaVersion),vectorValues:At("object")};const JT=new RegExp("[~\\*/\\[\\]]");function XT(t,e,n){if(e.search(JT)>=0)throw j0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t);try{return new Ew(...e.split("."))._internalPath}catch{throw j0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t)}}function j0(t,e,n,r,s){let i=`Function ${e}() called with invalid data`;i+=". ";let o="";return new Je(Qe.INVALID_ARGUMENT,i+t+o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new vr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ZT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Iw("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ZT extends Cw{data(){return super.data()}}function Iw(t,e){return typeof e=="string"?XT(t,e):e instanceof Ew?e._internalPath:e._delegate._internalPath}class rc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Xi extends Cw{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new bc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Iw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Je(Qe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Xi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Xi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Xi._jsonSchema={type:At("string",Xi._jsonSchemaVersion),bundleSource:At("string","DocumentSnapshot"),bundleName:At("string"),bundle:At("string")};class bc extends Xi{data(e={}){return super.data(e)}}class Sl{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new rc(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new bc(this._firestore,this._userDataWriter,r.key,r,new rc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Je(Qe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(c=>{const u=new bc(s._firestore,s._userDataWriter,c.doc.key,c.doc,new rc(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new bc(s._firestore,s._userDataWriter,c.doc.key,c.doc,new rc(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,p=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),p=o.indexOf(c.doc.key)),{type:eN(c.type),doc:u,oldIndex:d,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Je(Qe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Sl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=RT.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function eN(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ta(61501,{type:t})}}Sl._jsonSchemaVersion="firestore/querySnapshot/1.0",Sl._jsonSchema={type:At("string",Sl._jsonSchemaVersion),bundleSource:At("string","QuerySnapshot"),bundleName:At("string"),bundle:At("string")};(function(e,n=!0){(function(s){wa=s})(Qx),Vl(new co("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),c=new YT(new IT(r.getProvider("auth-internal")),new TT(o,r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Je(Qe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fu(d.options.projectId,p)}(o,s),o);return i={useFetchStreams:n,...i},c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),Cs(h0,f0,e),Cs(h0,f0,"esm2020")})();const tN={apiKey:"AIzaSyCMkZr4Xz204NjvETje-Rhznf6ECDYiEnE",authDomain:"ethiostore-17d9f.firebaseapp.com",databaseURL:"https://ethiostore-17d9f-default-rtdb.firebaseio.com",projectId:"ethiostore-17d9f",storageBucket:"ethiostore-17d9f.appspot.com",messagingSenderId:"964518277159",appId:"1:964518277159:web:9404cace890edf88961e02"},jw=jy().length>0?jy()[0]:Jx(tN),Ut=vw(jw);QT(jw);const nN="https://gojo-teacher-web.onrender.com/api",Ti="https://ethiostore-17d9f-default-rtdb.firebaseio.com";function Hs(t){return!t||typeof t!="string"||!t.trim()||t==="null"||t==="undefined"?"/default-profile.png":t}function rN(){const t=Dn(),[e,n]=y.useState(null),[r,s]=y.useState([]),[i,o]=y.useState([]),[c,u]=y.useState([]),[d,p]=y.useState(null),[f,m]=y.useState(!1),[T,b]=y.useState(!1),[N,A]=y.useState([]),E=y.useRef({}),w=(e==null?void 0:e.userId)||null;y.useEffect(()=>{const x=JSON.parse(localStorage.getItem("teacher"));if(!x){t("/login");return}const R=async()=>{try{const oe=Ot(Ut,"Users"),we=(await mw(oe)).val()||{},Ae=Object.values(we).find(J=>J.userId===x.userId);if(Ae){const J={...x,...Ae};n(J),localStorage.setItem("teacher",JSON.stringify(J))}else n(x)}catch{n(x)}},C=async oe=>{try{const _e=oe||JSON.parse(localStorage.getItem("teacher"));if(!_e||!_e.userId){u([]);return}const[we,Ae]=await Promise.all([Y.get(`${Ti}/Chats.json`),Y.get(`${Ti}/Users.json`)]),J=we.data||{},q=Ae.data||{}||{},re={};Object.entries(q).forEach(([H,M])=>{M&&M.userId&&(re[M.userId]=H)});const fe=Object.entries(J).map(([H,M])=>{const F=(M.unread||{})[_e.userId]||0;if(!F)return null;const ye=M.participants||{},ve=Object.keys(ye||{}).find(ee=>ee!==_e.userId);if(!ve)return null;let Q=ve,le=q[Q];if(!le){const ee=re[ve];ee&&(Q=ee,le=q[ee])}le||(le={userId:ve,name:ve,profileImage:"/default-profile.png"});const Ee={pushKey:Q,userId:le.userId||ve,name:le.name||le.username||ve,profileImage:Hs(le.profileImage||le.profile||"")},W=M.lastMessage||{};return{id:H,title:W.text||"New message",adminName:Ee.name,adminProfile:Ee.profileImage,isMessage:!0,unreadForMe:F}}).filter(Boolean);u(fe)}catch{u([])}};R(),_(),v(x),C(x)},[]),y.useEffect(()=>{e&&console.log("Teacher object (debug):",e)},[e]);const _=async()=>{try{let R=(await Y.get(`${nN}/get_posts`)).data||[];!Array.isArray(R)&&typeof R=="object"&&(R=Object.values(R));const[C,oe]=await Promise.all([Y.get(`${Ti}/School_Admins.json`),Y.get(`${Ti}/Users.json`)]),_e=C.data||{},we=oe.data||{},Ae=fe=>{if(!fe)return{name:"Admin",profile:"/default-profile.png"};const H=_e[fe];if(!H)return{name:fe,profile:"/default-profile.png"};const M=H.userId,Z=M?we[M]:null,F=(Z==null?void 0:Z.name)||(H==null?void 0:H.title)||fe,ye=Hs(Z==null?void 0:Z.profileImage);return{name:F,profile:ye}},J=R.map(fe=>{const H=fe.postId||fe.id||fe.key||"",{name:M,profile:Z}=Ae(fe.adminId);let F=[];Array.isArray(fe.likes)?F=fe.likes:fe.likes&&typeof fe.likes=="object"&&(F=Object.keys(fe.likes));const ye=fe.time||fe.timestamp||fe.createdAt||null;return{...fe,postId:H,adminName:M,adminProfile:Z,time:ye,likes:F,likeCount:fe.likeCount||F.length||0}});J.sort((fe,H)=>{const M=fe.time?new Date(fe.time).getTime():0;return(H.time?new Date(H.time).getTime():0)-M}),s(J);const D=JSON.parse(localStorage.getItem("teacher")),q=G(D==null?void 0:D.userId),re=J.filter(fe=>!q.includes(fe.postId)).slice(0,5).map(fe=>{var H;return{id:fe.postId,title:((H=fe.message)==null?void 0:H.substring(0,80))||"Untitled post",adminName:fe.adminName,adminProfile:fe.adminProfile}});o(re)}catch(x){console.error("Error fetching posts/admins handshake:",x)}},O=async x=>{try{if(!w)return;const R=await Y.post("https://gojo-teacher-web.onrender.com/api/like_post",{postId:x,teacherId:w});if(R.data.success){const C=R.data.liked,oe=R.data.likeCount;s(_e=>_e.map(we=>we.postId===x?{...we,likeCount:oe,likes:{...we.likes,[w]:C?!0:void 0}}:we))}}catch(R){console.error("Error liking post:",R)}},G=x=>JSON.parse(localStorage.getItem(`seen_posts_${x}`))||[],X=(x,R)=>{const C=G(x);C.includes(R)||localStorage.setItem(`seen_posts_${x}`,JSON.stringify([...C,R]))},j=()=>{localStorage.removeItem("teacher"),t("/login")},v=async(x=e)=>{try{const R=x||JSON.parse(localStorage.getItem("teacher"));if(!R||!R.userId){A([]);return}const[C,oe]=await Promise.all([Y.get(`${Ti}/Chats.json`),Y.get(`${Ti}/Users.json`)]),_e=C.data||{},Ae=oe.data||{}||{},J={};Object.entries(Ae).forEach(([q,re])=>{re&&re.userId&&(J[re.userId]=q)});const D=Object.entries(_e).map(([q,re])=>{const H=(re.unread||{})[R.userId]||0;if(!H)return null;const M=re.participants||{},Z=Object.keys(M||{}).find(le=>le!==R.userId);if(!Z)return null;let F=Z,ye=Ae[F];if(!ye){const le=J[Z];le&&(F=le,ye=Ae[le])}ye||(ye={userId:Z,name:Z,profileImage:"/default-profile.png"});const ve={pushKey:F,userId:ye.userId||Z,name:ye.name||ye.username||Z,profileImage:Hs(ye.profileImage||ye.profile||"")},Q=re.lastMessage||{};return{chatId:q,contact:ve,displayName:ve.name,profile:ve.profileImage,lastMessageText:Q.text||"",lastMessageTime:Q.timeStamp||Q.time||null,unreadForMe:H}}).filter(Boolean).sort((q,re)=>(re.lastMessageTime||0)-(q.lastMessageTime||0));A(D)}catch(R){console.error("Error fetching conversations:",R),A([])}},I=N.reduce((x,R)=>x+(R.unreadForMe||0),0),k=e||{};return a.jsxs("div",{className:"dashboard-page",children:[a.jsxs("nav",{className:"top-navbar",children:[a.jsx("h2",{children:"Gojo Dashboard"}),a.jsxs("div",{className:"nav-right",children:[a.jsxs("div",{className:"icon-circle",style:{position:"relative"},children:[a.jsxs("div",{onClick:()=>m(!f),style:{cursor:"pointer",position:"relative"},"aria-label":"Show notifications",tabIndex:0,role:"button",onKeyPress:x=>{x.key==="Enter"&&m(!f)},children:[a.jsx(Yr,{size:22}),i.length+c.length>0&&a.jsx("span",{style:{position:"absolute",top:-6,right:-6,background:"red",color:"#fff",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:i.length+c.length})]}),f&&a.jsx("div",{className:"notification-popup",children:[...i,...c].length>0?[...i,...c].map((x,R)=>a.jsxs("div",{className:"notification-item",onClick:()=>{x.isMessage?(t("/all-chat"),m(!1)):(w&&X(w,x.id),o(C=>C.filter(oe=>oe.id!==x.id)),m(!1))},tabIndex:0,role:"button","aria-label":x.isMessage?"See message notification "+x.title:"See post notification "+x.title,onKeyPress:C=>{C.key==="Enter"&&(x.isMessage?(t("/all-chat"),m(!1)):(w&&X(w,x.id),o(oe=>oe.filter(_e=>_e.id!==x.id)),m(!1)))},children:[a.jsx("img",{src:Hs(x.adminProfile),alt:x.adminName||"Admin",className:"notification-profile"}),a.jsxs("div",{children:[a.jsx("strong",{children:x.adminName}),a.jsx("div",{className:"notification-title",children:x.title}),x.isMessage&&a.jsx("span",{style:{color:"#0b78f6",fontSize:12,fontWeight:500},children:"[Message]"})]})]},x.id||R)):a.jsx("div",{className:"no-notifications",children:"No notifications"})})]}),a.jsxs("div",{className:"icon-circle",style:{position:"relative",marginLeft:12,cursor:"pointer"},onClick:()=>t("/all-chat"),"aria-label":"Go to all chat",tabIndex:0,role:"button",onKeyPress:x=>{x.key==="Enter"&&t("/all-chat")},children:[a.jsx(qr,{size:22}),I>0&&a.jsx("span",{style:{position:"absolute",top:1,right:0,background:"#f60b0b",color:"#fff",borderRadius:"50%",minWidth:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 5px"},children:I})]}),a.jsx("div",{className:"icon-circle",onClick:()=>t("/settings"),children:a.jsx(Sr,{})}),a.jsx("img",{src:Hs(k.profileImage),alt:"teacher",className:"profile-img"})]})]}),a.jsxs("div",{className:"google-dashboard",children:[a.jsxs("div",{className:"google-sidebar",children:[a.jsxs("div",{className:"sidebar-profile",children:[a.jsx("div",{className:"sidebar-img-circle",children:a.jsx("img",{src:Hs(k.profileImage),alt:"profile",style:{objectFit:"cover"}})}),a.jsx("h3",{children:k.name||""}),a.jsx("p",{children:k.username||""})]}),a.jsxs("div",{className:"sidebar-menu",children:[a.jsxs(me,{className:"sidebar-btn",to:"/dashboard",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[a.jsx(Jr,{})," Home"]}),a.jsxs(me,{className:"sidebar-btn",to:"/students",children:[a.jsx(Ve,{})," Students"]}),a.jsxs(me,{className:"sidebar-btn",to:"/admins",children:[a.jsx(Ve,{})," Admins"]}),a.jsxs(me,{className:"sidebar-btn",to:"/parents",children:[a.jsx(Qr,{})," Parents"]}),a.jsxs(me,{className:"sidebar-btn",to:"/marks",children:[a.jsx(wr,{})," Marks"]}),a.jsxs(me,{className:"sidebar-btn",to:"/attendance",children:[a.jsx(Ve,{})," Attendance"]}),a.jsxs(me,{className:"sidebar-btn",to:"/schedule",children:[a.jsx(Ve,{})," Schedule"]}),a.jsxs("button",{className:"sidebar-btn logout-btn",onClick:j,children:[a.jsx(Xr,{})," Logout"]})]})]}),a.jsx("div",{className:"google-main",children:a.jsxs("div",{className:"posts-container",children:[r.length===0&&a.jsx("p",{children:"No posts available"}),r.map(x=>a.jsxs("div",{ref:R=>E.current[x.postId]=R,className:"post-card",style:{border:d===x.postId?"2px solid #4b6cb7":"1px solid #eee",backgroundColor:d===x.postId?"#fff9c4":"#fff",transition:"background-color 0.4s, border 0.2s",padding:12,marginBottom:12},children:[a.jsxs("div",{className:"post-header",style:{display:"flex",alignItems:"center",gap:12},children:[a.jsx("div",{className:"img-circle",children:a.jsx("img",{src:Hs(x.adminProfile),alt:x.adminName||"Admin",style:{width:48,height:48,borderRadius:"50%",objectFit:"cover"}})}),a.jsxs("div",{className:"post-info",children:[a.jsx("h4",{style:{margin:0},children:x.adminName||"Admin"}),a.jsx("div",{style:{fontSize:12,color:"#666"},children:x.time?new Date(x.time).toLocaleString():""})]})]}),a.jsx("p",{className:"post-message",style:{marginTop:12},children:x.message}),x.postUrl&&a.jsx("img",{src:x.postUrl,alt:"post media",className:"post-media",style:{width:"100%",borderRadius:8,marginTop:8}}),a.jsx("div",{className:"post-actions",children:a.jsx("div",{className:"like-button",children:a.jsxs("button",{onClick:()=>O(x.postId),style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"18px",width:"120px",padding:"8px 18px",background:"transparent",border:"none",cursor:"pointer",fontSize:"16px",fontWeight:"500",color:x.likes&&w&&x.likes[w]?"#e0245e":"#555",transition:"all 0.2s ease"},children:[a.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[x.likes&&w&&x.likes[w]?a.jsx(EI,{style:{color:"#e0245e",fontSize:"16px"}}):a.jsx(TI,{style:{fontSize:"16px"}}),x.likes&&w&&x.likes[w]?"Liked":"Like"]}),a.jsx("span",{style:{marginRight:"550px",fontSize:"15px",color:"#777"},children:x.likeCount||0})]})})})]},x.postId))]})})]})]})}const Qd=(t,e)=>[t,e].sort().join("_"),sN=(t="")=>t?String(t).replace(/^course_/,"").replace(/_[0-9A-Za-z]+$/,"").replace(/_/g," ").trim().split(/\s+/).map(n=>n?n[0].toUpperCase()+n.slice(1).toLowerCase():"").join(" "):"Unknown",iN="https://gojo-teacher-web.onrender.com/api",Gt="https://ethiostore-17d9f-default-rtdb.firebaseio.com",Jd=t=>{if(!t)return null;let e;if(typeof t=="number"?e=new Date(t):e=new Date(String(t)),isNaN(e.getTime()))return null;const n=new Date;let r=n.getFullYear()-e.getFullYear();const s=n.getMonth()-e.getMonth();return(s<0||s===0&&n.getDate()<e.getDate())&&r--,r},oN=t=>{if(!t)return"";const e=new Date(Number(t));return`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`},lN=t=>{if(!t)return"";const e=new Date(Number(t)),n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()),s=new Date(e.getFullYear(),e.getMonth(),e.getDate()),i=r-s,o=Math.floor(i/(24*60*60*1e3));return o===0?"Today":o===1?"Yesterday":o>1&&o<7?`${o} days ago`:e.toLocaleDateString()},Xd=(t,e)=>!t||!e?null:Object.values(t).find(n=>String(n==null?void 0:n.userId)===String(e))||null,aN=({student:t,selected:e,onClick:n})=>a.jsxs("div",{onClick:()=>n(t),style:{width:"100%",borderRadius:"12px",padding:"15px",display:"flex",alignItems:"center",gap:"20px",cursor:"pointer",background:e?"#e0e7ff":"#fff",border:e?"2px solid #4b6cb7":"1px solid #ddd",boxShadow:e?"0 6px 15px rgba(75,108,183,0.3)":"0 4px 10px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},children:[a.jsx("img",{src:t.profileImage||"/default-profile.png",alt:t.name,style:{width:"50px",height:"50px",borderRadius:"50%",objectFit:"cover",border:e?"3px solid #4b6cb7":"3px solid red"}}),a.jsxs("div",{children:[a.jsx("h3",{style:{margin:0},children:t.name}),a.jsxs("p",{style:{margin:"4px 0",color:"#555"},children:["Grade ",t.grade," - Section ",t.section]})]})]});function cN(){const[t,e]=y.useState([]),[n,r]=y.useState(""),[s,i]=y.useState("All"),[o,c]=y.useState("All"),[u,d]=y.useState([]),[p,f]=y.useState("details"),[m,T]=y.useState([]),[b,N]=y.useState(""),[A,E]=y.useState(null),[w,_]=y.useState(!1),[O,G]=y.useState(!1),[X,j]=y.useState("daily"),[v,I]=y.useState({}),[k,x]=y.useState({}),[R,C]=y.useState({}),[oe,_e]=y.useState(null),[we,Ae]=y.useState([]),[J,D]=y.useState(""),[q,re]=y.useState(!1),[fe,H]=y.useState({}),[M,Z]=y.useState(null),[F,ye]=y.useState(null),[ve,Q]=y.useState(!1),[le,Ee]=y.useState([]),[W,ee]=y.useState(""),P=y.useRef(null),z=JSON.parse(localStorage.getItem("teacher"))||{},U=String(z.userId||""),[ne,K]=y.useState({}),[se,te]=y.useState([]),[ie,ue]=y.useState("daily"),[he,Ne]=y.useState("All"),[st,Re]=y.useState({}),[Xe,Ue]=y.useState({}),[Kt,Ge]=y.useState(!0),[en,ln]=y.useState([]),[ut,an]=y.useState("semester2"),[To,cr]=y.useState({}),[Fs,cn]=y.useState([]),[Mn,zt]=y.useState([]),[es,xt]=y.useState(!1),[Er,ts]=y.useState(null),zs=y.useRef({}),Ln=Dn(),[ug,Bs]=y.useState(!1),[ba,No]=y.useState([]);y.useEffect(()=>{const L=JSON.parse(localStorage.getItem("teacher"));if(!L){Ln("/login");return}Z(L),Ju(L)},[Ln]),y.useEffect(()=>{const L=JSON.parse(localStorage.getItem("teacher"));if(!L){Ln("/login");return}E(L)},[Ln]),y.useEffect(()=>{(async()=>{try{let Ce=(await Y.get(`${iN}/get_posts`)).data||[];!Array.isArray(Ce)&&typeof Ce=="object"&&(Ce=Object.values(Ce));const[Pe,Te]=await Promise.all([Y.get(`${Gt}/School_Admins.json`),Y.get(`${Gt}/Users.json`)]),nt=Pe.data||{},Ze=Te.data||{},je=JSON.parse(localStorage.getItem("teacher")),et=Ro(je==null?void 0:je.userId),De=be=>{const $e=be.adminId||be.posterAdminId||be.poster||be.admin||null;if($e&&nt[$e]){const dt=nt[$e],Le=dt.userId,Ke=Ze[Le]||null,pe=Ke&&Ke.name||dt.name||be.adminName||"Admin",Ie=Ke&&Ke.profileImage||dt.profileImage||be.adminProfile||"/default-profile.png";return{name:pe,profile:Ie}}return{name:be.adminName||"Admin",profile:be.adminProfile||"/default-profile.png"}},Se=Ce.slice().sort((be,$e)=>{const dt=be.time?new Date(be.time).getTime():0;return($e.time?new Date($e.time).getTime():0)-dt}).filter(be=>be.postId&&!et.includes(be.postId)).slice(0,5).map(be=>{var dt;const $e=De(be);return{id:be.postId,title:((dt=be.message)==null?void 0:dt.substring(0,50))||"Untitled post",adminName:$e.name,adminProfile:$e.profile}});zt(Se)}catch(ce){console.error("Error fetching notifications:",ce)}})()},[]);function Ro(L){return JSON.parse(localStorage.getItem(`seen_posts_${L}`))||[]}const Ju=async(L=M)=>{try{const ce=L||JSON.parse(localStorage.getItem("teacher"));if(!ce||!ce.userId){No([]);return}const[Ce,Pe]=await Promise.all([Y.get(`${Gt}/Chats.json`),Y.get(`${Gt}/Users.json`)]),Te=Ce.data||{},Ze=Pe.data||{}||{},je={};Object.entries(Ze).forEach(([De,Se])=>{Se&&Se.userId&&(je[Se.userId]=De)});const et=Object.entries(Te).map(([De,Se])=>{const $e=(Se.unread||{})[ce.userId]||0;if(!$e)return null;const dt=Se.participants||{},Le=Object.keys(dt||{}).find(gt=>gt!==ce.userId);if(!Le)return null;let Ke=Le,pe=Ze[Ke];if(!pe){const gt=je[Le];gt&&(Ke=gt,pe=Ze[gt])}pe||(pe={userId:Le,name:Le,profileImage:"/default-profile.png"});const Ie={pushKey:Ke,userId:pe.userId||Le,name:pe.name||pe.username||Le,profileImage:pe.profileImage||pe.profile||"/default-profile.png"},qe=Se.lastMessage||{};return{chatId:De,contact:Ie,displayName:Ie.name,profile:Ie.profileImage,lastMessageText:qe.text||"",lastMessageTime:qe.timeStamp||qe.time||null,lastMessageSeen:!!qe.seen,lastMessageSeenAt:qe.seenAt||qe.seenAt||null,lastMessageSenderId:qe.senderId||null,unreadForMe:$e}}).filter(Boolean).sort((De,Se)=>(Se.lastMessageTime||0)-(De.lastMessageTime||0));No(et)}catch(ce){console.error("Error fetching conversations:",ce),No([])}},Cr=ba.reduce((L,ce)=>L+(ce.unreadForMe||0),0);y.useEffect(()=>{if(!(A!=null&&A.userId))return;let L=!1;return(async()=>{Ge(!0);try{const[Ce,Pe,Te,nt,Ze]=await Promise.all([Y.get(`${Gt}/Students.json`),Y.get(`${Gt}/Users.json`),Y.get(`${Gt}/Courses.json`),Y.get(`${Gt}/TeacherAssignments.json`),Y.get(`${Gt}/Teachers.json`)]),je=Ze.data||{},et=Object.entries(je).find(([Le,Ke])=>Ke.userId===A.userId);if(!et){console.warn("Teacher not found in Teachers node"),L||(e([]),Ge(!1),r("No teacher assignment found"));return}const De=et[0],Se=Object.values(nt.data||{}).filter(Le=>Le.teacherId===De).map(Le=>Le.courseId),be=Pe.data||{};C(be);const $e=Le=>Xd(be,Le),dt=Object.entries(Ce.data||{}).map(([Le,Ke])=>{var Oe,it;const pe=$e(Ke.userId),Ie=Ke.parentName||((Oe=Ke.parent)==null?void 0:Oe.name)||(pe==null?void 0:pe.parentName)||Ke.rawParentName||null,qe=Ke.parentPhone||((it=Ke.parent)==null?void 0:it.phone)||(pe==null?void 0:pe.parentPhone)||Ke.rawParentPhone||null,gt=(pe==null?void 0:pe.dob)||(pe==null?void 0:pe.birthDate)||Ke.dob||Ke.birthDate||null,kt=Jd(gt);return{...Ke,studentId:Le,name:(pe==null?void 0:pe.name)||Ke.name||"Unknown",email:(pe==null?void 0:pe.email)||Ke.email||"",profileImage:(pe==null?void 0:pe.profileImage)||Ke.profileImage||"/default-profile.png",phone:(pe==null?void 0:pe.phone)||Ke.phone||"",gender:(pe==null?void 0:pe.gender)||Ke.gender||"",dob:gt,age:kt,parentName:Ie||null,parentPhone:qe||null,raw:Ke}}).filter(Le=>Se.some(Ke=>{var Ie;const pe=(Ie=Te.data)==null?void 0:Ie[Ke];return pe&&pe.grade===Le.grade&&pe.section===Le.section}));L||(e(dt),r(""))}catch(Ce){console.error(Ce),L||r("Failed to load students")}finally{L||Ge(!1)}})(),()=>L=!0},[A]),y.useEffect(()=>{var Pe,Te,nt,Ze,je,et;if(!F){_e(null);return}const L={fullName:F.name||"",phone:F.phone||((Pe=F.raw)==null?void 0:Pe.phone)||"",gender:F.gender||((Te=F.raw)==null?void 0:Te.gender)||"",email:F.email||"",grade:F.grade||"",section:F.section||"",parentName:F.parentName||((nt=F.raw)==null?void 0:nt.parentName)||"",parentPhone:F.parentPhone||((Ze=F.raw)==null?void 0:Ze.parentPhone)||"",dob:F.dob||((je=F.raw)==null?void 0:je.dob)||"",age:F.age??Jd(F.dob||((et=F.raw)==null?void 0:et.dob))??"",profileImage:F.profileImage||"/default-profile.png"};_e(L);let ce=!1;return(async()=>{var De,Se,be,$e,dt,Le,Ke;try{let pe=R;(!pe||Object.keys(pe).length===0)&&(pe=(await Y.get(`${Gt}/Users.json`)).data||{},C(pe));const Ie=Xd(pe,F.userId)||{},qe=((De=F.raw)==null?void 0:De.parentId)||((Se=F.raw)==null?void 0:Se.parentUserId)||(Ie==null?void 0:Ie.parentId)||(Ie==null?void 0:Ie.parentUserId)||null,gt=qe?Xd(pe,qe):null,kt=(gt==null?void 0:gt.name)||((be=F.raw)==null?void 0:be.parentName)||F.parentName||"",Oe=(gt==null?void 0:gt.phone)||(($e=F.raw)==null?void 0:$e.parentPhone)||F.parentPhone||"",it=(Ie==null?void 0:Ie.phone)||F.phone||((dt=F.raw)==null?void 0:dt.phone)||"",un=(Ie==null?void 0:Ie.gender)||F.gender||((Le=F.raw)==null?void 0:Le.gender)||"",Gn=(Ie==null?void 0:Ie.email)||F.email||"",ja=(Ie==null?void 0:Ie.dob)||(Ie==null?void 0:Ie.birthDate)||F.dob||((Ke=F.raw)==null?void 0:Ke.dob)||null,ka=Jd(ja)??F.age??"",Zu={fullName:(Ie==null?void 0:Ie.name)||F.name||"",phone:it,gender:un,email:Gn,grade:F.grade||"",section:F.section||"",parentName:kt,parentPhone:Oe,dob:ja||"",age:ka,profileImage:(Ie==null?void 0:Ie.profileImage)||F.profileImage||"/default-profile.png",userRec:Ie,parentRec:gt};ce||_e(Zu)}catch(pe){console.error("Failed to derive student details",pe)}})(),()=>{ce=!0}},[F,R]),y.useEffect(()=>{if(!F)return;let L=!1;return(async()=>{var Ce,Pe;try{const nt=(await Y.get(`${Gt}/Parents.json`)).data||{},Ze=[(Ce=F.raw)==null?void 0:Ce.parentId,(Pe=F.raw)==null?void 0:Pe.parentUserId,F.parentId,F.parentUserId].filter(Boolean);let je=null;for(const Se of Ze){if(nt[Se]){je=nt[Se];break}const be=Object.values(nt).find($e=>String($e.userId)===String(Se));if(be){je=be;break}}if(!je){const Se=F.studentId||F.userId;for(const be of Object.values(nt)){const $e=(be==null?void 0:be.children)||{};if(Object.values($e).find(Le=>String(Le==null?void 0:Le.studentId)===String(Se))){je=be;break}}}let et=null,De=null;if(je&&(et=je.name||je.displayName||null,De=je.phone||je.phoneNumber||je.contact||null,(!et||!De)&&je.userId))try{const be=(await Y.get(`${Gt}/Users.json`)).data||{},$e=Object.values(be).find(dt=>String(dt.userId)===String(je.userId));$e&&(et=et||$e.name||null,De=De||$e.phone||null)}catch{}L||_e(Se=>({...Se||{},parentName:et||(Se==null?void 0:Se.parentName)||"",parentPhone:De||(Se==null?void 0:Se.parentPhone)||""}))}catch(Te){console.error("Error resolving parent info:",Te)}})(),()=>L=!0},[F]),y.useEffect(()=>{const L=document.querySelector(".chat-messages");L&&(L.scrollTop=L.scrollHeight)},[m]),y.useEffect(()=>{if(s==="All")d([]),c("All");else{const L=[...new Set(t.filter(ce=>ce.grade===s).map(ce=>ce.section))];d(L),c("All")}},[s,t]);const bi=t.filter(L=>!(s!=="All"&&L.grade!==s||o!=="All"&&L.section!==o)),Us=[...new Set(t.map(L=>L.grade))].sort();y.useEffect(()=>{if(!(F!=null&&F.studentId)&&!(F!=null&&F.userId)){cn([]);return}let L=!1;return(async()=>{_(!0);try{const[Ce,Pe,Te,nt]=await Promise.all([Y.get(`${Gt}/Attendance.json`),Y.get(`${Gt}/Teachers.json`),Y.get(`${Gt}/Users.json`),Y.get(`${Gt}/TeacherAssignments.json`)]),Ze=Ce.data||{},je=Pe.data||{},et=Te.data||{},De=nt.data||{},Se=[];Object.entries(Ze).forEach(([be,$e])=>{!$e||typeof $e!="object"||Object.entries($e).forEach(([dt,Le])=>{if(!Le||typeof Le!="object")return;let pe=Le[F.studentId]??Le[F.userId];if(!pe&&Le.students&&(pe=Le.students[F.studentId]??Le.students[F.userId]),!pe){const kt=Object.entries(Le).find(([Oe,it])=>!it||typeof it!="object"?!1:!!(it.userId&&(String(it.userId)===String(F.userId)||String(it.userId)===String(F.studentId))));kt&&(pe=kt[1])}if(!pe)return;let Ie="absent",qe="",gt=be;if(typeof pe=="string")Ie=pe;else if(typeof pe=="object"){if(Ie=pe.status||pe.attendance_status||Object.values(pe)[0]||"present",qe=pe.teacherName||pe.teacher||pe.tutor||"",!qe){const kt=pe.teacherId||pe.teacherKey||null;if(kt&&je[kt]){const Oe=je[kt];if(Oe.userId){const it=Object.values(et).find(un=>String(un==null?void 0:un.userId)===String(Oe.userId));qe=(it==null?void 0:it.name)||Oe.name||qe}else qe=Oe.name||qe}}if(!qe){const kt=pe.teacherUserId||pe.teacherUser||pe.takenBy||null;if(kt){const Oe=Object.values(et).find(it=>String(it==null?void 0:it.userId)===String(kt));Oe&&(qe=Oe.name||qe)}}gt=pe.subject||be}if(!qe){const kt=Object.values(De).find(Oe=>String(Oe.courseId)===String(be));if(kt&&kt.teacherId){const Oe=kt.teacherId,it=je[Oe];if(it)if(it.userId){const un=Object.values(et).find(Gn=>String(Gn==null?void 0:Gn.userId)===String(it.userId));qe=(un==null?void 0:un.name)||it.name||qe}else qe=it.name||qe}}Se.push({courseId:be,date:dt,status:String(Ie).toLowerCase(),teacherName:qe,subject:gt})})}),L||(Se.sort((be,$e)=>new Date($e.date)-new Date(be.date)),cn(Se))}catch(Ce){console.error("Attendance fetch error:",Ce),L||cn([])}finally{L||_(!1)}})(),()=>{L=!0}},[F]);const Ei=Qt.useMemo(()=>Fs.map(L=>({date:L.date,courseId:L.courseId,teacherName:L.teacherName||"",status:L.status||"absent"})),[Fs]),ur=Qt.useMemo(()=>!Ei||Ei.length===0?{}:Ei.reduce((L,ce)=>{const Ce=ce.courseId||ce.subject||"unknown";return L[Ce]||(L[Ce]=[]),L[Ce].push(ce),L},{}),[Ei]),Ea=L=>{if(!L||L.length===0)return 0;const ce=L.filter(Ce=>Ce.status==="present"||Ce.status==="late").length;return Math.round(ce/L.length*100)},Ao=L=>{Re(ce=>({...ce,[L]:!ce[L]}))},Po=()=>{localStorage.removeItem("teacher"),Ln("/login")};y.useEffect(()=>{if(!F){K({});return}(async()=>{Ge(!0);try{const ce=vw(),Ce=await mw(Ot(ce,"ClassMarks"));if(!Ce.exists()){K({}),Ge(!1);return}const Pe=Ce.val(),Te={},nt=new Set([F.studentId,F.userId,F.userId?`student_${F.userId}`:null].filter(Boolean));Object.entries(Pe).forEach(([Ze,je])=>{if(!je||typeof je!="object")return;const et=Object.entries(je).find(([De,Se])=>!!(nt.has(De)||Se&&typeof Se=="object"&&(Se.userId&&nt.has(Se.userId)||Se.studentId&&nt.has(Se.studentId))));if(et){const[,De]=et;Te[Ze]=De}}),K(Te)}catch(ce){console.error("Failed to fetch marks:",ce),K({})}finally{Ge(!1)}})()},[F]),y.useEffect(()=>{if(!(F!=null&&F.userId))return;async function L(){try{const ce=await Y.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/StudentNotes/${F==null?void 0:F.userId}.json`);if(!ce.data){Ae([]);return}const Ce=Object.entries(ce.data).map(([Pe,Te])=>({id:Pe,...Te}));Ce.sort((Pe,Te)=>new Date(Te.createdAt)-new Date(Pe.createdAt)),Ae(Ce)}catch(ce){console.error("Failed to fetch teacher notes",ce),Ae([])}}L()},[F]);const Oo=async()=>{if(!J.trim()||!A||!F)return;re(!0);const L={teacherId:A.userId,teacherName:A.name,note:J.trim(),createdAt:new Date().toISOString()};try{await Y.post(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/StudentNotes/${F==null?void 0:F.userId}.json`,L),Ae(ce=>[L,...ce]),D("")}catch(ce){console.error("Error saving note",ce)}finally{re(!1)}},Ca=()=>{var L;(L=P.current)==null||L.scrollIntoView({behavior:"smooth"})};y.useEffect(()=>{Ca()},[le]),y.useEffect(()=>{if(!U||!F)return;const L=Qd(U,F.userId),ce=Ot(Ut,`Chats/${L}/messages`),Ce=Ji(ce,Pe=>{const Te=Pe.val()||{},nt=Object.entries(Te).map(([Ze,je])=>({id:Ze,...je,isTeacher:je.senderId===U})).sort((Ze,je)=>Ze.timeStamp-je.timeStamp);Ee(nt)});return()=>Ce()},[U,F]),y.useEffect(()=>{if(!O||!F||!U||!le||le.length===0)return;const L=le.filter(Te=>String(Te.receiverId)===String(U)&&!Te.seen);if(L.length===0)return;const ce=Qd(U,F.userId),Ce=Date.now(),Pe={messages:{},unread:{}};L.forEach(Te=>{Pe.messages[Te.id]={...Pe.messages[Te.id]||{},seen:!0,seenAt:Ce}}),Pe.unread[U]=null,Pe.lastMessage={seen:!0,seenAt:Ce},Y.patch(`${Gt}/Chats/${ce}.json`,Pe).catch(Te=>console.error("Failed to mark messages seen:",Te))},[O,le,F,U]),y.useEffect(()=>{var L;(L=P.current)==null||L.scrollIntoView({behavior:"smooth"})},[le]);const Ia=async()=>{if(!W.trim()||!F)return;const L=U,ce=F.userId,Ce=Qd(L,ce),Pe=Date.now(),Te={senderId:L,receiverId:ce,type:"text",text:W,seen:!1,timeStamp:Pe};await Y.post(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${Ce}/messages.json`,Te),await Y.patch(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${Ce}.json`,{participants:{[L]:!0,[ce]:!0},lastMessage:{text:W,senderId:L,seen:!1,timeStamp:Pe},unread:{[ce]:1}}),ee("")},[Ir,Xu]=Qt.useState(window.innerWidth<window.innerHeight);return Qt.useEffect(()=>{const L=()=>{Xu(window.innerWidth<window.innerHeight)};return window.addEventListener("resize",L),()=>window.removeEventListener("resize",L)},[]),y.useEffect(()=>{const L=document.querySelector(".chat-messages");L&&(L.scrollTop=L.scrollHeight)},[m]),a.jsxs("div",{className:"dashboard-page",children:[a.jsxs("nav",{className:"top-navbar",children:[a.jsx("h2",{children:"Gojo Dashboard"}),a.jsxs("div",{className:"nav-right",children:[a.jsxs("div",{className:"icon-circle",children:[a.jsxs("div",{onClick:()=>xt(!es),style:{cursor:"pointer",position:"relative"},children:[a.jsx(Yr,{size:24}),Mn.length+Cr>0&&a.jsx("span",{style:{position:"absolute",top:-5,right:-5,background:"red",color:"white",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:Mn.length+Cr})]}),es&&a.jsxs("div",{style:{position:"absolute",top:30,right:0,width:300,maxHeight:400,overflowY:"auto",background:"#fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",borderRadius:8,zIndex:100},children:[Mn.length>0&&Mn.map((L,ce)=>a.jsxs("div",{onClick:()=>{zt(Ce=>Ce.filter((Pe,Te)=>Te!==ce)),xt(!1),Ln("/dashboard"),setTimeout(()=>{const Ce=zs.current[L.id];Ce&&(Ce.scrollIntoView({behavior:"smooth",block:"center"}),ts(L.id),setTimeout(()=>ts(null),3e3))},150)},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:L.adminProfile,alt:L.adminName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:L.adminName}),a.jsx("p",{style:{margin:0,fontSize:12},children:L.title})]})]},L.id||ce)),Cr>0&&ba.filter(L=>L.unreadForMe>0).map((L,ce)=>a.jsxs("div",{onClick:()=>{xt(!1),Ln("/all-chat")},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:L.profile||"/default-profile.png",alt:L.displayName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:L.displayName}),a.jsxs("p",{style:{margin:0,fontSize:12,color:"#0b78f6",display:"flex",alignItems:"center",gap:8},children:[L.lastMessageSenderId===U?a.jsx("span",{style:{color:L.lastMessageSeen?"#0bda63":"#cbd5e1"},children:L.lastMessageSeen?"":""}):null,a.jsx("span",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:160},children:L.lastMessageText||"New message"}),L.lastMessageSeenAt&&a.jsx("span",{style:{marginLeft:6,color:"#64748b",fontSize:11},children:new Date(L.lastMessageSeenAt).toLocaleTimeString()})]})]})]},L.chatId||ce)),Mn.length===0&&Cr===0&&a.jsx("div",{style:{padding:15},children:"No notifications"})]})]}),a.jsx("div",{className:"icon-circle",style:{position:"relative",marginLeft:12},children:a.jsxs("div",{onClick:()=>Ln("/all-chat"),style:{cursor:"pointer",position:"relative"},children:[a.jsx(qr,{size:22}),Cr>0&&a.jsx("span",{style:{position:"absolute",top:-6,right:-6,background:"#f60b0b",color:"#fff",borderRadius:"50%",minWidth:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 5px"},children:Cr})]})}),a.jsx("div",{className:"icon-circle",onClick:()=>Ln("/settings"),children:a.jsx(Sr,{})}),a.jsx("img",{src:(M==null?void 0:M.profileImage)||"/default-profile.png"})]})]}),a.jsxs("div",{className:"google-dashboard",children:[a.jsxs("div",{className:"google-sidebar",children:[M&&a.jsxs("div",{className:"sidebar-profile",children:[a.jsx("div",{className:"sidebar-img-circle",children:a.jsx("img",{src:M.profileImage||"/default-profile.png",alt:"profile"})}),a.jsx("h3",{children:M.name}),a.jsx("p",{children:M.username})]}),a.jsxs("div",{className:"sidebar-menu",children:[a.jsxs(me,{className:"sidebar-btn",to:"/dashboard",children:[a.jsx(Jr,{})," Home"]}),a.jsxs(me,{className:"sidebar-btn",to:"/students",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[a.jsx(Ve,{})," Students"]}),a.jsxs(me,{className:"sidebar-btn",to:"/admins",children:[a.jsx(Ve,{})," Admins"]}),a.jsxs(me,{className:"sidebar-btn",to:"/parents",children:[a.jsx(Qr,{})," Parents"]}),a.jsxs(me,{className:"sidebar-btn",to:"/marks",children:[a.jsx(wr,{})," Marks"]}),a.jsxs(me,{className:"sidebar-btn",to:"/attendance",children:[a.jsx(Ve,{})," Attendance"]}),a.jsxs(me,{className:"sidebar-btn",to:"/schedule",children:[a.jsx(Ve,{})," Schedule"]}),a.jsxs("button",{className:"sidebar-btn logout-btn",onClick:Po,children:[a.jsx(Xr,{})," Logout"]})]})]}),a.jsxs("div",{style:{flex:1,display:"flex",justifyContent:"center",padding:"30px"},children:[a.jsxs("div",{style:{width:"300px",position:"relative",marginLeft:"50px",marginRight:Ir?0:"50px"},children:[a.jsx("h2",{style:{textAlign:"center",marginBottom:"20px"},children:"My Students"}),a.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px",flexWrap:"wrap"},children:[a.jsx("button",{onClick:()=>i("All"),style:{padding:"8px 15px",borderRadius:"8px",background:s==="All"?"#4b6cb7":"#ddd",color:s==="All"?"#fff":"#000",border:"none"},children:"All Grades"}),Us.map(L=>a.jsxs("button",{onClick:()=>i(L),style:{padding:"8px 15px",borderRadius:"8px",background:s===L?"#4b6cb7":"#ddd",color:s===L?"#fff":"#000",border:"none"},children:["Grade ",L]},L))]}),s!=="All"&&a.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"20px",flexWrap:"wrap"},children:[a.jsx("button",{onClick:()=>c("All"),style:{padding:"6px 12px",borderRadius:"8px",background:o==="All"?"#4b6cb7":"#ddd",color:o==="All"?"#fff":"#000",border:"none"},children:"All Sections"}),u.map(L=>a.jsxs("button",{onClick:()=>c(L),style:{padding:"6px 12px",borderRadius:"8px",background:o===L?"#4b6cb7":"#ddd",color:o===L?"#fff":"#000",border:"none"},children:["Section ",L]},L))]}),Kt&&a.jsx("p",{children:"Loading students..."}),n&&a.jsx("p",{style:{color:"red"},children:n}),!Kt&&!n&&bi.length===0&&a.jsx("p",{children:"No students found."}),a.jsx("style",{children:`
              .student-list-responsive {
                display: flex;
                flex-direction: column;
                margin-top: 30px;
                gap: 12px;
                width: 98vw;
                max-width: 99vw;
                margin-left: 0;
                margin-right: 200px;
              }
                @media (min-width: 350px) {
                .student-list-responsive {
                  width: 350px;
                  max-width: 70vw;
                }
              }
              @media (min-width: 600px) {
                .student-list-responsive {
                  width: 400px;
                  max-width: 90vw;
                }
              }
              @media (min-width: 900px) {
                .student-list-responsive {
                  width: 500px;
                  max-width: 80vw;
                }
              }
              @media (min-width: 1200px) {
                .student-list-responsive {
                  width: 600px;
                  max-width: 700px;
                  margin-left: -100px;

                }
              }
                @media (min-width: 1500px) {
                .student-list-responsive {
                  width: 600px;
                  max-width: 700px;
                  margin-left: -250px;

                }
              }
            `}),a.jsx("div",{className:"student-list-responsive",children:bi.map((L,ce)=>a.jsx(aN,{student:L,selected:(F==null?void 0:F.userId)===L.userId,onClick:()=>ye(L)},L.userId||L.id||ce))})]}),F&&a.jsxs("div",{style:{width:Ir?"100%":"30%",height:Ir?"100vh":"calc(100vh - 60px)",position:"fixed",right:0,top:Ir?0:"60px",background:"#fff",zIndex:1e3,display:"flex",flexDirection:"column",overflowY:"auto",boxShadow:Ir?"0 0 0 rgba(0,0,0,0)":"0 0 15px rgba(0,0,0,0.08)",transition:"all 0.35s ease"},children:[a.jsx("button",{onClick:()=>ye(null),style:{position:"fixed",top:56,right:16,width:42,height:42,borderRadius:12,border:"none",background:"#ffffff",boxShadow:"0 6px 18px rgba(2,6,23,0.15)",cursor:"pointer",fontSize:22,fontWeight:900,zIndex:2e3},children:""}),a.jsxs("div",{style:{textAlign:"center",marginBottom:"20px",paddingTop:20},children:[a.jsx("div",{style:{width:"120px",height:"120px",margin:"0 auto 15px",borderRadius:"50%",overflow:"hidden",border:"4px solid #4b6cb7"},children:a.jsx("img",{src:F.profileImage,alt:F.name,style:{width:"100%",height:"100%",objectFit:"cover"}})}),a.jsx("h2",{style:{margin:0,fontSize:"22px"},children:F.name}),a.jsx("p",{style:{color:"#555",margin:"5px 0"},children:F.studentId}),a.jsxs("p",{style:{color:"#555",margin:"5px 0"},children:[a.jsx("strong",{children:"Grade:"})," ",F.grade,F.section]})]}),a.jsx("div",{style:{display:"flex",marginBottom:"15px"},children:["details","attendance","performance"].map(L=>a.jsx("button",{onClick:()=>f(L),style:{flex:1,padding:"10px",border:"none",background:"none",cursor:"pointer",fontWeight:"600",color:p===L?"#4b6cb7":"#777",borderBottom:p===L?"3px solid #4b6cb7":"3px solid transparent"},children:L.toUpperCase()},L))}),a.jsxs("div",{children:[p==="details"&&a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:28,padding:50,marginLeft:0,marginRight:0,borderRadius:0,background:"linear-gradient(180deg,#eef2ff,#f8fafc)",fontFamily:"Inter, system-ui"},children:a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:24,fontWeight:900,marginBottom:18,marginTop:-30,background:"linear-gradient(90deg,#2563eb,#7c3aed)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Student Details"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",columnGap:68,rowGap:14},children:[["Phone",oe==null?void 0:oe.phone],["Gender",oe==null?void 0:oe.gender],["Email",oe==null?void 0:oe.email],["Grade",oe==null?void 0:oe.grade],["Section",oe==null?void 0:oe.section],["Age",oe==null?void 0:oe.age],["Birth Date",oe==null?void 0:oe.dob],["Parent Name",oe==null?void 0:oe.parentName],["Parent Phone",oe==null?void 0:oe.parentPhone]].map(([L,ce])=>a.jsxs("div",{style:{padding:18,borderRadius:20,background:"#ffffff",boxShadow:"0 6px 10px rgba(0,0,0,0.08)",marginLeft:-30,marginRight:-30},children:[a.jsx("div",{style:{fontSize:12,fontWeight:700,color:"#000102",textTransform:"uppercase"},children:L}),a.jsx("div",{style:{marginTop:8,fontSize:16,fontWeight:400,color:"#000102"},children:ce||""})]},L))}),a.jsxs("div",{style:{marginTop:36},children:[a.jsx("div",{style:{fontSize:22,fontWeight:900,marginBottom:14,color:"#1e293b"},children:"Teacher Comments"}),a.jsxs("div",{style:{background:"#ffffff",padding:18,borderRadius:22,boxShadow:"0 14px 40px rgba(0,0,0,0.1)"},children:[a.jsx("textarea",{value:J,onChange:L=>D(L.target.value),placeholder:"Write an important comment about the student...",style:{width:"100%",minHeight:30,border:"none",outline:"none",resize:"vertical",fontSize:15,lineHeight:1.6}}),a.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:12},children:a.jsx("button",{onClick:Oo,disabled:q,style:{padding:"10px 22px",borderRadius:999,border:"none",background:"linear-gradient(135deg,#2563eb,#7c3aed)",color:"#fff",fontWeight:900,cursor:"pointer",boxShadow:"0 12px 30px rgba(37,99,235,0.45)"},children:q?"Saving...":"Add Comment"})})]}),a.jsx("div",{style:{marginTop:18,display:"flex",flexDirection:"column",gap:14},children:we.length===0?a.jsx("div",{style:{textAlign:"center",padding:18,color:"#64748b",background:"#ffffff",borderRadius:18},children:"No teacher comments yet"}):we.map(L=>{var ce;return a.jsxs("div",{style:{display:"flex",gap:12},children:[a.jsx("div",{style:{width:44,height:44,borderRadius:"50%",background:"linear-gradient(135deg,#60a5fa,#2563eb)",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:900},children:((ce=L.teacherName)==null?void 0:ce.split(" ").map(Ce=>Ce[0]).join("").slice(0,2).toUpperCase())||"T"}),a.jsxs("div",{style:{flex:1,background:"#ffffff",padding:14,borderRadius:18,boxShadow:"0 8px 24px rgba(0,0,0,0.08)"},children:[a.jsx("div",{style:{fontWeight:800,color:"#1e293b"},children:L.teacherName}),a.jsx("div",{style:{marginTop:6},children:L.note}),a.jsx("div",{style:{marginTop:6,fontSize:12,color:"#64748b",textAlign:"right"},children:new Date(L.createdAt).toLocaleString()})]})]},L.id)})})]})]})}),p==="attendance"&&F&&a.jsxs("div",{style:{padding:30,background:"radial-gradient(circle at top,#eef2ff,#f8fafc)",borderRadius:26,fontFamily:"Inter, system-ui"},children:[a.jsx("div",{style:{display:"flex",justifyContent:"center",gap:16,marginBottom:32},children:["daily","weekly","monthly"].map(L=>a.jsx("button",{onClick:()=>ue(L),style:{padding:"12px 28px",borderRadius:999,border:"none",fontWeight:800,fontSize:13,letterSpacing:1,cursor:"pointer",background:ie===L?"linear-gradient(135deg,#4f46e5,#2563eb)":"rgba(255,255,255,.8)",color:ie===L?"#fff":"#1f2937",boxShadow:ie===L?"0 5px 5px rgba(79,70,229,.45)":"0 5px 5px rgba(0,0,0,.08)",transition:"all .3s ease"},children:L.toUpperCase()},L))}),Object.entries(ur).filter(([L])=>he==="All"||L===he).map(([L,ce])=>{var et;const Ce=new Date().toDateString(),Pe=ce.filter(De=>{var Se,be,$e,dt;return((be=(Se=new Date(De.date)).getWeek)==null?void 0:be.call(Se))===((dt=($e=new Date).getWeek)==null?void 0:dt.call($e))}),Te=ce.filter(De=>new Date(De.date).getMonth()===new Date().getMonth()),nt=ie==="daily"?ce.filter(De=>new Date(De.date).toDateString()===Ce):ie==="weekly"?Pe:Te,Ze=Ea(nt),je=`${ie}-${L}`;return a.jsxs("div",{onClick:()=>Ao(je),style:{cursor:"pointer",background:"linear-gradient(180deg,rgba(255,255,255,.95),rgba(255,255,255,.85))",backdropFilter:"blur(14px)",borderRadius:26,padding:26,marginBottom:26,boxShadow:"0 10px 10px rgba(0,0,0,.12)",position:"relative",overflow:"hidden"},children:[a.jsx("div",{style:{position:"absolute",inset:0,background:"radial-gradient(circle at top left,rgba(99,102,241,.15),transparent 60%)",pointerEvents:"none"}}),a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:18},children:[a.jsxs("div",{children:[a.jsxs("h3",{style:{margin:0,fontSize:20,fontWeight:900,color:"#1e3a8a"},children:[" ",sN(L)]}),a.jsxs("p",{style:{margin:"6px 0 0",fontSize:13,color:"#64748b"},children:[" ",(et=ce[0])==null?void 0:et.teacherName]})]}),a.jsxs("div",{style:{padding:"8px 16px",borderRadius:999,fontSize:13,fontWeight:900,background:Ze>=75?"linear-gradient(135deg,#22c55e,#16a34a)":Ze>=50?"linear-gradient(135deg,#facc15,#eab308)":"linear-gradient(135deg,#ef4444,#dc2626)",color:"#fff",boxShadow:"0 10px 25px rgba(0,0,0,.25)"},children:[Ze,"%"]})]}),a.jsx("div",{onClick:()=>Ao(je),style:{height:16,background:"#e5e7eb",borderRadius:999,cursor:"pointer",overflow:"hidden",marginBottom:10},children:a.jsx("div",{style:{height:"100%",width:`${Ze}%`,background:Ze>=75?"linear-gradient(90deg,#22c55e,#16a34a)":Ze>=50?"linear-gradient(90deg,#facc15,#eab308)":"linear-gradient(90deg,#ef4444,#dc2626)",transition:"width .5s cubic-bezier(.4,0,.2,1)"}})}),a.jsxs("div",{style:{fontSize:12,fontWeight:700,color:"#475569",marginBottom:12,letterSpacing:.6},children:["CLICK BAR TO VIEW ",ie.toUpperCase()," DETAILS"]}),st[je]&&a.jsx("div",{style:{marginTop:14,background:"#f1f5f9",borderRadius:18,padding:14},children:nt.map((De,Se)=>a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 8px",borderBottom:Se!==nt.length-1?"1px solid #e5e7eb":"none"},children:[a.jsx("div",{style:{display:"flex",flexDirection:"column"},children:a.jsxs("span",{style:{fontSize:13,color:"#1f2937"},children:[" ",new Date(De.date).toDateString()]})}),a.jsx("span",{style:{padding:"6px 14px",borderRadius:999,fontSize:12,fontWeight:900,background:De.status==="present"?"#dcfce7":De.status==="late"?"#fef3c7":"#fee2e2",color:De.status==="present"?"#166534":De.status==="late"?"#92400e":"#991b1b"},children:De.status.toUpperCase()})]},Se))})]},L)})]}),p==="performance"&&a.jsxs("div",{style:{position:"relative",paddingBottom:"70px",background:"#f8fafc"},children:[a.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"40px",marginBottom:"25px",borderBottom:"2px solid #e5e7eb",paddingBottom:"8px"},children:["semester1","semester2"].map(L=>{const ce=ut===L;return a.jsxs("button",{onClick:()=>an(L),style:{background:"none",border:"none",cursor:"pointer",fontSize:"16px",fontWeight:"800",color:ce?"#2563eb":"#64748b",paddingBottom:"10px",position:"relative"},children:[L==="semester1"?"Semester 1":"Semester 2",ce&&a.jsx("span",{style:{position:"absolute",bottom:"-2px",left:0,width:"100%",height:"4px",background:"linear-gradient(135deg,#4b6cb7,#1e40af)",borderRadius:"6px"}})]},L)})}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"20px",padding:"20px"},children:Kt?a.jsx("div",{style:{textAlign:"center",gridColumn:"1 / -1",padding:"30px"},children:"Loading performance..."}):Object.keys(ne||{}).length===0?a.jsx("div",{style:{textAlign:"center",padding:"30px",borderRadius:"18px",background:"#ffffff",color:"#475569",fontSize:"16px",fontWeight:"600",boxShadow:"0 10px 25px rgba(0,0,0,0.08)",gridColumn:"1 / -1"},children:" No Performance Records"}):Object.entries(ne).map(([L,ce],Ce)=>{const Pe=ce==null?void 0:ce[ut];if(!Pe)return null;const Te=Pe.assessments||{},nt=Object.values(Te).reduce((Se,be)=>Se+(be.score||0),0),Ze=Object.values(Te).reduce((Se,be)=>Se+(be.max||0),0),je=Ze?nt/Ze*100:0,et=je>=75?"#16a34a":je>=50?"#f59e0b":"#dc2626",De=L.replace("course_","").replace(/_/g," ").toUpperCase();return a.jsxs("div",{style:{padding:"18px",borderRadius:"20px",background:"#ffffff",boxShadow:"0 12px 30px rgba(0,0,0,0.08)"},children:[a.jsx("div",{style:{fontSize:"16px",fontWeight:"800",marginBottom:"14px",color:"#2563eb",textAlign:"center"},children:De}),a.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"16px"},children:a.jsx("div",{style:{width:"90px",height:"90px",borderRadius:"50%",background:`conic-gradient(${et} ${je*3.6}deg, #e5e7eb 0deg)`,display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsxs("div",{style:{width:"66px",height:"66px",borderRadius:"50%",background:"#fff",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[a.jsx("strong",{style:{color:et},children:nt}),a.jsxs("span",{style:{fontSize:"11px"},children:["/ ",Ze]})]})})}),Object.entries(Te).map(([Se,be])=>a.jsxs("div",{style:{marginBottom:"10px"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"13px",fontWeight:"600"},children:[a.jsx("span",{children:be.name}),a.jsxs("span",{children:[be.score," / ",be.max]})]}),a.jsx("div",{style:{height:"6px",borderRadius:"999px",background:"#e5e7eb",marginTop:"5px"},children:a.jsx("div",{style:{width:`${be.score/be.max*100}%`,height:"100%",background:et}})})]},Se)),a.jsx("div",{style:{marginTop:"10px",textAlign:"center",fontWeight:"700",color:et},children:je>=75?"Excellent":je>=50?"Good":"Needs Improvement"}),a.jsxs("div",{style:{marginTop:"6px",textAlign:"center",fontSize:"12px",color:"#64748b"},children:[" ",ce.teacherName||Pe.teacherName||"N/A"]})]},`${L}-${Ce}`)})})]})]}),!O&&a.jsx("div",{onClick:()=>G(!0),style:{position:"fixed",bottom:"20px",right:"20px",width:"60px",height:"60px",background:"linear-gradient(135deg, #833ab4, #0259fa, #459afc)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",cursor:"pointer",zIndex:1e3,boxShadow:"0 8px 18px rgba(0,0,0,0.25)",transition:"transform 0.2s ease"},children:a.jsx(Sp,{size:30})}),O&&F&&a.jsxs("div",{style:{position:"fixed",bottom:"20px",right:"20px",width:"360px",height:"480px",background:"#fff",borderRadius:"16px",boxShadow:"0 12px 30px rgba(0,0,0,0.25)",zIndex:2e3,display:"flex",flexDirection:"column",overflow:"hidden"},children:[a.jsxs("div",{style:{padding:"14px",borderBottom:"1px solid #eee",display:"flex",justifyContent:"space-between",alignItems:"center",background:"#fafafa"},children:[a.jsx("strong",{children:F.name}),a.jsxs("div",{style:{display:"flex",gap:"10px"},children:[a.jsx("button",{onClick:()=>{G(!1),Ln("/all-chat",{state:{user:F,tab:"student"}})},style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px"},children:""}),a.jsx("button",{onClick:()=>G(!1),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:""})]})]}),a.jsxs("div",{style:{flex:1,padding:"12px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"6px",background:"#f9f9f9"},children:[le.length===0?a.jsxs("p",{style:{textAlign:"center",color:"#aaa"},children:["Start chatting with ",F.name]}):le.map(L=>{const ce=String(L.senderId)===String(M==null?void 0:M.userId);return a.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:ce?"flex-end":"flex-start",marginBottom:10},children:a.jsxs("div",{style:{maxWidth:"70%",background:ce?"#4facfe":"#fff",color:ce?"#fff":"#000",padding:"10px 14px",borderRadius:18,borderTopRightRadius:ce?0:18,borderTopLeftRadius:ce?18:0,boxShadow:"0 1px 3px rgba(0,0,0,0.1)",wordBreak:"break-word",cursor:"default",position:"relative"},children:[L.text," ",L.edited&&a.jsx("small",{style:{fontSize:10},children:" (edited)"}),a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:6,marginTop:6,fontSize:11,color:ce?"#fff":"#888"},children:[a.jsx("span",{style:{marginRight:6,fontSize:11,opacity:.9},children:lN(L.timeStamp)}),a.jsx("span",{children:oN(L.timeStamp)}),ce&&!L.deleted&&a.jsxs("span",{style:{display:"flex",gap:0,alignItems:"center"},children:[a.jsx(lo,{size:12,color:ce?"#fff":"#888",style:{opacity:.85,marginLeft:6}}),L.seen&&a.jsx(lo,{size:12,color:ce?"#f3f7f8":"#ccc",style:{marginLeft:2,opacity:.95}})]})]})]})},L.messageId||L.id)}),a.jsx("div",{ref:P})]}),a.jsxs("div",{style:{padding:"10px",borderTop:"1px solid #eee",display:"flex",gap:"8px",background:"#fff"},children:[a.jsx("input",{value:W,onChange:L=>ee(L.target.value),placeholder:"Type a message...",style:{flex:1,padding:"10px 14px",borderRadius:"25px",border:"1px solid #ccc",outline:"none"},onKeyDown:L=>{L.key==="Enter"&&Ia()}}),a.jsx("button",{onClick:()=>Ia(),style:{width:45,height:45,borderRadius:"50%",background:"#4facfe",border:"none",color:"#fff",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},children:a.jsx(Ax,{})})]})]})]})]})]})]})}const uN="https://gojo-teacher-web.onrender.com/api",jn="https://ethiostore-17d9f-default-rtdb.firebaseio.com";function dN(){const[t,e]=y.useState(null),[n,r]=y.useState([]),[s,i]=y.useState([]),[o,c]=y.useState(""),[u,d]=y.useState([]),[p,f]=y.useState({}),[m,T]=y.useState(!1),[b,N]=y.useState("semester2"),[A,E]=y.useState([]),[w,_]=y.useState(!1),[O,G]=y.useState([]),[X,j]=y.useState(null),[v,I]=y.useState(!1),k=Dn(),[x,R]=y.useState(!1),[C,oe]=y.useState([]);y.useEffect(()=>{const P=JSON.parse(localStorage.getItem("teacher"));if(!P){k("/login");return}e(P)},[k]);const _e=t==null?void 0:t.userId;y.useEffect(()=>{t&&H(t)},[t]),y.useEffect(()=>{if(!o)return;(async()=>{try{const z=await Y.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/ClassMarks/${o}.json`),U=n.find(te=>te.id===o);if(!U)return;const ne=s.filter(te=>te.grade===U.grade&&te.section===U.section),K={};let se=[];ne.forEach(te=>{var ue,he;const ie=(he=(ue=z.data)==null?void 0:ue[te.id])==null?void 0:he[b];ie!=null&&ie.assessments?(K[te.id]=ie.assessments,se.length||(se=Object.values(ie.assessments))):K[te.id]={}}),f(K),d(se.map(te=>({name:te.name,max:te.max}))),T(se.length>0)}catch(z){console.error("Error loading marks:",z),T(!1),f({})}})()},[o,n,s,b]),y.useEffect(()=>{if(!t)return;(async()=>{try{const[z,U,ne]=await Promise.all([Y.get(`${jn}/TeacherAssignments.json`),Y.get(`${jn}/Courses.json`),Y.get(`${jn}/Teachers.json`)]),K=Object.entries(ne.data||{}).find(([ue,he])=>he.userId===_e);if(!K)return;const se=K[0],te=Object.values(z.data||{}).filter(ue=>ue.teacherId===se).map(ue=>ue.courseId),ie=Object.entries(U.data||{}).filter(([ue])=>te.includes(ue)).map(([ue,he])=>({id:ue,...he}));r(ie)}catch(z){console.error("Error fetching courses:",z)}})()},[t,_e]),y.useEffect(()=>{if(!_e)return;(async()=>{try{const[z,U]=await Promise.all([Y.get(`${jn}/Students.json`),Y.get(`${jn}/Users.json`)]),ne=z.data||{},K=U.data||{},se=Object.entries(ne).map(([te,ie])=>{var ue,he;return{id:te,...ie,name:((ue=K==null?void 0:K[ie.userId])==null?void 0:ue.name)||"Unknown",profileImage:((he=K==null?void 0:K[ie.userId])==null?void 0:he.profileImage)||"/default-profile.png"}});i(se)}catch(z){console.error("Error fetching students:",z),i([])}})()},[_e]),y.useEffect(()=>{o&&(d([]),T(!1),f({}))},[o]);const we=()=>d(P=>[...P,{name:"",max:""}]),Ae=(P,z,U)=>{const ne=[...u];ne[P][z]=U,d(ne)},J=P=>d(z=>z.filter((U,ne)=>ne!==P)),D=async()=>{if(u.reduce((z,U)=>z+Number(U.max||0),0)!==100){alert("Total MAX must be exactly 100");return}const P={};u.forEach((z,U)=>{P[`a${U+1}`]={name:z.name,max:Number(z.max),score:0}});try{const z=n.find(K=>K.id===o);if(!z)return;const U=s.filter(K=>K.grade===z.grade&&K.section===z.section);await Promise.all(U.map(K=>Y.put(`${jn}/ClassMarks/${o}/${K.id}/${b}.json`,{teacherName:t.name,assessments:P})));const ne={};U.forEach(K=>{ne[K.id]=P}),f(ne),T(!0),alert("Assessment structure saved!")}catch(z){console.error("Error submitting structure:",z),alert("Failed to submit structure")}},q=(P,z,U)=>{f(ne=>({...ne,[P]:{...ne[P],[z]:{...ne[P][z],score:Number(U)}}}))},re=async P=>{try{await Y.put(`${jn}/ClassMarks/${o}/${P}/${b}.json`,{teacherName:t.name,assessments:p[P]}),alert("Marks saved successfully")}catch(z){console.error("Save failed:",z),alert("Failed to save marks")}},fe=()=>{localStorage.removeItem("teacher"),k("/login")};y.useEffect(()=>{(async()=>{try{let U=(await Y.get(`${uN}/get_posts`)).data||[];!Array.isArray(U)&&typeof U=="object"&&(U=Object.values(U));const[ne,K]=await Promise.all([Y.get(`${jn}/School_Admins.json`),Y.get(`${jn}/Users.json`)]),se=ne.data||{},te=K.data||{},ie=JSON.parse(localStorage.getItem("teacher")),ue=F(ie==null?void 0:ie.userId),he=Re=>{const Xe=Re.adminId||Re.posterAdminId||Re.poster||Re.admin||null;if(Xe&&se[Xe]){const Ue=se[Xe],Kt=Ue.userId,Ge=te[Kt]||null,en=Ge&&Ge.name||Ue.name||Re.adminName||"Admin",ln=Ge&&Ge.profileImage||Ue.profileImage||Re.adminProfile||"/default-profile.png";return{name:en,profile:ln}}return{name:Re.adminName||"Admin",profile:Re.adminProfile||"/default-profile.png"}},Ne=U.slice().sort((Re,Xe)=>(Xe.time?new Date(Xe.time).getTime():0)-(Re.time?new Date(Re.time).getTime():0)).filter(Re=>Re.postId&&!ue.includes(Re.postId)).slice(0,5).map(Re=>{var Ue;const Xe=he(Re);return{type:"post",id:Re.postId,title:((Ue=Re.message)==null?void 0:Ue.substring(0,50))||"Untitled post",adminName:Xe.name,adminProfile:Xe.profile}});let st=[];try{const Re=ie;if(Re&&Re.userId){const[Xe,Ue]=await Promise.all([Y.get(`${jn}/Chats.json`),Y.get(`${jn}/Users.json`)]),Kt=Xe.data||{},en=Ue.data||{}||{},ln={};Object.entries(en).forEach(([ut,an])=>{an&&an.userId&&(ln[an.userId]=ut)}),st=Object.entries(Kt).map(([ut,an])=>{const cr=(an.unread||{})[Re.userId]||0;if(!cr)return null;const Fs=an.participants||{},cn=Object.keys(Fs||{}).find(Er=>Er!==Re.userId);if(!cn)return null;let Mn=cn,zt=en[Mn];if(!zt){const Er=ln[cn];Er&&(Mn=Er,zt=en[Er])}zt||(zt={userId:cn,name:cn,profileImage:"/default-profile.png"});const es={pushKey:Mn,userId:zt.userId||cn,name:zt.name||zt.username||cn,profileImage:zt.profileImage||zt.profile||"/default-profile.png"},xt=an.lastMessage||{};return{type:"message",chatId:ut,displayName:es.name,profile:es.profileImage,lastMessageText:xt.text||"",lastMessageTime:xt.timeStamp||xt.time||null,unreadForMe:cr}}).filter(Boolean).sort((ut,an)=>(an.lastMessageTime||0)-(ut.lastMessageTime||0))}}catch(Re){console.error("Error fetching message notifications:",Re)}E([...Ne,...st]),G(st)}catch(z){console.error("Error fetching notifications:",z)}})()},[]);const H=async(P=t)=>{try{const z=P||JSON.parse(localStorage.getItem("teacher"));if(!z||!z.userId){oe([]);return}const[U,ne]=await Promise.all([Y.get(`${jn}/Chats.json`),Y.get(`${jn}/Users.json`)]),K=U.data||{},te=ne.data||{}||{},ie={};Object.entries(te).forEach(([he,Ne])=>{Ne&&Ne.userId&&(ie[Ne.userId]=he)});const ue=Object.entries(K).map(([he,Ne])=>{const Re=(Ne.unread||{})[z.userId]||0;if(!Re)return null;const Xe=Ne.participants||{},Ue=Object.keys(Xe||{}).find(ut=>ut!==z.userId);if(!Ue)return null;let Kt=Ue,Ge=te[Kt];if(!Ge){const ut=ie[Ue];ut&&(Kt=ut,Ge=te[ut])}Ge||(Ge={userId:Ue,name:Ue,profileImage:"/default-profile.png"});const en={pushKey:Kt,userId:Ge.userId||Ue,name:Ge.name||Ge.username||Ue,profileImage:Ge.profileImage||Ge.profile||"/default-profile.png"},ln=Ne.lastMessage||{};return{chatId:he,contact:en,displayName:en.name,profile:en.profileImage,lastMessageText:ln.text||"",lastMessageTime:ln.timeStamp||ln.time||null,unreadForMe:Re}}).filter(Boolean).sort((he,Ne)=>(Ne.lastMessageTime||0)-(he.lastMessageTime||0));oe(ue)}catch(z){console.error("Error fetching conversations:",z),oe([])}},M=O.reduce((P,z)=>P+(z.unreadForMe||0),0),Z=P=>{!t||!P||(ye(t.userId,P),E(z=>z.filter(U=>U.id!==P)),_(!1))};function F(P){return JSON.parse(localStorage.getItem(`seen_posts_${P}`))||[]}function ye(P,z){const U=F(P);U.includes(z)||localStorage.setItem(`seen_posts_${P}`,JSON.stringify([...U,z]))}const ve=y.useRef(null),[Q,le]=y.useState(!1),[Ee,W]=y.useState(!1),ee=()=>{const P=ve.current;if(!P)return;const{scrollLeft:z,scrollWidth:U,clientWidth:ne}=P;le(z>8),W(z+ne<U-8)};return y.useEffect(()=>{const P=ve.current;if(!P)return;ee();const z=()=>ee(),U=()=>ee();return P.addEventListener("scroll",z,{passive:!0}),window.addEventListener("resize",U),()=>{P.removeEventListener("scroll",z),window.removeEventListener("resize",U)}},[m,u.length]),a.jsxs("div",{className:"dashboard-page",children:[a.jsxs("nav",{className:"top-navbar",children:[a.jsx("h2",{children:"Gojo Dashboard"}),a.jsxs("div",{className:"nav-right",children:[a.jsxs("div",{className:"icon-circle",style:{position:"relative"},children:[a.jsxs("div",{onClick:()=>_(!w),style:{cursor:"pointer",position:"relative"},children:[a.jsx(Yr,{size:24}),A.length>0&&a.jsx("span",{style:{position:"absolute",top:-5,right:-5,background:"red",color:"white",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:A.length})]}),w&&a.jsx("div",{style:{position:"absolute",top:30,right:0,width:300,maxHeight:400,overflowY:"auto",background:"#fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",borderRadius:8,zIndex:100},children:A.length>0?A.map((P,z)=>P.type==="post"?a.jsxs("div",{onClick:()=>Z(P.id),style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:P.adminProfile,alt:P.adminName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:P.adminName}),a.jsx("p",{style:{margin:0,fontSize:12},children:P.title})]})]},P.id||z):a.jsxs("div",{onClick:()=>{_(!1),k("/all-chat")},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:P.profile||"/default-profile.png",alt:P.displayName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:P.displayName}),a.jsx("p",{style:{margin:0,fontSize:12,color:"#0b78f6"},children:"New message"})]})]},P.chatId||z)):a.jsx("div",{style:{padding:15},children:"No notifications"})})]}),a.jsx("div",{className:"icon-circle",style:{position:"relative",marginLeft:12},children:a.jsxs("div",{onClick:()=>k("/all-chat"),style:{cursor:"pointer",position:"relative"},children:[a.jsx(qr,{size:22}),M>0&&a.jsx("span",{style:{position:"absolute",top:-6,right:-6,background:"#f60b0b",color:"#fff",borderRadius:"50%",minWidth:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 6px"},children:M})]})}),a.jsx("div",{className:"icon-circle",onClick:()=>k("/settings"),children:a.jsx(Sr,{})}),a.jsx("img",{src:(t==null?void 0:t.profileImage)||"/default-profile.png",alt:"profile"})]})]}),a.jsxs("div",{className:"google-dashboard",children:[a.jsxs("div",{className:"google-sidebar",children:[t&&a.jsxs("div",{className:"sidebar-profile",children:[a.jsx("div",{className:"sidebar-img-circle",children:a.jsx("img",{src:t.profileImage||"/default-profile.png",alt:"profile"})}),a.jsx("h3",{children:t.name}),a.jsx("p",{children:t.username})]}),a.jsxs("div",{className:"sidebar-menu",children:[a.jsxs(me,{className:"sidebar-btn",to:"/dashboard",children:[a.jsx(Jr,{})," Home"]}),a.jsxs(me,{className:"sidebar-btn",to:"/students",children:[a.jsx(Ve,{})," Students"]}),a.jsxs(me,{className:"sidebar-btn",to:"/admins",children:[a.jsx(Ve,{})," Admins"]}),a.jsxs(me,{className:"sidebar-btn",to:"/parents",children:[a.jsx(Qr,{})," Parents"]}),a.jsxs(me,{className:"sidebar-btn",to:"/marks",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[a.jsx(wr,{})," Marks"]}),a.jsxs(me,{className:"sidebar-btn",to:"/attendance",children:[a.jsx(Ve,{})," Attendance"]}),a.jsxs(me,{className:"sidebar-btn",to:"/schedule",children:[a.jsx(Ve,{})," Schedule"]}),a.jsxs("button",{className:"sidebar-btn logout-btn",onClick:fe,children:[a.jsx(Xr,{})," Logout"]})]})]}),a.jsx("div",{className:"google-main",children:a.jsxs("div",{className:"main-inner",children:[a.jsx("h2",{style:{textAlign:"center",marginBottom:"35px",color:"#1e3a8a",fontSize:"36px",fontWeight:"700",letterSpacing:"1px"},children:"Marks Entry Dashboard"}),a.jsxs("div",{style:{marginBottom:"30px",display:"flex",justifyContent:"center",alignItems:"center",gap:"15px"},children:[a.jsx("label",{style:{fontWeight:"600",color:"#374151",fontSize:"16px"},children:"Select Course:"}),a.jsxs("select",{value:o,onChange:P=>c(P.target.value),style:{padding:"12px 18px",borderRadius:"12px",border:"1px solid #cbd5e1",background:"#fff",minWidth:"300px",fontSize:"15px",fontWeight:"500",boxShadow:"0 6px 15px rgba(0,0,0,0.08)",transition:"0.3s all"},children:[a.jsx("option",{value:"",children:"-- Select Course --"}),n.map(P=>a.jsxs("option",{value:P.id,children:[P.subject," - Grade ",P.grade," Section ",P.section]},P.id))]})]}),o&&a.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"40px",marginBottom:"35px",borderBottom:"2px solid #c7d2fe",paddingBottom:"10px"},children:["semester1","semester2"].map(P=>{const z=b===P;return a.jsxs("button",{onClick:()=>{N(P),T(!1),d([]),f({})},style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px",fontWeight:"700",letterSpacing:"1px",color:z?"#1e40af":"#6b7280",paddingBottom:"12px",position:"relative",transition:"0.3s all"},children:[P==="semester1"?"Semester 1":"Semester 2",z&&a.jsx("span",{style:{position:"absolute",left:0,bottom:"-2px",width:"100%",height:"4px",borderRadius:"6px",background:"linear-gradient(135deg, #4b6cb7, #1e40af)"}})]},P)})}),m&&a.jsxs("button",{style:{marginBottom:"30px",padding:"10px 18px",background:"linear-gradient(135deg, #f59e0b, #d97706)",color:"#fff",borderRadius:"12px",border:"none",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",boxShadow:"0 8px 20px rgba(0,0,0,0.15)",transition:"0.3s all"},onClick:()=>{T(!1),f({})},children:[a.jsx(bI,{})," Edit Assessment Structure"]}),o&&!m&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{style:{backdropFilter:"blur(15px)",background:"rgba(255, 255, 255, 0.85)",padding:"30px",borderRadius:"20px",boxShadow:"0 15px 30px rgba(0,0,0,0.08)",marginBottom:"40px",transition:"all 0.3s ease"},children:[a.jsx("h3",{style:{marginBottom:"25px",color:"#1f2937",fontWeight:"600",fontSize:"20px"},children:"Assessment Structure"}),u.map((P,z)=>a.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"18px",alignItems:"center"},children:[a.jsx("input",{placeholder:"Assessment Name",value:P.name,onChange:U=>Ae(z,"name",U.target.value),style:{flex:2,padding:"12px 14px",borderRadius:"12px",border:"1px solid #d1d5db",outline:"none",boxShadow:"inset 0 3px 6px rgba(0,0,0,0.06)",fontWeight:"500"}}),a.jsx("input",{type:"number",placeholder:"Max",value:P.max,onChange:U=>Ae(z,"max",U.target.value),style:{flex:1,padding:"12px 14px",borderRadius:"12px",border:"1px solid #d1d5db",outline:"none",boxShadow:"inset 0 3px 6px rgba(0,0,0,0.06)",fontWeight:"500"}}),a.jsx("button",{onClick:()=>J(z),style:{background:"#ef4444",color:"#fff",padding:"12px 14px",borderRadius:"12px",border:"none",cursor:"pointer",boxShadow:"0 6px 15px rgba(0,0,0,0.12)",transition:"0.3s all"},children:a.jsx(jI,{})})]},z)),a.jsxs("div",{style:{display:"flex",gap:"20px",alignItems:"center",marginTop:"20px"},children:[a.jsxs("button",{style:{padding:"12px 20px",borderRadius:"14px",background:"#10b981",color:"#fff",border:"none",cursor:"pointer",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 6px 18px rgba(0,0,0,0.12)",transition:"0.3s all"},onClick:we,children:[a.jsx(CI,{})," Add Assessment"]}),a.jsxs("span",{style:{fontWeight:"600",color:"#374151",fontSize:"16px"},children:["Total Max: ",u.reduce((P,z)=>P+Number(z.max||0),0)," / 100"]})]}),a.jsx("button",{style:{marginTop:"30px",padding:"14px 20px",borderRadius:"16px",background:"linear-gradient(135deg, #4b6cb7, #1e40af)",color:"#fff",border:"none",fontWeight:"600",cursor:"pointer",boxShadow:"0 8px 20px rgba(0,0,0,0.15)",transition:"0.3s all",fontSize:"16px"},onClick:D,children:"Submit Structure"})]}),a.jsx("style",{children:`
        /* Larger fixed table width on wide screens to give more horizontal space */
        @media (min-width: 1024px) {
          /* Wider layout for large screens to increase horizontal scroll area */
          .marks-table-wrapper { overflow-x: visible !important; white-space: normal !important; }
          .marks-table { width: 1600px !important; min-width: 1600px !important; table-layout: auto !important; }
          .marks-table th, .marks-table td { white-space: normal !important; }
          .marks-table td input { width: 120px !important; }
          .marks-scroll-arrow-fixed { display: none !important; }
        }

        @media (max-width: 1023px) {
          .marks-table { width: max-content !important; min-width: 1600px; }
        }
      `})]}),m&&a.jsx("div",{className:"marks-table-wrapper",ref:ve,style:{position:"relative",overflowX:"auto",overflowY:"visible",minHeight:120,width:"1130px",paddingBottom:32,whiteSpace:"nowrap"},children:a.jsxs("table",{className:"marks-table",style:{borderCollapse:"separate",borderSpacing:"0 12px",fontSize:"15px",minWidth:0,width:"1100px"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:"linear-gradient(135deg, #4b6cb7, #1e3a8a)",color:"#fff",borderRadius:"16px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",textTransform:"uppercase",letterSpacing:"1px",fontWeight:"600",fontSize:"14px"},children:[a.jsx("th",{style:{padding:"16px 20px",textAlign:"left",borderRadius:"16px 0 0 16px",background:"rgba(255,255,255,0.1)"},children:a.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx(Ve,{})," Student"]})}),u.map((P,z)=>a.jsxs("th",{style:{padding:"16px 18px",background:"rgba(255,255,255,0.05)",textAlign:"center",transition:"0.3s all"},children:[P.name," (",P.max,")"]},z)),a.jsx("th",{style:{padding:"16px 18px",background:"rgba(255,255,255,0.05)",textAlign:"center"},children:"Total"}),a.jsx("th",{style:{padding:"16px 18px",background:"rgba(255,255,255,0.05)",textAlign:"center"},children:"Grade"}),a.jsxs("th",{style:{padding:"16px 20px",borderRadius:"0 16px 16px 0",background:"rgba(255,255,255,0.1)",textAlign:"center"},children:[a.jsx(yy,{})," Save"]})]})}),a.jsx("tbody",{children:Object.entries(p).map(([P,z])=>{const U=Object.values(z).reduce((te,ie)=>te+(ie.score||0),0),ne=U>=90?"A":U>=80?"B":U>=70?"C":U>=60?"D":"F",K=s.find(te=>te.id===P),se=ne==="A"?"#16a34a":ne==="B"?"#2563eb":ne==="C"?"#f59e0b":ne==="D"?"#f97316":"#ef4444";return a.jsxs("tr",{style:{background:"#f9fafb",borderRadius:"12px",marginBottom:"10px",transition:"0.3s all",cursor:"pointer"},onMouseEnter:te=>te.currentTarget.style.background="#e0e7ff",onMouseLeave:te=>te.currentTarget.style.background="#f9fafb",children:[a.jsxs("td",{style:{padding:"12px",display:"flex",alignItems:"center",gap:"12px",fontWeight:"600"},children:[a.jsx("div",{style:{width:"45px",height:"45px",borderRadius:"50%",overflow:"hidden",border:"2px solid #4b6cb7"},children:a.jsx("img",{src:(K==null?void 0:K.profileImage)||"/default-profile.png",alt:K==null?void 0:K.name,style:{width:"100%",height:"100%",objectFit:"cover"}})}),K==null?void 0:K.name]}),Object.entries(z).map(([te,ie])=>a.jsx("td",{style:{padding:"12px"},children:a.jsx("input",{type:"number",min:"0",max:ie.max,value:ie.score,onChange:ue=>q(P,te,ue.target.value),style:{width:"70px",padding:"8px 12px",borderRadius:"10px",border:"1px solid #cbd5e1",textAlign:"center",boxShadow:"inset 0 3px 6px rgba(0,0,0,0.06)",transition:"0.3s all",fontWeight:"500"}})},te)),a.jsx("td",{style:{padding:"12px",fontWeight:"600"},children:U}),a.jsx("td",{style:{padding:"12px",fontWeight:"700",color:se},children:ne}),a.jsx("td",{style:{padding:"12px"},children:a.jsx("button",{style:{padding:"8px 14px",borderRadius:"12px",background:"#2563eb",color:"#fff",border:"none",cursor:"pointer",transition:"0.3s all"},onClick:()=>re(P),onMouseEnter:te=>te.currentTarget.style.background="#1e40af",onMouseLeave:te=>te.currentTarget.style.background="#2563eb",children:a.jsx(yy,{})})})]},P)})})]})})]})})]})]})}const hN="https://gojo-teacher-web.onrender.com/api",jr="https://ethiostore-17d9f-default-rtdb.firebaseio.com";function fN(){const[t,e]=y.useState([]),[n,r]=y.useState(!0),[s,i]=y.useState(""),[o,c]=y.useState(null),[u,d]=y.useState({}),[p,f]=y.useState(new Date().toISOString().split("T")[0]),[m,T]=y.useState(null),[b,N]=y.useState([]),A=Dn(),[E,w]=y.useState([]),[_,O]=y.useState(!1),[G,X]=y.useState(null),[j,v]=y.useState(!1),[I,k]=y.useState([]),[x,R]=y.useState(null);y.useEffect(()=>{if(!x)return;(async()=>{try{const[M,Z,F]=await Promise.all([Y.get(`${jr}/TeacherAssignments.json`),Y.get(`${jr}/Courses.json`),Y.get(`${jr}/Teachers.json`)]),ye=Object.entries(F.data||{}).find(([Ee,W])=>W.userId===x.userId);if(!ye)return;const ve=ye[0],Q=Object.values(M.data||{}).filter(Ee=>Ee.teacherId===ve).map(Ee=>Ee.courseId),le=Object.entries(Z.data||{}).filter(([Ee])=>Q.includes(Ee)).map(([Ee,W])=>({id:Ee,...W}));N(le),!m&&le.length>0&&T(le[0])}catch(M){console.error("Error fetching courses:",M)}})()},[x]),y.useEffect(()=>{if(!m)return;(async()=>{r(!0);try{const[M,Z]=await Promise.all([Y.get(`${jr}/Students.json`),Y.get(`${jr}/Users.json`)]),F=M.data||{},ye=Z.data||{},ve=Object.entries(F).filter(([,Q])=>Q.grade===m.grade&&Q.section===m.section).map(([Q,le])=>{var Ee,W;return{studentId:Q,...le,name:((Ee=ye==null?void 0:ye[le.userId])==null?void 0:Ee.name)||"Unknown",profileImage:((W=ye==null?void 0:ye[le.userId])==null?void 0:W.profileImage)||"/default-profile.png"}});e(ve),i("")}catch{i("Failed to fetch students. Please try again."),e([])}finally{r(!1)}})()},[m]);const C=()=>{localStorage.removeItem("teacher"),A("/login")};y.useEffect(()=>{const H=JSON.parse(localStorage.getItem("teacher"));H&&R(H)},[]),x==null||x.userId,y.useEffect(()=>{const H=JSON.parse(localStorage.getItem("teacher"));H&&c(H)},[]),y.useEffect(()=>{if(!m)return;(async()=>{try{const M=await Y.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Attendance/${m.id}/${p}.json`);d(M.data||{})}catch(M){console.error("Error fetching attendance:",M),d({})}})()},[m,p]);const oe=(H,M)=>{d(Z=>({...Z,[H]:M}))},_e=async()=>{if(!m){alert("Please select a course");return}try{await Y.put(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Attendance/${m.id}/${p}.json`,u),alert("Attendance saved successfully!")}catch(H){console.error("Error saving attendance:",H),alert("Failed to save attendance")}};[...new Set(t.map(H=>H.grade))].sort(),y.useEffect(()=>{(async()=>{try{let Z=(await Y.get(`${hN}/get_posts`)).data||[];!Array.isArray(Z)&&typeof Z=="object"&&(Z=Object.values(Z));const[F,ye,ve]=await Promise.all([Y.get(`${jr}/School_Admins.json`),Y.get(`${jr}/Users.json`),Y.get(`${jr}/Chats.json`)]),Q=F.data||{},le=ye.data||{},Ee=ve.data||{},W=JSON.parse(localStorage.getItem("teacher")),ee=Ae(W==null?void 0:W.userId),P=K=>{const se=K.adminId||K.posterAdminId||K.poster||K.admin||null;if(se&&Q[se]){const te=Q[se],ie=te.userId,ue=le[ie]||null,he=ue&&ue.name||te.name||K.adminName||"Admin",Ne=ue&&ue.profileImage||te.profileImage||K.adminProfile||"/default-profile.png";return{name:he,profile:Ne}}return{name:K.adminName||"Admin",profile:K.adminProfile||"/default-profile.png"}},z=Z.slice().sort((K,se)=>{const te=K.time?new Date(K.time).getTime():0;return(se.time?new Date(se.time).getTime():0)-te}).filter(K=>K.postId&&!ee.includes(K.postId)).slice(0,5).map(K=>{var te;const se=P(K);return{id:K.postId,type:"post",title:((te=K.message)==null?void 0:te.substring(0,50))||"Untitled post",adminName:se.name,adminProfile:se.profile}});let U=[];W&&W.userId&&Object.entries(Ee).forEach(([K,se])=>{const ie=(se.unread||{})[W.userId]||0;if(!ie)return;const ue=se.participants||{},he=Object.keys(ue).find(st=>st!==W.userId);let Ne=le[he]||{userId:he,name:he,profileImage:"/default-profile.png"};U.push({chatId:K,type:"message",displayName:Ne.name||Ne.username||he,profile:Ne.profileImage||Ne.profile||"/default-profile.png",unreadForMe:ie})});const ne=[...z,...U].slice(0,5);w(ne)}catch(M){console.error("Error fetching notifications:",M)}})()},[]);const we=async H=>{if(x){if(H.type==="post"&&H.id)J(x.userId,H.id),w(M=>M.filter(Z=>Z.id!==H.id)),O(!1),A("/dashboard");else if(H.type==="message"&&H.chatId){w(M=>M.filter(Z=>Z.chatId!==H.chatId)),O(!1);try{await Y.put(`${jr}/Chats/${H.chatId}/unread/${x.userId}.json`,null)}catch(M){console.error("Failed to clear unread in DB:",M)}A("/all-chat")}}};function Ae(H){return JSON.parse(localStorage.getItem(`seen_posts_${H}`))||[]}function J(H,M){const Z=Ae(H);Z.includes(M)||localStorage.setItem(`seen_posts_${H}`,JSON.stringify([...Z,M]))}const D=E.filter(H=>H.type==="message").reduce((H,M)=>H+(M.unreadForMe||0),0),[q,re]=Qt.useState(window.innerWidth<window.innerHeight);return Qt.useEffect(()=>{const H=()=>{re(window.innerWidth<window.innerHeight)};return window.addEventListener("resize",H),()=>window.removeEventListener("resize",H)},[]),a.jsxs(a.Fragment,{children:[a.jsx("style",{children:`
    .dashboard-page {
      min-height: 100vh;
      background: #f0f4f8;
      display: flex;
      flex-direction: column;
    }
    .top-navbar {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      z-index: 1000;
      background: #fff;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 24px;
      height: 64px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.07);
    }
    .nav-right {
      display: flex;
      align-items: center;
      gap: 18px;
    }
    .google-dashboard {
      display: flex;
      flex: 1;
      margin-top: 64px;
      min-height: 0;
    }
    .google-sidebar {
      position: fixed;
      top: 64px;
      left: 0;
      width: 200px;
      height: calc(100vh - 64px);
      background: #fff;
      box-shadow: 2px 0 8px rgba(0,0,0,0.04);
      z-index: 900;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-top: 18px;
      overflow-y: auto;
    }
    .attendance-main-content-responsive {
      margin-left: 220px;
      margin-top: 0;
      width: calc(100vw - 240px);
      min-width: 320px;
      max-width: 100vw;
      background: #fff;
      border-radius: 15px;
      box-shadow: 0 8px 10px rgba(0,0,0,0.1);
      padding: 30px;
      position: relative;
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
    }
    @media (max-width: 900px) {
      .attendance-main-content-responsive {
        width: 100vw;
        margin-left: 60px;
        min-width: unset;
        max-width: unset;
        padding: 18px 4vw;
      }
      .google-sidebar {
        width: 60px;
        padding: 0;
        align-items: flex-start;
      }
    }
    @media (max-width: 600px) {
      .top-navbar {
        height: 54px;
        padding: 0 8px;
      }
      .google-sidebar {
        top: 54px;
        width: 48px;
        min-width: 48px;
        padding: 0;
        align-items: flex-start;
      }
      .attendance-main-content-responsive {
        width: 100vw;
        margin-left: 48px;
        padding: 10px 2vw;
        border-radius: 8px;
        align-items: flex-start;
      }
      .dashboard-page {
        min-height: 100vh;
      }
      .google-dashboard {
        flex-direction: column;
        margin-top: 54px;
      }
    }
  `}),a.jsxs("div",{className:"dashboard-page",children:[a.jsxs("nav",{className:"top-navbar",children:[a.jsx("h2",{children:"Gojo Dashboard"}),a.jsxs("div",{className:"nav-right",children:[a.jsxs("div",{className:"icon-circle",style:{position:"relative"},children:[a.jsxs("div",{onClick:()=>O(!_),style:{cursor:"pointer",position:"relative"},children:[a.jsx(Yr,{size:24}),E.length>0&&a.jsx("span",{style:{position:"absolute",top:-5,right:-5,background:"red",color:"white",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:E.length})]}),_&&a.jsx("div",{style:{position:"absolute",top:30,right:0,width:300,maxHeight:400,overflowY:"auto",background:"#fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",borderRadius:8,zIndex:100},children:E.length>0?E.map((H,M)=>H.type==="post"?a.jsxs("div",{onClick:()=>we(H),style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:H.adminProfile,alt:H.adminName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:H.adminName}),a.jsx("p",{style:{margin:0,fontSize:12},children:H.title})]})]},H.id||M):a.jsxs("div",{onClick:()=>we(H),style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:H.profile||"/default-profile.png",alt:H.displayName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:H.displayName}),a.jsx("p",{style:{margin:0,fontSize:12,color:"#0b78f6"},children:"New message"})]})]},H.chatId||M)):a.jsx("div",{style:{padding:15},children:"No notifications"})})]}),a.jsx("div",{className:"icon-circle",style:{position:"relative",marginLeft:12},children:a.jsxs("div",{onClick:()=>A("/all-chat"),style:{cursor:"pointer",position:"relative"},children:[a.jsx(qr,{size:22}),D>0&&a.jsx("span",{style:{position:"absolute",top:-6,right:-6,background:"#f60b0b",color:"#fff",borderRadius:"50%",minWidth:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 5px"},children:D})]})}),a.jsx("div",{className:"icon-circle",onClick:()=>A("/settings"),children:a.jsx(Sr,{})}),a.jsx("img",{src:(x==null?void 0:x.profileImage)||"/default-profile.png",alt:"teacher",className:"profile-img"})]})]}),a.jsxs("div",{className:"google-dashboard",children:[a.jsxs("div",{className:"google-sidebar",children:[x&&a.jsxs("div",{className:"sidebar-profile",children:[a.jsx("div",{className:"sidebar-img-circle",children:a.jsx("img",{src:x.profileImage||"/default-profile.png",alt:"profile"})}),a.jsx("h3",{children:x.name}),a.jsx("p",{children:x.username})]}),a.jsxs("div",{className:"sidebar-menu",children:[a.jsxs(me,{className:"sidebar-btn",to:"/dashboard",children:[a.jsx(Jr,{})," Home"]}),a.jsxs(me,{className:"sidebar-btn",to:"/students",children:[a.jsx(Ve,{})," Students"]}),a.jsxs(me,{className:"sidebar-btn",to:"/admins",children:[a.jsx(Ve,{})," Admins"]}),a.jsxs(me,{className:"sidebar-btn",to:"/parents",children:[a.jsx(Qr,{})," Parents"]}),a.jsxs(me,{className:"sidebar-btn",to:"/marks",children:[a.jsx(wr,{})," Marks"]}),a.jsxs(me,{className:"sidebar-btn",to:"/attendance",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[a.jsx(Ve,{})," Attendance"]}),a.jsxs(me,{className:"sidebar-btn",to:"/schedule",children:[a.jsx(Ve,{})," Schedule"]}),a.jsxs("button",{className:"sidebar-btn logout-btn",onClick:C,children:[a.jsx(Xr,{})," Logout"]})]})]}),a.jsx("div",{style:{flex:1,display:"flex",justifyContent:"flex-start",padding:"20px 24px",background:"#f0f4f8"},children:a.jsxs("div",{className:"attendance-main-content-responsive",children:[a.jsx("h2",{style:{textAlign:"center",marginBottom:"25px",color:"#333"},children:"Attendance"}),a.jsxs("div",{style:{marginBottom:"20px",display:"flex",alignItems:"center",gap:"15px"},children:[a.jsx("label",{style:{fontWeight:"500",color:"#555"},children:"Select Course:"}),a.jsxs("select",{value:(m==null?void 0:m.id)||"",onChange:H=>{const M=b.find(Z=>Z.id===H.target.value);T(M||null)},style:{padding:"8px 12px",borderRadius:"8px",border:"1px solid #ccc",outline:"none",background:"#f9f9f9",minWidth:"200px",fontWeight:"500"},children:[a.jsx("option",{value:"",children:"-- Select Course --"}),b.map(H=>a.jsxs("option",{value:H.id,children:[H.name," - Grade ",H.grade," Section ",H.section]},H.id))]})]}),a.jsxs("div",{style:{marginBottom:"25px",display:"flex",alignItems:"center",gap:"15px"},children:[a.jsx("label",{style:{fontWeight:"500",color:"#555"},children:"Date:"}),a.jsx("input",{type:"date",value:p,onChange:H=>f(H.target.value),style:{padding:"8px 12px",borderRadius:"8px",border:"1px solid #ccc",outline:"none",background:"#f9f9f9"}})]}),n?a.jsx("p",{children:"Loading students..."}):s?a.jsx("p",{style:{color:"red"},children:s}):a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",boxShadow:"0 4px 10px rgba(0,0,0,0.05)"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:"#4b6cb7",color:"#fff",textAlign:"left"},children:[a.jsx("th",{style:{padding:"12px"},children:"Student"}),a.jsx("th",{style:{padding:"12px",textAlign:"center"},children:"Present"}),a.jsx("th",{style:{padding:"12px",textAlign:"center"},children:"Absent"}),a.jsx("th",{style:{padding:"12px",textAlign:"center"},children:"Late"})]})}),a.jsx("tbody",{children:t.map(H=>a.jsxs("tr",{style:{borderBottom:"1px solid #eee",transition:"background 0.3s"},onMouseEnter:M=>M.currentTarget.style.background="#f9f9f9",onMouseLeave:M=>M.currentTarget.style.background="transparent",children:[a.jsxs("td",{style:{padding:"12px",display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",overflow:"hidden",border:"2px solid #4b6cb7"},children:a.jsx("img",{src:H.profileImage||"/default-profile.png",alt:H.name,style:{width:"100%",height:"100%",objectFit:"cover"}})}),a.jsx("span",{style:{fontWeight:"500",color:"#333"},children:H.name})]}),a.jsx("td",{style:{padding:"10px",textAlign:"center"},children:a.jsx("button",{style:{background:u[H.studentId]==="present"?"#28a745":"#e0e0e0",color:u[H.studentId]==="present"?"#fff":"#333",padding:"6px 12px",border:"none",borderRadius:"6px",cursor:"pointer",transition:"0.2s"},onClick:()=>oe(H.studentId,"present"),children:"Present"})}),a.jsx("td",{style:{padding:"10px",textAlign:"center"},children:a.jsx("button",{style:{background:u[H.studentId]==="absent"?"#dc3545":"#e0e0e0",color:u[H.studentId]==="absent"?"#fff":"#333",padding:"6px 12px",border:"none",borderRadius:"6px",cursor:"pointer",transition:"0.2s"},onClick:()=>oe(H.studentId,"absent"),children:"Absent"})}),a.jsx("td",{style:{padding:"10px",textAlign:"center"},children:a.jsx("button",{style:{background:u[H.studentId]==="late"?"#ffc107":"#e0e0e0",color:u[H.studentId]==="late"?"#fff":"#333",padding:"6px 12px",border:"none",borderRadius:"6px",cursor:"pointer",transition:"0.2s"},onClick:()=>oe(H.studentId,"late"),children:"Late"})})]},H.studentId))})]}),a.jsx("div",{style:{textAlign:"center"},children:a.jsx("button",{style:{marginTop:"25px",padding:"12px 25px",borderRadius:"10px",background:"#4b6cb7",color:"#fff",fontWeight:"600",border:"none",cursor:"pointer",boxShadow:"0 4px 10px rgba(0,0,0,0.15)",transition:"0.3s"},onClick:_e,onMouseEnter:H=>H.currentTarget.style.background="#3a539b",onMouseLeave:H=>H.currentTarget.style.background="#4b6cb7",children:"Save Attendance"})})]})})]})]})]})}const k0=(t,e)=>[t,e].sort().join("_"),pN=t=>{if(!t)return"";const e=new Date(t),n=e.getHours().toString().padStart(2,"0"),r=e.getMinutes().toString().padStart(2,"0");return`${n}:${r}`},gN="https://gojo-teacher-web.onrender.com/api",ls="https://ethiostore-17d9f-default-rtdb.firebaseio.com",mN=({admin:t,selected:e,onClick:n})=>a.jsxs("div",{onClick:()=>n(t),style:{width:"100%",borderRadius:"12px",padding:"15px",display:"flex",alignItems:"center",gap:"20px",cursor:"pointer",background:e?"#e0e7ff":"#fff",border:e?"2px solid #4b6cb7":"1px solid #ddd",boxShadow:e?"0 6px 15px rgba(75,108,183,0.3)":"0 4px 10px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},children:[a.jsx("img",{src:t.profileImage||"/default-profile.png",alt:t.name,style:{width:"50px",height:"50px",borderRadius:"50%",objectFit:"cover",border:e?"3px solid #4b6cb7":"3px solid transparent"}}),a.jsxs("div",{children:[a.jsx("h3",{style:{margin:0},children:t.name}),a.jsx("p",{style:{margin:"4px 0",color:"#555"},children:t.username||t.email})]})]});function yN(){const[t,e]=y.useState([]),[n,r]=y.useState(!0),[s,i]=y.useState(""),[o,c]=y.useState(null),[u,d]=y.useState("details"),[p,f]=y.useState(!1),[m,T]=y.useState([]),[b,N]=y.useState(""),A=y.useRef(null),[E,w]=y.useState(null),_=JSON.parse(localStorage.getItem("teacher"))||{},O=String(_.userId||""),[G,X]=y.useState(null),[j,v]=y.useState([]),[I,k]=y.useState(!1),[x,R]=y.useState(null),C=y.useRef({}),[oe,_e]=y.useState(!1),[we,Ae]=y.useState([]),J=Dn();y.useEffect(()=>{const Q=JSON.parse(localStorage.getItem("teacher"));if(!Q){J("/login");return}w(Q)},[J]),y.useEffect(()=>{E&&fe(E)},[E]);const D=()=>{localStorage.removeItem("teacher"),J("/login")};y.useEffect(()=>{async function Q(){try{r(!0);const[le,Ee]=await Promise.all([Y.get(`${ls}/Users.json`),Y.get(`${ls}/School_Admins.json`)]),W=le.data||{},ee=Ee.data||{},P={};Object.entries(ee).forEach(([U,ne])=>{ne.userId&&(P[ne.userId]={...ne,adminKey:U})});const z=Object.entries(W).filter(([U,ne])=>{const K=(ne.role||ne.userType||"").toLowerCase();return K==="admin"||K==="school_admin"||K==="school_admins"}).map(([U,ne])=>{const K=P[ne.userId];return{adminId:K&&K.adminKey||U,...ne,...K?{title:K.title,status:K.status,schoolAdminKey:K.adminKey}:{}}});e(z),i(z.length===0?"No admins found":"")}catch(le){console.error(le),i("Failed to fetch admins")}finally{r(!1)}}Q()},[]),y.useEffect(()=>{var Q;(Q=A.current)==null||Q.scrollIntoView({behavior:"smooth"})},[m]),y.useEffect(()=>{if(!O||!G)return;const Q=k0(O,G.userId),le=Ot(Ut,`Chats/${Q}/messages`);return Ji(le,Ee=>{const W=Ee.val()||{},ee=Object.entries(W).map(([P,z])=>({id:P,...z,isTeacher:z.senderId===O})).sort((P,z)=>P.timeStamp-z.timeStamp);T(ee),Object.entries(W).forEach(([P,z])=>{if(z&&!z.seen&&z.receiverId===O){const U=Date.now();Nr(Ot(Ut,`Chats/${Q}/messages/${P}`),{seen:!0,seenAt:U}).catch(()=>{})}}),Nr(Ot(Ut,`Chats/${Q}/unread`),{[O]:0}).catch(()=>{})}),()=>yw(le)},[O,G]);const q=async()=>{if(!b.trim()||!o)return;const Q=O,le=o.userId,Ee=k0(Q,le),W=Date.now(),ee={senderId:Q,receiverId:le,type:"text",text:b,imageUrl:null,replyTo:null,seen:!1,edited:!1,deleted:!1,timeStamp:W};try{await Y.post(`${ls}/Chats/${Ee}/messages.json`,ee),await Y.patch(`${ls}/Chats/${Ee}.json`,{participants:{[Q]:!0,[le]:!0},lastMessage:{text:b,senderId:Q,seen:!1,timeStamp:W},unread:{[Q]:0,[le]:1}}),N("")}catch(P){console.error("Send message error:",P)}};y.useEffect(()=>{(async()=>{try{let Ee=(await Y.get(`${gN}/get_posts`)).data||[];!Array.isArray(Ee)&&typeof Ee=="object"&&(Ee=Object.values(Ee));const[W,ee]=await Promise.all([Y.get(`${ls}/School_Admins.json`),Y.get(`${ls}/Users.json`)]),P=W.data||{},z=ee.data||{},U=JSON.parse(localStorage.getItem("teacher")),ne=re(U==null?void 0:U.userId),K=te=>{const ie=te.adminId||te.posterAdminId||te.poster||te.admin||null;if(ie&&P[ie]){const ue=P[ie],he=ue.userId,Ne=z[he]||null,st=Ne&&Ne.name||ue.name||te.adminName||"Admin",Re=Ne&&Ne.profileImage||ue.profileImage||te.adminProfile||"/default-profile.png";return{name:st,profile:Re}}return{name:te.adminName||"Admin",profile:te.adminProfile||"/default-profile.png"}},se=Ee.slice().sort((te,ie)=>{const ue=te.time?new Date(te.time).getTime():0;return(ie.time?new Date(ie.time).getTime():0)-ue}).filter(te=>te.postId&&!ne.includes(te.postId)).slice(0,5).map(te=>{var ue;const ie=K(te);return{id:te.postId,title:((ue=te.message)==null?void 0:ue.substring(0,50))||"Untitled post",adminName:ie.name,adminProfile:ie.profile}});v(se)}catch(le){console.error("Error fetching notifications:",le)}})()},[]);function re(Q){return JSON.parse(localStorage.getItem(`seen_posts_${Q}`))||[]}const fe=async(Q=E)=>{try{const le=Q||JSON.parse(localStorage.getItem("teacher"));if(!le||!le.userId){Ae([]);return}const[Ee,W]=await Promise.all([Y.get(`${ls}/Chats.json`),Y.get(`${ls}/Users.json`)]),ee=Ee.data||{},z=W.data||{}||{},U={};Object.entries(z).forEach(([K,se])=>{se&&se.userId&&(U[se.userId]=K)});const ne=Object.entries(ee).map(([K,se])=>{const ie=(se.unread||{})[le.userId]||0;if(!ie)return null;const ue=se.participants||{},he=Object.keys(ue||{}).find(Ue=>Ue!==le.userId);if(!he)return null;let Ne=he,st=z[Ne];if(!st){const Ue=U[he];Ue&&(Ne=Ue,st=z[Ue])}st||(st={userId:he,name:he,profileImage:"/default-profile.png"});const Re={pushKey:Ne,userId:st.userId||he,name:st.name||st.username||he,profileImage:st.profileImage||st.profile||"/default-profile.png"},Xe=se.lastMessage||{};return{chatId:K,contact:Re,displayName:Re.name,profile:Re.profileImage,lastMessageText:Xe.text||"",lastMessageTime:Xe.timeStamp||Xe.time||null,unreadForMe:ie}}).filter(Boolean).sort((K,se)=>(se.lastMessageTime||0)-(K.lastMessageTime||0));Ae(ne)}catch(le){console.error("Error fetching conversations:",le),Ae([])}},H=we.reduce((Q,le)=>Q+(le.unreadForMe||0),0),[M,Z]=Qt.useState(window.innerWidth<window.innerHeight),[F,ye]=Qt.useState(window.innerWidth);Qt.useEffect(()=>{const Q=()=>{const le=window.innerWidth;Z(le<window.innerHeight),ye(le)};return Q(),window.addEventListener("resize",Q),()=>window.removeEventListener("resize",Q)},[]);const ve=F>=1800?"800px":F>=1500?"600px":F>=1200?"400px":"300px";return a.jsxs("div",{className:"dashboard-page",children:[a.jsxs("nav",{className:"top-navbar",children:[a.jsx("h2",{children:"Gojo Dashboard"}),a.jsxs("div",{className:"nav-right",children:[a.jsxs("div",{className:"icon-circle",style:{position:"relative"},children:[a.jsxs("div",{onClick:()=>k(!I),style:{cursor:"pointer",position:"relative"},children:[a.jsx(Yr,{size:24}),j.length+H>0&&a.jsx("span",{style:{position:"absolute",top:-5,right:-5,background:"red",color:"white",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:j.length+H})]}),I&&a.jsxs("div",{style:{position:"absolute",top:30,right:0,width:300,maxHeight:400,overflowY:"auto",background:"#fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",borderRadius:8,zIndex:100},children:[j.length>0&&j.map((Q,le)=>a.jsxs("div",{onClick:()=>{J("/dashboard"),setTimeout(()=>{const Ee=C.current[Q.id];Ee&&(Ee.scrollIntoView({behavior:"smooth",block:"center"}),R(Q.id),setTimeout(()=>R(null),3e3))},150),v(Ee=>Ee.filter((W,ee)=>ee!==le)),k(!1)},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:Q.adminProfile,alt:Q.adminName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:Q.adminName}),a.jsx("p",{style:{margin:0,fontSize:12},children:Q.title})]})]},Q.id||le)),H>0&&we.filter(Q=>Q.unreadForMe>0).map((Q,le)=>a.jsxs("div",{onClick:()=>{k(!1),J("/all-chat")},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:Q.profile||"/default-profile.png",alt:Q.displayName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:Q.displayName}),a.jsx("p",{style:{margin:0,fontSize:12,color:"#0b78f6"},children:"New message"})]})]},Q.chatId||le)),j.length===0&&H===0&&a.jsx("div",{style:{padding:15},children:"No notifications"})]})]}),a.jsx("div",{className:"icon-circle",style:{position:"relative",marginLeft:12},children:a.jsxs("div",{onClick:()=>J("/all-chat"),style:{cursor:"pointer",position:"relative"},children:[a.jsx(qr,{size:22}),H>0&&a.jsx("span",{style:{position:"absolute",top:-6,right:-6,background:"#f60b0b",color:"#fff",borderRadius:"50%",minWidth:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 5px"},children:H})]})}),a.jsx("div",{className:"icon-circle",onClick:()=>J("/settings"),children:a.jsx(Sr,{})}),a.jsx("img",{src:(E==null?void 0:E.profileImage)||"/default-profile.png",alt:"teacher",className:"profile-img"})]})]}),a.jsxs("div",{className:"google-dashboard",children:[a.jsxs("div",{className:"google-sidebar",children:[E&&a.jsxs("div",{className:"sidebar-profile",children:[a.jsx("div",{className:"sidebar-img-circle",children:a.jsx("img",{src:E.profileImage||"/default-profile.png",alt:"profile"})}),a.jsx("h3",{children:E.name}),a.jsx("p",{children:E.username})]}),a.jsxs("div",{className:"sidebar-menu",children:[a.jsxs(me,{className:"sidebar-btn",to:"/dashboard",children:[a.jsx(Jr,{})," Home"]}),a.jsxs(me,{className:"sidebar-btn",to:"/students",children:[a.jsx(Ve,{})," Students"]}),a.jsxs(me,{className:"sidebar-btn",to:"/admins",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[a.jsx(Ve,{})," Admins"]}),a.jsxs(me,{className:"sidebar-btn",to:"/parents",children:[a.jsx(Qr,{})," Parents"]}),a.jsxs(me,{className:"sidebar-btn",to:"/marks",children:[a.jsx(wr,{})," Marks"]}),a.jsxs(me,{className:"sidebar-btn",to:"/attendance",children:[a.jsx(Ve,{})," Attendance"]}),a.jsxs(me,{className:"sidebar-btn",to:"/schedule",children:[a.jsx(Ve,{})," Schedule"]}),a.jsxs("button",{className:"sidebar-btn logout-btn",onClick:D,children:[a.jsx(Xr,{})," Logout"]})]})]}),a.jsxs("div",{style:{flex:1,display:"flex",justifyContent:"center",padding:"30px"},children:[a.jsxs("div",{style:{width:ve,marginLeft:"40px"},children:[a.jsx("h2",{style:{textAlign:"center",marginBottom:"20px"},children:"All Admins"}),n&&a.jsx("p",{children:"Loading admins..."}),s&&a.jsx("p",{style:{color:"red"},children:s}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:t.map(Q=>a.jsx(mN,{admin:Q,selected:(o==null?void 0:o.adminId)===Q.adminId,onClick:le=>{c(le),X(le)}},Q.adminId))})]}),o&&a.jsxs("div",{style:{width:M?"100%":"30%",height:M?"100vh":"calc(100vh - 60px)",position:"fixed",right:0,top:M?0:"60px",background:"#fff",boxShadow:M?"0 0 0 rgba(0,0,0,0)":"0 0 15px rgba(0,0,0,0.05)",zIndex:1e3,display:"flex",flexDirection:"column",overflowY:"auto",padding:M?"18px":"25px",transition:"all 0.35s ease"},children:[a.jsx("button",{onClick:()=>c(null),"aria-label":"Close admin details",title:"Close",style:{position:"fixed",top:52,right:16,width:42,height:42,borderRadius:"12px",border:"none",background:"#fff",boxShadow:"0 8px 18px rgba(2,6,23,0.15)",cursor:"pointer",display:"grid",placeItems:"center",zIndex:2e3,fontSize:22,fontWeight:900,color:"#0f172a"},children:""}),a.jsxs("div",{style:{textAlign:"center",marginBottom:"20px"},children:[a.jsx("div",{style:{width:"120px",height:"120px",margin:"0 auto 15px",borderRadius:"50%",overflow:"hidden",border:"4px solid #4b6cb7"},children:a.jsx("img",{src:o.profileImage||"/default-profile.png",alt:o.name,style:{width:"100%",height:"100%",objectFit:"cover"}})}),a.jsx("h2",{children:o.name}),a.jsx("p",{children:o.username})]}),a.jsx("div",{style:{display:"flex",marginBottom:"15px"},children:["details","Plan","Report"].map(Q=>a.jsx("button",{onClick:()=>d(Q),style:{flex:1,padding:"10px",border:"none",background:"none",cursor:"pointer",fontWeight:"600",color:u===Q?"#4b6cb7":"#777",borderBottom:u===Q?"3px solid #4b6cb7":"3px solid transparent"},children:Q.toUpperCase()},Q))}),u==="details"&&o&&a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:28,padding:50,marginLeft:0,marginRight:0,borderRadius:0,background:"linear-gradient(180deg,#eef2ff,#f8fafc)",fontFamily:"Inter, system-ui"},children:a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:24,fontWeight:900,marginBottom:18,marginTop:-30,background:"linear-gradient(90deg,#2563eb,#7c3aed)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Administrator Details"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",columnGap:68,rowGap:14},children:[["Admin ID",o.adminId||o.userId],["Email",o.email],["Phone",o.phone],["Gender",o.gender?o.gender.charAt(0).toUpperCase()+o.gender.slice(1):null],["Title",o.title],["Status",o.status?o.status.charAt(0).toUpperCase()+o.status.slice(1):null]].map(([Q,le])=>a.jsxs("div",{style:{padding:18,borderRadius:20,background:"#ffffff",boxShadow:"0 6px 10px rgba(0,0,0,0.08)",marginLeft:-30,marginRight:-30},children:[a.jsx("div",{style:{fontSize:12,fontWeight:700,color:"#000102",textTransform:"uppercase"},children:Q}),a.jsx("div",{style:{marginTop:8,fontSize:16,fontWeight:400,color:"#000102"},children:le||""})]},Q))})]})}),u==="Plan"&&a.jsx("p",{children:"Plan data here."}),u==="Report"&&a.jsx("p",{children:"Report data here."}),!p&&o&&a.jsx("div",{onClick:()=>f(!0),style:{position:"fixed",bottom:"20px",right:"20px",width:"60px",height:"60px",background:"linear-gradient(135deg, #833ab4, #202ef3, #395a8b)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",cursor:"pointer",zIndex:1e3,boxShadow:"0 8px 18px rgba(0,0,0,0.25)"},children:a.jsx(Sp,{size:30})}),p&&o&&E&&a.jsxs("div",{style:{position:"fixed",bottom:"20px",right:"20px",width:"360px",height:"480px",background:"#fff",borderRadius:"16px",boxShadow:"0 12px 30px rgba(0,0,0,0.25)",zIndex:2e3,display:"flex",flexDirection:"column",overflow:"hidden"},children:[a.jsxs("div",{style:{padding:"14px",borderBottom:"1px solid #eee",display:"flex",justifyContent:"space-between",alignItems:"center",background:"#fafafa"},children:[a.jsx("strong",{children:o.name}),a.jsxs("div",{style:{display:"flex",gap:"10px"},children:[a.jsx("button",{onClick:()=>{f(!1),J("/all-chat",{state:{contact:o,tab:"admin"}})},style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px"},children:""}),a.jsx("button",{onClick:()=>f(!1),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:""})]})]}),a.jsxs("div",{style:{flex:1,padding:"12px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"6px",background:"#f9f9f9"},children:[m.length===0?a.jsxs("p",{style:{textAlign:"center",color:"#aaa"},children:["Start chatting with ",o.name]}):m.map(Q=>a.jsx("div",{style:{display:"flex",flexDirection:Q.isTeacher?"row-reverse":"row",alignItems:"flex-end",marginBottom:10},children:a.jsxs("div",{style:{background:Q.isTeacher?"#4facfe":"#fff",color:Q.isTeacher?"#fff":"#000",padding:"10px 14px",borderRadius:18,maxWidth:"65%",position:"relative",boxShadow:"0 2px 6px rgba(0,0,0,0.05)"},children:[Q.text,a.jsxs("div",{style:{fontSize:10,color:"#888",marginTop:4,display:"flex",justifyContent:"flex-end",alignItems:"center",gap:4},children:[pN(Q.timeStamp),Q.isTeacher&&a.jsx(lo,{size:10,color:Q.seen?"#4facfe":"#ccc"})]})]})},Q.id)),a.jsx("div",{ref:A})]}),a.jsxs("div",{style:{padding:"10px",borderTop:"1px solid #eee",display:"flex",gap:"8px",background:"#fff"},children:[a.jsx("input",{value:b,onChange:Q=>N(Q.target.value),placeholder:"Type a message...",style:{flex:1,padding:"10px 14px",borderRadius:"999px",border:"1px solid #ccc",outline:"none"},onKeyDown:Q=>{Q.key==="Enter"&&q()}}),a.jsx("button",{onClick:q,style:{background:"linear-gradient(135deg, #0751f1, #0e35e4, #0f5afc)",border:"none",borderRadius:"50%",width:"42px",height:"42px",color:"#fff",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px"},children:""})]})]})]})]})]})]})}const vN="https://gojo-teacher-web.onrender.com/api";function xN(){const[t,e]=y.useState(null),[n,r]=y.useState([]),[s,i]=y.useState(""),[o,c]=y.useState(""),[u,d]=y.useState(null),[p,f]=y.useState([]),m=Dn(),[T,b]=y.useState([]),[N,A]=y.useState(!1),[E,w]=y.useState(null),_=y.useRef({}),O=t==null?void 0:t.userId;y.useEffect(()=>{const v=JSON.parse(localStorage.getItem("teacher"));if(!v){m("/login");return}e(v)},[]),y.useEffect(()=>{(async()=>{try{const x=((await Y.get(`${vN}/get_posts`)).data||[]).slice(0,5).map(R=>{var C;return{id:R.postId,title:((C=R.message)==null?void 0:C.substring(0,50))||"Untitled post",adminName:R.adminName||"Admin",adminProfile:R.adminProfile||"/default-profile.png"}});b(x)}catch(I){console.error("Error fetching notifications:",I)}})()},[]);const G=(v,I)=>{w(v);const k=_.current[v];k&&k.scrollIntoView({behavior:"smooth",block:"center"});const x=[...T];x.splice(I,1),b(x),A(!1),setTimeout(()=>w(null),3e3)};y.useEffect(()=>{if(!t)return;async function v(){try{const[I,k,x]=await Promise.all([Y.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Courses.json"),Y.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/TeacherAssignments.json"),Y.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Teachers.json")]),R=Object.entries(x.data||{}).find(([we,Ae])=>Ae.userId===t.userId);if(!R)return;const C=R[0],_e=Object.values(k.data||{}).filter(we=>we.teacherId===C).map(we=>({id:we.courseId,...I.data[we.courseId]}));r(_e)}catch(I){console.error("Error fetching courses:",I)}}v()},[t]),y.useEffect(()=>{async function v(){try{const I=await Y.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/TeacherPosts.json");f(Object.entries(I.data||{}).map(([k,x])=>({id:k,...x})))}catch(I){console.error(I)}}v()},[]);const X=async()=>{if(!s||!o&&!u){alert("Please select a class and enter a note or upload a file");return}let v="";u&&(v=URL.createObjectURL(u));const I={teacherId:O,courseId:s,text:o,fileUrl:v,createdAt:new Date().toISOString()};try{await Y.post("https://ethiostore-17d9f-default-rtdb.firebaseio.com/TeacherPosts.json",I),alert("Post submitted!"),c(""),d(null),f(k=>[...k,{...I,id:Date.now()}])}catch(k){console.error(k),alert("Failed to submit post")}},j=()=>{localStorage.removeItem("teacher"),m("/login")};return t?a.jsxs("div",{className:"dashboard-page",children:[a.jsxs("nav",{className:"top-navbar",children:[a.jsx("h2",{children:"Gojo Dashboard"}),a.jsxs("div",{className:"nav-search",children:[a.jsx(II,{className:"search-icon"}),a.jsx("input",{type:"text",placeholder:"Search Teacher and Student..."})]}),a.jsxs("div",{className:"nav-right",children:[a.jsxs("div",{className:"icon-circle",children:[a.jsxs("div",{onClick:()=>A(!N),style:{cursor:"pointer",position:"relative"},children:[a.jsx(Yr,{size:24}),T.length>0&&a.jsx("span",{style:{position:"absolute",top:-5,right:-5,background:"red",color:"white",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:T.length})]}),N&&a.jsx("div",{style:{position:"absolute",top:30,right:0,width:300,maxHeight:400,overflowY:"auto",background:"#fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",borderRadius:8,zIndex:100},children:T.length>0?T.map((v,I)=>a.jsxs("div",{onClick:()=>{m("/dashboard"),setTimeout(()=>G(v.id,I),100)},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:v.adminProfile,alt:v.adminName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:v.adminName}),a.jsx("p",{style:{margin:0,fontSize:12},children:v.title})]})]},v.id||I)):a.jsx("div",{style:{padding:15},children:"No notifications"})})]}),a.jsx("div",{className:"icon-circle",children:a.jsx(qr,{})}),a.jsx("div",{className:"icon-circle",children:a.jsx(Sr,{})}),a.jsx("img",{src:(t==null?void 0:t.profileImage)||"/default-profile.png",alt:"teacher",className:"profile-img"})]})]}),a.jsxs("div",{className:"google-dashboard",children:[a.jsxs("div",{className:"google-sidebar",children:[a.jsxs("div",{className:"sidebar-profile",children:[a.jsx("div",{className:"sidebar-img-circle",children:a.jsx("img",{src:(t==null?void 0:t.profileImage)||"/default-profile.png",alt:"profile"})}),a.jsx("h3",{children:t==null?void 0:t.name}),a.jsx("p",{children:t==null?void 0:t.username})]}),a.jsxs("div",{className:"sidebar-menu",children:[a.jsxs(me,{className:"sidebar-btn",to:"/dashboard",children:[a.jsx(Jr,{})," Home"]}),a.jsxs(me,{className:"sidebar-btn",to:"/notes",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[a.jsx(wr,{})," Notes"]}),a.jsxs(me,{className:"sidebar-btn",to:"/students",children:[a.jsx(Ve,{})," Students"]}),a.jsxs(me,{className:"sidebar-btn",to:"/admins",children:[a.jsx(Ve,{})," Admins"]}),a.jsxs(me,{className:"sidebar-btn",to:"/parents",children:[a.jsx(Qr,{})," Parents"]}),a.jsxs(me,{className:"sidebar-btn",to:"/marks",children:[a.jsx(wr,{})," Marks"]}),a.jsxs(me,{className:"sidebar-btn",to:"/attendance",children:[a.jsx(Ve,{})," Attendance"]}),a.jsxs(me,{className:"sidebar-btn",to:"/schedule",children:[a.jsx(Ve,{})," Schedule"]}),a.jsxs(me,{className:"sidebar-btn",to:"/settings",children:[a.jsx(Sr,{})," Settings"]}),a.jsxs("button",{className:"sidebar-btn logout-btn",onClick:j,children:[a.jsx(Xr,{})," Logout"]})]})]}),a.jsxs("div",{style:{marginLeft:"500px",width:"40%",padding:"100px 30px 50px",background:"#f3f4f6",minHeight:"100vh",fontFamily:"'Inter', sans-serif"},children:[a.jsxs("div",{style:{marginBottom:"30px",display:"flex",justifyContent:"space-between",alignItems:"center",background:"linear-gradient(90deg, #e0e7ff, #c7d2fe)",padding:"20px 25px",borderRadius:"18px",boxShadow:"0 5px 20px rgba(0,0,0,0.08)"},children:[a.jsx("h2",{style:{fontSize:"28px",fontWeight:700,color:"#1e293b"},children:"Post Notes / Files"}),a.jsxs("span",{style:{color:"#475569",fontSize:"16px",fontWeight:500},children:[t==null?void 0:t.name,", share notes with your students"]})]}),a.jsxs("div",{style:{marginBottom:"40px",background:"#fff",padding:"30px 25px",borderRadius:"18px",boxShadow:"0 6px 25px rgba(0,0,0,0.08)"},children:[a.jsxs("select",{value:s,onChange:v=>i(v.target.value),style:{width:"100%",padding:"14px 16px",borderRadius:"12px",border:"1px solid #cbd5e1",fontSize:"15px",marginBottom:"18px",background:"#f8fafc",cursor:"pointer"},children:[a.jsx("option",{value:"",children:"Select Class & Subject"}),n.map(v=>a.jsxs("option",{value:v.id,children:[v.subject,"  Grade ",v.grade,v.section]},v.id))]}),a.jsx("textarea",{placeholder:"Write your note here...",value:o,onChange:v=>c(v.target.value),style:{width:"100%",padding:"18px",borderRadius:"15px",border:"1px solid #cbd5e1",marginBottom:"18px",minHeight:"140px",fontSize:"15px",resize:"vertical",background:"#f8fafc"}}),a.jsx("input",{type:"file",onChange:v=>d(v.target.files[0]),style:{display:"block",marginBottom:"25px",fontSize:"15px",cursor:"pointer",padding:"10px",borderRadius:"12px",border:"1px solid #cbd5e1",background:"#f8fafc",width:"100%"}}),a.jsxs("button",{onClick:X,style:{background:"linear-gradient(90deg, #4b6cb7, #182848)",color:"#fff",border:"none",padding:"14px 30px",borderRadius:"15px",cursor:"pointer",fontSize:"16px",fontWeight:600,width:"100%"},children:[a.jsx(kI,{style:{marginRight:"10px"}})," Submit Post"]})]}),a.jsxs("div",{children:[a.jsx("h3",{style:{fontSize:"22px",fontWeight:700,marginBottom:"20px",color:"#1e293b"},children:"All Posts"}),p.filter(v=>v.teacherId===O||v.courseId===s).map((v,I)=>a.jsxs("div",{style:{background:"#fff",padding:"20px 25px",borderRadius:"18px",marginBottom:"18px",boxShadow:"0 6px 18px rgba(0,0,0,0.06)"},children:[a.jsx("p",{style:{marginBottom:"12px",fontSize:"15px",lineHeight:"1.6",color:"#334155"},children:v.text}),v.fileUrl&&a.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"10px"},children:[a.jsx("span",{style:{fontSize:"20px",marginRight:"10px"},children:""}),a.jsx("a",{href:v.fileUrl,target:"_blank",rel:"noopener noreferrer",download:!0,style:{color:"#2563eb",fontWeight:600,textDecoration:"none",fontSize:"15px"},children:"View / Download File"})]}),a.jsxs("div",{style:{fontSize:"13px",color:"#64748b",textAlign:"right"},children:["Posted: ",new Date(v.createdAt).toLocaleString()]})]},I))]})]})]})]}):null}const T0=(t,e)=>[t,e].sort().join("_"),_N="https://gojo-teacher-web.onrender.com/api",kn="https://ethiostore-17d9f-default-rtdb.firebaseio.com",wN=t=>{if(!t)return"";const e=new Date(Number(t)),n=e.getHours().toString().padStart(2,"0"),r=e.getMinutes().toString().padStart(2,"0");return`${n}:${r}`};function SN(){const[t,e]=y.useState(null),[n,r]=y.useState([]),[s,i]=y.useState(null),[o,c]=y.useState(!0),[u,d]=y.useState("Details"),[p,f]=y.useState(!1),[m,T]=y.useState([]),[b,N]=y.useState(""),A=y.useRef(null),[E,w]=y.useState([]),[_,O]=y.useState([]),[G,X]=y.useState(!1),[j,v]=y.useState([]),[I,k]=y.useState(null),[x,R]=y.useState(!1),[C,oe]=y.useState([]),_e=Dn(),[we,Ae]=y.useState(window.innerWidth<window.innerHeight);y.useEffect(()=>{const M=()=>Ae(window.innerWidth<window.innerHeight);return window.addEventListener("resize",M),window.addEventListener("orientationchange",M),()=>{window.removeEventListener("resize",M),window.removeEventListener("orientationchange",M)}},[]),y.useEffect(()=>{const M=JSON.parse(localStorage.getItem("teacher"));if(!M){_e("/login");return}e(M)},[_e]);const J=()=>{localStorage.removeItem("teacher"),_e("/login")},D=(t==null?void 0:t.userId)||"";y.useEffect(()=>{if(!t)return;let M=!1;return(async()=>{try{c(!0);const[F,ye,ve,Q,le]=await Promise.all([Y.get(`${kn}/TeacherAssignments.json`),Y.get(`${kn}/Courses.json`),Y.get(`${kn}/Students.json`),Y.get(`${kn}/Users.json`),Y.get(`${kn}/Parents.json`)]),Ee=F.data||{},W=ye.data||{},ee=ve.data||{},P=Q.data||{},z=le.data||{},U=t.userId,ne=Object.values(Ee).filter(ie=>ie.teacherId===U).map(ie=>ie.courseId),K={};Object.entries(z).forEach(([ie,ue])=>{ue.children&&Object.values(ue.children).forEach(he=>{if(!he.studentId)return;const Ne=he.relationship||he.relation||he.relationToChild||he.type||he.role||null;K[he.studentId]||(K[he.studentId]=[]),K[he.studentId].push({parentId:ie,relationship:Ne})})});const se={};Object.entries(ee).forEach(([ie,ue])=>{const he=Object.values(P).find(Xe=>String(Xe.userId)===String(ue.userId)),Ne=(he==null?void 0:he.name)||"No Name",st=(he==null?void 0:he.profileImage)||"/default-profile.png";(K[ie]||[]).forEach(({parentId:Xe,relationship:Ue})=>{se[Xe]||(se[Xe]=[]),se[Xe].push({studentId:ie,name:Ne,grade:ue.grade,section:ue.section,profileImage:st,userId:ue.userId,relationship:Ue||"",age:ue.age||(he==null?void 0:he.age)||null,city:ue.city||(he==null?void 0:he.city)||ue.address&&ue.address.city||null,citizenship:ue.citizenship||(he==null?void 0:he.citizenship)||ue.nationality||null,address:ue.address||(he==null?void 0:he.address)||null,status:ue.status||"Active"})})});const te=Object.keys(se).map(ie=>{var Re;const ue=z[ie]||{},he=Object.values(P).find(Xe=>String(Xe.userId)===String(ue.userId))||{},Ne=se[ie]||[],st=Array.from(new Set(Ne.map(Xe=>Xe.relationship).filter(Boolean)));return{id:ie,userId:ue.userId,name:he.name||ue.name||"No Name",email:he.email||ue.email||"N/A",phone:he.phone||ue.phone||"",profileImage:he.profileImage||ue.profileImage||"/default-profile.png",children:Ne,relationships:st,age:ue.age||he.age||null,city:ue.city||he.city||((Re=ue.address)==null?void 0:Re.city)||null,citizenship:ue.citizenship||he.citizenship||ue.nationality||null,status:ue.status||"Active",createdAt:ue.createdAt,address:ue.address||he.address||null,extra:ue.extra}});M||r(te)}catch(F){console.error("Error fetching parents:",F)}finally{M||c(!1)}})(),()=>{M=!0}},[t]),y.useEffect(()=>{var M;(M=A.current)==null||M.scrollIntoView({behavior:"smooth"})},[m]),y.useEffect(()=>{if(!s||!t||!p)return;const M=T0(D,s.userId),Z=Ot(Ut,`Chats/${M}/messages`);return Ji(Z,F=>{const ye=F.val()||{},ve=Object.entries(ye).map(([Q,le])=>({messageId:Q,...le}));ve.sort((Q,le)=>Q.timeStamp-le.timeStamp),T(ve)}),re(M),()=>yw(Z)},[s,t,p]);const q=async M=>{if(!(M!=null&&M.trim())||!s||!t)return;const Z=D,F=s.userId,ye=T0(Z,F),ve=Date.now(),Q={senderId:Z,receiverId:F,type:"text",text:M,seen:!1,timeStamp:ve};try{await Y.post(`${kn}/Chats/${ye}/messages.json`,Q),await Y.patch(`${kn}/Chats/${ye}.json`,{participants:{[Z]:!0,[F]:!0},lastMessage:{text:M,senderId:Z,seen:!1,timeStamp:ve},unread:{[Z]:0,[F]:1}}),N("")}catch(le){console.error("Send message error:",le)}},re=async M=>{try{await Y.patch(`${kn}/Chats/${M}/unread.json`,{[D]:0}),await Y.patch(`${kn}/Chats/${M}/lastMessage.json`,{seen:!0})}catch(Z){console.error("Mark as seen error:",Z)}};y.useEffect(()=>{(async()=>{try{let F=(await Y.get(`${_N}/get_posts`)).data||[];!Array.isArray(F)&&typeof F=="object"&&(F=Object.values(F));const[ye,ve]=await Promise.all([Y.get(`${kn}/School_Admins.json`),Y.get(`${kn}/Users.json`)]),Q=ye.data||{},le=ve.data||{},Ee=JSON.parse(localStorage.getItem("teacher")),W=fe(Ee==null?void 0:Ee.userId),ee=U=>{const ne=U.adminId||U.posterAdminId||U.poster||U.admin||null;if(ne&&Q[ne]){const K=Q[ne],se=K.userId,te=le[se]||null,ie=te&&te.name||K.name||U.adminName||"Admin",ue=te&&te.profileImage||K.profileImage||U.adminProfile||"/default-profile.png";return{name:ie,profile:ue}}return{name:U.adminName||"Admin",profile:U.adminProfile||"/default-profile.png"}},P=F.slice().sort((U,ne)=>(ne.time?new Date(ne.time).getTime():0)-(U.time?new Date(U.time).getTime():0)).filter(U=>U.postId&&!W.includes(U.postId)).slice(0,5).map(U=>{var K;const ne=ee(U);return{type:"post",id:U.postId,title:((K=U.message)==null?void 0:K.substring(0,50))||"Untitled post",adminName:ne.name,adminProfile:ne.profile}});let z=[];try{const U=Ee;if(U&&U.userId){const[ne,K]=await Promise.all([Y.get(`${kn}/Chats.json`),Y.get(`${kn}/Users.json`)]),se=ne.data||{},ie=K.data||{}||{},ue={};Object.entries(ie).forEach(([he,Ne])=>{Ne&&Ne.userId&&(ue[Ne.userId]=he)}),z=Object.entries(se).map(([he,Ne])=>{const Re=(Ne.unread||{})[U.userId]||0;if(!Re)return null;const Xe=Ne.participants||{},Ue=Object.keys(Xe||{}).find(ut=>ut!==U.userId);if(!Ue)return null;let Kt=Ue,Ge=ie[Kt];if(!Ge){const ut=ue[Ue];ut&&(Kt=ut,Ge=ie[ut])}Ge||(Ge={userId:Ue,name:Ue,profileImage:"/default-profile.png"});const en={pushKey:Kt,userId:Ge.userId||Ue,name:Ge.name||Ge.username||Ue,profileImage:Ge.profileImage||Ge.profile||"/default-profile.png"},ln=Ne.lastMessage||{};return{type:"message",chatId:he,displayName:en.name,profile:en.profileImage,lastMessageText:ln.text||"",lastMessageTime:ln.timeStamp||ln.time||null,unreadForMe:Re}}).filter(Boolean).sort((he,Ne)=>(Ne.lastMessageTime||0)-(he.lastMessageTime||0))}}catch(U){console.error("Error fetching message notifications:",U)}O([...P,...z]),v(z)}catch(Z){console.error("Error fetching notifications:",Z)}})()},[]);function fe(M){return JSON.parse(localStorage.getItem(`seen_posts_${M}`))||[]}const H=j.reduce((M,Z)=>M+(Z.unreadForMe||0),0);return y.useEffect(()=>(s?document.body.classList.add("sidebar-open"):document.body.classList.remove("sidebar-open"),()=>document.body.classList.remove("sidebar-open")),[s]),a.jsxs("div",{className:"dashboard-page",children:[a.jsxs("nav",{className:"top-navbar",children:[a.jsx("h2",{children:"Gojo Dashboard"}),a.jsxs("div",{className:"nav-right",children:[a.jsxs("div",{className:"icon-circle",style:{position:"relative"},children:[a.jsxs("div",{onClick:()=>X(!G),style:{cursor:"pointer",position:"relative"},children:[a.jsx(Yr,{size:24}),_.length>0&&a.jsx("span",{style:{position:"absolute",top:-5,right:-5,background:"red",color:"white",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:_.length})]}),G&&a.jsx("div",{style:{position:"absolute",top:30,right:0,width:300,maxHeight:400,overflowY:"auto",background:"#fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",borderRadius:8,zIndex:100},children:_.length>0?_.map((M,Z)=>M.type==="post"?a.jsxs("div",{onClick:()=>{_e("/dashboard"),setTimeout(()=>{var ye;const F=(ye=postRefs==null?void 0:postRefs.current)==null?void 0:ye[M.id];F&&(F.scrollIntoView({behavior:"smooth",block:"center"}),k(M.id),setTimeout(()=>k(null),3e3))},150),O(F=>F.filter((ye,ve)=>ve!==Z)),X(!1)},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:M.adminProfile,alt:M.adminName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:M.adminName}),a.jsx("p",{style:{margin:0,fontSize:12},children:M.title})]})]},M.id||Z):a.jsxs("div",{onClick:()=>{X(!1),_e("/all-chat")},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:M.profile||"/default-profile.png",alt:M.displayName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:M.displayName}),a.jsx("p",{style:{margin:0,fontSize:12,color:"#0b78f6"},children:"New message"})]})]},M.chatId||Z)):a.jsx("div",{style:{padding:15},children:"No notifications"})})]}),a.jsx("div",{className:"icon-circle",style:{position:"relative",marginLeft:12},children:a.jsxs("div",{onClick:()=>_e("/all-chat"),style:{cursor:"pointer",position:"relative"},children:[a.jsx(qr,{size:22}),H>0&&a.jsx("span",{style:{position:"absolute",top:-6,right:-6,background:"#f60b0b",color:"#fff",borderRadius:"50%",minWidth:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 5px"},children:H})]})}),a.jsx("div",{className:"icon-circle",onClick:()=>_e("/settings"),children:a.jsx(Sr,{})}),a.jsx("img",{src:(t==null?void 0:t.profileImage)||"/default-profile.png",alt:"teacher",className:"profile-img"})]})]}),a.jsxs("div",{className:"google-dashboard",style:{display:"flex"},children:[a.jsxs("div",{className:"google-sidebar",children:[t&&a.jsxs("div",{className:"sidebar-profile",children:[a.jsx("div",{className:"sidebar-img-circle",children:a.jsx("img",{src:t.profileImage||"/default-profile.png",alt:"profile"})}),a.jsx("h3",{children:t.name}),a.jsx("p",{children:t.username})]}),a.jsxs("div",{className:"sidebar-menu",children:[a.jsxs(me,{className:"sidebar-btn",to:"/dashboard",children:[a.jsx(Jr,{})," Home"]}),a.jsxs(me,{className:"sidebar-btn",to:"/students",children:[a.jsx(Ve,{})," Students"]}),a.jsxs(me,{className:"sidebar-btn",to:"/admins",children:[a.jsx(Ve,{})," Admins"]}),a.jsxs(me,{className:"sidebar-btn",to:"/parents",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[a.jsx(Qr,{})," Parents"]}),a.jsxs(me,{className:"sidebar-btn",to:"/marks",children:[a.jsx(wr,{})," Marks"]}),a.jsxs(me,{className:"sidebar-btn",to:"/attendance",children:[a.jsx(Ve,{})," Attendance"]}),a.jsxs(me,{className:"sidebar-btn",to:"/schedule",children:[a.jsx(Ve,{})," Schedule"]}),a.jsxs("button",{className:"sidebar-btn logout-btn",onClick:J,children:[a.jsx(Xr,{})," Logout"]})]})]}),a.jsx("main",{style:{flex:1,padding:30},children:a.jsxs("div",{style:{maxWidth:480,margin:"0 auto",display:"flex",gap:24,alignItems:"flex-start",flexWrap:"wrap"},children:[a.jsxs("section",{style:{flex:"1 1 320px",minWidth:280},children:[a.jsx("h2",{style:{textAlign:"center",marginBottom:20,color:"#4b6cb7",fontWeight:700},children:"Parents"}),o?a.jsx("p",{style:{textAlign:"center",fontSize:18,color:"#555"},children:"Loading..."}):n.length===0?a.jsx("p",{style:{textAlign:"center",fontSize:18,color:"#999"},children:"No parents found."}):a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:15},children:n.map(M=>a.jsxs("div",{onClick:()=>i(M),style:{display:"flex",gap:15,width:"calc(100% - 50px)",padding:16,marginLeft:50,borderRadius:12,boxShadow:"0 4px 15px rgba(0,0,0,0.08)",backgroundColor:(s==null?void 0:s.id)===M.id?"#f0f4ff":"#fff",cursor:"pointer",alignItems:"center"},children:[a.jsx("img",{src:M.profileImage,alt:M.name,style:{width:60,height:60,borderRadius:"50%",objectFit:"cover"}}),a.jsxs("div",{children:[a.jsx("h3",{style:{margin:0,fontSize:18},children:M.name}),a.jsx("p",{style:{margin:"6px 0 0 0",color:"#777"},children:M.email})]})]},M.id))})]}),s&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"parent-sidebar-overlay",onClick:()=>i(null),style:{display:"none",position:"fixed",inset:0,background:"rgba(0,0,0,0.35)",zIndex:999}}),a.jsxs("aside",{className:"parent-sidebar",style:{width:we?"100%":420,height:we?"100vh":"calc(100vh - 60px)",position:"fixed",right:0,top:we?0:60,background:"#fff",boxShadow:we?"none":"0 0 20px rgba(0,0,0,0.06)",zIndex:1e3,display:"flex",flexDirection:"column",overflowY:"auto",padding:we?18:24,transition:"all 0.32s ease"},role:"dialog","aria-modal":"true",children:[a.jsx("button",{onClick:()=>i(null),style:{position:"absolute",top:we?8:-11,right:18,width:40,height:40,borderRadius:10,border:"none",background:"#fff",boxShadow:"0 8px 18px rgba(2,6,23,0.08)",cursor:"pointer",display:"grid",placeItems:"center",zIndex:1010,fontSize:20},"aria-label":"Close details",children:""}),a.jsxs("div",{style:{textAlign:"center",marginBottom:12},children:[a.jsx("div",{style:{width:100,height:100,margin:"0 auto 12px",borderRadius:"50%",overflow:"hidden",border:"4px solid #4b6cb7"},children:a.jsx("img",{src:s.profileImage,alt:s.name,style:{width:"100%",height:"100%",objectFit:"cover"}})}),a.jsx("h3",{style:{margin:0},children:s.name}),a.jsx("div",{style:{color:"#666",marginTop:6},children:s.email})]}),a.jsx("div",{style:{display:"flex",gap:8,marginBottom:12},children:["Details","Children","Status"].map(M=>a.jsx("button",{onClick:()=>d(M),style:{flex:1,padding:"8px 10px",borderRadius:10,border:"none",cursor:"pointer",background:u===M?"#4b6cb7":"#f0f0f0",color:u===M?"#fff":"#333",fontWeight:700},children:M},M))}),a.jsxs("div",{style:{paddingBottom:40},children:[u==="Details"&&a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:28,padding:50,marginLeft:0,marginRight:0,borderRadius:0,background:"linear-gradient(180deg,#eef2ff,#f8fafc)",fontFamily:"Inter, system-ui"},children:a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:24,fontWeight:900,marginBottom:18,marginTop:-30,background:"linear-gradient(90deg,#2563eb,#7c3aed)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Parent Details"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",columnGap:68,rowGap:14},children:[["Email",s.email||"N/A"],["Phone",s.phone||"N/A"],["Relationship(s)",s.relationships&&s.relationships.length?s.relationships.join(", "):""],["Age",s.age||""],["City",s.city||(s.address&&typeof s.address=="object"?s.address.city:s.city)||""],["Citizenship",s.citizenship||""],["Status",s.status?s.status.charAt(0).toUpperCase()+s.status.slice(1):""],["Address",(typeof s.address=="string"?s.address:s.address&&(s.address.street||s.address.city||JSON.stringify(s.address)))||"",!0]].map(([M,Z,F])=>a.jsxs("div",{style:{padding:18,borderRadius:20,background:"#ffffff",boxShadow:"0 6px 10px rgba(0,0,0,0.08)",marginLeft:-30,marginRight:-30,gridColumn:F?"span 2":"span 1"},children:[a.jsx("div",{style:{fontSize:12,fontWeight:700,color:"#000102",textTransform:"uppercase"},children:M}),a.jsx("div",{style:{marginTop:8,fontSize:16,fontWeight:400,color:"#000102"},children:Z})]},M))})]})}),u==="Children"&&a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:20,background:"#f5f7fa",padding:18,borderRadius:10},children:s.children.map(M=>a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:22,background:"#fff",borderRadius:16,padding:"22px 30px",boxShadow:"0 4px 24px rgba(80,90,130,0.10)",border:"1px solid #edeef2",transition:"box-shadow 0.2s, transform 0.18s",cursor:"pointer"},onMouseEnter:Z=>Z.currentTarget.style.boxShadow="0 8px 32px 0 rgba(60,72,120,0.17)",onMouseLeave:Z=>Z.currentTarget.style.boxShadow="0 4px 24px rgba(80,90,130,0.10)",children:[a.jsx("img",{src:M.profileImage,alt:M.name,style:{width:66,height:66,borderRadius:"50%",border:"3px solid #2868f1",objectFit:"cover",background:"#f0f4fa",flexShrink:0,boxShadow:"0 2px 8px 0 rgba(60,72,120,0.07)"}}),a.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:5},children:[a.jsx("span",{style:{fontWeight:700,fontSize:21,color:"#213052",marginBottom:2},children:M.name}),a.jsxs("div",{style:{display:"flex",columnGap:1,marginTop:-12,marginLeft:-19},children:[a.jsxs("div",{style:{color:"#050505",fontWeight:400,fontSize:14,padding:"6px 18px",borderRadius:999,letterSpacing:.5,boxShadow:"0 2px 8px rgba(22,119,255,.09)"},children:["Grade:",M.grade]}),a.jsxs("div",{style:{color:"#000000",fontWeight:400,fontSize:14,padding:"6px 1px",borderRadius:999,letterSpacing:.5,boxShadow:"0 2px 8px rgba(255,126,95,.09)"},children:["Section:",M.section]})]}),a.jsx("span",{style:{fontSize:15,color:"#424242",marginTop:"-10px"},children:M.relationship&&`Relation: ${M.relationship}`})]})]},M.studentId))}),u==="Status"&&a.jsxs("div",{children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Status:"})," ",s.status||"Active"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Created:"})," ",s.createdAt?new Date(s.createdAt).toLocaleString():""]})]})]}),!p&&a.jsx("div",{onClick:()=>f(!0),style:{position:"fixed",bottom:"20px",right:"20px",width:"60px",height:"60px",background:"linear-gradient(135deg, #3a6fb4, #2147f0, #457ffc)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",cursor:"pointer",zIndex:1e3,boxShadow:"0 8px 18px rgba(0,0,0,0.25)",transition:"transform 0.2s ease"},children:a.jsx(Sp,{size:30})}),p&&s&&a.jsxs("div",{style:{position:"fixed",bottom:"20px",right:"20px",width:"360px",height:"480px",background:"#fff",borderRadius:"16px",boxShadow:"0 12px 30px rgba(0,0,0,0.25)",zIndex:2e3,display:"flex",flexDirection:"column",overflow:"hidden"},children:[a.jsxs("div",{style:{padding:"14px",borderBottom:"1px solid #eee",display:"flex",justifyContent:"space-between",alignItems:"center",background:"#fafafa"},children:[a.jsx("strong",{children:s.name}),a.jsxs("div",{style:{display:"flex",gap:"10px"},children:[a.jsx("button",{onClick:()=>{f(!1),_e("/all-chat",{state:{user:s,tab:"parent"}})},style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px"},children:""}),a.jsx("button",{onClick:()=>f(!1),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:""})]})]}),a.jsxs("div",{style:{flex:1,padding:"12px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"6px",background:"#f9f9f9"},children:[m.length===0?a.jsxs("p",{style:{textAlign:"center",color:"#aaa"},children:["Start chatting with ",s.name]}):m.map(M=>a.jsx("div",{style:{display:"flex",flexDirection:M.senderId===D?"row-reverse":"row",alignItems:"flex-end",marginBottom:10},children:a.jsx("div",{style:{maxWidth:"75%",display:"flex",flexDirection:"column",alignItems:M.senderId===D?"flex-end":"flex-start"},children:a.jsxs("div",{style:{background:M.senderId===D?"#4b6cb7":"#fff",color:M.senderId===D?"#fff":"#0f172a",padding:"10px 14px",borderRadius:18,boxShadow:"0 2px 6px rgba(0,0,0,0.04)",wordBreak:"break-word",position:"relative",paddingBottom:"26px"},children:[a.jsx("div",{children:M.text}),a.jsxs("div",{style:{position:"absolute",right:8,bottom:6,display:"flex",alignItems:"center",gap:6,fontSize:11,color:M.senderId===D?"rgba(255,255,255,0.9)":"#64748b"},children:[a.jsx("span",{style:{fontSize:11},children:wN(M.timeStamp)}),M.senderId===D&&a.jsx(lo,{size:12,color:M.seen?(M.seenAt,"#10b981"):M.seen?"#10b981":"#94a3b8"})]})]})})},M.messageId)),a.jsx("div",{ref:A})]}),a.jsxs("div",{style:{padding:"10px",borderTop:"1px solid #eee",display:"flex",gap:"8px",background:"#fff"},children:[a.jsx("input",{value:b,onChange:M=>N(M.target.value),placeholder:"Type a message...",style:{flex:1,padding:"10px 14px",borderRadius:"999px",border:"1px solid #ccc",outline:"none"},onKeyDown:M=>{M.key==="Enter"&&q(b)}}),a.jsx("button",{onClick:()=>q(b),style:{background:"linear-gradient(135deg, #3a65b4, #2c4fee, #458efc)",border:"none",borderRadius:"50%",width:"42px",height:"42px",color:"#fff",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px"},children:""})]})]})]}),a.jsx("style",{children:`
                  @media (max-width: 900px), (orientation: portrait) {
                    .parent-sidebar { width: 100vw !important; height: 100vh !important; left: 0 !important; top: 0 !important; border-radius: 0 !important; padding: 16px !important; }
                    .parent-sidebar-overlay { display: block !important; }
                    body.sidebar-open { overflow: hidden !important; }
                  }
                `})]})]})})]})]})}function bN(){const[t,e]=y.useState(localStorage.getItem("darkMode")==="true");return y.useEffect(()=>{t?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode"),localStorage.setItem("darkMode",t)},[t]),[t,()=>e(r=>!r)]}const EN="https://gojo-teacher-web.onrender.com/api",kr="https://ethiostore-17d9f-default-rtdb.firebaseio.com";function CN(){const[t,e]=y.useState(null),[n,r]=y.useState("/default-profile.png"),[s,i]=y.useState(""),[o,c]=y.useState(""),[u,d]=y.useState(null),[p,f]=bN(),[m,T]=y.useState(""),[b,N]=y.useState(""),[A,E]=y.useState([]),[w,_]=y.useState(!1),O=Dn(),[G,X]=y.useState(!1),[j,v]=y.useState([]);y.useEffect(()=>{const D=JSON.parse(localStorage.getItem("teacher"));if(!D){O("/login");return}e(D)},[O]),y.useEffect(()=>{t&&(r(t.profileImage||"/default-profile.png"),i(t.name||""),c(t.username||""),Ae(t))},[t]);const I=D=>d(D.target.files[0]),k=async()=>{if(!u)return alert("Select an image first.");try{const D=new FileReader;D.readAsDataURL(u),D.onloadend=async()=>{const q=D.result;await Y.patch(`${kr}/Users/${t.userId}.json`,{profileImage:q});const re={...t,profileImage:q};localStorage.setItem("teacher",JSON.stringify(re)),r(q),d(null),alert("Profile image updated!")}}catch(D){console.error("Error updating profile image:",D)}},x=async()=>{if(!s||!o)return alert("Name and Username required!");try{await Y.patch(`${kr}/Users/${t.userId}.json`,{name:s,username:o});const D={...t,name:s,username:o};localStorage.setItem("teacher",JSON.stringify(D)),e(D),alert("Profile info updated!")}catch(D){console.error("Error updating info:",D)}},R=async()=>{if(!m||!b)return alert("Fill both password fields.");if(m!==b)return alert("Passwords do not match!");try{await Y.patch(`${kr}/Users/${t.userId}.json`,{password:m}),T(""),N(""),alert("Password updated successfully!")}catch(D){console.error("Error updating password:",D)}},C=()=>{localStorage.removeItem("teacher"),O("/login")};y.useEffect(()=>{(async()=>{try{let re=(await Y.get(`${EN}/get_posts`)).data||[];!Array.isArray(re)&&typeof re=="object"&&(re=Object.values(re));const[fe,H,M]=await Promise.all([Y.get(`${kr}/School_Admins.json`),Y.get(`${kr}/Users.json`),Y.get(`${kr}/Chats.json`)]),Z=fe.data||{},F=H.data||{},ye=M.data||{},ve=JSON.parse(localStorage.getItem("teacher")),Q=_e(ve==null?void 0:ve.userId),le=P=>{const z=P.adminId||P.posterAdminId||P.poster||P.admin||null;if(z&&Z[z]){const U=Z[z],ne=U.userId,K=F[ne]||null,se=K&&K.name||U.name||P.adminName||"Admin",te=K&&K.profileImage||U.profileImage||P.adminProfile||"/default-profile.png";return{name:se,profile:te}}return{name:P.adminName||"Admin",profile:P.adminProfile||"/default-profile.png"}},Ee=re.slice().sort((P,z)=>{const U=P.time?new Date(P.time).getTime():0;return(z.time?new Date(z.time).getTime():0)-U}).filter(P=>P.postId&&!Q.includes(P.postId)).slice(0,5).map(P=>{var U;const z=le(P);return{id:P.postId,type:"post",title:((U=P.message)==null?void 0:U.substring(0,50))||"Untitled post",adminName:z.name,adminProfile:z.profile}});let W=[];ve&&ve.userId&&Object.entries(ye).forEach(([P,z])=>{const ne=(z.unread||{})[ve.userId]||0;if(!ne)return;const K=z.participants||{},se=Object.keys(K).find(ie=>ie!==ve.userId);let te=F[se]||{userId:se,name:se,profileImage:"/default-profile.png"};W.push({chatId:P,type:"message",displayName:te.name||te.username||se,profile:te.profileImage||te.profile||"/default-profile.png",unreadForMe:ne})});const ee=[...Ee,...W].slice(0,5);E(ee)}catch(q){console.error("Error fetching notifications:",q)}})()},[]);const oe=async D=>{if(t){if(D.type==="post"&&D.id)we(t.userId,D.id),E(q=>q.filter(re=>re.id!==D.id)),_(!1),O("/dashboard");else if(D.type==="message"&&D.chatId){E(q=>q.filter(re=>re.chatId!==D.chatId)),_(!1);try{await Y.put(`${kr}/Chats/${D.chatId}/unread/${t.userId}.json`,null)}catch{}O("/all-chat")}}};function _e(D){return JSON.parse(localStorage.getItem(`seen_posts_${D}`))||[]}function we(D,q){const re=_e(D);re.includes(q)||localStorage.setItem(`seen_posts_${D}`,JSON.stringify([...re,q]))}const Ae=async(D=t)=>{try{const q=D||JSON.parse(localStorage.getItem("teacher"));if(!q||!q.userId){v([]);return}const[re,fe]=await Promise.all([Y.get(`${kr}/Chats.json`),Y.get(`${kr}/Users.json`)]),H=re.data||{},Z=fe.data||{}||{},F={};Object.entries(Z).forEach(([ve,Q])=>{Q&&Q.userId&&(F[Q.userId]=ve)});const ye=Object.entries(H).map(([ve,Q])=>{const Ee=(Q.unread||{})[q.userId]||0;if(!Ee)return null;const W=Q.participants||{},ee=Object.keys(W||{}).find(K=>K!==q.userId);if(!ee)return null;let P=ee,z=Z[P];if(!z){const K=F[ee];K&&(P=K,z=Z[K])}z||(z={userId:ee,name:ee,profileImage:"/default-profile.png"});const U={pushKey:P,userId:z.userId||ee,name:z.name||z.username||ee,profileImage:z.profileImage||z.profile||"/default-profile.png"},ne=Q.lastMessage||{};return{chatId:ve,contact:U,displayName:U.name,profile:U.profileImage,lastMessageText:ne.text||"",lastMessageTime:ne.timeStamp||ne.time||null,unreadForMe:Ee}}).filter(Boolean).sort((ve,Q)=>(Q.lastMessageTime||0)-(ve.lastMessageTime||0));v(ye)}catch(q){console.error("Error fetching conversations:",q),v([])}},J=A.filter(D=>D.type==="message").reduce((D,q)=>D+(q.unreadForMe||0),0);return a.jsxs("div",{className:"dashboard-page",children:[a.jsxs("nav",{className:"top-navbar",children:[a.jsx("h2",{children:"Gojo Dashboard"}),a.jsxs("div",{className:"nav-right",children:[a.jsxs("div",{className:"icon-circle",children:[a.jsxs("div",{onClick:()=>_(!w),style:{cursor:"pointer",position:"relative"},children:[a.jsx(Yr,{size:24}),A.length>0&&a.jsx("span",{style:{position:"absolute",top:-5,right:-5,background:"red",color:"white",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:A.length})]}),w&&a.jsx("div",{style:{position:"absolute",top:30,right:0,width:300,maxHeight:400,overflowY:"auto",background:"#fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",borderRadius:8,zIndex:100},children:A.length>0?A.map((D,q)=>D.type==="post"?a.jsxs("div",{onClick:()=>oe(D),style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:D.adminProfile,alt:D.adminName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:D.adminName}),a.jsx("p",{style:{margin:0,fontSize:12},children:D.title})]})]},D.id||q):a.jsxs("div",{onClick:()=>oe(D),style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:D.profile||"/default-profile.png",alt:D.displayName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:D.displayName}),a.jsx("p",{style:{margin:0,fontSize:12,color:"#0b78f6"},children:"New message"})]})]},D.chatId||q)):a.jsx("div",{style:{padding:15},children:"No notifications"})})]}),a.jsx("div",{className:"icon-circle",style:{position:"relative",marginLeft:12},children:a.jsxs("div",{onClick:()=>O("/all-chat"),style:{cursor:"pointer",position:"relative"},children:[a.jsx(qr,{size:22}),J>0&&a.jsx("span",{style:{position:"absolute",top:-6,right:-6,background:"#f60b0b",color:"#fff",borderRadius:"50%",minWidth:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 5px"},children:J})]})}),a.jsx(me,{className:"icon-circle",to:"/settings",children:a.jsx(Sr,{})}),a.jsx("img",{src:(t==null?void 0:t.profileImage)||"/default-profile.png",alt:"teacher",className:"profile-img"})]})]}),a.jsxs("div",{className:"google-dashboard",children:[a.jsxs("div",{className:"google-sidebar",children:[t&&a.jsxs("div",{className:"sidebar-profile",children:[a.jsx("div",{className:"sidebar-img-circle",children:a.jsx("img",{src:t.profileImage||"/default-profile.png",alt:"profile"})}),a.jsx("h3",{children:t.name}),a.jsx("p",{children:t.username})]}),a.jsxs("div",{className:"sidebar-menu",children:[a.jsxs(me,{className:"sidebar-btn",to:"/dashboard",children:[a.jsx(Jr,{})," Home"]}),a.jsxs(me,{className:"sidebar-btn",to:"/students",children:[a.jsx(Ve,{})," Students"]}),a.jsxs(me,{className:"sidebar-btn",to:"/admins",children:[a.jsx(Ve,{})," Admins"]}),a.jsxs(me,{className:"sidebar-btn",to:"/parents",children:[a.jsx(Qr,{})," Parents"]}),a.jsxs(me,{className:"sidebar-btn",to:"/marks",children:[a.jsx(wr,{})," Marks"]}),a.jsxs(me,{className:"sidebar-btn",to:"/attendance",children:[a.jsx(Ve,{})," Attendance"]}),a.jsxs(me,{className:"sidebar-btn",to:"/schedule",children:[a.jsx(Ve,{})," Schedule"]}),a.jsxs("button",{className:"sidebar-btn logout-btn",onClick:C,children:[a.jsx(Xr,{})," Logout"]})]})]}),a.jsxs("div",{className:"main-content",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",marginTop:"10px",padding:"10px",width:"100%",gap:"30px"},children:[a.jsx("h2",{children:"Settings"}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"30px",borderRadius:"12px",background:p?"#3a3a3a":"#fff",boxShadow:"0 4px 10px rgba(0,0,0,0.1)"},children:[a.jsx("img",{src:n,alt:"profile",style:{width:"150px",height:"150px",borderRadius:"50%",objectFit:"cover",marginBottom:"15px",border:"3px solid #4b6cb7"}}),a.jsx("input",{type:"file",onChange:I}),a.jsx("button",{onClick:k,style:{marginTop:"15px",padding:"10px 20px",borderRadius:"8px",border:"none",background:"#4b6cb7",color:"#fff",cursor:"pointer"},children:"Update Profile Image"})]}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px",padding:"30px",borderRadius:"12px",background:p?"#3a3a3a":"#fff",boxShadow:"0 4px 10px rgba(0,0,0,0.1)"},children:[a.jsx("input",{type:"text",placeholder:"Name",value:s,onChange:D=>i(D.target.value),style:{padding:"10px",borderRadius:"6px",border:"1px solid #ccc"}}),a.jsx("input",{type:"text",placeholder:"Username",value:o,onChange:D=>c(D.target.value),style:{padding:"10px",borderRadius:"6px",border:"1px solid #ccc"}}),a.jsx("button",{onClick:x,style:{padding:"10px 20px",borderRadius:"8px",border:"none",background:"#4b6cb7",color:"#fff",cursor:"pointer"},children:"Update Info"})]}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px",padding:"30px",borderRadius:"12px",background:p?"#3a3a3a":"#fff",boxShadow:"0 4px 10px rgba(0,0,0,0.1)"},children:[a.jsx("input",{type:"password",placeholder:"New Password",value:m,onChange:D=>T(D.target.value),style:{padding:"10px",borderRadius:"6px",border:"1px solid #ccc"}}),a.jsx("input",{type:"password",placeholder:"Confirm Password",value:b,onChange:D=>N(D.target.value),style:{padding:"10px",borderRadius:"6px",border:"1px solid #ccc"}}),a.jsx("button",{onClick:R,style:{padding:"10px 20px",borderRadius:"8px",border:"none",background:"#4b6cb7",color:"#fff",cursor:"pointer"},children:"Change Password"})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px",padding:"20px",borderRadius:"12px",background:p?"#3a3a3a":"#fff",boxShadow:"0 4px 10px rgba(0,0,0,0.1)"},children:[a.jsx("label",{style:{fontSize:"18px",fontWeight:"500"},children:"Dark Mode"}),a.jsx("input",{type:"checkbox",checked:p,onChange:f})]})]})]})]})}const IN="https://gojo-teacher-web.onrender.com/api",el="https://ethiostore-17d9f-default-rtdb.firebaseio.com";function jN(){const[t,e]=y.useState(null),[n,r]=y.useState({}),[s,i]=y.useState(!0),[o,c]=y.useState(""),[u,d]=y.useState("All"),[p,f]=y.useState("All"),[m,T]=y.useState([]),[b,N]=y.useState(!1),[A,E]=y.useState(null),[w,_]=y.useState(!0),[O,G]=y.useState([]);y.useRef({});const X=Dn(),j=["All","A","B","C","D"],v=["Monday","Tuesday","Wednesday","Thursday","Friday"],[I,k]=y.useState(typeof window<"u"?window.innerWidth<=900:!1);y.useEffect(()=>{const D=()=>k(window.innerWidth<=900);return window.addEventListener("resize",D),()=>window.removeEventListener("resize",D)},[]);const x=m.filter(D=>D.type==="message").reduce((D,q)=>D+(q.unreadForMe||0),0);y.useEffect(()=>{const D=JSON.parse(localStorage.getItem("teacher"));if(!D){X("/login");return}e(D)},[X]),y.useEffect(()=>{if(!t)return;async function D(){i(!0);try{const q=await Y.get(`${el}/Schedules.json`);r(q.data||{}),c("")}catch{c("Failed to load schedule.")}finally{i(!1)}}D()},[t]);const R=()=>{localStorage.removeItem("teacher"),X("/login")},oe=(()=>{if(!t||!n)return{};const D={};return Object.entries(n).forEach(([q,re])=>{Object.entries(re||{}).forEach(([fe,H])=>{Object.entries(H||{}).forEach(([M,Z])=>{var F;Z!=null&&Z.teacherName&&Z.teacherName===t.name&&(D[q]||(D[q]={}),D[q][M]||(D[q][M]=[]),D[q][M].push({class:fe,subject:Z.subject||"-",time:Z.time||((F=M.match(/\((.*?)\)/))==null?void 0:F[1])||"N/A"}))})})}),D})();function _e(D){return JSON.parse(localStorage.getItem(`seen_posts_${D}`))||[]}function we(D,q){const re=_e(D);re.includes(q)||localStorage.setItem(`seen_posts_${D}`,JSON.stringify([...re,q]))}y.useEffect(()=>{(async()=>{try{let re=(await Y.get(`${IN}/get_posts`)).data||[];!Array.isArray(re)&&typeof re=="object"&&(re=Object.values(re));const[fe,H,M]=await Promise.all([Y.get(`${el}/School_Admins.json`),Y.get(`${el}/Users.json`),Y.get(`${el}/Chats.json`)]),Z=fe.data||{},F=H.data||{},ye=M.data||{},ve=JSON.parse(localStorage.getItem("teacher")),Q=_e(ve==null?void 0:ve.userId),le=P=>{const z=P.adminId||P.posterAdminId||P.poster||P.admin||null;if(z&&Z[z]){const U=Z[z],ne=U.userId,K=F[ne]||null,se=K&&K.name||U.name||P.adminName||"Admin",te=K&&K.profileImage||U.profileImage||P.adminProfile||"/default-profile.png";return{name:se,profile:te}}return{name:P.adminName||"Admin",profile:P.adminProfile||"/default-profile.png"}},Ee=re.slice().sort((P,z)=>{const U=P.time?new Date(P.time).getTime():0;return(z.time?new Date(z.time).getTime():0)-U}).filter(P=>P.postId&&!Q.includes(P.postId)).slice(0,5).map(P=>{var U;const z=le(P);return{id:P.postId,type:"post",title:((U=P.message)==null?void 0:U.substring(0,50))||"Untitled post",adminName:z.name,adminProfile:z.profile}});let W=[];ve&&ve.userId&&Object.entries(ye).forEach(([P,z])=>{const ne=(z.unread||{})[ve.userId]||0;if(!ne)return;const K=z.participants||{},se=Object.keys(K).find(ie=>ie!==ve.userId);let te=F[se]||{userId:se,name:se,profileImage:"/default-profile.png"};W.push({chatId:P,type:"message",displayName:te.name||te.username||se,profile:te.profileImage||te.profile||"/default-profile.png",unreadForMe:ne})});const ee=[...Ee,...W].slice(0,5);T(ee)}catch{}})()},[]);const Ae=async D=>{if(t){if(D.type==="post"&&D.id)we(t.userId,D.id),T(q=>q.filter(re=>re.id!==D.id)),N(!1),X("/dashboard");else if(D.type==="message"&&D.chatId){T(q=>q.filter(re=>re.chatId!==D.chatId)),N(!1);try{await Y.put(`${el}/Chats/${D.chatId}/unread/${t.userId}.json`,null)}catch{}X("/all-chat")}}};return a.jsxs("div",{className:"gojo-root-dashboard",children:[a.jsx("style",{children:`
    body, html, #root { height: 100%; margin: 0; }
    .gojo-root-dashboard {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      background: #f0f4f8;
      overflow: hidden;
    }
    .top-navbar {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      z-index: 1000;
      background: #fff;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 24px;
      height: 60px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.07);
    }
    .google-sidebar {
      position: fixed;
      top: 60px;
      left: 0;
      width: 220px;
      height: calc(100vh - 60px);
      background: #fff;
      box-shadow: 2px 0 8px rgba(0,0,0,0.04);
      z-index: 900;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-top: 18px;
      overflow-y: auto;
      transition: width 0.2s;
      min-width: 48px;
    }
    .main-area-row {
      display: flex;
      flex: 1;
      flex-direction: row;
      height: 100vh;
      margin-top: 60px;
      width: 100%;
      min-width: 0;
    }
    .schedule-main {
      flex: 1;
      margin-left: 220px;
      padding: 30px;
      background: #f0f4f8;
      min-height: calc(100vh - 60px);
      overflow-y: auto;
      transition: margin-left 0.2s;
      position: relative;
      z-index: 20;
    }
    .right-sidebar {
      position: fixed;
      top: 60px;
      right: 0;
      width: 350px;
      height: calc(100vh - 60px);
      z-index: 300;
      background: #fff;
      box-shadow: 0 0 20px rgba(0,0,0,0.07);
      display: flex;
      flex-direction: column;
      transition: right 0.2s, left 0.2s, width 0.2s;
    }
    .close-sidebar-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      background: linear-gradient(90deg, #2563eb, #3b82f6);
      color: #fff;
      border: none;
      border-radius: 50%;
      width: 36px;
      height: 36px;
      font-size: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
      z-index: 10;
      cursor: pointer;
    }
    @media (max-width: 900px) {
      .google-sidebar { width: 60px; min-width: 60px; }
      .schedule-main { margin-left: 60px; padding: 17px 2vw; }
      .right-sidebar { width: 90vw; left: 60px; right: initial; }
    }
    @media (max-width: 600px) {
      .top-navbar { height: 54px; padding: 0 7px; }
      .google-sidebar {
        top: 54px;
        width: 48px;
        min-width: 48px;
        padding: 0;
        align-items: flex-start;
      }
      .main-area-row { margin-top: 54px; }
      .schedule-main { margin-left: 48px; padding: 8px 2vw; border-radius: 7px; }
      .right-sidebar { left: 48px; right: initial; width: 100vw; height: calc(100vh - 54px); }
      .close-sidebar-btn {
        top: 8px !important;
        right: 8px !important;
        width: 44px !important;
        height: 44px !important;
        font-size: 22px !important;
      }
    }
  `}),a.jsxs("nav",{className:"top-navbar",children:[a.jsx("h2",{children:"Gojo Dashboard"}),a.jsxs("div",{className:"nav-right",style:{display:"flex",alignItems:"center",gap:16},children:[a.jsxs("div",{className:"icon-circle",style:{position:"relative"},children:[a.jsxs("div",{onClick:()=>N(!b),style:{cursor:"pointer",position:"relative"},children:[a.jsx(Yr,{size:24}),m.length>0&&a.jsx("span",{style:{position:"absolute",top:-5,right:-5,background:"red",color:"white",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:m.length})]}),b&&a.jsx("div",{style:{position:"absolute",top:28,right:0,width:300,maxHeight:400,overflowY:"auto",background:"#fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",borderRadius:8,zIndex:100},children:m.length?m.map((D,q)=>a.jsxs("div",{onClick:()=>Ae(D.id),style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:D.adminProfile,alt:D.adminName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:D.adminName}),a.jsx("p",{style:{margin:0,fontSize:12},children:D.title})]})]},D.id||q)):a.jsx("div",{style:{padding:15},children:"No notifications"})})]}),a.jsx("div",{className:"icon-circle",style:{position:"relative",marginLeft:12},children:a.jsxs("div",{onClick:()=>X("/all-chat"),style:{cursor:"pointer",position:"relative"},children:[a.jsx(qr,{size:22}),x>0&&a.jsx("span",{style:{position:"absolute",top:-6,right:-6,background:"#ff0000",color:"#fff",borderRadius:"50%",minWidth:18,height:18,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 6px",fontSize:12},children:x})]})}),a.jsx("div",{className:"icon-circle",onClick:()=>X("/settings"),children:a.jsx(Sr,{})}),a.jsx("img",{src:(t==null?void 0:t.profileImage)||"/default-profile.png",alt:"profile",style:{width:36,height:36,borderRadius:"50%"}})]})]}),a.jsxs("div",{className:"main-area-row",children:[a.jsxs("div",{className:"google-sidebar",children:[t&&a.jsxs("div",{className:"sidebar-profile",style:{textAlign:"center",marginBottom:16},children:[a.jsx("div",{className:"sidebar-img-circle",style:{margin:"0 auto"},children:a.jsx("img",{src:t.profileImage||"/default-profile.png",alt:"profile",style:{width:60,height:60,borderRadius:"50%",objectFit:"cover",border:"2.5px solid #4b6cb7"}})}),a.jsx("h3",{style:{margin:"10px 0 2px 0",fontSize:"1rem"},children:t.name}),a.jsx("p",{style:{fontSize:".98rem",color:"#888"},children:t.username})]}),a.jsxs("div",{className:"sidebar-menu",style:{display:"flex",flexDirection:"column",gap:8,width:"100%"},children:[a.jsxs(me,{className:"sidebar-btn",to:"/dashboard",children:[a.jsx(Jr,{})," Home"]}),a.jsxs(me,{className:"sidebar-btn",to:"/students",children:[a.jsx(Ve,{})," Students"]}),a.jsxs(me,{className:"sidebar-btn",to:"/admins",children:[a.jsx(Ve,{})," Admins"]}),a.jsxs(me,{className:"sidebar-btn",to:"/parents",children:[a.jsx(Qr,{})," Parents"]}),a.jsxs(me,{className:"sidebar-btn",to:"/marks",children:[a.jsx(wr,{})," Marks"]}),a.jsxs(me,{className:"sidebar-btn",to:"/attendance",children:[a.jsx(Ve,{})," Attendance"]}),a.jsxs(me,{className:"sidebar-btn",to:"/schedule",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[a.jsx(Ve,{})," Schedule"]}),a.jsxs("button",{className:"sidebar-btn logout-btn",onClick:R,children:[a.jsx(Xr,{})," Logout"]})]})]}),a.jsx("div",{className:"schedule-main",children:a.jsxs("div",{className:"schedule-container",style:{width:"100%",maxWidth:900,margin:"0 auto"},children:[a.jsxs("div",{style:{display:"flex",gap:"20px",marginBottom:"25px",justifyContent:"center",flexWrap:"wrap"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{marginRight:"8px",fontWeight:"600"},children:"Grade:"}),a.jsxs("select",{value:u,onChange:D=>d(D.target.value),style:{padding:"8px 12px",borderRadius:"8px",border:"1px solid #ccc",cursor:"pointer"},children:[a.jsx("option",{value:"All",children:"All"}),a.jsx("option",{value:"9",children:"9"}),a.jsx("option",{value:"10",children:"10"}),a.jsx("option",{value:"12",children:"12"})]})]}),a.jsxs("div",{children:[a.jsx("label",{style:{marginRight:"8px",fontWeight:"600"},children:"Section:"}),a.jsxs("select",{value:p,onChange:D=>f(D.target.value),style:{padding:"8px 12px",borderRadius:"8px",border:"1px solid #ccc",cursor:"pointer"},children:[a.jsx("option",{value:"All",children:"All"}),j.filter(D=>D!=="All").map(D=>a.jsx("option",{value:D,children:D},D))]})]})]}),a.jsx("h2",{style:{textAlign:"center",marginBottom:"30px",color:"#2563eb"},children:"Full Schedule"}),s&&a.jsx("p",{style:{textAlign:"center"},children:"Loading schedule..."}),o&&a.jsx("p",{style:{color:"red",textAlign:"center"},children:o}),!s&&v.map(D=>{const q=n[D];return q?a.jsxs("div",{style:{marginBottom:"40px"},children:[a.jsx("h3",{style:{color:"#1c03ffff",marginBottom:"15px"},children:D}),Object.entries(q).filter(([re])=>u==="All"||re.includes(u)).map(([re,fe])=>{const H=re.slice(-1);return p!=="All"&&H!==p?null:a.jsxs("div",{style:{marginBottom:"18px"},children:[a.jsx("h4",{style:{color:"#4603fcff",marginBottom:"10px"},children:re}),a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",background:"#fff",borderRadius:"12px",overflow:"hidden",boxShadow:"0 8px 20px rgba(0,0,0,0.1)"},children:[a.jsx("thead",{style:{background:"#2563eb",color:"#fff"},children:a.jsxs("tr",{children:[a.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Period"}),a.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Subject"}),a.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Time"}),a.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Teacher"})]})}),a.jsx("tbody",{children:Object.entries(fe).map(([M,Z],F)=>{var Q;const ye=(Z==null?void 0:Z.teacherName)===(t==null?void 0:t.name),ve=Z.time||((Q=M.match(/\((.*?)\)/))==null?void 0:Q[1])||"N/A";return a.jsxs("tr",{style:{borderBottom:"1px solid #eee",backgroundColor:ye?"#dbeafe":"#f3f4f6",color:ye?"#1e40af":"#6b7280",fontWeight:ye?"700":"400",borderLeft:ye?"4px solid #2563eb":"none",opacity:ye?1:.85},children:[a.jsx("td",{style:{padding:"12px"},children:M}),a.jsx("td",{style:{padding:"12px"},children:Z.subject||"-"}),a.jsx("td",{style:{padding:"12px"},children:ve}),a.jsx("td",{style:{padding:"12px"},children:Z.teacherName||"-"})]},F)})})]})]},re)})]},D):null})]})}),w&&a.jsxs("div",{className:"right-sidebar",children:[a.jsx("button",{title:"Close sidebar",onClick:()=>_(!1),className:"close-sidebar-btn",style:{marginRight:"40px"},children:a.jsx(SI,{})}),a.jsx("div",{style:{display:"flex",alignItems:"center",background:"linear-gradient(90deg, #2563eb, #3b82f6)",color:"#fff",padding:"12px 48px 12px 20px",textAlign:"center",fontWeight:"600",fontSize:"1.2rem",boxShadow:"0 2px 6px rgba(0,0,0,0.1)",borderTopLeftRadius:"1px",borderTopRightRadius:"1px",justifyContent:"flex-start"},children:"My Schedule"}),a.jsx("div",{style:{padding:"20px",height:"calc(100% - 60px)",overflowY:"auto",background:"#f9fafb"},children:s?a.jsx("p",{style:{textAlign:"center",color:"#6b7280"},children:"Loading schedule..."}):Object.keys(oe).length===0?a.jsx("p",{style:{textAlign:"center",color:"#6b7280"},children:"No schedule found."}):v.map(D=>{const q=oe[D];if(!q)return null;const fe=new Date().toLocaleDateString("en-US",{weekday:"long"})===D;return a.jsxs("div",{style:{marginBottom:"20px",padding:"10px",borderRadius:"12px",background:fe?"#e0f2fe":"#fff",boxShadow:fe?"0 4px 12px rgba(59, 130, 246, 0.2)":"0 2px 6px rgba(0,0,0,0.05)"},children:[a.jsx("h4",{style:{color:"#1e3a8a",marginBottom:"12px",fontWeight:"600",fontSize:"1.05rem",borderBottom:"1px solid #e5e7eb",paddingBottom:"5px"},children:D}),Object.entries(q).map(([H,M])=>a.jsxs("div",{style:{marginBottom:"12px",background:"#f3f4f6",padding:"12px 15px",borderRadius:"10px",borderLeft:"5px solid #2563eb",boxShadow:"0 1px 3px rgba(0,0,0,0.05)",transition:"transform 0.2s, box-shadow 0.2s"},children:[a.jsx("strong",{style:{display:"block",marginBottom:"6px",color:"#1e3a8a",fontSize:"0.98rem"},children:H}),a.jsx("ul",{style:{paddingLeft:"18px",margin:0},children:M.map((Z,F)=>a.jsxs("li",{style:{marginBottom:"6px",color:"#374151",fontSize:"0.95rem"},children:[a.jsx("span",{style:{fontWeight:"600",color:"#2563eb"},children:Z.class})," - ",Z.subject," (",Z.time,")"]},F))})]},H))]},D)})})]}),!w&&a.jsx("button",{title:"Open sidebar",onClick:()=>_(!0),style:{position:"fixed",top:"80px",right:"20px",width:"35px",height:"40px",background:"linear-gradient(90deg, #2563eb, #3b82f6)",color:"#fff",border:"none",borderRadius:"20px",boxShadow:"0 4px 12px rgba(59,130,246, 0.15)",zIndex:301,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"right 0.3s"},children:a.jsx(wI,{})})]})]})}const sc=(t,e)=>[String(t),String(e)].sort().join("_");function kN(){const t=Dn(),e=Ls(),n=y.useRef(null),r=JSON.parse(localStorage.getItem("teacher"))||{},s=String(r.userId||""),[i,o]=y.useState([]),[c,u]=y.useState([]),[d,p]=y.useState([]),[f,m]=y.useState([]),[T,b]=y.useState(""),[N,A]=y.useState(!0),[E,w]=y.useState({}),[_,O]=y.useState(!1),[G,X]=y.useState({}),j=e.state||{},v=j.contact||j.user||null,I=j.chatId||null,k=j.tab||null,[x,R]=y.useState(k||"student"),[C,oe]=y.useState(v||null),[_e,we]=y.useState(I||null),[Ae,J]=y.useState(null),[D,q]=y.useState({}),[re,fe]=y.useState({}),H=(W={})=>W.profileImage||W.profile||W.avatar||"/default-profile.png";y.useEffect(()=>{(async()=>{try{const[ee,P,z,U]=await Promise.all([fetch("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Students.json").then(ie=>ie.json()),fetch("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Parents.json").then(ie=>ie.json()),fetch("https://ethiostore-17d9f-default-rtdb.firebaseio.com/School_Admins.json").then(ie=>ie.json()),fetch("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Users.json").then(ie=>ie.json())]),ne=U||{},K=Object.values(ee||{}).map(ie=>{const ue=ne[ie.userId]||{};return{userId:ie.userId,name:ue.name||ie.name||"Student",profileImage:H(ue)}}),se=Object.values(P||{}).map(ie=>{const ue=ne[ie.userId]||{};return{userId:ie.userId,name:ue.name||ie.name||"Parent",profileImage:H(ue)}}),te=Object.values(z||{}).map(ie=>{const ue=ne[ie.userId]||{};return{userId:ie.userId,name:ie.name||ue.name||"Admin",profileImage:H(ue)}});o(K),u(se),p(te)}catch(ee){console.error(" Fetch error:",ee)}})()},[]),y.useEffect(()=>{if(!s)return;const W=[...i,...c,...d],ee=[];return W.forEach(P=>{if(!P||!P.userId)return;const z=sc(s,P.userId);try{const U=Ot(Ut,`Chats/${z}/unread/${s}`),ne=Ji(U,K=>{const se=K.val();X(te=>({...te,[P.userId]:Number(se)||0}))});ee.push(ne)}catch{}}),()=>{ee.forEach(P=>P())}},[i,c,d,s]),y.useEffect(()=>{const W=()=>{const ee=typeof window<"u"&&window.innerWidth<640;O(ee),ee&&A(!1)};return W(),window.addEventListener("resize",W),()=>window.removeEventListener("resize",W)},[]),y.useEffect(()=>{v&&oe(v),I&&we(I),k&&R(k)},[v,I,k]),y.useEffect(()=>{C||(x==="student"&&i.length&&oe(i[0]),x==="parent"&&c.length&&oe(c[0]),x==="admin"&&d.length&&oe(d[0]))},[x,i,c,d,C]),y.useEffect(()=>{const W=v;if(W){if(x==="student"&&i.length){const ee=i.find(P=>P.userId===W.userId);ee&&oe(ee)}if(x==="parent"&&c.length){const ee=c.find(P=>P.userId===W.userId);ee&&oe(ee)}if(x==="admin"&&d.length){const ee=d.find(P=>P.userId===W.userId);ee&&oe(ee)}}},[i,c,d,v,x]),y.useEffect(()=>{if(!C||!s)return;const W=_e||sc(s,C.userId);we(W);const ee=Ot(Ut,`Chats/${W}/messages`),P=Ji(ee,z=>{const U=z.val()||{},ne=Object.entries(U).filter(([K,se])=>!se.deleted).map(([K,se])=>({id:K,...se,isTeacher:se.senderId===s})).sort((K,se)=>K.timeStamp-se.timeStamp);m(ne),Object.entries(U).forEach(([K,se])=>{se&&!se.seen&&se.receiverId===s&&Nr(Ot(Ut,`Chats/${W}/messages/${K}`),{seen:!0}).catch(console.error)}),Nr(Ot(Ut,`Chats/${W}/unread`),{[s]:0}).catch(console.error)});return()=>P()},[C,s,_e]),y.useEffect(()=>{try{const W=Ot(Ut,"Presence"),ee=Ji(W,P=>{const z=P.val()||{};w(z)});return()=>ee()}catch(W){console.warn("Presence listener unavailable:",W)}},[]);const M=async()=>{if(!T.trim()||!C)return;const W=Object.keys(D).find(P=>D[P]),ee=_e||sc(s,C.userId);if(W)await Nr(Ot(Ut,`Chats/${ee}/messages/${W}`),{text:T,edited:!0}),q({}),J(null),b("");else{const P=Ot(Ut,`Chats/${ee}/messages`),z={senderId:s,receiverId:C.userId,type:"text",text:T,seen:!1,edited:!1,deleted:!1,timeStamp:Date.now()};await dT(P,z),await Nr(Ot(Ut,`Chats/${ee}/participants`),{[s]:!0,[C.userId]:!0}),await Nr(Ot(Ut,`Chats/${ee}/lastMessage`),{text:T,senderId:s,seen:!1,timeStamp:z.timeStamp});try{const U=Ot(Ut,`Chats/${ee}/unread/${C.userId}`);await Nr(Ot(Ut,`Chats/${ee}/unread`),{[s]:0,[C.userId]:1})}catch{}b("")}},Z=W=>{const ee=_e||sc(s,C.userId);Nr(Ot(Ut,`Chats/${ee}/messages/${W}`),{deleted:!0}).catch(console.error)},F=(W,ee)=>{q({[W]:!0}),b(ee),J(W)},ye=W=>{const ee=new Date(W);return`${ee.getHours().toString().padStart(2,"0")}:${ee.getMinutes().toString().padStart(2,"0")}`},ve=W=>{if(!W)return"";const ee=new Date(Number(W)),P=new Date,z=new Date(P.getFullYear(),P.getMonth(),P.getDate()),U=new Date(ee.getFullYear(),ee.getMonth(),ee.getDate()),ne=z-U,K=Math.floor(ne/(24*60*60*1e3));return K===0?"Today":K===1?"Yesterday":K>1&&K<7?`${K} days ago`:ee.toLocaleDateString()};y.useEffect(()=>{var W;(W=n.current)==null||W.scrollIntoView({behavior:"smooth"})},[f]);const Q=x==="student"?i:x==="parent"?c:d,le=W=>{if(!W)return!1;const P=(()=>{if((E==null?void 0:E[W])!==void 0)return E[W];const z=String(W);if((E==null?void 0:E[z])!==void 0)return E[z];const U=Number(W);if(!Number.isNaN(U)&&(E==null?void 0:E[U])!==void 0)return E[U];for(const[,ne]of Object.entries(E||{}))try{if(ne&&(ne.userId===W||String(ne.userId)===z))return ne}catch{}})();if(P==null)return!1;if(typeof P=="boolean")return P===!0;if(typeof P=="object"){if(P.state==="online"||P.online===!0)return!0;if(P.lastSeen){const z=Number(P.lastSeen)||0;return Date.now()-z<6e4}if(typeof P=="number")return Date.now()-P<6e4}return!1},Ee=W=>{const ee=E==null?void 0:E[W];if(!ee)return null;let P=null;if((typeof ee=="number"||/^[0-9]+$/.test(String(ee)))&&(P=Number(ee)),typeof ee=="object"&&(P=ee.lastSeen||ee.timestamp||ee.lastActive||ee.last_seen||ee.time||null),!P)return null;const z=Date.now()-Number(P),U=Math.floor(z/1e3);if(U<60)return"last seen just now";const ne=Math.floor(U/60);if(ne<60)return`last seen ${ne}m ago`;const K=Math.floor(ne/60);if(K<24)return`last seen ${K}h ago`;const se=Math.floor(K/24);return se<7?`last seen ${se}d ago`:`last seen on ${new Date(P).toLocaleDateString()}`};return a.jsxs("div",{style:{display:"flex",height:"100vh",background:"#eef2f7",fontFamily:"sans-serif"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"stretch"},children:[a.jsxs("div",{style:{width:N?_?220:280:0,background:"#fff",padding:N?16:0,boxShadow:N?"2px 0 10px rgba(0,0,0,0.1)":"none",display:N?"flex":"none",flexDirection:"column",transition:"width 180ms ease"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[a.jsx("button",{onClick:()=>t(-1),style:{border:"none",background:"none",padding:4,cursor:"pointer"},children:a.jsx(_I,{size:18})}),a.jsx("div",{style:{display:"flex",gap:6,margin:"12px 0",alignItems:"center"},children:["student","parent","admin"].map(W=>a.jsx("button",{onClick:()=>{R(W),oe(null),we(null)},style:{flex:1,padding:8,borderRadius:20,border:"none",background:x===W?"#4facfe":"#ddd",color:x===W?"#fff":"#000",cursor:"pointer",fontSize:14},children:W.charAt(0).toUpperCase()+W.slice(1)}))})]}),a.jsx("div",{style:{marginTop:8,overflowY:"auto",flex:1},children:Q.map(W=>a.jsxs("div",{onClick:()=>{oe(W),we(null)},style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:10,padding:10,borderRadius:14,cursor:"pointer",marginBottom:8,background:(C==null?void 0:C.userId)===W.userId?"#dbeafe":"#f9fafb",boxShadow:(C==null?void 0:C.userId)===W.userId?"0 2px 10px rgba(0,0,0,0.1)":"none"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[a.jsxs("div",{style:{position:"relative"},children:[a.jsx("img",{src:W.profileImage,alt:W.name,onError:ee=>ee.target.src="/default-profile.png",style:{width:_?36:40,height:_?36:40,borderRadius:"50%",objectFit:"cover"}}),a.jsx("span",{style:{position:"absolute",right:-2,bottom:-2,width:12,height:12,borderRadius:12,border:"2px solid #fff",background:le(W.userId)?"#34D399":"#cbd5e1"}})]}),a.jsx("span",{style:{fontWeight:500,marginLeft:0},children:W.name})]}),G[W.userId]>0?a.jsx("div",{style:{minWidth:26,height:26,display:"flex",alignItems:"center",justifyContent:"center",background:"#ef4444",color:"#fff",borderRadius:14,padding:"0 6px",fontSize:12,fontWeight:600},children:G[W.userId]>99?"99+":G[W.userId]}):a.jsx("div",{style:{width:26}})]},W.userId))})]}),a.jsx("div",{style:{width:28,display:"flex",alignItems:"flex-start",justifyContent:"center"},children:a.jsx("button",{onClick:()=>A(W=>!W),style:{border:"none",background:"#fff",borderRadius:4,padding:4,boxShadow:"0 1px 4px rgba(0,0,0,0.08)",cursor:"pointer",marginTop:8},"aria-label":"Toggle sidebar",children:N?"":""})})]}),a.jsx("div",{style:{flex:1,padding:16,display:"flex",flexDirection:"column"},children:C?a.jsxs(a.Fragment,{children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:"12px 0",borderBottom:"1px solid #ccc",boxShadow:"0 2px 6px rgba(0,0,0,0.05)",background:"#fff",borderRadius:8,marginBottom:8},children:[a.jsx("img",{src:C.profileImage,alt:C.name,onError:W=>W.target.src="/default-profile.png",style:{width:_?40:50,height:_?40:50,borderRadius:"50%",objectFit:"cover"}}),a.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[a.jsx("span",{style:{fontWeight:600,fontSize:16},children:C.name}),a.jsx("span",{style:{fontSize:12,color:le(C.userId)?"#16A34A":"#666"},children:le(C.userId)?"Online":Ee(C.userId)||x.charAt(0).toUpperCase()+x.slice(1)})]})]}),a.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"12px 16px",display:"flex",flexDirection:"column"},children:[f.map(W=>{const ee=W.isTeacher,P=!!D[W.id],z=Ae===W.id;return a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:ee?"flex-end":"flex-start",marginBottom:10},children:[a.jsxs("div",{onClick:()=>J(W.id),style:{maxWidth:_?"85%":"70%",background:ee?"#4facfe":"#fff",color:ee?"#fff":"#000",padding:"10px 14px",borderRadius:18,borderTopRightRadius:ee?0:18,borderTopLeftRadius:ee?18:0,boxShadow:"0 1px 3px rgba(0,0,0,0.1)",wordBreak:"break-word",cursor:"pointer",position:"relative"},children:[W.text," ",W.edited&&a.jsx("small",{style:{fontSize:10},children:" (edited)"}),a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:6,marginTop:4,fontSize:11,color:ee?"#fff":"#888"},children:[a.jsx("span",{style:{marginRight:6,fontSize:11,opacity:.9},children:ve(W.timeStamp)}),a.jsx("span",{children:ye(W.timeStamp)}),ee&&!W.deleted&&a.jsxs("span",{style:{display:"flex",gap:0},children:[a.jsx(lo,{size:10,color:"#fff",style:{opacity:.8}}),W.seen&&a.jsx(lo,{size:10,color:"#f3f7f8",style:{marginLeft:2,opacity:.95}})]})]})]}),z&&ee&&!W.deleted&&!P&&a.jsxs("div",{style:{display:"flex",gap:6,marginTop:4,fontSize:12,justifyContent:ee?"flex-end":"flex-start"},children:[a.jsx("button",{onClick:()=>F(W.id,W.text),style:{padding:"2px 6px",borderRadius:4,border:"1px solid #ccc",cursor:"pointer",background:"#f1f1f1"},children:"Edit"}),a.jsx("button",{onClick:()=>Z(W.id),style:{padding:"2px 6px",borderRadius:4,border:"1px solid #ccc",cursor:"pointer",background:"#f1f1f1",color:"red"},children:"Delete"})]})]},W.id)}),a.jsx("div",{ref:n})]}),a.jsxs("div",{style:{display:"flex",gap:8,marginTop:8},children:[a.jsx("input",{value:T,onChange:W=>b(W.target.value),onKeyDown:W=>W.key==="Enter"&&M(),placeholder:"Type a message...",style:{flex:1,padding:_?10:12,borderRadius:25,border:"1px solid #ccc",outline:"none"}}),a.jsx("button",{onClick:M,style:{width:_?40:45,height:_?40:45,borderRadius:"50%",background:"#4facfe",border:"none",color:"#fff",display:"flex",justifyContent:"center",alignItems:"center"},children:a.jsx(Ax,{})})]})]}):a.jsx("h3",{style:{textAlign:"center",marginTop:50},children:"Select a user to start chatting "})})]})}function TN(){return a.jsx(CE,{basename:"/Gojo-Teacher-Web",children:a.jsxs(nE,{children:[a.jsx(vn,{path:"/",element:a.jsx(py,{})}),a.jsx(vn,{path:"/login",element:a.jsx(py,{})}),a.jsx(vn,{path:"/register",element:a.jsx(hI,{})}),a.jsx(vn,{path:"/dashboard",element:a.jsx(rN,{})}),a.jsx(vn,{path:"/students",element:a.jsx(cN,{})}),a.jsx(vn,{path:"/admins",element:a.jsx(yN,{})}),a.jsx(vn,{path:"/marks",element:a.jsx(dN,{})}),a.jsx(vn,{path:"/attendance",element:a.jsx(fN,{})}),a.jsx(vn,{path:"/notes",element:a.jsx(xN,{})})," ",a.jsx(vn,{path:"/parents",element:a.jsx(SN,{})}),a.jsx(vn,{path:"/settings",element:a.jsx(CN,{})}),a.jsx(vn,{path:"all-chat",element:a.jsx(kN,{})}),a.jsx(vn,{path:"schedule",element:a.jsx(jN,{})})]})})}const NN=y.createContext(),RN=({children:t})=>{const[e,n]=y.useState("light");y.useEffect(()=>{const s=localStorage.getItem("theme");s&&n(s)},[]),y.useEffect(()=>{document.body.className=e==="dark"?"dark-mode":"",localStorage.setItem("theme",e)},[e]);const r=()=>{n(s=>s==="light"?"dark":"light")};return a.jsx(NN.Provider,{value:{theme:e,toggleTheme:r},children:t})};function AN(){return a.jsx(RN,{children:a.jsx(TN,{})})}Zd.createRoot(document.getElementById("root")).render(a.jsx(Qt.StrictMode,{children:a.jsx(AN,{})}));
