(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function X2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ky={exports:{}},Iu={},Gy={exports:{}},ut={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xl=Symbol.for("react.element"),Z2=Symbol.for("react.portal"),e_=Symbol.for("react.fragment"),t_=Symbol.for("react.strict_mode"),n_=Symbol.for("react.profiler"),r_=Symbol.for("react.provider"),s_=Symbol.for("react.context"),i_=Symbol.for("react.forward_ref"),o_=Symbol.for("react.suspense"),a_=Symbol.for("react.memo"),l_=Symbol.for("react.lazy"),Xm=Symbol.iterator;function c_(t){return t===null||typeof t!="object"?null:(t=Xm&&t[Xm]||t["@@iterator"],typeof t=="function"?t:null)}var qy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Yy=Object.assign,Qy={};function Mo(t,e,n){this.props=t,this.context=e,this.refs=Qy,this.updater=n||qy}Mo.prototype.isReactComponent={};Mo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Mo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Jy(){}Jy.prototype=Mo.prototype;function Of(t,e,n){this.props=t,this.context=e,this.refs=Qy,this.updater=n||qy}var Mf=Of.prototype=new Jy;Mf.constructor=Of;Yy(Mf,Mo.prototype);Mf.isPureReactComponent=!0;var Zm=Array.isArray,Xy=Object.prototype.hasOwnProperty,Lf={current:null},Zy={key:!0,ref:!0,__self:!0,__source:!0};function ex(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Xy.call(e,r)&&!Zy.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:xl,type:t,key:i,ref:o,props:s,_owner:Lf.current}}function u_(t,e){return{$$typeof:xl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ff(t){return typeof t=="object"&&t!==null&&t.$$typeof===xl}function d_(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var eg=/\/+/g;function xd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?d_(""+t.key):e.toString(36)}function xc(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case xl:case Z2:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+xd(o,0):r,Zm(s)?(n="",t!=null&&(n=t.replace(eg,"$&/")+"/"),xc(s,e,n,"",function(d){return d})):s!=null&&(Ff(s)&&(s=u_(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(eg,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Zm(t))for(var c=0;c<t.length;c++){i=t[c];var u=r+xd(i,c);o+=xc(i,e,n,u,s)}else if(u=c_(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=r+xd(i,c++),o+=xc(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Gl(t,e,n){if(t==null)return t;var r=[],s=0;return xc(t,r,"","",function(i){return e.call(n,i,s++)}),r}function h_(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var An={current:null},vc={transition:null},f_={ReactCurrentDispatcher:An,ReactCurrentBatchConfig:vc,ReactCurrentOwner:Lf};function tx(){throw Error("act(...) is not supported in production builds of React.")}ut.Children={map:Gl,forEach:function(t,e,n){Gl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Gl(t,function(){e++}),e},toArray:function(t){return Gl(t,function(e){return e})||[]},only:function(t){if(!Ff(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ut.Component=Mo;ut.Fragment=e_;ut.Profiler=n_;ut.PureComponent=Of;ut.StrictMode=t_;ut.Suspense=o_;ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=f_;ut.act=tx;ut.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Yy({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Lf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)Xy.call(e,u)&&!Zy.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:xl,type:t.type,key:s,ref:i,props:r,_owner:o}};ut.createContext=function(t){return t={$$typeof:s_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:r_,_context:t},t.Consumer=t};ut.createElement=ex;ut.createFactory=function(t){var e=ex.bind(null,t);return e.type=t,e};ut.createRef=function(){return{current:null}};ut.forwardRef=function(t){return{$$typeof:i_,render:t}};ut.isValidElement=Ff;ut.lazy=function(t){return{$$typeof:l_,_payload:{_status:-1,_result:t},_init:h_}};ut.memo=function(t,e){return{$$typeof:a_,type:t,compare:e===void 0?null:e}};ut.startTransition=function(t){var e=vc.transition;vc.transition={};try{t()}finally{vc.transition=e}};ut.unstable_act=tx;ut.useCallback=function(t,e){return An.current.useCallback(t,e)};ut.useContext=function(t){return An.current.useContext(t)};ut.useDebugValue=function(){};ut.useDeferredValue=function(t){return An.current.useDeferredValue(t)};ut.useEffect=function(t,e){return An.current.useEffect(t,e)};ut.useId=function(){return An.current.useId()};ut.useImperativeHandle=function(t,e,n){return An.current.useImperativeHandle(t,e,n)};ut.useInsertionEffect=function(t,e){return An.current.useInsertionEffect(t,e)};ut.useLayoutEffect=function(t,e){return An.current.useLayoutEffect(t,e)};ut.useMemo=function(t,e){return An.current.useMemo(t,e)};ut.useReducer=function(t,e,n){return An.current.useReducer(t,e,n)};ut.useRef=function(t){return An.current.useRef(t)};ut.useState=function(t){return An.current.useState(t)};ut.useSyncExternalStore=function(t,e,n){return An.current.useSyncExternalStore(t,e,n)};ut.useTransition=function(){return An.current.useTransition()};ut.version="18.3.1";Gy.exports=ut;var g=Gy.exports;const kt=X2(g);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p_=g,m_=Symbol.for("react.element"),g_=Symbol.for("react.fragment"),y_=Object.prototype.hasOwnProperty,x_=p_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,v_={key:!0,ref:!0,__self:!0,__source:!0};function nx(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)y_.call(e,r)&&!v_.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:m_,type:t,key:i,ref:o,props:s,_owner:x_.current}}Iu.Fragment=g_;Iu.jsx=nx;Iu.jsxs=nx;Ky.exports=Iu;var a=Ky.exports,fh={},rx={exports:{}},Jn={},sx={exports:{}},ix={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(X,Y){var ie=X.length;X.push(Y);e:for(;0<ie;){var G=ie-1>>>1,he=X[G];if(0<s(he,Y))X[G]=Y,X[ie]=he,ie=G;else break e}}function n(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var Y=X[0],ie=X.pop();if(ie!==Y){X[0]=ie;e:for(var G=0,he=X.length,Ne=he>>>1;G<Ne;){var ke=2*(G+1)-1,ge=X[ke],B=ke+1,me=X[B];if(0>s(ge,ie))B<he&&0>s(me,ge)?(X[G]=me,X[B]=ie,G=B):(X[G]=ge,X[ke]=ie,G=ke);else if(B<he&&0>s(me,ie))X[G]=me,X[B]=ie,G=B;else break e}}return Y}function s(X,Y){var ie=X.sortIndex-Y.sortIndex;return ie!==0?ie:X.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],f=1,p=null,y=3,k=!1,w=!1,R=!1,D=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(X){for(var Y=n(d);Y!==null;){if(Y.callback===null)r(d);else if(Y.startTime<=X)r(d),Y.sortIndex=Y.expirationTime,e(u,Y);else break;Y=n(d)}}function L(X){if(R=!1,v(X),!w)if(n(u)!==null)w=!0,Z(q);else{var Y=n(d);Y!==null&&Se(L,Y.startTime-X)}}function q(X,Y){w=!1,R&&(R=!1,S(x),x=-1),k=!0;var ie=y;try{for(v(Y),p=n(u);p!==null&&(!(p.expirationTime>Y)||X&&!N());){var G=p.callback;if(typeof G=="function"){p.callback=null,y=p.priorityLevel;var he=G(p.expirationTime<=Y);Y=t.unstable_now(),typeof he=="function"?p.callback=he:p===n(u)&&r(u),v(Y)}else r(u);p=n(u)}if(p!==null)var Ne=!0;else{var ke=n(d);ke!==null&&Se(L,ke.startTime-Y),Ne=!1}return Ne}finally{p=null,y=ie,k=!1}}var se=!1,E=null,x=-1,j=5,I=-1;function N(){return!(t.unstable_now()-I<j)}function O(){if(E!==null){var X=t.unstable_now();I=X;var Y=!0;try{Y=E(!0,X)}finally{Y?C():(se=!1,E=null)}}else se=!1}var C;if(typeof _=="function")C=function(){_(O)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,_e=V.port2;V.port1.onmessage=O,C=function(){_e.postMessage(null)}}else C=function(){D(O,0)};function Z(X){E=X,se||(se=!0,C())}function Se(X,Y){x=D(function(){X(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(X){X.callback=null},t.unstable_continueExecution=function(){w||k||(w=!0,Z(q))},t.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<X?Math.floor(1e3/X):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(X){switch(y){case 1:case 2:case 3:var Y=3;break;default:Y=y}var ie=y;y=Y;try{return X()}finally{y=ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(X,Y){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ie=y;y=X;try{return Y()}finally{y=ie}},t.unstable_scheduleCallback=function(X,Y,ie){var G=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?G+ie:G):ie=G,X){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=ie+he,X={id:f++,callback:Y,priorityLevel:X,startTime:ie,expirationTime:he,sortIndex:-1},ie>G?(X.sortIndex=ie,e(d,X),n(u)===null&&X===n(d)&&(R?(S(x),x=-1):R=!0,Se(L,ie-G))):(X.sortIndex=he,e(u,X),w||k||(w=!0,Z(q))),X},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(X){var Y=y;return function(){var ie=y;y=Y;try{return X.apply(this,arguments)}finally{y=ie}}}})(ix);sx.exports=ix;var w_=sx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var __=g,Qn=w_;function fe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ox=new Set,Ba={};function Fi(t,e){vo(t,e),vo(t+"Capture",e)}function vo(t,e){for(Ba[t]=e,t=0;t<e.length;t++)ox.add(e[t])}var is=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ph=Object.prototype.hasOwnProperty,b_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,tg={},ng={};function S_(t){return ph.call(ng,t)?!0:ph.call(tg,t)?!1:b_.test(t)?ng[t]=!0:(tg[t]=!0,!1)}function C_(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function j_(t,e,n,r){if(e===null||typeof e>"u"||C_(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Pn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var vn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){vn[t]=new Pn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];vn[e]=new Pn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){vn[t]=new Pn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){vn[t]=new Pn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){vn[t]=new Pn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){vn[t]=new Pn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){vn[t]=new Pn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){vn[t]=new Pn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){vn[t]=new Pn(t,5,!1,t.toLowerCase(),null,!1,!1)});var zf=/[\-:]([a-z])/g;function Bf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(zf,Bf);vn[e]=new Pn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(zf,Bf);vn[e]=new Pn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(zf,Bf);vn[e]=new Pn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){vn[t]=new Pn(t,1,!1,t.toLowerCase(),null,!1,!1)});vn.xlinkHref=new Pn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){vn[t]=new Pn(t,1,!1,t.toLowerCase(),null,!0,!0)});function $f(t,e,n,r){var s=vn.hasOwnProperty(e)?vn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(j_(e,n,s,r)&&(n=null),r||s===null?S_(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var fs=__.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ql=Symbol.for("react.element"),Yi=Symbol.for("react.portal"),Qi=Symbol.for("react.fragment"),Uf=Symbol.for("react.strict_mode"),mh=Symbol.for("react.profiler"),ax=Symbol.for("react.provider"),lx=Symbol.for("react.context"),Wf=Symbol.for("react.forward_ref"),gh=Symbol.for("react.suspense"),yh=Symbol.for("react.suspense_list"),Hf=Symbol.for("react.memo"),ks=Symbol.for("react.lazy"),cx=Symbol.for("react.offscreen"),rg=Symbol.iterator;function ea(t){return t===null||typeof t!="object"?null:(t=rg&&t[rg]||t["@@iterator"],typeof t=="function"?t:null)}var Vt=Object.assign,vd;function ya(t){if(vd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);vd=e&&e[1]||""}return`
`+vd+t}var wd=!1;function _d(t,e){if(!t||wd)return"";wd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,c=i.length-1;1<=o&&0<=c&&s[o]!==i[c];)c--;for(;1<=o&&0<=c;o--,c--)if(s[o]!==i[c]){if(o!==1||c!==1)do if(o--,c--,0>c||s[o]!==i[c]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{wd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ya(t):""}function E_(t){switch(t.tag){case 5:return ya(t.type);case 16:return ya("Lazy");case 13:return ya("Suspense");case 19:return ya("SuspenseList");case 0:case 2:case 15:return t=_d(t.type,!1),t;case 11:return t=_d(t.type.render,!1),t;case 1:return t=_d(t.type,!0),t;default:return""}}function xh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Qi:return"Fragment";case Yi:return"Portal";case mh:return"Profiler";case Uf:return"StrictMode";case gh:return"Suspense";case yh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case lx:return(t.displayName||"Context")+".Consumer";case ax:return(t._context.displayName||"Context")+".Provider";case Wf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Hf:return e=t.displayName||null,e!==null?e:xh(t.type)||"Memo";case ks:e=t._payload,t=t._init;try{return xh(t(e))}catch{}}return null}function I_(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xh(e);case 8:return e===Uf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function qs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ux(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function k_(t){var e=ux(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Yl(t){t._valueTracker||(t._valueTracker=k_(t))}function dx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=ux(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Lc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function vh(t,e){var n=e.checked;return Vt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function sg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=qs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function hx(t,e){e=e.checked,e!=null&&$f(t,"checked",e,!1)}function wh(t,e){hx(t,e);var n=qs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?_h(t,e.type,n):e.hasOwnProperty("defaultValue")&&_h(t,e.type,qs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ig(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function _h(t,e,n){(e!=="number"||Lc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var xa=Array.isArray;function lo(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+qs(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function bh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(fe(91));return Vt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function og(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(fe(92));if(xa(n)){if(1<n.length)throw Error(fe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:qs(n)}}function fx(t,e){var n=qs(e.value),r=qs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function ag(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function px(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Sh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?px(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ql,mx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ql=Ql||document.createElement("div"),Ql.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ql.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function $a(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var _a={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},N_=["Webkit","ms","Moz","O"];Object.keys(_a).forEach(function(t){N_.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),_a[e]=_a[t]})});function gx(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||_a.hasOwnProperty(t)&&_a[t]?(""+e).trim():e+"px"}function yx(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=gx(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var T_=Vt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ch(t,e){if(e){if(T_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(fe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(fe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(fe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(fe(62))}}function jh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Eh=null;function Vf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ih=null,co=null,uo=null;function lg(t){if(t=_l(t)){if(typeof Ih!="function")throw Error(fe(280));var e=t.stateNode;e&&(e=Au(e),Ih(t.stateNode,t.type,e))}}function xx(t){co?uo?uo.push(t):uo=[t]:co=t}function vx(){if(co){var t=co,e=uo;if(uo=co=null,lg(t),e)for(t=0;t<e.length;t++)lg(e[t])}}function wx(t,e){return t(e)}function _x(){}var bd=!1;function bx(t,e,n){if(bd)return t(e,n);bd=!0;try{return wx(t,e,n)}finally{bd=!1,(co!==null||uo!==null)&&(_x(),vx())}}function Ua(t,e){var n=t.stateNode;if(n===null)return null;var r=Au(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(fe(231,e,typeof n));return n}var kh=!1;if(is)try{var ta={};Object.defineProperty(ta,"passive",{get:function(){kh=!0}}),window.addEventListener("test",ta,ta),window.removeEventListener("test",ta,ta)}catch{kh=!1}function R_(t,e,n,r,s,i,o,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var ba=!1,Fc=null,zc=!1,Nh=null,A_={onError:function(t){ba=!0,Fc=t}};function P_(t,e,n,r,s,i,o,c,u){ba=!1,Fc=null,R_.apply(A_,arguments)}function D_(t,e,n,r,s,i,o,c,u){if(P_.apply(this,arguments),ba){if(ba){var d=Fc;ba=!1,Fc=null}else throw Error(fe(198));zc||(zc=!0,Nh=d)}}function zi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Sx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function cg(t){if(zi(t)!==t)throw Error(fe(188))}function O_(t){var e=t.alternate;if(!e){if(e=zi(t),e===null)throw Error(fe(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return cg(s),t;if(i===r)return cg(s),e;i=i.sibling}throw Error(fe(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o)throw Error(fe(189))}}if(n.alternate!==r)throw Error(fe(190))}if(n.tag!==3)throw Error(fe(188));return n.stateNode.current===n?t:e}function Cx(t){return t=O_(t),t!==null?jx(t):null}function jx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=jx(t);if(e!==null)return e;t=t.sibling}return null}var Ex=Qn.unstable_scheduleCallback,ug=Qn.unstable_cancelCallback,M_=Qn.unstable_shouldYield,L_=Qn.unstable_requestPaint,Jt=Qn.unstable_now,F_=Qn.unstable_getCurrentPriorityLevel,Kf=Qn.unstable_ImmediatePriority,Ix=Qn.unstable_UserBlockingPriority,Bc=Qn.unstable_NormalPriority,z_=Qn.unstable_LowPriority,kx=Qn.unstable_IdlePriority,ku=null,Br=null;function B_(t){if(Br&&typeof Br.onCommitFiberRoot=="function")try{Br.onCommitFiberRoot(ku,t,void 0,(t.current.flags&128)===128)}catch{}}var br=Math.clz32?Math.clz32:W_,$_=Math.log,U_=Math.LN2;function W_(t){return t>>>=0,t===0?32:31-($_(t)/U_|0)|0}var Jl=64,Xl=4194304;function va(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function $c(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~s;c!==0?r=va(c):(i&=o,i!==0&&(r=va(i)))}else o=n&~s,o!==0?r=va(o):i!==0&&(r=va(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-br(e),s=1<<n,r|=t[n],e&=~s;return r}function H_(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function V_(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-br(i),c=1<<o,u=s[o];u===-1?(!(c&n)||c&r)&&(s[o]=H_(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function Th(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Nx(){var t=Jl;return Jl<<=1,!(Jl&4194240)&&(Jl=64),t}function Sd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function vl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-br(e),t[e]=n}function K_(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-br(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Gf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-br(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var _t=0;function Tx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Rx,qf,Ax,Px,Dx,Rh=!1,Zl=[],Os=null,Ms=null,Ls=null,Wa=new Map,Ha=new Map,Ts=[],G_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dg(t,e){switch(t){case"focusin":case"focusout":Os=null;break;case"dragenter":case"dragleave":Ms=null;break;case"mouseover":case"mouseout":Ls=null;break;case"pointerover":case"pointerout":Wa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ha.delete(e.pointerId)}}function na(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=_l(e),e!==null&&qf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function q_(t,e,n,r,s){switch(e){case"focusin":return Os=na(Os,t,e,n,r,s),!0;case"dragenter":return Ms=na(Ms,t,e,n,r,s),!0;case"mouseover":return Ls=na(Ls,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Wa.set(i,na(Wa.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ha.set(i,na(Ha.get(i)||null,t,e,n,r,s)),!0}return!1}function Ox(t){var e=gi(t.target);if(e!==null){var n=zi(e);if(n!==null){if(e=n.tag,e===13){if(e=Sx(n),e!==null){t.blockedOn=e,Dx(t.priority,function(){Ax(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function wc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ah(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Eh=r,n.target.dispatchEvent(r),Eh=null}else return e=_l(n),e!==null&&qf(e),t.blockedOn=n,!1;e.shift()}return!0}function hg(t,e,n){wc(t)&&n.delete(e)}function Y_(){Rh=!1,Os!==null&&wc(Os)&&(Os=null),Ms!==null&&wc(Ms)&&(Ms=null),Ls!==null&&wc(Ls)&&(Ls=null),Wa.forEach(hg),Ha.forEach(hg)}function ra(t,e){t.blockedOn===e&&(t.blockedOn=null,Rh||(Rh=!0,Qn.unstable_scheduleCallback(Qn.unstable_NormalPriority,Y_)))}function Va(t){function e(s){return ra(s,t)}if(0<Zl.length){ra(Zl[0],t);for(var n=1;n<Zl.length;n++){var r=Zl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Os!==null&&ra(Os,t),Ms!==null&&ra(Ms,t),Ls!==null&&ra(Ls,t),Wa.forEach(e),Ha.forEach(e),n=0;n<Ts.length;n++)r=Ts[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ts.length&&(n=Ts[0],n.blockedOn===null);)Ox(n),n.blockedOn===null&&Ts.shift()}var ho=fs.ReactCurrentBatchConfig,Uc=!0;function Q_(t,e,n,r){var s=_t,i=ho.transition;ho.transition=null;try{_t=1,Yf(t,e,n,r)}finally{_t=s,ho.transition=i}}function J_(t,e,n,r){var s=_t,i=ho.transition;ho.transition=null;try{_t=4,Yf(t,e,n,r)}finally{_t=s,ho.transition=i}}function Yf(t,e,n,r){if(Uc){var s=Ah(t,e,n,r);if(s===null)Pd(t,e,r,Wc,n),dg(t,r);else if(q_(s,t,e,n,r))r.stopPropagation();else if(dg(t,r),e&4&&-1<G_.indexOf(t)){for(;s!==null;){var i=_l(s);if(i!==null&&Rx(i),i=Ah(t,e,n,r),i===null&&Pd(t,e,r,Wc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Pd(t,e,r,null,n)}}var Wc=null;function Ah(t,e,n,r){if(Wc=null,t=Vf(r),t=gi(t),t!==null)if(e=zi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Sx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Wc=t,null}function Mx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(F_()){case Kf:return 1;case Ix:return 4;case Bc:case z_:return 16;case kx:return 536870912;default:return 16}default:return 16}}var As=null,Qf=null,_c=null;function Lx(){if(_c)return _c;var t,e=Qf,n=e.length,r,s="value"in As?As.value:As.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return _c=s.slice(t,1<r?1-r:void 0)}function bc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ec(){return!0}function fg(){return!1}function Xn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ec:fg,this.isPropagationStopped=fg,this}return Vt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ec)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ec)},persist:function(){},isPersistent:ec}),e}var Lo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jf=Xn(Lo),wl=Vt({},Lo,{view:0,detail:0}),X_=Xn(wl),Cd,jd,sa,Nu=Vt({},wl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==sa&&(sa&&t.type==="mousemove"?(Cd=t.screenX-sa.screenX,jd=t.screenY-sa.screenY):jd=Cd=0,sa=t),Cd)},movementY:function(t){return"movementY"in t?t.movementY:jd}}),pg=Xn(Nu),Z_=Vt({},Nu,{dataTransfer:0}),eb=Xn(Z_),tb=Vt({},wl,{relatedTarget:0}),Ed=Xn(tb),nb=Vt({},Lo,{animationName:0,elapsedTime:0,pseudoElement:0}),rb=Xn(nb),sb=Vt({},Lo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ib=Xn(sb),ob=Vt({},Lo,{data:0}),mg=Xn(ob),ab={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ub(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=cb[t])?!!e[t]:!1}function Xf(){return ub}var db=Vt({},wl,{key:function(t){if(t.key){var e=ab[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=bc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?lb[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xf,charCode:function(t){return t.type==="keypress"?bc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?bc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),hb=Xn(db),fb=Vt({},Nu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gg=Xn(fb),pb=Vt({},wl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xf}),mb=Xn(pb),gb=Vt({},Lo,{propertyName:0,elapsedTime:0,pseudoElement:0}),yb=Xn(gb),xb=Vt({},Nu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),vb=Xn(xb),wb=[9,13,27,32],Zf=is&&"CompositionEvent"in window,Sa=null;is&&"documentMode"in document&&(Sa=document.documentMode);var _b=is&&"TextEvent"in window&&!Sa,Fx=is&&(!Zf||Sa&&8<Sa&&11>=Sa),yg=" ",xg=!1;function zx(t,e){switch(t){case"keyup":return wb.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ji=!1;function bb(t,e){switch(t){case"compositionend":return Bx(e);case"keypress":return e.which!==32?null:(xg=!0,yg);case"textInput":return t=e.data,t===yg&&xg?null:t;default:return null}}function Sb(t,e){if(Ji)return t==="compositionend"||!Zf&&zx(t,e)?(t=Lx(),_c=Qf=As=null,Ji=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Fx&&e.locale!=="ko"?null:e.data;default:return null}}var Cb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Cb[t.type]:e==="textarea"}function $x(t,e,n,r){xx(r),e=Hc(e,"onChange"),0<e.length&&(n=new Jf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ca=null,Ka=null;function jb(t){Xx(t,0)}function Tu(t){var e=eo(t);if(dx(e))return t}function Eb(t,e){if(t==="change")return e}var Ux=!1;if(is){var Id;if(is){var kd="oninput"in document;if(!kd){var wg=document.createElement("div");wg.setAttribute("oninput","return;"),kd=typeof wg.oninput=="function"}Id=kd}else Id=!1;Ux=Id&&(!document.documentMode||9<document.documentMode)}function _g(){Ca&&(Ca.detachEvent("onpropertychange",Wx),Ka=Ca=null)}function Wx(t){if(t.propertyName==="value"&&Tu(Ka)){var e=[];$x(e,Ka,t,Vf(t)),bx(jb,e)}}function Ib(t,e,n){t==="focusin"?(_g(),Ca=e,Ka=n,Ca.attachEvent("onpropertychange",Wx)):t==="focusout"&&_g()}function kb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Tu(Ka)}function Nb(t,e){if(t==="click")return Tu(e)}function Tb(t,e){if(t==="input"||t==="change")return Tu(e)}function Rb(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var jr=typeof Object.is=="function"?Object.is:Rb;function Ga(t,e){if(jr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ph.call(e,s)||!jr(t[s],e[s]))return!1}return!0}function bg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Sg(t,e){var n=bg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=bg(n)}}function Hx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Hx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Vx(){for(var t=window,e=Lc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Lc(t.document)}return e}function ep(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Ab(t){var e=Vx(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Hx(n.ownerDocument.documentElement,n)){if(r!==null&&ep(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Sg(n,i);var o=Sg(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Pb=is&&"documentMode"in document&&11>=document.documentMode,Xi=null,Ph=null,ja=null,Dh=!1;function Cg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Dh||Xi==null||Xi!==Lc(r)||(r=Xi,"selectionStart"in r&&ep(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ja&&Ga(ja,r)||(ja=r,r=Hc(Ph,"onSelect"),0<r.length&&(e=new Jf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Xi)))}function tc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Zi={animationend:tc("Animation","AnimationEnd"),animationiteration:tc("Animation","AnimationIteration"),animationstart:tc("Animation","AnimationStart"),transitionend:tc("Transition","TransitionEnd")},Nd={},Kx={};is&&(Kx=document.createElement("div").style,"AnimationEvent"in window||(delete Zi.animationend.animation,delete Zi.animationiteration.animation,delete Zi.animationstart.animation),"TransitionEvent"in window||delete Zi.transitionend.transition);function Ru(t){if(Nd[t])return Nd[t];if(!Zi[t])return t;var e=Zi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Kx)return Nd[t]=e[n];return t}var Gx=Ru("animationend"),qx=Ru("animationiteration"),Yx=Ru("animationstart"),Qx=Ru("transitionend"),Jx=new Map,jg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ei(t,e){Jx.set(t,e),Fi(e,[t])}for(var Td=0;Td<jg.length;Td++){var Rd=jg[Td],Db=Rd.toLowerCase(),Ob=Rd[0].toUpperCase()+Rd.slice(1);ei(Db,"on"+Ob)}ei(Gx,"onAnimationEnd");ei(qx,"onAnimationIteration");ei(Yx,"onAnimationStart");ei("dblclick","onDoubleClick");ei("focusin","onFocus");ei("focusout","onBlur");ei(Qx,"onTransitionEnd");vo("onMouseEnter",["mouseout","mouseover"]);vo("onMouseLeave",["mouseout","mouseover"]);vo("onPointerEnter",["pointerout","pointerover"]);vo("onPointerLeave",["pointerout","pointerover"]);Fi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mb=new Set("cancel close invalid load scroll toggle".split(" ").concat(wa));function Eg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,D_(r,e,void 0,t),t.currentTarget=null}function Xx(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;Eg(s,c,d),i=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,d=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;Eg(s,c,d),i=u}}}if(zc)throw t=Nh,zc=!1,Nh=null,t}function Pt(t,e){var n=e[zh];n===void 0&&(n=e[zh]=new Set);var r=t+"__bubble";n.has(r)||(Zx(e,t,2,!1),n.add(r))}function Ad(t,e,n){var r=0;e&&(r|=4),Zx(n,t,r,e)}var nc="_reactListening"+Math.random().toString(36).slice(2);function qa(t){if(!t[nc]){t[nc]=!0,ox.forEach(function(n){n!=="selectionchange"&&(Mb.has(n)||Ad(n,!1,t),Ad(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[nc]||(e[nc]=!0,Ad("selectionchange",!1,e))}}function Zx(t,e,n,r){switch(Mx(e)){case 1:var s=Q_;break;case 4:s=J_;break;default:s=Yf}n=s.bind(null,e,n,t),s=void 0,!kh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Pd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;c!==null;){if(o=gi(c),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}c=c.parentNode}}r=r.return}bx(function(){var d=i,f=Vf(n),p=[];e:{var y=Jx.get(t);if(y!==void 0){var k=Jf,w=t;switch(t){case"keypress":if(bc(n)===0)break e;case"keydown":case"keyup":k=hb;break;case"focusin":w="focus",k=Ed;break;case"focusout":w="blur",k=Ed;break;case"beforeblur":case"afterblur":k=Ed;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":k=pg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":k=eb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":k=mb;break;case Gx:case qx:case Yx:k=rb;break;case Qx:k=yb;break;case"scroll":k=X_;break;case"wheel":k=vb;break;case"copy":case"cut":case"paste":k=ib;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":k=gg}var R=(e&4)!==0,D=!R&&t==="scroll",S=R?y!==null?y+"Capture":null:y;R=[];for(var _=d,v;_!==null;){v=_;var L=v.stateNode;if(v.tag===5&&L!==null&&(v=L,S!==null&&(L=Ua(_,S),L!=null&&R.push(Ya(_,L,v)))),D)break;_=_.return}0<R.length&&(y=new k(y,w,null,n,f),p.push({event:y,listeners:R}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",k=t==="mouseout"||t==="pointerout",y&&n!==Eh&&(w=n.relatedTarget||n.fromElement)&&(gi(w)||w[os]))break e;if((k||y)&&(y=f.window===f?f:(y=f.ownerDocument)?y.defaultView||y.parentWindow:window,k?(w=n.relatedTarget||n.toElement,k=d,w=w?gi(w):null,w!==null&&(D=zi(w),w!==D||w.tag!==5&&w.tag!==6)&&(w=null)):(k=null,w=d),k!==w)){if(R=pg,L="onMouseLeave",S="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(R=gg,L="onPointerLeave",S="onPointerEnter",_="pointer"),D=k==null?y:eo(k),v=w==null?y:eo(w),y=new R(L,_+"leave",k,n,f),y.target=D,y.relatedTarget=v,L=null,gi(f)===d&&(R=new R(S,_+"enter",w,n,f),R.target=v,R.relatedTarget=D,L=R),D=L,k&&w)t:{for(R=k,S=w,_=0,v=R;v;v=Vi(v))_++;for(v=0,L=S;L;L=Vi(L))v++;for(;0<_-v;)R=Vi(R),_--;for(;0<v-_;)S=Vi(S),v--;for(;_--;){if(R===S||S!==null&&R===S.alternate)break t;R=Vi(R),S=Vi(S)}R=null}else R=null;k!==null&&Ig(p,y,k,R,!1),w!==null&&D!==null&&Ig(p,D,w,R,!0)}}e:{if(y=d?eo(d):window,k=y.nodeName&&y.nodeName.toLowerCase(),k==="select"||k==="input"&&y.type==="file")var q=Eb;else if(vg(y))if(Ux)q=Tb;else{q=kb;var se=Ib}else(k=y.nodeName)&&k.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(q=Nb);if(q&&(q=q(t,d))){$x(p,q,n,f);break e}se&&se(t,y,d),t==="focusout"&&(se=y._wrapperState)&&se.controlled&&y.type==="number"&&_h(y,"number",y.value)}switch(se=d?eo(d):window,t){case"focusin":(vg(se)||se.contentEditable==="true")&&(Xi=se,Ph=d,ja=null);break;case"focusout":ja=Ph=Xi=null;break;case"mousedown":Dh=!0;break;case"contextmenu":case"mouseup":case"dragend":Dh=!1,Cg(p,n,f);break;case"selectionchange":if(Pb)break;case"keydown":case"keyup":Cg(p,n,f)}var E;if(Zf)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Ji?zx(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(Fx&&n.locale!=="ko"&&(Ji||x!=="onCompositionStart"?x==="onCompositionEnd"&&Ji&&(E=Lx()):(As=f,Qf="value"in As?As.value:As.textContent,Ji=!0)),se=Hc(d,x),0<se.length&&(x=new mg(x,t,null,n,f),p.push({event:x,listeners:se}),E?x.data=E:(E=Bx(n),E!==null&&(x.data=E)))),(E=_b?bb(t,n):Sb(t,n))&&(d=Hc(d,"onBeforeInput"),0<d.length&&(f=new mg("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:d}),f.data=E))}Xx(p,e)})}function Ya(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Hc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ua(t,n),i!=null&&r.unshift(Ya(t,i,s)),i=Ua(t,e),i!=null&&r.push(Ya(t,i,s))),t=t.return}return r}function Vi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ig(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=Ua(n,i),u!=null&&o.unshift(Ya(n,u,c))):s||(u=Ua(n,i),u!=null&&o.push(Ya(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Lb=/\r\n?/g,Fb=/\u0000|\uFFFD/g;function kg(t){return(typeof t=="string"?t:""+t).replace(Lb,`
`).replace(Fb,"")}function rc(t,e,n){if(e=kg(e),kg(t)!==e&&n)throw Error(fe(425))}function Vc(){}var Oh=null,Mh=null;function Lh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Fh=typeof setTimeout=="function"?setTimeout:void 0,zb=typeof clearTimeout=="function"?clearTimeout:void 0,Ng=typeof Promise=="function"?Promise:void 0,Bb=typeof queueMicrotask=="function"?queueMicrotask:typeof Ng<"u"?function(t){return Ng.resolve(null).then(t).catch($b)}:Fh;function $b(t){setTimeout(function(){throw t})}function Dd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Va(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Va(e)}function Fs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Tg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Fo=Math.random().toString(36).slice(2),Fr="__reactFiber$"+Fo,Qa="__reactProps$"+Fo,os="__reactContainer$"+Fo,zh="__reactEvents$"+Fo,Ub="__reactListeners$"+Fo,Wb="__reactHandles$"+Fo;function gi(t){var e=t[Fr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[os]||n[Fr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Tg(t);t!==null;){if(n=t[Fr])return n;t=Tg(t)}return e}t=n,n=t.parentNode}return null}function _l(t){return t=t[Fr]||t[os],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function eo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(fe(33))}function Au(t){return t[Qa]||null}var Bh=[],to=-1;function ti(t){return{current:t}}function Dt(t){0>to||(t.current=Bh[to],Bh[to]=null,to--)}function Tt(t,e){to++,Bh[to]=t.current,t.current=e}var Ys={},En=ti(Ys),Bn=ti(!1),Ii=Ys;function wo(t,e){var n=t.type.contextTypes;if(!n)return Ys;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function $n(t){return t=t.childContextTypes,t!=null}function Kc(){Dt(Bn),Dt(En)}function Rg(t,e,n){if(En.current!==Ys)throw Error(fe(168));Tt(En,e),Tt(Bn,n)}function e1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(fe(108,I_(t)||"Unknown",s));return Vt({},n,r)}function Gc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ys,Ii=En.current,Tt(En,t),Tt(Bn,Bn.current),!0}function Ag(t,e,n){var r=t.stateNode;if(!r)throw Error(fe(169));n?(t=e1(t,e,Ii),r.__reactInternalMemoizedMergedChildContext=t,Dt(Bn),Dt(En),Tt(En,t)):Dt(Bn),Tt(Bn,n)}var Jr=null,Pu=!1,Od=!1;function t1(t){Jr===null?Jr=[t]:Jr.push(t)}function Hb(t){Pu=!0,t1(t)}function ni(){if(!Od&&Jr!==null){Od=!0;var t=0,e=_t;try{var n=Jr;for(_t=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Jr=null,Pu=!1}catch(s){throw Jr!==null&&(Jr=Jr.slice(t+1)),Ex(Kf,ni),s}finally{_t=e,Od=!1}}return null}var no=[],ro=0,qc=null,Yc=0,rr=[],sr=0,ki=null,Zr=1,es="";function di(t,e){no[ro++]=Yc,no[ro++]=qc,qc=t,Yc=e}function n1(t,e,n){rr[sr++]=Zr,rr[sr++]=es,rr[sr++]=ki,ki=t;var r=Zr;t=es;var s=32-br(r)-1;r&=~(1<<s),n+=1;var i=32-br(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Zr=1<<32-br(e)+s|n<<s|r,es=i+t}else Zr=1<<i|n<<s|r,es=t}function tp(t){t.return!==null&&(di(t,1),n1(t,1,0))}function np(t){for(;t===qc;)qc=no[--ro],no[ro]=null,Yc=no[--ro],no[ro]=null;for(;t===ki;)ki=rr[--sr],rr[sr]=null,es=rr[--sr],rr[sr]=null,Zr=rr[--sr],rr[sr]=null}var Yn=null,qn=null,Mt=!1,yr=null;function r1(t,e){var n=ir(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Pg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Yn=t,qn=Fs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Yn=t,qn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ki!==null?{id:Zr,overflow:es}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ir(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Yn=t,qn=null,!0):!1;default:return!1}}function $h(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Uh(t){if(Mt){var e=qn;if(e){var n=e;if(!Pg(t,e)){if($h(t))throw Error(fe(418));e=Fs(n.nextSibling);var r=Yn;e&&Pg(t,e)?r1(r,n):(t.flags=t.flags&-4097|2,Mt=!1,Yn=t)}}else{if($h(t))throw Error(fe(418));t.flags=t.flags&-4097|2,Mt=!1,Yn=t}}}function Dg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Yn=t}function sc(t){if(t!==Yn)return!1;if(!Mt)return Dg(t),Mt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Lh(t.type,t.memoizedProps)),e&&(e=qn)){if($h(t))throw s1(),Error(fe(418));for(;e;)r1(t,e),e=Fs(e.nextSibling)}if(Dg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(fe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){qn=Fs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}qn=null}}else qn=Yn?Fs(t.stateNode.nextSibling):null;return!0}function s1(){for(var t=qn;t;)t=Fs(t.nextSibling)}function _o(){qn=Yn=null,Mt=!1}function rp(t){yr===null?yr=[t]:yr.push(t)}var Vb=fs.ReactCurrentBatchConfig;function ia(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(fe(309));var r=n.stateNode}if(!r)throw Error(fe(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var c=s.refs;o===null?delete c[i]:c[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(fe(284));if(!n._owner)throw Error(fe(290,t))}return t}function ic(t,e){throw t=Object.prototype.toString.call(e),Error(fe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Og(t){var e=t._init;return e(t._payload)}function i1(t){function e(S,_){if(t){var v=S.deletions;v===null?(S.deletions=[_],S.flags|=16):v.push(_)}}function n(S,_){if(!t)return null;for(;_!==null;)e(S,_),_=_.sibling;return null}function r(S,_){for(S=new Map;_!==null;)_.key!==null?S.set(_.key,_):S.set(_.index,_),_=_.sibling;return S}function s(S,_){return S=Us(S,_),S.index=0,S.sibling=null,S}function i(S,_,v){return S.index=v,t?(v=S.alternate,v!==null?(v=v.index,v<_?(S.flags|=2,_):v):(S.flags|=2,_)):(S.flags|=1048576,_)}function o(S){return t&&S.alternate===null&&(S.flags|=2),S}function c(S,_,v,L){return _===null||_.tag!==6?(_=Ud(v,S.mode,L),_.return=S,_):(_=s(_,v),_.return=S,_)}function u(S,_,v,L){var q=v.type;return q===Qi?f(S,_,v.props.children,L,v.key):_!==null&&(_.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===ks&&Og(q)===_.type)?(L=s(_,v.props),L.ref=ia(S,_,v),L.return=S,L):(L=Nc(v.type,v.key,v.props,null,S.mode,L),L.ref=ia(S,_,v),L.return=S,L)}function d(S,_,v,L){return _===null||_.tag!==4||_.stateNode.containerInfo!==v.containerInfo||_.stateNode.implementation!==v.implementation?(_=Wd(v,S.mode,L),_.return=S,_):(_=s(_,v.children||[]),_.return=S,_)}function f(S,_,v,L,q){return _===null||_.tag!==7?(_=Si(v,S.mode,L,q),_.return=S,_):(_=s(_,v),_.return=S,_)}function p(S,_,v){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Ud(""+_,S.mode,v),_.return=S,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ql:return v=Nc(_.type,_.key,_.props,null,S.mode,v),v.ref=ia(S,null,_),v.return=S,v;case Yi:return _=Wd(_,S.mode,v),_.return=S,_;case ks:var L=_._init;return p(S,L(_._payload),v)}if(xa(_)||ea(_))return _=Si(_,S.mode,v,null),_.return=S,_;ic(S,_)}return null}function y(S,_,v,L){var q=_!==null?_.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return q!==null?null:c(S,_,""+v,L);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ql:return v.key===q?u(S,_,v,L):null;case Yi:return v.key===q?d(S,_,v,L):null;case ks:return q=v._init,y(S,_,q(v._payload),L)}if(xa(v)||ea(v))return q!==null?null:f(S,_,v,L,null);ic(S,v)}return null}function k(S,_,v,L,q){if(typeof L=="string"&&L!==""||typeof L=="number")return S=S.get(v)||null,c(_,S,""+L,q);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case ql:return S=S.get(L.key===null?v:L.key)||null,u(_,S,L,q);case Yi:return S=S.get(L.key===null?v:L.key)||null,d(_,S,L,q);case ks:var se=L._init;return k(S,_,v,se(L._payload),q)}if(xa(L)||ea(L))return S=S.get(v)||null,f(_,S,L,q,null);ic(_,L)}return null}function w(S,_,v,L){for(var q=null,se=null,E=_,x=_=0,j=null;E!==null&&x<v.length;x++){E.index>x?(j=E,E=null):j=E.sibling;var I=y(S,E,v[x],L);if(I===null){E===null&&(E=j);break}t&&E&&I.alternate===null&&e(S,E),_=i(I,_,x),se===null?q=I:se.sibling=I,se=I,E=j}if(x===v.length)return n(S,E),Mt&&di(S,x),q;if(E===null){for(;x<v.length;x++)E=p(S,v[x],L),E!==null&&(_=i(E,_,x),se===null?q=E:se.sibling=E,se=E);return Mt&&di(S,x),q}for(E=r(S,E);x<v.length;x++)j=k(E,S,x,v[x],L),j!==null&&(t&&j.alternate!==null&&E.delete(j.key===null?x:j.key),_=i(j,_,x),se===null?q=j:se.sibling=j,se=j);return t&&E.forEach(function(N){return e(S,N)}),Mt&&di(S,x),q}function R(S,_,v,L){var q=ea(v);if(typeof q!="function")throw Error(fe(150));if(v=q.call(v),v==null)throw Error(fe(151));for(var se=q=null,E=_,x=_=0,j=null,I=v.next();E!==null&&!I.done;x++,I=v.next()){E.index>x?(j=E,E=null):j=E.sibling;var N=y(S,E,I.value,L);if(N===null){E===null&&(E=j);break}t&&E&&N.alternate===null&&e(S,E),_=i(N,_,x),se===null?q=N:se.sibling=N,se=N,E=j}if(I.done)return n(S,E),Mt&&di(S,x),q;if(E===null){for(;!I.done;x++,I=v.next())I=p(S,I.value,L),I!==null&&(_=i(I,_,x),se===null?q=I:se.sibling=I,se=I);return Mt&&di(S,x),q}for(E=r(S,E);!I.done;x++,I=v.next())I=k(E,S,x,I.value,L),I!==null&&(t&&I.alternate!==null&&E.delete(I.key===null?x:I.key),_=i(I,_,x),se===null?q=I:se.sibling=I,se=I);return t&&E.forEach(function(O){return e(S,O)}),Mt&&di(S,x),q}function D(S,_,v,L){if(typeof v=="object"&&v!==null&&v.type===Qi&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case ql:e:{for(var q=v.key,se=_;se!==null;){if(se.key===q){if(q=v.type,q===Qi){if(se.tag===7){n(S,se.sibling),_=s(se,v.props.children),_.return=S,S=_;break e}}else if(se.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===ks&&Og(q)===se.type){n(S,se.sibling),_=s(se,v.props),_.ref=ia(S,se,v),_.return=S,S=_;break e}n(S,se);break}else e(S,se);se=se.sibling}v.type===Qi?(_=Si(v.props.children,S.mode,L,v.key),_.return=S,S=_):(L=Nc(v.type,v.key,v.props,null,S.mode,L),L.ref=ia(S,_,v),L.return=S,S=L)}return o(S);case Yi:e:{for(se=v.key;_!==null;){if(_.key===se)if(_.tag===4&&_.stateNode.containerInfo===v.containerInfo&&_.stateNode.implementation===v.implementation){n(S,_.sibling),_=s(_,v.children||[]),_.return=S,S=_;break e}else{n(S,_);break}else e(S,_);_=_.sibling}_=Wd(v,S.mode,L),_.return=S,S=_}return o(S);case ks:return se=v._init,D(S,_,se(v._payload),L)}if(xa(v))return w(S,_,v,L);if(ea(v))return R(S,_,v,L);ic(S,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,_!==null&&_.tag===6?(n(S,_.sibling),_=s(_,v),_.return=S,S=_):(n(S,_),_=Ud(v,S.mode,L),_.return=S,S=_),o(S)):n(S,_)}return D}var bo=i1(!0),o1=i1(!1),Qc=ti(null),Jc=null,so=null,sp=null;function ip(){sp=so=Jc=null}function op(t){var e=Qc.current;Dt(Qc),t._currentValue=e}function Wh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function fo(t,e){Jc=t,sp=so=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Fn=!0),t.firstContext=null)}function cr(t){var e=t._currentValue;if(sp!==t)if(t={context:t,memoizedValue:e,next:null},so===null){if(Jc===null)throw Error(fe(308));so=t,Jc.dependencies={lanes:0,firstContext:t}}else so=so.next=t;return e}var yi=null;function ap(t){yi===null?yi=[t]:yi.push(t)}function a1(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,ap(e)):(n.next=s.next,s.next=n),e.interleaved=n,as(t,r)}function as(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ns=!1;function lp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function l1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ns(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function zs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,pt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,as(t,n)}return s=r.interleaved,s===null?(e.next=e,ap(r)):(e.next=s.next,s.next=e),r.interleaved=e,as(t,n)}function Sc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Gf(t,n)}}function Mg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Xc(t,e,n,r){var s=t.updateQueue;Ns=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==o&&(c===null?f.firstBaseUpdate=d:c.next=d,f.lastBaseUpdate=u))}if(i!==null){var p=s.baseState;o=0,f=d=u=null,c=i;do{var y=c.lane,k=c.eventTime;if((r&y)===y){f!==null&&(f=f.next={eventTime:k,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var w=t,R=c;switch(y=e,k=n,R.tag){case 1:if(w=R.payload,typeof w=="function"){p=w.call(k,p,y);break e}p=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=R.payload,y=typeof w=="function"?w.call(k,p,y):w,y==null)break e;p=Vt({},p,y);break e;case 2:Ns=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,y=s.effects,y===null?s.effects=[c]:y.push(c))}else k={eventTime:k,lane:y,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(d=f=k,u=p):f=f.next=k,o|=y;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;y=c,c=y.next,y.next=null,s.lastBaseUpdate=y,s.shared.pending=null}}while(!0);if(f===null&&(u=p),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ti|=o,t.lanes=o,t.memoizedState=p}}function Lg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(fe(191,s));s.call(r)}}}var bl={},$r=ti(bl),Ja=ti(bl),Xa=ti(bl);function xi(t){if(t===bl)throw Error(fe(174));return t}function cp(t,e){switch(Tt(Xa,e),Tt(Ja,t),Tt($r,bl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Sh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Sh(e,t)}Dt($r),Tt($r,e)}function So(){Dt($r),Dt(Ja),Dt(Xa)}function c1(t){xi(Xa.current);var e=xi($r.current),n=Sh(e,t.type);e!==n&&(Tt(Ja,t),Tt($r,n))}function up(t){Ja.current===t&&(Dt($r),Dt(Ja))}var $t=ti(0);function Zc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Md=[];function dp(){for(var t=0;t<Md.length;t++)Md[t]._workInProgressVersionPrimary=null;Md.length=0}var Cc=fs.ReactCurrentDispatcher,Ld=fs.ReactCurrentBatchConfig,Ni=0,Wt=null,sn=null,dn=null,eu=!1,Ea=!1,Za=0,Kb=0;function bn(){throw Error(fe(321))}function hp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!jr(t[n],e[n]))return!1;return!0}function fp(t,e,n,r,s,i){if(Ni=i,Wt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Cc.current=t===null||t.memoizedState===null?Qb:Jb,t=n(r,s),Ea){i=0;do{if(Ea=!1,Za=0,25<=i)throw Error(fe(301));i+=1,dn=sn=null,e.updateQueue=null,Cc.current=Xb,t=n(r,s)}while(Ea)}if(Cc.current=tu,e=sn!==null&&sn.next!==null,Ni=0,dn=sn=Wt=null,eu=!1,e)throw Error(fe(300));return t}function pp(){var t=Za!==0;return Za=0,t}function Dr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dn===null?Wt.memoizedState=dn=t:dn=dn.next=t,dn}function ur(){if(sn===null){var t=Wt.alternate;t=t!==null?t.memoizedState:null}else t=sn.next;var e=dn===null?Wt.memoizedState:dn.next;if(e!==null)dn=e,sn=t;else{if(t===null)throw Error(fe(310));sn=t,t={memoizedState:sn.memoizedState,baseState:sn.baseState,baseQueue:sn.baseQueue,queue:sn.queue,next:null},dn===null?Wt.memoizedState=dn=t:dn=dn.next=t}return dn}function el(t,e){return typeof e=="function"?e(t):e}function Fd(t){var e=ur(),n=e.queue;if(n===null)throw Error(fe(311));n.lastRenderedReducer=t;var r=sn,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=o=null,u=null,d=i;do{var f=d.lane;if((Ni&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=p,o=r):u=u.next=p,Wt.lanes|=f,Ti|=f}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=c,jr(r,e.memoizedState)||(Fn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Wt.lanes|=i,Ti|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function zd(t){var e=ur(),n=e.queue;if(n===null)throw Error(fe(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);jr(i,e.memoizedState)||(Fn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function u1(){}function d1(t,e){var n=Wt,r=ur(),s=e(),i=!jr(r.memoizedState,s);if(i&&(r.memoizedState=s,Fn=!0),r=r.queue,mp(p1.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||dn!==null&&dn.memoizedState.tag&1){if(n.flags|=2048,tl(9,f1.bind(null,n,r,s,e),void 0,null),fn===null)throw Error(fe(349));Ni&30||h1(n,e,s)}return s}function h1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Wt.updateQueue,e===null?(e={lastEffect:null,stores:null},Wt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function f1(t,e,n,r){e.value=n,e.getSnapshot=r,m1(e)&&g1(t)}function p1(t,e,n){return n(function(){m1(e)&&g1(t)})}function m1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!jr(t,n)}catch{return!0}}function g1(t){var e=as(t,1);e!==null&&Sr(e,t,1,-1)}function Fg(t){var e=Dr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:el,lastRenderedState:t},e.queue=t,t=t.dispatch=Yb.bind(null,Wt,t),[e.memoizedState,t]}function tl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Wt.updateQueue,e===null?(e={lastEffect:null,stores:null},Wt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function y1(){return ur().memoizedState}function jc(t,e,n,r){var s=Dr();Wt.flags|=t,s.memoizedState=tl(1|e,n,void 0,r===void 0?null:r)}function Du(t,e,n,r){var s=ur();r=r===void 0?null:r;var i=void 0;if(sn!==null){var o=sn.memoizedState;if(i=o.destroy,r!==null&&hp(r,o.deps)){s.memoizedState=tl(e,n,i,r);return}}Wt.flags|=t,s.memoizedState=tl(1|e,n,i,r)}function zg(t,e){return jc(8390656,8,t,e)}function mp(t,e){return Du(2048,8,t,e)}function x1(t,e){return Du(4,2,t,e)}function v1(t,e){return Du(4,4,t,e)}function w1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function _1(t,e,n){return n=n!=null?n.concat([t]):null,Du(4,4,w1.bind(null,e,t),n)}function gp(){}function b1(t,e){var n=ur();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&hp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function S1(t,e){var n=ur();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&hp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function C1(t,e,n){return Ni&21?(jr(n,e)||(n=Nx(),Wt.lanes|=n,Ti|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Fn=!0),t.memoizedState=n)}function Gb(t,e){var n=_t;_t=n!==0&&4>n?n:4,t(!0);var r=Ld.transition;Ld.transition={};try{t(!1),e()}finally{_t=n,Ld.transition=r}}function j1(){return ur().memoizedState}function qb(t,e,n){var r=$s(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},E1(t))I1(e,n);else if(n=a1(t,e,n,r),n!==null){var s=Tn();Sr(n,t,r,s),k1(n,e,r)}}function Yb(t,e,n){var r=$s(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(E1(t))I1(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,c=i(o,n);if(s.hasEagerState=!0,s.eagerState=c,jr(c,o)){var u=e.interleaved;u===null?(s.next=s,ap(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=a1(t,e,s,r),n!==null&&(s=Tn(),Sr(n,t,r,s),k1(n,e,r))}}function E1(t){var e=t.alternate;return t===Wt||e!==null&&e===Wt}function I1(t,e){Ea=eu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function k1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Gf(t,n)}}var tu={readContext:cr,useCallback:bn,useContext:bn,useEffect:bn,useImperativeHandle:bn,useInsertionEffect:bn,useLayoutEffect:bn,useMemo:bn,useReducer:bn,useRef:bn,useState:bn,useDebugValue:bn,useDeferredValue:bn,useTransition:bn,useMutableSource:bn,useSyncExternalStore:bn,useId:bn,unstable_isNewReconciler:!1},Qb={readContext:cr,useCallback:function(t,e){return Dr().memoizedState=[t,e===void 0?null:e],t},useContext:cr,useEffect:zg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,jc(4194308,4,w1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return jc(4194308,4,t,e)},useInsertionEffect:function(t,e){return jc(4,2,t,e)},useMemo:function(t,e){var n=Dr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Dr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=qb.bind(null,Wt,t),[r.memoizedState,t]},useRef:function(t){var e=Dr();return t={current:t},e.memoizedState=t},useState:Fg,useDebugValue:gp,useDeferredValue:function(t){return Dr().memoizedState=t},useTransition:function(){var t=Fg(!1),e=t[0];return t=Gb.bind(null,t[1]),Dr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Wt,s=Dr();if(Mt){if(n===void 0)throw Error(fe(407));n=n()}else{if(n=e(),fn===null)throw Error(fe(349));Ni&30||h1(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,zg(p1.bind(null,r,i,t),[t]),r.flags|=2048,tl(9,f1.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Dr(),e=fn.identifierPrefix;if(Mt){var n=es,r=Zr;n=(r&~(1<<32-br(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Za++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Kb++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Jb={readContext:cr,useCallback:b1,useContext:cr,useEffect:mp,useImperativeHandle:_1,useInsertionEffect:x1,useLayoutEffect:v1,useMemo:S1,useReducer:Fd,useRef:y1,useState:function(){return Fd(el)},useDebugValue:gp,useDeferredValue:function(t){var e=ur();return C1(e,sn.memoizedState,t)},useTransition:function(){var t=Fd(el)[0],e=ur().memoizedState;return[t,e]},useMutableSource:u1,useSyncExternalStore:d1,useId:j1,unstable_isNewReconciler:!1},Xb={readContext:cr,useCallback:b1,useContext:cr,useEffect:mp,useImperativeHandle:_1,useInsertionEffect:x1,useLayoutEffect:v1,useMemo:S1,useReducer:zd,useRef:y1,useState:function(){return zd(el)},useDebugValue:gp,useDeferredValue:function(t){var e=ur();return sn===null?e.memoizedState=t:C1(e,sn.memoizedState,t)},useTransition:function(){var t=zd(el)[0],e=ur().memoizedState;return[t,e]},useMutableSource:u1,useSyncExternalStore:d1,useId:j1,unstable_isNewReconciler:!1};function mr(t,e){if(t&&t.defaultProps){e=Vt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Hh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Vt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ou={isMounted:function(t){return(t=t._reactInternals)?zi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Tn(),s=$s(t),i=ns(r,s);i.payload=e,n!=null&&(i.callback=n),e=zs(t,i,s),e!==null&&(Sr(e,t,s,r),Sc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Tn(),s=$s(t),i=ns(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=zs(t,i,s),e!==null&&(Sr(e,t,s,r),Sc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Tn(),r=$s(t),s=ns(n,r);s.tag=2,e!=null&&(s.callback=e),e=zs(t,s,r),e!==null&&(Sr(e,t,r,n),Sc(e,t,r))}};function Bg(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ga(n,r)||!Ga(s,i):!0}function N1(t,e,n){var r=!1,s=Ys,i=e.contextType;return typeof i=="object"&&i!==null?i=cr(i):(s=$n(e)?Ii:En.current,r=e.contextTypes,i=(r=r!=null)?wo(t,s):Ys),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ou,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function $g(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ou.enqueueReplaceState(e,e.state,null)}function Vh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},lp(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=cr(i):(i=$n(e)?Ii:En.current,s.context=wo(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Hh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Ou.enqueueReplaceState(s,s.state,null),Xc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Co(t,e){try{var n="",r=e;do n+=E_(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Bd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Kh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Zb=typeof WeakMap=="function"?WeakMap:Map;function T1(t,e,n){n=ns(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ru||(ru=!0,nf=r),Kh(t,e)},n}function R1(t,e,n){n=ns(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Kh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Kh(t,e),typeof r!="function"&&(Bs===null?Bs=new Set([this]):Bs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Ug(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Zb;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=fS.bind(null,t,e,n),e.then(t,t))}function Wg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Hg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ns(-1,1),e.tag=2,zs(n,e,1))),n.lanes|=1),t)}var eS=fs.ReactCurrentOwner,Fn=!1;function In(t,e,n,r){e.child=t===null?o1(e,null,n,r):bo(e,t.child,n,r)}function Vg(t,e,n,r,s){n=n.render;var i=e.ref;return fo(e,s),r=fp(t,e,n,r,i,s),n=pp(),t!==null&&!Fn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ls(t,e,s)):(Mt&&n&&tp(e),e.flags|=1,In(t,e,r,s),e.child)}function Kg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Cp(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,A1(t,e,i,r,s)):(t=Nc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ga,n(o,r)&&t.ref===e.ref)return ls(t,e,s)}return e.flags|=1,t=Us(i,r),t.ref=e.ref,t.return=e,e.child=t}function A1(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ga(i,r)&&t.ref===e.ref)if(Fn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Fn=!0);else return e.lanes=t.lanes,ls(t,e,s)}return Gh(t,e,n,r,s)}function P1(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tt(oo,Gn),Gn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Tt(oo,Gn),Gn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Tt(oo,Gn),Gn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Tt(oo,Gn),Gn|=r;return In(t,e,s,n),e.child}function D1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Gh(t,e,n,r,s){var i=$n(n)?Ii:En.current;return i=wo(e,i),fo(e,s),n=fp(t,e,n,r,i,s),r=pp(),t!==null&&!Fn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ls(t,e,s)):(Mt&&r&&tp(e),e.flags|=1,In(t,e,n,s),e.child)}function Gg(t,e,n,r,s){if($n(n)){var i=!0;Gc(e)}else i=!1;if(fo(e,s),e.stateNode===null)Ec(t,e),N1(e,n,r),Vh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=cr(d):(d=$n(n)?Ii:En.current,d=wo(e,d));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==d)&&$g(e,o,r,d),Ns=!1;var y=e.memoizedState;o.state=y,Xc(e,r,o,s),u=e.memoizedState,c!==r||y!==u||Bn.current||Ns?(typeof f=="function"&&(Hh(e,n,f,r),u=e.memoizedState),(c=Ns||Bg(e,n,c,r,y,u,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,l1(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:mr(e.type,c),o.props=d,p=e.pendingProps,y=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=cr(u):(u=$n(n)?Ii:En.current,u=wo(e,u));var k=n.getDerivedStateFromProps;(f=typeof k=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==p||y!==u)&&$g(e,o,r,u),Ns=!1,y=e.memoizedState,o.state=y,Xc(e,r,o,s);var w=e.memoizedState;c!==p||y!==w||Bn.current||Ns?(typeof k=="function"&&(Hh(e,n,k,r),w=e.memoizedState),(d=Ns||Bg(e,n,d,r,y,w,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),r=!1)}return qh(t,e,n,r,i,s)}function qh(t,e,n,r,s,i){D1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Ag(e,n,!1),ls(t,e,i);r=e.stateNode,eS.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=bo(e,t.child,null,i),e.child=bo(e,null,c,i)):In(t,e,c,i),e.memoizedState=r.state,s&&Ag(e,n,!0),e.child}function O1(t){var e=t.stateNode;e.pendingContext?Rg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Rg(t,e.context,!1),cp(t,e.containerInfo)}function qg(t,e,n,r,s){return _o(),rp(s),e.flags|=256,In(t,e,n,r),e.child}var Yh={dehydrated:null,treeContext:null,retryLane:0};function Qh(t){return{baseLanes:t,cachePool:null,transitions:null}}function M1(t,e,n){var r=e.pendingProps,s=$t.current,i=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Tt($t,s&1),t===null)return Uh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Fu(o,r,0,null),t=Si(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Qh(n),e.memoizedState=Yh,t):yp(e,o));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return tS(t,e,o,r,c,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Us(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=Us(c,i):(i=Si(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Qh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Yh,r}return i=t.child,t=i.sibling,r=Us(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function yp(t,e){return e=Fu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function oc(t,e,n,r){return r!==null&&rp(r),bo(e,t.child,null,n),t=yp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function tS(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Bd(Error(fe(422))),oc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Fu({mode:"visible",children:r.children},s,0,null),i=Si(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&bo(e,t.child,null,o),e.child.memoizedState=Qh(o),e.memoizedState=Yh,i);if(!(e.mode&1))return oc(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(fe(419)),r=Bd(i,r,void 0),oc(t,e,o,r)}if(c=(o&t.childLanes)!==0,Fn||c){if(r=fn,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,as(t,s),Sr(r,t,s,-1))}return Sp(),r=Bd(Error(fe(421))),oc(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=pS.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,qn=Fs(s.nextSibling),Yn=e,Mt=!0,yr=null,t!==null&&(rr[sr++]=Zr,rr[sr++]=es,rr[sr++]=ki,Zr=t.id,es=t.overflow,ki=e),e=yp(e,r.children),e.flags|=4096,e)}function Yg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Wh(t.return,e,n)}function $d(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function L1(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(In(t,e,r.children,n),r=$t.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Yg(t,n,e);else if(t.tag===19)Yg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Tt($t,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Zc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),$d(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Zc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}$d(e,!0,n,null,i);break;case"together":$d(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ec(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ls(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ti|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(fe(153));if(e.child!==null){for(t=e.child,n=Us(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Us(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function nS(t,e,n){switch(e.tag){case 3:O1(e),_o();break;case 5:c1(e);break;case 1:$n(e.type)&&Gc(e);break;case 4:cp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Tt(Qc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Tt($t,$t.current&1),e.flags|=128,null):n&e.child.childLanes?M1(t,e,n):(Tt($t,$t.current&1),t=ls(t,e,n),t!==null?t.sibling:null);Tt($t,$t.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return L1(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Tt($t,$t.current),r)break;return null;case 22:case 23:return e.lanes=0,P1(t,e,n)}return ls(t,e,n)}var F1,Jh,z1,B1;F1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Jh=function(){};z1=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,xi($r.current);var i=null;switch(n){case"input":s=vh(t,s),r=vh(t,r),i=[];break;case"select":s=Vt({},s,{value:void 0}),r=Vt({},r,{value:void 0}),i=[];break;case"textarea":s=bh(t,s),r=bh(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Vc)}Ch(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ba.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ba.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Pt("scroll",t),i||c===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};B1=function(t,e,n,r){n!==r&&(e.flags|=4)};function oa(t,e){if(!Mt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Sn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function rS(t,e,n){var r=e.pendingProps;switch(np(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Sn(e),null;case 1:return $n(e.type)&&Kc(),Sn(e),null;case 3:return r=e.stateNode,So(),Dt(Bn),Dt(En),dp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(sc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,yr!==null&&(of(yr),yr=null))),Jh(t,e),Sn(e),null;case 5:up(e);var s=xi(Xa.current);if(n=e.type,t!==null&&e.stateNode!=null)z1(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(fe(166));return Sn(e),null}if(t=xi($r.current),sc(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Fr]=e,r[Qa]=i,t=(e.mode&1)!==0,n){case"dialog":Pt("cancel",r),Pt("close",r);break;case"iframe":case"object":case"embed":Pt("load",r);break;case"video":case"audio":for(s=0;s<wa.length;s++)Pt(wa[s],r);break;case"source":Pt("error",r);break;case"img":case"image":case"link":Pt("error",r),Pt("load",r);break;case"details":Pt("toggle",r);break;case"input":sg(r,i),Pt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Pt("invalid",r);break;case"textarea":og(r,i),Pt("invalid",r)}Ch(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&rc(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&rc(r.textContent,c,t),s=["children",""+c]):Ba.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&Pt("scroll",r)}switch(n){case"input":Yl(r),ig(r,i,!0);break;case"textarea":Yl(r),ag(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Vc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=px(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Fr]=e,t[Qa]=r,F1(t,e,!1,!1),e.stateNode=t;e:{switch(o=jh(n,r),n){case"dialog":Pt("cancel",t),Pt("close",t),s=r;break;case"iframe":case"object":case"embed":Pt("load",t),s=r;break;case"video":case"audio":for(s=0;s<wa.length;s++)Pt(wa[s],t);s=r;break;case"source":Pt("error",t),s=r;break;case"img":case"image":case"link":Pt("error",t),Pt("load",t),s=r;break;case"details":Pt("toggle",t),s=r;break;case"input":sg(t,r),s=vh(t,r),Pt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Vt({},r,{value:void 0}),Pt("invalid",t);break;case"textarea":og(t,r),s=bh(t,r),Pt("invalid",t);break;default:s=r}Ch(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?yx(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&mx(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&$a(t,u):typeof u=="number"&&$a(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ba.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Pt("scroll",t):u!=null&&$f(t,i,u,o))}switch(n){case"input":Yl(t),ig(t,r,!1);break;case"textarea":Yl(t),ag(t);break;case"option":r.value!=null&&t.setAttribute("value",""+qs(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?lo(t,!!r.multiple,i,!1):r.defaultValue!=null&&lo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Vc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Sn(e),null;case 6:if(t&&e.stateNode!=null)B1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(fe(166));if(n=xi(Xa.current),xi($r.current),sc(e)){if(r=e.stateNode,n=e.memoizedProps,r[Fr]=e,(i=r.nodeValue!==n)&&(t=Yn,t!==null))switch(t.tag){case 3:rc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&rc(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Fr]=e,e.stateNode=r}return Sn(e),null;case 13:if(Dt($t),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Mt&&qn!==null&&e.mode&1&&!(e.flags&128))s1(),_o(),e.flags|=98560,i=!1;else if(i=sc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(fe(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(fe(317));i[Fr]=e}else _o(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Sn(e),i=!1}else yr!==null&&(of(yr),yr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||$t.current&1?ln===0&&(ln=3):Sp())),e.updateQueue!==null&&(e.flags|=4),Sn(e),null);case 4:return So(),Jh(t,e),t===null&&qa(e.stateNode.containerInfo),Sn(e),null;case 10:return op(e.type._context),Sn(e),null;case 17:return $n(e.type)&&Kc(),Sn(e),null;case 19:if(Dt($t),i=e.memoizedState,i===null)return Sn(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)oa(i,!1);else{if(ln!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Zc(t),o!==null){for(e.flags|=128,oa(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Tt($t,$t.current&1|2),e.child}t=t.sibling}i.tail!==null&&Jt()>jo&&(e.flags|=128,r=!0,oa(i,!1),e.lanes=4194304)}else{if(!r)if(t=Zc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),oa(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Mt)return Sn(e),null}else 2*Jt()-i.renderingStartTime>jo&&n!==1073741824&&(e.flags|=128,r=!0,oa(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Jt(),e.sibling=null,n=$t.current,Tt($t,r?n&1|2:n&1),e):(Sn(e),null);case 22:case 23:return bp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Gn&1073741824&&(Sn(e),e.subtreeFlags&6&&(e.flags|=8192)):Sn(e),null;case 24:return null;case 25:return null}throw Error(fe(156,e.tag))}function sS(t,e){switch(np(e),e.tag){case 1:return $n(e.type)&&Kc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return So(),Dt(Bn),Dt(En),dp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return up(e),null;case 13:if(Dt($t),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(fe(340));_o()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Dt($t),null;case 4:return So(),null;case 10:return op(e.type._context),null;case 22:case 23:return bp(),null;case 24:return null;default:return null}}var ac=!1,Cn=!1,iS=typeof WeakSet=="function"?WeakSet:Set,Re=null;function io(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Gt(t,e,r)}else n.current=null}function Xh(t,e,n){try{n()}catch(r){Gt(t,e,r)}}var Qg=!1;function oS(t,e){if(Oh=Uc,t=Vx(),ep(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,d=0,f=0,p=t,y=null;t:for(;;){for(var k;p!==n||s!==0&&p.nodeType!==3||(c=o+s),p!==i||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(k=p.firstChild)!==null;)y=p,p=k;for(;;){if(p===t)break t;if(y===n&&++d===s&&(c=o),y===i&&++f===r&&(u=o),(k=p.nextSibling)!==null)break;p=y,y=p.parentNode}p=k}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Mh={focusedElem:t,selectionRange:n},Uc=!1,Re=e;Re!==null;)if(e=Re,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Re=t;else for(;Re!==null;){e=Re;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var R=w.memoizedProps,D=w.memoizedState,S=e.stateNode,_=S.getSnapshotBeforeUpdate(e.elementType===e.type?R:mr(e.type,R),D);S.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(fe(163))}}catch(L){Gt(e,e.return,L)}if(t=e.sibling,t!==null){t.return=e.return,Re=t;break}Re=e.return}return w=Qg,Qg=!1,w}function Ia(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Xh(e,n,i)}s=s.next}while(s!==r)}}function Mu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Zh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function $1(t){var e=t.alternate;e!==null&&(t.alternate=null,$1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Fr],delete e[Qa],delete e[zh],delete e[Ub],delete e[Wb])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function U1(t){return t.tag===5||t.tag===3||t.tag===4}function Jg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||U1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ef(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Vc));else if(r!==4&&(t=t.child,t!==null))for(ef(t,e,n),t=t.sibling;t!==null;)ef(t,e,n),t=t.sibling}function tf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(tf(t,e,n),t=t.sibling;t!==null;)tf(t,e,n),t=t.sibling}var gn=null,gr=!1;function Es(t,e,n){for(n=n.child;n!==null;)W1(t,e,n),n=n.sibling}function W1(t,e,n){if(Br&&typeof Br.onCommitFiberUnmount=="function")try{Br.onCommitFiberUnmount(ku,n)}catch{}switch(n.tag){case 5:Cn||io(n,e);case 6:var r=gn,s=gr;gn=null,Es(t,e,n),gn=r,gr=s,gn!==null&&(gr?(t=gn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):gn.removeChild(n.stateNode));break;case 18:gn!==null&&(gr?(t=gn,n=n.stateNode,t.nodeType===8?Dd(t.parentNode,n):t.nodeType===1&&Dd(t,n),Va(t)):Dd(gn,n.stateNode));break;case 4:r=gn,s=gr,gn=n.stateNode.containerInfo,gr=!0,Es(t,e,n),gn=r,gr=s;break;case 0:case 11:case 14:case 15:if(!Cn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Xh(n,e,o),s=s.next}while(s!==r)}Es(t,e,n);break;case 1:if(!Cn&&(io(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Gt(n,e,c)}Es(t,e,n);break;case 21:Es(t,e,n);break;case 22:n.mode&1?(Cn=(r=Cn)||n.memoizedState!==null,Es(t,e,n),Cn=r):Es(t,e,n);break;default:Es(t,e,n)}}function Xg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new iS),e.forEach(function(r){var s=mS.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function pr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:gn=c.stateNode,gr=!1;break e;case 3:gn=c.stateNode.containerInfo,gr=!0;break e;case 4:gn=c.stateNode.containerInfo,gr=!0;break e}c=c.return}if(gn===null)throw Error(fe(160));W1(i,o,s),gn=null,gr=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Gt(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)H1(e,t),e=e.sibling}function H1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(pr(e,t),Ar(t),r&4){try{Ia(3,t,t.return),Mu(3,t)}catch(R){Gt(t,t.return,R)}try{Ia(5,t,t.return)}catch(R){Gt(t,t.return,R)}}break;case 1:pr(e,t),Ar(t),r&512&&n!==null&&io(n,n.return);break;case 5:if(pr(e,t),Ar(t),r&512&&n!==null&&io(n,n.return),t.flags&32){var s=t.stateNode;try{$a(s,"")}catch(R){Gt(t,t.return,R)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&hx(s,i),jh(c,o);var d=jh(c,i);for(o=0;o<u.length;o+=2){var f=u[o],p=u[o+1];f==="style"?yx(s,p):f==="dangerouslySetInnerHTML"?mx(s,p):f==="children"?$a(s,p):$f(s,f,p,d)}switch(c){case"input":wh(s,i);break;case"textarea":fx(s,i);break;case"select":var y=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var k=i.value;k!=null?lo(s,!!i.multiple,k,!1):y!==!!i.multiple&&(i.defaultValue!=null?lo(s,!!i.multiple,i.defaultValue,!0):lo(s,!!i.multiple,i.multiple?[]:"",!1))}s[Qa]=i}catch(R){Gt(t,t.return,R)}}break;case 6:if(pr(e,t),Ar(t),r&4){if(t.stateNode===null)throw Error(fe(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(R){Gt(t,t.return,R)}}break;case 3:if(pr(e,t),Ar(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Va(e.containerInfo)}catch(R){Gt(t,t.return,R)}break;case 4:pr(e,t),Ar(t);break;case 13:pr(e,t),Ar(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(wp=Jt())),r&4&&Xg(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Cn=(d=Cn)||f,pr(e,t),Cn=d):pr(e,t),Ar(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(Re=t,f=t.child;f!==null;){for(p=Re=f;Re!==null;){switch(y=Re,k=y.child,y.tag){case 0:case 11:case 14:case 15:Ia(4,y,y.return);break;case 1:io(y,y.return);var w=y.stateNode;if(typeof w.componentWillUnmount=="function"){r=y,n=y.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(R){Gt(r,n,R)}}break;case 5:io(y,y.return);break;case 22:if(y.memoizedState!==null){e0(p);continue}}k!==null?(k.return=y,Re=k):e0(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{s=p.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=gx("display",o))}catch(R){Gt(t,t.return,R)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(R){Gt(t,t.return,R)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:pr(e,t),Ar(t),r&4&&Xg(t);break;case 21:break;default:pr(e,t),Ar(t)}}function Ar(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(U1(n)){var r=n;break e}n=n.return}throw Error(fe(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&($a(s,""),r.flags&=-33);var i=Jg(t);tf(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,c=Jg(t);ef(t,c,o);break;default:throw Error(fe(161))}}catch(u){Gt(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function aS(t,e,n){Re=t,V1(t)}function V1(t,e,n){for(var r=(t.mode&1)!==0;Re!==null;){var s=Re,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||ac;if(!o){var c=s.alternate,u=c!==null&&c.memoizedState!==null||Cn;c=ac;var d=Cn;if(ac=o,(Cn=u)&&!d)for(Re=s;Re!==null;)o=Re,u=o.child,o.tag===22&&o.memoizedState!==null?t0(s):u!==null?(u.return=o,Re=u):t0(s);for(;i!==null;)Re=i,V1(i),i=i.sibling;Re=s,ac=c,Cn=d}Zg(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Re=i):Zg(t)}}function Zg(t){for(;Re!==null;){var e=Re;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Cn||Mu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Cn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:mr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Lg(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Lg(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&Va(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(fe(163))}Cn||e.flags&512&&Zh(e)}catch(y){Gt(e,e.return,y)}}if(e===t){Re=null;break}if(n=e.sibling,n!==null){n.return=e.return,Re=n;break}Re=e.return}}function e0(t){for(;Re!==null;){var e=Re;if(e===t){Re=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Re=n;break}Re=e.return}}function t0(t){for(;Re!==null;){var e=Re;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Mu(4,e)}catch(u){Gt(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Gt(e,s,u)}}var i=e.return;try{Zh(e)}catch(u){Gt(e,i,u)}break;case 5:var o=e.return;try{Zh(e)}catch(u){Gt(e,o,u)}}}catch(u){Gt(e,e.return,u)}if(e===t){Re=null;break}var c=e.sibling;if(c!==null){c.return=e.return,Re=c;break}Re=e.return}}var lS=Math.ceil,nu=fs.ReactCurrentDispatcher,xp=fs.ReactCurrentOwner,ar=fs.ReactCurrentBatchConfig,pt=0,fn=null,en=null,xn=0,Gn=0,oo=ti(0),ln=0,nl=null,Ti=0,Lu=0,vp=0,ka=null,Ln=null,wp=0,jo=1/0,Qr=null,ru=!1,nf=null,Bs=null,lc=!1,Ps=null,su=0,Na=0,rf=null,Ic=-1,kc=0;function Tn(){return pt&6?Jt():Ic!==-1?Ic:Ic=Jt()}function $s(t){return t.mode&1?pt&2&&xn!==0?xn&-xn:Vb.transition!==null?(kc===0&&(kc=Nx()),kc):(t=_t,t!==0||(t=window.event,t=t===void 0?16:Mx(t.type)),t):1}function Sr(t,e,n,r){if(50<Na)throw Na=0,rf=null,Error(fe(185));vl(t,n,r),(!(pt&2)||t!==fn)&&(t===fn&&(!(pt&2)&&(Lu|=n),ln===4&&Rs(t,xn)),Un(t,r),n===1&&pt===0&&!(e.mode&1)&&(jo=Jt()+500,Pu&&ni()))}function Un(t,e){var n=t.callbackNode;V_(t,e);var r=$c(t,t===fn?xn:0);if(r===0)n!==null&&ug(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ug(n),e===1)t.tag===0?Hb(n0.bind(null,t)):t1(n0.bind(null,t)),Bb(function(){!(pt&6)&&ni()}),n=null;else{switch(Tx(r)){case 1:n=Kf;break;case 4:n=Ix;break;case 16:n=Bc;break;case 536870912:n=kx;break;default:n=Bc}n=Z1(n,K1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function K1(t,e){if(Ic=-1,kc=0,pt&6)throw Error(fe(327));var n=t.callbackNode;if(po()&&t.callbackNode!==n)return null;var r=$c(t,t===fn?xn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=iu(t,r);else{e=r;var s=pt;pt|=2;var i=q1();(fn!==t||xn!==e)&&(Qr=null,jo=Jt()+500,bi(t,e));do try{dS();break}catch(c){G1(t,c)}while(!0);ip(),nu.current=i,pt=s,en!==null?e=0:(fn=null,xn=0,e=ln)}if(e!==0){if(e===2&&(s=Th(t),s!==0&&(r=s,e=sf(t,s))),e===1)throw n=nl,bi(t,0),Rs(t,r),Un(t,Jt()),n;if(e===6)Rs(t,r);else{if(s=t.current.alternate,!(r&30)&&!cS(s)&&(e=iu(t,r),e===2&&(i=Th(t),i!==0&&(r=i,e=sf(t,i))),e===1))throw n=nl,bi(t,0),Rs(t,r),Un(t,Jt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(fe(345));case 2:hi(t,Ln,Qr);break;case 3:if(Rs(t,r),(r&130023424)===r&&(e=wp+500-Jt(),10<e)){if($c(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Tn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Fh(hi.bind(null,t,Ln,Qr),e);break}hi(t,Ln,Qr);break;case 4:if(Rs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-br(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Jt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*lS(r/1960))-r,10<r){t.timeoutHandle=Fh(hi.bind(null,t,Ln,Qr),r);break}hi(t,Ln,Qr);break;case 5:hi(t,Ln,Qr);break;default:throw Error(fe(329))}}}return Un(t,Jt()),t.callbackNode===n?K1.bind(null,t):null}function sf(t,e){var n=ka;return t.current.memoizedState.isDehydrated&&(bi(t,e).flags|=256),t=iu(t,e),t!==2&&(e=Ln,Ln=n,e!==null&&of(e)),t}function of(t){Ln===null?Ln=t:Ln.push.apply(Ln,t)}function cS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!jr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Rs(t,e){for(e&=~vp,e&=~Lu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-br(e),r=1<<n;t[n]=-1,e&=~r}}function n0(t){if(pt&6)throw Error(fe(327));po();var e=$c(t,0);if(!(e&1))return Un(t,Jt()),null;var n=iu(t,e);if(t.tag!==0&&n===2){var r=Th(t);r!==0&&(e=r,n=sf(t,r))}if(n===1)throw n=nl,bi(t,0),Rs(t,e),Un(t,Jt()),n;if(n===6)throw Error(fe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,hi(t,Ln,Qr),Un(t,Jt()),null}function _p(t,e){var n=pt;pt|=1;try{return t(e)}finally{pt=n,pt===0&&(jo=Jt()+500,Pu&&ni())}}function Ri(t){Ps!==null&&Ps.tag===0&&!(pt&6)&&po();var e=pt;pt|=1;var n=ar.transition,r=_t;try{if(ar.transition=null,_t=1,t)return t()}finally{_t=r,ar.transition=n,pt=e,!(pt&6)&&ni()}}function bp(){Gn=oo.current,Dt(oo)}function bi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,zb(n)),en!==null)for(n=en.return;n!==null;){var r=n;switch(np(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Kc();break;case 3:So(),Dt(Bn),Dt(En),dp();break;case 5:up(r);break;case 4:So();break;case 13:Dt($t);break;case 19:Dt($t);break;case 10:op(r.type._context);break;case 22:case 23:bp()}n=n.return}if(fn=t,en=t=Us(t.current,null),xn=Gn=e,ln=0,nl=null,vp=Lu=Ti=0,Ln=ka=null,yi!==null){for(e=0;e<yi.length;e++)if(n=yi[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}yi=null}return t}function G1(t,e){do{var n=en;try{if(ip(),Cc.current=tu,eu){for(var r=Wt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}eu=!1}if(Ni=0,dn=sn=Wt=null,Ea=!1,Za=0,xp.current=null,n===null||n.return===null){ln=1,nl=e,en=null;break}e:{var i=t,o=n.return,c=n,u=e;if(e=xn,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=c,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var y=f.alternate;y?(f.updateQueue=y.updateQueue,f.memoizedState=y.memoizedState,f.lanes=y.lanes):(f.updateQueue=null,f.memoizedState=null)}var k=Wg(o);if(k!==null){k.flags&=-257,Hg(k,o,c,i,e),k.mode&1&&Ug(i,d,e),e=k,u=d;var w=e.updateQueue;if(w===null){var R=new Set;R.add(u),e.updateQueue=R}else w.add(u);break e}else{if(!(e&1)){Ug(i,d,e),Sp();break e}u=Error(fe(426))}}else if(Mt&&c.mode&1){var D=Wg(o);if(D!==null){!(D.flags&65536)&&(D.flags|=256),Hg(D,o,c,i,e),rp(Co(u,c));break e}}i=u=Co(u,c),ln!==4&&(ln=2),ka===null?ka=[i]:ka.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var S=T1(i,u,e);Mg(i,S);break e;case 1:c=u;var _=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Bs===null||!Bs.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var L=R1(i,c,e);Mg(i,L);break e}}i=i.return}while(i!==null)}Q1(n)}catch(q){e=q,en===n&&n!==null&&(en=n=n.return);continue}break}while(!0)}function q1(){var t=nu.current;return nu.current=tu,t===null?tu:t}function Sp(){(ln===0||ln===3||ln===2)&&(ln=4),fn===null||!(Ti&268435455)&&!(Lu&268435455)||Rs(fn,xn)}function iu(t,e){var n=pt;pt|=2;var r=q1();(fn!==t||xn!==e)&&(Qr=null,bi(t,e));do try{uS();break}catch(s){G1(t,s)}while(!0);if(ip(),pt=n,nu.current=r,en!==null)throw Error(fe(261));return fn=null,xn=0,ln}function uS(){for(;en!==null;)Y1(en)}function dS(){for(;en!==null&&!M_();)Y1(en)}function Y1(t){var e=X1(t.alternate,t,Gn);t.memoizedProps=t.pendingProps,e===null?Q1(t):en=e,xp.current=null}function Q1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=sS(n,e),n!==null){n.flags&=32767,en=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ln=6,en=null;return}}else if(n=rS(n,e,Gn),n!==null){en=n;return}if(e=e.sibling,e!==null){en=e;return}en=e=t}while(e!==null);ln===0&&(ln=5)}function hi(t,e,n){var r=_t,s=ar.transition;try{ar.transition=null,_t=1,hS(t,e,n,r)}finally{ar.transition=s,_t=r}return null}function hS(t,e,n,r){do po();while(Ps!==null);if(pt&6)throw Error(fe(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(fe(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(K_(t,i),t===fn&&(en=fn=null,xn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||lc||(lc=!0,Z1(Bc,function(){return po(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ar.transition,ar.transition=null;var o=_t;_t=1;var c=pt;pt|=4,xp.current=null,oS(t,n),H1(n,t),Ab(Mh),Uc=!!Oh,Mh=Oh=null,t.current=n,aS(n),L_(),pt=c,_t=o,ar.transition=i}else t.current=n;if(lc&&(lc=!1,Ps=t,su=s),i=t.pendingLanes,i===0&&(Bs=null),B_(n.stateNode),Un(t,Jt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ru)throw ru=!1,t=nf,nf=null,t;return su&1&&t.tag!==0&&po(),i=t.pendingLanes,i&1?t===rf?Na++:(Na=0,rf=t):Na=0,ni(),null}function po(){if(Ps!==null){var t=Tx(su),e=ar.transition,n=_t;try{if(ar.transition=null,_t=16>t?16:t,Ps===null)var r=!1;else{if(t=Ps,Ps=null,su=0,pt&6)throw Error(fe(331));var s=pt;for(pt|=4,Re=t.current;Re!==null;){var i=Re,o=i.child;if(Re.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(Re=d;Re!==null;){var f=Re;switch(f.tag){case 0:case 11:case 15:Ia(8,f,i)}var p=f.child;if(p!==null)p.return=f,Re=p;else for(;Re!==null;){f=Re;var y=f.sibling,k=f.return;if($1(f),f===d){Re=null;break}if(y!==null){y.return=k,Re=y;break}Re=k}}}var w=i.alternate;if(w!==null){var R=w.child;if(R!==null){w.child=null;do{var D=R.sibling;R.sibling=null,R=D}while(R!==null)}}Re=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Re=o;else e:for(;Re!==null;){if(i=Re,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ia(9,i,i.return)}var S=i.sibling;if(S!==null){S.return=i.return,Re=S;break e}Re=i.return}}var _=t.current;for(Re=_;Re!==null;){o=Re;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,Re=v;else e:for(o=_;Re!==null;){if(c=Re,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Mu(9,c)}}catch(q){Gt(c,c.return,q)}if(c===o){Re=null;break e}var L=c.sibling;if(L!==null){L.return=c.return,Re=L;break e}Re=c.return}}if(pt=s,ni(),Br&&typeof Br.onPostCommitFiberRoot=="function")try{Br.onPostCommitFiberRoot(ku,t)}catch{}r=!0}return r}finally{_t=n,ar.transition=e}}return!1}function r0(t,e,n){e=Co(n,e),e=T1(t,e,1),t=zs(t,e,1),e=Tn(),t!==null&&(vl(t,1,e),Un(t,e))}function Gt(t,e,n){if(t.tag===3)r0(t,t,n);else for(;e!==null;){if(e.tag===3){r0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Bs===null||!Bs.has(r))){t=Co(n,t),t=R1(e,t,1),e=zs(e,t,1),t=Tn(),e!==null&&(vl(e,1,t),Un(e,t));break}}e=e.return}}function fS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Tn(),t.pingedLanes|=t.suspendedLanes&n,fn===t&&(xn&n)===n&&(ln===4||ln===3&&(xn&130023424)===xn&&500>Jt()-wp?bi(t,0):vp|=n),Un(t,e)}function J1(t,e){e===0&&(t.mode&1?(e=Xl,Xl<<=1,!(Xl&130023424)&&(Xl=4194304)):e=1);var n=Tn();t=as(t,e),t!==null&&(vl(t,e,n),Un(t,n))}function pS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),J1(t,n)}function mS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(fe(314))}r!==null&&r.delete(e),J1(t,n)}var X1;X1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Bn.current)Fn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Fn=!1,nS(t,e,n);Fn=!!(t.flags&131072)}else Fn=!1,Mt&&e.flags&1048576&&n1(e,Yc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ec(t,e),t=e.pendingProps;var s=wo(e,En.current);fo(e,n),s=fp(null,e,r,t,s,n);var i=pp();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,$n(r)?(i=!0,Gc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,lp(e),s.updater=Ou,e.stateNode=s,s._reactInternals=e,Vh(e,r,t,n),e=qh(null,e,r,!0,i,n)):(e.tag=0,Mt&&i&&tp(e),In(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ec(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=yS(r),t=mr(r,t),s){case 0:e=Gh(null,e,r,t,n);break e;case 1:e=Gg(null,e,r,t,n);break e;case 11:e=Vg(null,e,r,t,n);break e;case 14:e=Kg(null,e,r,mr(r.type,t),n);break e}throw Error(fe(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mr(r,s),Gh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mr(r,s),Gg(t,e,r,s,n);case 3:e:{if(O1(e),t===null)throw Error(fe(387));r=e.pendingProps,i=e.memoizedState,s=i.element,l1(t,e),Xc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Co(Error(fe(423)),e),e=qg(t,e,r,n,s);break e}else if(r!==s){s=Co(Error(fe(424)),e),e=qg(t,e,r,n,s);break e}else for(qn=Fs(e.stateNode.containerInfo.firstChild),Yn=e,Mt=!0,yr=null,n=o1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(_o(),r===s){e=ls(t,e,n);break e}In(t,e,r,n)}e=e.child}return e;case 5:return c1(e),t===null&&Uh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Lh(r,s)?o=null:i!==null&&Lh(r,i)&&(e.flags|=32),D1(t,e),In(t,e,o,n),e.child;case 6:return t===null&&Uh(e),null;case 13:return M1(t,e,n);case 4:return cp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=bo(e,null,r,n):In(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mr(r,s),Vg(t,e,r,s,n);case 7:return In(t,e,e.pendingProps,n),e.child;case 8:return In(t,e,e.pendingProps.children,n),e.child;case 12:return In(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Tt(Qc,r._currentValue),r._currentValue=o,i!==null)if(jr(i.value,o)){if(i.children===s.children&&!Bn.current){e=ls(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){o=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=ns(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Wh(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(fe(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Wh(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}In(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,fo(e,n),s=cr(s),r=r(s),e.flags|=1,In(t,e,r,n),e.child;case 14:return r=e.type,s=mr(r,e.pendingProps),s=mr(r.type,s),Kg(t,e,r,s,n);case 15:return A1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mr(r,s),Ec(t,e),e.tag=1,$n(r)?(t=!0,Gc(e)):t=!1,fo(e,n),N1(e,r,s),Vh(e,r,s,n),qh(null,e,r,!0,t,n);case 19:return L1(t,e,n);case 22:return P1(t,e,n)}throw Error(fe(156,e.tag))};function Z1(t,e){return Ex(t,e)}function gS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ir(t,e,n,r){return new gS(t,e,n,r)}function Cp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function yS(t){if(typeof t=="function")return Cp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Wf)return 11;if(t===Hf)return 14}return 2}function Us(t,e){var n=t.alternate;return n===null?(n=ir(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Nc(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Cp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Qi:return Si(n.children,s,i,e);case Uf:o=8,s|=8;break;case mh:return t=ir(12,n,e,s|2),t.elementType=mh,t.lanes=i,t;case gh:return t=ir(13,n,e,s),t.elementType=gh,t.lanes=i,t;case yh:return t=ir(19,n,e,s),t.elementType=yh,t.lanes=i,t;case cx:return Fu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ax:o=10;break e;case lx:o=9;break e;case Wf:o=11;break e;case Hf:o=14;break e;case ks:o=16,r=null;break e}throw Error(fe(130,t==null?t:typeof t,""))}return e=ir(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Si(t,e,n,r){return t=ir(7,t,r,e),t.lanes=n,t}function Fu(t,e,n,r){return t=ir(22,t,r,e),t.elementType=cx,t.lanes=n,t.stateNode={isHidden:!1},t}function Ud(t,e,n){return t=ir(6,t,null,e),t.lanes=n,t}function Wd(t,e,n){return e=ir(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function xS(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sd(0),this.expirationTimes=Sd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function jp(t,e,n,r,s,i,o,c,u){return t=new xS(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=ir(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},lp(i),t}function vS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function ev(t){if(!t)return Ys;t=t._reactInternals;e:{if(zi(t)!==t||t.tag!==1)throw Error(fe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if($n(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(fe(171))}if(t.tag===1){var n=t.type;if($n(n))return e1(t,n,e)}return e}function tv(t,e,n,r,s,i,o,c,u){return t=jp(n,r,!0,t,s,i,o,c,u),t.context=ev(null),n=t.current,r=Tn(),s=$s(n),i=ns(r,s),i.callback=e??null,zs(n,i,s),t.current.lanes=s,vl(t,s,r),Un(t,r),t}function zu(t,e,n,r){var s=e.current,i=Tn(),o=$s(s);return n=ev(n),e.context===null?e.context=n:e.pendingContext=n,e=ns(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=zs(s,e,o),t!==null&&(Sr(t,s,o,i),Sc(t,s,o)),o}function ou(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function s0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ep(t,e){s0(t,e),(t=t.alternate)&&s0(t,e)}function wS(){return null}var nv=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ip(t){this._internalRoot=t}Bu.prototype.render=Ip.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(fe(409));zu(t,e,null,null)};Bu.prototype.unmount=Ip.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ri(function(){zu(null,t,null,null)}),e[os]=null}};function Bu(t){this._internalRoot=t}Bu.prototype.unstable_scheduleHydration=function(t){if(t){var e=Px();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ts.length&&e!==0&&e<Ts[n].priority;n++);Ts.splice(n,0,t),n===0&&Ox(t)}};function kp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function $u(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function i0(){}function _S(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=ou(o);i.call(d)}}var o=tv(e,r,t,0,null,!1,!1,"",i0);return t._reactRootContainer=o,t[os]=o.current,qa(t.nodeType===8?t.parentNode:t),Ri(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=ou(u);c.call(d)}}var u=jp(t,0,!1,null,null,!1,!1,"",i0);return t._reactRootContainer=u,t[os]=u.current,qa(t.nodeType===8?t.parentNode:t),Ri(function(){zu(e,u,n,r)}),u}function Uu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var c=s;s=function(){var u=ou(o);c.call(u)}}zu(e,o,t,s)}else o=_S(n,e,t,s,r);return ou(o)}Rx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=va(e.pendingLanes);n!==0&&(Gf(e,n|1),Un(e,Jt()),!(pt&6)&&(jo=Jt()+500,ni()))}break;case 13:Ri(function(){var r=as(t,1);if(r!==null){var s=Tn();Sr(r,t,1,s)}}),Ep(t,1)}};qf=function(t){if(t.tag===13){var e=as(t,134217728);if(e!==null){var n=Tn();Sr(e,t,134217728,n)}Ep(t,134217728)}};Ax=function(t){if(t.tag===13){var e=$s(t),n=as(t,e);if(n!==null){var r=Tn();Sr(n,t,e,r)}Ep(t,e)}};Px=function(){return _t};Dx=function(t,e){var n=_t;try{return _t=t,e()}finally{_t=n}};Ih=function(t,e,n){switch(e){case"input":if(wh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Au(r);if(!s)throw Error(fe(90));dx(r),wh(r,s)}}}break;case"textarea":fx(t,n);break;case"select":e=n.value,e!=null&&lo(t,!!n.multiple,e,!1)}};wx=_p;_x=Ri;var bS={usingClientEntryPoint:!1,Events:[_l,eo,Au,xx,vx,_p]},aa={findFiberByHostInstance:gi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},SS={bundleType:aa.bundleType,version:aa.version,rendererPackageName:aa.rendererPackageName,rendererConfig:aa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Cx(t),t===null?null:t.stateNode},findFiberByHostInstance:aa.findFiberByHostInstance||wS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cc.isDisabled&&cc.supportsFiber)try{ku=cc.inject(SS),Br=cc}catch{}}Jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bS;Jn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kp(e))throw Error(fe(200));return vS(t,e,null,n)};Jn.createRoot=function(t,e){if(!kp(t))throw Error(fe(299));var n=!1,r="",s=nv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=jp(t,1,!1,null,null,n,!1,r,s),t[os]=e.current,qa(t.nodeType===8?t.parentNode:t),new Ip(e)};Jn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(fe(188)):(t=Object.keys(t).join(","),Error(fe(268,t)));return t=Cx(e),t=t===null?null:t.stateNode,t};Jn.flushSync=function(t){return Ri(t)};Jn.hydrate=function(t,e,n){if(!$u(e))throw Error(fe(200));return Uu(null,t,e,!0,n)};Jn.hydrateRoot=function(t,e,n){if(!kp(t))throw Error(fe(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=nv;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=tv(e,null,t,1,n??null,s,!1,i,o),t[os]=e.current,qa(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Bu(e)};Jn.render=function(t,e,n){if(!$u(e))throw Error(fe(200));return Uu(null,t,e,!1,n)};Jn.unmountComponentAtNode=function(t){if(!$u(t))throw Error(fe(40));return t._reactRootContainer?(Ri(function(){Uu(null,null,t,!1,function(){t._reactRootContainer=null,t[os]=null})}),!0):!1};Jn.unstable_batchedUpdates=_p;Jn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!$u(n))throw Error(fe(200));if(t==null||t._reactInternals===void 0)throw Error(fe(38));return Uu(t,e,n,!1,r)};Jn.version="18.3.1-next-f1338f8080-20240426";function rv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rv)}catch(t){console.error(t)}}rv(),rx.exports=Jn;var CS=rx.exports,o0=CS;fh.createRoot=o0.createRoot,fh.hydrateRoot=o0.hydrateRoot;/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var a0="popstate";function jS(t={}){function e(r,s){let{pathname:i,search:o,hash:c}=r.location;return af("",{pathname:i,search:o,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:rl(s)}return IS(e,n,null,t)}function Ht(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Er(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ES(){return Math.random().toString(36).substring(2,10)}function l0(t,e){return{usr:t.state,key:t.key,idx:e}}function af(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?zo(e):e,state:n,key:e&&e.key||r||ES()}}function rl({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function zo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function IS(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,c="POP",u=null,d=f();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function f(){return(o.state||{idx:null}).idx}function p(){c="POP";let D=f(),S=D==null?null:D-d;d=D,u&&u({action:c,location:R.location,delta:S})}function y(D,S){c="PUSH";let _=af(R.location,D,S);d=f()+1;let v=l0(_,d),L=R.createHref(_);try{o.pushState(v,"",L)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;s.location.assign(L)}i&&u&&u({action:c,location:R.location,delta:1})}function k(D,S){c="REPLACE";let _=af(R.location,D,S);d=f();let v=l0(_,d),L=R.createHref(_);o.replaceState(v,"",L),i&&u&&u({action:c,location:R.location,delta:0})}function w(D){return kS(D)}let R={get action(){return c},get location(){return t(s,o)},listen(D){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(a0,p),u=D,()=>{s.removeEventListener(a0,p),u=null}},createHref(D){return e(s,D)},createURL:w,encodeLocation(D){let S=w(D);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:y,replace:k,go(D){return o.go(D)}};return R}function kS(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ht(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:rl(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function sv(t,e,n="/"){return NS(t,e,n,!1)}function NS(t,e,n,r){let s=typeof e=="string"?zo(e):e,i=cs(s.pathname||"/",n);if(i==null)return null;let o=iv(t);TS(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=$S(i);c=zS(o[u],d,r)}return c}function iv(t,e=[],n=[],r="",s=!1){let i=(o,c,u=s,d)=>{let f={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(r)&&u)return;Ht(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length)}let p=rs([r,f.relativePath]),y=n.concat(f);o.children&&o.children.length>0&&(Ht(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),iv(o.children,e,y,p,u)),!(o.path==null&&!o.index)&&e.push({path:p,score:LS(p,o.index),routesMeta:y})};return t.forEach((o,c)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))i(o,c);else for(let d of ov(o.path))i(o,c,!0,d)}),e}function ov(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=ov(r.join("/")),c=[];return c.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function TS(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:FS(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var RS=/^:[\w-]+$/,AS=3,PS=2,DS=1,OS=10,MS=-2,c0=t=>t==="*";function LS(t,e){let n=t.split("/"),r=n.length;return n.some(c0)&&(r+=MS),e&&(r+=PS),n.filter(s=>!c0(s)).reduce((s,i)=>s+(RS.test(i)?AS:i===""?DS:OS),r)}function FS(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function zS(t,e,n=!1){let{routesMeta:r}=t,s={},i="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",p=au({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),y=u.route;if(!p&&d&&n&&!r[r.length-1].route.index&&(p=au({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:rs([i,p.pathname]),pathnameBase:KS(rs([i,p.pathnameBase])),route:y}),p.pathnameBase!=="/"&&(i=rs([i,p.pathnameBase]))}return o}function au(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=BS(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((d,{paramName:f,isOptional:p},y)=>{if(f==="*"){let w=c[y]||"";o=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const k=c[y];return p&&!k?d[f]=void 0:d[f]=(k||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function BS(t,e=!1,n=!0){Er(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function $S(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Er(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function cs(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var US=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,WS=t=>US.test(t);function HS(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?zo(t):t,i;if(n)if(WS(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Er(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${n}`)}n.startsWith("/")?i=u0(n.substring(1),"/"):i=u0(n,e)}else i=e;return{pathname:i,search:GS(r),hash:qS(s)}}function u0(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Hd(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function VS(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function av(t){let e=VS(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function lv(t,e,n,r=!1){let s;typeof t=="string"?s=zo(t):(s={...t},Ht(!s.pathname||!s.pathname.includes("?"),Hd("?","pathname","search",s)),Ht(!s.pathname||!s.pathname.includes("#"),Hd("#","pathname","hash",s)),Ht(!s.search||!s.search.includes("#"),Hd("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,c;if(o==null)c=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let y=o.split("/");for(;y[0]==="..";)y.shift(),p-=1;s.pathname=y.join("/")}c=p>=0?e[p]:"/"}let u=HS(s,c),d=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}var rs=t=>t.join("/").replace(/\/\/+/g,"/"),KS=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),GS=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,qS=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function YS(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function QS(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var cv=["POST","PUT","PATCH","DELETE"];new Set(cv);var JS=["GET",...cv];new Set(JS);var Bo=g.createContext(null);Bo.displayName="DataRouter";var Wu=g.createContext(null);Wu.displayName="DataRouterState";g.createContext(!1);var uv=g.createContext({isTransitioning:!1});uv.displayName="ViewTransition";var XS=g.createContext(new Map);XS.displayName="Fetchers";var ZS=g.createContext(null);ZS.displayName="Await";var kr=g.createContext(null);kr.displayName="Navigation";var Sl=g.createContext(null);Sl.displayName="Location";var ps=g.createContext({outlet:null,matches:[],isDataRoute:!1});ps.displayName="Route";var Np=g.createContext(null);Np.displayName="RouteError";function e4(t,{relative:e}={}){Ht(Cl(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=g.useContext(kr),{hash:s,pathname:i,search:o}=jl(t,{relative:e}),c=i;return n!=="/"&&(c=i==="/"?n:rs([n,i])),r.createHref({pathname:c,search:o,hash:s})}function Cl(){return g.useContext(Sl)!=null}function ri(){return Ht(Cl(),"useLocation() may be used only in the context of a <Router> component."),g.useContext(Sl).location}var dv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function hv(t){g.useContext(kr).static||g.useLayoutEffect(t)}function Vn(){let{isDataRoute:t}=g.useContext(ps);return t?f4():t4()}function t4(){Ht(Cl(),"useNavigate() may be used only in the context of a <Router> component.");let t=g.useContext(Bo),{basename:e,navigator:n}=g.useContext(kr),{matches:r}=g.useContext(ps),{pathname:s}=ri(),i=JSON.stringify(av(r)),o=g.useRef(!1);return hv(()=>{o.current=!0}),g.useCallback((u,d={})=>{if(Er(o.current,dv),!o.current)return;if(typeof u=="number"){n.go(u);return}let f=lv(u,JSON.parse(i),s,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:rs([e,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[e,n,i,s,t])}g.createContext(null);function jl(t,{relative:e}={}){let{matches:n}=g.useContext(ps),{pathname:r}=ri(),s=JSON.stringify(av(n));return g.useMemo(()=>lv(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function n4(t,e){return fv(t,e)}function fv(t,e,n,r,s){var _;Ht(Cl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=g.useContext(kr),{matches:o}=g.useContext(ps),c=o[o.length-1],u=c?c.params:{},d=c?c.pathname:"/",f=c?c.pathnameBase:"/",p=c&&c.route;{let v=p&&p.path||"";pv(d,!p||v.endsWith("*")||v.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${v}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${v}"> to <Route path="${v==="/"?"*":`${v}/*`}">.`)}let y=ri(),k;if(e){let v=typeof e=="string"?zo(e):e;Ht(f==="/"||((_=v.pathname)==null?void 0:_.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${v.pathname}" was given in the \`location\` prop.`),k=v}else k=y;let w=k.pathname||"/",R=w;if(f!=="/"){let v=f.replace(/^\//,"").split("/");R="/"+w.replace(/^\//,"").split("/").slice(v.length).join("/")}let D=sv(t,{pathname:R});Er(p||D!=null,`No routes matched location "${k.pathname}${k.search}${k.hash}" `),Er(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${k.pathname}${k.search}${k.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=a4(D&&D.map(v=>Object.assign({},v,{params:Object.assign({},u,v.params),pathname:rs([f,i.encodeLocation?i.encodeLocation(v.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?f:rs([f,i.encodeLocation?i.encodeLocation(v.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:v.pathnameBase])})),o,n,r,s);return e&&S?g.createElement(Sl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...k},navigationType:"POP"}},S):S}function r4(){let t=h4(),e=YS(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=g.createElement(g.Fragment,null,g.createElement("p",null," Hey developer "),g.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",g.createElement("code",{style:i},"ErrorBoundary")," or"," ",g.createElement("code",{style:i},"errorElement")," prop on your route.")),g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},e),n?g.createElement("pre",{style:s},n):null,o)}var s4=g.createElement(r4,null),i4=class extends g.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?g.createElement(ps.Provider,{value:this.props.routeContext},g.createElement(Np.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function o4({routeContext:t,match:e,children:n}){let r=g.useContext(Bo);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),g.createElement(ps.Provider,{value:t},n)}function a4(t,e=[],n=null,r=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=n==null?void 0:n.errors;if(o!=null){let f=i.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);Ht(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,f+1))}let c=!1,u=-1;if(n)for(let f=0;f<i.length;f++){let p=i[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=f),p.route.id){let{loaderData:y,errors:k}=n,w=p.route.loader&&!y.hasOwnProperty(p.route.id)&&(!k||k[p.route.id]===void 0);if(p.route.lazy||w){c=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}let d=n&&r?(f,p)=>{var y,k;r(f,{location:n.location,params:((k=(y=n.matches)==null?void 0:y[0])==null?void 0:k.params)??{},unstable_pattern:QS(n.matches),errorInfo:p})}:void 0;return i.reduceRight((f,p,y)=>{let k,w=!1,R=null,D=null;n&&(k=o&&p.route.id?o[p.route.id]:void 0,R=p.route.errorElement||s4,c&&(u<0&&y===0?(pv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,D=null):u===y&&(w=!0,D=p.route.hydrateFallbackElement||null)));let S=e.concat(i.slice(0,y+1)),_=()=>{let v;return k?v=R:w?v=D:p.route.Component?v=g.createElement(p.route.Component,null):p.route.element?v=p.route.element:v=f,g.createElement(o4,{match:p,routeContext:{outlet:f,matches:S,isDataRoute:n!=null},children:v})};return n&&(p.route.ErrorBoundary||p.route.errorElement||y===0)?g.createElement(i4,{location:n.location,revalidation:n.revalidation,component:R,error:k,children:_(),routeContext:{outlet:null,matches:S,isDataRoute:!0},onError:d}):_()},null)}function Tp(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function l4(t){let e=g.useContext(Bo);return Ht(e,Tp(t)),e}function c4(t){let e=g.useContext(Wu);return Ht(e,Tp(t)),e}function u4(t){let e=g.useContext(ps);return Ht(e,Tp(t)),e}function Rp(t){let e=u4(t),n=e.matches[e.matches.length-1];return Ht(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function d4(){return Rp("useRouteId")}function h4(){var r;let t=g.useContext(Np),e=c4("useRouteError"),n=Rp("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function f4(){let{router:t}=l4("useNavigate"),e=Rp("useNavigate"),n=g.useRef(!1);return hv(()=>{n.current=!0}),g.useCallback(async(s,i={})=>{Er(n.current,dv),n.current&&(typeof s=="number"?await t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var d0={};function pv(t,e,n){!e&&!d0[t]&&(d0[t]=!0,Er(!1,n))}g.memo(p4);function p4({routes:t,future:e,state:n,unstable_onError:r}){return fv(t,void 0,n,r,e)}function mn(t){Ht(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function m4({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:i=!1,unstable_useTransitions:o}){Ht(!Cl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),u=g.useMemo(()=>({basename:c,navigator:s,static:i,unstable_useTransitions:o,future:{}}),[c,s,i,o]);typeof n=="string"&&(n=zo(n));let{pathname:d="/",search:f="",hash:p="",state:y=null,key:k="default"}=n,w=g.useMemo(()=>{let R=cs(d,c);return R==null?null:{location:{pathname:R,search:f,hash:p,state:y,key:k},navigationType:r}},[c,d,f,p,y,k,r]);return Er(w!=null,`<Router basename="${c}"> is not able to match the URL "${d}${f}${p}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:g.createElement(kr.Provider,{value:u},g.createElement(Sl.Provider,{children:e,value:w}))}function g4({children:t,location:e}){return n4(lf(t),e)}function lf(t,e=[]){let n=[];return g.Children.forEach(t,(r,s)=>{if(!g.isValidElement(r))return;let i=[...e,s];if(r.type===g.Fragment){n.push.apply(n,lf(r.props.children,i));return}Ht(r.type===mn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ht(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=lf(r.props.children,i)),n.push(o)}),n}var Tc="get",Rc="application/x-www-form-urlencoded";function Hu(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function y4(t){return Hu(t)&&t.tagName.toLowerCase()==="button"}function x4(t){return Hu(t)&&t.tagName.toLowerCase()==="form"}function v4(t){return Hu(t)&&t.tagName.toLowerCase()==="input"}function w4(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function _4(t,e){return t.button===0&&(!e||e==="_self")&&!w4(t)}var uc=null;function b4(){if(uc===null)try{new FormData(document.createElement("form"),0),uc=!1}catch{uc=!0}return uc}var S4=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Vd(t){return t!=null&&!S4.has(t)?(Er(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Rc}"`),null):t}function C4(t,e){let n,r,s,i,o;if(x4(t)){let c=t.getAttribute("action");r=c?cs(c,e):null,n=t.getAttribute("method")||Tc,s=Vd(t.getAttribute("enctype"))||Rc,i=new FormData(t)}else if(y4(t)||v4(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||c.getAttribute("action");if(r=u?cs(u,e):null,n=t.getAttribute("formmethod")||c.getAttribute("method")||Tc,s=Vd(t.getAttribute("formenctype"))||Vd(c.getAttribute("enctype"))||Rc,i=new FormData(c,t),!b4()){let{name:d,type:f,value:p}=t;if(f==="image"){let y=d?`${d}.`:"";i.append(`${y}x`,"0"),i.append(`${y}y`,"0")}else d&&i.append(d,p)}}else{if(Hu(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Tc,r=null,s=Rc,o=t}return i&&s==="text/plain"&&(o=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ap(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function j4(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&cs(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function E4(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function I4(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function k4(t,e,n){let r=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let o=await E4(i,n);return o.links?o.links():[]}return[]}));return A4(r.flat(1).filter(I4).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function h0(t,e,n,r,s,i){let o=(u,d)=>n[d]?u.route.id!==n[d].route.id:!0,c=(u,d)=>{var f;return n[d].pathname!==u.pathname||((f=n[d].route.path)==null?void 0:f.endsWith("*"))&&n[d].params["*"]!==u.params["*"]};return i==="assets"?e.filter((u,d)=>o(u,d)||c(u,d)):i==="data"?e.filter((u,d)=>{var p;let f=r.routes[u.route.id];if(!f||!f.hasLoader)return!1;if(o(u,d)||c(u,d))return!0;if(u.route.shouldRevalidate){let y=u.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((p=n[0])==null?void 0:p.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function N4(t,e,{includeHydrateFallback:n}={}){return T4(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function T4(t){return[...new Set(t)]}function R4(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function A4(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let i=JSON.stringify(R4(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}function mv(){let t=g.useContext(Bo);return Ap(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function P4(){let t=g.useContext(Wu);return Ap(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Pp=g.createContext(void 0);Pp.displayName="FrameworkContext";function gv(){let t=g.useContext(Pp);return Ap(t,"You must render this element inside a <HydratedRouter> element"),t}function D4(t,e){let n=g.useContext(Pp),[r,s]=g.useState(!1),[i,o]=g.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:d,onMouseLeave:f,onTouchStart:p}=e,y=g.useRef(null);g.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let R=S=>{S.forEach(_=>{o(_.isIntersecting)})},D=new IntersectionObserver(R,{threshold:.5});return y.current&&D.observe(y.current),()=>{D.disconnect()}}},[t]),g.useEffect(()=>{if(r){let R=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(R)}}},[r]);let k=()=>{s(!0)},w=()=>{s(!1),o(!1)};return n?t!=="intent"?[i,y,{}]:[i,y,{onFocus:la(c,k),onBlur:la(u,w),onMouseEnter:la(d,k),onMouseLeave:la(f,w),onTouchStart:la(p,k)}]:[!1,y,{}]}function la(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function O4({page:t,...e}){let{router:n}=mv(),r=g.useMemo(()=>sv(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?g.createElement(L4,{page:t,matches:r,...e}):null}function M4(t){let{manifest:e,routeModules:n}=gv(),[r,s]=g.useState([]);return g.useEffect(()=>{let i=!1;return k4(t,e,n).then(o=>{i||s(o)}),()=>{i=!0}},[t,e,n]),r}function L4({page:t,matches:e,...n}){let r=ri(),{manifest:s,routeModules:i}=gv(),{basename:o}=mv(),{loaderData:c,matches:u}=P4(),d=g.useMemo(()=>h0(t,e,u,s,r,"data"),[t,e,u,s,r]),f=g.useMemo(()=>h0(t,e,u,s,r,"assets"),[t,e,u,s,r]),p=g.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let w=new Set,R=!1;if(e.forEach(S=>{var v;let _=s.routes[S.route.id];!_||!_.hasLoader||(!d.some(L=>L.route.id===S.route.id)&&S.route.id in c&&((v=i[S.route.id])!=null&&v.shouldRevalidate)||_.hasClientLoader?R=!0:w.add(S.route.id))}),w.size===0)return[];let D=j4(t,o,"data");return R&&w.size>0&&D.searchParams.set("_routes",e.filter(S=>w.has(S.route.id)).map(S=>S.route.id).join(",")),[D.pathname+D.search]},[o,c,r,s,d,e,t,i]),y=g.useMemo(()=>N4(f,s),[f,s]),k=M4(f);return g.createElement(g.Fragment,null,p.map(w=>g.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...n})),y.map(w=>g.createElement("link",{key:w,rel:"modulepreload",href:w,...n})),k.map(({key:w,link:R})=>g.createElement("link",{key:w,nonce:n.nonce,...R})))}function F4(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var yv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{yv&&(window.__reactRouterVersion="7.10.1")}catch{}function z4({basename:t,children:e,unstable_useTransitions:n,window:r}){let s=g.useRef();s.current==null&&(s.current=jS({window:r,v5Compat:!0}));let i=s.current,[o,c]=g.useState({action:i.action,location:i.location}),u=g.useCallback(d=>{n===!1?c(d):g.startTransition(()=>c(d))},[n]);return g.useLayoutEffect(()=>i.listen(u),[i,u]),g.createElement(m4,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:i,unstable_useTransitions:n===!0})}var xv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ye=g.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:o,state:c,target:u,to:d,preventScrollReset:f,viewTransition:p,...y},k){let{basename:w,unstable_useTransitions:R}=g.useContext(kr),D=typeof d=="string"&&xv.test(d),S,_=!1;if(typeof d=="string"&&D&&(S=d,yv))try{let I=new URL(window.location.href),N=d.startsWith("//")?new URL(I.protocol+d):new URL(d),O=cs(N.pathname,w);N.origin===I.origin&&O!=null?d=O+N.search+N.hash:_=!0}catch{Er(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=e4(d,{relative:s}),[L,q,se]=D4(r,y),E=W4(d,{replace:o,state:c,target:u,preventScrollReset:f,relative:s,viewTransition:p,unstable_useTransitions:R});function x(I){e&&e(I),I.defaultPrevented||E(I)}let j=g.createElement("a",{...y,...se,href:S||v,onClick:_||i?e:x,ref:F4(k,q),target:u,"data-discover":!D&&n==="render"?"true":void 0});return L&&!D?g.createElement(g.Fragment,null,j,g.createElement(O4,{page:v})):j});ye.displayName="Link";var B4=g.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:o,viewTransition:c,children:u,...d},f){let p=jl(o,{relative:d.relative}),y=ri(),k=g.useContext(Wu),{navigator:w,basename:R}=g.useContext(kr),D=k!=null&&q4(p)&&c===!0,S=w.encodeLocation?w.encodeLocation(p).pathname:p.pathname,_=y.pathname,v=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;n||(_=_.toLowerCase(),v=v?v.toLowerCase():null,S=S.toLowerCase()),v&&R&&(v=cs(v,R)||v);const L=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let q=_===S||!s&&_.startsWith(S)&&_.charAt(L)==="/",se=v!=null&&(v===S||!s&&v.startsWith(S)&&v.charAt(S.length)==="/"),E={isActive:q,isPending:se,isTransitioning:D},x=q?e:void 0,j;typeof r=="function"?j=r(E):j=[r,q?"active":null,se?"pending":null,D?"transitioning":null].filter(Boolean).join(" ");let I=typeof i=="function"?i(E):i;return g.createElement(ye,{...d,"aria-current":x,className:j,ref:f,style:I,to:o,viewTransition:c},typeof u=="function"?u(E):u)});B4.displayName="NavLink";var $4=g.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:i,method:o=Tc,action:c,onSubmit:u,relative:d,preventScrollReset:f,viewTransition:p,...y},k)=>{let{unstable_useTransitions:w}=g.useContext(kr),R=K4(),D=G4(c,{relative:d}),S=o.toLowerCase()==="get"?"get":"post",_=typeof c=="string"&&xv.test(c),v=L=>{if(u&&u(L),L.defaultPrevented)return;L.preventDefault();let q=L.nativeEvent.submitter,se=(q==null?void 0:q.getAttribute("formmethod"))||o,E=()=>R(q||L.currentTarget,{fetcherKey:e,method:se,navigate:n,replace:s,state:i,relative:d,preventScrollReset:f,viewTransition:p});w&&n!==!1?g.startTransition(()=>E()):E()};return g.createElement("form",{ref:k,method:S,action:D,onSubmit:r?u:v,...y,"data-discover":!_&&t==="render"?"true":void 0})});$4.displayName="Form";function U4(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vv(t){let e=g.useContext(Bo);return Ht(e,U4(t)),e}function W4(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:o,unstable_useTransitions:c}={}){let u=Vn(),d=ri(),f=jl(t,{relative:i});return g.useCallback(p=>{if(_4(p,e)){p.preventDefault();let y=n!==void 0?n:rl(d)===rl(f),k=()=>u(t,{replace:y,state:r,preventScrollReset:s,relative:i,viewTransition:o});c?g.startTransition(()=>k()):k()}},[d,u,f,n,r,e,t,s,i,o,c])}var H4=0,V4=()=>`__${String(++H4)}__`;function K4(){let{router:t}=vv("useSubmit"),{basename:e}=g.useContext(kr),n=d4(),r=t.fetch,s=t.navigate;return g.useCallback(async(i,o={})=>{let{action:c,method:u,encType:d,formData:f,body:p}=C4(i,e);if(o.navigate===!1){let y=o.fetcherKey||V4();await r(y,n,o.action||c,{preventScrollReset:o.preventScrollReset,formData:f,body:p,formMethod:o.method||u,formEncType:o.encType||d,flushSync:o.flushSync})}else await s(o.action||c,{preventScrollReset:o.preventScrollReset,formData:f,body:p,formMethod:o.method||u,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,s,e,n])}function G4(t,{relative:e}={}){let{basename:n}=g.useContext(kr),r=g.useContext(ps);Ht(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...jl(t||".",{relative:e})},o=ri();if(t==null){i.search=o.search;let c=new URLSearchParams(i.search),u=c.getAll("index");if(u.some(f=>f==="")){c.delete("index"),u.filter(p=>p).forEach(p=>c.append("index",p));let f=c.toString();i.search=f?`?${f}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:rs([n,i.pathname])),rl(i)}function q4(t,{relative:e}={}){let n=g.useContext(uv);Ht(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=vv("useViewTransitionState"),s=jl(t,{relative:e});if(!n.isTransitioning)return!1;let i=cs(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=cs(n.nextLocation.pathname,r)||n.nextLocation.pathname;return au(s.pathname,o)!=null||au(s.pathname,i)!=null}function wv(t,e){return function(){return t.apply(e,arguments)}}const{toString:Y4}=Object.prototype,{getPrototypeOf:Dp}=Object,{iterator:Vu,toStringTag:_v}=Symbol,Ku=(t=>e=>{const n=Y4.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Nr=t=>(t=t.toLowerCase(),e=>Ku(e)===t),Gu=t=>e=>typeof e===t,{isArray:$o}=Array,Eo=Gu("undefined");function El(t){return t!==null&&!Eo(t)&&t.constructor!==null&&!Eo(t.constructor)&&Wn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const bv=Nr("ArrayBuffer");function Q4(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&bv(t.buffer),e}const J4=Gu("string"),Wn=Gu("function"),Sv=Gu("number"),Il=t=>t!==null&&typeof t=="object",X4=t=>t===!0||t===!1,Ac=t=>{if(Ku(t)!=="object")return!1;const e=Dp(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(_v in t)&&!(Vu in t)},Z4=t=>{if(!Il(t)||El(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},eC=Nr("Date"),tC=Nr("File"),nC=Nr("Blob"),rC=Nr("FileList"),sC=t=>Il(t)&&Wn(t.pipe),iC=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Wn(t.append)&&((e=Ku(t))==="formdata"||e==="object"&&Wn(t.toString)&&t.toString()==="[object FormData]"))},oC=Nr("URLSearchParams"),[aC,lC,cC,uC]=["ReadableStream","Request","Response","Headers"].map(Nr),dC=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function kl(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),$o(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{if(El(t))return;const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let c;for(r=0;r<o;r++)c=i[r],e.call(null,t[c],c,t)}}function Cv(t,e){if(El(t))return null;e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const vi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,jv=t=>!Eo(t)&&t!==vi;function cf(){const{caseless:t,skipUndefined:e}=jv(this)&&this||{},n={},r=(s,i)=>{const o=t&&Cv(n,i)||i;Ac(n[o])&&Ac(s)?n[o]=cf(n[o],s):Ac(s)?n[o]=cf({},s):$o(s)?n[o]=s.slice():(!e||!Eo(s))&&(n[o]=s)};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&kl(arguments[s],r);return n}const hC=(t,e,n,{allOwnKeys:r}={})=>(kl(e,(s,i)=>{n&&Wn(s)?t[i]=wv(s,n):t[i]=s},{allOwnKeys:r}),t),fC=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),pC=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},mC=(t,e,n,r)=>{let s,i,o;const c={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!r||r(o,t,e))&&!c[o]&&(e[o]=t[o],c[o]=!0);t=n!==!1&&Dp(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},gC=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},yC=t=>{if(!t)return null;if($o(t))return t;let e=t.length;if(!Sv(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},xC=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Dp(Uint8Array)),vC=(t,e)=>{const r=(t&&t[Vu]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},wC=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},_C=Nr("HTMLFormElement"),bC=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),f0=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),SC=Nr("RegExp"),Ev=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};kl(n,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(r[i]=o||s)}),Object.defineProperties(t,r)},CC=t=>{Ev(t,(e,n)=>{if(Wn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Wn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},jC=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return $o(t)?r(t):r(String(t).split(e)),n},EC=()=>{},IC=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function kC(t){return!!(t&&Wn(t.append)&&t[_v]==="FormData"&&t[Vu])}const NC=t=>{const e=new Array(10),n=(r,s)=>{if(Il(r)){if(e.indexOf(r)>=0)return;if(El(r))return r;if(!("toJSON"in r)){e[s]=r;const i=$o(r)?[]:{};return kl(r,(o,c)=>{const u=n(o,s+1);!Eo(u)&&(i[c]=u)}),e[s]=void 0,i}}return r};return n(t,0)},TC=Nr("AsyncFunction"),RC=t=>t&&(Il(t)||Wn(t))&&Wn(t.then)&&Wn(t.catch),Iv=((t,e)=>t?setImmediate:e?((n,r)=>(vi.addEventListener("message",({source:s,data:i})=>{s===vi&&i===n&&r.length&&r.shift()()},!1),s=>{r.push(s),vi.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Wn(vi.postMessage)),AC=typeof queueMicrotask<"u"?queueMicrotask.bind(vi):typeof process<"u"&&process.nextTick||Iv,PC=t=>t!=null&&Wn(t[Vu]),Q={isArray:$o,isArrayBuffer:bv,isBuffer:El,isFormData:iC,isArrayBufferView:Q4,isString:J4,isNumber:Sv,isBoolean:X4,isObject:Il,isPlainObject:Ac,isEmptyObject:Z4,isReadableStream:aC,isRequest:lC,isResponse:cC,isHeaders:uC,isUndefined:Eo,isDate:eC,isFile:tC,isBlob:nC,isRegExp:SC,isFunction:Wn,isStream:sC,isURLSearchParams:oC,isTypedArray:xC,isFileList:rC,forEach:kl,merge:cf,extend:hC,trim:dC,stripBOM:fC,inherits:pC,toFlatObject:mC,kindOf:Ku,kindOfTest:Nr,endsWith:gC,toArray:yC,forEachEntry:vC,matchAll:wC,isHTMLForm:_C,hasOwnProperty:f0,hasOwnProp:f0,reduceDescriptors:Ev,freezeMethods:CC,toObjectSet:jC,toCamelCase:bC,noop:EC,toFiniteNumber:IC,findKey:Cv,global:vi,isContextDefined:jv,isSpecCompliantForm:kC,toJSONObject:NC,isAsyncFn:TC,isThenable:RC,setImmediate:Iv,asap:AC,isIterable:PC};function et(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}Q.inherits(et,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Q.toJSONObject(this.config),code:this.code,status:this.status}}});const kv=et.prototype,Nv={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Nv[t]={value:t}});Object.defineProperties(et,Nv);Object.defineProperty(kv,"isAxiosError",{value:!0});et.from=(t,e,n,r,s,i)=>{const o=Object.create(kv);Q.toFlatObject(t,o,function(f){return f!==Error.prototype},d=>d!=="isAxiosError");const c=t&&t.message?t.message:"Error",u=e==null&&t?t.code:e;return et.call(o,c,u,n,r,s),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",i&&Object.assign(o,i),o};const DC=null;function uf(t){return Q.isPlainObject(t)||Q.isArray(t)}function Tv(t){return Q.endsWith(t,"[]")?t.slice(0,-2):t}function p0(t,e,n){return t?t.concat(e).map(function(s,i){return s=Tv(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function OC(t){return Q.isArray(t)&&!t.some(uf)}const MC=Q.toFlatObject(Q,{},null,function(e){return/^is[A-Z]/.test(e)});function qu(t,e,n){if(!Q.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Q.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(R,D){return!Q.isUndefined(D[R])});const r=n.metaTokens,s=n.visitor||f,i=n.dots,o=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&Q.isSpecCompliantForm(e);if(!Q.isFunction(s))throw new TypeError("visitor must be a function");function d(w){if(w===null)return"";if(Q.isDate(w))return w.toISOString();if(Q.isBoolean(w))return w.toString();if(!u&&Q.isBlob(w))throw new et("Blob is not supported. Use a Buffer instead.");return Q.isArrayBuffer(w)||Q.isTypedArray(w)?u&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function f(w,R,D){let S=w;if(w&&!D&&typeof w=="object"){if(Q.endsWith(R,"{}"))R=r?R:R.slice(0,-2),w=JSON.stringify(w);else if(Q.isArray(w)&&OC(w)||(Q.isFileList(w)||Q.endsWith(R,"[]"))&&(S=Q.toArray(w)))return R=Tv(R),S.forEach(function(v,L){!(Q.isUndefined(v)||v===null)&&e.append(o===!0?p0([R],L,i):o===null?R:R+"[]",d(v))}),!1}return uf(w)?!0:(e.append(p0(D,R,i),d(w)),!1)}const p=[],y=Object.assign(MC,{defaultVisitor:f,convertValue:d,isVisitable:uf});function k(w,R){if(!Q.isUndefined(w)){if(p.indexOf(w)!==-1)throw Error("Circular reference detected in "+R.join("."));p.push(w),Q.forEach(w,function(S,_){(!(Q.isUndefined(S)||S===null)&&s.call(e,S,Q.isString(_)?_.trim():_,R,y))===!0&&k(S,R?R.concat(_):[_])}),p.pop()}}if(!Q.isObject(t))throw new TypeError("data must be an object");return k(t),e}function m0(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Op(t,e){this._pairs=[],t&&qu(t,this,e)}const Rv=Op.prototype;Rv.append=function(e,n){this._pairs.push([e,n])};Rv.toString=function(e){const n=e?function(r){return e.call(this,r,m0)}:m0;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function LC(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Av(t,e,n){if(!e)return t;const r=n&&n.encode||LC;Q.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(s?i=s(e,n):i=Q.isURLSearchParams(e)?e.toString():new Op(e,n).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class g0{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Q.forEach(this.handlers,function(r){r!==null&&e(r)})}}const Pv={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},FC=typeof URLSearchParams<"u"?URLSearchParams:Op,zC=typeof FormData<"u"?FormData:null,BC=typeof Blob<"u"?Blob:null,$C={isBrowser:!0,classes:{URLSearchParams:FC,FormData:zC,Blob:BC},protocols:["http","https","file","blob","url","data"]},Mp=typeof window<"u"&&typeof document<"u",df=typeof navigator=="object"&&navigator||void 0,UC=Mp&&(!df||["ReactNative","NativeScript","NS"].indexOf(df.product)<0),WC=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",HC=Mp&&window.location.href||"http://localhost",VC=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Mp,hasStandardBrowserEnv:UC,hasStandardBrowserWebWorkerEnv:WC,navigator:df,origin:HC},Symbol.toStringTag,{value:"Module"})),jn={...VC,...$C};function KC(t,e){return qu(t,new jn.classes.URLSearchParams,{visitor:function(n,r,s,i){return jn.isNode&&Q.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function GC(t){return Q.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function qC(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function Dv(t){function e(n,r,s,i){let o=n[i++];if(o==="__proto__")return!0;const c=Number.isFinite(+o),u=i>=n.length;return o=!o&&Q.isArray(s)?s.length:o,u?(Q.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!c):((!s[o]||!Q.isObject(s[o]))&&(s[o]=[]),e(n,r,s[o],i)&&Q.isArray(s[o])&&(s[o]=qC(s[o])),!c)}if(Q.isFormData(t)&&Q.isFunction(t.entries)){const n={};return Q.forEachEntry(t,(r,s)=>{e(GC(r),s,n,0)}),n}return null}function YC(t,e,n){if(Q.isString(t))try{return(e||JSON.parse)(t),Q.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Nl={transitional:Pv,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=Q.isObject(e);if(i&&Q.isHTMLForm(e)&&(e=new FormData(e)),Q.isFormData(e))return s?JSON.stringify(Dv(e)):e;if(Q.isArrayBuffer(e)||Q.isBuffer(e)||Q.isStream(e)||Q.isFile(e)||Q.isBlob(e)||Q.isReadableStream(e))return e;if(Q.isArrayBufferView(e))return e.buffer;if(Q.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let c;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return KC(e,this.formSerializer).toString();if((c=Q.isFileList(e))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return qu(c?{"files[]":e}:e,u&&new u,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),YC(e)):e}],transformResponse:[function(e){const n=this.transitional||Nl.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(Q.isResponse(e)||Q.isReadableStream(e))return e;if(e&&Q.isString(e)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e,this.parseReviver)}catch(c){if(o)throw c.name==="SyntaxError"?et.from(c,et.ERR_BAD_RESPONSE,this,null,this.response):c}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:jn.classes.FormData,Blob:jn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Q.forEach(["delete","get","head","post","put","patch"],t=>{Nl.headers[t]={}});const QC=Q.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),JC=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||e[n]&&QC[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},y0=Symbol("internals");function ca(t){return t&&String(t).trim().toLowerCase()}function Pc(t){return t===!1||t==null?t:Q.isArray(t)?t.map(Pc):String(t)}function XC(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const ZC=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Kd(t,e,n,r,s){if(Q.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!Q.isString(e)){if(Q.isString(r))return e.indexOf(r)!==-1;if(Q.isRegExp(r))return r.test(e)}}function ej(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function tj(t,e){const n=Q.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,o){return this[r].call(this,e,s,i,o)},configurable:!0})})}let Hn=class{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(c,u,d){const f=ca(u);if(!f)throw new Error("header name must be a non-empty string");const p=Q.findKey(s,f);(!p||s[p]===void 0||d===!0||d===void 0&&s[p]!==!1)&&(s[p||u]=Pc(c))}const o=(c,u)=>Q.forEach(c,(d,f)=>i(d,f,u));if(Q.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(Q.isString(e)&&(e=e.trim())&&!ZC(e))o(JC(e),n);else if(Q.isObject(e)&&Q.isIterable(e)){let c={},u,d;for(const f of e){if(!Q.isArray(f))throw TypeError("Object iterator must return a key-value pair");c[d=f[0]]=(u=c[d])?Q.isArray(u)?[...u,f[1]]:[u,f[1]]:f[1]}o(c,n)}else e!=null&&i(n,e,r);return this}get(e,n){if(e=ca(e),e){const r=Q.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return XC(s);if(Q.isFunction(n))return n.call(this,s,r);if(Q.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=ca(e),e){const r=Q.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Kd(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(o){if(o=ca(o),o){const c=Q.findKey(r,o);c&&(!n||Kd(r,r[c],c,n))&&(delete r[c],s=!0)}}return Q.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||Kd(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return Q.forEach(this,(s,i)=>{const o=Q.findKey(r,i);if(o){n[o]=Pc(s),delete n[i];return}const c=e?ej(i):String(i).trim();c!==i&&delete n[i],n[c]=Pc(s),r[c]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Q.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&Q.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[y0]=this[y0]={accessors:{}}).accessors,s=this.prototype;function i(o){const c=ca(o);r[c]||(tj(s,o),r[c]=!0)}return Q.isArray(e)?e.forEach(i):i(e),this}};Hn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Q.reduceDescriptors(Hn.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});Q.freezeMethods(Hn);function Gd(t,e){const n=this||Nl,r=e||n,s=Hn.from(r.headers);let i=r.data;return Q.forEach(t,function(c){i=c.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function Ov(t){return!!(t&&t.__CANCEL__)}function Uo(t,e,n){et.call(this,t??"canceled",et.ERR_CANCELED,e,n),this.name="CanceledError"}Q.inherits(Uo,et,{__CANCEL__:!0});function Mv(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new et("Request failed with status code "+n.status,[et.ERR_BAD_REQUEST,et.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function nj(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function rj(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(u){const d=Date.now(),f=r[i];o||(o=d),n[s]=u,r[s]=d;let p=i,y=0;for(;p!==s;)y+=n[p++],p=p%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),d-o<e)return;const k=f&&d-f;return k?Math.round(y*1e3/k):void 0}}function sj(t,e){let n=0,r=1e3/e,s,i;const o=(d,f=Date.now())=>{n=f,s=null,i&&(clearTimeout(i),i=null),t(...d)};return[(...d)=>{const f=Date.now(),p=f-n;p>=r?o(d,f):(s=d,i||(i=setTimeout(()=>{i=null,o(s)},r-p)))},()=>s&&o(s)]}const lu=(t,e,n=3)=>{let r=0;const s=rj(50,250);return sj(i=>{const o=i.loaded,c=i.lengthComputable?i.total:void 0,u=o-r,d=s(u),f=o<=c;r=o;const p={loaded:o,total:c,progress:c?o/c:void 0,bytes:u,rate:d||void 0,estimated:d&&c&&f?(c-o)/d:void 0,event:i,lengthComputable:c!=null,[e?"download":"upload"]:!0};t(p)},n)},x0=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},v0=t=>(...e)=>Q.asap(()=>t(...e)),ij=jn.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,jn.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(jn.origin),jn.navigator&&/(msie|trident)/i.test(jn.navigator.userAgent)):()=>!0,oj=jn.hasStandardBrowserEnv?{write(t,e,n,r,s,i,o){if(typeof document>"u")return;const c=[`${t}=${encodeURIComponent(e)}`];Q.isNumber(n)&&c.push(`expires=${new Date(n).toUTCString()}`),Q.isString(r)&&c.push(`path=${r}`),Q.isString(s)&&c.push(`domain=${s}`),i===!0&&c.push("secure"),Q.isString(o)&&c.push(`SameSite=${o}`),document.cookie=c.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function aj(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function lj(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Lv(t,e,n){let r=!aj(e);return t&&(r||n==!1)?lj(t,e):e}const w0=t=>t instanceof Hn?{...t}:t;function Ai(t,e){e=e||{};const n={};function r(d,f,p,y){return Q.isPlainObject(d)&&Q.isPlainObject(f)?Q.merge.call({caseless:y},d,f):Q.isPlainObject(f)?Q.merge({},f):Q.isArray(f)?f.slice():f}function s(d,f,p,y){if(Q.isUndefined(f)){if(!Q.isUndefined(d))return r(void 0,d,p,y)}else return r(d,f,p,y)}function i(d,f){if(!Q.isUndefined(f))return r(void 0,f)}function o(d,f){if(Q.isUndefined(f)){if(!Q.isUndefined(d))return r(void 0,d)}else return r(void 0,f)}function c(d,f,p){if(p in e)return r(d,f);if(p in t)return r(void 0,d)}const u={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c,headers:(d,f,p)=>s(w0(d),w0(f),p,!0)};return Q.forEach(Object.keys({...t,...e}),function(f){const p=u[f]||s,y=p(t[f],e[f],f);Q.isUndefined(y)&&p!==c||(n[f]=y)}),n}const Fv=t=>{const e=Ai({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:c}=e;if(e.headers=o=Hn.from(o),e.url=Av(Lv(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),c&&o.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),Q.isFormData(n)){if(jn.hasStandardBrowserEnv||jn.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(Q.isFunction(n.getHeaders)){const u=n.getHeaders(),d=["content-type","content-length"];Object.entries(u).forEach(([f,p])=>{d.includes(f.toLowerCase())&&o.set(f,p)})}}if(jn.hasStandardBrowserEnv&&(r&&Q.isFunction(r)&&(r=r(e)),r||r!==!1&&ij(e.url))){const u=s&&i&&oj.read(i);u&&o.set(s,u)}return e},cj=typeof XMLHttpRequest<"u",uj=cj&&function(t){return new Promise(function(n,r){const s=Fv(t);let i=s.data;const o=Hn.from(s.headers).normalize();let{responseType:c,onUploadProgress:u,onDownloadProgress:d}=s,f,p,y,k,w;function R(){k&&k(),w&&w(),s.cancelToken&&s.cancelToken.unsubscribe(f),s.signal&&s.signal.removeEventListener("abort",f)}let D=new XMLHttpRequest;D.open(s.method.toUpperCase(),s.url,!0),D.timeout=s.timeout;function S(){if(!D)return;const v=Hn.from("getAllResponseHeaders"in D&&D.getAllResponseHeaders()),q={data:!c||c==="text"||c==="json"?D.responseText:D.response,status:D.status,statusText:D.statusText,headers:v,config:t,request:D};Mv(function(E){n(E),R()},function(E){r(E),R()},q),D=null}"onloadend"in D?D.onloadend=S:D.onreadystatechange=function(){!D||D.readyState!==4||D.status===0&&!(D.responseURL&&D.responseURL.indexOf("file:")===0)||setTimeout(S)},D.onabort=function(){D&&(r(new et("Request aborted",et.ECONNABORTED,t,D)),D=null)},D.onerror=function(L){const q=L&&L.message?L.message:"Network Error",se=new et(q,et.ERR_NETWORK,t,D);se.event=L||null,r(se),D=null},D.ontimeout=function(){let L=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const q=s.transitional||Pv;s.timeoutErrorMessage&&(L=s.timeoutErrorMessage),r(new et(L,q.clarifyTimeoutError?et.ETIMEDOUT:et.ECONNABORTED,t,D)),D=null},i===void 0&&o.setContentType(null),"setRequestHeader"in D&&Q.forEach(o.toJSON(),function(L,q){D.setRequestHeader(q,L)}),Q.isUndefined(s.withCredentials)||(D.withCredentials=!!s.withCredentials),c&&c!=="json"&&(D.responseType=s.responseType),d&&([y,w]=lu(d,!0),D.addEventListener("progress",y)),u&&D.upload&&([p,k]=lu(u),D.upload.addEventListener("progress",p),D.upload.addEventListener("loadend",k)),(s.cancelToken||s.signal)&&(f=v=>{D&&(r(!v||v.type?new Uo(null,t,D):v),D.abort(),D=null)},s.cancelToken&&s.cancelToken.subscribe(f),s.signal&&(s.signal.aborted?f():s.signal.addEventListener("abort",f)));const _=nj(s.url);if(_&&jn.protocols.indexOf(_)===-1){r(new et("Unsupported protocol "+_+":",et.ERR_BAD_REQUEST,t));return}D.send(i||null)})},dj=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,s;const i=function(d){if(!s){s=!0,c();const f=d instanceof Error?d:this.reason;r.abort(f instanceof et?f:new Uo(f instanceof Error?f.message:f))}};let o=e&&setTimeout(()=>{o=null,i(new et(`timeout ${e} of ms exceeded`,et.ETIMEDOUT))},e);const c=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),t=null)};t.forEach(d=>d.addEventListener("abort",i));const{signal:u}=r;return u.unsubscribe=()=>Q.asap(c),u}},hj=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,s;for(;r<n;)s=r+e,yield t.slice(r,s),r=s},fj=async function*(t,e){for await(const n of pj(t))yield*hj(n,e)},pj=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},_0=(t,e,n,r)=>{const s=fj(t,e);let i=0,o,c=u=>{o||(o=!0,r&&r(u))};return new ReadableStream({async pull(u){try{const{done:d,value:f}=await s.next();if(d){c(),u.close();return}let p=f.byteLength;if(n){let y=i+=p;n(y)}u.enqueue(new Uint8Array(f))}catch(d){throw c(d),d}},cancel(u){return c(u),s.return()}},{highWaterMark:2})},b0=64*1024,{isFunction:dc}=Q,mj=(({Request:t,Response:e})=>({Request:t,Response:e}))(Q.global),{ReadableStream:S0,TextEncoder:C0}=Q.global,j0=(t,...e)=>{try{return!!t(...e)}catch{return!1}},gj=t=>{t=Q.merge.call({skipUndefined:!0},mj,t);const{fetch:e,Request:n,Response:r}=t,s=e?dc(e):typeof fetch=="function",i=dc(n),o=dc(r);if(!s)return!1;const c=s&&dc(S0),u=s&&(typeof C0=="function"?(w=>R=>w.encode(R))(new C0):async w=>new Uint8Array(await new n(w).arrayBuffer())),d=i&&c&&j0(()=>{let w=!1;const R=new n(jn.origin,{body:new S0,method:"POST",get duplex(){return w=!0,"half"}}).headers.has("Content-Type");return w&&!R}),f=o&&c&&j0(()=>Q.isReadableStream(new r("").body)),p={stream:f&&(w=>w.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(w=>{!p[w]&&(p[w]=(R,D)=>{let S=R&&R[w];if(S)return S.call(R);throw new et(`Response type '${w}' is not supported`,et.ERR_NOT_SUPPORT,D)})});const y=async w=>{if(w==null)return 0;if(Q.isBlob(w))return w.size;if(Q.isSpecCompliantForm(w))return(await new n(jn.origin,{method:"POST",body:w}).arrayBuffer()).byteLength;if(Q.isArrayBufferView(w)||Q.isArrayBuffer(w))return w.byteLength;if(Q.isURLSearchParams(w)&&(w=w+""),Q.isString(w))return(await u(w)).byteLength},k=async(w,R)=>{const D=Q.toFiniteNumber(w.getContentLength());return D??y(R)};return async w=>{let{url:R,method:D,data:S,signal:_,cancelToken:v,timeout:L,onDownloadProgress:q,onUploadProgress:se,responseType:E,headers:x,withCredentials:j="same-origin",fetchOptions:I}=Fv(w),N=e||fetch;E=E?(E+"").toLowerCase():"text";let O=dj([_,v&&v.toAbortSignal()],L),C=null;const V=O&&O.unsubscribe&&(()=>{O.unsubscribe()});let _e;try{if(se&&d&&D!=="get"&&D!=="head"&&(_e=await k(x,S))!==0){let G=new n(R,{method:"POST",body:S,duplex:"half"}),he;if(Q.isFormData(S)&&(he=G.headers.get("content-type"))&&x.setContentType(he),G.body){const[Ne,ke]=x0(_e,lu(v0(se)));S=_0(G.body,b0,Ne,ke)}}Q.isString(j)||(j=j?"include":"omit");const Z=i&&"credentials"in n.prototype,Se={...I,signal:O,method:D.toUpperCase(),headers:x.normalize().toJSON(),body:S,duplex:"half",credentials:Z?j:void 0};C=i&&new n(R,Se);let X=await(i?N(C,I):N(R,Se));const Y=f&&(E==="stream"||E==="response");if(f&&(q||Y&&V)){const G={};["status","statusText","headers"].forEach(ge=>{G[ge]=X[ge]});const he=Q.toFiniteNumber(X.headers.get("content-length")),[Ne,ke]=q&&x0(he,lu(v0(q),!0))||[];X=new r(_0(X.body,b0,Ne,()=>{ke&&ke(),V&&V()}),G)}E=E||"text";let ie=await p[Q.findKey(p,E)||"text"](X,w);return!Y&&V&&V(),await new Promise((G,he)=>{Mv(G,he,{data:ie,headers:Hn.from(X.headers),status:X.status,statusText:X.statusText,config:w,request:C})})}catch(Z){throw V&&V(),Z&&Z.name==="TypeError"&&/Load failed|fetch/i.test(Z.message)?Object.assign(new et("Network Error",et.ERR_NETWORK,w,C),{cause:Z.cause||Z}):et.from(Z,Z&&Z.code,w,C)}}},yj=new Map,zv=t=>{let e=t&&t.env||{};const{fetch:n,Request:r,Response:s}=e,i=[r,s,n];let o=i.length,c=o,u,d,f=yj;for(;c--;)u=i[c],d=f.get(u),d===void 0&&f.set(u,d=c?new Map:gj(e)),f=d;return d};zv();const Lp={http:DC,xhr:uj,fetch:{get:zv}};Q.forEach(Lp,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const E0=t=>`- ${t}`,xj=t=>Q.isFunction(t)||t===null||t===!1;function vj(t,e){t=Q.isArray(t)?t:[t];const{length:n}=t;let r,s;const i={};for(let o=0;o<n;o++){r=t[o];let c;if(s=r,!xj(r)&&(s=Lp[(c=String(r)).toLowerCase()],s===void 0))throw new et(`Unknown adapter '${c}'`);if(s&&(Q.isFunction(s)||(s=s.get(e))))break;i[c||"#"+o]=s}if(!s){const o=Object.entries(i).map(([u,d])=>`adapter ${u} `+(d===!1?"is not supported by the environment":"is not available in the build"));let c=n?o.length>1?`since :
`+o.map(E0).join(`
`):" "+E0(o[0]):"as no adapter specified";throw new et("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return s}const Bv={getAdapter:vj,adapters:Lp};function qd(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Uo(null,t)}function I0(t){return qd(t),t.headers=Hn.from(t.headers),t.data=Gd.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Bv.getAdapter(t.adapter||Nl.adapter,t)(t).then(function(r){return qd(t),r.data=Gd.call(t,t.transformResponse,r),r.headers=Hn.from(r.headers),r},function(r){return Ov(r)||(qd(t),r&&r.response&&(r.response.data=Gd.call(t,t.transformResponse,r.response),r.response.headers=Hn.from(r.response.headers))),Promise.reject(r)})}const $v="1.13.2",Yu={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Yu[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const k0={};Yu.transitional=function(e,n,r){function s(i,o){return"[Axios v"+$v+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,c)=>{if(e===!1)throw new et(s(o," has been removed"+(n?" in "+n:"")),et.ERR_DEPRECATED);return n&&!k0[o]&&(k0[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,c):!0}};Yu.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function wj(t,e,n){if(typeof t!="object")throw new et("options must be an object",et.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],o=e[i];if(o){const c=t[i],u=c===void 0||o(c,i,t);if(u!==!0)throw new et("option "+i+" must be "+u,et.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new et("Unknown option "+i,et.ERR_BAD_OPTION)}}const Dc={assertOptions:wj,validators:Yu},Pr=Dc.validators;let Ci=class{constructor(e){this.defaults=e||{},this.interceptors={request:new g0,response:new g0}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Ai(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&Dc.assertOptions(r,{silentJSONParsing:Pr.transitional(Pr.boolean),forcedJSONParsing:Pr.transitional(Pr.boolean),clarifyTimeoutError:Pr.transitional(Pr.boolean)},!1),s!=null&&(Q.isFunction(s)?n.paramsSerializer={serialize:s}:Dc.assertOptions(s,{encode:Pr.function,serialize:Pr.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Dc.assertOptions(n,{baseUrl:Pr.spelling("baseURL"),withXsrfToken:Pr.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&Q.merge(i.common,i[n.method]);i&&Q.forEach(["delete","get","head","post","put","patch","common"],w=>{delete i[w]}),n.headers=Hn.concat(o,i);const c=[];let u=!0;this.interceptors.request.forEach(function(R){typeof R.runWhen=="function"&&R.runWhen(n)===!1||(u=u&&R.synchronous,c.unshift(R.fulfilled,R.rejected))});const d=[];this.interceptors.response.forEach(function(R){d.push(R.fulfilled,R.rejected)});let f,p=0,y;if(!u){const w=[I0.bind(this),void 0];for(w.unshift(...c),w.push(...d),y=w.length,f=Promise.resolve(n);p<y;)f=f.then(w[p++],w[p++]);return f}y=c.length;let k=n;for(;p<y;){const w=c[p++],R=c[p++];try{k=w(k)}catch(D){R.call(this,D);break}}try{f=I0.call(this,k)}catch(w){return Promise.reject(w)}for(p=0,y=d.length;p<y;)f=f.then(d[p++],d[p++]);return f}getUri(e){e=Ai(this.defaults,e);const n=Lv(e.baseURL,e.url,e.allowAbsoluteUrls);return Av(n,e.params,e.paramsSerializer)}};Q.forEach(["delete","get","head","options"],function(e){Ci.prototype[e]=function(n,r){return this.request(Ai(r||{},{method:e,url:n,data:(r||{}).data}))}});Q.forEach(["post","put","patch"],function(e){function n(r){return function(i,o,c){return this.request(Ai(c||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}Ci.prototype[e]=n(),Ci.prototype[e+"Form"]=n(!0)});let _j=class Uv{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(c=>{r.subscribe(c),i=c}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,c){r.reason||(r.reason=new Uo(i,o,c),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new Uv(function(s){e=s}),cancel:e}}};function bj(t){return function(n){return t.apply(null,n)}}function Sj(t){return Q.isObject(t)&&t.isAxiosError===!0}const hf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(hf).forEach(([t,e])=>{hf[e]=t});function Wv(t){const e=new Ci(t),n=wv(Ci.prototype.request,e);return Q.extend(n,Ci.prototype,e,{allOwnKeys:!0}),Q.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return Wv(Ai(t,s))},n}const ee=Wv(Nl);ee.Axios=Ci;ee.CanceledError=Uo;ee.CancelToken=_j;ee.isCancel=Ov;ee.VERSION=$v;ee.toFormData=qu;ee.AxiosError=et;ee.Cancel=ee.CanceledError;ee.all=function(e){return Promise.all(e)};ee.spread=bj;ee.isAxiosError=Sj;ee.mergeConfig=Ai;ee.AxiosHeaders=Hn;ee.formToJSON=t=>Dv(Q.isHTMLForm(t)?new FormData(t):t);ee.getAdapter=Bv.getAdapter;ee.HttpStatusCode=hf;ee.default=ee;const{Axios:YN,AxiosError:QN,CanceledError:JN,isCancel:XN,CancelToken:ZN,VERSION:e5,all:t5,Cancel:n5,isAxiosError:r5,spread:s5,toFormData:i5,AxiosHeaders:o5,HttpStatusCode:a5,formToJSON:l5,getAdapter:c5,mergeConfig:u5}=ee;var Hy,Vy;const Cj=((Vy=(Hy=import.meta)==null?void 0:Hy.env)==null?void 0:Vy.VITE_API_BASE)||"https://gojo-teacher-web.onrender.com/api",jj=async(t,e)=>{try{return(await ee.post(`${Cj}/teacher_login`,{username:t,password:e})).data}catch(n){return console.error("Login error:",n.response?n.response.data:n.message),{success:!1,message:"Network error or server not reachable"}}};function Yd(){const t=Vn(),[e,n]=g.useState(""),[r,s]=g.useState(""),[i,o]=g.useState(""),c=async u=>{u.preventDefault(),o("");const d=await jj(e,r);d.success?(localStorage.setItem("teacher",JSON.stringify(d.teacher)),t("/dashboard")):o(d.message||"Login failed")};return a.jsx("div",{className:"auth-container",children:a.jsxs("div",{className:"auth-box",children:[a.jsx("h2",{children:"Teacher Login"}),i&&a.jsx("p",{className:"auth-error",children:i}),a.jsxs("form",{onSubmit:c,children:[a.jsx("input",{type:"text",placeholder:"Username",value:e,onChange:u=>n(u.target.value),required:!0}),a.jsx("input",{type:"password",placeholder:"Password",value:r,onChange:u=>s(u.target.value),required:!0}),a.jsx("button",{type:"submit",className:"submit-btn",children:"Login"})]}),a.jsxs("p",{className:"auth-link",children:["Don't have an account? ",a.jsx(ye,{to:"/register",children:"Register Here"})]})]})})}function Ej(){Vn();const t=["7","8","9","10","11 Social","11 Natural","12 Social","12 Natural"],e=["A","B","C"],n={7:["Mathematics","Amharic","English","Biology","Physics","Chemistry","Geography","History","Civics","ICT","Oromifa","Physical Education"],8:["Mathematics","Amharic","English","Biology","Physics","Chemistry","Geography","History","Civics","ICT","Oromifa","Physical Education"],9:["Mathematics","English","Biology","Physics","Chemistry","Geography","History","Civics","ICT","Physical Education"],10:["Mathematics","English","Biology","Physics","Chemistry","Geography","History","Civics","ICT","Physical Education"],"11 Social":["Mathematics","English","Physics","Chemistry","Biology","Economics","Geography","History"],"11 Natural":["Mathematics","English","Physics","Chemistry","Biology","Economics","Geography","History"],"12 Social":["Mathematics","English","Physics","Chemistry","Biology","Economics","Geography","History"],"12 Natural":["Mathematics","English","Physics","Chemistry","Biology","Economics","Geography","History"]},[r,s]=g.useState({name:"",password:"",email:"",phone:"",gender:"",courses:[{grade:"",section:"",subject:""}]}),[i,o]=g.useState(null),[c,u]=g.useState(""),[d,f]=g.useState(""),p=(_,v=null)=>{const{name:L,value:q}=_.target;if(v!==null){const se=[...r.courses];se[v][L]=q,L==="grade"&&(se[v].subject=""),s({...r,courses:se})}else s({...r,[L]:q})},y=()=>{s({...r,courses:[...r.courses,{grade:"",section:"",subject:""}]})},k=_=>{const v=r.courses.filter((L,q)=>q!==_);s({...r,courses:v})},w=()=>{const _=new Set;for(let v of r.courses){if(!v.grade||!v.section||!v.subject)continue;const L=`${v.grade}${v.section}-${v.subject}`;if(_.has(L))return!0;_.add(L)}return!1},R=_=>_===""||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(_).toLowerCase()),D=_=>/^[0-9+()\-\s]{6,20}$/.test(String(_).trim()),S=async _=>{if(_.preventDefault(),u(""),f(""),!R(r.email)){u("Please enter a valid email address or leave it empty.");return}if(!D(r.phone)){u("Please enter a valid phone number.");return}if(!r.gender){u("Please select gender.");return}if(!r.name||!r.password){u("Name and password are required.");return}if(w()){u("Duplicate subject detected! A subject can only be taught once per grade and section.");return}try{const v=new FormData;v.append("name",r.name),v.append("password",r.password),v.append("email",r.email),v.append("phone",r.phone),v.append("gender",r.gender),v.append("courses",JSON.stringify(r.courses)),i&&v.append("profile",i);const q=await(await fetch("https://gojo-teacher-web.onrender.com/register/teacher",{method:"POST",body:v})).json();if(q.success){const se=q.teacherKey||q.teacherId||q.teacherKey||q.teacherId||"";f(se),s({name:"",password:"",email:"",phone:"",gender:"",courses:[{grade:"",section:"",subject:""}]}),o(null),u("Registration successful. Your teacherId (username) is shown below.")}else u(q.message||"Registration failed.")}catch(v){console.error("Registration error:",v),u("Server error. Check console.")}};return a.jsx("div",{className:"auth-container",children:a.jsxs("div",{className:"auth-box",style:{maxWidth:"600px"},children:[a.jsx("h2",{children:"Teacher Registration"}),c&&a.jsx("p",{className:"auth-error",children:c}),a.jsxs("form",{onSubmit:S,children:[a.jsx("input",{type:"text",name:"name",placeholder:"Full Name",value:r.name,onChange:p,required:!0}),a.jsx("input",{type:"email",name:"email",placeholder:"Email (optional)",value:r.email,onChange:p}),a.jsx("input",{type:"tel",name:"phone",placeholder:"Phone number",value:r.phone,onChange:p,required:!0}),a.jsxs("select",{name:"gender",value:r.gender,onChange:p,required:!0,children:[a.jsx("option",{value:"",children:"Select Gender"}),a.jsx("option",{value:"Male",children:"Male"}),a.jsx("option",{value:"Female",children:"Female"}),a.jsx("option",{value:"Other",children:"Other"}),a.jsx("option",{value:"Prefer not to say",children:"Prefer not to say"})]}),a.jsx("input",{type:"password",name:"password",placeholder:"Password",value:r.password,onChange:p,required:!0}),a.jsxs("div",{className:"profile-upload",children:[i&&a.jsx("img",{src:URL.createObjectURL(i),alt:"Profile Preview",className:"profile-preview"}),a.jsx("input",{type:"file",accept:"image/*",onChange:_=>o(_.target.files[0])})]}),a.jsx("h3",{children:"Courses"}),r.courses.map((_,v)=>a.jsxs("div",{className:"course-group",children:[a.jsxs("select",{name:"grade",value:_.grade,onChange:L=>p(L,v),required:!0,children:[a.jsx("option",{value:"",children:"Select Grade"}),t.map(L=>a.jsx("option",{value:L,children:L},L))]}),a.jsxs("select",{name:"section",value:_.section,onChange:L=>p(L,v),required:!0,children:[a.jsx("option",{value:"",children:"Select Section"}),e.map(L=>a.jsx("option",{value:L,children:L},L))]}),a.jsxs("select",{name:"subject",value:_.subject,onChange:L=>p(L,v),required:!0,disabled:!_.grade,children:[a.jsx("option",{value:"",children:"Select Subject"}),_.grade&&n[_.grade].map(L=>a.jsx("option",{value:L,children:L},L))]}),r.courses.length>1&&a.jsx("button",{type:"button",className:"remove-btn",onClick:()=>k(v),children:"Remove"})]},v)),a.jsx("button",{type:"button",className:"add-btn",onClick:y,children:"Add Course"}),a.jsx("button",{type:"submit",className:"submit-btn",children:"Register"})]}),d&&a.jsxs("div",{className:"auth-success",style:{marginTop:12},children:[a.jsxs("p",{children:["Registration complete. Your teacherId (username) is:"," ",a.jsx("strong",{children:d})]}),a.jsxs("p",{children:["Use this ID to log in: ",a.jsx(ye,{to:"/login",children:"Go to Login"})]})]}),a.jsxs("p",{className:"auth-link",children:["Already have an account? ",a.jsx(ye,{to:"/login",children:"Go to Login"})]})]})})}var Hv={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},N0=kt.createContext&&kt.createContext(Hv),Ij=["attr","size","title"];function kj(t,e){if(t==null)return{};var n=Nj(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Nj(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function cu(){return cu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cu.apply(this,arguments)}function T0(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function uu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?T0(Object(n),!0).forEach(function(r){Tj(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T0(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Tj(t,e,n){return e=Rj(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rj(t){var e=Aj(t,"string");return typeof e=="symbol"?e:e+""}function Aj(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vv(t){return t&&t.map((e,n)=>kt.createElement(e.tag,uu({key:n},e.attr),Vv(e.child)))}function xt(t){return e=>kt.createElement(Pj,cu({attr:uu({},t.attr)},e),Vv(t.child))}function Pj(t){var e=n=>{var{attr:r,size:s,title:i}=t,o=kj(t,Ij),c=s||n.size||"1em",u;return n.className&&(u=n.className),t.className&&(u=(u?u+" ":"")+t.className),kt.createElement("svg",cu({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:u,style:uu(uu({color:t.color||n.color},n.style),t.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),i&&kt.createElement("title",null,i),t.children)};return N0!==void 0?kt.createElement(N0.Consumer,null,n=>e(n)):e(Hv)}function ms(t){return xt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256.55 8C116.52 8 8 110.34 8 248.57c0 72.3 29.71 134.78 78.07 177.94 8.35 7.51 6.63 11.86 8.05 58.23A19.92 19.92 0 0 0 122 502.31c52.91-23.3 53.59-25.14 62.56-22.7C337.85 521.8 504 423.7 504 248.57 504 110.34 396.59 8 256.55 8zm149.24 185.13l-73 115.57a37.37 37.37 0 0 1-53.91 9.93l-58.08-43.47a15 15 0 0 0-18 0l-78.37 59.44c-10.46 7.93-24.16-4.6-17.11-15.67l73-115.57a37.36 37.36 0 0 1 53.91-9.93l58.06 43.46a15 15 0 0 0 18 0l78.41-59.38c10.44-7.98 24.14 4.54 17.09 15.62z"},child:[]}]})(t)}function R0(t){return xt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(t)}function gs(t){return xt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(t)}function ys(t){return xt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M542.22 32.05c-54.8 3.11-163.72 14.43-230.96 55.59-4.64 2.84-7.27 7.89-7.27 13.17v363.87c0 11.55 12.63 18.85 23.28 13.49 69.18-34.82 169.23-44.32 218.7-46.92 16.89-.89 30.02-14.43 30.02-30.66V62.75c.01-17.71-15.35-31.74-33.77-30.7zM264.73 87.64C197.5 46.48 88.58 35.17 33.78 32.05 15.36 31.01 0 45.04 0 62.75V400.6c0 16.24 13.13 29.78 30.02 30.66 49.49 2.6 149.59 12.11 218.77 46.95 10.62 5.35 23.21-1.94 23.21-13.46V100.63c0-5.29-2.62-10.14-7.27-12.99z"},child:[]}]})(t)}function Ur(t){return xt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"},child:[]}]})(t)}function Wr(t){return xt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M208 352c-2.39 0-4.78.35-7.06 1.09C187.98 357.3 174.35 360 160 360c-14.35 0-27.98-2.7-40.95-6.91-2.28-.74-4.66-1.09-7.05-1.09C49.94 352-.33 402.48 0 464.62.14 490.88 21.73 512 48 512h224c26.27 0 47.86-21.12 48-47.38.33-62.14-49.94-112.62-112-112.62zm-48-32c53.02 0 96-42.98 96-96s-42.98-96-96-96-96 42.98-96 96 42.98 96 96 96zM592 0H208c-26.47 0-48 22.25-48 49.59V96c23.42 0 45.1 6.78 64 17.8V64h352v288h-64v-64H384v64h-76.24c19.1 16.69 33.12 38.73 39.69 64H592c26.47 0 48-22.25 48-49.59V49.59C640 22.25 618.47 0 592 0z"},child:[]}]})(t)}function Dj(t){return xt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(t)}function Io(t){return xt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(t)}function Oj(t){return xt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(t)}function Kv(t){return xt({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(t)}function us(t){return xt({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(t)}function Mj(t){return xt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"},child:[]}]})(t)}function lr(t){return xt({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM192 40c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm121.2 231.8l-143 141.8c-4.7 4.7-12.3 4.6-17-.1l-82.6-83.3c-4.7-4.7-4.6-12.3.1-17L99.1 285c4.7-4.7 12.3-4.6 17 .1l46 46.4 106-105.2c4.7-4.7 12.3-4.6 17 .1l28.2 28.4c4.7 4.8 4.6 12.3-.1 17z"},child:[]}]})(t)}function Lj(t){return xt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"},child:[]}]})(t)}function Ir(t){return xt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(t)}function Fp(t){return xt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 32C114.6 32 0 125.1 0 240c0 49.6 21.4 95 57 130.7C44.5 421.1 2.7 466 2.2 466.5c-2.2 2.3-2.8 5.7-1.5 8.7S4.8 480 8 480c66.3 0 116-31.8 140.6-51.4 32.7 12.3 69 19.4 107.4 19.4 141.4 0 256-93.1 256-208S397.4 32 256 32zM128 272c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 0c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 0c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"},child:[]}]})(t)}function Fj(t){return xt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(t)}function zj(t){return xt({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm60.1 106.5L224 336l60.1 93.5c5.1 8-.6 18.5-10.1 18.5h-34.9c-4.4 0-8.5-2.4-10.6-6.3C208.9 405.5 192 373 192 373c-6.4 14.8-10 20-36.6 68.8-2.1 3.9-6.1 6.3-10.5 6.3H110c-9.5 0-15.2-10.5-10.1-18.5l60.3-93.5-60.3-93.5c-5.2-8 .6-18.5 10.1-18.5h34.8c4.4 0 8.5 2.4 10.6 6.3 26.1 48.8 20 33.6 36.6 68.5 0 0 6.1-11.7 36.6-68.5 2.1-3.9 6.2-6.3 10.6-6.3H274c9.5-.1 15.2 10.4 10.1 18.4zM384 121.9v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"},child:[]}]})(t)}function Bj(t){return xt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"},child:[]}]})(t)}function Hr(t){return xt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(t)}function Gv(t){return xt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"},child:[]}]})(t)}function qv(t){return xt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(t)}function ff(t){return xt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"},child:[]}]})(t)}function $j(t){return xt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(t)}function Vr(t){return xt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}function pf(t){return xt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(t)}function Uj(t){return xt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M296 384h-80c-13.3 0-24-10.7-24-24V192h-87.7c-17.8 0-26.7-21.5-14.1-34.1L242.3 5.7c7.5-7.5 19.8-7.5 27.3 0l152.2 152.2c12.6 12.6 3.7 34.1-14.1 34.1H320v168c0 13.3-10.7 24-24 24zm216-8v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h136v8c0 30.9 25.1 56 56 56h80c30.9 0 56-25.1 56-56v-8h136c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(t)}function xs(t){return xt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4zm323-128.4l-27.8-28.1c-4.6-4.7-12.1-4.7-16.8-.1l-104.8 104-45.5-45.8c-4.6-4.7-12.1-4.7-16.8-.1l-28.1 27.9c-4.7 4.6-4.7 12.1-.1 16.8l81.7 82.3c4.6 4.7 12.1 4.7 16.8.1l141.3-140.2c4.6-4.7 4.7-12.2.1-16.8z"},child:[]}]})(t)}function Ut(t){return xt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(t)}function Wj(t){return xt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M458.4 64.3C400.6 15.7 311.3 23 256 79.3 200.7 23 111.4 15.6 53.6 64.3-21.6 127.6-10.6 230.8 43 285.5l175.4 178.7c10 10.2 23.4 15.9 37.6 15.9 14.3 0 27.6-5.6 37.6-15.8L469 285.6c53.5-54.7 64.7-157.9-10.6-221.3zm-23.6 187.5L259.4 430.5c-2.4 2.4-4.4 2.4-6.8 0L77.2 251.8c-36.5-37.2-43.9-107.6 7.3-150.7 38.9-32.7 98.9-27.8 136.5 10.5l35 35.7 35-35.7c37.8-38.5 97.8-43.2 136.5-10.6 51.1 43.1 43.5 113.9 7.3 150.8z"},child:[]}]})(t)}const Hj=()=>{};var A0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const we=function(t,e){if(!t)throw Wo(e)},Wo=function(t){return new Error("Firebase Database ("+Yv.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Vj=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},zp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,f=i>>2,p=(i&3)<<4|c>>4;let y=(c&15)<<2|d>>6,k=d&63;u||(k=64,o||(y=64)),r.push(n[f],n[p],n[y],n[k])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Qv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Vj(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||d==null||p==null)throw new Kj;const y=i<<2|c>>4;if(r.push(y),d!==64){const k=c<<4&240|d>>2;if(r.push(k),p!==64){const w=d<<6&192|p;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Kj extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Jv=function(t){const e=Qv(t);return zp.encodeByteArray(e,!0)},du=function(t){return Jv(t).replace(/\./g,"")},mf=function(t){try{return zp.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gj(t){return Xv(void 0,t)}function Xv(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!qj(n)||(t[n]=Xv(t[n],e[n]));return t}function qj(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qj=()=>Yj().__FIREBASE_DEFAULTS__,Jj=()=>{if(typeof process>"u"||typeof A0>"u")return;const t=A0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Xj=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&mf(t[1]);return e&&JSON.parse(e)},Zv=()=>{try{return Hj()||Qj()||Jj()||Xj()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Zj=t=>{var e,n;return(n=(e=Zv())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},ew=t=>{const e=Zj(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},tw=()=>{var t;return(t=Zv())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qu(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function nw(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[du(JSON.stringify(n)),du(JSON.stringify(o)),""].join(".")}const Ta={};function eE(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ta))Ta[e]?t.emulator.push(e):t.prod.push(e);return t}function tE(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let P0=!1;function sw(t,e){if(typeof window>"u"||typeof document>"u"||!Qu(window.location.host)||Ta[t]===e||Ta[t]||P0)return;Ta[t]=e;function n(y){return`__firebase__banner__${y}`}const r="__firebase__banner",i=eE().prod.length>0;function o(){const y=document.getElementById(r);y&&y.remove()}function c(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function u(y,k){y.setAttribute("width","24"),y.setAttribute("id",k),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function d(){const y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{P0=!0,o()},y}function f(y,k){y.setAttribute("id",k),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function p(){const y=tE(r),k=n("text"),w=document.getElementById(k)||document.createElement("span"),R=n("learnmore"),D=document.getElementById(R)||document.createElement("a"),S=n("preprendIcon"),_=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){const v=y.element;c(v),f(D,R);const L=d();u(_,S),v.append(_,w,D,L),document.body.appendChild(v)}i?(w.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nE())}function rE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sE(){return Yv.NODE_ADMIN===!0}function iE(){try{return typeof indexedDB=="object"}catch{return!1}}function oE(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="FirebaseError";class Ho extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=aE,Object.setPrototypeOf(this,Ho.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ow.prototype.create)}}class ow{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?lE(i,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new Ho(s,c,r)}}function lE(t,e){return t.replace(cE,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const cE=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sl(t){return JSON.parse(t)}function an(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=sl(mf(i[0])||""),n=sl(mf(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},uE=function(t){const e=aw(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},dE=function(t){const e=aw(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ko(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function D0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function hu(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function il(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(O0(i)&&O0(o)){if(!il(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function O0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let p=0;p<16;p++)r[p]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let p=0;p<16;p++)r[p]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let p=16;p<80;p++){const y=r[p-3]^r[p-8]^r[p-14]^r[p-16];r[p]=(y<<1|y>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],c=this.chain_[3],u=this.chain_[4],d,f;for(let p=0;p<80;p++){p<40?p<20?(d=c^i&(o^c),f=1518500249):(d=i^o^c,f=1859775393):p<60?(d=i&o|c&(i|o),f=2400959708):(d=i^o^c,f=3395469782);const y=(s<<5|s>>>27)+d+u+f+r[p]&4294967295;u=c,c=o,o=(i<<30|i>>>2)&4294967295,i=s,s=y}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function Ju(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,we(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Xu=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bi(t){return t&&t._delegate?t._delegate:t}class No{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Tl;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(yE(e))try{this.getOrInitializeService({instanceIdentifier:fi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=fi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fi){return this.instances.has(e)}getOptions(e=fi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:gE(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=fi){return this.component?this.component.multipleInstances?e:fi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function gE(t){return t===fi?void 0:t}function yE(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new mE(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(wt||(wt={}));const vE={debug:wt.DEBUG,verbose:wt.VERBOSE,info:wt.INFO,warn:wt.WARN,error:wt.ERROR,silent:wt.SILENT},wE=wt.INFO,_E={[wt.DEBUG]:"log",[wt.VERBOSE]:"log",[wt.INFO]:"info",[wt.WARN]:"warn",[wt.ERROR]:"error"},bE=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=_E[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Bp{constructor(e){this.name=e,this._logLevel=wE,this._logHandler=bE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in wt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,wt.DEBUG,...e),this._logHandler(this,wt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,wt.VERBOSE,...e),this._logHandler(this,wt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,wt.INFO,...e),this._logHandler(this,wt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,wt.WARN,...e),this._logHandler(this,wt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,wt.ERROR,...e),this._logHandler(this,wt.ERROR,...e)}}const SE=(t,e)=>e.some(n=>t instanceof n);let M0,L0;function CE(){return M0||(M0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jE(){return L0||(L0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lw=new WeakMap,gf=new WeakMap,cw=new WeakMap,Qd=new WeakMap,$p=new WeakMap;function EE(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ws(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&lw.set(n,t)}).catch(()=>{}),$p.set(e,t),e}function IE(t){if(gf.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});gf.set(t,e)}let yf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return gf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||cw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ws(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function kE(t){yf=t(yf)}function NE(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Jd(this),e,...n);return cw.set(r,e.sort?e.sort():[e]),Ws(r)}:jE().includes(t)?function(...e){return t.apply(Jd(this),e),Ws(lw.get(this))}:function(...e){return Ws(t.apply(Jd(this),e))}}function TE(t){return typeof t=="function"?NE(t):(t instanceof IDBTransaction&&IE(t),SE(t,CE())?new Proxy(t,yf):t)}function Ws(t){if(t instanceof IDBRequest)return EE(t);if(Qd.has(t))return Qd.get(t);const e=TE(t);return e!==t&&(Qd.set(t,e),$p.set(e,t)),e}const Jd=t=>$p.get(t);function RE(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=Ws(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Ws(o.result),u.oldVersion,u.newVersion,Ws(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const AE=["get","getKey","getAll","getAllKeys","count"],PE=["put","add","delete","clear"],Xd=new Map;function F0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xd.get(e))return Xd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=PE.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||AE.includes(n)))return;const i=async function(o,...c){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return Xd.set(e,i),i}kE(t=>({...t,get:(e,n,r)=>F0(e,n)||t.get(e,n,r),has:(e,n)=>!!F0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(OE(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function OE(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const xf="@firebase/app",z0="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds=new Bp("@firebase/app"),ME="@firebase/app-compat",LE="@firebase/analytics-compat",FE="@firebase/analytics",zE="@firebase/app-check-compat",BE="@firebase/app-check",$E="@firebase/auth",UE="@firebase/auth-compat",WE="@firebase/database",HE="@firebase/data-connect",VE="@firebase/database-compat",KE="@firebase/functions",GE="@firebase/functions-compat",qE="@firebase/installations",YE="@firebase/installations-compat",QE="@firebase/messaging",JE="@firebase/messaging-compat",XE="@firebase/performance",ZE="@firebase/performance-compat",eI="@firebase/remote-config",tI="@firebase/remote-config-compat",nI="@firebase/storage",rI="@firebase/storage-compat",sI="@firebase/firestore",iI="@firebase/ai",oI="@firebase/firestore-compat",aI="firebase",lI="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vf="[DEFAULT]",cI={[xf]:"fire-core",[ME]:"fire-core-compat",[FE]:"fire-analytics",[LE]:"fire-analytics-compat",[BE]:"fire-app-check",[zE]:"fire-app-check-compat",[$E]:"fire-auth",[UE]:"fire-auth-compat",[WE]:"fire-rtdb",[HE]:"fire-data-connect",[VE]:"fire-rtdb-compat",[KE]:"fire-fn",[GE]:"fire-fn-compat",[qE]:"fire-iid",[YE]:"fire-iid-compat",[QE]:"fire-fcm",[JE]:"fire-fcm-compat",[XE]:"fire-perf",[ZE]:"fire-perf-compat",[eI]:"fire-rc",[tI]:"fire-rc-compat",[nI]:"fire-gcs",[rI]:"fire-gcs-compat",[sI]:"fire-fst",[oI]:"fire-fst-compat",[iI]:"fire-vertex","fire-js":"fire-js",[aI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ol=new Map,uI=new Map,wf=new Map;function B0(t,e){try{t.container.addComponent(e)}catch(n){ds.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function al(t){const e=t.name;if(wf.has(e))return ds.debug(`There were multiple attempts to register component ${e}.`),!1;wf.set(e,t);for(const n of ol.values())B0(n,t);for(const n of uI.values())B0(n,t);return!0}function uw(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function dw(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Hs=new ow("app","Firebase",dI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new No("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Hs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw=lI;function fw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:vf,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Hs.create("bad-app-name",{appName:String(s)});if(n||(n=tw()),!n)throw Hs.create("no-options");const i=ol.get(s);if(i){if(il(n,i.options)&&il(r,i.config))return i;throw Hs.create("duplicate-app",{appName:s})}const o=new xE(s);for(const u of wf.values())o.addComponent(u);const c=new hI(n,r,o);return ol.set(s,c),c}function pw(t=vf){const e=ol.get(t);if(!e&&t===vf&&tw())return fw();if(!e)throw Hs.create("no-app",{appName:t});return e}function $0(){return Array.from(ol.values())}function Vs(t,e,n){let r=cI[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ds.warn(o.join(" "));return}al(new No(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI="firebase-heartbeat-database",pI=1,ll="firebase-heartbeat-store";let Zd=null;function mw(){return Zd||(Zd=RE(fI,pI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ll)}catch(n){console.warn(n)}}}}).catch(t=>{throw Hs.create("idb-open",{originalErrorMessage:t.message})})),Zd}async function mI(t){try{const n=(await mw()).transaction(ll),r=await n.objectStore(ll).get(gw(t));return await n.done,r}catch(e){if(e instanceof Ho)ds.warn(e.message);else{const n=Hs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ds.warn(n.message)}}}async function U0(t,e){try{const r=(await mw()).transaction(ll,"readwrite");await r.objectStore(ll).put(e,gw(t)),await r.done}catch(n){if(n instanceof Ho)ds.warn(n.message);else{const r=Hs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ds.warn(r.message)}}}function gw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI=1024,yI=30;class xI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new wI(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=W0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>yI){const o=_I(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ds.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=W0(),{heartbeatsToSend:r,unsentEntries:s}=vI(this._heartbeatsCache.heartbeats),i=du(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return ds.warn(n),""}}}function W0(){return new Date().toISOString().substring(0,10)}function vI(t,e=gI){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),H0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),H0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class wI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return iE()?oE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await mI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return U0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return U0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function H0(t){return du(JSON.stringify({version:2,heartbeats:t})).length}function _I(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(t){al(new No("platform-logger",e=>new DE(e),"PRIVATE")),al(new No("heartbeat",e=>new xI(e),"PRIVATE")),Vs(xf,z0,t),Vs(xf,z0,"esm2020"),Vs("fire-js","")}bI("");var SI="firebase",CI="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vs(SI,CI,"app");var V0={};const K0="@firebase/database",G0="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yw="";function jI(t){yw=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),an(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:sl(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Kr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new EI(e)}}catch{}return new II},wi=xw("localStorage"),kI=xw("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo=new Bp("@firebase/database"),NI=function(){let t=1;return function(){return t++}}(),vw=function(t){const e=pE(t),n=new fE;n.update(e);const r=n.digest();return zp.encodeByteArray(r)},Rl=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Rl.apply(null,r):typeof r=="object"?e+=an(r):e+=r,e+=" "}return e};let Ra=null,q0=!0;const TI=function(t,e){we(!0,"Can't turn on custom loggers persistently."),mo.logLevel=wt.VERBOSE,Ra=mo.log.bind(mo)},yn=function(...t){if(q0===!0&&(q0=!1,Ra===null&&kI.get("logging_enabled")===!0&&TI()),Ra){const e=Rl.apply(null,t);Ra(e)}},Al=function(t){return function(...e){yn(t,...e)}},_f=function(...t){const e="FIREBASE INTERNAL ERROR: "+Rl(...t);mo.error(e)},hs=function(...t){const e=`FIREBASE FATAL ERROR: ${Rl(...t)}`;throw mo.error(e),new Error(e)},Rn=function(...t){const e="FIREBASE WARNING: "+Rl(...t);mo.warn(e)},RI=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Rn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Up=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},AI=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},To="[MIN_NAME]",Pi="[MAX_NAME]",$i=function(t,e){if(t===e)return 0;if(t===To||e===Pi)return-1;if(e===To||t===Pi)return 1;{const n=Y0(t),r=Y0(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},PI=function(t,e){return t===e?0:t<e?-1:1},ua=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+an(e))},Wp=function(t){if(typeof t!="object"||t===null)return an(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=an(e[r]),n+=":",n+=Wp(t[e[r]]);return n+="}",n},ww=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function wn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const _w=function(t){we(!Up(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,c,u;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(c=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=c+r,o=Math.round(t*Math.pow(2,n-c)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const d=[];for(u=n;u;u-=1)d.push(o%2?1:0),o=Math.floor(o/2);for(u=e;u;u-=1)d.push(i%2?1:0),i=Math.floor(i/2);d.push(s?1:0),d.reverse();const f=d.join("");let p="";for(u=0;u<64;u+=8){let y=parseInt(f.substr(u,8),2).toString(16);y.length===1&&(y="0"+y),p=p+y}return p.toLowerCase()},DI=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},OI=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function MI(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const LI=new RegExp("^-?(0*)\\d{1,10}$"),FI=-2147483648,zI=2147483647,Y0=function(t){if(LI.test(t)){const e=Number(t);if(e>=FI&&e<=zI)return e}return null},Vo=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Rn("Exception was thrown by user callback.",n),e},Math.floor(0))}},BI=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Aa=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,dw(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)==null||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Rn(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(yn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Rn(e)}}class Oc{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Oc.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp="5",bw="v",Sw="s",Cw="r",jw="f",Ew=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Iw="ls",kw="p",bf="ac",Nw="websocket",Tw="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e,n,r,s,i=!1,o="",c=!1,u=!1,d=null){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=c,this.isUsingEmulator=u,this.emulatorOptions=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=wi.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&wi.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function WI(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Aw(t,e,n){we(typeof e=="string","typeof type must == string"),we(typeof n=="object","typeof params must == object");let r;if(e===Nw)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Tw)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);WI(t)&&(n.ns=t.namespace);const s=[];return wn(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(){this.counters_={}}incrementCounter(e,n=1){Kr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Gj(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eh={},th={};function Vp(t){const e=t.toString();return eh[e]||(eh[e]=new HI),eh[e]}function VI(t,e){const n=t.toString();return th[n]||(th[n]=e()),th[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&Vo(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0="start",GI="close",qI="pLPCommand",YI="pRTLPCB",Pw="id",Dw="pw",Ow="ser",QI="cb",JI="seg",XI="ts",ZI="d",e6="dframe",Mw=1870,Lw=30,t6=Mw-Lw,n6=25e3,r6=3e4;class ao{constructor(e,n,r,s,i,o,c){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Al(e),this.stats_=Vp(n),this.urlFn=u=>(this.appCheckToken&&(u[bf]=this.appCheckToken),Aw(n,Tw,u))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new KI(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(r6)),AI(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Kp((...i)=>{const[o,c,u,d,f]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Q0)this.id=c,this.password=u;else if(o===GI)c?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(c,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,c]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,c)},()=>{this.onClosed_()},this.urlFn);const r={};r[Q0]="t",r[Ow]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[QI]=this.scriptTagHolder.uniqueCallbackIdentifier),r[bw]=Hp,this.transportSessionId&&(r[Sw]=this.transportSessionId),this.lastSessionId&&(r[Iw]=this.lastSessionId),this.applicationId&&(r[kw]=this.applicationId),this.appCheckToken&&(r[bf]=this.appCheckToken),typeof location<"u"&&location.hostname&&Ew.test(location.hostname)&&(r[Cw]=jw);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ao.forceAllow_=!0}static forceDisallow(){ao.forceDisallow_=!0}static isAvailable(){return ao.forceAllow_?!0:!ao.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!DI()&&!OI()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=an(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Jv(n),s=ww(r,t6);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[e6]="t",r[Pw]=e,r[Dw]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=an(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Kp{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=NI(),window[qI+this.uniqueCallbackIdentifier]=e,window[YI+this.uniqueCallbackIdentifier]=n,this.myIFrame=Kp.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(c){yn("frame writing exception"),c.stack&&yn(c.stack),yn(c)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||yn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Pw]=this.myID,e[Dw]=this.myPW,e[Ow]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Lw+r.length<=Mw;){const o=this.pendingSegs.shift();r=r+"&"+JI+s+"="+o.seg+"&"+XI+s+"="+o.ts+"&"+ZI+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(n6)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{yn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s6=16384,i6=45e3;let fu=null;typeof MozWebSocket<"u"?fu=MozWebSocket:typeof WebSocket<"u"&&(fu=WebSocket);class vr{constructor(e,n,r,s,i,o,c){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Al(this.connId),this.stats_=Vp(n),this.connURL=vr.connectionURL_(n,o,c,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[bw]=Hp,typeof location<"u"&&location.hostname&&Ew.test(location.hostname)&&(o[Cw]=jw),n&&(o[Sw]=n),r&&(o[Iw]=r),s&&(o[bf]=s),i&&(o[kw]=i),Aw(e,Nw,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,wi.set("previous_websocket_failure",!0);try{let r;sE(),this.mySock=new fu(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){vr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&fu!==null&&!vr.forceDisallow_}static previouslyFailed(){return wi.isInMemoryStorage||wi.get("previous_websocket_failure")===!0}markConnectionHealthy(){wi.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=sl(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(we(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=an(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=ww(n,s6);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(i6))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}vr.responsesRequiredToBeHealthy=2;vr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{static get ALL_TRANSPORTS(){return[ao,vr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=vr&&vr.isAvailable();let r=n&&!vr.previouslyFailed();if(e.webSocketOnly&&(n||Rn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[vr];else{const s=this.transports_=[];for(const i of cl.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);cl.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}cl.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o6=6e4,a6=5e3,l6=10*1024,c6=100*1024,nh="t",J0="d",u6="s",X0="r",d6="e",Z0="o",ey="a",ty="n",ny="p",h6="h";class f6{constructor(e,n,r,s,i,o,c,u,d,f){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=c,this.onDisconnect_=u,this.onKill_=d,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Al("c:"+this.id+":"),this.transportManager_=new cl(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Aa(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>c6?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>l6?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(nh in e){const n=e[nh];n===ey?this.upgradeIfSecondaryHealthy_():n===X0?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Z0&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=ua("t",e),r=ua("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:ny,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:ey,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:ty,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=ua("t",e),r=ua("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=ua(nh,e);if(J0 in e){const r=e[J0];if(n===h6){const s={...r};this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===ty){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===u6?this.onConnectionShutdown_(r):n===X0?this.onReset_(r):n===d6?_f("Server Error: "+r):n===Z0?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):_f("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Hp!==r&&Rn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Aa(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(o6))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Aa(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(a6))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:ny,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(wi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(e){this.allowedEvents_=e,this.listeners_={},we(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){we(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu extends zw{static getInstance(){return new pu}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!iw()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return we(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry=32,sy=768;class St{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function gt(){return new St("")}function ot(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Qs(t){return t.pieces_.length-t.pieceNum_}function Nt(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new St(t.pieces_,e)}function Gp(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function p6(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function ul(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Bw(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new St(e,0)}function qt(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof St)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new St(n,0)}function ct(t){return t.pieceNum_>=t.pieces_.length}function Nn(t,e){const n=ot(t),r=ot(e);if(n===null)return e;if(n===r)return Nn(Nt(t),Nt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function m6(t,e){const n=ul(t,0),r=ul(e,0);for(let s=0;s<n.length&&s<r.length;s++){const i=$i(n[s],r[s]);if(i!==0)return i}return n.length===r.length?0:n.length<r.length?-1:1}function qp(t,e){if(Qs(t)!==Qs(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function or(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Qs(t)>Qs(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class g6{constructor(e,n){this.errorPrefix_=n,this.parts_=ul(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Xu(this.parts_[r]);$w(this)}}function y6(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Xu(e),$w(t)}function x6(t){const e=t.parts_.pop();t.byteLength_-=Xu(e),t.parts_.length>0&&(t.byteLength_-=1)}function $w(t){if(t.byteLength_>sy)throw new Error(t.errorPrefix_+"has a key path longer than "+sy+" bytes ("+t.byteLength_+").");if(t.parts_.length>ry)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ry+") or object contains a cycle "+pi(t))}function pi(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp extends zw{static getInstance(){return new Yp}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return we(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da=1e3,v6=60*5*1e3,iy=30*1e3,w6=1.3,_6=3e4,b6="server_kill",oy=3;class ss extends Fw{constructor(e,n,r,s,i,o,c,u){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=c,this.authOverride_=u,this.id=ss.nextPersistentConnectionId_++,this.log_=Al("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=da,this.maxReconnectDelay_=v6,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Yp.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&pu.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(an(i)),we(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new Tl,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const c=o.d;o.s==="ok"?n.resolve(c):n.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),we(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),we(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const c={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,c),this.connected_&&this.sendListen_(c)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,c=>{const u=c.d,d=c.s;ss.warnOnListenWarnings_(u,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",c),d!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(d,u))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Kr(e,"w")){const r=ko(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();Rn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||dE(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=iy)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=uE(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),we(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+an(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):_f("Unrecognized action received from server: "+an(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){we(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=da,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=da,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>_6&&(this.reconnectDelay_=da),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*w6)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+ss.nextConnectionId_++,i=this.lastSessionId;let o=!1,c=null;const u=function(){c?c.close():(o=!0,r())},d=function(p){we(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(p)};this.realtime_={close:u,sendRequest:d};const f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[p,y]=await Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);o?yn("getToken() completed but was canceled"):(yn("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=y&&y.token,c=new f6(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,k=>{Rn(k+" ("+this.repoInfo_.toString()+")"),this.interrupt(b6)},i))}catch(p){this.log_("Failed to get token: "+p),o||(this.repoInfo_.nodeAdmin&&Rn(p),u())}}}interrupt(e){yn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){yn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],D0(this.interruptReasons_)&&(this.reconnectDelay_=da,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>Wp(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new St(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){yn("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=oy&&(this.reconnectDelay_=iy,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){yn("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=oy&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+yw.replace(/\./g,"-")]=1,iw()?e["framework.cordova"]=1:rE()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=pu.getInstance().currentlyOnline();return D0(this.interruptReasons_)&&e}}ss.nextPersistentConnectionId_=0;ss.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new at(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new at(To,e),s=new at(To,n);return this.compare(r,s)!==0}minPost(){return at.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hc;class Uw extends Zu{static get __EMPTY_NODE(){return hc}static set __EMPTY_NODE(e){hc=e}compare(e,n){return $i(e.name,n.name)}isDefinedOn(e){throw Wo("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return at.MIN}maxPost(){return new at(Pi,hc)}makePost(e,n){return we(typeof e=="string","KeyIndex indexValue must always be a string."),new at(e,hc)}toString(){return".key"}}const go=new Uw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class hn{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??hn.RED,this.left=s??zn.EMPTY_NODE,this.right=i??zn.EMPTY_NODE}copy(e,n,r,s,i){return new hn(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return zn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return zn.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,hn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,hn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}hn.RED=!0;hn.BLACK=!1;class S6{copy(e,n,r,s,i){return this}insert(e,n,r){return new hn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class zn{constructor(e,n=zn.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new zn(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,hn.BLACK,null,null))}remove(e){return new zn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,hn.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new fc(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new fc(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new fc(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new fc(this.root_,null,this.comparator_,!0,e)}}zn.EMPTY_NODE=new S6;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C6(t,e){return $i(t.name,e.name)}function Qp(t,e){return $i(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sf;function j6(t){Sf=t}const Ww=function(t){return typeof t=="number"?"number:"+_w(t):"string:"+t},Hw=function(t){if(t.isLeafNode()){const e=t.val();we(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Kr(e,".sv"),"Priority must be a string or number.")}else we(t===Sf||t.isEmpty(),"priority of unexpected type.");we(t===Sf||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ay;class un{static set __childrenNodeConstructor(e){ay=e}static get __childrenNodeConstructor(){return ay}constructor(e,n=un.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,we(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Hw(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new un(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:un.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ct(e)?this:ot(e)===".priority"?this.priorityNode_:un.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:un.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=ot(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(we(r!==".priority"||Qs(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,un.__childrenNodeConstructor.EMPTY_NODE.updateChild(Nt(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Ww(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=_w(this.value_):e+=this.value_,this.lazyHash_=vw(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===un.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof un.__childrenNodeConstructor?-1:(we(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=un.VALUE_TYPE_ORDER.indexOf(n),i=un.VALUE_TYPE_ORDER.indexOf(r);return we(s>=0,"Unknown leaf type: "+n),we(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}un.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vw,Kw;function E6(t){Vw=t}function I6(t){Kw=t}class k6 extends Zu{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?$i(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return at.MIN}maxPost(){return new at(Pi,new un("[PRIORITY-POST]",Kw))}makePost(e,n){const r=Vw(e);return new at(n,new un("[PRIORITY-POST]",r))}toString(){return".priority"}}const Yt=new k6;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N6=Math.log(2);class T6{constructor(e){const n=i=>parseInt(Math.log(i)/N6,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const mu=function(t,e,n,r){t.sort(e);const s=function(u,d){const f=d-u;let p,y;if(f===0)return null;if(f===1)return p=t[u],y=n?n(p):p,new hn(y,p.node,hn.BLACK,null,null);{const k=parseInt(f/2,10)+u,w=s(u,k),R=s(k+1,d);return p=t[k],y=n?n(p):p,new hn(y,p.node,hn.BLACK,w,R)}},i=function(u){let d=null,f=null,p=t.length;const y=function(w,R){const D=p-w,S=p;p-=w;const _=s(D+1,S),v=t[D],L=n?n(v):v;k(new hn(L,v.node,R,null,_))},k=function(w){d?(d.left=w,d=w):(f=w,d=w)};for(let w=0;w<u.count;++w){const R=u.nextBitIsOne(),D=Math.pow(2,u.count-(w+1));R?y(D,hn.BLACK):(y(D,hn.BLACK),y(D,hn.RED))}return f},o=new T6(t.length),c=i(o);return new zn(r||e,c)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rh;const Ki={};class ts{static get Default(){return we(Ki&&Yt,"ChildrenNode.ts has not been loaded"),rh=rh||new ts({".priority":Ki},{".priority":Yt}),rh}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=ko(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof zn?n:null}hasIndex(e){return Kr(this.indexSet_,e.toString())}addIndex(e,n){we(e!==go,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(at.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let c;s?c=mu(r,e.getCompare()):c=Ki;const u=e.toString(),d={...this.indexSet_};d[u]=e;const f={...this.indexes_};return f[u]=c,new ts(f,d)}addToIndexes(e,n){const r=hu(this.indexes_,(s,i)=>{const o=ko(this.indexSet_,i);if(we(o,"Missing index implementation for "+i),s===Ki)if(o.isDefinedOn(e.node)){const c=[],u=n.getIterator(at.Wrap);let d=u.getNext();for(;d;)d.name!==e.name&&c.push(d),d=u.getNext();return c.push(e),mu(c,o.getCompare())}else return Ki;else{const c=n.get(e.name);let u=s;return c&&(u=u.remove(new at(e.name,c))),u.insert(e,e.node)}});return new ts(r,this.indexSet_)}removeFromIndexes(e,n){const r=hu(this.indexes_,s=>{if(s===Ki)return s;{const i=n.get(e.name);return i?s.remove(new at(e.name,i)):s}});return new ts(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ha;class Ve{static get EMPTY_NODE(){return ha||(ha=new Ve(new zn(Qp),null,ts.Default))}constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Hw(this.priorityNode_),this.children_.isEmpty()&&we(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ha}updatePriority(e){return this.children_.isEmpty()?this:new Ve(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?ha:n}}getChild(e){const n=ot(e);return n===null?this:this.getImmediateChild(n).getChild(Nt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(we(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new at(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?ha:this.priorityNode_;return new Ve(s,o,i)}}updateChild(e,n){const r=ot(e);if(r===null)return n;{we(ot(e)!==".priority"||Qs(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Nt(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(Yt,(o,c)=>{n[o]=c.val(e),r++,i&&Ve.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const c in n)o[c]=n[c];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Ww(this.getPriority().val())+":"),this.forEachChild(Yt,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":vw(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new at(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new at(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new at(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,at.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,at.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Pl?-1:0}withIndex(e){if(e===go||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Ve(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===go||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Yt),s=n.getIterator(Yt);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===go?null:this.indexMap_.get(e.toString())}}Ve.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class R6 extends Ve{constructor(){super(new zn(Qp),Ve.EMPTY_NODE,ts.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ve.EMPTY_NODE}isEmpty(){return!1}}const Pl=new R6;Object.defineProperties(at,{MIN:{value:new at(To,Ve.EMPTY_NODE)},MAX:{value:new at(Pi,Pl)}});Uw.__EMPTY_NODE=Ve.EMPTY_NODE;un.__childrenNodeConstructor=Ve;j6(Pl);I6(Pl);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A6=!0;function on(t,e=null){if(t===null)return Ve.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),we(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new un(n,on(e))}if(!(t instanceof Array)&&A6){const n=[];let r=!1;if(wn(t,(o,c)=>{if(o.substring(0,1)!=="."){const u=on(c);u.isEmpty()||(r=r||!u.getPriority().isEmpty(),n.push(new at(o,u)))}}),n.length===0)return Ve.EMPTY_NODE;const i=mu(n,C6,o=>o.name,Qp);if(r){const o=mu(n,Yt.getCompare());return new Ve(i,on(e),new ts({".priority":o},{".priority":Yt}))}else return new Ve(i,on(e),ts.Default)}else{let n=Ve.EMPTY_NODE;return wn(t,(r,s)=>{if(Kr(t,r)&&r.substring(0,1)!=="."){const i=on(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(on(e))}}E6(on);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6 extends Zu{constructor(e){super(),this.indexPath_=e,we(!ct(e)&&ot(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?$i(e.name,n.name):i}makePost(e,n){const r=on(e),s=Ve.EMPTY_NODE.updateChild(this.indexPath_,r);return new at(n,s)}maxPost(){const e=Ve.EMPTY_NODE.updateChild(this.indexPath_,Pl);return new at(Pi,e)}toString(){return ul(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6 extends Zu{compare(e,n){const r=e.node.compareTo(n.node);return r===0?$i(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return at.MIN}maxPost(){return at.MAX}makePost(e,n){const r=on(e);return new at(n,r)}toString(){return".value"}}const O6=new D6;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(t){return{type:"value",snapshotNode:t}}function Ro(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function dl(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function hl(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function M6(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){we(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const c=e.getImmediateChild(n);return c.getChild(s).equals(r.getChild(s))&&c.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(dl(n,c)):we(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):c.isEmpty()?o.trackChildChange(Ro(n,r)):o.trackChildChange(hl(n,r,c))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Yt,(s,i)=>{n.hasChild(s)||r.trackChildChange(dl(s,i))}),n.isLeafNode()||n.forEachChild(Yt,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(hl(s,i,o))}else r.trackChildChange(Ro(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?Ve.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e){this.indexedFilter_=new Jp(e.getIndex()),this.index_=e.getIndex(),this.startPost_=fl.getStartPost_(e),this.endPost_=fl.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new at(n,r))||(r=Ve.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=Ve.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(Ve.EMPTY_NODE);const i=this;return n.forEachChild(Yt,(o,c)=>{i.matches(new at(o,c))||(s=s.updateImmediateChild(o,Ve.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new fl(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new at(n,r))||(r=Ve.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=Ve.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=Ve.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const c=i.getNext();if(this.withinDirectionalStart(c))if(this.withinDirectionalEnd(c))s=s.updateImmediateChild(c.name,c.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(Ve.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const c=i.getNext();o<this.limit_&&this.withinDirectionalStart(c)&&this.withinDirectionalEnd(c)?o++:s=s.updateImmediateChild(c.name,Ve.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const p=this.index_.getCompare();o=(y,k)=>p(k,y)}else o=this.index_.getCompare();const c=e;we(c.numChildren()===this.limit_,"");const u=new at(n,r),d=this.reverse_?c.getFirstChild(this.index_):c.getLastChild(this.index_),f=this.rangedFilter_.matches(u);if(c.hasChild(n)){const p=c.getImmediateChild(n);let y=s.getChildAfterChild(this.index_,d,this.reverse_);for(;y!=null&&(y.name===n||c.hasChild(y.name));)y=s.getChildAfterChild(this.index_,y,this.reverse_);const k=y==null?1:o(y,u);if(f&&!r.isEmpty()&&k>=0)return i!=null&&i.trackChildChange(hl(n,r,p)),c.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(dl(n,p));const R=c.updateImmediateChild(n,Ve.EMPTY_NODE);return y!=null&&this.rangedFilter_.matches(y)?(i!=null&&i.trackChildChange(Ro(y.name,y.node)),R.updateImmediateChild(y.name,y.node)):R}}else return r.isEmpty()?e:f&&o(d,u)>=0?(i!=null&&(i.trackChildChange(dl(d.name,d.node)),i.trackChildChange(Ro(n,r))),c.updateImmediateChild(n,r).updateImmediateChild(d.name,Ve.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Yt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return we(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return we(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:To}hasEnd(){return this.endSet_}getIndexEndValue(){return we(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return we(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Pi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return we(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Yt}copy(){const e=new Xp;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function F6(t){return t.loadsAllData()?new Jp(t.getIndex()):t.hasLimit()?new L6(t):new fl(t)}function ly(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Yt?n="$priority":t.index_===O6?n="$value":t.index_===go?n="$key":(we(t.index_ instanceof P6,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=an(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=an(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+an(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=an(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+an(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function cy(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Yt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu extends Fw{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(we(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=Al("p:rest:"),this.listens_={}}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=gu.getListenId_(e,r),c={};this.listens_[o]=c;const u=ly(e._queryParams);this.restRequest_(i+".json",u,(d,f)=>{let p=f;if(d===404&&(p=null,d=null),d===null&&this.onDataUpdate_(i,p,!1,r),ko(this.listens_,o)===c){let y;d?d===401?y="permission_denied":y="rest_error:"+d:y="ok",s(y,null)}})}unlisten(e,n){const r=gu.getListenId_(e,n);delete this.listens_[r]}get(e){const n=ly(e._queryParams),r=e._path.toString(),s=new Tl;return this.restRequest_(r+".json",n,(i,o)=>{let c=o;i===404&&(c=null,i=null),i===null?(this.onDataUpdate_(r,c,!1,null),s.resolve(c)):s.reject(new Error(c))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+hE(n);this.log_("Sending REST request for "+o);const c=new XMLHttpRequest;c.onreadystatechange=()=>{if(r&&c.readyState===4){this.log_("REST Response for "+o+" received. status:",c.status,"response:",c.responseText);let u=null;if(c.status>=200&&c.status<300){try{u=sl(c.responseText)}catch{Rn("Failed to parse JSON response for "+o+": "+c.responseText)}r(null,u)}else c.status!==401&&c.status!==404&&Rn("Got unsuccessful REST response for "+o+" Status: "+c.status),r(c.status);r=null}},c.open("GET",o,!0),c.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(){this.rootNode_=Ve.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yu(){return{value:null,children:new Map}}function qw(t,e,n){if(ct(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=ot(e);t.children.has(r)||t.children.set(r,yu());const s=t.children.get(r);e=Nt(e),qw(s,e,n)}}function Cf(t,e,n){t.value!==null?n(e,t.value):B6(t,(r,s)=>{const i=new St(e.toString()+"/"+r);Cf(s,i,n)})}function B6(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $6{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&wn(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uy=10*1e3,U6=30*1e3,W6=5*60*1e3;class H6{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new $6(e);const r=uy+(U6-uy)*Math.random();Aa(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;wn(e,(s,i)=>{i>0&&Kr(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),Aa(this.reportStats_.bind(this),Math.floor(Math.random()*2*W6))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wr;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(wr||(wr={}));function Zp(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function em(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function tm(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=wr.ACK_USER_WRITE,this.source=Zp()}operationForChild(e){if(ct(this.path)){if(this.affectedTree.value!=null)return we(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new St(e));return new xu(gt(),n,this.revert)}}else return we(ot(this.path)===e,"operationForChild called for unrelated child."),new xu(Nt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,n){this.source=e,this.path=n,this.type=wr.LISTEN_COMPLETE}operationForChild(e){return ct(this.path)?new pl(this.source,gt()):new pl(this.source,Nt(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=wr.OVERWRITE}operationForChild(e){return ct(this.path)?new Di(this.source,gt(),this.snap.getImmediateChild(e)):new Di(this.source,Nt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=wr.MERGE}operationForChild(e){if(ct(this.path)){const n=this.children.subtree(new St(e));return n.isEmpty()?null:n.value?new Di(this.source,gt(),n.value):new Ao(this.source,gt(),n)}else return we(ot(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ao(this.source,Nt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ct(e))return this.isFullyInitialized()&&!this.filtered_;const n=ot(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V6{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function K6(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(M6(o.childName,o.snapshotNode))}),fa(t,s,"child_removed",e,r,n),fa(t,s,"child_added",e,r,n),fa(t,s,"child_moved",i,r,n),fa(t,s,"child_changed",e,r,n),fa(t,s,"value",e,r,n),s}function fa(t,e,n,r,s,i){const o=r.filter(c=>c.type===n);o.sort((c,u)=>q6(t,c,u)),o.forEach(c=>{const u=G6(t,c,i);s.forEach(d=>{d.respondsTo(c.type)&&e.push(d.createEvent(u,t.query_))})})}function G6(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function q6(t,e,n){if(e.childName==null||n.childName==null)throw Wo("Should only compare child_ events.");const r=new at(e.childName,e.snapshotNode),s=new at(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ed(t,e){return{eventCache:t,serverCache:e}}function Pa(t,e,n,r){return ed(new Js(e,n,r),t.serverCache)}function Yw(t,e,n,r){return ed(t.eventCache,new Js(e,n,r))}function vu(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Oi(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sh;const Y6=()=>(sh||(sh=new zn(PI)),sh);class It{static fromObject(e){let n=new It(null);return wn(e,(r,s)=>{n=n.set(new St(r),s)}),n}constructor(e,n=Y6()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:gt(),value:this.value};if(ct(e))return null;{const r=ot(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(Nt(e),n);return i!=null?{path:qt(new St(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ct(e))return this;{const n=ot(e),r=this.children.get(n);return r!==null?r.subtree(Nt(e)):new It(null)}}set(e,n){if(ct(e))return new It(n,this.children);{const r=ot(e),i=(this.children.get(r)||new It(null)).set(Nt(e),n),o=this.children.insert(r,i);return new It(this.value,o)}}remove(e){if(ct(e))return this.children.isEmpty()?new It(null):new It(null,this.children);{const n=ot(e),r=this.children.get(n);if(r){const s=r.remove(Nt(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new It(null):new It(this.value,i)}else return this}}get(e){if(ct(e))return this.value;{const n=ot(e),r=this.children.get(n);return r?r.get(Nt(e)):null}}setTree(e,n){if(ct(e))return n;{const r=ot(e),i=(this.children.get(r)||new It(null)).setTree(Nt(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new It(this.value,o)}}fold(e){return this.fold_(gt(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(qt(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,gt(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(ct(e))return null;{const i=ot(e),o=this.children.get(i);return o?o.findOnPath_(Nt(e),qt(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,gt(),n)}foreachOnPath_(e,n,r){if(ct(e))return this;{this.value&&r(n,this.value);const s=ot(e),i=this.children.get(s);return i?i.foreachOnPath_(Nt(e),qt(n,s),r):new It(null)}}foreach(e){this.foreach_(gt(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(qt(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e){this.writeTree_=e}static empty(){return new Cr(new It(null))}}function Da(t,e,n){if(ct(e))return new Cr(new It(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=Nn(s,e);return i=i.updateChild(o,n),new Cr(t.writeTree_.set(s,i))}else{const s=new It(n),i=t.writeTree_.setTree(e,s);return new Cr(i)}}}function jf(t,e,n){let r=t;return wn(n,(s,i)=>{r=Da(r,qt(e,s),i)}),r}function dy(t,e){if(ct(e))return Cr.empty();{const n=t.writeTree_.setTree(e,new It(null));return new Cr(n)}}function Ef(t,e){return Ui(t,e)!=null}function Ui(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Nn(n.path,e)):null}function hy(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Yt,(r,s)=>{e.push(new at(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new at(r,s.value))}),e}function Ks(t,e){if(ct(e))return t;{const n=Ui(t,e);return n!=null?new Cr(new It(n)):new Cr(t.writeTree_.subtree(e))}}function If(t){return t.writeTree_.isEmpty()}function Po(t,e){return Qw(gt(),t.writeTree_,e)}function Qw(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(we(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=Qw(qt(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(qt(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(t,e){return e2(e,t)}function Q6(t,e,n,r,s){we(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=Da(t.visibleWrites,e,n)),t.lastWriteId=r}function J6(t,e,n,r){we(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=jf(t.visibleWrites,e,n),t.lastWriteId=r}function X6(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function Z6(t,e){const n=t.allWrites.findIndex(c=>c.writeId===e);we(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const c=t.allWrites[o];c.visible&&(o>=n&&ek(c,r.path)?s=!1:or(r.path,c.path)&&(i=!0)),o--}if(s){if(i)return tk(t),!0;if(r.snap)t.visibleWrites=dy(t.visibleWrites,r.path);else{const c=r.children;wn(c,u=>{t.visibleWrites=dy(t.visibleWrites,qt(r.path,u))})}return!0}else return!1}function ek(t,e){if(t.snap)return or(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&or(qt(t.path,n),e))return!0;return!1}function tk(t){t.visibleWrites=Jw(t.allWrites,nk,gt()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function nk(t){return t.visible}function Jw(t,e,n){let r=Cr.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let c;if(i.snap)or(n,o)?(c=Nn(n,o),r=Da(r,c,i.snap)):or(o,n)&&(c=Nn(o,n),r=Da(r,gt(),i.snap.getChild(c)));else if(i.children){if(or(n,o))c=Nn(n,o),r=jf(r,c,i.children);else if(or(o,n))if(c=Nn(o,n),ct(c))r=jf(r,gt(),i.children);else{const u=ko(i.children,ot(c));if(u){const d=u.getChild(Nt(c));r=Da(r,gt(),d)}}}else throw Wo("WriteRecord should have .snap or .children")}}return r}function Xw(t,e,n,r,s){if(!r&&!s){const i=Ui(t.visibleWrites,e);if(i!=null)return i;{const o=Ks(t.visibleWrites,e);if(If(o))return n;if(n==null&&!Ef(o,gt()))return null;{const c=n||Ve.EMPTY_NODE;return Po(o,c)}}}else{const i=Ks(t.visibleWrites,e);if(!s&&If(i))return n;if(!s&&n==null&&!Ef(i,gt()))return null;{const o=function(d){return(d.visible||s)&&(!r||!~r.indexOf(d.writeId))&&(or(d.path,e)||or(e,d.path))},c=Jw(t.allWrites,o,e),u=n||Ve.EMPTY_NODE;return Po(c,u)}}}function rk(t,e,n){let r=Ve.EMPTY_NODE;const s=Ui(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Yt,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=Ks(t.visibleWrites,e);return n.forEachChild(Yt,(o,c)=>{const u=Po(Ks(i,new St(o)),c);r=r.updateImmediateChild(o,u)}),hy(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=Ks(t.visibleWrites,e);return hy(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function sk(t,e,n,r,s){we(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=qt(e,n);if(Ef(t.visibleWrites,i))return null;{const o=Ks(t.visibleWrites,i);return If(o)?s.getChild(n):Po(o,s.getChild(n))}}function ik(t,e,n,r){const s=qt(e,n),i=Ui(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=Ks(t.visibleWrites,s);return Po(o,r.getNode().getImmediateChild(n))}else return null}function ok(t,e){return Ui(t.visibleWrites,e)}function ak(t,e,n,r,s,i,o){let c;const u=Ks(t.visibleWrites,e),d=Ui(u,gt());if(d!=null)c=d;else if(n!=null)c=Po(u,n);else return[];if(c=c.withIndex(o),!c.isEmpty()&&!c.isLeafNode()){const f=[],p=o.getCompare(),y=i?c.getReverseIteratorFrom(r,o):c.getIteratorFrom(r,o);let k=y.getNext();for(;k&&f.length<s;)p(k,r)!==0&&f.push(k),k=y.getNext();return f}else return[]}function lk(){return{visibleWrites:Cr.empty(),allWrites:[],lastWriteId:-1}}function wu(t,e,n,r){return Xw(t.writeTree,t.treePath,e,n,r)}function nm(t,e){return rk(t.writeTree,t.treePath,e)}function fy(t,e,n,r){return sk(t.writeTree,t.treePath,e,n,r)}function _u(t,e){return ok(t.writeTree,qt(t.treePath,e))}function ck(t,e,n,r,s,i){return ak(t.writeTree,t.treePath,e,n,r,s,i)}function rm(t,e,n){return ik(t.writeTree,t.treePath,e,n)}function Zw(t,e){return e2(qt(t.treePath,e),t.writeTree)}function e2(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;we(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),we(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,hl(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,dl(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,Ro(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,hl(r,e.snapshotNode,s.oldSnap));else throw Wo("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const t2=new dk;class sm{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Js(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return rm(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Oi(this.viewCache_),i=ck(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hk(t){return{filter:t}}function fk(t,e){we(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),we(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function pk(t,e,n,r,s){const i=new uk;let o,c;if(n.type===wr.OVERWRITE){const d=n;d.source.fromUser?o=kf(t,e,d.path,d.snap,r,s,i):(we(d.source.fromServer,"Unknown source."),c=d.source.tagged||e.serverCache.isFiltered()&&!ct(d.path),o=bu(t,e,d.path,d.snap,r,s,c,i))}else if(n.type===wr.MERGE){const d=n;d.source.fromUser?o=gk(t,e,d.path,d.children,r,s,i):(we(d.source.fromServer,"Unknown source."),c=d.source.tagged||e.serverCache.isFiltered(),o=Nf(t,e,d.path,d.children,r,s,c,i))}else if(n.type===wr.ACK_USER_WRITE){const d=n;d.revert?o=vk(t,e,d.path,r,s,i):o=yk(t,e,d.path,d.affectedTree,r,s,i)}else if(n.type===wr.LISTEN_COMPLETE)o=xk(t,e,n.path,r,i);else throw Wo("Unknown operation type: "+n.type);const u=i.getChanges();return mk(e,o,u),{viewCache:o,changes:u}}function mk(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=vu(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(Gw(vu(e)))}}function n2(t,e,n,r,s,i){const o=e.eventCache;if(_u(r,n)!=null)return e;{let c,u;if(ct(n))if(we(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const d=Oi(e),f=d instanceof Ve?d:Ve.EMPTY_NODE,p=nm(r,f);c=t.filter.updateFullNode(e.eventCache.getNode(),p,i)}else{const d=wu(r,Oi(e));c=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const d=ot(n);if(d===".priority"){we(Qs(n)===1,"Can't have a priority with additional path components");const f=o.getNode();u=e.serverCache.getNode();const p=fy(r,n,f,u);p!=null?c=t.filter.updatePriority(f,p):c=o.getNode()}else{const f=Nt(n);let p;if(o.isCompleteForChild(d)){u=e.serverCache.getNode();const y=fy(r,n,o.getNode(),u);y!=null?p=o.getNode().getImmediateChild(d).updateChild(f,y):p=o.getNode().getImmediateChild(d)}else p=rm(r,d,e.serverCache);p!=null?c=t.filter.updateChild(o.getNode(),d,p,f,s,i):c=o.getNode()}}return Pa(e,c,o.isFullyInitialized()||ct(n),t.filter.filtersNodes())}}function bu(t,e,n,r,s,i,o,c){const u=e.serverCache;let d;const f=o?t.filter:t.filter.getIndexedFilter();if(ct(n))d=f.updateFullNode(u.getNode(),r,null);else if(f.filtersNodes()&&!u.isFiltered()){const k=u.getNode().updateChild(n,r);d=f.updateFullNode(u.getNode(),k,null)}else{const k=ot(n);if(!u.isCompleteForPath(n)&&Qs(n)>1)return e;const w=Nt(n),D=u.getNode().getImmediateChild(k).updateChild(w,r);k===".priority"?d=f.updatePriority(u.getNode(),D):d=f.updateChild(u.getNode(),k,D,w,t2,null)}const p=Yw(e,d,u.isFullyInitialized()||ct(n),f.filtersNodes()),y=new sm(s,p,i);return n2(t,p,n,s,y,c)}function kf(t,e,n,r,s,i,o){const c=e.eventCache;let u,d;const f=new sm(s,e,i);if(ct(n))d=t.filter.updateFullNode(e.eventCache.getNode(),r,o),u=Pa(e,d,!0,t.filter.filtersNodes());else{const p=ot(n);if(p===".priority")d=t.filter.updatePriority(e.eventCache.getNode(),r),u=Pa(e,d,c.isFullyInitialized(),c.isFiltered());else{const y=Nt(n),k=c.getNode().getImmediateChild(p);let w;if(ct(y))w=r;else{const R=f.getCompleteChild(p);R!=null?Gp(y)===".priority"&&R.getChild(Bw(y)).isEmpty()?w=R:w=R.updateChild(y,r):w=Ve.EMPTY_NODE}if(k.equals(w))u=e;else{const R=t.filter.updateChild(c.getNode(),p,w,y,f,o);u=Pa(e,R,c.isFullyInitialized(),t.filter.filtersNodes())}}}return u}function py(t,e){return t.eventCache.isCompleteForChild(e)}function gk(t,e,n,r,s,i,o){let c=e;return r.foreach((u,d)=>{const f=qt(n,u);py(e,ot(f))&&(c=kf(t,c,f,d,s,i,o))}),r.foreach((u,d)=>{const f=qt(n,u);py(e,ot(f))||(c=kf(t,c,f,d,s,i,o))}),c}function my(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function Nf(t,e,n,r,s,i,o,c){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u=e,d;ct(n)?d=r:d=new It(null).setTree(n,r);const f=e.serverCache.getNode();return d.children.inorderTraversal((p,y)=>{if(f.hasChild(p)){const k=e.serverCache.getNode().getImmediateChild(p),w=my(t,k,y);u=bu(t,u,new St(p),w,s,i,o,c)}}),d.children.inorderTraversal((p,y)=>{const k=!e.serverCache.isCompleteForChild(p)&&y.value===null;if(!f.hasChild(p)&&!k){const w=e.serverCache.getNode().getImmediateChild(p),R=my(t,w,y);u=bu(t,u,new St(p),R,s,i,o,c)}}),u}function yk(t,e,n,r,s,i,o){if(_u(s,n)!=null)return e;const c=e.serverCache.isFiltered(),u=e.serverCache;if(r.value!=null){if(ct(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return bu(t,e,n,u.getNode().getChild(n),s,i,c,o);if(ct(n)){let d=new It(null);return u.getNode().forEachChild(go,(f,p)=>{d=d.set(new St(f),p)}),Nf(t,e,n,d,s,i,c,o)}else return e}else{let d=new It(null);return r.foreach((f,p)=>{const y=qt(n,f);u.isCompleteForPath(y)&&(d=d.set(f,u.getNode().getChild(y)))}),Nf(t,e,n,d,s,i,c,o)}}function xk(t,e,n,r,s){const i=e.serverCache,o=Yw(e,i.getNode(),i.isFullyInitialized()||ct(n),i.isFiltered());return n2(t,o,n,r,t2,s)}function vk(t,e,n,r,s,i){let o;if(_u(r,n)!=null)return e;{const c=new sm(r,e,s),u=e.eventCache.getNode();let d;if(ct(n)||ot(n)===".priority"){let f;if(e.serverCache.isFullyInitialized())f=wu(r,Oi(e));else{const p=e.serverCache.getNode();we(p instanceof Ve,"serverChildren would be complete if leaf node"),f=nm(r,p)}f=f,d=t.filter.updateFullNode(u,f,i)}else{const f=ot(n);let p=rm(r,f,e.serverCache);p==null&&e.serverCache.isCompleteForChild(f)&&(p=u.getImmediateChild(f)),p!=null?d=t.filter.updateChild(u,f,p,Nt(n),c,i):e.eventCache.getNode().hasChild(f)?d=t.filter.updateChild(u,f,Ve.EMPTY_NODE,Nt(n),c,i):d=u,d.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=wu(r,Oi(e)),o.isLeafNode()&&(d=t.filter.updateFullNode(d,o,i)))}return o=e.serverCache.isFullyInitialized()||_u(r,gt())!=null,Pa(e,d,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new Jp(r.getIndex()),i=F6(r);this.processor_=hk(i);const o=n.serverCache,c=n.eventCache,u=s.updateFullNode(Ve.EMPTY_NODE,o.getNode(),null),d=i.updateFullNode(Ve.EMPTY_NODE,c.getNode(),null),f=new Js(u,o.isFullyInitialized(),s.filtersNodes()),p=new Js(d,c.isFullyInitialized(),i.filtersNodes());this.viewCache_=ed(p,f),this.eventGenerator_=new V6(this.query_)}get query(){return this.query_}}function _k(t){return t.viewCache_.serverCache.getNode()}function bk(t){return vu(t.viewCache_)}function Sk(t,e){const n=Oi(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ct(e)&&!n.getImmediateChild(ot(e)).isEmpty())?n.getChild(e):null}function gy(t){return t.eventRegistrations_.length===0}function Ck(t,e){t.eventRegistrations_.push(e)}function yy(t,e,n){const r=[];if(n){we(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function xy(t,e,n,r){e.type===wr.MERGE&&e.source.queryId!==null&&(we(Oi(t.viewCache_),"We should always have a full cache before handling merges"),we(vu(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=pk(t.processor_,s,e,n,r);return fk(t.processor_,i.viewCache),we(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,r2(t,i.changes,i.viewCache.eventCache.getNode(),null)}function jk(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Yt,(i,o)=>{r.push(Ro(i,o))}),n.isFullyInitialized()&&r.push(Gw(n.getNode())),r2(t,r,n.getNode(),e)}function r2(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return K6(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Su;class s2{constructor(){this.views=new Map}}function Ek(t){we(!Su,"__referenceConstructor has already been defined"),Su=t}function Ik(){return we(Su,"Reference.ts has not been loaded"),Su}function kk(t){return t.views.size===0}function im(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return we(i!=null,"SyncTree gave us an op for an invalid query."),xy(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(xy(o,e,n,r));return i}}function i2(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let c=wu(n,s?r:null),u=!1;c?u=!0:r instanceof Ve?(c=nm(n,r),u=!1):(c=Ve.EMPTY_NODE,u=!1);const d=ed(new Js(c,u,!1),new Js(r,s,!1));return new wk(e,d)}return o}function Nk(t,e,n,r,s,i){const o=i2(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),Ck(o,n),jk(o,n)}function Tk(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const c=Xs(t);if(s==="default")for(const[u,d]of t.views.entries())o=o.concat(yy(d,n,r)),gy(d)&&(t.views.delete(u),d.query._queryParams.loadsAllData()||i.push(d.query));else{const u=t.views.get(s);u&&(o=o.concat(yy(u,n,r)),gy(u)&&(t.views.delete(s),u.query._queryParams.loadsAllData()||i.push(u.query)))}return c&&!Xs(t)&&i.push(new(Ik())(e._repo,e._path)),{removed:i,events:o}}function o2(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Gs(t,e){let n=null;for(const r of t.views.values())n=n||Sk(r,e);return n}function a2(t,e){if(e._queryParams.loadsAllData())return nd(t);{const r=e._queryIdentifier;return t.views.get(r)}}function l2(t,e){return a2(t,e)!=null}function Xs(t){return nd(t)!=null}function nd(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cu;function Rk(t){we(!Cu,"__referenceConstructor has already been defined"),Cu=t}function Ak(){return we(Cu,"Reference.ts has not been loaded"),Cu}let Pk=1;class vy{constructor(e){this.listenProvider_=e,this.syncPointTree_=new It(null),this.pendingWriteTree_=lk(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function c2(t,e,n,r,s){return Q6(t.pendingWriteTree_,e,n,r,s),s?Ko(t,new Di(Zp(),e,n)):[]}function Dk(t,e,n,r){J6(t.pendingWriteTree_,e,n,r);const s=It.fromObject(n);return Ko(t,new Ao(Zp(),e,s))}function Ds(t,e,n=!1){const r=X6(t.pendingWriteTree_,e);if(Z6(t.pendingWriteTree_,e)){let i=new It(null);return r.snap!=null?i=i.set(gt(),!0):wn(r.children,o=>{i=i.set(new St(o),!0)}),Ko(t,new xu(r.path,i,n))}else return[]}function Dl(t,e,n){return Ko(t,new Di(em(),e,n))}function Ok(t,e,n){const r=It.fromObject(n);return Ko(t,new Ao(em(),e,r))}function Mk(t,e){return Ko(t,new pl(em(),e))}function Lk(t,e,n){const r=am(t,n);if(r){const s=lm(r),i=s.path,o=s.queryId,c=Nn(i,e),u=new pl(tm(o),c);return cm(t,i,u)}else return[]}function ju(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let c=[];if(o&&(e._queryIdentifier==="default"||l2(o,e))){const u=Tk(o,e,n,r);kk(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const d=u.removed;if(c=u.events,!s){const f=d.findIndex(y=>y._queryParams.loadsAllData())!==-1,p=t.syncPointTree_.findOnPath(i,(y,k)=>Xs(k));if(f&&!p){const y=t.syncPointTree_.subtree(i);if(!y.isEmpty()){const k=Bk(y);for(let w=0;w<k.length;++w){const R=k[w],D=R.query,S=f2(t,R);t.listenProvider_.startListening(Oa(D),ml(t,D),S.hashFn,S.onComplete)}}}!p&&d.length>0&&!r&&(f?t.listenProvider_.stopListening(Oa(e),null):d.forEach(y=>{const k=t.queryToTagMap.get(rd(y));t.listenProvider_.stopListening(Oa(y),k)}))}$k(t,d)}return c}function u2(t,e,n,r){const s=am(t,r);if(s!=null){const i=lm(s),o=i.path,c=i.queryId,u=Nn(o,e),d=new Di(tm(c),u,n);return cm(t,o,d)}else return[]}function Fk(t,e,n,r){const s=am(t,r);if(s){const i=lm(s),o=i.path,c=i.queryId,u=Nn(o,e),d=It.fromObject(n),f=new Ao(tm(c),u,d);return cm(t,o,f)}else return[]}function Tf(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(y,k)=>{const w=Nn(y,s);i=i||Gs(k,w),o=o||Xs(k)});let c=t.syncPointTree_.get(s);c?(o=o||Xs(c),i=i||Gs(c,gt())):(c=new s2,t.syncPointTree_=t.syncPointTree_.set(s,c));let u;i!=null?u=!0:(u=!1,i=Ve.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((k,w)=>{const R=Gs(w,gt());R&&(i=i.updateImmediateChild(k,R))}));const d=l2(c,e);if(!d&&!e._queryParams.loadsAllData()){const y=rd(e);we(!t.queryToTagMap.has(y),"View does not exist, but we have a tag");const k=Uk();t.queryToTagMap.set(y,k),t.tagToQueryMap.set(k,y)}const f=td(t.pendingWriteTree_,s);let p=Nk(c,e,n,f,i,u);if(!d&&!o&&!r){const y=a2(c,e);p=p.concat(Wk(t,e,y))}return p}function om(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,c)=>{const u=Nn(o,e),d=Gs(c,u);if(d)return d});return Xw(s,e,i,n,!0)}function zk(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(d,f)=>{const p=Nn(d,n);r=r||Gs(f,p)});let s=t.syncPointTree_.get(n);s?r=r||Gs(s,gt()):(s=new s2,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new Js(r,!0,!1):null,c=td(t.pendingWriteTree_,e._path),u=i2(s,e,c,i?o.getNode():Ve.EMPTY_NODE,i);return bk(u)}function Ko(t,e){return d2(e,t.syncPointTree_,null,td(t.pendingWriteTree_,gt()))}function d2(t,e,n,r){if(ct(t.path))return h2(t,e,n,r);{const s=e.get(gt());n==null&&s!=null&&(n=Gs(s,gt()));let i=[];const o=ot(t.path),c=t.operationForChild(o),u=e.children.get(o);if(u&&c){const d=n?n.getImmediateChild(o):null,f=Zw(r,o);i=i.concat(d2(c,u,d,f))}return s&&(i=i.concat(im(s,t,r,n))),i}}function h2(t,e,n,r){const s=e.get(gt());n==null&&s!=null&&(n=Gs(s,gt()));let i=[];return e.children.inorderTraversal((o,c)=>{const u=n?n.getImmediateChild(o):null,d=Zw(r,o),f=t.operationForChild(o);f&&(i=i.concat(h2(f,c,u,d)))}),s&&(i=i.concat(im(s,t,r,n))),i}function f2(t,e){const n=e.query,r=ml(t,n);return{hashFn:()=>(_k(e)||Ve.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?Lk(t,n._path,r):Mk(t,n._path);{const i=MI(s,n);return ju(t,n,null,i)}}}}function ml(t,e){const n=rd(e);return t.queryToTagMap.get(n)}function rd(t){return t._path.toString()+"$"+t._queryIdentifier}function am(t,e){return t.tagToQueryMap.get(e)}function lm(t){const e=t.indexOf("$");return we(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new St(t.substr(0,e))}}function cm(t,e,n){const r=t.syncPointTree_.get(e);we(r,"Missing sync point for query tag that we're tracking");const s=td(t.pendingWriteTree_,e);return im(r,n,s,null)}function Bk(t){return t.fold((e,n,r)=>{if(n&&Xs(n))return[nd(n)];{let s=[];return n&&(s=o2(n)),wn(r,(i,o)=>{s=s.concat(o)}),s}})}function Oa(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Ak())(t._repo,t._path):t}function $k(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=rd(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function Uk(){return Pk++}function Wk(t,e,n){const r=e._path,s=ml(t,e),i=f2(t,n),o=t.listenProvider_.startListening(Oa(e),s,i.hashFn,i.onComplete),c=t.syncPointTree_.subtree(r);if(s)we(!Xs(c.value),"If we're adding a query, it shouldn't be shadowed");else{const u=c.fold((d,f,p)=>{if(!ct(d)&&f&&Xs(f))return[nd(f).query];{let y=[];return f&&(y=y.concat(o2(f).map(k=>k.query))),wn(p,(k,w)=>{y=y.concat(w)}),y}});for(let d=0;d<u.length;++d){const f=u[d];t.listenProvider_.stopListening(Oa(f),ml(t,f))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new um(n)}node(){return this.node_}}class dm{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=qt(this.path_,e);return new dm(this.syncTree_,n)}node(){return om(this.syncTree_,this.path_)}}const Hk=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},wy=function(t,e,n){if(!t||typeof t!="object")return t;if(we(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Vk(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Kk(t[".sv"],e);we(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Vk=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:we(!1,"Unexpected server value: "+t)}},Kk=function(t,e,n){t.hasOwnProperty("increment")||we(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&we(!1,"Unexpected increment value: "+r);const s=e.node();if(we(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},p2=function(t,e,n,r){return hm(e,new dm(n,t),r)},m2=function(t,e,n){return hm(t,new um(e),n)};function hm(t,e,n){const r=t.getPriority().val(),s=wy(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,c=wy(o.getValue(),e,n);return c!==o.getValue()||s!==o.getPriority().val()?new un(c,on(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new un(s))),o.forEachChild(Yt,(c,u)=>{const d=hm(u,e.getImmediateChild(c),n);d!==u&&(i=i.updateImmediateChild(c,d))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function pm(t,e){let n=e instanceof St?e:new St(e),r=t,s=ot(n);for(;s!==null;){const i=ko(r.node.children,s)||{children:{},childCount:0};r=new fm(s,r,i),n=Nt(n),s=ot(n)}return r}function Go(t){return t.node.value}function g2(t,e){t.node.value=e,Rf(t)}function y2(t){return t.node.childCount>0}function Gk(t){return Go(t)===void 0&&!y2(t)}function sd(t,e){wn(t.node.children,(n,r)=>{e(new fm(n,t,r))})}function x2(t,e,n,r){n&&e(t),sd(t,s=>{x2(s,e,!0)})}function qk(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Ol(t){return new St(t.parent===null?t.name:Ol(t.parent)+"/"+t.name)}function Rf(t){t.parent!==null&&Yk(t.parent,t.name,t)}function Yk(t,e,n){const r=Gk(n),s=Kr(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,Rf(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,Rf(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk=/[\[\].#$\/\u0000-\u001F\u007F]/,Jk=/[\[\].#$\u0000-\u001F\u007F]/,ih=10*1024*1024,mm=function(t){return typeof t=="string"&&t.length!==0&&!Qk.test(t)},v2=function(t){return typeof t=="string"&&t.length!==0&&!Jk.test(t)},Xk=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),v2(t)},Zk=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Up(t)||t&&typeof t=="object"&&Kr(t,".sv")},w2=function(t,e,n,r){r&&e===void 0||id(Ju(t,"value"),e,n)},id=function(t,e,n){const r=n instanceof St?new g6(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+pi(r));if(typeof e=="function")throw new Error(t+"contains a function "+pi(r)+" with contents = "+e.toString());if(Up(e))throw new Error(t+"contains "+e.toString()+" "+pi(r));if(typeof e=="string"&&e.length>ih/3&&Xu(e)>ih)throw new Error(t+"contains a string greater than "+ih+" utf8 bytes "+pi(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(wn(e,(o,c)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!mm(o)))throw new Error(t+" contains an invalid key ("+o+") "+pi(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);y6(r,o),id(t,c,r),x6(r)}),s&&i)throw new Error(t+' contains ".value" child '+pi(r)+" in addition to actual children.")}},e3=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const i=ul(r);for(let o=0;o<i.length;o++)if(!(i[o]===".priority"&&o===i.length-1)){if(!mm(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(m6);let s=null;for(n=0;n<e.length;n++){if(r=e[n],s!==null&&or(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}},t3=function(t,e,n,r){const s=Ju(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const i=[];wn(e,(o,c)=>{const u=new St(o);if(id(s,c,qt(n,u)),Gp(u)===".priority"&&!Zk(c))throw new Error(s+"contains an invalid value for '"+u.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");i.push(u)}),e3(s,i)},_2=function(t,e,n,r){if(!v2(n))throw new Error(Ju(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},n3=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),_2(t,e,n)},b2=function(t,e){if(ot(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},r3=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!mm(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Xk(n))throw new Error(Ju(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function od(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!qp(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function S2(t,e,n){od(t,n),C2(t,r=>qp(r,e))}function dr(t,e,n){od(t,n),C2(t,r=>or(r,e)||or(e,r))}function C2(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(i3(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function i3(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Ra&&yn("event: "+n.toString()),Vo(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o3="repo_interrupt",a3=25;class l3{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new s3,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=yu(),this.transactionQueueTree_=new fm,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function c3(t,e,n){if(t.stats_=Vp(t.repoInfo_),t.forceRestClient_||BI())t.server_=new gu(t.repoInfo_,(r,s,i,o)=>{_y(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>by(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{an(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new ss(t.repoInfo_,e,(r,s,i,o)=>{_y(t,r,s,i,o)},r=>{by(t,r)},r=>{u3(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=VI(t.repoInfo_,()=>new H6(t.stats_,t.server_)),t.infoData_=new z6,t.infoSyncTree_=new vy({startListening:(r,s,i,o)=>{let c=[];const u=t.infoData_.getNode(r._path);return u.isEmpty()||(c=Dl(t.infoSyncTree_,r._path,u),setTimeout(()=>{o("ok")},0)),c},stopListening:()=>{}}),gm(t,"connected",!1),t.serverSyncTree_=new vy({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(c,u)=>{const d=o(c,u);dr(t.eventQueue_,r._path,d)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function j2(t){const n=t.infoData_.getNode(new St(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function ad(t){return Hk({timestamp:j2(t)})}function _y(t,e,n,r,s){t.dataUpdateCount++;const i=new St(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const u=hu(n,d=>on(d));o=Fk(t.serverSyncTree_,i,u,s)}else{const u=on(n);o=u2(t.serverSyncTree_,i,u,s)}else if(r){const u=hu(n,d=>on(d));o=Ok(t.serverSyncTree_,i,u)}else{const u=on(n);o=Dl(t.serverSyncTree_,i,u)}let c=i;o.length>0&&(c=Do(t,i)),dr(t.eventQueue_,c,o)}function by(t,e){gm(t,"connected",e),e===!1&&p3(t)}function u3(t,e){wn(e,(n,r)=>{gm(t,n,r)})}function gm(t,e,n){const r=new St("/.info/"+e),s=on(n);t.infoData_.updateSnapshot(r,s);const i=Dl(t.infoSyncTree_,r,s);dr(t.eventQueue_,r,i)}function ym(t){return t.nextWriteId_++}function d3(t,e,n){const r=zk(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=on(s).withIndex(e._queryParams.getIndex());Tf(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=Dl(t.serverSyncTree_,e._path,i);else{const c=ml(t.serverSyncTree_,e);o=u2(t.serverSyncTree_,e._path,i,c)}return dr(t.eventQueue_,e._path,o),ju(t.serverSyncTree_,e,n,null,!0),i},s=>(Ml(t,"get for query "+an(e)+" failed: "+s),Promise.reject(new Error(s))))}function h3(t,e,n,r,s){Ml(t,"set",{path:e.toString(),value:n,priority:r});const i=ad(t),o=on(n,r),c=om(t.serverSyncTree_,e),u=m2(o,c,i),d=ym(t),f=c2(t.serverSyncTree_,e,u,d,!0);od(t.eventQueue_,f),t.server_.put(e.toString(),o.val(!0),(y,k)=>{const w=y==="ok";w||Rn("set at "+e+" failed: "+y);const R=Ds(t.serverSyncTree_,d,!w);dr(t.eventQueue_,e,R),Af(t,s,y,k)});const p=vm(t,e);Do(t,p),dr(t.eventQueue_,p,[])}function f3(t,e,n,r){Ml(t,"update",{path:e.toString(),value:n});let s=!0;const i=ad(t),o={};if(wn(n,(c,u)=>{s=!1,o[c]=p2(qt(e,c),on(u),t.serverSyncTree_,i)}),s)yn("update() called with empty data.  Don't do anything."),Af(t,r,"ok",void 0);else{const c=ym(t),u=Dk(t.serverSyncTree_,e,o,c);od(t.eventQueue_,u),t.server_.merge(e.toString(),n,(d,f)=>{const p=d==="ok";p||Rn("update at "+e+" failed: "+d);const y=Ds(t.serverSyncTree_,c,!p),k=y.length>0?Do(t,e):e;dr(t.eventQueue_,k,y),Af(t,r,d,f)}),wn(n,d=>{const f=vm(t,qt(e,d));Do(t,f)}),dr(t.eventQueue_,e,[])}}function p3(t){Ml(t,"onDisconnectEvents");const e=ad(t),n=yu();Cf(t.onDisconnect_,gt(),(s,i)=>{const o=p2(s,i,t.serverSyncTree_,e);qw(n,s,o)});let r=[];Cf(n,gt(),(s,i)=>{r=r.concat(Dl(t.serverSyncTree_,s,i));const o=vm(t,s);Do(t,o)}),t.onDisconnect_=yu(),dr(t.eventQueue_,gt(),r)}function m3(t,e,n){let r;ot(e._path)===".info"?r=Tf(t.infoSyncTree_,e,n):r=Tf(t.serverSyncTree_,e,n),S2(t.eventQueue_,e._path,r)}function E2(t,e,n){let r;ot(e._path)===".info"?r=ju(t.infoSyncTree_,e,n):r=ju(t.serverSyncTree_,e,n),S2(t.eventQueue_,e._path,r)}function g3(t){t.persistentConnection_&&t.persistentConnection_.interrupt(o3)}function Ml(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),yn(n,...e)}function Af(t,e,n,r){e&&Vo(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function I2(t,e,n){return om(t.serverSyncTree_,e,n)||Ve.EMPTY_NODE}function xm(t,e=t.transactionQueueTree_){if(e||ld(t,e),Go(e)){const n=N2(t,e);we(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&y3(t,Ol(e),n)}else y2(e)&&sd(e,n=>{xm(t,n)})}function y3(t,e,n){const r=n.map(d=>d.currentWriteId),s=I2(t,e,r);let i=s;const o=s.hash();for(let d=0;d<n.length;d++){const f=n[d];we(f.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=1,f.retryCount++;const p=Nn(e,f.path);i=i.updateChild(p,f.currentOutputSnapshotRaw)}const c=i.val(!0),u=e;t.server_.put(u.toString(),c,d=>{Ml(t,"transaction put response",{path:u.toString(),status:d});let f=[];if(d==="ok"){const p=[];for(let y=0;y<n.length;y++)n[y].status=2,f=f.concat(Ds(t.serverSyncTree_,n[y].currentWriteId)),n[y].onComplete&&p.push(()=>n[y].onComplete(null,!0,n[y].currentOutputSnapshotResolved)),n[y].unwatcher();ld(t,pm(t.transactionQueueTree_,e)),xm(t,t.transactionQueueTree_),dr(t.eventQueue_,e,f);for(let y=0;y<p.length;y++)Vo(p[y])}else{if(d==="datastale")for(let p=0;p<n.length;p++)n[p].status===3?n[p].status=4:n[p].status=0;else{Rn("transaction at "+u.toString()+" failed: "+d);for(let p=0;p<n.length;p++)n[p].status=4,n[p].abortReason=d}Do(t,e)}},o)}function Do(t,e){const n=k2(t,e),r=Ol(n),s=N2(t,n);return x3(t,s,r),r}function x3(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(c=>c.status===0).map(c=>c.currentWriteId);for(let c=0;c<e.length;c++){const u=e[c],d=Nn(n,u.path);let f=!1,p;if(we(d!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===4)f=!0,p=u.abortReason,s=s.concat(Ds(t.serverSyncTree_,u.currentWriteId,!0));else if(u.status===0)if(u.retryCount>=a3)f=!0,p="maxretry",s=s.concat(Ds(t.serverSyncTree_,u.currentWriteId,!0));else{const y=I2(t,u.path,o);u.currentInputSnapshot=y;const k=e[c].update(y.val());if(k!==void 0){id("transaction failed: Data returned ",k,u.path);let w=on(k);typeof k=="object"&&k!=null&&Kr(k,".priority")||(w=w.updatePriority(y.getPriority()));const D=u.currentWriteId,S=ad(t),_=m2(w,y,S);u.currentOutputSnapshotRaw=w,u.currentOutputSnapshotResolved=_,u.currentWriteId=ym(t),o.splice(o.indexOf(D),1),s=s.concat(c2(t.serverSyncTree_,u.path,_,u.currentWriteId,u.applyLocally)),s=s.concat(Ds(t.serverSyncTree_,D,!0))}else f=!0,p="nodata",s=s.concat(Ds(t.serverSyncTree_,u.currentWriteId,!0))}dr(t.eventQueue_,n,s),s=[],f&&(e[c].status=2,function(y){setTimeout(y,Math.floor(0))}(e[c].unwatcher),e[c].onComplete&&(p==="nodata"?r.push(()=>e[c].onComplete(null,!1,e[c].currentInputSnapshot)):r.push(()=>e[c].onComplete(new Error(p),!1,null))))}ld(t,t.transactionQueueTree_);for(let c=0;c<r.length;c++)Vo(r[c]);xm(t,t.transactionQueueTree_)}function k2(t,e){let n,r=t.transactionQueueTree_;for(n=ot(e);n!==null&&Go(r)===void 0;)r=pm(r,n),e=Nt(e),n=ot(e);return r}function N2(t,e){const n=[];return T2(t,e,n),n.sort((r,s)=>r.order-s.order),n}function T2(t,e,n){const r=Go(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);sd(e,s=>{T2(t,s,n)})}function ld(t,e){const n=Go(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,g2(e,n.length>0?n:void 0)}sd(e,r=>{ld(t,r)})}function vm(t,e){const n=Ol(k2(t,e)),r=pm(t.transactionQueueTree_,e);return qk(r,s=>{oh(t,s)}),oh(t,r),x2(r,s=>{oh(t,s)}),n}function oh(t,e){const n=Go(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(we(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(we(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(Ds(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?g2(e,void 0):n.length=i+1,dr(t.eventQueue_,Ol(e),s);for(let o=0;o<r.length;o++)Vo(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v3(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function w3(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Rn(`Invalid query segment '${n}' in query '${t}'`)}return e}const Sy=function(t,e){const n=_3(t),r=n.namespace;n.domain==="firebase.com"&&hs(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&hs("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||RI();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Rw(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new St(n.pathString)}},_3=function(t){let e="",n="",r="",s="",i="",o=!0,c="https",u=443;if(typeof t=="string"){let d=t.indexOf("//");d>=0&&(c=t.substring(0,d-1),t=t.substring(d+2));let f=t.indexOf("/");f===-1&&(f=t.length);let p=t.indexOf("?");p===-1&&(p=t.length),e=t.substring(0,Math.min(f,p)),f<p&&(s=v3(t.substring(f,p)));const y=w3(t.substring(Math.min(t.length,p)));d=e.indexOf(":"),d>=0?(o=c==="https"||c==="wss",u=parseInt(e.substring(d+1),10)):d=e.length;const k=e.slice(0,d);if(k.toLowerCase()==="localhost")n="localhost";else if(k.split(".").length<=2)n=k;else{const w=e.indexOf(".");r=e.substring(0,w).toLowerCase(),n=e.substring(w+1),i=r}"ns"in y&&(i=y.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:o,scheme:c,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cy="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",b3=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let s;const i=new Array(8);for(s=7;s>=0;s--)i[s]=Cy.charAt(n%64),n=Math.floor(n/64);we(n===0,"Cannot push at time == 0");let o=i.join("");if(r){for(s=11;s>=0&&e[s]===63;s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(Math.random()*64);for(s=0;s<12;s++)o+=Cy.charAt(e[s]);return we(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S3{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+an(this.snapshot.exportVal())}}class C3{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return we(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return ct(this._path)?null:Gp(this._path)}get ref(){return new vs(this._repo,this._path)}get _queryIdentifier(){const e=cy(this._queryParams),n=Wp(e);return n==="{}"?"default":n}get _queryObject(){return cy(this._queryParams)}isEqual(e){if(e=Bi(e),!(e instanceof wm))return!1;const n=this._repo===e._repo,r=qp(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+p6(this._path)}}class vs extends wm{constructor(e,n){super(e,n,new Xp,!1)}get parent(){const e=Bw(this._path);return e===null?null:new vs(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class gl{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new St(e),r=Mi(this.ref,e);return new gl(this._node.getChild(n),r,Yt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new gl(s,Mi(this.ref,r),Yt)))}hasChild(e){const n=new St(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Ot(t,e){return t=Bi(t),t._checkNotDeleted("ref"),e!==void 0?Mi(t._root,e):t._root}function Mi(t,e){return t=Bi(t),ot(t._path)===null?n3("child","path",e):_2("child","path",e),new vs(t._repo,qt(t._path,e))}function j3(t,e){t=Bi(t),b2("push",t._path),w2("push",e,t._path,!0);const n=j2(t._repo),r=b3(n),s=Mi(t,r),i=Mi(t,r);let o;return e!=null?o=A2(i,e).then(()=>i):o=Promise.resolve(i),s.then=o.then.bind(o),s.catch=o.then.bind(o,void 0),s}function A2(t,e){t=Bi(t),b2("set",t._path),w2("set",e,t._path,!1);const n=new Tl;return h3(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Or(t,e){t3("update",e,t._path);const n=new Tl;return f3(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function Ma(t){t=Bi(t);const e=new R2(()=>{}),n=new cd(e);return d3(t._repo,t,n).then(r=>new gl(r,new vs(t._repo,t._path),t._queryParams.getIndex()))}class cd{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new S3("value",this,new gl(e.snapshotNode,new vs(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new C3(this,e,n):null}matches(e){return e instanceof cd?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function E3(t,e,n,r,s){const i=new R2(n,void 0),o=new cd(i);return m3(t._repo,t,o),()=>E2(t._repo,t,o)}function yo(t,e,n,r){return E3(t,"value",e)}function P2(t,e,n){E2(t._repo,t,null)}Ek(vs);Rk(vs);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I3="FIREBASE_DATABASE_EMULATOR_HOST",Pf={};let k3=!1;function N3(t,e,n,r){const s=e.lastIndexOf(":"),i=e.substring(0,s),o=Qu(i);t.repoInfo_=new Rw(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(t.authTokenProvider_=r)}function T3(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||hs("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),yn("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Sy(i,s),c=o.repoInfo,u;typeof process<"u"&&V0&&(u=V0[I3]),u?(i=`http://${u}?ns=${c.namespace}`,o=Sy(i,s),c=o.repoInfo):o.repoInfo.secure;const d=new UI(t.name,t.options,e);r3("Invalid Firebase Database URL",o),ct(o.path)||hs("Database URL must point to the root of a Firebase Database (not including a child path).");const f=A3(c,t,d,new $I(t,n));return new P3(f,t)}function R3(t,e){const n=Pf[e];(!n||n[t.key]!==t)&&hs(`Database ${e}(${t.repoInfo_}) has already been deleted.`),g3(t),delete n[t.key]}function A3(t,e,n,r){let s=Pf[e.name];s||(s={},Pf[e.name]=s);let i=s[t.toURLString()];return i&&hs("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new l3(t,k3,n,r),s[t.toURLString()]=i,i}class P3{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(c3(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new vs(this._repo,gt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(R3(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&hs("Cannot call "+e+" on a deleted database.")}}function D2(t=pw(),e){const n=uw(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=ew("database");r&&D3(n,...r)}return n}function D3(t,e,n,r={}){t=Bi(t),t._checkNotDeleted("useEmulator");const s=`${e}:${n}`,i=t._repoInternal;if(t._instanceStarted){if(s===t._repoInternal.repoInfo_.host&&il(r,i.repoInfo_.emulatorOptions))return;hs("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&hs('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Oc(Oc.OWNER);else if(r.mockUserToken){const c=typeof r.mockUserToken=="string"?r.mockUserToken:rw(r.mockUserToken,t.app.options.projectId);o=new Oc(c)}Qu(e)&&(nw(e),sw("Database",!0)),N3(i,s,r,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O3(t){jI(hw),al(new No("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return T3(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),Vs(K0,G0,t),Vs(K0,G0,"esm2020")}ss.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};ss.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};O3();var jy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _m;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,x){function j(){}j.prototype=x.prototype,E.F=x.prototype,E.prototype=new j,E.prototype.constructor=E,E.D=function(I,N,O){for(var C=Array(arguments.length-2),V=2;V<arguments.length;V++)C[V-2]=arguments[V];return x.prototype[N].apply(I,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,x,j){j||(j=0);const I=Array(16);if(typeof x=="string")for(var N=0;N<16;++N)I[N]=x.charCodeAt(j++)|x.charCodeAt(j++)<<8|x.charCodeAt(j++)<<16|x.charCodeAt(j++)<<24;else for(N=0;N<16;++N)I[N]=x[j++]|x[j++]<<8|x[j++]<<16|x[j++]<<24;x=E.g[0],j=E.g[1],N=E.g[2];let O=E.g[3],C;C=x+(O^j&(N^O))+I[0]+3614090360&4294967295,x=j+(C<<7&4294967295|C>>>25),C=O+(N^x&(j^N))+I[1]+3905402710&4294967295,O=x+(C<<12&4294967295|C>>>20),C=N+(j^O&(x^j))+I[2]+606105819&4294967295,N=O+(C<<17&4294967295|C>>>15),C=j+(x^N&(O^x))+I[3]+3250441966&4294967295,j=N+(C<<22&4294967295|C>>>10),C=x+(O^j&(N^O))+I[4]+4118548399&4294967295,x=j+(C<<7&4294967295|C>>>25),C=O+(N^x&(j^N))+I[5]+1200080426&4294967295,O=x+(C<<12&4294967295|C>>>20),C=N+(j^O&(x^j))+I[6]+2821735955&4294967295,N=O+(C<<17&4294967295|C>>>15),C=j+(x^N&(O^x))+I[7]+4249261313&4294967295,j=N+(C<<22&4294967295|C>>>10),C=x+(O^j&(N^O))+I[8]+1770035416&4294967295,x=j+(C<<7&4294967295|C>>>25),C=O+(N^x&(j^N))+I[9]+2336552879&4294967295,O=x+(C<<12&4294967295|C>>>20),C=N+(j^O&(x^j))+I[10]+4294925233&4294967295,N=O+(C<<17&4294967295|C>>>15),C=j+(x^N&(O^x))+I[11]+2304563134&4294967295,j=N+(C<<22&4294967295|C>>>10),C=x+(O^j&(N^O))+I[12]+1804603682&4294967295,x=j+(C<<7&4294967295|C>>>25),C=O+(N^x&(j^N))+I[13]+4254626195&4294967295,O=x+(C<<12&4294967295|C>>>20),C=N+(j^O&(x^j))+I[14]+2792965006&4294967295,N=O+(C<<17&4294967295|C>>>15),C=j+(x^N&(O^x))+I[15]+1236535329&4294967295,j=N+(C<<22&4294967295|C>>>10),C=x+(N^O&(j^N))+I[1]+4129170786&4294967295,x=j+(C<<5&4294967295|C>>>27),C=O+(j^N&(x^j))+I[6]+3225465664&4294967295,O=x+(C<<9&4294967295|C>>>23),C=N+(x^j&(O^x))+I[11]+643717713&4294967295,N=O+(C<<14&4294967295|C>>>18),C=j+(O^x&(N^O))+I[0]+3921069994&4294967295,j=N+(C<<20&4294967295|C>>>12),C=x+(N^O&(j^N))+I[5]+3593408605&4294967295,x=j+(C<<5&4294967295|C>>>27),C=O+(j^N&(x^j))+I[10]+38016083&4294967295,O=x+(C<<9&4294967295|C>>>23),C=N+(x^j&(O^x))+I[15]+3634488961&4294967295,N=O+(C<<14&4294967295|C>>>18),C=j+(O^x&(N^O))+I[4]+3889429448&4294967295,j=N+(C<<20&4294967295|C>>>12),C=x+(N^O&(j^N))+I[9]+568446438&4294967295,x=j+(C<<5&4294967295|C>>>27),C=O+(j^N&(x^j))+I[14]+3275163606&4294967295,O=x+(C<<9&4294967295|C>>>23),C=N+(x^j&(O^x))+I[3]+4107603335&4294967295,N=O+(C<<14&4294967295|C>>>18),C=j+(O^x&(N^O))+I[8]+1163531501&4294967295,j=N+(C<<20&4294967295|C>>>12),C=x+(N^O&(j^N))+I[13]+2850285829&4294967295,x=j+(C<<5&4294967295|C>>>27),C=O+(j^N&(x^j))+I[2]+4243563512&4294967295,O=x+(C<<9&4294967295|C>>>23),C=N+(x^j&(O^x))+I[7]+1735328473&4294967295,N=O+(C<<14&4294967295|C>>>18),C=j+(O^x&(N^O))+I[12]+2368359562&4294967295,j=N+(C<<20&4294967295|C>>>12),C=x+(j^N^O)+I[5]+4294588738&4294967295,x=j+(C<<4&4294967295|C>>>28),C=O+(x^j^N)+I[8]+2272392833&4294967295,O=x+(C<<11&4294967295|C>>>21),C=N+(O^x^j)+I[11]+1839030562&4294967295,N=O+(C<<16&4294967295|C>>>16),C=j+(N^O^x)+I[14]+4259657740&4294967295,j=N+(C<<23&4294967295|C>>>9),C=x+(j^N^O)+I[1]+2763975236&4294967295,x=j+(C<<4&4294967295|C>>>28),C=O+(x^j^N)+I[4]+1272893353&4294967295,O=x+(C<<11&4294967295|C>>>21),C=N+(O^x^j)+I[7]+4139469664&4294967295,N=O+(C<<16&4294967295|C>>>16),C=j+(N^O^x)+I[10]+3200236656&4294967295,j=N+(C<<23&4294967295|C>>>9),C=x+(j^N^O)+I[13]+681279174&4294967295,x=j+(C<<4&4294967295|C>>>28),C=O+(x^j^N)+I[0]+3936430074&4294967295,O=x+(C<<11&4294967295|C>>>21),C=N+(O^x^j)+I[3]+3572445317&4294967295,N=O+(C<<16&4294967295|C>>>16),C=j+(N^O^x)+I[6]+76029189&4294967295,j=N+(C<<23&4294967295|C>>>9),C=x+(j^N^O)+I[9]+3654602809&4294967295,x=j+(C<<4&4294967295|C>>>28),C=O+(x^j^N)+I[12]+3873151461&4294967295,O=x+(C<<11&4294967295|C>>>21),C=N+(O^x^j)+I[15]+530742520&4294967295,N=O+(C<<16&4294967295|C>>>16),C=j+(N^O^x)+I[2]+3299628645&4294967295,j=N+(C<<23&4294967295|C>>>9),C=x+(N^(j|~O))+I[0]+4096336452&4294967295,x=j+(C<<6&4294967295|C>>>26),C=O+(j^(x|~N))+I[7]+1126891415&4294967295,O=x+(C<<10&4294967295|C>>>22),C=N+(x^(O|~j))+I[14]+2878612391&4294967295,N=O+(C<<15&4294967295|C>>>17),C=j+(O^(N|~x))+I[5]+4237533241&4294967295,j=N+(C<<21&4294967295|C>>>11),C=x+(N^(j|~O))+I[12]+1700485571&4294967295,x=j+(C<<6&4294967295|C>>>26),C=O+(j^(x|~N))+I[3]+2399980690&4294967295,O=x+(C<<10&4294967295|C>>>22),C=N+(x^(O|~j))+I[10]+4293915773&4294967295,N=O+(C<<15&4294967295|C>>>17),C=j+(O^(N|~x))+I[1]+2240044497&4294967295,j=N+(C<<21&4294967295|C>>>11),C=x+(N^(j|~O))+I[8]+1873313359&4294967295,x=j+(C<<6&4294967295|C>>>26),C=O+(j^(x|~N))+I[15]+4264355552&4294967295,O=x+(C<<10&4294967295|C>>>22),C=N+(x^(O|~j))+I[6]+2734768916&4294967295,N=O+(C<<15&4294967295|C>>>17),C=j+(O^(N|~x))+I[13]+1309151649&4294967295,j=N+(C<<21&4294967295|C>>>11),C=x+(N^(j|~O))+I[4]+4149444226&4294967295,x=j+(C<<6&4294967295|C>>>26),C=O+(j^(x|~N))+I[11]+3174756917&4294967295,O=x+(C<<10&4294967295|C>>>22),C=N+(x^(O|~j))+I[2]+718787259&4294967295,N=O+(C<<15&4294967295|C>>>17),C=j+(O^(N|~x))+I[9]+3951481745&4294967295,E.g[0]=E.g[0]+x&4294967295,E.g[1]=E.g[1]+(N+(C<<21&4294967295|C>>>11))&4294967295,E.g[2]=E.g[2]+N&4294967295,E.g[3]=E.g[3]+O&4294967295}r.prototype.v=function(E,x){x===void 0&&(x=E.length);const j=x-this.blockSize,I=this.C;let N=this.h,O=0;for(;O<x;){if(N==0)for(;O<=j;)s(this,E,O),O+=this.blockSize;if(typeof E=="string"){for(;O<x;)if(I[N++]=E.charCodeAt(O++),N==this.blockSize){s(this,I),N=0;break}}else for(;O<x;)if(I[N++]=E[O++],N==this.blockSize){s(this,I),N=0;break}}this.h=N,this.o+=x},r.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var x=1;x<E.length-8;++x)E[x]=0;x=this.o*8;for(var j=E.length-8;j<E.length;++j)E[j]=x&255,x/=256;for(this.v(E),E=Array(16),x=0,j=0;j<4;++j)for(let I=0;I<32;I+=8)E[x++]=this.g[j]>>>I&255;return E};function i(E,x){var j=c;return Object.prototype.hasOwnProperty.call(j,E)?j[E]:j[E]=x(E)}function o(E,x){this.h=x;const j=[];let I=!0;for(let N=E.length-1;N>=0;N--){const O=E[N]|0;I&&O==x||(j[N]=O,I=!1)}this.g=j}var c={};function u(E){return-128<=E&&E<128?i(E,function(x){return new o([x|0],x<0?-1:0)}):new o([E|0],E<0?-1:0)}function d(E){if(isNaN(E)||!isFinite(E))return p;if(E<0)return D(d(-E));const x=[];let j=1;for(let I=0;E>=j;I++)x[I]=E/j|0,j*=4294967296;return new o(x,0)}function f(E,x){if(E.length==0)throw Error("number format error: empty string");if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(E.charAt(0)=="-")return D(f(E.substring(1),x));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const j=d(Math.pow(x,8));let I=p;for(let O=0;O<E.length;O+=8){var N=Math.min(8,E.length-O);const C=parseInt(E.substring(O,O+N),x);N<8?(N=d(Math.pow(x,N)),I=I.j(N).add(d(C))):(I=I.j(j),I=I.add(d(C)))}return I}var p=u(0),y=u(1),k=u(16777216);t=o.prototype,t.m=function(){if(R(this))return-D(this).m();let E=0,x=1;for(let j=0;j<this.g.length;j++){const I=this.i(j);E+=(I>=0?I:4294967296+I)*x,x*=4294967296}return E},t.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(w(this))return"0";if(R(this))return"-"+D(this).toString(E);const x=d(Math.pow(E,6));var j=this;let I="";for(;;){const N=L(j,x).g;j=S(j,N.j(x));let O=((j.g.length>0?j.g[0]:j.h)>>>0).toString(E);if(j=N,w(j))return O+I;for(;O.length<6;)O="0"+O;I=O+I}},t.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function w(E){if(E.h!=0)return!1;for(let x=0;x<E.g.length;x++)if(E.g[x]!=0)return!1;return!0}function R(E){return E.h==-1}t.l=function(E){return E=S(this,E),R(E)?-1:w(E)?0:1};function D(E){const x=E.g.length,j=[];for(let I=0;I<x;I++)j[I]=~E.g[I];return new o(j,~E.h).add(y)}t.abs=function(){return R(this)?D(this):this},t.add=function(E){const x=Math.max(this.g.length,E.g.length),j=[];let I=0;for(let N=0;N<=x;N++){let O=I+(this.i(N)&65535)+(E.i(N)&65535),C=(O>>>16)+(this.i(N)>>>16)+(E.i(N)>>>16);I=C>>>16,O&=65535,C&=65535,j[N]=C<<16|O}return new o(j,j[j.length-1]&-2147483648?-1:0)};function S(E,x){return E.add(D(x))}t.j=function(E){if(w(this)||w(E))return p;if(R(this))return R(E)?D(this).j(D(E)):D(D(this).j(E));if(R(E))return D(this.j(D(E)));if(this.l(k)<0&&E.l(k)<0)return d(this.m()*E.m());const x=this.g.length+E.g.length,j=[];for(var I=0;I<2*x;I++)j[I]=0;for(I=0;I<this.g.length;I++)for(let N=0;N<E.g.length;N++){const O=this.i(I)>>>16,C=this.i(I)&65535,V=E.i(N)>>>16,_e=E.i(N)&65535;j[2*I+2*N]+=C*_e,_(j,2*I+2*N),j[2*I+2*N+1]+=O*_e,_(j,2*I+2*N+1),j[2*I+2*N+1]+=C*V,_(j,2*I+2*N+1),j[2*I+2*N+2]+=O*V,_(j,2*I+2*N+2)}for(E=0;E<x;E++)j[E]=j[2*E+1]<<16|j[2*E];for(E=x;E<2*x;E++)j[E]=0;return new o(j,0)};function _(E,x){for(;(E[x]&65535)!=E[x];)E[x+1]+=E[x]>>>16,E[x]&=65535,x++}function v(E,x){this.g=E,this.h=x}function L(E,x){if(w(x))throw Error("division by zero");if(w(E))return new v(p,p);if(R(E))return x=L(D(E),x),new v(D(x.g),D(x.h));if(R(x))return x=L(E,D(x)),new v(D(x.g),x.h);if(E.g.length>30){if(R(E)||R(x))throw Error("slowDivide_ only works with positive integers.");for(var j=y,I=x;I.l(E)<=0;)j=q(j),I=q(I);var N=se(j,1),O=se(I,1);for(I=se(I,2),j=se(j,2);!w(I);){var C=O.add(I);C.l(E)<=0&&(N=N.add(j),O=C),I=se(I,1),j=se(j,1)}return x=S(E,N.j(x)),new v(N,x)}for(N=p;E.l(x)>=0;){for(j=Math.max(1,Math.floor(E.m()/x.m())),I=Math.ceil(Math.log(j)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),O=d(j),C=O.j(x);R(C)||C.l(E)>0;)j-=I,O=d(j),C=O.j(x);w(O)&&(O=y),N=N.add(O),E=S(E,C)}return new v(N,E)}t.B=function(E){return L(this,E).h},t.and=function(E){const x=Math.max(this.g.length,E.g.length),j=[];for(let I=0;I<x;I++)j[I]=this.i(I)&E.i(I);return new o(j,this.h&E.h)},t.or=function(E){const x=Math.max(this.g.length,E.g.length),j=[];for(let I=0;I<x;I++)j[I]=this.i(I)|E.i(I);return new o(j,this.h|E.h)},t.xor=function(E){const x=Math.max(this.g.length,E.g.length),j=[];for(let I=0;I<x;I++)j[I]=this.i(I)^E.i(I);return new o(j,this.h^E.h)};function q(E){const x=E.g.length+1,j=[];for(let I=0;I<x;I++)j[I]=E.i(I)<<1|E.i(I-1)>>>31;return new o(j,E.h)}function se(E,x){const j=x>>5;x%=32;const I=E.g.length-j,N=[];for(let O=0;O<I;O++)N[O]=x>0?E.i(O+j)>>>x|E.i(O+j+1)<<32-x:E.i(O+j);return new o(N,E.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,_m=o}).apply(typeof jy<"u"?jy:typeof self<"u"?self:typeof window<"u"?window:{});var pc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var t,e=Object.defineProperty;function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof pc=="object"&&pc];for(var h=0;h<l.length;++h){var m=l[h];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(l,h){if(h)e:{var m=r;l=l.split(".");for(var b=0;b<l.length-1;b++){var K=l[b];if(!(K in m))break e;m=m[K]}l=l[l.length-1],b=m[l],h=h(b),h!=b&&h!=null&&e(m,l,{configurable:!0,writable:!0,value:h})}}s("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(l){return l||function(h){var m=[],b;for(b in h)Object.prototype.hasOwnProperty.call(h,b)&&m.push([b,h[b]]);return m}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function c(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function u(l,h,m){return l.call.apply(l.bind,arguments)}function d(l,h,m){return d=u,d.apply(null,arguments)}function f(l,h){var m=Array.prototype.slice.call(arguments,1);return function(){var b=m.slice();return b.push.apply(b,arguments),l.apply(this,b)}}function p(l,h){function m(){}m.prototype=h.prototype,l.Z=h.prototype,l.prototype=new m,l.prototype.constructor=l,l.Ob=function(b,K,J){for(var je=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)je[rt-2]=arguments[rt];return h.prototype[K].apply(b,je)}}var y=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function k(l){const h=l.length;if(h>0){const m=Array(h);for(let b=0;b<h;b++)m[b]=l[b];return m}return[]}function w(l,h){for(let b=1;b<arguments.length;b++){const K=arguments[b];var m=typeof K;if(m=m!="object"?m:K?Array.isArray(K)?"array":m:"null",m=="array"||m=="object"&&typeof K.length=="number"){m=l.length||0;const J=K.length||0;l.length=m+J;for(let je=0;je<J;je++)l[m+je]=K[je]}else l.push(K)}}class R{constructor(h,m){this.i=h,this.j=m,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function D(l){o.setTimeout(()=>{throw l},0)}function S(){var l=E;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class _{constructor(){this.h=this.g=null}add(h,m){const b=v.get();b.set(h,m),this.h?this.h.next=b:this.g=b,this.h=b}}var v=new R(()=>new L,l=>l.reset());class L{constructor(){this.next=this.g=this.h=null}set(h,m){this.h=h,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let q,se=!1,E=new _,x=()=>{const l=Promise.resolve(void 0);q=()=>{l.then(j)}};function j(){for(var l;l=S();){try{l.h.call(l.g)}catch(m){D(m)}var h=v;h.j(l),h.h<100&&(h.h++,l.next=h.g,h.g=l)}se=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const m=()=>{};o.addEventListener("test",m,h),o.removeEventListener("test",m,h)}catch{}return l}();function C(l){return/^[\s\xa0]*$/.test(l)}function V(l,h){N.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,h)}p(V,N),V.prototype.init=function(l,h){const m=this.type=l.type,b=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget,h||(m=="mouseover"?h=l.fromElement:m=="mouseout"&&(h=l.toElement)),this.relatedTarget=h,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&V.Z.h.call(this)},V.prototype.h=function(){V.Z.h.call(this);const l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var _e="closure_listenable_"+(Math.random()*1e6|0),Z=0;function Se(l,h,m,b,K){this.listener=l,this.proxy=null,this.src=h,this.type=m,this.capture=!!b,this.ha=K,this.key=++Z,this.da=this.fa=!1}function X(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Y(l,h,m){for(const b in l)h.call(m,l[b],b,l)}function ie(l,h){for(const m in l)h.call(void 0,l[m],m,l)}function G(l){const h={};for(const m in l)h[m]=l[m];return h}const he="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ne(l,h){let m,b;for(let K=1;K<arguments.length;K++){b=arguments[K];for(m in b)l[m]=b[m];for(let J=0;J<he.length;J++)m=he[J],Object.prototype.hasOwnProperty.call(b,m)&&(l[m]=b[m])}}function ke(l){this.src=l,this.g={},this.h=0}ke.prototype.add=function(l,h,m,b,K){const J=l.toString();l=this.g[J],l||(l=this.g[J]=[],this.h++);const je=B(l,h,b,K);return je>-1?(h=l[je],m||(h.fa=!1)):(h=new Se(h,this.src,J,!!b,K),h.fa=m,l.push(h)),h};function ge(l,h){const m=h.type;if(m in l.g){var b=l.g[m],K=Array.prototype.indexOf.call(b,h,void 0),J;(J=K>=0)&&Array.prototype.splice.call(b,K,1),J&&(X(h),l.g[m].length==0&&(delete l.g[m],l.h--))}}function B(l,h,m,b){for(let K=0;K<l.length;++K){const J=l[K];if(!J.da&&J.listener==h&&J.capture==!!m&&J.ha==b)return K}return-1}var me="closure_lm_"+(Math.random()*1e6|0),$={};function De(l,h,m,b,K){if(Array.isArray(h)){for(let J=0;J<h.length;J++)De(l,h[J],m,b,K);return null}return m=M(m),l&&l[_e]?l.J(h,m,c(b)?!!b.capture:!1,K):te(l,h,m,!1,b,K)}function te(l,h,m,b,K,J){if(!h)throw Error("Invalid event type");const je=c(K)?!!K.capture:!!K;let rt=re(l);if(rt||(l[me]=rt=new ke(l)),m=rt.add(h,m,b,je,J),m.proxy)return m;if(b=be(),m.proxy=b,b.src=l,b.listener=m,l.addEventListener)O||(K=je),K===void 0&&(K=!1),l.addEventListener(h.toString(),b,K);else if(l.attachEvent)l.attachEvent(ce(h.toString()),b);else if(l.addListener&&l.removeListener)l.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return m}function be(){function l(m){return h.call(l.src,l.listener,m)}const h=H;return l}function W(l,h,m,b,K){if(Array.isArray(h))for(var J=0;J<h.length;J++)W(l,h[J],m,b,K);else b=c(b)?!!b.capture:!!b,m=M(m),l&&l[_e]?(l=l.i,J=String(h).toString(),J in l.g&&(h=l.g[J],m=B(h,m,b,K),m>-1&&(X(h[m]),Array.prototype.splice.call(h,m,1),h.length==0&&(delete l.g[J],l.h--)))):l&&(l=re(l))&&(h=l.g[h.toString()],l=-1,h&&(l=B(h,m,b,K)),(m=l>-1?h[l]:null)&&oe(m))}function oe(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[_e])ge(h.i,l);else{var m=l.type,b=l.proxy;h.removeEventListener?h.removeEventListener(m,b,l.capture):h.detachEvent?h.detachEvent(ce(m),b):h.addListener&&h.removeListener&&h.removeListener(b),(m=re(h))?(ge(m,l),m.h==0&&(m.src=null,h[me]=null)):X(l)}}}function ce(l){return l in $?$[l]:$[l]="on"+l}function H(l,h){if(l.da)l=!0;else{h=new V(h,this);const m=l.listener,b=l.ha||l.src;l.fa&&oe(l),l=m.call(b,h)}return l}function re(l){return l=l[me],l instanceof ke?l:null}var le="__closure_events_fn_"+(Math.random()*1e9>>>0);function M(l){return typeof l=="function"?l:(l[le]||(l[le]=function(h){return l.handleEvent(h)}),l[le])}function z(){I.call(this),this.i=new ke(this),this.M=this,this.G=null}p(z,I),z.prototype[_e]=!0,z.prototype.removeEventListener=function(l,h,m,b){W(this,l,h,m,b)};function ne(l,h){var m,b=l.G;if(b)for(m=[];b;b=b.G)m.push(b);if(l=l.M,b=h.type||h,typeof h=="string")h=new N(h,l);else if(h instanceof N)h.target=h.target||l;else{var K=h;h=new N(b,l),Ne(h,K)}K=!0;let J,je;if(m)for(je=m.length-1;je>=0;je--)J=h.g=m[je],K=ue(J,b,!0,h)&&K;if(J=h.g=l,K=ue(J,b,!0,h)&&K,K=ue(J,b,!1,h)&&K,m)for(je=0;je<m.length;je++)J=h.g=m[je],K=ue(J,b,!1,h)&&K}z.prototype.N=function(){if(z.Z.N.call(this),this.i){var l=this.i;for(const h in l.g){const m=l.g[h];for(let b=0;b<m.length;b++)X(m[b]);delete l.g[h],l.h--}}this.G=null},z.prototype.J=function(l,h,m,b){return this.i.add(String(l),h,!1,m,b)},z.prototype.K=function(l,h,m,b){return this.i.add(String(l),h,!0,m,b)};function ue(l,h,m,b){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();let K=!0;for(let J=0;J<h.length;++J){const je=h[J];if(je&&!je.da&&je.capture==m){const rt=je.listener,rn=je.ha||je.src;je.fa&&ge(l.i,je),K=rt.call(rn,b)!==!1&&K}}return K&&!b.defaultPrevented}function Ce(l,h){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=d(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:o.setTimeout(l,h||0)}function Oe(l){l.g=Ce(()=>{l.g=null,l.i&&(l.i=!1,Oe(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class de extends I{constructor(h,m){super(),this.m=h,this.l=m,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Oe(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pe(l){I.call(this),this.h=l,this.g={}}p(pe,I);var Ae=[];function Ue(l){Y(l.g,function(h,m){this.g.hasOwnProperty(m)&&oe(h)},l),l.g={}}pe.prototype.N=function(){pe.Z.N.call(this),Ue(this)},pe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ge=o.JSON.stringify,vt=o.JSON.parse,We=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function Et(){}function Ze(){}var Lt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ct(){N.call(this,"d")}p(Ct,N);function Rt(){N.call(this,"c")}p(Rt,N);var Xt={},Zt=null;function _n(){return Zt=Zt||new z}Xt.Ia="serverreachability";function ws(l){N.call(this,Xt.Ia,l)}p(ws,N);function Dn(l){const h=_n();ne(h,new ws(h))}Xt.STAT_EVENT="statevent";function Zn(l,h){N.call(this,Xt.STAT_EVENT,l),this.stat=h}p(Zn,N);function bt(l){const h=_n();ne(h,new Zn(h,l))}Xt.Ja="timingevent";function er(l,h){N.call(this,Xt.Ja,l),this.size=h}p(er,N);function Ft(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},h)}function hr(){this.g=!0}hr.prototype.ua=function(){this.g=!1};function Tr(l,h,m,b,K,J){l.info(function(){if(l.g)if(J){var je="",rt=J.split("&");for(let jt=0;jt<rt.length;jt++){var rn=rt[jt].split("=");if(rn.length>1){const cn=rn[0];rn=rn[1];const Rr=cn.split("_");je=Rr.length>=2&&Rr[1]=="type"?je+(cn+"="+rn+"&"):je+(cn+"=redacted&")}}}else je=null;else je=J;return"XMLHTTP REQ ("+b+") [attempt "+K+"]: "+h+`
`+m+`
`+je})}function tr(l,h,m,b,K,J,je){l.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+K+"]: "+h+`
`+m+`
`+J+" "+je})}function nn(l,h,m,b){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+qo(l,m)+(b?" "+b:"")})}function zl(l,h){l.info(function(){return"TIMEOUT: "+h})}hr.prototype.info=function(){};function qo(l,h){if(!l.g)return h;if(!h)return null;try{const J=JSON.parse(h);if(J){for(l=0;l<J.length;l++)if(Array.isArray(J[l])){var m=J[l];if(!(m.length<2)){var b=m[1];if(Array.isArray(b)&&!(b.length<1)){var K=b[0];if(K!="noop"&&K!="stop"&&K!="close")for(let je=1;je<b.length;je++)b[je]=""}}}}return Ge(J)}catch{return h}}var Gr={NO_ERROR:0,TIMEOUT:8},si={},ii;function oi(){}p(oi,Et),oi.prototype.g=function(){return new XMLHttpRequest},ii=new oi;function On(l){return encodeURIComponent(String(l))}function T(l){var h=1;l=l.split(":");const m=[];for(;h>0&&l.length;)m.push(l.shift()),h--;return l.length&&m.push(l.join(":")),m}function A(l,h,m,b){this.j=l,this.i=h,this.l=m,this.S=b||1,this.V=new pe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new F}function F(){this.i=null,this.g="",this.h=!1}var U={},xe={};function ve(l,h,m){l.M=1,l.A=Kt(Je(h)),l.u=m,l.R=!0,Pe(l,null)}function Pe(l,h){l.F=Date.now(),tt(l),l.B=Je(l.A);var m=l.B,b=l.S;Array.isArray(b)||(b=[String(b)]),Tm(m.i,"t",b),l.C=0,m=l.j.L,l.h=new F,l.g=qm(l.j,m?h:null,!l.u),l.P>0&&(l.O=new de(d(l.Y,l,l.g),l.P)),h=l.V,m=l.g,b=l.ba;var K="readystatechange";Array.isArray(K)||(K&&(Ae[0]=K.toString()),K=Ae);for(let J=0;J<K.length;J++){const je=De(m,K[J],b||h.handleEvent,!1,h.h||h);if(!je)break;h.g[je.key]=je}h=l.J?G(l.J):{},l.u?(l.v||(l.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,h)):(l.v="GET",l.g.ea(l.B,l.v,null,h)),Dn(),Tr(l.i,l.v,l.B,l.l,l.S,l.u)}A.prototype.ba=function(l){l=l.target;const h=this.O;h&&Ss(l)==3?h.j():this.Y(l)},A.prototype.Y=function(l){try{if(l==this.g)e:{const rt=Ss(this.g),rn=this.g.ya(),jt=this.g.ca();if(!(rt<3)&&(rt!=3||this.g&&(this.h.h||this.g.la()||Lm(this.g)))){this.K||rt!=4||rn==7||(rn==8||jt<=0?Dn(3):Dn(2)),P(this);var h=this.g.ca();this.X=h;var m=nt(this);if(this.o=h==200,tr(this.i,this.v,this.B,this.l,this.S,rt,h),this.o){if(this.U&&!this.L){t:{if(this.g){var b,K=this.g;if((b=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(b)){var J=b;break t}}J=null}if(l=J)nn(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Te(this,l);else{this.o=!1,this.m=3,bt(12),Ee(this),ae(this);break e}}if(this.R){l=!0;let cn;for(;!this.K&&this.C<m.length;)if(cn=Be(this,m),cn==xe){rt==4&&(this.m=4,bt(14),l=!1),nn(this.i,this.l,null,"[Incomplete Response]");break}else if(cn==U){this.m=4,bt(15),nn(this.i,this.l,m,"[Invalid Chunk]"),l=!1;break}else nn(this.i,this.l,cn,null),Te(this,cn);if(st(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),rt!=4||m.length!=0||this.h.h||(this.m=1,bt(16),l=!1),this.o=this.o&&l,!l)nn(this.i,this.l,m,"[Invalid Chunked Response]"),Ee(this),ae(this);else if(m.length>0&&!this.W){this.W=!0;var je=this.j;je.g==this&&je.aa&&!je.P&&(je.j.info("Great, no buffering proxy detected. Bytes received: "+m.length),gd(je),je.P=!0,bt(11))}}else nn(this.i,this.l,m,null),Te(this,m);rt==4&&Ee(this),this.o&&!this.K&&(rt==4?Hm(this.j,this):(this.o=!1,tt(this)))}else Q2(this.g),h==400&&m.indexOf("Unknown SID")>0?(this.m=3,bt(12)):(this.m=0,bt(13)),Ee(this),ae(this)}}}catch{}finally{}};function nt(l){if(!st(l))return l.g.la();const h=Lm(l.g);if(h==="")return"";let m="";const b=h.length,K=Ss(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return Ee(l),ae(l),"";l.h.i=new o.TextDecoder}for(let J=0;J<b;J++)l.h.h=!0,m+=l.h.i.decode(h[J],{stream:!(K&&J==b-1)});return h.length=0,l.h.g+=m,l.C=0,l.h.g}function st(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function Be(l,h){var m=l.C,b=h.indexOf(`
`,m);return b==-1?xe:(m=Number(h.substring(m,b)),isNaN(m)?U:(b+=1,b+m>h.length?xe:(h=h.slice(b,b+m),l.C=b+m,h)))}A.prototype.cancel=function(){this.K=!0,Ee(this)};function tt(l){l.T=Date.now()+l.H,it(l,l.H)}function it(l,h){if(l.D!=null)throw Error("WatchDog timer not null");l.D=Ft(d(l.aa,l),h)}function P(l){l.D&&(o.clearTimeout(l.D),l.D=null)}A.prototype.aa=function(){this.D=null;const l=Date.now();l-this.T>=0?(zl(this.i,this.B),this.M!=2&&(Dn(),bt(17)),Ee(this),this.m=2,ae(this)):it(this,this.T-l)};function ae(l){l.j.I==0||l.K||Hm(l.j,l)}function Ee(l){P(l);var h=l.O;h&&typeof h.dispose=="function"&&h.dispose(),l.O=null,Ue(l.V),l.g&&(h=l.g,l.g=null,h.abort(),h.dispose())}function Te(l,h){try{var m=l.j;if(m.I!=0&&(m.g==l||Qe(m.h,l))){if(!l.L&&Qe(m.h,l)&&m.I==3){try{var b=m.Ba.g.parse(h)}catch{b=null}if(Array.isArray(b)&&b.length==3){var K=b;if(K[0]==0){e:if(!m.v){if(m.g)if(m.g.F+3e3<l.F)Vl(m),Wl(m);else break e;md(m),bt(18)}}else m.xa=K[1],0<m.xa-m.K&&K[2]<37500&&m.F&&m.A==0&&!m.C&&(m.C=Ft(d(m.Va,m),6e3));Fe(m.h)<=1&&m.ta&&(m.ta=void 0)}else li(m,11)}else if((l.L||m.g==l)&&Vl(m),!C(h))for(K=m.Ba.g.parse(h),h=0;h<K.length;h++){let jt=K[h];const cn=jt[0];if(!(cn<=m.K))if(m.K=cn,jt=jt[1],m.I==2)if(jt[0]=="c"){m.M=jt[1],m.ba=jt[2];const Rr=jt[3];Rr!=null&&(m.ka=Rr,m.j.info("VER="+m.ka));const ci=jt[4];ci!=null&&(m.za=ci,m.j.info("SVER="+m.za));const Cs=jt[5];Cs!=null&&typeof Cs=="number"&&Cs>0&&(b=1.5*Cs,m.O=b,m.j.info("backChannelRequestTimeoutMs_="+b)),b=m;const js=l.g;if(js){const Kl=js.g?js.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Kl){var J=b.h;J.g||Kl.indexOf("spdy")==-1&&Kl.indexOf("quic")==-1&&Kl.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&($e(J,J.h),J.h=null))}if(b.G){const yd=js.g?js.g.getResponseHeader("X-HTTP-Session-Id"):null;yd&&(b.wa=yd,Ye(b.J,b.G,yd))}}m.I=3,m.l&&m.l.ra(),m.aa&&(m.T=Date.now()-l.F,m.j.info("Handshake RTT: "+m.T+"ms")),b=m;var je=l;if(b.na=Gm(b,b.L?b.ba:null,b.W),je.L){Le(b.h,je);var rt=je,rn=b.O;rn&&(rt.H=rn),rt.D&&(P(rt),tt(rt)),b.g=je}else Um(b);m.i.length>0&&Hl(m)}else jt[0]!="stop"&&jt[0]!="close"||li(m,7);else m.I==3&&(jt[0]=="stop"||jt[0]=="close"?jt[0]=="stop"?li(m,7):pd(m):jt[0]!="noop"&&m.l&&m.l.qa(jt),m.A=0)}}Dn(4)}catch{}}var Me=class{constructor(l,h){this.g=l,this.map=h}};function qe(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Xe(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Fe(l){return l.h?1:l.g?l.g.size:0}function Qe(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function $e(l,h){l.g?l.g.add(h):l.h=h}function Le(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}qe.prototype.cancel=function(){if(this.i=ze(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function ze(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const m of l.g.values())h=h.concat(m.G);return h}return k(l.i)}var lt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function At(l,h){if(l){l=l.split("&");for(let m=0;m<l.length;m++){const b=l[m].indexOf("=");let K,J=null;b>=0?(K=l[m].substring(0,b),J=l[m].substring(b+1)):K=l[m],h(K,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function Ke(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;l instanceof Ke?(this.l=l.l,Ie(this,l.j),this.o=l.o,this.g=l.g,He(this,l.u),this.h=l.h,mt(this,Rm(l.i)),this.m=l.m):l&&(h=String(l).match(lt))?(this.l=!1,Ie(this,h[1]||"",!0),this.o=zt(h[2]||""),this.g=zt(h[3]||"",!0),He(this,h[4]),this.h=zt(h[5]||"",!0),mt(this,h[6]||"",!0),this.m=zt(h[7]||"")):(this.l=!1,this.i=new Yo(null,this.l))}Ke.prototype.toString=function(){const l=[];var h=this.j;h&&l.push(yt(h,_s,!0),":");var m=this.g;return(m||h=="file")&&(l.push("//"),(h=this.o)&&l.push(yt(h,_s,!0),"@"),l.push(On(m).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.u,m!=null&&l.push(":",String(m))),(m=this.h)&&(this.g&&m.charAt(0)!="/"&&l.push("/"),l.push(yt(m,m.charAt(0)=="/"?ud:Bl,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",yt(m,Em)),l.join("")},Ke.prototype.resolve=function(l){const h=Je(this);let m=!!l.j;m?Ie(h,l.j):m=!!l.o,m?h.o=l.o:m=!!l.g,m?h.g=l.g:m=l.u!=null;var b=l.h;if(m)He(h,l.u);else if(m=!!l.h){if(b.charAt(0)!="/")if(this.g&&!this.h)b="/"+b;else{var K=h.h.lastIndexOf("/");K!=-1&&(b=h.h.slice(0,K+1)+b)}if(K=b,K==".."||K==".")b="";else if(K.indexOf("./")!=-1||K.indexOf("/.")!=-1){b=K.lastIndexOf("/",0)==0,K=K.split("/");const J=[];for(let je=0;je<K.length;){const rt=K[je++];rt=="."?b&&je==K.length&&J.push(""):rt==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),b&&je==K.length&&J.push("")):(J.push(rt),b=!0)}b=J.join("/")}else b=K}return m?h.h=b:m=l.i.toString()!=="",m?mt(h,Rm(l.i)):m=!!l.m,m&&(h.m=l.m),h};function Je(l){return new Ke(l)}function Ie(l,h,m){l.j=m?zt(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function He(l,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);l.u=h}else l.u=null}function mt(l,h,m){h instanceof Yo?(l.i=h,H2(l.i,l.l)):(m||(h=yt(h,dd)),l.i=new Yo(h,l.l))}function Ye(l,h,m){l.i.set(h,m)}function Kt(l){return Ye(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function zt(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function yt(l,h,m){return typeof l=="string"?(l=encodeURI(l).replace(h,fr),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function fr(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var _s=/[#\/\?@]/g,Bl=/[#\?:]/g,ud=/[#\?]/g,dd=/[#\?@]/g,Em=/#/g;function Yo(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function ai(l){l.g||(l.g=new Map,l.h=0,l.i&&At(l.i,function(h,m){l.add(decodeURIComponent(h.replace(/\+/g," ")),m)}))}t=Yo.prototype,t.add=function(l,h){ai(this),this.i=null,l=Wi(this,l);let m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(h),this.h+=1,this};function Im(l,h){ai(l),h=Wi(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function km(l,h){return ai(l),h=Wi(l,h),l.g.has(h)}t.forEach=function(l,h){ai(this),this.g.forEach(function(m,b){m.forEach(function(K){l.call(h,K,b,this)},this)},this)};function Nm(l,h){ai(l);let m=[];if(typeof h=="string")km(l,h)&&(m=m.concat(l.g.get(Wi(l,h))));else for(l=Array.from(l.g.values()),h=0;h<l.length;h++)m=m.concat(l[h]);return m}t.set=function(l,h){return ai(this),this.i=null,l=Wi(this,l),km(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=Nm(this,l),l.length>0?String(l[0]):h):h};function Tm(l,h,m){Im(l,h),m.length>0&&(l.i=null,l.g.set(Wi(l,h),k(m)),l.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(let b=0;b<h.length;b++){var m=h[b];const K=On(m);m=Nm(this,m);for(let J=0;J<m.length;J++){let je=K;m[J]!==""&&(je+="="+On(m[J])),l.push(je)}}return this.i=l.join("&")};function Rm(l){const h=new Yo;return h.i=l.i,l.g&&(h.g=new Map(l.g),h.h=l.h),h}function Wi(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function H2(l,h){h&&!l.j&&(ai(l),l.i=null,l.g.forEach(function(m,b){const K=b.toLowerCase();b!=K&&(Im(this,b),Tm(this,K,m))},l)),l.j=h}function V2(l,h){const m=new hr;if(o.Image){const b=new Image;b.onload=f(bs,m,"TestLoadImage: loaded",!0,h,b),b.onerror=f(bs,m,"TestLoadImage: error",!1,h,b),b.onabort=f(bs,m,"TestLoadImage: abort",!1,h,b),b.ontimeout=f(bs,m,"TestLoadImage: timeout",!1,h,b),o.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=l}else h(!1)}function K2(l,h){const m=new hr,b=new AbortController,K=setTimeout(()=>{b.abort(),bs(m,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:b.signal}).then(J=>{clearTimeout(K),J.ok?bs(m,"TestPingServer: ok",!0,h):bs(m,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(K),bs(m,"TestPingServer: error",!1,h)})}function bs(l,h,m,b,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),b(m)}catch{}}function G2(){this.g=new We}function hd(l){this.i=l.Sb||null,this.h=l.ab||!1}p(hd,Et),hd.prototype.g=function(){return new $l(this.i,this.h)};function $l(l,h){z.call(this),this.H=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p($l,z),t=$l.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=h,this.readyState=1,Jo(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(h.body=l),(this.H||o).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Qo(this)),this.readyState=0},t.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Jo(this)),this.g&&(this.readyState=3,Jo(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Am(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function Am(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}t.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Qo(this):Jo(this),this.readyState==3&&Am(this)}},t.Oa=function(l){this.g&&(this.response=this.responseText=l,Qo(this))},t.Na=function(l){this.g&&(this.response=l,Qo(this))},t.ga=function(){this.g&&Qo(this)};function Qo(l){l.readyState=4,l.l=null,l.j=null,l.B=null,Jo(l)}t.setRequestHeader=function(l,h){this.A.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var m=h.next();!m.done;)m=m.value,l.push(m[0]+": "+m[1]),m=h.next();return l.join(`\r
`)};function Jo(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty($l.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Pm(l){let h="";return Y(l,function(m,b){h+=b,h+=":",h+=m,h+=`\r
`}),h}function fd(l,h,m){e:{for(b in m){var b=!1;break e}b=!0}b||(m=Pm(m),typeof l=="string"?m!=null&&On(m):Ye(l,h,m))}function Qt(l){z.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Qt,z);var q2=/^https?$/i,Y2=["POST","PUT"];t=Qt.prototype,t.Fa=function(l){this.H=l},t.ea=function(l,h,m,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ii.g(),this.g.onreadystatechange=y(d(this.Ca,this));try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(J){Dm(this,J);return}if(l=m||"",m=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var K in b)m.set(K,b[K]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const J of b.keys())m.set(J,b.get(J));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(m.keys()).find(J=>J.toLowerCase()=="content-type"),K=o.FormData&&l instanceof o.FormData,!(Array.prototype.indexOf.call(Y2,h,void 0)>=0)||b||K||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,je]of m)this.g.setRequestHeader(J,je);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(J){Dm(this,J)}};function Dm(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.o=5,Om(l),Ul(l)}function Om(l){l.A||(l.A=!0,ne(l,"complete"),ne(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,ne(this,"complete"),ne(this,"abort"),Ul(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ul(this,!0)),Qt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Mm(this):this.Xa())},t.Xa=function(){Mm(this)};function Mm(l){if(l.h&&typeof i<"u"){if(l.v&&Ss(l)==4)setTimeout(l.Ca.bind(l),0);else if(ne(l,"readystatechange"),Ss(l)==4){l.h=!1;try{const J=l.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var m;if(!(m=h)){var b;if(b=J===0){let je=String(l.D).match(lt)[1]||null;!je&&o.self&&o.self.location&&(je=o.self.location.protocol.slice(0,-1)),b=!q2.test(je?je.toLowerCase():"")}m=b}if(m)ne(l,"complete"),ne(l,"success");else{l.o=6;try{var K=Ss(l)>2?l.g.statusText:""}catch{K=""}l.l=K+" ["+l.ca()+"]",Om(l)}}finally{Ul(l)}}}}function Ul(l,h){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);const m=l.g;l.g=null,h||ne(l,"ready");try{m.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ss(l){return l.g?l.g.readyState:0}t.ca=function(){try{return Ss(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),vt(h)}};function Lm(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Q2(l){const h={};l=(l.g&&Ss(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<l.length;b++){if(C(l[b]))continue;var m=T(l[b]);const K=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const J=h[K]||[];h[K]=J,J.push(m)}ie(h,function(b){return b.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xo(l,h,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||h}function Fm(l){this.za=0,this.i=[],this.j=new hr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Xo("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Xo("baseRetryDelayMs",5e3,l),this.Za=Xo("retryDelaySeedMs",1e4,l),this.Ta=Xo("forwardChannelMaxRetries",2,l),this.va=Xo("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new qe(l&&l.concurrentRequestLimit),this.Ba=new G2,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Fm.prototype,t.ka=8,t.I=1,t.connect=function(l,h,m,b){bt(0),this.W=l,this.H=h||{},m&&b!==void 0&&(this.H.OSID=m,this.H.OAID=b),this.F=this.X,this.J=Gm(this,null,this.W),Hl(this)};function pd(l){if(zm(l),l.I==3){var h=l.V++,m=Je(l.J);if(Ye(m,"SID",l.M),Ye(m,"RID",h),Ye(m,"TYPE","terminate"),Zo(l,m),h=new A(l,l.j,h),h.M=2,h.A=Kt(Je(m)),m=!1,o.navigator&&o.navigator.sendBeacon)try{m=o.navigator.sendBeacon(h.A.toString(),"")}catch{}!m&&o.Image&&(new Image().src=h.A,m=!0),m||(h.g=qm(h.j,null),h.g.ea(h.A)),h.F=Date.now(),tt(h)}Km(l)}function Wl(l){l.g&&(gd(l),l.g.cancel(),l.g=null)}function zm(l){Wl(l),l.v&&(o.clearTimeout(l.v),l.v=null),Vl(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&o.clearTimeout(l.m),l.m=null)}function Hl(l){if(!Xe(l.h)&&!l.m){l.m=!0;var h=l.Ea;q||x(),se||(q(),se=!0),E.add(h,l),l.D=0}}function J2(l,h){return Fe(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=h.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=Ft(d(l.Ea,l,h),Vm(l,l.D)),l.D++,!0)}t.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;const K=new A(this,this.j,l);let J=this.o;if(this.U&&(J?(J=G(J),Ne(J,this.U)):J=this.U),this.u!==null||this.R||(K.J=J,J=null),this.S)e:{for(var h=0,m=0;m<this.i.length;m++){t:{var b=this.i[m];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(h+=b,h>4096){h=m;break e}if(h===4096||m===this.i.length-1){h=m+1;break e}}h=1e3}else h=1e3;h=$m(this,K,h),m=Je(this.J),Ye(m,"RID",l),Ye(m,"CVER",22),this.G&&Ye(m,"X-HTTP-Session-Id",this.G),Zo(this,m),J&&(this.R?h="headers="+On(Pm(J))+"&"+h:this.u&&fd(m,this.u,J)),$e(this.h,K),this.Ra&&Ye(m,"TYPE","init"),this.S?(Ye(m,"$req",h),Ye(m,"SID","null"),K.U=!0,ve(K,m,null)):ve(K,m,h),this.I=2}}else this.I==3&&(l?Bm(this,l):this.i.length==0||Xe(this.h)||Bm(this))};function Bm(l,h){var m;h?m=h.l:m=l.V++;const b=Je(l.J);Ye(b,"SID",l.M),Ye(b,"RID",m),Ye(b,"AID",l.K),Zo(l,b),l.u&&l.o&&fd(b,l.u,l.o),m=new A(l,l.j,m,l.D+1),l.u===null&&(m.J=l.o),h&&(l.i=h.G.concat(l.i)),h=$m(l,m,1e3),m.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),$e(l.h,m),ve(m,b,h)}function Zo(l,h){l.H&&Y(l.H,function(m,b){Ye(h,b,m)}),l.l&&Y({},function(m,b){Ye(h,b,m)})}function $m(l,h,m){m=Math.min(l.i.length,m);const b=l.l?d(l.l.Ka,l.l,l):null;e:{var K=l.i;let rt=-1;for(;;){const rn=["count="+m];rt==-1?m>0?(rt=K[0].g,rn.push("ofs="+rt)):rt=0:rn.push("ofs="+rt);let jt=!0;for(let cn=0;cn<m;cn++){var J=K[cn].g;const Rr=K[cn].map;if(J-=rt,J<0)rt=Math.max(0,K[cn].g-100),jt=!1;else try{J="req"+J+"_"||"";try{var je=Rr instanceof Map?Rr:Object.entries(Rr);for(const[ci,Cs]of je){let js=Cs;c(Cs)&&(js=Ge(Cs)),rn.push(J+ci+"="+encodeURIComponent(js))}}catch(ci){throw rn.push(J+"type="+encodeURIComponent("_badmap")),ci}}catch{b&&b(Rr)}}if(jt){je=rn.join("&");break e}}je=void 0}return l=l.i.splice(0,m),h.G=l,je}function Um(l){if(!l.g&&!l.v){l.Y=1;var h=l.Da;q||x(),se||(q(),se=!0),E.add(h,l),l.A=0}}function md(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=Ft(d(l.Da,l),Vm(l,l.A)),l.A++,!0)}t.Da=function(){if(this.v=null,Wm(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=Ft(d(this.Wa,this),l)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,bt(10),Wl(this),Wm(this))};function gd(l){l.B!=null&&(o.clearTimeout(l.B),l.B=null)}function Wm(l){l.g=new A(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var h=Je(l.na);Ye(h,"RID","rpc"),Ye(h,"SID",l.M),Ye(h,"AID",l.K),Ye(h,"CI",l.F?"0":"1"),!l.F&&l.ia&&Ye(h,"TO",l.ia),Ye(h,"TYPE","xmlhttp"),Zo(l,h),l.u&&l.o&&fd(h,l.u,l.o),l.O&&(l.g.H=l.O);var m=l.g;l=l.ba,m.M=1,m.A=Kt(Je(h)),m.u=null,m.R=!0,Pe(m,l)}t.Va=function(){this.C!=null&&(this.C=null,Wl(this),md(this),bt(19))};function Vl(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function Hm(l,h){var m=null;if(l.g==h){Vl(l),gd(l),l.g=null;var b=2}else if(Qe(l.h,h))m=h.G,Le(l.h,h),b=1;else return;if(l.I!=0){if(h.o)if(b==1){m=h.u?h.u.length:0,h=Date.now()-h.F;var K=l.D;b=_n(),ne(b,new er(b,m)),Hl(l)}else Um(l);else if(K=h.m,K==3||K==0&&h.X>0||!(b==1&&J2(l,h)||b==2&&md(l)))switch(m&&m.length>0&&(h=l.h,h.i=h.i.concat(m)),K){case 1:li(l,5);break;case 4:li(l,10);break;case 3:li(l,6);break;default:li(l,2)}}}function Vm(l,h){let m=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(m*=2),m*h}function li(l,h){if(l.j.info("Error code "+h),h==2){var m=d(l.bb,l),b=l.Ua;const K=!b;b=new Ke(b||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Ie(b,"https"),Kt(b),K?V2(b.toString(),m):K2(b.toString(),m)}else bt(2);l.I=0,l.l&&l.l.pa(h),Km(l),zm(l)}t.bb=function(l){l?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function Km(l){if(l.I=0,l.ja=[],l.l){const h=ze(l.h);(h.length!=0||l.i.length!=0)&&(w(l.ja,h),w(l.ja,l.i),l.h.i.length=0,k(l.i),l.i.length=0),l.l.oa()}}function Gm(l,h,m){var b=m instanceof Ke?Je(m):new Ke(m);if(b.g!="")h&&(b.g=h+"."+b.g),He(b,b.u);else{var K=o.location;b=K.protocol,h=h?h+"."+K.hostname:K.hostname,K=+K.port;const J=new Ke(null);b&&Ie(J,b),h&&(J.g=h),K&&He(J,K),m&&(J.h=m),b=J}return m=l.G,h=l.wa,m&&h&&Ye(b,m,h),Ye(b,"VER",l.ka),Zo(l,b),b}function qm(l,h,m){if(h&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Aa&&!l.ma?new Qt(new hd({ab:m})):new Qt(l.ma),h.Fa(l.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ym(){}t=Ym.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function nr(l,h){z.call(this),this.g=new Fm(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(l?l["X-WebChannel-Client-Profile"]=h.sa:l={"X-WebChannel-Client-Profile":h.sa}),this.g.U=l,(l=h&&h.Qb)&&!C(l)&&(this.g.u=l),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!C(h)&&(this.g.G=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Hi(this)}p(nr,z),nr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},nr.prototype.close=function(){pd(this.g)},nr.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var m={};m.__data__=l,l=m}else this.v&&(m={},m.__data__=Ge(l),l=m);h.i.push(new Me(h.Ya++,l)),h.I==3&&Hl(h)},nr.prototype.N=function(){this.g.l=null,delete this.j,pd(this.g),delete this.g,nr.Z.N.call(this)};function Qm(l){Ct.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const m in h){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}p(Qm,Ct);function Jm(){Rt.call(this),this.status=1}p(Jm,Rt);function Hi(l){this.g=l}p(Hi,Ym),Hi.prototype.ra=function(){ne(this.g,"a")},Hi.prototype.qa=function(l){ne(this.g,new Qm(l))},Hi.prototype.pa=function(l){ne(this.g,new Jm)},Hi.prototype.oa=function(){ne(this.g,"b")},nr.prototype.send=nr.prototype.o,nr.prototype.open=nr.prototype.m,nr.prototype.close=nr.prototype.close,Gr.NO_ERROR=0,Gr.TIMEOUT=8,Gr.HTTP_ERROR=6,si.COMPLETE="complete",Ze.EventType=Lt,Lt.OPEN="a",Lt.CLOSE="b",Lt.ERROR="c",Lt.MESSAGE="d",z.prototype.listen=z.prototype.J,Qt.prototype.listenOnce=Qt.prototype.K,Qt.prototype.getLastError=Qt.prototype.Ha,Qt.prototype.getLastErrorCode=Qt.prototype.ya,Qt.prototype.getStatus=Qt.prototype.ca,Qt.prototype.getResponseJson=Qt.prototype.La,Qt.prototype.getResponseText=Qt.prototype.la,Qt.prototype.send=Qt.prototype.ea,Qt.prototype.setWithCredentials=Qt.prototype.Fa}).apply(typeof pc<"u"?pc:typeof self<"u"?self:typeof window<"u"?window:{});const Ey="@firebase/firestore",Iy="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}kn.UNAUTHENTICATED=new kn(null),kn.GOOGLE_CREDENTIALS=new kn("google-credentials-uid"),kn.FIRST_PARTY=new kn("first-party-uid"),kn.MOCK_USER=new kn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ll="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo=new Bp("@firebase/firestore");function _r(t,...e){if(Oo.logLevel<=wt.DEBUG){const n=e.map(bm);Oo.debug(`Firestore (${Ll}): ${t}`,...n)}}function O2(t,...e){if(Oo.logLevel<=wt.ERROR){const n=e.map(bm);Oo.error(`Firestore (${Ll}): ${t}`,...n)}}function M3(t,...e){if(Oo.logLevel<=wt.WARN){const n=e.map(bm);Oo.warn(`Firestore (${Ll}): ${t}`,...n)}}function bm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yl(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,M2(t,r,n)}function M2(t,e,n){let r=`FIRESTORE (${Ll}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw O2(r),new Error(r)}function La(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||M2(e,s,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ht={CANCELLED:"cancelled",INVALID_ARGUMENT:"invalid-argument",FAILED_PRECONDITION:"failed-precondition"};class ft extends Ho{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class L3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(kn.UNAUTHENTICATED))}shutdown(){}}class F3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class z3{constructor(e){this.t=e,this.currentUser=kn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){La(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Fa;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Fa,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{_r("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(_r("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Fa)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(_r("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(La(typeof r.accessToken=="string",31837,{l:r}),new L2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return La(e===null||typeof e=="string",2055,{h:e}),new kn(e)}}class B3{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=kn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class $3{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new B3(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(kn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ky{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class U3{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,dw(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){La(this.o===void 0,3512);const r=i=>{i.error!=null&&_r("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,_r("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{_r("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):_r("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ky(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(La(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ky(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=W3(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Zs(t,e){return t<e?-1:t>e?1:0}function V3(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return ah(s)===ah(i)?Zs(s,i):ah(s)?1:-1}return Zs(t.length,e.length)}const K3=55296,G3=57343;function ah(t){const e=t.charCodeAt(0);return e>=K3&&e<=G3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny="__name__";class Mr{constructor(e,n,r){n===void 0?n=0:n>e.length&&yl(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&yl(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Mr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Mr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Mr.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Zs(e.length,n.length)}static compareSegments(e,n){const r=Mr.isNumericId(e),s=Mr.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Mr.extractNumericId(e).compare(Mr.extractNumericId(n)):V3(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return _m.fromString(e.substring(4,e.length-2))}}class xr extends Mr{construct(e,n,r){return new xr(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ft(ht.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new xr(n)}static emptyPath(){return new xr([])}}const q3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mi extends Mr{construct(e,n,r){return new mi(e,n,r)}static isValidIdentifier(e){return q3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ny}static keyField(){return new mi([Ny])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new ft(ht.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new ft(ht.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ft(ht.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(i(),s++)}if(i(),o)throw new ft(ht.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mi(n)}static emptyPath(){return new mi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e){this.path=e}static fromPath(e){return new _i(xr.fromString(e))}static fromName(e){return new _i(xr.fromString(e).popFirst(5))}static empty(){return new _i(xr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return xr.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _i(new xr(e.slice()))}}function Y3(t,e,n,r){if(e===!0&&r===!0)throw new ft(ht.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Q3(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function J3(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":yl(12329,{type:typeof t})}function X3(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ft(ht.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=J3(t);throw new ft(ht.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(t,e){const n={typeString:t};return e&&(n.value=e),n}function Fl(t,e){if(!Q3(t))throw new ft(ht.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new ft(ht.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty=-62135596800,Ry=1e6;class Lr{static now(){return Lr.fromMillis(Date.now())}static fromDate(e){return Lr.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Ry);return new Lr(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ft(ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ft(ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Ty)throw new ft(ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ft(ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ry}_compareTo(e){return this.seconds===e.seconds?Zs(this.nanoseconds,e.nanoseconds):Zs(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Lr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Fl(e,Lr._jsonSchema))return new Lr(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ty;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Lr._jsonSchemaVersion="firestore/timestamp/1.0",Lr._jsonSchema={type:tn("string",Lr._jsonSchemaVersion),seconds:tn("number"),nanoseconds:tn("number")};function Z3(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new eN("Invalid base64 string: "+i):i}}(e);return new Li(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Li(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Zs(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Li.EMPTY_BYTE_STRING=new Li("");const Df="(default)";class Eu{constructor(e,n){this.projectId=e,this.database=n||Df}static empty(){return new Eu("","")}get isDefaultDatabase(){return this.database===Df}isEqual(e){return e instanceof Eu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e,n=null,r=[],s=[],i=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function nN(t){return new tN(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ay,dt;(dt=Ay||(Ay={}))[dt.OK=0]="OK",dt[dt.CANCELLED=1]="CANCELLED",dt[dt.UNKNOWN=2]="UNKNOWN",dt[dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dt[dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dt[dt.NOT_FOUND=5]="NOT_FOUND",dt[dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",dt[dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",dt[dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",dt[dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dt[dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dt[dt.ABORTED=10]="ABORTED",dt[dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",dt[dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",dt[dt.INTERNAL=13]="INTERNAL",dt[dt.UNAVAILABLE=14]="UNAVAILABLE",dt[dt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new _m([4294967295,4294967295],0);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN=41943040;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sN=1048576;function lh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&_r("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Fa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,c=new Sm(e,n,o,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ft(ht.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}var Py,Dy;(Dy=Py||(Py={})).Ma="default",Dy.Cache="cache";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oy=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2="firestore.googleapis.com",My=!0;class Ly{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ft(ht.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=F2,this.ssl=My}else this.host=e.host,this.ssl=e.ssl??My;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=rN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<sN)throw new ft(ht.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Y3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=oN(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ft(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ft(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ft(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class z2{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ly({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ft(ht.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ft(ht.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ly(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new L3;switch(r.type){case"firstParty":return new $3(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ft(ht.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Oy.get(n);r&&(_r("ComponentProvider","Removing Datastore"),Oy.delete(n),r.terminate())}(this),Promise.resolve()}}function aN(t,e,n,r={}){var d;t=X3(t,z2);const s=Qu(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;s&&(nw(`https://${c}`),sw("Firestore",!0)),i.host!==F2&&i.host!==c&&M3("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:c,ssl:s,emulatorOptions:r};if(!il(u,o)&&(t._setSettings(u),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=kn.MOCK_USER;else{f=rw(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new ft(ht.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new kn(y)}t._authCredentials=new F3(new L2(f,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Cm(this.firestore,e,this._query)}}class zr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new jm(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zr(this.firestore,e,this._key)}toJSON(){return{type:zr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Fl(n,zr._jsonSchema))return new zr(e,r||null,new _i(xr.fromString(n.referencePath)))}}zr._jsonSchemaVersion="firestore/documentReference/1.0",zr._jsonSchema={type:tn("string",zr._jsonSchemaVersion),referencePath:tn("string")};class jm extends Cm{constructor(e,n,r){super(e,n,nN(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zr(this.firestore,null,new _i(e))}withConverter(e){return new jm(this.firestore,e,this._path)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fy="AsyncQueue";class zy{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new iN(this,"async_queue_retry"),this._c=()=>{const r=lh();r&&_r(Fy,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=lh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=lh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Fa;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Z3(e))throw e;_r(Fy,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,O2("INTERNAL UNHANDLED ERROR: ",By(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Sm.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&yl(47125,{Pc:By(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function By(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class lN extends z2{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new zy,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new zy(e),this._firestoreClient=void 0,await e}}}function cN(t,e){const n=typeof t=="object"?t:pw(),r=typeof t=="string"?t:Df,s=uw(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=ew("firestore");i&&aN(s,...i)}return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xr(Li.fromBase64String(e))}catch(n){throw new ft(ht.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Xr(Li.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Xr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Fl(e,Xr._jsonSchema))return Xr.fromBase64String(e.bytes)}}Xr._jsonSchemaVersion="firestore/bytes/1.0",Xr._jsonSchema={type:tn("string",Xr._jsonSchemaVersion),bytes:tn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ft(ht.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ft(ht.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ft(ht.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Zs(this._lat,e._lat)||Zs(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ji._jsonSchemaVersion}}static fromJSON(e){if(Fl(e,ji._jsonSchema))return new ji(e.latitude,e.longitude)}}ji._jsonSchemaVersion="firestore/geoPoint/1.0",ji._jsonSchema={type:tn("string",ji._jsonSchemaVersion),latitude:tn("number"),longitude:tn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ei._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Fl(e,Ei._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Ei(e.vectorValues);throw new ft(ht.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ei._jsonSchemaVersion="firestore/vectorValue/1.0",Ei._jsonSchema={type:tn("string",Ei._jsonSchemaVersion),vectorValues:tn("object")};const uN=new RegExp("[~\\*/\\[\\]]");function dN(t,e,n){if(e.search(uN)>=0)throw $y(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t);try{return new B2(...e.split("."))._internalPath}catch{throw $y(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t)}}function $y(t,e,n,r,s){let i=`Function ${e}() called with invalid data`;i+=". ";let o="";return new ft(ht.INVALID_ARGUMENT,i+t+o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new zr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new hN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(U2("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class hN extends $2{data(){return super.data()}}function U2(t,e){return typeof e=="string"?dN(t,e):e instanceof B2?e._internalPath:e._delegate._internalPath}class mc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xo extends $2{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Mc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(U2("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ft(ht.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=xo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}xo._jsonSchemaVersion="firestore/documentSnapshot/1.0",xo._jsonSchema={type:tn("string",xo._jsonSchemaVersion),bundleSource:tn("string","DocumentSnapshot"),bundleName:tn("string"),bundle:tn("string")};class Mc extends xo{data(e={}){return super.data(e)}}class za{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new mc(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Mc(this._firestore,this._userDataWriter,r.key,r,new mc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ft(ht.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(c=>{const u=new Mc(s._firestore,s._userDataWriter,c.doc.key,c.doc,new mc(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new Mc(s._firestore,s._userDataWriter,c.doc.key,c.doc,new mc(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:fN(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ft(ht.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=za._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=H3.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function fN(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yl(61501,{type:t})}}za._jsonSchemaVersion="firestore/querySnapshot/1.0",za._jsonSchema={type:tn("string",za._jsonSchemaVersion),bundleSource:tn("string","QuerySnapshot"),bundleName:tn("string"),bundle:tn("string")};(function(e,n=!0){(function(s){Ll=s})(hw),al(new No("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),c=new lN(new z3(r.getProvider("auth-internal")),new U3(o,r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ft(ht.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Eu(d.options.projectId,f)}(o,s),o);return i={useFetchStreams:n,...i},c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),Vs(Ey,Iy,e),Vs(Ey,Iy,"esm2020")})();const pN={apiKey:"AIzaSyCMkZr4Xz204NjvETje-Rhznf6ECDYiEnE",authDomain:"ethiostore-17d9f.firebaseapp.com",databaseURL:"https://ethiostore-17d9f-default-rtdb.firebaseio.com",projectId:"ethiostore-17d9f",storageBucket:"ethiostore-17d9f.appspot.com",messagingSenderId:"964518277159",appId:"1:964518277159:web:9404cace890edf88961e02"},W2=$0().length>0?$0()[0]:fw(pN),Bt=D2(W2);cN(W2);const mN="https://gojo-teacher-web.onrender.com/api",Gi="https://ethiostore-17d9f-default-rtdb.firebaseio.com";function qi(t){return!t||typeof t!="string"||!t.trim()||t==="null"||t==="undefined"?"/default-profile.png":t}function gN(){const[t,e]=g.useState(window.innerWidth>600),n=Vn(),[r,s]=g.useState(null),[i,o]=g.useState([]),[c,u]=g.useState([]),[d,f]=g.useState([]),[p,y]=g.useState(null),[k,w]=g.useState(!1),[R,D]=g.useState(!1),[S,_]=g.useState([]),v=g.useRef({}),L=(r==null?void 0:r.userId)||null;g.useEffect(()=>{const V=JSON.parse(localStorage.getItem("teacher"));if(!V){n("/login");return}const _e=async()=>{try{const Se=Ot(Bt,"Users"),Y=(await Ma(Se)).val()||{},ie=Object.values(Y).find(G=>G.userId===V.userId);if(ie){const G={...V,...ie};s(G),localStorage.setItem("teacher",JSON.stringify(G))}else s(V)}catch{s(V)}},Z=async Se=>{try{const X=Se||JSON.parse(localStorage.getItem("teacher"));if(!X||!X.userId){f([]);return}const[Y,ie]=await Promise.all([ee.get(`${Gi}/Chats.json`),ee.get(`${Gi}/Users.json`)]),G=Y.data||{},Ne=ie.data||{}||{},ke={};Object.entries(Ne).forEach(([B,me])=>{me&&me.userId&&(ke[me.userId]=B)});const ge=Object.entries(G).map(([B,me])=>{const De=(me.unread||{})[X.userId]||0;if(!De)return null;const te=me.participants||{},be=Object.keys(te||{}).find(re=>re!==X.userId);if(!be)return null;let W=be,oe=Ne[W];if(!oe){const re=ke[be];re&&(W=re,oe=Ne[re])}oe||(oe={userId:be,name:be,profileImage:"/default-profile.png"});const ce={pushKey:W,userId:oe.userId||be,name:oe.name||oe.username||be,profileImage:qi(oe.profileImage||oe.profile||"")},H=me.lastMessage||{};return{id:B,title:H.text||"New message",adminName:ce.name,adminProfile:ce.profileImage,isMessage:!0,unreadForMe:De}}).filter(Boolean);f(ge)}catch{f([])}};_e(),q(),I(V),Z(V)},[]),g.useEffect(()=>{r&&console.log("Teacher object (debug):",r)},[r]);const q=async()=>{try{let _e=(await ee.get(`${mN}/get_posts`)).data||[];!Array.isArray(_e)&&typeof _e=="object"&&(_e=Object.values(_e));const[Z,Se]=await Promise.all([ee.get(`${Gi}/School_Admins.json`),ee.get(`${Gi}/Users.json`)]),X=Z.data||{},Y=Se.data||{},ie=ge=>{if(!ge)return{name:"Admin",profile:"/default-profile.png"};const B=X[ge];if(!B)return{name:ge,profile:"/default-profile.png"};const me=B.userId,$=me?Y[me]:null,De=($==null?void 0:$.name)||(B==null?void 0:B.title)||ge,te=qi($==null?void 0:$.profileImage);return{name:De,profile:te}},G=_e.map(ge=>{const B=ge.postId||ge.id||ge.key||"",{name:me,profile:$}=ie(ge.adminId);let De=[];Array.isArray(ge.likes)?De=ge.likes:ge.likes&&typeof ge.likes=="object"&&(De=Object.keys(ge.likes));const te=ge.time||ge.timestamp||ge.createdAt||null;return{...ge,postId:B,adminName:me,adminProfile:$,time:te,likes:De,likeCount:ge.likeCount||De.length||0}});G.sort((ge,B)=>{const me=ge.time?new Date(ge.time).getTime():0;return(B.time?new Date(B.time).getTime():0)-me}),o(G);const he=JSON.parse(localStorage.getItem("teacher")),Ne=E(he==null?void 0:he.userId),ke=G.filter(ge=>!Ne.includes(ge.postId)).slice(0,5).map(ge=>{var B;return{id:ge.postId,title:((B=ge.message)==null?void 0:B.substring(0,80))||"Untitled post",adminName:ge.adminName,adminProfile:ge.adminProfile}});u(ke)}catch(V){console.error("Error fetching posts/admins handshake:",V)}},se=async V=>{try{if(!L)return;const _e=await ee.post("https://gojo-teacher-web.onrender.com/api/like_post",{postId:V,teacherId:L});if(_e.data.success){const Z=_e.data.liked,Se=_e.data.likeCount;o(X=>X.map(Y=>Y.postId===V?{...Y,likeCount:Se,likes:{...Y.likes,[L]:Z?!0:void 0}}:Y))}}catch(_e){console.error("Error liking post:",_e)}},E=V=>JSON.parse(localStorage.getItem(`seen_posts_${V}`))||[],x=(V,_e)=>{const Z=E(V);Z.includes(_e)||localStorage.setItem(`seen_posts_${V}`,JSON.stringify([...Z,_e]))},j=()=>{localStorage.removeItem("teacher"),n("/login")},I=async(V=r)=>{try{const _e=V||JSON.parse(localStorage.getItem("teacher"));if(!_e||!_e.userId){_([]);return}const[Z,Se]=await Promise.all([ee.get(`${Gi}/Chats.json`),ee.get(`${Gi}/Users.json`)]),X=Z.data||{},ie=Se.data||{}||{},G={};Object.entries(ie).forEach(([Ne,ke])=>{ke&&ke.userId&&(G[ke.userId]=Ne)});const he=Object.entries(X).map(([Ne,ke])=>{const B=(ke.unread||{})[_e.userId]||0;if(!B)return null;const me=ke.participants||{},$=Object.keys(me||{}).find(oe=>oe!==_e.userId);if(!$)return null;let De=$,te=ie[De];if(!te){const oe=G[$];oe&&(De=oe,te=ie[oe])}te||(te={userId:$,name:$,profileImage:"/default-profile.png"});const be={pushKey:De,userId:te.userId||$,name:te.name||te.username||$,profileImage:qi(te.profileImage||te.profile||"")},W=ke.lastMessage||{};return{chatId:Ne,contact:be,displayName:be.name,profile:be.profileImage,lastMessageText:W.text||"",lastMessageTime:W.timeStamp||W.time||null,unreadForMe:B}}).filter(Boolean).sort((Ne,ke)=>(ke.lastMessageTime||0)-(Ne.lastMessageTime||0));_(he)}catch(_e){console.error("Error fetching conversations:",_e),_([])}},N=S.reduce((V,_e)=>V+(_e.unreadForMe||0),0),O=r||{},C=()=>e(!1);return g.useEffect(()=>{const V=()=>{window.innerWidth<=600?e(!1):e(!0)};return window.addEventListener("resize",V),V(),()=>window.removeEventListener("resize",V)},[]),a.jsxs("div",{className:"dashboard-page",children:[a.jsxs("nav",{className:"top-navbar",children:[window.innerWidth<=600&&!t&&a.jsx("button",{className:"sidebar-arrow-btn",style:{position:"fixed",left:0,top:180,transform:"none",zIndex:1300,background:"#fff",border:"none",borderRadius:"0 8px 8px 0",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",padding:8,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:()=>e(!0),"aria-label":"Open sidebar menu",children:a.jsx(us,{size:22})}),a.jsx("h2",{children:"Gojo Dashboard"}),a.jsxs("div",{className:"nav-right",children:[a.jsxs("div",{className:"icon-circle",style:{position:"relative"},children:[a.jsxs("div",{onClick:()=>w(!k),style:{cursor:"pointer",position:"relative"},"aria-label":"Show notifications",tabIndex:0,role:"button",onKeyPress:V=>{V.key==="Enter"&&w(!k)},children:[a.jsx(gs,{size:22}),c.length+d.length>0&&a.jsx("span",{style:{position:"absolute",top:-6,right:-6,background:"red",color:"#fff",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:c.length+d.length})]}),k&&a.jsxs(a.Fragment,{children:[a.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.08)",zIndex:1999},onClick:()=>w(!1)}),a.jsx("div",{className:"notification-popup",style:typeof window<"u"&&window.innerWidth<=600?{position:"fixed",left:"50%",top:"8%",transform:"translate(-50%, 0)",width:"90vw",maxWidth:340,zIndex:2e3,background:"#fff",borderRadius:12,boxShadow:"0 2px 16px rgba(0,0,0,0.18)",maxHeight:"70vh",overflowY:"auto",padding:12}:void 0,children:[...c,...d].length>0?[...c,...d].map((V,_e)=>a.jsxs("div",{className:"notification-item",onClick:()=>{V.isMessage?(n("/all-chat"),w(!1)):(L&&x(L,V.id),u(Z=>Z.filter(Se=>Se.id!==V.id)),w(!1))},tabIndex:0,role:"button","aria-label":V.isMessage?"See message notification "+V.title:"See post notification "+V.title,onKeyPress:Z=>{Z.key==="Enter"&&(V.isMessage?(n("/all-chat"),w(!1)):(L&&x(L,V.id),u(Se=>Se.filter(X=>X.id!==V.id)),w(!1)))},children:[a.jsx("img",{src:qi(V.adminProfile),alt:V.adminName||"Admin",className:"notification-profile"}),a.jsxs("div",{children:[a.jsx("strong",{children:V.adminName}),a.jsx("div",{className:"notification-title",children:V.title}),V.isMessage&&a.jsx("span",{style:{color:"#0b78f6",fontSize:12,fontWeight:500},children:"[Message]"})]})]},V.id||_e)):a.jsx("div",{className:"no-notifications",children:"No notifications"})})]})]}),a.jsxs("div",{className:"icon-circle",style:{position:"relative",marginLeft:12,cursor:"pointer"},onClick:()=>n("/all-chat"),"aria-label":"Go to all chat",tabIndex:0,role:"button",onKeyPress:V=>{V.key==="Enter"&&n("/all-chat")},children:[a.jsx(ms,{size:22}),N>0&&a.jsx("span",{style:{position:"absolute",top:1,right:0,background:"#f60b0b",color:"#fff",borderRadius:"50%",minWidth:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 5px"},children:N})]}),a.jsx("div",{className:"icon-circle",onClick:()=>n("/settings"),children:a.jsx(Ir,{})}),a.jsx("img",{src:qi(O.profileImage),alt:"teacher",className:"profile-img"})]})]}),a.jsxs("div",{className:"google-dashboard",children:[window.innerWidth<=600&&t&&a.jsx("div",{className:"sidebar-overlay visible",onClick:C,style:{display:"block"}}),a.jsxs("div",{className:`google-sidebar${t?" open":""}`,style:window.innerWidth<=600?{position:"fixed",top:64,left:t?0:"-220px",width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",zIndex:1200,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto",transition:"left 0.25s cubic-bezier(.4,0,.2,1)"}:{position:"fixed",top:64,left:0,width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.04)",zIndex:900,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto"},children:[r&&a.jsxs("div",{className:"sidebar-profile",children:[a.jsx("div",{className:"sidebar-img-circle",children:a.jsx("img",{src:r.profileImage||"/default-profile.png",alt:"profile",style:{width:"100%",height:"100%",objectFit:"cover",border:"none",boxShadow:"none"}})}),a.jsx("h3",{children:r.name}),a.jsx("p",{children:r.username})]}),a.jsxs("div",{className:"sidebar-menu",children:[a.jsxs(ye,{className:"sidebar-btn",to:"/dashboard",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[a.jsx(Hr,{})," Home"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/students",children:[a.jsx(Ut,{})," Students"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/admins",children:[a.jsx(Ut,{})," Admins"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/parents",children:[a.jsx(Wr,{})," Parents"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/marks",children:[a.jsx(lr,{})," Marks"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/attendance",children:[a.jsx(xs,{})," Attendance"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/schedule",children:[a.jsx(Ur,{})," Schedule"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/lesson-plan",children:[a.jsx(ys,{})," Lesson Plan"]}),a.jsxs("button",{className:"sidebar-btn logout-btn",onClick:j,children:[a.jsx(Vr,{})," Logout"]})]})]}),a.jsx("div",{className:"google-main posts-full-mobile",children:a.jsxs("div",{className:"posts-container",children:[i.length===0&&a.jsx("p",{children:"No posts available"}),i.map(V=>a.jsxs("div",{ref:_e=>v.current[V.postId]=_e,className:"post-box",style:{border:p===V.postId?"2px solid #4b6cb7":"1px solid #eee",backgroundColor:p===V.postId?"#fff9c4":"#fff",transition:"background-color 0.4s, border 0.2s",marginBottom:18},children:[a.jsxs("div",{className:"fb-post-top",children:[a.jsx("img",{src:qi(V.adminProfile),alt:V.adminName||"Admin"}),a.jsxs("div",{className:"post-info",children:[a.jsx("h4",{style:{margin:0,fontSize:17,fontWeight:700},children:V.adminName||"Admin"}),a.jsx("div",{style:{fontSize:12,color:"#666"},children:V.time?new Date(V.time).toLocaleString():""})]})]}),a.jsx("div",{style:{marginTop:12,fontSize:17,lineHeight:1.6,color:"#222",wordBreak:"break-word",paddingLeft:"10px"},children:V.message}),V.postUrl&&a.jsx("img",{src:V.postUrl,alt:"post media",className:"post-media",style:{width:"100%",borderRadius:8,marginTop:8,maxHeight:400,objectFit:"cover"}}),a.jsx("div",{className:"post-actions",style:{marginTop:14,display:"flex",alignItems:"center",gap:18},children:a.jsxs("button",{onClick:()=>se(V.postId),style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 18px",background:"#f0f2f5",border:"none",borderRadius:8,cursor:"pointer",fontSize:"16px",fontWeight:"500",color:V.likes&&L&&V.likes[L]?"#e0245e":"#555",transition:"all 0.2s ease"},children:[V.likes&&L&&V.likes[L]?a.jsx(Bj,{style:{color:"#e0245e",fontSize:"16px"}}):a.jsx(Wj,{style:{fontSize:"16px"}}),V.likes&&L&&V.likes[L]?"Liked":"Like",a.jsx("span",{style:{marginLeft:8,fontSize:"15px",color:"#777"},children:V.likeCount||0})]})})]},V.postId))]})}),a.jsx("style",{children:`
          .posts-container {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            justify-content: flex-start;
            margin-left: 120px;
          }
          .post-box {
            margin-left: 0;
            margin-right: auto;
            margin-top: 12px;
          }
          @media (max-width: 600px) {
            .posts-container {
              margin-left: 0 !important;
            }
            .post-box {
              margin-top: 0 !important;
            }
          }
          @media (max-width: 600px) {
            .posts-full-mobile, .posts-container, .post-box {
              width: 100vw !important;
              max-width: 100vw !important;
              margin: 0 !important;
              padding: 0 !important;
              border-radius: 0 !important;
              box-shadow: none !important;
            }
            .posts-container {
              align-items: stretch;
            }
            .google-sidebar {
              left: -220px;
              transition: left 0.25s cubic-bezier(.4,0,.2,1);
            }
            .google-sidebar.open {
              left: 0 !important;
              z-index: 1202;
            }
            .sidebar-overlay {
              display: block;
              position: fixed;
              inset: 0;
              background: rgba(0,0,0,0.35);
              z-index: 1200;
              transition: opacity 0.2s;
            }
            .sidebar-arrow-btn {
              display: flex !important;
            }
          }
        `})]})]})}const gc=(t,e)=>{const n=String(t||"").trim(),r=String(e||"").trim();return`${n}_${r}`},yN=(t="")=>t?String(t).replace(/^course_/,"").replace(/_[0-9A-Za-z]+$/,"").replace(/_/g," ").trim().split(/\s+/).map(n=>n?n[0].toUpperCase()+n.slice(1).toLowerCase():"").join(" "):"Unknown",xN="https://gojo-teacher-web.onrender.com/api",pn="https://ethiostore-17d9f-default-rtdb.firebaseio.com",ch=t=>{if(!t)return null;let e;if(typeof t=="number"?e=new Date(t):e=new Date(String(t)),isNaN(e.getTime()))return null;const n=new Date;let r=n.getFullYear()-e.getFullYear();const s=n.getMonth()-e.getMonth();return(s<0||s===0&&n.getDate()<e.getDate())&&r--,r},vN=t=>{if(!t)return"";const e=new Date(Number(t));return`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`},wN=t=>{if(!t)return"";const e=new Date(Number(t)),n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()),s=new Date(e.getFullYear(),e.getMonth(),e.getDate()),i=r-s,o=Math.floor(i/(24*60*60*1e3));return o===0?"Today":o===1?"Yesterday":o>1&&o<7?`${o} days ago`:e.toLocaleDateString()},uh=(t,e)=>!t||!e?null:Object.values(t).find(n=>String(n==null?void 0:n.userId)===String(e))||null,_N=({student:t,selected:e,onClick:n})=>a.jsxs("div",{onClick:()=>n(t),style:{width:"100%",borderRadius:"12px",padding:"15px",display:"flex",alignItems:"center",gap:"20px",cursor:"pointer",background:e?"#e0e7ff":"#fff",border:e?"2px solid #4b6cb7":"1px solid #ddd",boxShadow:e?"0 6px 15px rgba(75,108,183,0.3)":"0 4px 10px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},children:[a.jsx("img",{src:t.profileImage||"/default-profile.png",alt:t.name,style:{width:"50px",height:"50px",borderRadius:"50%",objectFit:"cover",border:e?"3px solid #4b6cb7":"3px solid red"}}),a.jsxs("div",{children:[a.jsx("h3",{style:{margin:0},children:t.name}),a.jsxs("p",{style:{margin:"4px 0",color:"#555"},children:["Grade ",t.grade," - Section ",t.section]})]})]});function bN(){const[t,e]=g.useState(typeof window<"u"?window.innerWidth>600:!0),[n,r]=g.useState([]),[s,i]=g.useState(""),[o,c]=g.useState("All"),[u,d]=g.useState("All"),[f,p]=g.useState([]),[y,k]=g.useState("details"),[w,R]=g.useState([]),[D,S]=g.useState(""),[_,v]=g.useState(null),[L,q]=g.useState(!1),[se,E]=g.useState(!1),[x,j]=g.useState("daily"),[I,N]=g.useState({}),[O,C]=g.useState({}),[V,_e]=g.useState({}),[Z,Se]=g.useState(null),[X,Y]=g.useState([]),[ie,G]=g.useState(""),[he,Ne]=g.useState(!1),[ke,ge]=g.useState({}),[B,me]=g.useState(null),[$,De]=g.useState(null),[te,be]=g.useState(!1),[W,oe]=g.useState([]),[ce,H]=g.useState(""),re=g.useRef(null),le=JSON.parse(localStorage.getItem("teacher"))||{},M=String(le.userId||""),[z,ne]=g.useState({}),[ue,Ce]=g.useState([]),[Oe,de]=g.useState("daily"),[pe,Ae]=g.useState("All"),[Ue,Ge]=g.useState({}),[vt,We]=g.useState({}),[Et,Ze]=g.useState(!0),[Lt,Ct]=g.useState([]),[Rt,Xt]=g.useState("semester2"),[Zt,_n]=g.useState({}),[ws,Dn]=g.useState([]),[Zn,bt]=g.useState([]),[er,Ft]=g.useState(!1),[hr,Tr]=g.useState(null),tr=g.useRef({}),nn=Vn(),[zl,qo]=g.useState(!1),[Gr,si]=g.useState([]);g.useEffect(()=>{const P=JSON.parse(localStorage.getItem("teacher"));if(!P){nn("/login");return}me(P),oi(P)},[nn]),g.useEffect(()=>{const P=JSON.parse(localStorage.getItem("teacher"));if(!P){nn("/login");return}v(P)},[nn]),g.useEffect(()=>{(async()=>{try{let Ee=(await ee.get(`${xN}/get_posts`)).data||[];!Array.isArray(Ee)&&typeof Ee=="object"&&(Ee=Object.values(Ee));const[Te,Me]=await Promise.all([ee.get(`${pn}/School_Admins.json`),ee.get(`${pn}/Users.json`)]),qe=Te.data||{},Xe=Me.data||{},Fe=JSON.parse(localStorage.getItem("teacher")),Qe=ii(Fe==null?void 0:Fe.userId),$e=ze=>{const lt=ze.adminId||ze.posterAdminId||ze.poster||ze.admin||null;if(lt&&qe[lt]){const At=qe[lt],Ke=At.userId,Je=Xe[Ke]||null,Ie=Je&&Je.name||At.name||ze.adminName||"Admin",He=Je&&Je.profileImage||At.profileImage||ze.adminProfile||"/default-profile.png";return{name:Ie,profile:He}}return{name:ze.adminName||"Admin",profile:ze.adminProfile||"/default-profile.png"}},Le=Ee.slice().sort((ze,lt)=>{const At=ze.time?new Date(ze.time).getTime():0;return(lt.time?new Date(lt.time).getTime():0)-At}).filter(ze=>ze.postId&&!Qe.includes(ze.postId)).slice(0,5).map(ze=>{var At;const lt=$e(ze);return{id:ze.postId,title:((At=ze.message)==null?void 0:At.substring(0,50))||"Untitled post",adminName:lt.name,adminProfile:lt.profile}});bt(Le)}catch(ae){console.error("Error fetching notifications:",ae)}})()},[]);function ii(P){return JSON.parse(localStorage.getItem(`seen_posts_${P}`))||[]}const oi=async(P=B)=>{try{const ae=P||JSON.parse(localStorage.getItem("teacher"));if(!ae||!ae.userId){si([]);return}const[Ee,Te]=await Promise.all([ee.get(`${pn}/Chats.json`),ee.get(`${pn}/Users.json`)]),Me=Ee.data||{},Xe=Te.data||{}||{},Fe={};Object.entries(Xe).forEach(([$e,Le])=>{Le&&Le.userId&&(Fe[Le.userId]=$e)});const Qe=Object.entries(Me).map(([$e,Le])=>{const lt=(Le.unread||{})[ae.userId]||0;if(!lt)return null;const At=Le.participants||{},Ke=Object.keys(At||{}).find(Ye=>Ye!==ae.userId);if(!Ke)return null;let Je=Ke,Ie=Xe[Je];if(!Ie){const Ye=Fe[Ke];Ye&&(Je=Ye,Ie=Xe[Ye])}Ie||(Ie={userId:Ke,name:Ke,profileImage:"/default-profile.png"});const He={pushKey:Je,userId:Ie.userId||Ke,name:Ie.name||Ie.username||Ke,profileImage:Ie.profileImage||Ie.profile||"/default-profile.png"},mt=Le.lastMessage||{};return{chatId:$e,contact:He,displayName:He.name,profile:He.profileImage,lastMessageText:mt.text||"",lastMessageTime:mt.timeStamp||mt.time||null,lastMessageSeen:!!mt.seen,lastMessageSeenAt:mt.seenAt||mt.seenAt||null,lastMessageSenderId:mt.senderId||null,unreadForMe:lt}}).filter(Boolean).sort(($e,Le)=>(Le.lastMessageTime||0)-($e.lastMessageTime||0));si(Qe)}catch(ae){console.error("Error fetching conversations:",ae),si([])}},On=Gr.reduce((P,ae)=>P+(ae.unreadForMe||0),0);g.useEffect(()=>{if(!(_!=null&&_.userId))return;let P=!1;return(async()=>{Ze(!0);try{const[Ee,Te,Me,qe,Xe]=await Promise.all([ee.get(`${pn}/Students.json`),ee.get(`${pn}/Users.json`),ee.get(`${pn}/Courses.json`),ee.get(`${pn}/TeacherAssignments.json`),ee.get(`${pn}/Teachers.json`)]),Fe=Xe.data||{},Qe=Object.entries(Fe).find(([Ke,Je])=>Je.userId===_.userId);if(!Qe){console.warn("Teacher not found in Teachers node"),P||(r([]),Ze(!1),i("No teacher assignment found"));return}const $e=Qe[0],Le=Object.values(qe.data||{}).filter(Ke=>Ke.teacherId===$e).map(Ke=>Ke.courseId),ze=Te.data||{};_e(ze);const lt=Ke=>uh(ze,Ke),At=Object.entries(Ee.data||{}).map(([Ke,Je])=>{var zt,yt;const Ie=lt(Je.userId),He=Je.parentName||((zt=Je.parent)==null?void 0:zt.name)||(Ie==null?void 0:Ie.parentName)||Je.rawParentName||null,mt=Je.parentPhone||((yt=Je.parent)==null?void 0:yt.phone)||(Ie==null?void 0:Ie.parentPhone)||Je.rawParentPhone||null,Ye=(Ie==null?void 0:Ie.dob)||(Ie==null?void 0:Ie.birthDate)||Je.dob||Je.birthDate||null,Kt=ch(Ye);return{...Je,studentId:Ke,name:(Ie==null?void 0:Ie.name)||Je.name||"Unknown",email:(Ie==null?void 0:Ie.email)||Je.email||"",profileImage:(Ie==null?void 0:Ie.profileImage)||Je.profileImage||"/default-profile.png",phone:(Ie==null?void 0:Ie.phone)||Je.phone||"",gender:(Ie==null?void 0:Ie.gender)||Je.gender||"",dob:Ye,age:Kt,parentName:He||null,parentPhone:mt||null,raw:Je}}).filter(Ke=>Le.some(Je=>{var He;const Ie=(He=Me.data)==null?void 0:He[Je];return Ie&&Ie.grade===Ke.grade&&Ie.section===Ke.section}));P||(r(At),i(""))}catch(Ee){console.error(Ee),P||i("Failed to load students")}finally{P||Ze(!1)}})(),()=>P=!0},[_]),g.useEffect(()=>{var Te,Me,qe,Xe,Fe,Qe;if(!$){Se(null);return}const P={fullName:$.name||"",phone:$.phone||((Te=$.raw)==null?void 0:Te.phone)||"",gender:$.gender||((Me=$.raw)==null?void 0:Me.gender)||"",email:$.email||"",grade:$.grade||"",section:$.section||"",parentName:$.parentName||((qe=$.raw)==null?void 0:qe.parentName)||"",parentPhone:$.parentPhone||((Xe=$.raw)==null?void 0:Xe.parentPhone)||"",dob:$.dob||((Fe=$.raw)==null?void 0:Fe.dob)||"",age:$.age??ch($.dob||((Qe=$.raw)==null?void 0:Qe.dob))??"",profileImage:$.profileImage||"/default-profile.png"};Se(P);let ae=!1;return(async()=>{var $e,Le,ze,lt,At,Ke,Je;try{let Ie=V;(!Ie||Object.keys(Ie).length===0)&&(Ie=(await ee.get(`${pn}/Users.json`)).data||{},_e(Ie));const He=uh(Ie,$.userId)||{},mt=(($e=$.raw)==null?void 0:$e.parentId)||((Le=$.raw)==null?void 0:Le.parentUserId)||(He==null?void 0:He.parentId)||(He==null?void 0:He.parentUserId)||null,Ye=mt?uh(Ie,mt):null,Kt=(Ye==null?void 0:Ye.name)||((ze=$.raw)==null?void 0:ze.parentName)||$.parentName||"",zt=(Ye==null?void 0:Ye.phone)||((lt=$.raw)==null?void 0:lt.parentPhone)||$.parentPhone||"",yt=(He==null?void 0:He.phone)||$.phone||((At=$.raw)==null?void 0:At.phone)||"",fr=(He==null?void 0:He.gender)||$.gender||((Ke=$.raw)==null?void 0:Ke.gender)||"",_s=(He==null?void 0:He.email)||$.email||"",Bl=(He==null?void 0:He.dob)||(He==null?void 0:He.birthDate)||$.dob||((Je=$.raw)==null?void 0:Je.dob)||null,ud=ch(Bl)??$.age??"",dd={fullName:(He==null?void 0:He.name)||$.name||"",phone:yt,gender:fr,email:_s,grade:$.grade||"",section:$.section||"",parentName:Kt,parentPhone:zt,dob:Bl||"",age:ud,profileImage:(He==null?void 0:He.profileImage)||$.profileImage||"/default-profile.png",userRec:He,parentRec:Ye};ae||Se(dd)}catch(Ie){console.error("Failed to derive student details",Ie)}})(),()=>{ae=!0}},[$,V]),g.useEffect(()=>{if(!$)return;let P=!1;return(async()=>{var Ee,Te;try{const qe=(await ee.get(`${pn}/Parents.json`)).data||{},Xe=[(Ee=$.raw)==null?void 0:Ee.parentId,(Te=$.raw)==null?void 0:Te.parentUserId,$.parentId,$.parentUserId].filter(Boolean);let Fe=null;for(const Le of Xe){if(qe[Le]){Fe=qe[Le];break}const ze=Object.values(qe).find(lt=>String(lt.userId)===String(Le));if(ze){Fe=ze;break}}if(!Fe){const Le=$.studentId||$.userId;for(const ze of Object.values(qe)){const lt=(ze==null?void 0:ze.children)||{};if(Object.values(lt).find(Ke=>String(Ke==null?void 0:Ke.studentId)===String(Le))){Fe=ze;break}}}let Qe=null,$e=null;if(Fe&&(Qe=Fe.name||Fe.displayName||null,$e=Fe.phone||Fe.phoneNumber||Fe.contact||null,(!Qe||!$e)&&Fe.userId))try{const ze=(await ee.get(`${pn}/Users.json`)).data||{},lt=Object.values(ze).find(At=>String(At.userId)===String(Fe.userId));lt&&(Qe=Qe||lt.name||null,$e=$e||lt.phone||null)}catch{}P||Se(Le=>({...Le||{},parentName:Qe||(Le==null?void 0:Le.parentName)||"",parentPhone:$e||(Le==null?void 0:Le.parentPhone)||""}))}catch(Me){console.error("Error resolving parent info:",Me)}})(),()=>P=!0},[$]),g.useEffect(()=>{const P=document.querySelector(".chat-messages");P&&(P.scrollTop=P.scrollHeight)},[w]),g.useEffect(()=>{if(o==="All")p([]),d("All");else{const P=[...new Set(n.filter(ae=>ae.grade===o).map(ae=>ae.section))];p(P),d("All")}},[o,n]);const T=n.filter(P=>!(o!=="All"&&P.grade!==o||u!=="All"&&P.section!==u)),A=[...new Set(n.map(P=>P.grade))].sort();g.useEffect(()=>{if(!($!=null&&$.studentId)&&!($!=null&&$.userId)){Dn([]);return}let P=!1;return(async()=>{q(!0);try{const[Ee,Te,Me,qe]=await Promise.all([ee.get(`${pn}/Attendance.json`),ee.get(`${pn}/Teachers.json`),ee.get(`${pn}/Users.json`),ee.get(`${pn}/TeacherAssignments.json`)]),Xe=Ee.data||{},Fe=Te.data||{},Qe=Me.data||{},$e=qe.data||{},Le=[];Object.entries(Xe).forEach(([ze,lt])=>{!lt||typeof lt!="object"||Object.entries(lt).forEach(([At,Ke])=>{if(!Ke||typeof Ke!="object")return;let Ie=Ke[$.studentId]??Ke[$.userId];if(!Ie&&Ke.students&&(Ie=Ke.students[$.studentId]??Ke.students[$.userId]),!Ie){const Kt=Object.entries(Ke).find(([zt,yt])=>!yt||typeof yt!="object"?!1:!!(yt.userId&&(String(yt.userId)===String($.userId)||String(yt.userId)===String($.studentId))));Kt&&(Ie=Kt[1])}if(!Ie)return;let He="absent",mt="",Ye=ze;if(typeof Ie=="string")He=Ie;else if(typeof Ie=="object"){if(He=Ie.status||Ie.attendance_status||Object.values(Ie)[0]||"present",mt=Ie.teacherName||Ie.teacher||Ie.tutor||"",!mt){const Kt=Ie.teacherId||Ie.teacherKey||null;if(Kt&&Fe[Kt]){const zt=Fe[Kt];if(zt.userId){const yt=Object.values(Qe).find(fr=>String(fr==null?void 0:fr.userId)===String(zt.userId));mt=(yt==null?void 0:yt.name)||zt.name||mt}else mt=zt.name||mt}}if(!mt){const Kt=Ie.teacherUserId||Ie.teacherUser||Ie.takenBy||null;if(Kt){const zt=Object.values(Qe).find(yt=>String(yt==null?void 0:yt.userId)===String(Kt));zt&&(mt=zt.name||mt)}}Ye=Ie.subject||ze}if(!mt){const Kt=Object.values($e).find(zt=>String(zt.courseId)===String(ze));if(Kt&&Kt.teacherId){const zt=Kt.teacherId,yt=Fe[zt];if(yt)if(yt.userId){const fr=Object.values(Qe).find(_s=>String(_s==null?void 0:_s.userId)===String(yt.userId));mt=(fr==null?void 0:fr.name)||yt.name||mt}else mt=yt.name||mt}}Le.push({courseId:ze,date:At,status:String(He).toLowerCase(),teacherName:mt,subject:Ye})})}),P||(Le.sort((ze,lt)=>new Date(lt.date)-new Date(ze.date)),Dn(Le))}catch(Ee){console.error("Attendance fetch error:",Ee),P||Dn([])}finally{P||q(!1)}})(),()=>{P=!0}},[$]);const F=kt.useMemo(()=>ws.map(P=>({date:P.date,courseId:P.courseId,teacherName:P.teacherName||"",status:P.status||"absent"})),[ws]),U=kt.useMemo(()=>!F||F.length===0?{}:F.reduce((P,ae)=>{const Ee=ae.courseId||ae.subject||"unknown";return P[Ee]||(P[Ee]=[]),P[Ee].push(ae),P},{}),[F]),xe=P=>{if(!P||P.length===0)return 0;const ae=P.filter(Ee=>Ee.status==="present"||Ee.status==="late").length;return Math.round(ae/P.length*100)},ve=P=>{Ge(ae=>({...ae,[P]:!ae[P]}))},Pe=()=>{localStorage.removeItem("teacher"),nn("/login")};g.useEffect(()=>{if(!$){ne({});return}(async()=>{Ze(!0);try{const ae=D2(),Ee=await Ma(Ot(ae,"ClassMarks"));if(!Ee.exists()){ne({}),Ze(!1);return}const Te=Ee.val(),Me={},qe=new Set([$.studentId,$.userId,$.userId?`student_${$.userId}`:null].filter(Boolean));Object.entries(Te).forEach(([Xe,Fe])=>{if(!Fe||typeof Fe!="object")return;const Qe=Object.entries(Fe).find(([$e,Le])=>!!(qe.has($e)||Le&&typeof Le=="object"&&(Le.userId&&qe.has(Le.userId)||Le.studentId&&qe.has(Le.studentId))));if(Qe){const[,$e]=Qe;Me[Xe]=$e}}),ne(Me)}catch(ae){console.error("Failed to fetch marks:",ae),ne({})}finally{Ze(!1)}})()},[$]),g.useEffect(()=>{if(!($!=null&&$.userId))return;async function P(){try{const ae=await ee.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/StudentNotes/${$==null?void 0:$.userId}.json`);if(!ae.data){Y([]);return}const Ee=Object.entries(ae.data).map(([Te,Me])=>({id:Te,...Me}));Ee.sort((Te,Me)=>new Date(Me.createdAt)-new Date(Te.createdAt)),Y(Ee)}catch(ae){console.error("Failed to fetch teacher notes",ae),Y([])}}P()},[$]);const nt=async()=>{if(!ie.trim()||!_||!$)return;Ne(!0);const P={teacherId:_.userId,teacherName:_.name,note:ie.trim(),createdAt:new Date().toISOString()};try{await ee.post(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/StudentNotes/${$==null?void 0:$.userId}.json`,P),Y(ae=>[P,...ae]),G("")}catch(ae){console.error("Error saving note",ae)}finally{Ne(!1)}},st=()=>{var P;(P=re.current)==null||P.scrollIntoView({behavior:"smooth"})};g.useEffect(()=>{st()},[W]),g.useEffect(()=>{if(!M||!$)return;const P=gc(M,$.userId),ae=Ot(Bt,`Chats/${P}/messages`),Ee=yo(ae,Te=>{const Me=Te.val()||{},qe=Object.entries(Me).map(([Xe,Fe])=>({id:Xe,...Fe,isTeacher:Fe.senderId===M})).sort((Xe,Fe)=>Xe.timeStamp-Fe.timeStamp);oe(qe)});return()=>Ee()},[M,$]),g.useEffect(()=>{if(!se||!$||!M||!W||W.length===0)return;const P=W.filter(Me=>String(Me.receiverId)===String(M)&&!Me.seen);if(P.length===0)return;const ae=gc(M,$.userId),Ee=Date.now(),Te={messages:{},unread:{}};P.forEach(Me=>{Te.messages[Me.id]={...Te.messages[Me.id]||{},seen:!0,seenAt:Ee}}),Te.unread[M]=null,Te.lastMessage={seen:!0,seenAt:Ee},ee.patch(`${pn}/Chats/${ae}.json`,Te).catch(Me=>console.error("Failed to mark messages seen:",Me))},[se,W,$,M]),g.useEffect(()=>{var P;(P=re.current)==null||P.scrollIntoView({behavior:"smooth"})},[W]);const Be=async()=>{if(!ce.trim()||!$)return;const P=M,ae=$.userId,Ee=gc(P,ae),Te=Date.now(),Me={senderId:P,receiverId:ae,type:"text",text:ce,seen:!1,timeStamp:Te};await ee.post(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${Ee}/messages.json`,Me),await ee.patch(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${Ee}.json`,{participants:{[P]:!0,[ae]:!0},lastMessage:{text:ce,senderId:P,seen:!1,timeStamp:Te},unread:{[ae]:1}}),H("")},[tt,it]=kt.useState(window.innerWidth<window.innerHeight);return kt.useEffect(()=>{const P=()=>{it(window.innerWidth<window.innerHeight)};return window.addEventListener("resize",P),()=>window.removeEventListener("resize",P)},[]),g.useEffect(()=>{const P=document.querySelector(".chat-messages");P&&(P.scrollTop=P.scrollHeight)},[w]),a.jsxs("div",{className:"dashboard-page",children:[a.jsxs("nav",{className:"top-navbar",children:[a.jsx("h2",{children:"Gojo Dashboard"}),a.jsxs("div",{className:"nav-right",children:[a.jsxs("div",{className:"icon-circle",children:[a.jsxs("div",{onClick:()=>Ft(!er),style:{cursor:"pointer",position:"relative"},"aria-label":"Show notifications",tabIndex:0,role:"button",onKeyPress:P=>{P.key==="Enter"&&Ft(!er)},children:[a.jsx(gs,{size:24}),Zn.length+On>0&&a.jsx("span",{style:{position:"absolute",top:-5,right:-5,background:"red",color:"white",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:Zn.length+On})]}),er&&a.jsxs(a.Fragment,{children:[a.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.08)",zIndex:1999},onClick:()=>Ft(!1)}),a.jsxs("div",{className:"notification-popup",style:typeof window<"u"&&window.innerWidth<=600?{position:"fixed",left:"50%",top:"8%",transform:"translate(-50%, 0)",width:"90vw",maxWidth:340,zIndex:2e3,background:"#fff",borderRadius:12,boxShadow:"0 2px 16px rgba(0,0,0,0.18)",maxHeight:"70vh",overflowY:"auto",padding:12}:{zIndex:2e3,position:"absolute",top:30,right:0,width:300,maxHeight:400,overflowY:"auto",background:"#fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",borderRadius:8},onClick:P=>P.stopPropagation(),children:[Zn.length>0&&Zn.map((P,ae)=>a.jsxs("div",{onClick:()=>{bt(Ee=>Ee.filter((Te,Me)=>Me!==ae)),Ft(!1),nn("/dashboard"),setTimeout(()=>{const Ee=tr.current[P.id];Ee&&(Ee.scrollIntoView({behavior:"smooth",block:"center"}),Tr(P.id),setTimeout(()=>Tr(null),3e3))},150)},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:P.adminProfile,alt:P.adminName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:P.adminName}),a.jsx("p",{style:{margin:0,fontSize:12},children:P.title})]})]},P.id||ae)),On>0&&Gr.filter(P=>P.unreadForMe>0).map((P,ae)=>a.jsxs("div",{onClick:()=>{Ft(!1),nn("/all-chat")},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:P.profile||"/default-profile.png",alt:P.displayName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:P.displayName}),a.jsxs("p",{style:{margin:0,fontSize:12,color:"#0b78f6",display:"flex",alignItems:"center",gap:8},children:[P.lastMessageSenderId===M?a.jsx("span",{style:{color:P.lastMessageSeen?"#0bda63":"#cbd5e1"},children:P.lastMessageSeen?"":""}):null,a.jsx("span",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:160},children:P.lastMessageText||"New message"}),P.lastMessageSeenAt&&a.jsx("span",{style:{marginLeft:6,color:"#64748b",fontSize:11},children:new Date(P.lastMessageSeenAt).toLocaleTimeString()})]})]})]},P.chatId||ae)),Zn.length===0&&On===0&&a.jsx("div",{style:{padding:15},children:"No notifications"})]})]})]}),a.jsx("div",{className:"icon-circle",style:{position:"relative",marginLeft:12},children:a.jsxs("div",{onClick:()=>nn("/all-chat"),style:{cursor:"pointer",position:"relative"},children:[a.jsx(ms,{size:22}),On>0&&a.jsx("span",{style:{position:"absolute",top:-6,right:-6,background:"#f60b0b",color:"#fff",borderRadius:"50%",minWidth:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 5px"},children:On})]})}),a.jsx("div",{className:"icon-circle",onClick:()=>nn("/settings"),children:a.jsx(Ir,{})}),a.jsx("img",{src:(B==null?void 0:B.profileImage)||"/default-profile.png"})]})]}),a.jsxs("div",{className:"google-dashboard",children:[typeof window<"u"&&g.useEffect(()=>{const P=()=>{window.innerWidth<=600?e(!1):e(!0)};return window.addEventListener("resize",P),P(),()=>window.removeEventListener("resize",P)},[]),typeof window<"u"&&window.innerWidth<=600&&!t&&a.jsx("button",{className:"sidebar-arrow-btn",style:{position:"fixed",left:0,top:0,zIndex:1300,background:"#fff",border:"none",borderRadius:"0 8px 8px 0",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",padding:8,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:()=>e(!0),"aria-label":"Open sidebar menu",children:a.jsx(us,{size:22})}),typeof window<"u"&&window.innerWidth<=600&&t&&a.jsx("div",{className:"sidebar-overlay visible",onClick:()=>e(!1),style:{display:"block",position:"fixed",inset:0,background:"rgba(0,0,0,0.35)",zIndex:1200}}),a.jsxs("div",{className:`google-sidebar${typeof window<"u"&&window.innerWidth<=600&&t?" open":""}`,style:typeof window<"u"&&window.innerWidth<=600?{position:"fixed",top:64,left:t?0:"-220px",width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",zIndex:1200,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto",borderRadius:0,transition:"left 0.25s cubic-bezier(.4,0,.2,1)"}:{position:"fixed",top:64,left:0,width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.04)",zIndex:900,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto",borderRadius:0},children:[a.jsx("style",{children:`
                    @media (max-width: 600px) {
                      .google-sidebar {
                        left: -220px;
                        transition: left 0.25s cubic-bezier(.4,0,.2,1);
                        border-radius: 0 !important;
                      }
                      .google-sidebar.open {
                        left: 0 !important;
                        z-index: 1202;
                        border-radius: 0 !important;
                      }
                      .sidebar-overlay {
                        display: block;
                        position: fixed;
                        inset: 0;
                        background: rgba(0,0,0,0.35);
                        z-index: 1200;
                        transition: opacity 0.2s;
                      }
                      .sidebar-arrow-btn {
                        display: flex !important;
                      }
                    }
                  `}),B&&a.jsxs("div",{className:"sidebar-profile",children:[a.jsx("div",{className:"sidebar-img-circle",children:a.jsx("img",{src:B.profileImage||"/default-profile.png",alt:"profile"})}),a.jsx("h3",{children:B.name}),a.jsx("p",{children:B.username})]}),a.jsxs("div",{className:"sidebar-menu",children:[a.jsxs(ye,{className:"sidebar-btn",to:"/dashboard",children:[a.jsx(Hr,{})," Home"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/students",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[a.jsx(Ut,{})," Students"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/admins",children:[a.jsx(Ut,{})," Admins"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/parents",children:[a.jsx(Wr,{})," Parents"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/marks",children:[a.jsx(lr,{})," Marks"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/attendance",children:[a.jsx(xs,{})," Attendance"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/schedule",children:[a.jsx(Ur,{})," Schedule"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/lesson-plan",children:[a.jsx(ys,{})," Lesson Plan"]}),a.jsxs("button",{className:"sidebar-btn logout-btn",onClick:Pe,children:[a.jsx(Vr,{})," Logout"]})]})]}),a.jsxs("div",{style:{flex:1,display:"flex",justifyContent:"center",padding:"30px"},children:[a.jsxs("div",{className:"student-list-card-responsive",style:{width:"220px",position:"relative",marginLeft:"30px",marginRight:tt?0:"30px"},children:[a.jsx("style",{children:`
               @media (max-width: 600px) {
                 .student-list-card-responsive {
                   margin-left: -16px !important;
                   margin-right: auto !important;
                   width: 70vw !important;
                   max-width: 70vw !important;
                 }
               }
             `}),a.jsx("h2",{style:{textAlign:"center",marginBottom:"20px"},children:"My Students"}),a.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px",flexWrap:"wrap"},children:[a.jsx("button",{onClick:()=>c("All"),style:{padding:"8px 15px",borderRadius:"8px",background:o==="All"?"#4b6cb7":"#ddd",color:o==="All"?"#fff":"#000",border:"none"},children:"All Grades"}),A.map(P=>a.jsxs("button",{onClick:()=>c(P),style:{padding:"8px 15px",borderRadius:"8px",background:o===P?"#4b6cb7":"#ddd",color:o===P?"#fff":"#000",border:"none"},children:["Grade ",P]},P))]}),o!=="All"&&a.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"20px",flexWrap:"wrap"},children:[a.jsx("button",{onClick:()=>d("All"),style:{padding:"6px 12px",borderRadius:"8px",background:u==="All"?"#4b6cb7":"#ddd",color:u==="All"?"#fff":"#000",border:"none"},children:"All Sections"}),f.map(P=>a.jsxs("button",{onClick:()=>d(P),style:{padding:"6px 12px",borderRadius:"8px",background:u===P?"#4b6cb7":"#ddd",color:u===P?"#fff":"#000",border:"none"},children:["Section ",P]},P))]}),Et&&a.jsx("p",{children:"Loading students..."}),s&&a.jsx("p",{style:{color:"red"},children:s}),!Et&&!s&&T.length===0&&a.jsx("p",{children:"No students found."}),a.jsx("style",{children:`
              .student-list-responsive {
                display: flex;
                flex-direction: column;
                margin-top: 30px;
                gap: 12px;
                width: 100%;
                max-width: 100vw;
                margin-left: 0;
                margin-right: 0;
              }
              @media (max-width: 600px) {
                .student-list-responsive {
                  width: 100vw !important;
                  max-width: 100vw !important;
                  margin-left: 0 !important;
                  margin-right: 0 !important;
                  padding: 0 !important;
                  align-items: flex-start !important;
                }
                .student-list-responsive > div {
                  margin-left: 10px !important;
                  padding-left: 10px !important;
                  width: 100vw !important;
                  max-width: 100vw !important;
                  min-width: 100vw !important;
                  box-sizing: border-box !important;
                }
              }
              @media (min-width: 350px) {
                .student-list-responsive {
                  width: 350px;
                  max-width: 70vw;
                }
              }
               @media (max-width: 600px) {
                 .student-list-card-responsive {
                   margin-left: -32px !important;
                   margin-right: auto !important;
                   width: 80vw !important;
                   max-width: 80vw !important;
                 }
               }
                  width: 500px;
                  max-width: 80vw;
                }
              }
              @media (min-width: 1200px) {
                .student-list-responsive {
                  width: 600px;
                  max-width: 700px;
                  margin-left: -100px;
                }
              }
              @media (min-width: 1500px) {
                .student-list-responsive {
                  width: 600px;
                  max-width: 700px;
                  margin-left: -250px;
                }
              }
            `}),a.jsx("div",{className:"student-list-responsive",children:T.map((P,ae)=>a.jsx(_N,{student:P,selected:($==null?void 0:$.userId)===P.userId,onClick:()=>De(P)},P.userId||P.id||ae))})]}),$&&a.jsxs("div",{style:{width:tt?"100%":"30%",height:tt?"100vh":"calc(100vh - 60px)",position:"fixed",right:0,top:tt?0:"60px",background:"#fff",zIndex:1e3,display:"flex",flexDirection:"column",overflowY:"auto",boxShadow:tt?"0 0 0 rgba(0,0,0,0)":"0 0 15px rgba(0,0,0,0.08)",transition:"all 0.35s ease"},children:[a.jsx("button",{onClick:()=>De(null),style:{position:"fixed",top:56,right:16,width:42,height:42,borderRadius:12,border:"none",background:"#ffffff",boxShadow:"0 6px 18px rgba(2,6,23,0.15)",cursor:"pointer",fontSize:22,fontWeight:900,zIndex:2e3},children:""}),a.jsxs("div",{style:{textAlign:"center",marginBottom:"20px",paddingTop:20},children:[a.jsx("div",{style:{width:"120px",height:"120px",margin:"0 auto 15px",borderRadius:"50%",overflow:"hidden",border:"4px solid #4b6cb7"},children:a.jsx("img",{src:$.profileImage,alt:$.name,style:{width:"100%",height:"100%",objectFit:"cover"}})}),a.jsx("h2",{style:{margin:0,fontSize:"22px"},children:$.name}),a.jsx("p",{style:{color:"#555",margin:"5px 0"},children:$.studentId}),a.jsxs("p",{style:{color:"#555",margin:"5px 0"},children:[a.jsx("strong",{children:"Grade:"})," ",$.grade,$.section]})]}),a.jsx("div",{style:{display:"flex",marginBottom:"15px"},children:["details","attendance","performance"].map(P=>a.jsx("button",{onClick:()=>k(P),style:{flex:1,padding:"10px",border:"none",background:"none",cursor:"pointer",fontWeight:"600",color:y===P?"#4b6cb7":"#777",borderBottom:y===P?"3px solid #4b6cb7":"3px solid transparent"},children:P.toUpperCase()},P))}),a.jsxs("div",{children:[y==="details"&&a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:28,padding:50,marginLeft:0,marginRight:0,borderRadius:0,background:"linear-gradient(180deg,#eef2ff,#f8fafc)",fontFamily:"Inter, system-ui"},children:a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:24,fontWeight:900,marginBottom:18,marginTop:-30,background:"linear-gradient(90deg,#2563eb,#7c3aed)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Student Details"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",columnGap:68,rowGap:14},children:[["Phone",Z==null?void 0:Z.phone],["Gender",Z==null?void 0:Z.gender],["Email",Z==null?void 0:Z.email],["Grade",Z==null?void 0:Z.grade],["Section",Z==null?void 0:Z.section],["Age",Z==null?void 0:Z.age],["Birth Date",Z==null?void 0:Z.dob],["Parent Name",Z==null?void 0:Z.parentName],["Parent Phone",Z==null?void 0:Z.parentPhone]].map(([P,ae])=>a.jsxs("div",{style:{padding:18,borderRadius:20,background:"#ffffff",boxShadow:"0 6px 10px rgba(0,0,0,0.08)",marginLeft:-30,marginRight:-30},children:[a.jsx("div",{style:{fontSize:12,fontWeight:700,color:"#000102",textTransform:"uppercase"},children:P}),a.jsx("div",{style:{marginTop:8,fontSize:16,fontWeight:400,color:"#000102"},children:ae||""})]},P))}),a.jsxs("div",{style:{marginTop:36},children:[a.jsx("div",{style:{fontSize:22,fontWeight:900,marginBottom:14,color:"#1e293b"},children:"Teacher Comments"}),a.jsxs("div",{style:{background:"#ffffff",padding:18,borderRadius:22,boxShadow:"0 14px 40px rgba(0,0,0,0.1)"},children:[a.jsx("textarea",{value:ie,onChange:P=>G(P.target.value),placeholder:"Write an important comment about the student...",style:{width:"100%",minHeight:30,border:"none",outline:"none",resize:"vertical",fontSize:15,lineHeight:1.6}}),a.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:12},children:a.jsx("button",{onClick:nt,disabled:he,style:{padding:"10px 22px",borderRadius:999,border:"none",background:"linear-gradient(135deg,#2563eb,#7c3aed)",color:"#fff",fontWeight:900,cursor:"pointer",boxShadow:"0 12px 30px rgba(37,99,235,0.45)"},children:he?"Saving...":"Add Comment"})})]}),a.jsx("div",{style:{marginTop:18,display:"flex",flexDirection:"column",gap:14},children:X.length===0?a.jsx("div",{style:{textAlign:"center",padding:18,color:"#64748b",background:"#ffffff",borderRadius:18},children:"No teacher comments yet"}):X.map(P=>{var ae;return a.jsxs("div",{style:{display:"flex",gap:12},children:[a.jsx("div",{style:{width:44,height:44,borderRadius:"50%",background:"linear-gradient(135deg,#60a5fa,#2563eb)",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:900},children:((ae=P.teacherName)==null?void 0:ae.split(" ").map(Ee=>Ee[0]).join("").slice(0,2).toUpperCase())||"T"}),a.jsxs("div",{style:{flex:1,background:"#ffffff",padding:14,borderRadius:18,boxShadow:"0 8px 24px rgba(0,0,0,0.08)"},children:[a.jsx("div",{style:{fontWeight:800,color:"#1e293b"},children:P.teacherName}),a.jsx("div",{style:{marginTop:6},children:P.note}),a.jsx("div",{style:{marginTop:6,fontSize:12,color:"#64748b",textAlign:"right"},children:new Date(P.createdAt).toLocaleString()})]})]},P.id)})})]})]})}),y==="attendance"&&$&&a.jsxs("div",{style:{padding:30,background:"radial-gradient(circle at top,#eef2ff,#f8fafc)",borderRadius:26,fontFamily:"Inter, system-ui"},children:[a.jsx("div",{style:{display:"flex",justifyContent:"center",gap:16,marginBottom:32},children:["daily","weekly","monthly"].map(P=>a.jsx("button",{onClick:()=>de(P),style:{padding:"12px 28px",borderRadius:999,border:"none",fontWeight:800,fontSize:13,letterSpacing:1,cursor:"pointer",background:Oe===P?"linear-gradient(135deg,#4f46e5,#2563eb)":"rgba(255,255,255,.8)",color:Oe===P?"#fff":"#1f2937",boxShadow:Oe===P?"0 5px 5px rgba(79,70,229,.45)":"0 5px 5px rgba(0,0,0,.08)",transition:"all .3s ease"},children:P.toUpperCase()},P))}),Object.entries(U).filter(([P])=>pe==="All"||P===pe).map(([P,ae])=>{var Qe;const Ee=new Date().toDateString(),Te=ae.filter($e=>{var Le,ze,lt,At;return((ze=(Le=new Date($e.date)).getWeek)==null?void 0:ze.call(Le))===((At=(lt=new Date).getWeek)==null?void 0:At.call(lt))}),Me=ae.filter($e=>new Date($e.date).getMonth()===new Date().getMonth()),qe=Oe==="daily"?ae.filter($e=>new Date($e.date).toDateString()===Ee):Oe==="weekly"?Te:Me,Xe=xe(qe),Fe=`${Oe}-${P}`;return a.jsxs("div",{onClick:()=>ve(Fe),style:{cursor:"pointer",background:"linear-gradient(180deg,rgba(255,255,255,.95),rgba(255,255,255,.85))",backdropFilter:"blur(14px)",borderRadius:26,padding:26,marginBottom:26,boxShadow:"0 10px 10px rgba(0,0,0,.12)",position:"relative",overflow:"hidden"},children:[a.jsx("div",{style:{position:"absolute",inset:0,background:"radial-gradient(circle at top left,rgba(99,102,241,.15),transparent 60%)",pointerEvents:"none"}}),a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:18},children:[a.jsxs("div",{children:[a.jsxs("h3",{style:{margin:0,fontSize:20,fontWeight:900,color:"#1e3a8a"},children:[" ",yN(P)]}),a.jsxs("p",{style:{margin:"6px 0 0",fontSize:13,color:"#64748b"},children:[" ",(Qe=ae[0])==null?void 0:Qe.teacherName]})]}),a.jsxs("div",{style:{padding:"8px 16px",borderRadius:999,fontSize:13,fontWeight:900,background:Xe>=75?"linear-gradient(135deg,#22c55e,#16a34a)":Xe>=50?"linear-gradient(135deg,#facc15,#eab308)":"linear-gradient(135deg,#ef4444,#dc2626)",color:"#fff",boxShadow:"0 10px 25px rgba(0,0,0,.25)"},children:[Xe,"%"]})]}),a.jsx("div",{onClick:()=>ve(Fe),style:{height:16,background:"#e5e7eb",borderRadius:999,cursor:"pointer",overflow:"hidden",marginBottom:10},children:a.jsx("div",{style:{height:"100%",width:`${Xe}%`,background:Xe>=75?"linear-gradient(90deg,#22c55e,#16a34a)":Xe>=50?"linear-gradient(90deg,#facc15,#eab308)":"linear-gradient(90deg,#ef4444,#dc2626)",transition:"width .5s cubic-bezier(.4,0,.2,1)"}})}),a.jsxs("div",{style:{fontSize:12,fontWeight:700,color:"#475569",marginBottom:12,letterSpacing:.6},children:["CLICK BAR TO VIEW ",Oe.toUpperCase()," DETAILS"]}),Ue[Fe]&&a.jsx("div",{style:{marginTop:14,background:"#f1f5f9",borderRadius:18,padding:14},children:qe.map(($e,Le)=>a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 8px",borderBottom:Le!==qe.length-1?"1px solid #e5e7eb":"none"},children:[a.jsx("div",{style:{display:"flex",flexDirection:"column"},children:a.jsxs("span",{style:{fontSize:13,color:"#1f2937"},children:[" ",new Date($e.date).toDateString()]})}),a.jsx("span",{style:{padding:"6px 14px",borderRadius:999,fontSize:12,fontWeight:900,background:$e.status==="present"?"#dcfce7":$e.status==="late"?"#fef3c7":"#fee2e2",color:$e.status==="present"?"#166534":$e.status==="late"?"#92400e":"#991b1b"},children:$e.status.toUpperCase()})]},Le))})]},P)})]}),y==="performance"&&a.jsxs("div",{style:{position:"relative",paddingBottom:"70px",background:"#f8fafc"},children:[a.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"40px",marginBottom:"25px",borderBottom:"2px solid #e5e7eb",paddingBottom:"8px"},children:["semester1","semester2"].map(P=>{const ae=Rt===P;return a.jsxs("button",{onClick:()=>Xt(P),style:{background:"none",border:"none",cursor:"pointer",fontSize:"16px",fontWeight:"800",color:ae?"#2563eb":"#64748b",paddingBottom:"10px",position:"relative"},children:[P==="semester1"?"Semester 1":"Semester 2",ae&&a.jsx("span",{style:{position:"absolute",bottom:"-2px",left:0,width:"100%",height:"4px",background:"linear-gradient(135deg,#4b6cb7,#1e40af)",borderRadius:"6px"}})]},P)})}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"20px",padding:"20px"},children:Et?a.jsx("div",{style:{textAlign:"center",gridColumn:"1 / -1",padding:"30px"},children:"Loading performance..."}):Object.keys(z||{}).length===0?a.jsx("div",{style:{textAlign:"center",padding:"30px",borderRadius:"18px",background:"#ffffff",color:"#475569",fontSize:"16px",fontWeight:"600",boxShadow:"0 10px 25px rgba(0,0,0,0.08)",gridColumn:"1 / -1"},children:" No Performance Records"}):Object.entries(z).map(([P,ae],Ee)=>{const Te=ae==null?void 0:ae[Rt];if(!Te)return null;const Me=Te.assessments||{},qe=Object.values(Me).reduce((Le,ze)=>Le+(ze.score||0),0),Xe=Object.values(Me).reduce((Le,ze)=>Le+(ze.max||0),0),Fe=Xe?qe/Xe*100:0,Qe=Fe>=75?"#16a34a":Fe>=50?"#f59e0b":"#dc2626",$e=P.replace("course_","").replace(/_/g," ").toUpperCase();return a.jsxs("div",{style:{padding:"18px",borderRadius:"20px",background:"#ffffff",boxShadow:"0 12px 30px rgba(0,0,0,0.08)"},children:[a.jsx("div",{style:{fontSize:"16px",fontWeight:"800",marginBottom:"14px",color:"#2563eb",textAlign:"center"},children:$e}),a.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"16px"},children:a.jsx("div",{style:{width:"90px",height:"90px",borderRadius:"50%",background:`conic-gradient(${Qe} ${Fe*3.6}deg, #e5e7eb 0deg)`,display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsxs("div",{style:{width:"66px",height:"66px",borderRadius:"50%",background:"#fff",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[a.jsx("strong",{style:{color:Qe},children:qe}),a.jsxs("span",{style:{fontSize:"11px"},children:["/ ",Xe]})]})})}),Object.entries(Me).map(([Le,ze])=>a.jsxs("div",{style:{marginBottom:"10px"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"13px",fontWeight:"600"},children:[a.jsx("span",{children:ze.name}),a.jsxs("span",{children:[ze.score," / ",ze.max]})]}),a.jsx("div",{style:{height:"6px",borderRadius:"999px",background:"#e5e7eb",marginTop:"5px"},children:a.jsx("div",{style:{width:`${ze.score/ze.max*100}%`,height:"100%",background:Qe}})})]},Le)),a.jsx("div",{style:{marginTop:"10px",textAlign:"center",fontWeight:"700",color:Qe},children:Fe>=75?"Excellent":Fe>=50?"Good":"Needs Improvement"}),a.jsxs("div",{style:{marginTop:"6px",textAlign:"center",fontSize:"12px",color:"#64748b"},children:[" ",ae.teacherName||Te.teacherName||"N/A"]})]},`${P}-${Ee}`)})})]})]}),!se&&a.jsx("div",{onClick:()=>E(!0),style:{position:"fixed",bottom:"20px",right:"20px",width:"60px",height:"60px",background:"linear-gradient(135deg, #833ab4, #0259fa, #459afc)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",cursor:"pointer",zIndex:1e3,boxShadow:"0 8px 18px rgba(0,0,0,0.25)",transition:"transform 0.2s ease"},children:a.jsx(Fp,{size:30})}),se&&$&&a.jsxs("div",{style:{position:"fixed",bottom:"20px",right:"20px",width:"360px",height:"480px",background:"#fff",borderRadius:"16px",boxShadow:"0 12px 30px rgba(0,0,0,0.25)",zIndex:2e3,display:"flex",flexDirection:"column",overflow:"hidden"},children:[a.jsxs("div",{style:{padding:"14px",borderBottom:"1px solid #eee",display:"flex",justifyContent:"space-between",alignItems:"center",background:"#fafafa"},children:[a.jsx("strong",{children:$.name}),a.jsxs("div",{style:{display:"flex",gap:"10px"},children:[a.jsx("button",{onClick:()=>{E(!1);const P=gc(M,$.userId);nn("/all-chat",{state:{user:$,chatId:P,tab:"student"}})},style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px"},children:""}),a.jsx("button",{onClick:()=>E(!1),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:""})]})]}),a.jsxs("div",{style:{flex:1,padding:"12px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"6px",background:"#f9f9f9"},children:[W.length===0?a.jsxs("p",{style:{textAlign:"center",color:"#aaa"},children:["Start chatting with ",$.name]}):W.map(P=>{const ae=String(P.senderId)===String(B==null?void 0:B.userId);return a.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:ae?"flex-end":"flex-start",marginBottom:10},children:a.jsxs("div",{style:{maxWidth:"70%",background:ae?"#4facfe":"#fff",color:ae?"#fff":"#000",padding:"10px 14px",borderRadius:18,borderTopRightRadius:ae?0:18,borderTopLeftRadius:ae?18:0,boxShadow:"0 1px 3px rgba(0,0,0,0.1)",wordBreak:"break-word",cursor:"default",position:"relative"},children:[P.text," ",P.edited&&a.jsx("small",{style:{fontSize:10},children:" (edited)"}),a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:6,marginTop:6,fontSize:11,color:ae?"#fff":"#888"},children:[a.jsx("span",{style:{marginRight:6,fontSize:11,opacity:.9},children:wN(P.timeStamp)}),a.jsx("span",{children:vN(P.timeStamp)}),ae&&!P.deleted&&a.jsxs("span",{style:{display:"flex",gap:0,alignItems:"center"},children:[a.jsx(Io,{size:12,color:ae?"#fff":"#888",style:{opacity:.85,marginLeft:6}}),P.seen&&a.jsx(Io,{size:12,color:ae?"#f3f7f8":"#ccc",style:{marginLeft:2,opacity:.95}})]})]})]})},P.messageId||P.id)}),a.jsx("div",{ref:re})]}),a.jsxs("div",{style:{padding:"10px",borderTop:"1px solid #eee",display:"flex",gap:"8px",background:"#fff"},children:[a.jsx("input",{value:ce,onChange:P=>H(P.target.value),placeholder:"Type a message...",style:{flex:1,padding:"10px 14px",borderRadius:"25px",border:"1px solid #ccc",outline:"none"},onKeyDown:P=>{P.key==="Enter"&&Be()}}),a.jsx("button",{onClick:()=>Be(),style:{width:45,height:45,borderRadius:"50%",background:"#4facfe",border:"none",color:"#fff",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},children:a.jsx(Gv,{})})]})]})]})]})]})]})}const SN="https://gojo-teacher-web.onrender.com/api",Mn="https://ethiostore-17d9f-default-rtdb.firebaseio.com";function CN(){const[t,e]=g.useState(window.innerWidth>600),[n,r]=g.useState(null),[s,i]=g.useState([]),[o,c]=g.useState([]),[u,d]=g.useState(""),[f,p]=g.useState([]),[y,k]=g.useState({}),[w,R]=g.useState(!1),[D,S]=g.useState("semester2"),[_,v]=g.useState([]),[L,q]=g.useState(!1),[se,E]=g.useState([]),[x,j]=g.useState(null),[I,N]=g.useState(!1),O=Vn(),[C,V]=g.useState(!1),[_e,Z]=g.useState([]);g.useEffect(()=>{const M=()=>{window.innerWidth<=600?e(!1):e(!0)};return window.addEventListener("resize",M),M(),()=>window.removeEventListener("resize",M)},[]),g.useEffect(()=>{const M=JSON.parse(localStorage.getItem("teacher"));if(!M){O("/login");return}r(M)},[O]);const Se=n==null?void 0:n.userId;g.useEffect(()=>{n&&ge(n)},[n]),g.useEffect(()=>{if(!u)return;(async()=>{try{const z=await ee.get(`${Mn}/ClassMarks/${u}.json`),ne=s.find(de=>de.id===u);if(!ne)return;const ue=o.filter(de=>de.grade===ne.grade&&de.section===ne.section),Ce={};let Oe=[];ue.forEach(de=>{var Ae,Ue;const pe=(Ue=(Ae=z.data)==null?void 0:Ae[de.id])==null?void 0:Ue[D];pe!=null&&pe.assessments?(Ce[de.id]=pe.assessments,Oe.length||(Oe=Object.values(pe.assessments))):Ce[de.id]={}}),k(Ce),p(Oe.map(de=>({name:de.name,max:de.max}))),R(Oe.length>0)}catch(z){console.error("Error loading marks:",z),R(!1),k({})}})()},[u,s,o,D]),g.useEffect(()=>{if(!n)return;(async()=>{try{const[z,ne,ue]=await Promise.all([ee.get(`${Mn}/TeacherAssignments.json`),ee.get(`${Mn}/Courses.json`),ee.get(`${Mn}/Teachers.json`)]),Ce=Object.entries(ue.data||{}).find(([Ae,Ue])=>Ue.userId===Se);if(!Ce)return;const Oe=Ce[0],de=Object.values(z.data||{}).filter(Ae=>Ae.teacherId===Oe).map(Ae=>Ae.courseId),pe=Object.entries(ne.data||{}).filter(([Ae])=>de.includes(Ae)).map(([Ae,Ue])=>({id:Ae,...Ue}));i(pe)}catch(z){console.error("Error fetching courses:",z)}})()},[n,Se]),g.useEffect(()=>{if(!Se)return;(async()=>{try{const[z,ne]=await Promise.all([ee.get(`${Mn}/Students.json`),ee.get(`${Mn}/Users.json`)]),ue=z.data||{},Ce=ne.data||{},Oe=Object.entries(ue).map(([de,pe])=>{var Ae,Ue;return{id:de,...pe,name:((Ae=Ce==null?void 0:Ce[pe.userId])==null?void 0:Ae.name)||"Unknown",profileImage:((Ue=Ce==null?void 0:Ce[pe.userId])==null?void 0:Ue.profileImage)||"/default-profile.png"}});c(Oe)}catch(z){console.error("Error fetching students:",z),c([])}})()},[Se]),g.useEffect(()=>{u&&(p([]),R(!1),k({}))},[u]);const X=()=>p(M=>[...M,{name:"",max:""}]),Y=(M,z,ne)=>{const ue=[...f];ue[M][z]=ne,p(ue)},ie=M=>p(z=>z.filter((ne,ue)=>ue!==M)),G=async()=>{if(f.reduce((z,ne)=>z+Number(ne.max||0),0)!==100){alert("Total MAX must be exactly 100");return}const M={};f.forEach((z,ne)=>{M[`a${ne+1}`]={name:z.name,max:Number(z.max),score:0}});try{const z=s.find(Ce=>Ce.id===u);if(!z)return;const ne=o.filter(Ce=>Ce.grade===z.grade&&Ce.section===z.section);await Promise.all(ne.map(Ce=>ee.put(`${Mn}/ClassMarks/${u}/${Ce.id}/${D}.json`,{teacherName:n.name,assessments:M})));const ue={};ne.forEach(Ce=>{ue[Ce.id]=M}),k(ue),R(!0),alert("Assessment structure saved!")}catch(z){console.error("Error submitting structure:",z),alert("Failed to submit structure")}},he=(M,z,ne)=>{k(ue=>({...ue,[M]:{...ue[M],[z]:{...ue[M][z],score:Number(ne)}}}))},Ne=async M=>{try{await ee.put(`${Mn}/ClassMarks/${u}/${M}/${D}.json`,{teacherName:n.name,assessments:y[M]}),alert("Marks saved successfully")}catch(z){console.error("Save failed:",z),alert("Failed to save marks")}},ke=()=>{localStorage.removeItem("teacher"),O("/login")};g.useEffect(()=>{(async()=>{try{let ne=(await ee.get(`${SN}/get_posts`)).data||[];!Array.isArray(ne)&&typeof ne=="object"&&(ne=Object.values(ne));const[ue,Ce]=await Promise.all([ee.get(`${Mn}/School_Admins.json`),ee.get(`${Mn}/Users.json`)]),Oe=ue.data||{},de=Ce.data||{},pe=JSON.parse(localStorage.getItem("teacher")),Ae=$(pe==null?void 0:pe.userId),Ue=We=>{const Et=We.adminId||We.posterAdminId||We.poster||We.admin||null;if(Et&&Oe[Et]){const Ze=Oe[Et],Lt=Ze.userId,Ct=de[Lt]||null,Rt=Ct&&Ct.name||Ze.name||We.adminName||"Admin",Xt=Ct&&Ct.profileImage||Ze.profileImage||We.adminProfile||"/default-profile.png";return{name:Rt,profile:Xt}}return{name:We.adminName||"Admin",profile:We.adminProfile||"/default-profile.png"}},Ge=ne.slice().sort((We,Et)=>(Et.time?new Date(Et.time).getTime():0)-(We.time?new Date(We.time).getTime():0)).filter(We=>We.postId&&!Ae.includes(We.postId)).slice(0,5).map(We=>{var Ze;const Et=Ue(We);return{type:"post",id:We.postId,title:((Ze=We.message)==null?void 0:Ze.substring(0,50))||"Untitled post",adminName:Et.name,adminProfile:Et.profile}});let vt=[];try{const We=pe;if(We&&We.userId){const[Et,Ze]=await Promise.all([ee.get(`${Mn}/Chats.json`),ee.get(`${Mn}/Users.json`)]),Lt=Et.data||{},Rt=Ze.data||{}||{},Xt={};Object.entries(Rt).forEach(([Zt,_n])=>{_n&&_n.userId&&(Xt[_n.userId]=Zt)}),vt=Object.entries(Lt).map(([Zt,_n])=>{const Dn=(_n.unread||{})[We.userId]||0;if(!Dn)return null;const Zn=_n.participants||{},bt=Object.keys(Zn||{}).find(tr=>tr!==We.userId);if(!bt)return null;let er=bt,Ft=Rt[er];if(!Ft){const tr=Xt[bt];tr&&(er=tr,Ft=Rt[tr])}Ft||(Ft={userId:bt,name:bt,profileImage:"/default-profile.png"});const hr={pushKey:er,userId:Ft.userId||bt,name:Ft.name||Ft.username||bt,profileImage:Ft.profileImage||Ft.profile||"/default-profile.png"},Tr=_n.lastMessage||{};return{type:"message",chatId:Zt,displayName:hr.name,profile:hr.profileImage,lastMessageText:Tr.text||"",lastMessageTime:Tr.timeStamp||Tr.time||null,unreadForMe:Dn}}).filter(Boolean).sort((Zt,_n)=>(_n.lastMessageTime||0)-(Zt.lastMessageTime||0))}}catch(We){console.error("Error fetching message notifications:",We)}v([...Ge,...vt]),E(vt)}catch(z){console.error("Error fetching notifications:",z)}})()},[]);const ge=async(M=n)=>{try{const z=M||JSON.parse(localStorage.getItem("teacher"));if(!z||!z.userId){Z([]);return}const[ne,ue]=await Promise.all([ee.get(`${Mn}/Chats.json`),ee.get(`${Mn}/Users.json`)]),Ce=ne.data||{},de=ue.data||{}||{},pe={};Object.entries(de).forEach(([Ue,Ge])=>{Ge&&Ge.userId&&(pe[Ge.userId]=Ue)});const Ae=Object.entries(Ce).map(([Ue,Ge])=>{const We=(Ge.unread||{})[z.userId]||0;if(!We)return null;const Et=Ge.participants||{},Ze=Object.keys(Et||{}).find(Zt=>Zt!==z.userId);if(!Ze)return null;let Lt=Ze,Ct=de[Lt];if(!Ct){const Zt=pe[Ze];Zt&&(Lt=Zt,Ct=de[Zt])}Ct||(Ct={userId:Ze,name:Ze,profileImage:"/default-profile.png"});const Rt={pushKey:Lt,userId:Ct.userId||Ze,name:Ct.name||Ct.username||Ze,profileImage:Ct.profileImage||Ct.profile||"/default-profile.png"},Xt=Ge.lastMessage||{};return{chatId:Ue,contact:Rt,displayName:Rt.name,profile:Rt.profileImage,lastMessageText:Xt.text||"",lastMessageTime:Xt.timeStamp||Xt.time||null,unreadForMe:We}}).filter(Boolean).sort((Ue,Ge)=>(Ge.lastMessageTime||0)-(Ue.lastMessageTime||0));Z(Ae)}catch(z){console.error("Error fetching conversations:",z),Z([])}},B=se.reduce((M,z)=>M+(z.unreadForMe||0),0),me=M=>{!n||!M||(De(n.userId,M),v(z=>z.filter(ne=>ne.id!==M)),q(!1))};function $(M){return JSON.parse(localStorage.getItem(`seen_posts_${M}`))||[]}function De(M,z){const ne=$(M);ne.includes(z)||localStorage.setItem(`seen_posts_${M}`,JSON.stringify([...ne,z]))}const te=g.useRef(null),[be,W]=g.useState(!1),[oe,ce]=g.useState(!1),H=()=>{const M=te.current;if(!M)return;const{scrollLeft:z,scrollWidth:ne,clientWidth:ue}=M;W(z>8),ce(z+ue<ne-8)};g.useEffect(()=>{const M=te.current;if(!M)return;H();const z=()=>H(),ne=()=>H();return M.addEventListener("scroll",z,{passive:!0}),window.addEventListener("resize",ne),()=>{M.removeEventListener("scroll",z),window.removeEventListener("resize",ne)}},[w,f.length]),g.useEffect(()=>{const M="responsive-marks-table-style";if(document.getElementById(M))return;const z=document.createElement("style");z.id=M,z.innerHTML=`
      @media (max-width: 600px) {
        .google-main {
          margin-left: 0 !important;
          padding-left: 0 !important;
          width: 100vw !important;
          max-width: 100vw !important;
          overflow-x: auto !important;
        }
        .marks-table-wrapper {
          width: 100vw !important;
          max-width: 100vw !important;
          overflow-x: auto !important;
          padding: 0 2vw !important;
        }
        .marks-table {
          min-width: 600px !important;
          width: auto !important;
          max-width: 100vw !important;
          table-layout: auto !important;
          overflow-x: auto !important;
        }
        .marks-table th, .marks-table td {
          font-size: 12px !important;
          padding: 8px !important;
          white-space: normal !important;
        }
        .marks-table td input {
          min-width: 40px;
          width: 100%;
          font-size: 12px;
          padding: 8px;
        }
      }
    `,document.head.appendChild(z)},[]);const re=()=>{const z=[["Student",...f.map(ne=>`${ne.name} (${ne.max})`),"Total","Grade"]];return Object.entries(y).forEach(([ne,ue])=>{const Ce=o.find(Ae=>Ae.id===ne)||{name:ne},Oe=Object.values(ue).map(Ae=>Ae.score!=null?Ae.score:""),de=Object.values(ue).reduce((Ae,Ue)=>Ae+(Ue.score||0),0),pe=de>=90?"A":de>=80?"B":de>=70?"C":de>=60?"D":"F";z.push([Ce.name,...Oe,de,pe])}),z},le=(M="marks.xls")=>{const z=re();let ne="<table border=1>";z.forEach(Oe=>{ne+="<tr>"+Oe.map(de=>`<td>${String(de??"").replace(/</g,"&lt;")}</td>`).join("")+"</tr>"}),ne+="</table>";const ue="data:application/vnd.ms-excel;charset=utf-8,"+encodeURIComponent(ne),Ce=document.createElement("a");Ce.href=ue,Ce.setAttribute("download",M),document.body.appendChild(Ce),Ce.click(),document.body.removeChild(Ce)};return a.jsxs("div",{className:"dashboard-page",children:[a.jsxs("nav",{className:"top-navbar",children:[window.innerWidth<=600&&!t&&a.jsx("button",{className:"sidebar-arrow-btn",style:{position:"fixed",left:0,top:180,transform:"none",zIndex:1300,background:"#fff",border:"none",borderRadius:"0 8px 8px 0",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",padding:8,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:()=>e(!0),"aria-label":"Open sidebar menu",children:a.jsx(us,{size:22})}),a.jsx("h2",{children:"Gojo Dashboard"}),a.jsxs("div",{className:"nav-right",children:[a.jsxs("div",{className:"icon-circle",style:{position:"relative"},children:[a.jsxs("div",{onClick:()=>q(!L),style:{cursor:"pointer",position:"relative"},"aria-label":"Show notifications",tabIndex:0,role:"button",onKeyPress:M=>{M.key==="Enter"&&q(!L)},children:[a.jsx(gs,{size:24}),_.length+B>0&&a.jsx("span",{style:{position:"absolute",top:-5,right:-5,background:"red",color:"white",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:_.length+B})]}),L&&a.jsxs(a.Fragment,{children:[a.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.08)",zIndex:1999},onClick:()=>q(!1)}),a.jsxs("div",{className:"notification-popup",style:typeof window<"u"&&window.innerWidth<=600?{position:"fixed",left:"50%",top:"8%",transform:"translate(-50%, 0)",width:"90vw",maxWidth:340,zIndex:2e3,background:"#fff",borderRadius:12,boxShadow:"0 2px 16px rgba(0,0,0,0.18)",maxHeight:"70vh",overflowY:"auto",padding:12}:{position:"absolute",top:30,right:0,width:300,maxHeight:400,overflowY:"auto",background:"#fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",borderRadius:8,zIndex:100},children:[_.length>0&&_.map((M,z)=>M.type==="post"?a.jsxs("div",{onClick:()=>me(M.id),style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:M.adminProfile,alt:M.adminName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:M.adminName}),a.jsx("p",{style:{margin:0,fontSize:12},children:M.title})]})]},M.id||z):null),B>0&&_e.filter(M=>M.unreadForMe>0).map((M,z)=>a.jsxs("div",{onClick:()=>{q(!1),O("/all-chat")},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:M.profile||"/default-profile.png",alt:M.displayName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:M.displayName}),a.jsx("p",{style:{margin:0,fontSize:12,color:"#0b78f6"},children:"New message"})]})]},M.chatId||z)),_.length===0&&B===0&&a.jsx("div",{style:{padding:15},children:"No notifications"})]})]})]}),a.jsx("div",{className:"icon-circle",style:{position:"relative",marginLeft:12},children:a.jsxs("div",{onClick:()=>O("/all-chat"),style:{cursor:"pointer",position:"relative"},children:[a.jsx(ms,{size:22}),B>0&&a.jsx("span",{style:{position:"absolute",top:-6,right:-6,background:"#f60b0b",color:"#fff",borderRadius:"50%",minWidth:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 6px"},children:B})]})}),a.jsx("div",{className:"icon-circle",onClick:()=>O("/settings"),children:a.jsx(Ir,{})}),a.jsx("img",{src:(n==null?void 0:n.profileImage)||"/default-profile.png",alt:"profile"})]})]}),a.jsxs("div",{className:"google-dashboard",children:[window.innerWidth<=600&&t&&a.jsx("div",{className:"sidebar-overlay visible",onClick:()=>e(!1),style:{display:"block"}}),a.jsxs("div",{className:`google-sidebar${t?" open":""}`,style:window.innerWidth<=600?{position:"fixed",top:64,left:t?0:"-220px",width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",zIndex:1200,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto",transition:"left 0.25s cubic-bezier(.4,0,.2,1)"}:{position:"fixed",top:64,left:0,width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.04)",zIndex:900,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto"},children:[n&&a.jsxs("div",{className:"sidebar-profile",children:[a.jsx("div",{className:"sidebar-img-circle",children:a.jsx("img",{src:n.profileImage||"/default-profile.png",alt:"profile"})}),a.jsx("h3",{children:n.name}),a.jsx("p",{children:n.username})]}),a.jsxs("div",{className:"sidebar-menu",children:[a.jsxs(ye,{className:"sidebar-btn",to:"/dashboard",children:[a.jsx(Hr,{})," Home"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/students",children:[a.jsx(Ut,{})," Students"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/admins",children:[a.jsx(Ut,{})," Admins"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/parents",children:[a.jsx(Wr,{})," Parents"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/marks",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[a.jsx(lr,{})," Marks"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/attendance",children:[a.jsx(xs,{})," Attendance"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/schedule",children:[a.jsx(Ur,{})," Schedule"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/lesson-plan",children:[a.jsx(ys,{})," Lesson Plan"]}),a.jsxs("button",{className:"sidebar-btn logout-btn",onClick:ke,children:[a.jsx(Vr,{})," Logout"]})]})]}),a.jsx("div",{className:"google-main",style:window.innerWidth<=600?{width:"100vw",maxWidth:"100vw",marginLeft:0,paddingLeft:0}:{textAlign:"left",marginLeft:200,paddingLeft:0},children:a.jsxs("div",{className:"main-inner",children:[a.jsx("h2",{style:{textAlign:"center",marginBottom:"35px",color:"#1e3a8a",fontSize:"36px",fontWeight:"700",letterSpacing:"1px"},children:"Marks Entry Dashboard"}),a.jsxs("div",{style:{marginBottom:"30px",display:"flex",justifyContent:"center",alignItems:"center",gap:"15px"},children:[a.jsx("label",{style:{fontWeight:"600",color:"#374151",fontSize:"16px"},children:"Select Course:"}),a.jsxs("select",{value:u,onChange:M=>d(M.target.value),style:{padding:"12px 18px",borderRadius:"12px",border:"1px solid #cbd5e1",background:"#fff",minWidth:"300px",fontSize:"15px",fontWeight:"500",boxShadow:"0 6px 15px rgba(0,0,0,0.08)",transition:"0.3s all"},children:[a.jsx("option",{value:"",children:"-- Select Course --"}),s.map(M=>a.jsxs("option",{value:M.id,children:[M.subject," - Grade ",M.grade," Section ",M.section]},M.id))]})]}),u&&a.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"40px",marginBottom:"35px",borderBottom:"2px solid #c7d2fe",paddingBottom:"10px"},children:["semester1","semester2"].map(M=>{const z=D===M;return a.jsxs("button",{onClick:()=>{S(M),R(!1),p([]),k({})},style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px",fontWeight:"700",letterSpacing:"1px",color:z?"#1e40af":"#6b7280",paddingBottom:"12px",position:"relative",transition:"0.3s all"},children:[M==="semester1"?"Semester 1":"Semester 2",z&&a.jsx("span",{style:{position:"absolute",left:0,bottom:"-2px",width:"100%",height:"4px",borderRadius:"6px",background:"linear-gradient(135deg, #4b6cb7, #1e40af)"}})]},M)})}),w&&a.jsxs("div",{style:{display:"flex",gap:"16px",marginBottom:"30px"},children:[a.jsxs("button",{style:{marginBottom:"0px",padding:"10px 18px",background:"linear-gradient(135deg, #f59e0b, #d97706)",color:"#fff",borderRadius:"12px",border:"none",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",boxShadow:"0 8px 20px rgba(0,0,0,0.15)",transition:"0.3s all"},onClick:()=>{R(!1),k({})},children:[a.jsx(Fj,{})," Edit Assessment Structure"]}),a.jsxs("button",{onClick:()=>le(),style:{padding:"10px 16px",background:"#28a745",color:"#fff",border:"none",borderRadius:"8px",fontWeight:600,display:"flex",alignItems:"center",marginLeft:"0px",gap:8,boxShadow:"0 2px 8px 0 rgba(40,167,69,.07)",cursor:"pointer"},title:"Download as Excel",children:[a.jsx(zj,{})," Download Excel"]})]}),u&&!w&&a.jsxs("div",{style:{backdropFilter:"blur(15px)",background:"rgba(255, 255, 255, 0.85)",padding:"30px",borderRadius:"20px",boxShadow:"0 15px 30px rgba(0,0,0,0.08)",marginBottom:"40px",transition:"all 0.3s ease"},children:[a.jsx("h3",{style:{marginBottom:"25px",color:"#1f2937",fontWeight:"600",fontSize:"20px"},children:"Assessment Structure"}),f.map((M,z)=>a.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"18px",alignItems:"center"},children:[a.jsx("input",{placeholder:"Assessment Name",value:M.name,onChange:ne=>Y(z,"name",ne.target.value),style:{flex:2,padding:"12px 14px",borderRadius:"12px",border:"1px solid #d1d5db",outline:"none",boxShadow:"inset 0 3px 6px rgba(0,0,0,0.06)",fontWeight:"500"}}),a.jsx("input",{type:"number",placeholder:"Max",value:M.max,onChange:ne=>Y(z,"max",ne.target.value),style:{flex:1,padding:"12px 14px",borderRadius:"12px",border:"1px solid #d1d5db",outline:"none",boxShadow:"inset 0 3px 6px rgba(0,0,0,0.06)",fontWeight:"500"}}),a.jsx("button",{onClick:()=>ie(z),style:{background:"#ef4444",color:"#fff",padding:"12px 14px",borderRadius:"12px",border:"none",cursor:"pointer",boxShadow:"0 6px 15px rgba(0,0,0,0.12)",transition:"0.3s all"},children:a.jsx(pf,{})})]},z)),a.jsxs("div",{style:{display:"flex",gap:"20px",alignItems:"center",marginTop:"20px"},children:[a.jsxs("button",{style:{padding:"12px 20px",borderRadius:"14px",background:"#10b981",color:"#fff",border:"none",cursor:"pointer",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 6px 18px rgba(0,0,0,0.12)",transition:"0.3s all"},onClick:X,children:[a.jsx(qv,{})," Add Assessment"]}),a.jsxs("span",{style:{fontWeight:"600",color:"#374151",fontSize:"16px"},children:["Total Max: ",f.reduce((M,z)=>M+Number(z.max||0),0)," / 100"]})]}),a.jsx("button",{style:{marginTop:"30px",padding:"14px 20px",borderRadius:"16px",background:"linear-gradient(135deg, #4b6cb7, #1e40af)",color:"#fff",border:"none",fontWeight:"600",cursor:"pointer",boxShadow:"0 8px 20px rgba(0,0,0,0.15)",transition:"0.3s all",fontSize:"16px"},onClick:G,children:"Submit Structure"})]}),w&&a.jsx("div",{className:"marks-table-wrapper",ref:te,style:{position:"relative",overflowX:"visible",overflowY:"visible",minHeight:120,width:"100%",maxWidth:"100vw",paddingBottom:32,whiteSpace:"normal"},children:a.jsxs("table",{className:"marks-table",style:{borderCollapse:"separate",borderSpacing:"0 12px",fontSize:"15px",minWidth:0,width:"100%",maxWidth:"100vw",tableLayout:"auto"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:"linear-gradient(135deg, #4b6cb7, #1e3a8a)",color:"#fff",borderRadius:"16px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",textTransform:"uppercase",letterSpacing:"1px",fontWeight:"600",fontSize:"14px"},children:[a.jsx("th",{style:{padding:"16px 20px",textAlign:"left",borderRadius:"16px 0 0 16px",background:"rgba(255,255,255,0.1)"},children:a.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx(Ut,{})," Student"]})}),f.map((M,z)=>a.jsxs("th",{style:{padding:"16px 18px",background:"rgba(255,255,255,0.05)",textAlign:"center",transition:"0.3s all"},children:[M.name," (",M.max,")"]},z)),a.jsx("th",{style:{padding:"16px 18px",background:"rgba(255,255,255,0.05)",textAlign:"center"},children:"Total"}),a.jsx("th",{style:{padding:"16px 18px",background:"rgba(255,255,255,0.05)",textAlign:"center"},children:"Grade"}),a.jsxs("th",{style:{padding:"16px 20px",borderRadius:"0 16px 16px 0",background:"rgba(255,255,255,0.1)",textAlign:"center"},children:[a.jsx(ff,{})," Save"]})]})}),a.jsx("tbody",{children:Object.entries(y).map(([M,z])=>{const ne=Object.values(z).reduce((de,pe)=>de+(pe.score||0),0),ue=ne>=90?"A":ne>=80?"B":ne>=70?"C":ne>=60?"D":"F",Ce=o.find(de=>de.id===M),Oe=ue==="A"?"#16a34a":ue==="B"?"#2563eb":ue==="C"?"#f59e0b":ue==="D"?"#f97316":"#ef4444";return a.jsxs("tr",{style:{background:"#f9fafb",borderRadius:"12px",marginBottom:"10px",transition:"0.3s all",cursor:"pointer"},onMouseEnter:de=>de.currentTarget.style.background="#e0e7ff",onMouseLeave:de=>de.currentTarget.style.background="#f9fafb",children:[a.jsxs("td",{style:{padding:"12px",display:"flex",alignItems:"center",gap:"12px",fontWeight:"600"},children:[a.jsx("div",{style:{width:"45px",height:"45px",borderRadius:"50%",overflow:"hidden",border:"2px solid #4b6cb7"},children:a.jsx("img",{src:(Ce==null?void 0:Ce.profileImage)||"/default-profile.png",alt:Ce==null?void 0:Ce.name,style:{width:"100%",height:"100%",objectFit:"cover"}})}),Ce==null?void 0:Ce.name]}),Object.entries(z).map(([de,pe])=>a.jsx("td",{style:{padding:"12px"},children:a.jsx("input",{type:"number",min:"0",max:pe.max,value:pe.score,onChange:Ae=>he(M,de,Ae.target.value),style:{width:"70px",padding:"8px 12px",borderRadius:"10px",border:"1px solid #cbd5e1",textAlign:"center",boxShadow:"inset 0 3px 6px rgba(0,0,0,0.06)",transition:"0.3s all",fontWeight:"500"}})},de)),a.jsx("td",{style:{padding:"12px",fontWeight:"600"},children:ne}),a.jsx("td",{style:{padding:"12px",fontWeight:"700",color:Oe},children:ue}),a.jsx("td",{style:{padding:"12px"},children:a.jsx("button",{style:{padding:"8px 14px",borderRadius:"12px",background:"#2563eb",color:"#fff",border:"none",cursor:"pointer",transition:"0.3s all"},onClick:()=>Ne(M),onMouseEnter:de=>de.currentTarget.style.background="#1e40af",onMouseLeave:de=>de.currentTarget.style.background="#2563eb",children:a.jsx(ff,{})})})]},M)})})]})})]})})]})]})}const ui="https://ethiostore-17d9f-default-rtdb.firebaseio.com";function jN(){const[t,e]=g.useState(window.innerWidth>600),[n,r]=g.useState([]),[s,i]=g.useState(!0),[o,c]=g.useState(""),[u,d]=g.useState(null),[f,p]=g.useState({}),[y,k]=g.useState(new Date().toISOString().split("T")[0]),[w,R]=g.useState(null),[D,S]=g.useState([]),_=Vn(),[v,L]=g.useState([]),[q,se]=g.useState(!1),[E,x]=g.useState([]),[j,I]=g.useState([]),[N,O]=g.useState(!1);g.useEffect(()=>{const Z=()=>{e(window.innerWidth>600)};return window.addEventListener("resize",Z),Z(),()=>window.removeEventListener("resize",Z)},[]),g.useEffect(()=>{const Z=JSON.parse(localStorage.getItem("teacher"));if(!Z){_("/login");return}d(Z)},[_]),g.useEffect(()=>{if(!u)return;(async()=>{try{const[Se,X,Y]=await Promise.all([ee.get(`${ui}/TeacherAssignments.json`),ee.get(`${ui}/Courses.json`),ee.get(`${ui}/Teachers.json`)]),ie=Object.entries(Y.data||{}).find(([,ke])=>ke.userId===u.userId);if(!ie)return;const G=ie[0],he=Object.values(Se.data||{}).filter(ke=>ke.teacherId===G).map(ke=>ke.courseId),Ne=Object.entries(X.data||{}).filter(([ke])=>he.includes(ke)).map(([ke,ge])=>({id:ke,...ge}));S(Ne),!w&&Ne.length>0&&R(Ne[0])}catch(Se){console.error("Error fetching courses:",Se)}})()},[u]),g.useEffect(()=>{if(!w)return;(async()=>{i(!0);try{const[Se,X]=await Promise.all([ee.get(`${ui}/Students.json`),ee.get(`${ui}/Users.json`)]),Y=Se.data||{},ie=X.data||{},G=Object.entries(Y).filter(([,he])=>he.grade===w.grade&&he.section===w.section).map(([he,Ne])=>{var ke,ge;return{studentId:he,...Ne,name:((ke=ie==null?void 0:ie[Ne.userId])==null?void 0:ke.name)||"Unknown",profileImage:((ge=ie==null?void 0:ie[Ne.userId])==null?void 0:ge.profileImage)||"/default-profile.png"}});r(G),c("")}catch{c("Failed to fetch students. Please try again."),r([])}finally{i(!1)}})()},[w]),g.useEffect(()=>{if(!w)return;(async()=>{try{const Se=await ee.get(`${ui}/Attendance/${w.id}/${y}.json`);p(Se.data||{})}catch{p({})}})()},[w,y]);const C=(Z,Se)=>{p(X=>({...X,[Z]:Se}))},V=async()=>{if(!w){alert("Please select a course");return}try{await ee.put(`${ui}/Attendance/${w.id}/${y}.json`,f),alert("Attendance saved successfully!")}catch{alert("Failed to save attendance")}},_e=()=>{localStorage.removeItem("teacher"),_("/login")};return g.useEffect(()=>{const Z="responsive-attendance-table";if(document.getElementById(Z))return;const Se=document.createElement("style");Se.id=Z,Se.innerHTML=`
      @media (max-width: 600px) {
        .attendance-main-content-responsive {
          margin-left: 0 !important;
          width: 100vw !important;
          max-width: 100vw !important;
          padding: 8px 2vw !important;
          border-radius: 0 !important;
        }
        .attendance-table-wrapper {
          width: 100vw !important;
          max-width: 100vw !important;
          overflow-x: auto !important;
          padding: 0 1vw !important;
          background: #fff !important;
        }
        .attendance-table {
          min-width: 480px !important;
          width: auto !important;
          max-width: 100vw !important;
          table-layout: auto !important;
          overflow-x: auto !important;
          background: #fff !important;
        }
        .attendance-table th, .attendance-table td {
          font-size: 13px !important;
          padding: 7px !important;
          white-space: normal !important;
        }
      }
    `,document.head.appendChild(Se)},[]),a.jsxs("div",{className:"dashboard-page",children:[a.jsxs("nav",{className:"top-navbar",children:[window.innerWidth<=600&&!t&&a.jsx("button",{className:"sidebar-arrow-btn",style:{position:"fixed",left:0,top:180,transform:"none",zIndex:1300,background:"#fff",border:"none",borderRadius:"0 8px 8px 0",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",padding:8,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:()=>e(!0),"aria-label":"Open sidebar menu",children:a.jsx(us,{size:22})}),a.jsx("h2",{children:"Gojo Dashboard"}),a.jsxs("div",{className:"nav-right",children:[a.jsx("div",{className:"icon-circle",onClick:()=>_("/settings"),children:a.jsx(Ir,{})}),a.jsx("img",{src:(u==null?void 0:u.profileImage)||"/default-profile.png",alt:"teacher",className:"profile-img"})]})]}),a.jsxs("div",{className:"google-dashboard",children:[window.innerWidth<=600&&t&&a.jsx("div",{className:"sidebar-overlay visible",onClick:()=>e(!1),style:{display:"block"}}),a.jsxs("div",{className:`google-sidebar${t?" open":""}`,style:window.innerWidth<=600?{position:"fixed",top:54,left:t?0:"-220px",width:200,height:"calc(100vh - 54px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",zIndex:1200,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto",transition:"left 0.25s cubic-bezier(.4,0,.2,1)"}:{position:"fixed",top:64,left:0,width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.04)",zIndex:900,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto"},children:[u&&a.jsxs("div",{className:"sidebar-profile",children:[a.jsx("div",{className:"sidebar-img-circle",children:a.jsx("img",{src:u.profileImage||"/default-profile.png",alt:"profile"})}),a.jsx("h3",{children:u.name}),a.jsx("p",{children:u.username})]}),a.jsxs("div",{className:"sidebar-menu",children:[a.jsxs(ye,{className:"sidebar-btn",to:"/dashboard",children:[a.jsx(Hr,{})," Home"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/students",children:[a.jsx(Ut,{})," Students"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/admins",children:[a.jsx(Ut,{})," Admins"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/parents",children:[a.jsx(Wr,{})," Parents"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/marks",children:[a.jsx(lr,{})," Marks"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/attendance",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[a.jsx(xs,{})," Attendance"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/schedule",children:[a.jsx(Ur,{})," Schedule"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/lesson-plan",children:[a.jsx(ys,{})," Lesson Plan"]}),a.jsxs("button",{className:"sidebar-btn logout-btn",onClick:_e,children:[a.jsx(Vr,{})," Logout"]})]})]}),a.jsxs("div",{className:"attendance-main-content-responsive",style:window.innerWidth<=600?{marginLeft:0,width:"100vw",maxWidth:"100vw",padding:"8px 2vw"}:{marginLeft:220,width:"calc(100vw - 240px)",padding:30},children:[a.jsx("h2",{style:{textAlign:"center",marginBottom:"25px",color:"#333"},children:"Attendance"}),a.jsxs("div",{style:{marginBottom:"20px",display:"flex",alignItems:"center",gap:"15px"},children:[a.jsx("label",{style:{fontWeight:"500",color:"#555"},children:"Select Course:"}),a.jsxs("select",{value:(w==null?void 0:w.id)||"",onChange:Z=>{const Se=D.find(X=>X.id===Z.target.value);R(Se||null)},style:{padding:"8px 12px",borderRadius:"8px",border:"1px solid #ccc",outline:"none",background:"#f9f9f9",minWidth:"200px",fontWeight:"500"},children:[a.jsx("option",{value:"",children:"-- Select Course --"}),D.map(Z=>a.jsxs("option",{value:Z.id,children:[Z.name," - Grade ",Z.grade," Section ",Z.section]},Z.id))]})]}),a.jsxs("div",{style:{marginBottom:"25px",display:"flex",alignItems:"center",gap:"15px"},children:[a.jsx("label",{style:{fontWeight:"500",color:"#555"},children:"Date:"}),a.jsx("input",{type:"date",value:y,onChange:Z=>k(Z.target.value),style:{padding:"8px 12px",borderRadius:"8px",border:"1px solid #ccc",outline:"none",background:"#f9f9f9"}})]}),a.jsx("div",{className:"attendance-table-wrapper",style:{width:"100%",maxWidth:"100vw",overflowX:"auto",marginBottom:20,background:"#fff",borderRadius:12,boxShadow:"0 2px 8px rgba(0,0,0,0.04)"},children:s?a.jsx("p",{children:"Loading students..."}):o?a.jsx("p",{style:{color:"red"},children:o}):a.jsxs("table",{className:"attendance-table",style:{width:"100%",borderCollapse:"collapse",background:"#fff"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:"#4b6cb7",color:"#fff",textAlign:"left"},children:[a.jsx("th",{style:{padding:"12px"},children:"Student"}),a.jsx("th",{style:{padding:"12px",textAlign:"center"},children:"Present"}),a.jsx("th",{style:{padding:"12px",textAlign:"center"},children:"Absent"}),a.jsx("th",{style:{padding:"12px",textAlign:"center"},children:"Late"})]})}),a.jsx("tbody",{children:n.map(Z=>a.jsxs("tr",{style:{borderBottom:"1px solid #eee",transition:"background 0.3s"},onMouseEnter:Se=>Se.currentTarget.style.background="#f9f9f9",onMouseLeave:Se=>Se.currentTarget.style.background="transparent",children:[a.jsxs("td",{style:{padding:"12px",display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",overflow:"hidden",border:"2px solid #4b6cb7"},children:a.jsx("img",{src:Z.profileImage||"/default-profile.png",alt:Z.name,style:{width:"100%",height:"100%",objectFit:"cover"}})}),a.jsx("span",{style:{fontWeight:"500",color:"#333"},children:Z.name})]}),a.jsx("td",{style:{padding:"10px",textAlign:"center"},children:a.jsx("button",{style:{background:f[Z.studentId]==="present"?"#28a745":"#e0e0e0",color:f[Z.studentId]==="present"?"#fff":"#333",padding:"6px 12px",border:"none",borderRadius:"6px",cursor:"pointer",transition:"0.2s"},onClick:()=>C(Z.studentId,"present"),children:"Present"})}),a.jsx("td",{style:{padding:"10px",textAlign:"center"},children:a.jsx("button",{style:{background:f[Z.studentId]==="absent"?"#dc3545":"#e0e0e0",color:f[Z.studentId]==="absent"?"#fff":"#333",padding:"6px 12px",border:"none",borderRadius:"6px",cursor:"pointer",transition:"0.2s"},onClick:()=>C(Z.studentId,"absent"),children:"Absent"})}),a.jsx("td",{style:{padding:"10px",textAlign:"center"},children:a.jsx("button",{style:{background:f[Z.studentId]==="late"?"#ffc107":"#e0e0e0",color:f[Z.studentId]==="late"?"#fff":"#333",padding:"6px 12px",border:"none",borderRadius:"6px",cursor:"pointer",transition:"0.2s"},onClick:()=>C(Z.studentId,"late"),children:"Late"})})]},Z.studentId))})]})}),a.jsx("div",{style:{textAlign:"center"},children:a.jsx("button",{style:{marginTop:"18px",padding:"12px 25px",borderRadius:"10px",background:"#4b6cb7",color:"#fff",fontWeight:"600",border:"none",cursor:"pointer",boxShadow:"0 4px 10px rgba(0,0,0,0.15)",transition:"0.3s"},onClick:V,onMouseEnter:Z=>Z.currentTarget.style.background="#3a539b",onMouseLeave:Z=>Z.currentTarget.style.background="#4b6cb7",children:"Save Attendance"})})]})]})]})}const Uy=(t,e)=>[t,e].sort().join("_"),EN=t=>{if(!t)return"";const e=new Date(t),n=e.getHours().toString().padStart(2,"0"),r=e.getMinutes().toString().padStart(2,"0");return`${n}:${r}`},IN="https://gojo-teacher-web.onrender.com/api",Is="https://ethiostore-17d9f-default-rtdb.firebaseio.com",kN=({admin:t,selected:e,onClick:n})=>a.jsxs("div",{onClick:()=>n(t),style:{width:"100%",borderRadius:"12px",padding:"15px",display:"flex",alignItems:"center",gap:"20px",cursor:"pointer",background:e?"#e0e7ff":"#fff",border:e?"2px solid #4b6cb7":"1px solid #ddd",boxShadow:e?"0 6px 15px rgba(75,108,183,0.3)":"0 4px 10px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},children:[a.jsx("img",{src:t.profileImage||"/default-profile.png",alt:t.name,style:{width:"50px",height:"50px",borderRadius:"50%",objectFit:"cover",border:e?"3px solid #4b6cb7":"3px solid red"}}),a.jsxs("div",{children:[a.jsx("h3",{style:{margin:0},children:t.name}),a.jsx("p",{style:{margin:"4px 0",color:"#555"},children:t.username||t.email})]})]});function NN(){const[t,e]=g.useState(!1),[n,r]=g.useState([]),[s,i]=g.useState(!0),[o,c]=g.useState(""),[u,d]=g.useState(null),[f,p]=g.useState("details"),[y,k]=g.useState(!1),[w,R]=g.useState([]),[D,S]=g.useState(""),_=g.useRef(null),[v,L]=g.useState(null),q=JSON.parse(localStorage.getItem("teacher"))||{},se=String(q.userId||""),[E,x]=g.useState(null),[j,I]=g.useState([]),[N,O]=g.useState(!1),[C,V]=g.useState(null),_e=g.useRef({}),[Z,Se]=g.useState(!1),[X,Y]=g.useState([]),ie=Vn();g.useEffect(()=>{const te=JSON.parse(localStorage.getItem("teacher"));if(!te){ie("/login");return}L(te)},[ie]),g.useEffect(()=>{v&&ke(v)},[v]);const G=()=>{localStorage.removeItem("teacher"),ie("/login")};g.useEffect(()=>{async function te(){try{i(!0);const[be,W]=await Promise.all([ee.get(`${Is}/Users.json`),ee.get(`${Is}/School_Admins.json`)]),oe=be.data||{},ce=W.data||{},H={};Object.entries(ce).forEach(([le,M])=>{M.userId&&(H[M.userId]={...M,adminKey:le})});const re=Object.entries(oe).filter(([le,M])=>{const z=(M.role||M.userType||"").toLowerCase();return z==="admin"||z==="school_admin"||z==="school_admins"}).map(([le,M])=>{const z=H[M.userId];return{adminId:z&&z.adminKey||le,...M,...z?{title:z.title,status:z.status,schoolAdminKey:z.adminKey}:{}}});r(re),c(re.length===0?"No admins found":"")}catch(be){console.error(be),c("Failed to fetch admins")}finally{i(!1)}}te()},[]),g.useEffect(()=>{var te;(te=_.current)==null||te.scrollIntoView({behavior:"smooth"})},[w]),g.useEffect(()=>{if(!se||!E)return;const te=Uy(se,E.userId),be=Ot(Bt,`Chats/${te}/messages`);return yo(be,W=>{const oe=W.val()||{},ce=Object.entries(oe).map(([H,re])=>({id:H,...re,isTeacher:re.senderId===se})).sort((H,re)=>H.timeStamp-re.timeStamp);R(ce),Object.entries(oe).forEach(([H,re])=>{if(re&&!re.seen&&re.receiverId===se){const le=Date.now();Or(Ot(Bt,`Chats/${te}/messages/${H}`),{seen:!0,seenAt:le}).catch(()=>{})}}),Or(Ot(Bt,`Chats/${te}/unread`),{[se]:0}).catch(()=>{})}),()=>P2(be)},[se,E]);const he=async()=>{if(!D.trim()||!u)return;const te=se,be=u.userId,W=Uy(te,be),oe=Date.now(),ce={senderId:te,receiverId:be,type:"text",text:D,imageUrl:null,replyTo:null,seen:!1,edited:!1,deleted:!1,timeStamp:oe};try{await ee.post(`${Is}/Chats/${W}/messages.json`,ce),await ee.patch(`${Is}/Chats/${W}.json`,{participants:{[te]:!0,[be]:!0},lastMessage:{text:D,senderId:te,seen:!1,timeStamp:oe},unread:{[te]:0,[be]:1}}),S("")}catch(H){console.error("Send message error:",H)}};g.useEffect(()=>{(async()=>{try{let W=(await ee.get(`${IN}/get_posts`)).data||[];!Array.isArray(W)&&typeof W=="object"&&(W=Object.values(W));const[oe,ce]=await Promise.all([ee.get(`${Is}/School_Admins.json`),ee.get(`${Is}/Users.json`)]),H=oe.data||{},re=ce.data||{},le=JSON.parse(localStorage.getItem("teacher")),M=Ne(le==null?void 0:le.userId),z=ue=>{const Ce=ue.adminId||ue.posterAdminId||ue.poster||ue.admin||null;if(Ce&&H[Ce]){const Oe=H[Ce],de=Oe.userId,pe=re[de]||null,Ae=pe&&pe.name||Oe.name||ue.adminName||"Admin",Ue=pe&&pe.profileImage||Oe.profileImage||ue.adminProfile||"/default-profile.png";return{name:Ae,profile:Ue}}return{name:ue.adminName||"Admin",profile:ue.adminProfile||"/default-profile.png"}},ne=W.slice().sort((ue,Ce)=>{const Oe=ue.time?new Date(ue.time).getTime():0;return(Ce.time?new Date(Ce.time).getTime():0)-Oe}).filter(ue=>ue.postId&&!M.includes(ue.postId)).slice(0,5).map(ue=>{var Oe;const Ce=z(ue);return{id:ue.postId,title:((Oe=ue.message)==null?void 0:Oe.substring(0,50))||"Untitled post",adminName:Ce.name,adminProfile:Ce.profile}});I(ne)}catch(be){console.error("Error fetching notifications:",be)}})()},[]);function Ne(te){return JSON.parse(localStorage.getItem(`seen_posts_${te}`))||[]}const ke=async(te=v)=>{try{const be=te||JSON.parse(localStorage.getItem("teacher"));if(!be||!be.userId){Y([]);return}const[W,oe]=await Promise.all([ee.get(`${Is}/Chats.json`),ee.get(`${Is}/Users.json`)]),ce=W.data||{},re=oe.data||{}||{},le={};Object.entries(re).forEach(([z,ne])=>{ne&&ne.userId&&(le[ne.userId]=z)});const M=Object.entries(ce).map(([z,ne])=>{const Ce=(ne.unread||{})[be.userId]||0;if(!Ce)return null;const Oe=ne.participants||{},de=Object.keys(Oe||{}).find(vt=>vt!==be.userId);if(!de)return null;let pe=de,Ae=re[pe];if(!Ae){const vt=le[de];vt&&(pe=vt,Ae=re[vt])}Ae||(Ae={userId:de,name:de,profileImage:"/default-profile.png"});const Ue={pushKey:pe,userId:Ae.userId||de,name:Ae.name||Ae.username||de,profileImage:Ae.profileImage||Ae.profile||"/default-profile.png"},Ge=ne.lastMessage||{};return{chatId:z,contact:Ue,displayName:Ue.name,profile:Ue.profileImage,lastMessageText:Ge.text||"",lastMessageTime:Ge.timeStamp||Ge.time||null,unreadForMe:Ce}}).filter(Boolean).sort((z,ne)=>(ne.lastMessageTime||0)-(z.lastMessageTime||0));Y(M)}catch(be){console.error("Error fetching conversations:",be),Y([])}},ge=X.reduce((te,be)=>te+(be.unreadForMe||0),0),[B,me]=kt.useState(window.innerWidth<window.innerHeight),[$,De]=kt.useState(window.innerWidth);return kt.useEffect(()=>{const te=()=>{const be=window.innerWidth;me(be<window.innerHeight),De(be)};return te(),window.addEventListener("resize",te),()=>window.removeEventListener("resize",te)},[]),a.jsxs("div",{className:"dashboard-page",children:[a.jsxs("nav",{className:"top-navbar",children:[a.jsx("h2",{children:"Gojo Dashboard"}),a.jsxs("div",{className:"nav-right",children:[a.jsxs("div",{className:"icon-circle",style:{position:"relative"},children:[a.jsxs("div",{onClick:()=>O(!N),style:{cursor:"pointer",position:"relative"},"aria-label":"Show notifications",tabIndex:0,role:"button",onKeyPress:te=>{te.key==="Enter"&&O(!N)},children:[a.jsx(gs,{size:24}),j.length+ge>0&&a.jsx("span",{style:{position:"absolute",top:-5,right:-5,background:"red",color:"white",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:j.length+ge})]}),N&&a.jsxs(a.Fragment,{children:[a.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.08)",zIndex:1999},onClick:()=>O(!1)}),a.jsxs("div",{className:"notification-popup",style:typeof window<"u"&&window.innerWidth<=600?{position:"fixed",left:"50%",top:"8%",transform:"translate(-50%, 0)",width:"90vw",maxWidth:340,zIndex:2e3,background:"#fff",borderRadius:12,boxShadow:"0 2px 16px rgba(0,0,0,0.18)",maxHeight:"70vh",overflowY:"auto",padding:12}:{position:"absolute",top:30,right:0,width:300,maxHeight:400,overflowY:"auto",background:"#fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",borderRadius:8,zIndex:100},children:[j.length>0&&j.map((te,be)=>a.jsxs("div",{onClick:()=>{ie("/dashboard"),setTimeout(()=>{const W=_e.current[te.id];W&&(W.scrollIntoView({behavior:"smooth",block:"center"}),V(te.id),setTimeout(()=>V(null),3e3))},150),I(W=>W.filter((oe,ce)=>ce!==be)),O(!1)},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:te.adminProfile,alt:te.adminName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:te.adminName}),a.jsx("p",{style:{margin:0,fontSize:12},children:te.title})]})]},te.id||be)),ge>0&&X.filter(te=>te.unreadForMe>0).map((te,be)=>a.jsxs("div",{onClick:()=>{O(!1),ie("/all-chat")},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:te.profile||"/default-profile.png",alt:te.displayName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:te.displayName}),a.jsx("p",{style:{margin:0,fontSize:12,color:"#0b78f6"},children:"New message"})]})]},te.chatId||be)),j.length===0&&ge===0&&a.jsx("div",{style:{padding:15},children:"No notifications"})]})]})]}),a.jsx("div",{className:"icon-circle",style:{position:"relative",marginLeft:12},children:a.jsxs("div",{onClick:()=>ie("/all-chat"),style:{cursor:"pointer",position:"relative"},children:[a.jsx(ms,{size:22}),ge>0&&a.jsx("span",{style:{position:"absolute",top:-6,right:-6,background:"#f60b0b",color:"#fff",borderRadius:"50%",minWidth:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 5px"},children:ge})]})}),a.jsx("div",{className:"icon-circle",onClick:()=>ie("/settings"),children:a.jsx(Ir,{})}),a.jsx("img",{src:(v==null?void 0:v.profileImage)||"/default-profile.png",alt:"teacher",className:"profile-img"})]})]}),a.jsxs("div",{className:"google-dashboard",children:[typeof window<"u"&&window.innerWidth<=600&&!t&&a.jsx("button",{className:"sidebar-arrow-btn",style:{position:"fixed",left:0,top:0,zIndex:1300,background:"#fff",border:"none",borderRadius:"0 8px 8px 0",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",padding:8,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:()=>e(!0),"aria-label":"Open sidebar menu",children:a.jsx(us,{size:22})}),typeof window<"u"&&window.innerWidth<=600&&t&&a.jsx("div",{className:"sidebar-overlay visible",onClick:()=>e(!1),style:{display:"block",position:"fixed",inset:0,background:"rgba(0,0,0,0.35)",zIndex:1200}}),a.jsxs("div",{className:`google-sidebar${typeof window<"u"&&window.innerWidth<=600&&t?" open":""}`,style:typeof window<"u"&&window.innerWidth<=600?{position:"fixed",top:64,left:t?0:"-220px",width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",zIndex:1200,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto",borderRadius:0,transition:"left 0.25s cubic-bezier(.4,0,.2,1)"}:{position:"fixed",top:64,left:0,width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.04)",zIndex:900,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto",borderRadius:0},children:[a.jsx("style",{children:`
            @media (max-width: 600px) {
              .google-sidebar {
                left: -220px;
                transition: left 0.25s cubic-bezier(.4,0,.2,1);
                border-radius: 0 !important;
              }
              .google-sidebar.open {
                left: 0 !important;
                z-index: 1202;
                border-radius: 0 !important;
              }
              .sidebar-overlay {
                display: block;
                position: fixed;
                inset: 0;
                background: rgba(0,0,0,0.35);
                z-index: 1200;
                transition: opacity 0.2s;
              }
              .sidebar-arrow-btn {
                display: flex !important;
              }
            }
          `}),v&&a.jsxs("div",{className:"sidebar-profile",children:[a.jsx("div",{className:"sidebar-img-circle",children:a.jsx("img",{src:v.profileImage||"/default-profile.png",alt:"profile"})}),a.jsx("h3",{children:v.name}),a.jsx("p",{children:v.username})]}),a.jsxs("div",{className:"sidebar-menu",children:[a.jsxs(ye,{className:"sidebar-btn",to:"/dashboard",children:[a.jsx(Hr,{})," Home"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/students",children:[a.jsx(Ut,{})," Students"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/admins",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[a.jsx(Ut,{})," Admins"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/parents",children:[a.jsx(Wr,{})," Parents"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/marks",children:[a.jsx(lr,{})," Marks"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/attendance",children:[a.jsx(xs,{})," Attendance"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/schedule",children:[a.jsx(Ur,{})," Schedule"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/lesson-plan",children:[a.jsx(ys,{})," Lesson Plan"]}),a.jsxs("button",{className:"sidebar-btn logout-btn",onClick:G,children:[a.jsx(Vr,{})," Logout"]})]})]}),a.jsxs("div",{style:{flex:1,display:"flex",justifyContent:"center",padding:"30px"},children:[a.jsxs("div",{className:"admin-list-card-responsive",style:{width:"500px",marginLeft:"30px"},children:[a.jsx("style",{children:`
              @media (max-width: 600px) {
                .admin-list-card-responsive {
                  margin-left: -10px !important;
                  margin-right: auto !important;
                  padding-left: 0 !important;
                  width: 90vw !important;
                  max-width: 90vw !important;
                }
              }
              @media (min-width: 1200px) {
                .admin-list-card-responsive {
                  width: 600px !important;
                  max-width: 600px !important;
                }
              }
              @media (min-width: 1500px) {
                .admin-list-card-responsive {
                  width: 700px !important;
                  max-width: 700px !important;
                }
              }
            `}),a.jsx("h2",{style:{textAlign:"center",marginBottom:"20px"},children:"All Admins"}),s&&a.jsx("p",{children:"Loading admins..."}),o&&a.jsx("p",{style:{color:"red"},children:o}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:n.map(te=>a.jsx(kN,{admin:te,selected:(u==null?void 0:u.adminId)===te.adminId,onClick:be=>{d(be),x(be)}},te.adminId))})]}),u&&a.jsxs("div",{style:{width:B?"100%":"30%",height:B?"100vh":"calc(100vh - 60px)",position:"fixed",right:0,top:B?0:"60px",background:"#fff",boxShadow:B?"0 0 0 rgba(0,0,0,0)":"0 0 15px rgba(0,0,0,0.05)",zIndex:1e3,display:"flex",flexDirection:"column",overflowY:"auto",padding:B?"18px":"25px",transition:"all 0.35s ease"},children:[a.jsx("button",{onClick:()=>d(null),"aria-label":"Close admin details",title:"Close",style:{position:"fixed",top:52,right:16,width:42,height:42,borderRadius:"12px",border:"none",background:"#fff",boxShadow:"0 8px 18px rgba(2,6,23,0.15)",cursor:"pointer",display:"grid",placeItems:"center",zIndex:2e3,fontSize:22,fontWeight:900,color:"#0f172a"},children:""}),a.jsxs("div",{style:{textAlign:"center",marginBottom:"20px"},children:[a.jsx("div",{style:{width:"120px",height:"120px",margin:"0 auto 15px",borderRadius:"50%",overflow:"hidden",border:"4px solid #4b6cb7"},children:a.jsx("img",{src:u.profileImage||"/default-profile.png",alt:u.name,style:{width:"100%",height:"100%",objectFit:"cover"}})}),a.jsx("h2",{children:u.name}),a.jsx("p",{children:u.username})]}),a.jsx("div",{style:{display:"flex",marginBottom:"15px"},children:["details","Plan","Report"].map(te=>a.jsx("button",{onClick:()=>p(te),style:{flex:1,padding:"10px",border:"none",background:"none",cursor:"pointer",fontWeight:"600",color:f===te?"#4b6cb7":"#777",borderBottom:f===te?"3px solid #4b6cb7":"3px solid transparent"},children:te.toUpperCase()},te))}),f==="details"&&u&&a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:28,padding:50,marginLeft:0,marginRight:0,borderRadius:0,background:"linear-gradient(180deg,#eef2ff,#f8fafc)",fontFamily:"Inter, system-ui"},children:a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:24,fontWeight:900,marginBottom:18,marginTop:-30,background:"linear-gradient(90deg,#2563eb,#7c3aed)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Administrator Details"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",columnGap:68,rowGap:14},children:[["Admin ID",u.adminId||u.userId],["Email",u.email],["Phone",u.phone],["Gender",u.gender?u.gender.charAt(0).toUpperCase()+u.gender.slice(1):null],["Title",u.title],["Status",u.status?u.status.charAt(0).toUpperCase()+u.status.slice(1):null]].map(([te,be])=>a.jsxs("div",{style:{padding:18,borderRadius:20,background:"#ffffff",boxShadow:"0 6px 10px rgba(0,0,0,0.08)",marginLeft:-30,marginRight:-30},children:[a.jsx("div",{style:{fontSize:12,fontWeight:700,color:"#000102",textTransform:"uppercase"},children:te}),a.jsx("div",{style:{marginTop:8,fontSize:16,fontWeight:400,color:"#000102"},children:be||""})]},te))})]})}),f==="Plan"&&a.jsx("p",{children:"Plan data here."}),f==="Report"&&a.jsx("p",{children:"Report data here."}),!y&&u&&a.jsx("div",{onClick:()=>k(!0),style:{position:"fixed",bottom:"20px",right:"20px",width:"60px",height:"60px",background:"linear-gradient(135deg, #833ab4, #202ef3, #395a8b)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",cursor:"pointer",zIndex:1e3,boxShadow:"0 8px 18px rgba(0,0,0,0.25)"},children:a.jsx(Fp,{size:30})}),y&&u&&v&&a.jsxs("div",{style:{position:"fixed",bottom:"20px",right:"20px",width:"360px",height:"480px",background:"#fff",borderRadius:"16px",boxShadow:"0 12px 30px rgba(0,0,0,0.25)",zIndex:2e3,display:"flex",flexDirection:"column",overflow:"hidden"},children:[a.jsxs("div",{style:{padding:"14px",borderBottom:"1px solid #eee",display:"flex",justifyContent:"space-between",alignItems:"center",background:"#fafafa"},children:[a.jsx("strong",{children:u.name}),a.jsxs("div",{style:{display:"flex",gap:"10px"},children:[a.jsx("button",{onClick:()=>{k(!1),ie("/all-chat",{state:{contact:u,tab:"admin"}})},style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px"},children:""}),a.jsx("button",{onClick:()=>k(!1),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:""})]})]}),a.jsxs("div",{style:{flex:1,padding:"12px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"6px",background:"#f9f9f9"},children:[w.length===0?a.jsxs("p",{style:{textAlign:"center",color:"#aaa"},children:["Start chatting with ",u.name]}):w.map(te=>a.jsx("div",{style:{display:"flex",flexDirection:te.isTeacher?"row-reverse":"row",alignItems:"flex-end",marginBottom:10},children:a.jsxs("div",{style:{background:te.isTeacher?"#4facfe":"#fff",color:te.isTeacher?"#fff":"#000",padding:"10px 14px",borderRadius:18,maxWidth:"65%",position:"relative",boxShadow:"0 2px 6px rgba(0,0,0,0.05)"},children:[te.text,a.jsxs("div",{style:{fontSize:10,color:"#888",marginTop:4,display:"flex",justifyContent:"flex-end",alignItems:"center",gap:4},children:[EN(te.timeStamp),te.isTeacher&&a.jsx(Io,{size:10,color:te.seen?"#4facfe":"#ccc"})]})]})},te.id)),a.jsx("div",{ref:_})]}),a.jsxs("div",{style:{padding:"10px",borderTop:"1px solid #eee",display:"flex",gap:"8px",background:"#fff"},children:[a.jsx("input",{value:D,onChange:te=>S(te.target.value),placeholder:"Type a message...",style:{flex:1,padding:"10px 14px",borderRadius:"999px",border:"1px solid #ccc",outline:"none"},onKeyDown:te=>{te.key==="Enter"&&he()}}),a.jsx("button",{onClick:he,style:{background:"linear-gradient(135deg, #0751f1, #0e35e4, #0f5afc)",border:"none",borderRadius:"50%",width:"42px",height:"42px",color:"#fff",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px"},children:""})]})]})]})]})]})]})}const TN="https://gojo-teacher-web.onrender.com/api";function RN(){const[t,e]=g.useState(null),[n,r]=g.useState([]),[s,i]=g.useState(""),[o,c]=g.useState(""),[u,d]=g.useState(null),[f,p]=g.useState([]),y=Vn(),[k,w]=g.useState([]),[R,D]=g.useState(!1),[S,_]=g.useState(null),v=g.useRef({}),L=t==null?void 0:t.userId;g.useEffect(()=>{const x=JSON.parse(localStorage.getItem("teacher"));if(!x){y("/login");return}e(x)},[]),g.useEffect(()=>{(async()=>{try{const N=((await ee.get(`${TN}/get_posts`)).data||[]).slice(0,5).map(O=>{var C;return{id:O.postId,title:((C=O.message)==null?void 0:C.substring(0,50))||"Untitled post",adminName:O.adminName||"Admin",adminProfile:O.adminProfile||"/default-profile.png"}});w(N)}catch(j){console.error("Error fetching notifications:",j)}})()},[]);const q=(x,j)=>{_(x);const I=v.current[x];I&&I.scrollIntoView({behavior:"smooth",block:"center"});const N=[...k];N.splice(j,1),w(N),D(!1),setTimeout(()=>_(null),3e3)};g.useEffect(()=>{if(!t)return;async function x(){try{const[j,I,N]=await Promise.all([ee.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Courses.json"),ee.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/TeacherAssignments.json"),ee.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Teachers.json")]),O=Object.entries(N.data||{}).find(([Z,Se])=>Se.userId===t.userId);if(!O)return;const C=O[0],_e=Object.values(I.data||{}).filter(Z=>Z.teacherId===C).map(Z=>({id:Z.courseId,...j.data[Z.courseId]}));r(_e)}catch(j){console.error("Error fetching courses:",j)}}x()},[t]),g.useEffect(()=>{async function x(){try{const j=await ee.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/TeacherPosts.json");p(Object.entries(j.data||{}).map(([I,N])=>({id:I,...N})))}catch(j){console.error(j)}}x()},[]);const se=async()=>{if(!s||!o&&!u){alert("Please select a class and enter a note or upload a file");return}let x="";u&&(x=URL.createObjectURL(u));const j={teacherId:L,courseId:s,text:o,fileUrl:x,createdAt:new Date().toISOString()};try{await ee.post("https://ethiostore-17d9f-default-rtdb.firebaseio.com/TeacherPosts.json",j),alert("Post submitted!"),c(""),d(null),p(I=>[...I,{...j,id:Date.now()}])}catch(I){console.error(I),alert("Failed to submit post")}},E=()=>{localStorage.removeItem("teacher"),y("/login")};return t?a.jsxs("div",{className:"dashboard-page",children:[a.jsxs("nav",{className:"top-navbar",children:[a.jsx("h2",{children:"Gojo Dashboard"}),a.jsxs("div",{className:"nav-search",children:[a.jsx($j,{className:"search-icon"}),a.jsx("input",{type:"text",placeholder:"Search Teacher and Student..."})]}),a.jsxs("div",{className:"nav-right",children:[a.jsxs("div",{className:"icon-circle",children:[a.jsxs("div",{onClick:()=>D(!R),style:{cursor:"pointer",position:"relative"},children:[a.jsx(gs,{size:24}),k.length>0&&a.jsx("span",{style:{position:"absolute",top:-5,right:-5,background:"red",color:"white",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:k.length})]}),R&&a.jsx("div",{style:{position:"absolute",top:30,right:0,width:300,maxHeight:400,overflowY:"auto",background:"#fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",borderRadius:8,zIndex:100},children:k.length>0?k.map((x,j)=>a.jsxs("div",{onClick:()=>{y("/dashboard"),setTimeout(()=>q(x.id,j),100)},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:x.adminProfile,alt:x.adminName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:x.adminName}),a.jsx("p",{style:{margin:0,fontSize:12},children:x.title})]})]},x.id||j)):a.jsx("div",{style:{padding:15},children:"No notifications"})})]}),a.jsx("div",{className:"icon-circle",children:a.jsx(ms,{})}),a.jsx("div",{className:"icon-circle",children:a.jsx(Ir,{})}),a.jsx("img",{src:(t==null?void 0:t.profileImage)||"/default-profile.png",alt:"teacher",className:"profile-img"})]})]}),a.jsxs("div",{className:"google-dashboard",children:[a.jsxs("div",{className:"google-sidebar",children:[a.jsxs("div",{className:"sidebar-profile",children:[a.jsx("div",{className:"sidebar-img-circle",children:a.jsx("img",{src:(t==null?void 0:t.profileImage)||"/default-profile.png",alt:"profile"})}),a.jsx("h3",{children:t==null?void 0:t.name}),a.jsx("p",{children:t==null?void 0:t.username})]}),a.jsxs("div",{className:"sidebar-menu",children:[a.jsxs(ye,{className:"sidebar-btn",to:"/dashboard",children:[a.jsx(Hr,{})," Home"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/notes",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[a.jsx(lr,{})," Notes"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/students",children:[a.jsx(Ut,{})," Students"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/admins",children:[a.jsx(Ut,{})," Admins"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/parents",children:[a.jsx(Wr,{})," Parents"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/marks",children:[a.jsx(lr,{})," Marks"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/attendance",children:[a.jsx(Ut,{})," Attendance"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/schedule",children:[a.jsx(Ut,{})," Schedule"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/lesson-plan",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[a.jsx(lr,{})," Lesson Plan"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/settings",children:[a.jsx(Ir,{})," Settings"]}),a.jsxs("button",{className:"sidebar-btn logout-btn",onClick:E,children:[a.jsx(Vr,{})," Logout"]})]})]}),a.jsxs("div",{style:{marginLeft:"500px",width:"40%",padding:"100px 30px 50px",background:"#f3f4f6",minHeight:"100vh",fontFamily:"'Inter', sans-serif"},children:[a.jsxs("div",{style:{marginBottom:"30px",display:"flex",justifyContent:"space-between",alignItems:"center",background:"linear-gradient(90deg, #e0e7ff, #c7d2fe)",padding:"20px 25px",borderRadius:"18px",boxShadow:"0 5px 20px rgba(0,0,0,0.08)"},children:[a.jsx("h2",{style:{fontSize:"28px",fontWeight:700,color:"#1e293b"},children:"Post Notes / Files"}),a.jsxs("span",{style:{color:"#475569",fontSize:"16px",fontWeight:500},children:[t==null?void 0:t.name,", share notes with your students"]})]}),a.jsxs("div",{style:{marginBottom:"40px",background:"#fff",padding:"30px 25px",borderRadius:"18px",boxShadow:"0 6px 25px rgba(0,0,0,0.08)"},children:[a.jsxs("select",{value:s,onChange:x=>i(x.target.value),style:{width:"100%",padding:"14px 16px",borderRadius:"12px",border:"1px solid #cbd5e1",fontSize:"15px",marginBottom:"18px",background:"#f8fafc",cursor:"pointer"},children:[a.jsx("option",{value:"",children:"Select Class & Subject"}),n.map(x=>a.jsxs("option",{value:x.id,children:[x.subject,"  Grade ",x.grade,x.section]},x.id))]}),a.jsx("textarea",{placeholder:"Write your note here...",value:o,onChange:x=>c(x.target.value),style:{width:"100%",padding:"18px",borderRadius:"15px",border:"1px solid #cbd5e1",marginBottom:"18px",minHeight:"140px",fontSize:"15px",resize:"vertical",background:"#f8fafc"}}),a.jsx("input",{type:"file",onChange:x=>d(x.target.files[0]),style:{display:"block",marginBottom:"25px",fontSize:"15px",cursor:"pointer",padding:"10px",borderRadius:"12px",border:"1px solid #cbd5e1",background:"#f8fafc",width:"100%"}}),a.jsxs("button",{onClick:se,style:{background:"linear-gradient(90deg, #4b6cb7, #182848)",color:"#fff",border:"none",padding:"14px 30px",borderRadius:"15px",cursor:"pointer",fontSize:"16px",fontWeight:600,width:"100%"},children:[a.jsx(Uj,{style:{marginRight:"10px"}})," Submit Post"]})]}),a.jsxs("div",{children:[a.jsx("h3",{style:{fontSize:"22px",fontWeight:700,marginBottom:"20px",color:"#1e293b"},children:"All Posts"}),f.filter(x=>x.teacherId===L||x.courseId===s).map((x,j)=>a.jsxs("div",{style:{background:"#fff",padding:"20px 25px",borderRadius:"18px",marginBottom:"18px",boxShadow:"0 6px 18px rgba(0,0,0,0.06)"},children:[a.jsx("p",{style:{marginBottom:"12px",fontSize:"15px",lineHeight:"1.6",color:"#334155"},children:x.text}),x.fileUrl&&a.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"10px"},children:[a.jsx("span",{style:{fontSize:"20px",marginRight:"10px"},children:""}),a.jsx("a",{href:x.fileUrl,target:"_blank",rel:"noopener noreferrer",download:!0,style:{color:"#2563eb",fontWeight:600,textDecoration:"none",fontSize:"15px"},children:"View / Download File"})]}),a.jsxs("div",{style:{fontSize:"13px",color:"#64748b",textAlign:"right"},children:["Posted: ",new Date(x.createdAt).toLocaleString()]})]},j))]})]})]})]}):null}const dh=(t,e)=>{const n=String(t||"").trim(),r=String(e||"").trim();return`${n}_${r}`},AN="https://gojo-teacher-web.onrender.com/api",Kn="https://ethiostore-17d9f-default-rtdb.firebaseio.com",PN=t=>{if(!t)return"";const e=new Date(Number(t)),n=e.getHours().toString().padStart(2,"0"),r=e.getMinutes().toString().padStart(2,"0");return`${n}:${r}`};function DN(){const[t,e]=g.useState(!1),[n,r]=g.useState(null),[s,i]=g.useState([]),[o,c]=g.useState(null),[u,d]=g.useState(!0),[f,p]=g.useState("Details"),[y,k]=g.useState(!1),[w,R]=g.useState([]),[D,S]=g.useState(""),_=g.useRef(null),[v,L]=g.useState([]),[q,se]=g.useState([]),[E,x]=g.useState(!1),[j,I]=g.useState([]),[N,O]=g.useState(null),[C,V]=g.useState(!1),[_e,Z]=g.useState([]),Se=Vn(),[X,Y]=g.useState(window.innerWidth<window.innerHeight);g.useEffect(()=>{const B=()=>Y(window.innerWidth<window.innerHeight);return window.addEventListener("resize",B),window.addEventListener("orientationchange",B),()=>{window.removeEventListener("resize",B),window.removeEventListener("orientationchange",B)}},[]),g.useEffect(()=>{const B=JSON.parse(localStorage.getItem("teacher"));if(!B){Se("/login");return}r(B)},[Se]);const ie=()=>{localStorage.removeItem("teacher"),Se("/login")},G=(n==null?void 0:n.userId)||"";g.useEffect(()=>{if(!n)return;let B=!1;return(async()=>{try{d(!0);const[$,De,te,be,W]=await Promise.all([ee.get(`${Kn}/TeacherAssignments.json`),ee.get(`${Kn}/Courses.json`),ee.get(`${Kn}/Students.json`),ee.get(`${Kn}/Users.json`),ee.get(`${Kn}/Parents.json`)]),oe=$.data||{},ce=De.data||{},H=te.data||{},re=be.data||{},le=W.data||{},M=n.userId,z=Object.values(oe).filter(Oe=>Oe.teacherId===M).map(Oe=>Oe.courseId),ne={};Object.entries(le).forEach(([Oe,de])=>{de.children&&Object.values(de.children).forEach(pe=>{if(!pe.studentId)return;const Ae=pe.relationship||pe.relation||pe.relationToChild||pe.type||pe.role||null;ne[pe.studentId]||(ne[pe.studentId]=[]),ne[pe.studentId].push({parentId:Oe,relationship:Ae})})});const ue={};Object.entries(H).forEach(([Oe,de])=>{const pe=Object.values(re).find(vt=>String(vt.userId)===String(de.userId)),Ae=(pe==null?void 0:pe.name)||"No Name",Ue=(pe==null?void 0:pe.profileImage)||"/default-profile.png";(ne[Oe]||[]).forEach(({parentId:vt,relationship:We})=>{ue[vt]||(ue[vt]=[]),ue[vt].push({studentId:Oe,name:Ae,grade:de.grade,section:de.section,profileImage:Ue,userId:de.userId,relationship:We||"",age:de.age||(pe==null?void 0:pe.age)||null,city:de.city||(pe==null?void 0:pe.city)||de.address&&de.address.city||null,citizenship:de.citizenship||(pe==null?void 0:pe.citizenship)||de.nationality||null,address:de.address||(pe==null?void 0:pe.address)||null,status:de.status||"Active"})})});const Ce=Object.keys(ue).map(Oe=>{var Ge;const de=le[Oe]||{},pe=Object.values(re).find(vt=>String(vt.userId)===String(de.userId))||{},Ae=ue[Oe]||[],Ue=Array.from(new Set(Ae.map(vt=>vt.relationship).filter(Boolean)));return{id:Oe,userId:de.userId,name:pe.name||de.name||"No Name",email:pe.email||de.email||"N/A",phone:pe.phone||de.phone||"",profileImage:pe.profileImage||de.profileImage||"/default-profile.png",children:Ae,relationships:Ue,age:de.age||pe.age||null,city:de.city||pe.city||((Ge=de.address)==null?void 0:Ge.city)||null,citizenship:de.citizenship||pe.citizenship||de.nationality||null,status:de.status||"Active",createdAt:de.createdAt,address:de.address||pe.address||null,extra:de.extra}});B||i(Ce)}catch($){console.error("Error fetching parents:",$)}finally{B||d(!1)}})(),()=>{B=!0}},[n]),g.useEffect(()=>{var B;(B=_.current)==null||B.scrollIntoView({behavior:"smooth"})},[w]),g.useEffect(()=>{if(!o||!n||!y)return;const B=dh(G,o.userId),me=Ot(Bt,`Chats/${B}/messages`);return yo(me,$=>{const De=$.val()||{},te=Object.entries(De).map(([be,W])=>({messageId:be,...W}));te.sort((be,W)=>be.timeStamp-W.timeStamp),R(te)}),Ne(B),()=>P2(me)},[o,n,y]);const he=async B=>{if(!(B!=null&&B.trim())||!o||!n)return;const me=G,$=o.userId,De=dh(me,$),te=Date.now(),be={senderId:me,receiverId:$,type:"text",text:B,seen:!1,timeStamp:te};try{await ee.post(`${Kn}/Chats/${De}/messages.json`,be),await ee.patch(`${Kn}/Chats/${De}.json`,{participants:{[me]:!0,[$]:!0},lastMessage:{text:B,senderId:me,seen:!1,timeStamp:te},unread:{[me]:0,[$]:1}}),S("")}catch(W){console.error("Send message error:",W)}},Ne=async B=>{try{await ee.patch(`${Kn}/Chats/${B}/unread.json`,{[G]:0}),await ee.patch(`${Kn}/Chats/${B}/lastMessage.json`,{seen:!0})}catch(me){console.error("Mark as seen error:",me)}};g.useEffect(()=>{(async()=>{try{let $=(await ee.get(`${AN}/get_posts`)).data||[];!Array.isArray($)&&typeof $=="object"&&($=Object.values($));const[De,te]=await Promise.all([ee.get(`${Kn}/School_Admins.json`),ee.get(`${Kn}/Users.json`)]),be=De.data||{},W=te.data||{},oe=JSON.parse(localStorage.getItem("teacher")),ce=ke(oe==null?void 0:oe.userId),H=M=>{const z=M.adminId||M.posterAdminId||M.poster||M.admin||null;if(z&&be[z]){const ne=be[z],ue=ne.userId,Ce=W[ue]||null,Oe=Ce&&Ce.name||ne.name||M.adminName||"Admin",de=Ce&&Ce.profileImage||ne.profileImage||M.adminProfile||"/default-profile.png";return{name:Oe,profile:de}}return{name:M.adminName||"Admin",profile:M.adminProfile||"/default-profile.png"}},re=$.slice().sort((M,z)=>(z.time?new Date(z.time).getTime():0)-(M.time?new Date(M.time).getTime():0)).filter(M=>M.postId&&!ce.includes(M.postId)).slice(0,5).map(M=>{var ne;const z=H(M);return{type:"post",id:M.postId,title:((ne=M.message)==null?void 0:ne.substring(0,50))||"Untitled post",adminName:z.name,adminProfile:z.profile}});let le=[];try{const M=oe;if(M&&M.userId){const[z,ne]=await Promise.all([ee.get(`${Kn}/Chats.json`),ee.get(`${Kn}/Users.json`)]),ue=z.data||{},Oe=ne.data||{}||{},de={};Object.entries(Oe).forEach(([pe,Ae])=>{Ae&&Ae.userId&&(de[Ae.userId]=pe)}),le=Object.entries(ue).map(([pe,Ae])=>{const Ge=(Ae.unread||{})[M.userId]||0;if(!Ge)return null;const vt=Ae.participants||{},We=Object.keys(vt||{}).find(Rt=>Rt!==M.userId);if(!We)return null;let Et=We,Ze=Oe[Et];if(!Ze){const Rt=de[We];Rt&&(Et=Rt,Ze=Oe[Rt])}Ze||(Ze={userId:We,name:We,profileImage:"/default-profile.png"});const Lt={pushKey:Et,userId:Ze.userId||We,name:Ze.name||Ze.username||We,profileImage:Ze.profileImage||Ze.profile||"/default-profile.png"},Ct=Ae.lastMessage||{};return{type:"message",chatId:pe,displayName:Lt.name,profile:Lt.profileImage,lastMessageText:Ct.text||"",lastMessageTime:Ct.timeStamp||Ct.time||null,unreadForMe:Ge}}).filter(Boolean).sort((pe,Ae)=>(Ae.lastMessageTime||0)-(pe.lastMessageTime||0))}}catch(M){console.error("Error fetching message notifications:",M)}se([...re,...le]),I(le)}catch(me){console.error("Error fetching notifications:",me)}})()},[]);function ke(B){return JSON.parse(localStorage.getItem(`seen_posts_${B}`))||[]}const ge=j.reduce((B,me)=>B+(me.unreadForMe||0),0);return g.useEffect(()=>(o?document.body.classList.add("sidebar-open"):document.body.classList.remove("sidebar-open"),()=>document.body.classList.remove("sidebar-open")),[o]),a.jsxs("div",{className:"dashboard-page",children:[a.jsxs("nav",{className:"top-navbar",children:[a.jsx("h2",{children:"Gojo Dashboard"}),a.jsxs("div",{className:"nav-right",children:[a.jsxs("div",{className:"icon-circle",style:{position:"relative"},children:[a.jsxs("div",{onClick:()=>x(!E),style:{cursor:"pointer",position:"relative"},"aria-label":"Show notifications",tabIndex:0,role:"button",onKeyPress:B=>{B.key==="Enter"&&x(!E)},children:[a.jsx(gs,{size:24}),q.length+ge>0&&a.jsx("span",{style:{position:"absolute",top:-5,right:-5,background:"red",color:"white",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:q.length+ge})]}),E&&a.jsxs(a.Fragment,{children:[a.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.08)",zIndex:1999},onClick:()=>x(!1)}),a.jsxs("div",{className:"notification-popup",style:typeof window<"u"&&window.innerWidth<=600?{position:"fixed",left:"50%",top:"8%",transform:"translate(-50%, 0)",width:"90vw",maxWidth:340,zIndex:2e3,background:"#fff",borderRadius:12,boxShadow:"0 2px 16px rgba(0,0,0,0.18)",maxHeight:"70vh",overflowY:"auto",padding:12}:{position:"absolute",top:30,right:0,width:300,maxHeight:400,overflowY:"auto",background:"#fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",borderRadius:8,zIndex:100},children:[q.length>0&&q.map((B,me)=>B.type==="post"?a.jsxs("div",{onClick:()=>{Se("/dashboard"),setTimeout(()=>{var De;const $=(De=postRefs==null?void 0:postRefs.current)==null?void 0:De[B.id];$&&($.scrollIntoView({behavior:"smooth",block:"center"}),O(B.id),setTimeout(()=>O(null),3e3))},150),se($=>$.filter((De,te)=>te!==me)),x(!1)},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:B.adminProfile,alt:B.adminName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:B.adminName}),a.jsx("p",{style:{margin:0,fontSize:12},children:B.title})]})]},B.id||me):null),ge>0&&_e.filter(B=>B.unreadForMe>0).map((B,me)=>a.jsxs("div",{onClick:()=>{x(!1),Se("/all-chat")},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:B.profile||"/default-profile.png",alt:B.displayName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:B.displayName}),a.jsx("p",{style:{margin:0,fontSize:12,color:"#0b78f6"},children:"New message"})]})]},B.chatId||me)),q.length===0&&ge===0&&a.jsx("div",{style:{padding:15},children:"No notifications"})]})]})]}),a.jsx("div",{className:"icon-circle",style:{position:"relative",marginLeft:12},children:a.jsxs("div",{onClick:()=>Se("/all-chat"),style:{cursor:"pointer",position:"relative"},children:[a.jsx(ms,{size:22}),ge>0&&a.jsx("span",{style:{position:"absolute",top:-6,right:-6,background:"#f60b0b",color:"#fff",borderRadius:"50%",minWidth:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 5px"},children:ge})]})}),a.jsx("div",{className:"icon-circle",onClick:()=>Se("/settings"),children:a.jsx(Ir,{})}),a.jsx("img",{src:(n==null?void 0:n.profileImage)||"/default-profile.png",alt:"teacher",className:"profile-img"})]})]}),a.jsxs("div",{className:"google-dashboard",style:{display:"flex"},children:[typeof window<"u"&&window.innerWidth<=600&&!t&&a.jsx("button",{className:"sidebar-arrow-btn",style:{position:"fixed",left:0,top:0,zIndex:1300,background:"#fff",border:"none",borderRadius:"0 8px 8px 0",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",padding:8,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:()=>e(!0),"aria-label":"Open sidebar menu",children:a.jsx(us,{size:22})}),typeof window<"u"&&window.innerWidth<=600&&t&&a.jsx("div",{className:"sidebar-overlay visible",onClick:()=>e(!1),style:{display:"block",position:"fixed",inset:0,background:"rgba(0,0,0,0.35)",zIndex:1200}}),a.jsxs("div",{className:`google-sidebar${typeof window<"u"&&window.innerWidth<=600&&t?" open":""}`,style:typeof window<"u"&&window.innerWidth<=600?{position:"fixed",top:64,left:t?0:"-220px",width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",zIndex:1200,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto",borderRadius:0,transition:"left 0.25s cubic-bezier(.4,0,.2,1)"}:{position:"fixed",top:64,left:0,width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.04)",zIndex:900,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto",borderRadius:0},children:[a.jsx("style",{children:`
            @media (max-width: 600px) {
              .google-sidebar {
                left: -220px;
                transition: left 0.25s cubic-bezier(.4,0,.2,1);
                border-radius: 0 !important;
              }
              .google-sidebar.open {
                left: 0 !important;
                z-index: 1202;
                border-radius: 0 !important;
              }
              .sidebar-overlay {
                display: block;
                position: fixed;
                inset: 0;
                background: rgba(0,0,0,0.35);
                z-index: 1200;
                transition: opacity 0.2s;
              }
              .sidebar-arrow-btn {
                display: flex !important;
              }
            }
          `}),n&&a.jsxs("div",{className:"sidebar-profile",children:[a.jsx("div",{className:"sidebar-img-circle",children:a.jsx("img",{src:n.profileImage||"/default-profile.png",alt:"profile"})}),a.jsx("h3",{children:n.name}),a.jsx("p",{children:n.username})]}),a.jsxs("div",{className:"sidebar-menu",children:[a.jsxs(ye,{className:"sidebar-btn",to:"/dashboard",children:[a.jsx(Hr,{})," Home"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/students",children:[a.jsx(Ut,{})," Students"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/admins",children:[a.jsx(Ut,{})," Admins"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/parents",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[a.jsx(Wr,{})," Parents"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/marks",children:[a.jsx(lr,{})," Marks"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/attendance",children:[a.jsx(xs,{})," Attendance"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/schedule",children:[a.jsx(Ur,{})," Schedule"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/lesson-plan",children:[a.jsx(ys,{})," Lesson Plan"]}),a.jsxs("button",{className:"sidebar-btn logout-btn",onClick:ie,children:[a.jsx(Vr,{})," Logout"]})]})]}),a.jsx("main",{style:{flex:1,padding:30},children:a.jsxs("div",{className:"parent-list-card-responsive",style:{maxWidth:480,margin:"0 auto",display:"flex",gap:24,alignItems:"flex-start",flexWrap:"wrap"},children:[a.jsxs("section",{style:{flex:"1 1 320px",minWidth:280},children:[a.jsx("h2",{style:{textAlign:"center",marginBottom:20,color:"#4b6cb7",fontWeight:700},children:"Parents"}),u?a.jsx("p",{style:{textAlign:"center",fontSize:18,color:"#555"},children:"Loading..."}):s.length===0?a.jsx("p",{style:{textAlign:"center",fontSize:18,color:"#999"},children:"No parents found."}):a.jsx("div",{className:"parent-list-responsive",style:{display:"flex",flexDirection:"column",gap:15},children:s.map(B=>a.jsxs("div",{onClick:()=>c(B),className:"parent-list-item-responsive",style:{display:"flex",gap:15,width:"calc(100% - 50px)",padding:16,marginLeft:50,borderRadius:12,boxShadow:"0 4px 15px rgba(0,0,0,0.08)",backgroundColor:(o==null?void 0:o.id)===B.id?"#f0f4ff":"#fff",cursor:"pointer",alignItems:"center"},children:[a.jsx("style",{children:`
                                  @media (max-width: 600px) {
                                    .parent-list-card-responsive {
                                      max-width: 99vw !important;
                                      width: 99vw !important;
                                      margin: 0 !important;
                                      padding: 0 !important;
                                    }
                                    .parent-list-responsive {
                                      width: 99vw !important;
                                      max-width: 99vw !important;
                                      margin-left: 0 !important;
                                      margin-right: 0 !important;
                                      padding: 0 !important;
                                      align-items: flex-start !important;
                                    }
                                    .parent-list-item-responsive {
                                      margin-left: -28px !important;
                                      width: 99vw !important;
                                      max-width: 99vw !important;
                                      min-width: 99vw !important;
                                      box-sizing: border-box !important;
                                    }
                                  }
                                `}),a.jsx("img",{src:B.profileImage,alt:B.name,style:{width:60,height:60,borderRadius:"50%",objectFit:"cover"}}),a.jsxs("div",{children:[a.jsx("h3",{style:{margin:0,fontSize:18},children:B.name}),a.jsx("p",{style:{margin:"6px 0 0 0",color:"#777"},children:B.email})]})]},B.id))})]}),o&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"parent-sidebar-overlay",onClick:()=>c(null),style:{display:"none",position:"fixed",inset:0,background:"rgba(0,0,0,0.35)",zIndex:999}}),a.jsxs("aside",{className:"parent-sidebar",style:{width:X?"100%":420,height:X?"100vh":"calc(100vh - 60px)",position:"fixed",right:0,top:X?0:60,background:"#fff",boxShadow:X?"none":"0 0 20px rgba(0,0,0,0.06)",zIndex:1e3,display:"flex",flexDirection:"column",overflowY:"auto",padding:X?18:24,transition:"all 0.32s ease"},role:"dialog","aria-modal":"true",children:[a.jsx("button",{onClick:()=>c(null),style:{position:"absolute",top:X?8:-11,right:18,width:40,height:40,borderRadius:10,border:"none",background:"#fff",boxShadow:"0 8px 18px rgba(2,6,23,0.08)",cursor:"pointer",display:"grid",placeItems:"center",zIndex:1010,fontSize:20},"aria-label":"Close details",children:""}),a.jsxs("div",{style:{textAlign:"center",marginBottom:12},children:[a.jsx("div",{style:{width:100,height:100,margin:"0 auto 12px",borderRadius:"50%",overflow:"hidden",border:"4px solid #4b6cb7"},children:a.jsx("img",{src:o.profileImage,alt:o.name,style:{width:"100%",height:"100%",objectFit:"cover"}})}),a.jsx("h3",{style:{margin:0},children:o.name}),a.jsx("div",{style:{color:"#666",marginTop:6},children:o.email})]}),a.jsx("div",{style:{display:"flex",gap:8,marginBottom:12},children:["Details","Children","Status"].map(B=>a.jsx("button",{onClick:()=>p(B),style:{flex:1,padding:"8px 10px",borderRadius:10,border:"none",cursor:"pointer",background:f===B?"#4b6cb7":"#f0f0f0",color:f===B?"#fff":"#333",fontWeight:700},children:B},B))}),a.jsxs("div",{style:{paddingBottom:40},children:[f==="Details"&&a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:28,padding:50,marginLeft:0,marginRight:0,borderRadius:0,background:"linear-gradient(180deg,#eef2ff,#f8fafc)",fontFamily:"Inter, system-ui"},children:a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:24,fontWeight:900,marginBottom:18,marginTop:-30,background:"linear-gradient(90deg,#2563eb,#7c3aed)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Parent Details"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",columnGap:68,rowGap:14},children:[["Email",o.email||"N/A"],["Phone",o.phone||"N/A"],["Relationship(s)",o.relationships&&o.relationships.length?o.relationships.join(", "):""],["Age",o.age||""],["City",o.city||(o.address&&typeof o.address=="object"?o.address.city:o.city)||""],["Citizenship",o.citizenship||""],["Status",o.status?o.status.charAt(0).toUpperCase()+o.status.slice(1):""],["Address",(typeof o.address=="string"?o.address:o.address&&(o.address.street||o.address.city||JSON.stringify(o.address)))||"",!0]].map(([B,me,$])=>a.jsxs("div",{style:{padding:18,borderRadius:20,background:"#ffffff",boxShadow:"0 6px 10px rgba(0,0,0,0.08)",marginLeft:-30,marginRight:-30,gridColumn:$?"span 2":"span 1"},children:[a.jsx("div",{style:{fontSize:12,fontWeight:700,color:"#000102",textTransform:"uppercase"},children:B}),a.jsx("div",{style:{marginTop:8,fontSize:16,fontWeight:400,color:"#000102"},children:me})]},B))})]})}),f==="Children"&&a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:20,background:"#f5f7fa",padding:18,borderRadius:10},children:o.children.map(B=>a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:22,background:"#fff",borderRadius:16,padding:"22px 30px",boxShadow:"0 4px 24px rgba(80,90,130,0.10)",border:"1px solid #edeef2",transition:"box-shadow 0.2s, transform 0.18s",cursor:"pointer"},onMouseEnter:me=>me.currentTarget.style.boxShadow="0 8px 32px 0 rgba(60,72,120,0.17)",onMouseLeave:me=>me.currentTarget.style.boxShadow="0 4px 24px rgba(80,90,130,0.10)",children:[a.jsx("img",{src:B.profileImage,alt:B.name,style:{width:66,height:66,borderRadius:"50%",border:"3px solid #2868f1",objectFit:"cover",background:"#f0f4fa",flexShrink:0,boxShadow:"0 2px 8px 0 rgba(60,72,120,0.07)"}}),a.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:5},children:[a.jsx("span",{style:{fontWeight:700,fontSize:21,color:"#213052",marginBottom:2},children:B.name}),a.jsxs("div",{style:{display:"flex",columnGap:1,marginTop:-12,marginLeft:-19},children:[a.jsxs("div",{style:{color:"#050505",fontWeight:400,fontSize:14,padding:"6px 18px",borderRadius:999,letterSpacing:.5,boxShadow:"0 2px 8px rgba(22,119,255,.09)"},children:["Grade:",B.grade]}),a.jsxs("div",{style:{color:"#000000",fontWeight:400,fontSize:14,padding:"6px 1px",borderRadius:999,letterSpacing:.5,boxShadow:"0 2px 8px rgba(255,126,95,.09)"},children:["Section:",B.section]})]}),a.jsx("span",{style:{fontSize:15,color:"#424242",marginTop:"-10px"},children:B.relationship&&`Relation: ${B.relationship}`})]})]},B.studentId))}),f==="Status"&&a.jsxs("div",{children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Status:"})," ",o.status||"Active"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Created:"})," ",o.createdAt?new Date(o.createdAt).toLocaleString():""]})]})]}),!y&&a.jsx("div",{onClick:()=>k(!0),style:{position:"fixed",bottom:"20px",right:"20px",width:"60px",height:"60px",background:"linear-gradient(135deg, #3a6fb4, #2147f0, #457ffc)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",cursor:"pointer",zIndex:1e3,boxShadow:"0 8px 18px rgba(0,0,0,0.25)",transition:"transform 0.2s ease"},children:a.jsx(Fp,{size:30})}),y&&o&&a.jsxs("div",{style:{position:"fixed",bottom:"20px",right:"20px",width:"360px",height:"480px",background:"#fff",borderRadius:"16px",boxShadow:"0 12px 30px rgba(0,0,0,0.25)",zIndex:2e3,display:"flex",flexDirection:"column",overflow:"hidden"},children:[a.jsxs("div",{style:{padding:"14px",borderBottom:"1px solid #eee",display:"flex",justifyContent:"space-between",alignItems:"center",background:"#fafafa"},children:[a.jsx("strong",{children:o.name}),a.jsxs("div",{style:{display:"flex",gap:"10px"},children:[a.jsx("button",{onClick:()=>{k(!1);const B=dh(G,o.userId);Se("/all-chat",{state:{user:o,chatId:B,tab:"parent"}})},style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px"},children:""}),a.jsx("button",{onClick:()=>k(!1),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:""})]})]}),a.jsxs("div",{style:{flex:1,padding:"12px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"6px",background:"#f9f9f9"},children:[w.length===0?a.jsxs("p",{style:{textAlign:"center",color:"#aaa"},children:["Start chatting with ",o.name]}):w.map(B=>a.jsx("div",{style:{display:"flex",flexDirection:B.senderId===G?"row-reverse":"row",alignItems:"flex-end",marginBottom:10},children:a.jsx("div",{style:{maxWidth:"75%",display:"flex",flexDirection:"column",alignItems:B.senderId===G?"flex-end":"flex-start"},children:a.jsxs("div",{style:{background:B.senderId===G?"#4b6cb7":"#fff",color:B.senderId===G?"#fff":"#0f172a",padding:"10px 14px",borderRadius:18,boxShadow:"0 2px 6px rgba(0,0,0,0.04)",wordBreak:"break-word",position:"relative",paddingBottom:"26px"},children:[a.jsx("div",{children:B.text}),a.jsxs("div",{style:{position:"absolute",right:8,bottom:6,display:"flex",alignItems:"center",gap:6,fontSize:11,color:B.senderId===G?"rgba(255,255,255,0.9)":"#64748b"},children:[a.jsx("span",{style:{fontSize:11},children:PN(B.timeStamp)}),B.senderId===G&&a.jsx(Io,{size:12,color:B.seen?(B.seenAt,"#10b981"):B.seen?"#10b981":"#94a3b8"})]})]})})},B.messageId)),a.jsx("div",{ref:_})]}),a.jsxs("div",{style:{padding:"10px",borderTop:"1px solid #eee",display:"flex",gap:"8px",background:"#fff"},children:[a.jsx("input",{value:D,onChange:B=>S(B.target.value),placeholder:"Type a message...",style:{flex:1,padding:"10px 14px",borderRadius:"999px",border:"1px solid #ccc",outline:"none"},onKeyDown:B=>{B.key==="Enter"&&he(D)}}),a.jsx("button",{onClick:()=>he(D),style:{background:"linear-gradient(135deg, #3a65b4, #2c4fee, #458efc)",border:"none",borderRadius:"50%",width:"42px",height:"42px",color:"#fff",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px"},children:""})]})]})]}),a.jsx("style",{children:`
                  @media (max-width: 900px), (orientation: portrait) {
                    .parent-sidebar { width: 100vw !important; height: 100vh !important; left: 0 !important; top: 0 !important; border-radius: 0 !important; padding: 16px !important; }
                    .parent-sidebar-overlay { display: block !important; }
                    body.sidebar-open { overflow: hidden !important; }
                  }
                `})]})]})})]})]})}function ON(){const[t,e]=g.useState(localStorage.getItem("darkMode")==="true");return g.useEffect(()=>{t?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode"),localStorage.setItem("darkMode",t)},[t]),[t,()=>e(r=>!r)]}const MN="https://gojo-teacher-web.onrender.com/api",qr="https://ethiostore-17d9f-default-rtdb.firebaseio.com";function LN(){const[t,e]=g.useState(null),[n,r]=g.useState("/default-profile.png"),[s,i]=g.useState(""),[o,c]=g.useState(""),[u,d]=g.useState(null),[f,p]=ON(),[y,k]=g.useState(""),[w,R]=g.useState(""),[D,S]=g.useState([]),[_,v]=g.useState(!1),L=Vn(),[q,se]=g.useState(!1),[E,x]=g.useState([]);g.useEffect(()=>{const Y=JSON.parse(localStorage.getItem("teacher"));if(!Y){L("/login");return}e(Y)},[L]),g.useEffect(()=>{t&&(r(t.profileImage||"/default-profile.png"),i(t.name||""),c(t.username||""),Se(t))},[t]);const j=Y=>d(Y.target.files[0]),I=async()=>{if(!u)return alert("Select an image first.");try{const Y=new FileReader;Y.readAsDataURL(u),Y.onloadend=async()=>{const ie=Y.result;await ee.patch(`${qr}/Users/${t.userId}.json`,{profileImage:ie});const G={...t,profileImage:ie};localStorage.setItem("teacher",JSON.stringify(G)),r(ie),d(null),alert("Profile image updated!")}}catch(Y){console.error("Error updating profile image:",Y)}},N=async()=>{if(!s||!o)return alert("Name and Username required!");try{await ee.patch(`${qr}/Users/${t.userId}.json`,{name:s,username:o});const Y={...t,name:s,username:o};localStorage.setItem("teacher",JSON.stringify(Y)),e(Y),alert("Profile info updated!")}catch(Y){console.error("Error updating info:",Y)}},O=async()=>{if(!y||!w)return alert("Fill both password fields.");if(y!==w)return alert("Passwords do not match!");try{await ee.patch(`${qr}/Users/${t.userId}.json`,{password:y}),k(""),R(""),alert("Password updated successfully!")}catch(Y){console.error("Error updating password:",Y)}},C=()=>{localStorage.removeItem("teacher"),L("/login")};g.useEffect(()=>{(async()=>{try{let G=(await ee.get(`${MN}/get_posts`)).data||[];!Array.isArray(G)&&typeof G=="object"&&(G=Object.values(G));const[he,Ne,ke]=await Promise.all([ee.get(`${qr}/School_Admins.json`),ee.get(`${qr}/Users.json`),ee.get(`${qr}/Chats.json`)]),ge=he.data||{},B=Ne.data||{},me=ke.data||{},$=JSON.parse(localStorage.getItem("teacher")),De=_e($==null?void 0:$.userId),te=ce=>{const H=ce.adminId||ce.posterAdminId||ce.poster||ce.admin||null;if(H&&ge[H]){const re=ge[H],le=re.userId,M=B[le]||null,z=M&&M.name||re.name||ce.adminName||"Admin",ne=M&&M.profileImage||re.profileImage||ce.adminProfile||"/default-profile.png";return{name:z,profile:ne}}return{name:ce.adminName||"Admin",profile:ce.adminProfile||"/default-profile.png"}},be=G.slice().sort((ce,H)=>{const re=ce.time?new Date(ce.time).getTime():0;return(H.time?new Date(H.time).getTime():0)-re}).filter(ce=>ce.postId&&!De.includes(ce.postId)).slice(0,5).map(ce=>{var re;const H=te(ce);return{id:ce.postId,type:"post",title:((re=ce.message)==null?void 0:re.substring(0,50))||"Untitled post",adminName:H.name,adminProfile:H.profile}});let W=[];$&&$.userId&&Object.entries(me).forEach(([ce,H])=>{const le=(H.unread||{})[$.userId]||0;if(!le)return;const M=H.participants||{},z=Object.keys(M).find(ue=>ue!==$.userId);let ne=B[z]||{userId:z,name:z,profileImage:"/default-profile.png"};W.push({chatId:ce,type:"message",displayName:ne.name||ne.username||z,profile:ne.profileImage||ne.profile||"/default-profile.png",unreadForMe:le})});const oe=[...be,...W].slice(0,5);S(oe)}catch(ie){console.error("Error fetching notifications:",ie)}})()},[]);const V=async Y=>{if(t){if(Y.type==="post"&&Y.id)Z(t.userId,Y.id),S(ie=>ie.filter(G=>G.id!==Y.id)),v(!1),L("/dashboard");else if(Y.type==="message"&&Y.chatId){S(ie=>ie.filter(G=>G.chatId!==Y.chatId)),v(!1);try{await ee.put(`${qr}/Chats/${Y.chatId}/unread/${t.userId}.json`,null)}catch{}L("/all-chat")}}};function _e(Y){return JSON.parse(localStorage.getItem(`seen_posts_${Y}`))||[]}function Z(Y,ie){const G=_e(Y);G.includes(ie)||localStorage.setItem(`seen_posts_${Y}`,JSON.stringify([...G,ie]))}const Se=async(Y=t)=>{try{const ie=Y||JSON.parse(localStorage.getItem("teacher"));if(!ie||!ie.userId){x([]);return}const[G,he]=await Promise.all([ee.get(`${qr}/Chats.json`),ee.get(`${qr}/Users.json`)]),Ne=G.data||{},ge=he.data||{}||{},B={};Object.entries(ge).forEach(([$,De])=>{De&&De.userId&&(B[De.userId]=$)});const me=Object.entries(Ne).map(([$,De])=>{const be=(De.unread||{})[ie.userId]||0;if(!be)return null;const W=De.participants||{},oe=Object.keys(W||{}).find(M=>M!==ie.userId);if(!oe)return null;let ce=oe,H=ge[ce];if(!H){const M=B[oe];M&&(ce=M,H=ge[M])}H||(H={userId:oe,name:oe,profileImage:"/default-profile.png"});const re={pushKey:ce,userId:H.userId||oe,name:H.name||H.username||oe,profileImage:H.profileImage||H.profile||"/default-profile.png"},le=De.lastMessage||{};return{chatId:$,contact:re,displayName:re.name,profile:re.profileImage,lastMessageText:le.text||"",lastMessageTime:le.timeStamp||le.time||null,unreadForMe:be}}).filter(Boolean).sort(($,De)=>(De.lastMessageTime||0)-($.lastMessageTime||0));x(me)}catch(ie){console.error("Error fetching conversations:",ie),x([])}},X=D.filter(Y=>Y.type==="message").reduce((Y,ie)=>Y+(ie.unreadForMe||0),0);return a.jsxs("div",{className:"dashboard-page",children:[a.jsxs("nav",{className:"top-navbar",children:[a.jsx("h2",{children:"Gojo Dashboard"}),a.jsxs("div",{className:"nav-right",children:[a.jsxs("div",{className:"icon-circle",children:[a.jsxs("div",{onClick:()=>v(!_),style:{cursor:"pointer",position:"relative"},children:[a.jsx(gs,{size:24}),D.length>0&&a.jsx("span",{style:{position:"absolute",top:-5,right:-5,background:"red",color:"white",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:D.length})]}),_&&a.jsx("div",{style:{position:"absolute",top:30,right:0,width:300,maxHeight:400,overflowY:"auto",background:"#fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",borderRadius:8,zIndex:100},children:D.length>0?D.map((Y,ie)=>Y.type==="post"?a.jsxs("div",{onClick:()=>V(Y),style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:Y.adminProfile,alt:Y.adminName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:Y.adminName}),a.jsx("p",{style:{margin:0,fontSize:12},children:Y.title})]})]},Y.id||ie):a.jsxs("div",{onClick:()=>V(Y),style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:Y.profile||"/default-profile.png",alt:Y.displayName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:Y.displayName}),a.jsx("p",{style:{margin:0,fontSize:12,color:"#0b78f6"},children:"New message"})]})]},Y.chatId||ie)):a.jsx("div",{style:{padding:15},children:"No notifications"})})]}),a.jsx("div",{className:"icon-circle",style:{position:"relative",marginLeft:12},children:a.jsxs("div",{onClick:()=>L("/all-chat"),style:{cursor:"pointer",position:"relative"},children:[a.jsx(ms,{size:22}),X>0&&a.jsx("span",{style:{position:"absolute",top:-6,right:-6,background:"#f60b0b",color:"#fff",borderRadius:"50%",minWidth:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 5px"},children:X})]})}),a.jsx(ye,{className:"icon-circle",to:"/settings",children:a.jsx(Ir,{})}),a.jsx("img",{src:(t==null?void 0:t.profileImage)||"/default-profile.png",alt:"teacher",className:"profile-img"})]})]}),a.jsxs("div",{className:"google-dashboard",children:[a.jsxs("div",{className:"google-sidebar",children:[t&&a.jsxs("div",{className:"sidebar-profile",children:[a.jsx("div",{className:"sidebar-img-circle",children:a.jsx("img",{src:t.profileImage||"/default-profile.png",alt:"profile"})}),a.jsx("h3",{children:t.name}),a.jsx("p",{children:t.username})]}),a.jsxs("div",{className:"sidebar-menu",children:[a.jsxs(ye,{className:"sidebar-btn",to:"/dashboard",children:[a.jsx(Hr,{})," Home"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/students",children:[a.jsx(Ut,{})," Students"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/admins",children:[a.jsx(Ut,{})," Admins"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/parents",children:[a.jsx(Wr,{})," Parents"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/marks",children:[a.jsx(lr,{})," Marks"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/attendance",children:[a.jsx(xs,{})," Attendance"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/schedule",children:[a.jsx(Ur,{})," Schedule"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/lesson-plan",children:[a.jsx(ys,{})," Lesson Plan"]}),a.jsxs("button",{className:"sidebar-btn logout-btn",onClick:C,children:[a.jsx(Vr,{})," Logout"]})]})]}),a.jsxs("div",{className:"main-content",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",marginTop:"10px",padding:"10px",width:"100%",gap:"30px"},children:[a.jsx("h2",{children:"Settings"}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"30px",borderRadius:"12px",background:f?"#3a3a3a":"#fff",boxShadow:"0 4px 10px rgba(0,0,0,0.1)"},children:[a.jsx("img",{src:n,alt:"profile",style:{width:"150px",height:"150px",borderRadius:"50%",objectFit:"cover",marginBottom:"15px",border:"3px solid #4b6cb7"}}),a.jsx("input",{type:"file",onChange:j}),a.jsx("button",{onClick:I,style:{marginTop:"15px",padding:"10px 20px",borderRadius:"8px",border:"none",background:"#4b6cb7",color:"#fff",cursor:"pointer"},children:"Update Profile Image"})]}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px",padding:"30px",borderRadius:"12px",background:f?"#3a3a3a":"#fff",boxShadow:"0 4px 10px rgba(0,0,0,0.1)"},children:[a.jsx("input",{type:"text",placeholder:"Name",value:s,onChange:Y=>i(Y.target.value),style:{padding:"10px",borderRadius:"6px",border:"1px solid #ccc"}}),a.jsx("input",{type:"text",placeholder:"Username",value:o,onChange:Y=>c(Y.target.value),style:{padding:"10px",borderRadius:"6px",border:"1px solid #ccc"}}),a.jsx("button",{onClick:N,style:{padding:"10px 20px",borderRadius:"8px",border:"none",background:"#4b6cb7",color:"#fff",cursor:"pointer"},children:"Update Info"})]}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px",padding:"30px",borderRadius:"12px",background:f?"#3a3a3a":"#fff",boxShadow:"0 4px 10px rgba(0,0,0,0.1)"},children:[a.jsx("input",{type:"password",placeholder:"New Password",value:y,onChange:Y=>k(Y.target.value),style:{padding:"10px",borderRadius:"6px",border:"1px solid #ccc"}}),a.jsx("input",{type:"password",placeholder:"Confirm Password",value:w,onChange:Y=>R(Y.target.value),style:{padding:"10px",borderRadius:"6px",border:"1px solid #ccc"}}),a.jsx("button",{onClick:O,style:{padding:"10px 20px",borderRadius:"8px",border:"none",background:"#4b6cb7",color:"#fff",cursor:"pointer"},children:"Change Password"})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px",padding:"20px",borderRadius:"12px",background:f?"#3a3a3a":"#fff",boxShadow:"0 4px 10px rgba(0,0,0,0.1)"},children:[a.jsx("label",{style:{fontSize:"18px",fontWeight:"500"},children:"Dark Mode"}),a.jsx("input",{type:"checkbox",checked:f,onChange:p})]})]})]})]})}const FN="https://gojo-teacher-web.onrender.com/api",pa="https://ethiostore-17d9f-default-rtdb.firebaseio.com";function zN(){const[t,e]=g.useState(window.innerWidth>600);g.useEffect(()=>{const G=()=>{window.innerWidth<=600?e(!1):e(!0)};return window.addEventListener("resize",G),G(),()=>window.removeEventListener("resize",G)},[]);const[n,r]=g.useState(null),[s,i]=g.useState({}),[o,c]=g.useState(!0),[u,d]=g.useState(""),[f,p]=g.useState("All"),[y,k]=g.useState("All"),[w,R]=g.useState([]),[D,S]=g.useState(!1),[_,v]=g.useState(null),[L,q]=g.useState(!0),[se,E]=g.useState([]);g.useRef({});const x=Vn(),j=["All","A","B","C","D"],I=["Monday","Tuesday","Wednesday","Thursday","Friday"],[N,O]=g.useState(typeof window<"u"?window.innerWidth<=900:!1);g.useEffect(()=>{const G=()=>O(window.innerWidth<=900);return window.addEventListener("resize",G),()=>window.removeEventListener("resize",G)},[]);const C=w.filter(G=>G.type==="message").reduce((G,he)=>G+(he.unreadForMe||0),0);g.useEffect(()=>{const G=JSON.parse(localStorage.getItem("teacher"));if(!G){x("/login");return}r(G)},[x]),g.useEffect(()=>{if(!n)return;async function G(){c(!0);try{const he=await ee.get(`${pa}/Schedules.json`);i(he.data||{}),d("")}catch{d("Failed to load schedule.")}finally{c(!1)}}G()},[n]);const V=()=>{localStorage.removeItem("teacher"),x("/login")},Z=(()=>{if(!n||!s)return{};const G={};return Object.entries(s).forEach(([he,Ne])=>{Object.entries(Ne||{}).forEach(([ke,ge])=>{Object.entries(ge||{}).forEach(([B,me])=>{var $;me!=null&&me.teacherName&&me.teacherName===n.name&&(G[he]||(G[he]={}),G[he][B]||(G[he][B]=[]),G[he][B].push({class:ke,subject:me.subject||"-",time:me.time||(($=B.match(/\((.*?)\)/))==null?void 0:$[1])||"N/A"}))})})}),G})();function Se(G){return JSON.parse(localStorage.getItem(`seen_posts_${G}`))||[]}function X(G,he){const Ne=Se(G);Ne.includes(he)||localStorage.setItem(`seen_posts_${G}`,JSON.stringify([...Ne,he]))}g.useEffect(()=>{(async()=>{try{let Ne=(await ee.get(`${FN}/get_posts`)).data||[];!Array.isArray(Ne)&&typeof Ne=="object"&&(Ne=Object.values(Ne));const[ke,ge,B]=await Promise.all([ee.get(`${pa}/School_Admins.json`),ee.get(`${pa}/Users.json`),ee.get(`${pa}/Chats.json`)]),me=ke.data||{},$=ge.data||{},De=B.data||{},te=JSON.parse(localStorage.getItem("teacher")),be=H=>{const re=H.adminId||H.posterAdminId||H.poster||H.admin||null;if(re&&me[re]){const le=me[re],M=le.userId,z=$[M]||null,ne=z&&z.name||le.name||H.adminName||"Admin",ue=z&&z.profileImage||le.profileImage||H.adminProfile||"/default-profile.png";return{name:ne,profile:ue}}return{name:H.adminName||"Admin",profile:H.adminProfile||"/default-profile.png"}},W=Ne.slice().sort((H,re)=>{const le=H.time?new Date(H.time).getTime():0;return(re.time?new Date(re.time).getTime():0)-le}).filter(H=>H.postId).slice(0,5).map(H=>{var le;const re=be(H);return{id:H.postId,type:"post",title:((le=H.message)==null?void 0:le.substring(0,50))||"Untitled post",adminName:re.name,adminProfile:re.profile,time:H.time?new Date(H.time).getTime():0}});let oe=[];te&&te.userId&&Object.entries(De).forEach(([H,re])=>{var Ce;const M=(re.unread||{})[te.userId]||0;if(!M)return;const z=re.participants||{},ne=Object.keys(z).find(Oe=>Oe!==te.userId);let ue=$[ne]||{userId:ne,name:ne,profileImage:"/default-profile.png"};oe.push({chatId:H,type:"message",displayName:ue.name||ue.username||ne,profile:ue.profileImage||ue.profile||"/default-profile.png",unreadForMe:M,time:(Ce=re.lastMessage)!=null&&Ce.timeStamp?new Date(re.lastMessage.timeStamp).getTime():0})});const ce=[...W,...oe].sort((H,re)=>(re.time||0)-(H.time||0)).slice(0,5);R(ce)}catch{}})()},[]);const Y=async G=>{if(n){if(G.type==="post"&&G.id)X(n.userId,G.id),R(he=>he.filter(Ne=>Ne.id!==G.id)),S(!1),x("/dashboard");else if(G.type==="message"&&G.chatId){R(he=>he.filter(Ne=>Ne.chatId!==G.chatId)),S(!1);try{await ee.put(`${pa}/Chats/${G.chatId}/unread/${n.userId}.json`,null)}catch{}x("/all-chat")}}};return a.jsxs("div",{className:"gojo-root-dashboard",children:[a.jsx("style",{children:`
    body, html, #root { height: 100%; margin: 0; }
    .gojo-root-dashboard {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      background: #f0f4f8;
      overflow: hidden;
    }
    .top-navbar {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      z-index: 1000;
      background: #fff;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 24px;
      height: 60px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.07);
    }
    .google-sidebar {
      position: fixed;
      top: 60px;
      left: 0;
      width: 220px;
      height: calc(100vh - 60px);
      background: #fff;
      box-shadow: 2px 0 8px rgba(0,0,0,0.04);
      z-index: 900;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-top: 18px;
      overflow-y: auto;
      transition: width 0.2s;
      min-width: 48px;
    }
    .main-area-row {
      display: flex;
      flex: 1;
      flex-direction: row;
      height: 100vh;
      margin-top: 60px;
      width: 100%;
      min-width: 0;
    }
    .schedule-main {
      flex: 1;
      margin-left: 220px;
      padding: 30px;
      background: #f0f4f8;
      min-height: calc(100vh - 60px);
      overflow-y: auto;
      transition: margin-left 0.2s;
      position: relative;
      z-index: 20;
    }
    .right-sidebar {
      position: fixed;
      top: 60px;
      right: 0;
      width: 420px;
      height: calc(100vh - 60px);
      z-index: 300;
      background: #fff;
      box-shadow: 0 0 20px rgba(0,0,0,0.07);
      display: flex;
      flex-direction: column;
      transition: right 0.2s, left 0.2s, width 0.2s;
    }
    .close-sidebar-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      background: linear-gradient(90deg, #2563eb, #3b82f6);
      color: #fff;
      border: none;
      border-radius: 50%;
      width: 36px;
      height: 36px;
      font-size: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
      z-index: 10;
      cursor: pointer;
    }
    @media (max-width: 900px) {
      .google-sidebar { width: 60px; min-width: 60px; }
      .schedule-main { margin-left: 60px; padding: 17px 2vw; }
      .right-sidebar { width: 100vw; left: 0; right: initial; }
    }
    @media (max-width: 600px) {
      .top-navbar { height: 54px; padding: 0 7px; }
      .google-sidebar {
        top: 54px;
        width: 48px;
        min-width: 48px;
        padding: 0;
        align-items: flex-start;
      }
      .main-area-row { margin-top: 54px; }
      .schedule-main { margin-left: 48px; padding: 8px 2vw; border-radius: 7px; }
      .right-sidebar { left: 0; right: initial; width: 100vw; height: calc(100vh - 54px); }
      .close-sidebar-btn {
        top: 8px !important;
        right: 8px !important;
        width: 44px !important;
        height: 44px !important;
        font-size: 22px !important;
      }
    }
  `}),a.jsxs("nav",{className:"top-navbar",children:[a.jsx("h2",{children:"Gojo Dashboard"}),a.jsxs("div",{className:"nav-right",style:{display:"flex",alignItems:"center",gap:16},children:[a.jsxs("div",{className:"icon-circle",style:{position:"relative"},children:[a.jsxs("div",{onClick:()=>S(!D),style:{cursor:"pointer",position:"relative"},children:[a.jsx(gs,{size:24}),w.length>0&&a.jsx("span",{style:{position:"absolute",top:-5,right:-5,background:"red",color:"white",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:w.length})]}),D&&a.jsxs(a.Fragment,{children:[a.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.08)",zIndex:1999},onClick:()=>S(!1)}),a.jsx("div",{className:"notification-popup",style:typeof window<"u"&&window.innerWidth<=600?{position:"fixed",left:"50%",top:"8%",transform:"translate(-50%, 0)",width:"90vw",maxWidth:340,zIndex:2e3,background:"#fff",borderRadius:12,boxShadow:"0 2px 16px rgba(0,0,0,0.18)",maxHeight:"70vh",overflowY:"auto",padding:12}:{position:"absolute",top:28,right:0,width:300,maxHeight:400,overflowY:"auto",background:"#fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",borderRadius:8,zIndex:100},children:w.length?w.map((G,he)=>a.jsxs("div",{onClick:()=>Y(G.id),style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:G.adminProfile,alt:G.adminName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:G.adminName}),a.jsx("p",{style:{margin:0,fontSize:12},children:G.title})]})]},G.id||he)):a.jsx("div",{style:{padding:15},children:"No notifications"})})]})]}),a.jsx("div",{className:"icon-circle",style:{position:"relative",marginLeft:12},children:a.jsxs("div",{onClick:()=>x("/all-chat"),style:{cursor:"pointer",position:"relative"},children:[a.jsx(ms,{size:22}),C>0&&a.jsx("span",{style:{position:"absolute",top:-6,right:-6,background:"#ff0000",color:"#fff",borderRadius:"50%",minWidth:18,height:18,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 6px",fontSize:12},children:C})]})}),a.jsxs("div",{className:"icon-circle",onClick:()=>x("/settings"),children:[" ",a.jsx(Ir,{})," "]}),a.jsx("img",{src:(n==null?void 0:n.profileImage)||"/default-profile.png",alt:"profile",style:{width:36,height:36,borderRadius:"50%"}})]})]}),a.jsxs("div",{className:"main-area-row",children:[typeof window<"u"&&window.innerWidth<=600&&!t&&a.jsx("button",{className:"sidebar-arrow-btn",style:{position:"fixed",left:0,top:180,transform:"none",zIndex:1300,background:"#fff",border:"none",borderRadius:"0 8px 8px 0",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",padding:8,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:()=>e(!0),"aria-label":"Open sidebar menu",children:a.jsx(us,{size:22})}),typeof window<"u"&&window.innerWidth<=600&&t&&a.jsx("div",{className:"sidebar-overlay visible",onClick:()=>e(!1),style:{display:"block",position:"fixed",inset:0,background:"rgba(0,0,0,0.35)",zIndex:1200}}),a.jsxs("div",{className:`google-sidebar${typeof window<"u"&&window.innerWidth<=600&&t?" open":""}`,style:typeof window<"u"&&window.innerWidth<=600?{position:"fixed",top:64,left:t?0:"-220px",width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",zIndex:1200,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto",transition:"left 0.25s cubic-bezier(.4,0,.2,1)"}:{position:"fixed",top:64,left:0,width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.04)",zIndex:900,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto"},children:[n&&a.jsxs("div",{className:"sidebar-profile",children:[a.jsx("div",{className:"sidebar-img-circle",children:a.jsx("img",{src:n.profileImage||"/default-profile.png",alt:"profile",style:{width:"100%",height:"100%",objectFit:"cover",border:"none",boxShadow:"none"}})}),a.jsx("h3",{children:n.name}),a.jsx("p",{children:n.username})]}),a.jsxs("div",{className:"sidebar-menu",style:{display:"flex",flexDirection:"column",gap:8,width:"100%"},children:[a.jsxs(ye,{className:"sidebar-btn",to:"/dashboard",children:[a.jsx(Hr,{})," Home"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/students",children:[a.jsx(Ut,{})," Students"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/admins",children:[a.jsx(Ut,{})," Admins"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/parents",children:[a.jsx(Wr,{})," Parents"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/marks",children:[a.jsx(lr,{})," Marks"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/attendance",children:[a.jsx(xs,{})," Attendance"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/schedule",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[a.jsx(Ur,{})," Schedule"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/lesson-plan",children:[a.jsx(ys,{})," Lesson Plan"]}),a.jsxs("button",{className:"sidebar-btn logout-btn",onClick:V,children:[a.jsx(Vr,{})," Logout"]})]})]}),a.jsx("div",{className:"schedule-main",children:a.jsxs("div",{className:"schedule-container",style:{width:"100%",maxWidth:900,margin:"0 auto",marginLeft:"150px"},children:[a.jsxs("div",{style:{display:"flex",gap:"20px",marginBottom:"25px",justifyContent:"center",flexWrap:"wrap"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{marginRight:"8px",fontWeight:"600"},children:"Grade:"}),a.jsxs("select",{value:f,onChange:G=>p(G.target.value),style:{padding:"8px 12px",borderRadius:"8px",border:"1px solid #ccc",cursor:"pointer"},children:[a.jsx("option",{value:"All",children:"All"}),a.jsx("option",{value:"9",children:"9"}),a.jsx("option",{value:"10",children:"10"}),a.jsx("option",{value:"12",children:"12"})]})]}),a.jsxs("div",{children:[a.jsx("label",{style:{marginRight:"8px",fontWeight:"600"},children:"Section:"}),a.jsxs("select",{value:y,onChange:G=>k(G.target.value),style:{padding:"8px 12px",borderRadius:"8px",border:"1px solid #ccc",cursor:"pointer"},children:[a.jsx("option",{value:"All",children:"All"}),j.filter(G=>G!=="All").map(G=>a.jsx("option",{value:G,children:G},G))]})]})]}),a.jsx("h2",{style:{textAlign:"center",marginBottom:"30px",color:"#2563eb"},children:"Full Schedule"}),o&&a.jsx("p",{style:{textAlign:"center"},children:"Loading schedule..."}),u&&a.jsx("p",{style:{color:"red",textAlign:"center"},children:u}),!o&&I.map(G=>{const he=s[G];return he?a.jsxs("div",{style:{marginBottom:"40px"},children:[a.jsx("h3",{style:{color:"#1c03ffff",marginBottom:"15px"},children:G}),Object.entries(he).filter(([Ne])=>f==="All"||Ne.includes(f)).map(([Ne,ke])=>{const ge=Ne.slice(-1);return y!=="All"&&ge!==y?null:a.jsxs("div",{style:{marginBottom:"18px"},children:[a.jsx("h4",{style:{color:"#4603fcff",marginBottom:"10px"},children:Ne}),a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",background:"#fff",borderRadius:"12px",overflow:"hidden",boxShadow:"0 8px 20px rgba(0,0,0,0.1)"},children:[a.jsx("thead",{style:{background:"#2563eb",color:"#fff"},children:a.jsxs("tr",{children:[a.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Period"}),a.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Subject"}),a.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Time"}),a.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Teacher"})]})}),a.jsx("tbody",{children:Object.entries(ke).map(([B,me],$)=>{var be;const De=(me==null?void 0:me.teacherName)===(n==null?void 0:n.name),te=me.time||((be=B.match(/\((.*?)\)/))==null?void 0:be[1])||"N/A";return a.jsxs("tr",{style:{borderBottom:"1px solid #eee",backgroundColor:De?"#dbeafe":"#f3f4f6",color:De?"#1e40af":"#6b7280",fontWeight:De?"700":"400",borderLeft:De?"4px solid #2563eb":"none",opacity:De?1:.85},children:[a.jsx("td",{style:{padding:"12px"},children:B}),a.jsx("td",{style:{padding:"12px"},children:me.subject||"-"}),a.jsx("td",{style:{padding:"12px"},children:te}),a.jsx("td",{style:{padding:"12px"},children:me.teacherName||"-"})]},$)})})]})]},Ne)})]},G):null})]})}),L&&a.jsxs("div",{className:"right-sidebar",children:[a.jsx("button",{title:"Close sidebar",onClick:()=>q(!1),className:"close-sidebar-btn",style:{marginRight:"40px"},children:a.jsx(us,{})}),a.jsx("div",{style:{display:"flex",alignItems:"center",background:"linear-gradient(90deg, #2563eb, #3b82f6)",color:"#fff",padding:"12px 48px 12px 20px",textAlign:"center",fontWeight:"600",fontSize:"1.2rem",boxShadow:"0 2px 6px rgba(0,0,0,0.1)",borderTopLeftRadius:"1px",borderTopRightRadius:"1px",justifyContent:"flex-start"},children:"My Schedule"}),a.jsx("div",{style:{padding:"20px",height:"calc(100% - 60px)",overflowY:"auto",background:"#f9fafb"},children:o?a.jsx("p",{style:{textAlign:"center",color:"#6b7280"},children:"Loading schedule..."}):Object.keys(Z).length===0?a.jsx("p",{style:{textAlign:"center",color:"#6b7280"},children:"No schedule found."}):I.map(G=>{const he=Z[G];if(!he)return null;const ke=new Date().toLocaleDateString("en-US",{weekday:"long"})===G;return a.jsxs("div",{style:{marginBottom:"20px",padding:"10px",borderRadius:"12px",background:ke?"#e0f2fe":"#fff",boxShadow:ke?"0 4px 12px rgba(59, 130, 246, 0.2)":"0 2px 6px rgba(0,0,0,0.05)"},children:[a.jsx("h4",{style:{color:"#1e3a8a",marginBottom:"12px",fontWeight:"600",fontSize:"1.05rem",borderBottom:"1px solid #e5e7eb",paddingBottom:"5px"},children:G}),Object.entries(he).map(([ge,B])=>a.jsxs("div",{style:{marginBottom:"12px",background:"#f3f4f6",padding:"12px 15px",borderRadius:"10px",borderLeft:"5px solid #2563eb",boxShadow:"0 1px 3px rgba(0,0,0,0.05)",transition:"transform 0.2s, box-shadow 0.2s"},children:[a.jsx("strong",{style:{display:"block",marginBottom:"6px",color:"#1e3a8a",fontSize:"0.98rem"},children:ge}),a.jsx("ul",{style:{paddingLeft:"18px",margin:0},children:B.map((me,$)=>a.jsxs("li",{style:{marginBottom:"6px",color:"#374151",fontSize:"0.95rem"},children:[a.jsx("span",{style:{fontWeight:"600",color:"#2563eb"},children:me.class})," - ",me.subject," (",me.time,")"]},$))})]},ge))]},G)})})]}),!L&&a.jsx("button",{title:"Open sidebar",onClick:()=>q(!0),style:{position:"fixed",top:"80px",right:"20px",width:"35px",height:"40px",background:"linear-gradient(90deg, #2563eb, #3b82f6)",color:"#fff",border:"none",borderRadius:"20px",boxShadow:"0 4px 12px rgba(59,130,246, 0.15)",zIndex:301,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"right 0.3s"},children:a.jsx(Kv,{})})]})]})}const hh={id:"",title:"",contentUrl:"",hasExam:!1,order:1},Wy={question:"",options:{A:"",B:"",C:"",D:""},correct:"A",points:1,explanation:""},BN=()=>{const[t,e]=g.useState(!1),[n,r]=g.useState(""),[s,i]=g.useState(""),[o,c]=g.useState([{...hh}]),[u,d]=g.useState(!1),[f,p]=g.useState(""),[y,k]=g.useState(""),w=(H,re,le)=>{c(M=>{const z=[...M];return z[H][re]=le,z})},R=()=>c(H=>[...H,{...hh,order:H.length+1}]),D=H=>{o.length!==1&&c(re=>re.filter((le,M)=>M!==H))},[S,_]=g.useState(""),[v,L]=g.useState(""),[q,se]=g.useState(""),[E,x]=g.useState(30),[j,I]=g.useState(1),[N,O]=g.useState(1),[C,V]=g.useState(!1),[_e,Z]=g.useState([{...Wy}]),[Se,X]=g.useState(!1),[Y,ie]=g.useState(""),[G,he]=g.useState(""),[Ne,ke]=g.useState([]),[ge,B]=g.useState([]),[me,$]=g.useState([]),De=async()=>{try{const re=(await Ma(Ot(Bt,"Curriculum"))).val()||{};ke(Object.keys(re))}catch{ke([])}};g.useEffect(()=>{De()},[]);const te=async H=>{H.preventDefault(),d(!0),p(""),k("");try{if(!n||!s)throw new Error("Grade and Subject required");const re=n.startsWith("grade_")?n:`grade_${n}`,le={};o.forEach((M,z)=>{if(!M.id)throw new Error("Each chapter must have an ID");le[M.id]={...M,order:z+1}}),await Or(Ot(Bt,`Curriculum/${re}/${s}`),{subjectName:s,totalChapters:o.length,chapters:le}),p("Curriculum created/updated successfully!"),r(""),i(""),c([{...hh}]),await De()}catch(re){k(re.message||"Failed to create curriculum")}finally{d(!1)}};g.useEffect(()=>{if(!S){B([]),L("");return}async function H(){try{const le=(await Ma(Mi(Ot(Bt),`Curriculum/${S}`))).val()||{};B(Object.keys(le))}catch{B([])}}H()},[S]),g.useEffect(()=>{if(!S||!v){$([]),se("");return}async function H(){try{const le=(await Ma(Mi(Ot(Bt),`Curriculum/${S}/${v}/chapters`))).val()||{},M=Object.entries(le).map(([z,ne])=>({id:z,title:ne.title||z}));$(M)}catch{$([])}}H()},[S,v]);const be=(H,re,le)=>{Z(M=>{const z=[...M];return re==="options"?z[H].options={...z[H].options,...le}:z[H][re]=le,z})},W=()=>{Z(H=>[...H,{...Wy}]),I(H=>H+1)},oe=H=>{_e.length!==1&&(Z(re=>re.filter((le,M)=>M!==H)),I(re=>re-1))},ce=async H=>{H.preventDefault(),X(!0),ie(""),he("");try{if(!S||!v||!q)throw new Error("Grade, Subject, and Chapter are required");const re=`${v}_${S}`,le={};_e.forEach((M,z)=>{le[`q_${String(z+1).padStart(3,"0")}`]=M}),await A2(Ot(Bt,`Exams/${re}/${q}`),{durationMinutes:Number(E),totalQuestions:Number(j),passScore:Number(N),published:C,questions:le,examId:`${re}_${q}`}),ie("Exam saved successfully!")}catch(re){he(re.message||"Failed to save exam")}finally{X(!1)}};return a.jsxs(a.Fragment,{children:[a.jsx("style",{children:`
        .exam-pro {
          width: 100vw;
          min-height: 100vh;
          margin: 0;
          padding: 0;
          background: linear-gradient(120deg, #f8fafc 60%, #e3f0fc 100%);
          border-radius: 0;
          box-shadow: none;
          font-family: 'Segoe UI', 'Roboto', Arial, sans-serif;
          animation: fadeInExam 0.7s cubic-bezier(.4,0,.2,1);
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: flex-start;
        }
        @keyframes fadeInExam {
          from { opacity: 0; transform: translateY(40px) scale(0.98); }
          to { opacity: 1; transform: none; }
        }
        .exam-section-title {
          font-size: 2.4rem;
          font-weight: 900;
          margin-bottom: 28px;
          color: #0d133d;
          letter-spacing: 0.7px;
          text-shadow: 0 2px 12px #e3e7ed;
        }
        .exam-form-group {
          margin-bottom: 26px;
          display: flex;
          flex-direction: column;
          gap: 8px;
        }
        .exam-label {
          font-weight: 700;
          color: #28384a;
          font-size: 1.13rem;
        }
        .exam-input, .exam-select {
          padding: 12px 16px;
          border: 2px solid #b0bec5;
          border-radius: 8px;
          font-size: 1.13rem;
          background: #f4f8fb;
          transition: border 0.2s, box-shadow 0.2s;
        }
        .exam-input:focus, .exam-select:focus {
          border: 2.5px solid #1976d2;
          outline: none;
          box-shadow: 0 0 0 3px #90caf9;
        }
        .exam-button {
          background: linear-gradient(90deg, #1976d2 60%, #42a5f5 100%);
          color: #fff;
          border: none;
          border-radius: 8px;
          padding: 14px 32px;
          font-size: 1.18rem;
          font-weight: 800;
          cursor: pointer;
          margin-top: 12px;
          box-shadow: 0 3px 14px rgba(25, 118, 210, 0.13);
          transition: background 0.2s, box-shadow 0.2s, transform 0.1s;
        }
        .exam-button:hover:not(:disabled) {
          background: linear-gradient(90deg, #1565c0 60%, #1976d2 100%);
          transform: translateY(-3px) scale(1.04);
          box-shadow: 0 7px 24px rgba(25, 118, 210, 0.16);
        }
        .exam-button:disabled {
          background: #b0bec5;
          cursor: not-allowed;
        }
        .exam-success {
          color: #388e3c;
          font-weight: 700;
          margin-top: 14px;
          font-size: 1.13rem;
        }
        .exam-error {
          color: #d32f2f;
          font-weight: 700;
          margin-top: 14px;
          font-size: 1.13rem;
        }
        .exam-question-card {
          border: 2px solid #e3e7ed;
          border-radius: 14px;
          padding: 26px 22px;
          margin-bottom: 28px;
          background: #f9fbfd;
          box-shadow: 0 4px 16px rgba(44,62,80,0.09);
          transition: box-shadow 0.22s, border 0.18s;
          animation: fadeInExam 0.6s cubic-bezier(.4,0,.2,1);
        }
        .exam-question-card:hover {
          box-shadow: 0 10px 32px rgba(44,62,80,0.13);
          border: 2.5px solid #90caf9;
        }
        .exam-question-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          font-weight: 800;
          color: #1976d2;
          margin-bottom: 14px;
          font-size: 1.18rem;
        }
        .exam-options-row {
          display: flex;
          gap: 16px;
          margin-top: 8px;
        }
        .exam-remove-btn {
          color: #d32f2f;
          background: none;
          border: none;
          font-weight: 800;
          cursor: pointer;
          margin-left: 14px;
          font-size: 1.11rem;
          transition: color 0.15s, text-decoration 0.15s;
        }
        .exam-remove-btn:hover {
          color: #b71c1c;
          text-decoration: underline;
        }
      `}),a.jsxs("div",{className:"exam-pro",children:[a.jsx("h2",{className:"exam-section-title",children:"Create or Edit Curriculum"}),a.jsx("button",{type:"button",className:"exam-button",onClick:()=>e(H=>!H),style:{marginBottom:18},children:t?"Hide Curriculum Form":"Show Curriculum Form"}),t&&a.jsxs("form",{onSubmit:te,style:{border:"1px solid #bbb",borderRadius:8,padding:18,marginBottom:32},children:[a.jsxs("div",{className:"exam-form-group",children:[a.jsx("label",{className:"exam-label",children:"Grade: "}),a.jsx("input",{className:"exam-input",value:n,onChange:H=>r(H.target.value),placeholder:"e.g. 7",required:!0})]}),a.jsxs("div",{className:"exam-form-group",children:[a.jsx("label",{className:"exam-label",children:"Subject: "}),a.jsx("input",{className:"exam-input",value:s,onChange:H=>i(H.target.value),placeholder:"e.g. mathematics",required:!0})]}),a.jsx("h4",{children:"Chapters"}),o.map((H,re)=>a.jsx("div",{className:"exam-question-card",children:a.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[a.jsx("label",{className:"exam-label",children:"ID: "}),a.jsx("input",{className:"exam-input",value:H.id,onChange:le=>w(re,"id",le.target.value),placeholder:"chapter_01",required:!0,style:{width:110}}),a.jsx("label",{className:"exam-label",children:"Title: "}),a.jsx("input",{className:"exam-input",value:H.title,onChange:le=>w(re,"title",le.target.value),placeholder:"Chapter Title",required:!0,style:{width:180}}),a.jsx("label",{className:"exam-label",children:"PDF URL: "}),a.jsx("input",{className:"exam-input",value:H.contentUrl,onChange:le=>w(re,"contentUrl",le.target.value),placeholder:"PDF URL",style:{width:180}}),a.jsx("label",{className:"exam-label",children:"Has Exam: "}),a.jsx("input",{type:"checkbox",checked:!!H.hasExam,onChange:le=>w(re,"hasExam",le.target.checked)}),a.jsx("button",{type:"button",className:"exam-remove-btn",onClick:()=>D(re),children:"Remove"})]})},re)),a.jsx("button",{type:"button",className:"exam-button",onClick:R,style:{marginBottom:12},children:"Add Chapter"}),a.jsx("div",{children:a.jsx("button",{type:"submit",className:"exam-button",disabled:u,children:u?"Saving...":"Save Curriculum"})}),f&&a.jsx("div",{className:"exam-success",children:f}),y&&a.jsx("div",{className:"exam-error",children:y})]}),a.jsx("h2",{className:"exam-section-title",children:"Create Exam"}),a.jsxs("form",{onSubmit:ce,children:[a.jsxs("div",{className:"exam-form-group",children:[a.jsx("label",{className:"exam-label",children:"Grade: "}),a.jsxs("select",{className:"exam-select",value:S,onChange:H=>_(H.target.value),required:!0,children:[a.jsx("option",{value:"",children:"Select Grade"}),Ne.map(H=>a.jsx("option",{value:H,children:H.replace("grade_","Grade ")},H))]})]}),a.jsxs("div",{className:"exam-form-group",children:[a.jsx("label",{className:"exam-label",children:"Subject: "}),a.jsxs("select",{className:"exam-select",value:v,onChange:H=>L(H.target.value),required:!0,disabled:!S,children:[a.jsx("option",{value:"",children:"Select Subject"}),ge.map(H=>a.jsx("option",{value:H,children:H.charAt(0).toUpperCase()+H.slice(1)},H))]})]}),a.jsxs("div",{className:"exam-form-group",children:[a.jsx("label",{className:"exam-label",children:"Chapter: "}),a.jsxs("select",{className:"exam-select",value:q,onChange:H=>se(H.target.value),required:!0,disabled:!v,children:[a.jsx("option",{value:"",children:"Select Chapter"}),me.map(H=>a.jsxs("option",{value:H.id,children:[H.title," (",H.id,")"]},H.id))]})]}),a.jsxs("div",{className:"exam-form-group",children:[a.jsx("label",{className:"exam-label",children:"Duration (minutes): "}),a.jsx("input",{className:"exam-input",type:"number",value:E,onChange:H=>x(H.target.value),min:1,required:!0})]}),a.jsxs("div",{className:"exam-form-group",children:[a.jsx("label",{className:"exam-label",children:"Total Questions: "}),a.jsx("input",{className:"exam-input",type:"number",value:j,onChange:H=>I(H.target.value),min:1,required:!0})]}),a.jsxs("div",{className:"exam-form-group",children:[a.jsx("label",{className:"exam-label",children:"Pass Score: "}),a.jsx("input",{className:"exam-input",type:"number",value:N,onChange:H=>O(H.target.value),min:1,required:!0})]}),a.jsxs("div",{className:"exam-form-group",children:[a.jsx("label",{className:"exam-label",children:"Published: "}),a.jsx("input",{type:"checkbox",checked:C,onChange:H=>V(H.target.checked)})]}),a.jsx("h3",{className:"exam-section-title",style:{fontSize:"1.3rem",marginTop:24},children:"Questions"}),_e.map((H,re)=>a.jsxs("div",{className:"exam-question-card",children:[a.jsxs("div",{className:"exam-question-header",children:[a.jsxs("span",{children:["Question ",re+1]}),_e.length>1&&a.jsx("button",{type:"button",className:"exam-remove-btn",onClick:()=>oe(re),children:"Remove"})]}),a.jsxs("div",{className:"exam-form-group",children:[a.jsx("label",{className:"exam-label",children:"Question: "}),a.jsx("input",{className:"exam-input",value:H.question,onChange:le=>be(re,"question",le.target.value),required:!0})]}),a.jsxs("div",{className:"exam-form-group",children:[a.jsx("label",{className:"exam-label",children:"Options:"}),a.jsx("div",{className:"exam-options-row",children:Object.keys(H.options).map(le=>a.jsxs("span",{children:[le,": ",a.jsx("input",{className:"exam-input",value:H.options[le],onChange:M=>be(re,"options",{[le]:M.target.value}),required:!0,style:{width:80}})]},le))})]}),a.jsxs("div",{className:"exam-form-group",children:[a.jsx("label",{className:"exam-label",children:"Correct Option: "}),a.jsx("select",{className:"exam-select",value:H.correct,onChange:le=>be(re,"correct",le.target.value),children:Object.keys(H.options).map(le=>a.jsx("option",{value:le,children:le},le))})]}),a.jsxs("div",{className:"exam-form-group",children:[a.jsx("label",{className:"exam-label",children:"Points: "}),a.jsx("input",{className:"exam-input",type:"number",value:H.points,min:1,onChange:le=>be(re,"points",le.target.value),required:!0,style:{width:60}})]}),a.jsxs("div",{className:"exam-form-group",children:[a.jsx("label",{className:"exam-label",children:"Explanation: "}),a.jsx("input",{className:"exam-input",value:H.explanation,onChange:le=>be(re,"explanation",le.target.value)})]})]},re)),a.jsx("button",{type:"button",className:"exam-button",onClick:W,style:{marginBottom:18},children:"Add Question"}),a.jsx("div",{children:a.jsx("button",{type:"submit",className:"exam-button",disabled:Se,children:Se?"Saving...":"Save Exam"})}),Y&&a.jsx("div",{className:"exam-success",children:Y}),G&&a.jsx("div",{className:"exam-error",children:G})]})]})]})},Yr="https://gojo-teacher-web.onrender.com/api",ma="https://ethiostore-17d9f-default-rtdb.firebaseio.com",yc=["January","February","March","April","May","June","July","August","September","October","November","December"];function $N(){const[t,e]=g.useState(null),[n,r]=g.useState(null),[s,i]=g.useState([]),[o,c]=g.useState(""),[u,d]=g.useState(""),[f,p]=g.useState(null),[y,k]=g.useState([]),w=Vn(),[R,D]=g.useState([]),[S,_]=g.useState(!1),[v,L]=g.useState(null),[q,se]=g.useState(null),[E,x]=g.useState(""),j=()=>({date:"",dayName:"",topic:"",method:"",aids:"",assessment:""}),[I,N]=g.useState([]),[O,C]=g.useState([]),[V,_e]=g.useState([{month:"",week:"",days:"",topic:"",objective:"",method:"",aids:"",assessment:""}]),[Z,Se]=g.useState([]),[X,Y]=g.useState([]),[ie,G]=g.useState([]),[he,Ne]=g.useState(!1),[ke,ge]=g.useState("daily"),[B,me]=g.useState(!0),[$,De]=g.useState(0),te=s.find(T=>T.id===o)||null,be=g.useRef(new Set),W=kt.useMemo(()=>{const T=n||(t==null?void 0:t.teacherId)||(t==null?void 0:t.teacherKey)||null;return T?String(T).trim():null},[n,t==null?void 0:t.teacherId,t==null?void 0:t.teacherKey]),oe=T=>{const A=new Date(Date.UTC(T.getFullYear(),T.getMonth(),T.getDate())),F=A.getUTCDay()||7;A.setUTCDate(A.getUTCDate()+4-F);const U=new Date(Date.UTC(A.getUTCFullYear(),0,1));return Math.ceil(((A-U)/864e5+1)/7)},ce={sunday:0,monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6},H=kt.useMemo(()=>new Date().toISOString().slice(0,10),[]),re=T=>{const A=new Date(T);A.setHours(0,0,0,0);const F=A.getDay(),U=F===0?-6:1-F;return A.setDate(A.getDate()+U),A},le=T=>{if(!T)return"";const A=new Date(`${T}T00:00:00`);return Number.isNaN(A.getTime())?"":A.toLocaleDateString("en-US",{weekday:"long"})},M=T=>T?Array.isArray(T)?T.map(A=>({date:A.date||A.isoDate||A.dayDate||A.day_date||"",dayName:A.dayName||A.name||A.day||A.label||"",topic:A.topic||A.subject||A.title||"",method:A.method||A.methods||"",aids:A.aids||A.material||A.materials||A.aid||"",assessment:A.assessment||A.assess||A.evaluation||""})):typeof T=="object"?Object.keys(T).map(A=>{const F=T[A]||{};return typeof F=="string"?{date:"",dayName:A,topic:F,method:"",aids:"",assessment:""}:{date:F.date||F.isoDate||F.dayDate||F.day_date||"",dayName:F.dayName||F.name||A,topic:F.topic||F.subject||F.title||"",method:F.method||F.methods||"",aids:F.aids||F.material||F.materials||"",assessment:F.assessment||F.assess||""}}):[]:[],z=kt.useMemo(()=>{if(!Array.isArray(V)||V.length===0)return 0;const T=re(new Date),A=new Date(T);A.setDate(T.getDate()+7);for(let F=0;F<V.length;F+=1){const U=V[F]||{},xe=M(U.weekDays||U.days||[]);for(const ve of xe){const Pe=((ve==null?void 0:ve.date)||"").toString().slice(0,10);if(!Pe)continue;const nt=new Date(`${Pe}T00:00:00`);if(!Number.isNaN(nt.getTime())&&nt>=T&&nt<A)return F}}return Math.max(0,Math.min($,V.length-1))},[V,$]);g.useEffect(()=>{if(!(t!=null&&t.userId)||!o)return;if(!Array.isArray(V)||V.length===0){De(0);return}const T=oe(new Date),A=`lpWeekPointer::${t.userId}::${o}::2025/26`;let F=null;try{F=JSON.parse(localStorage.getItem(A))}catch{F=null}let U=F&&typeof F.pointerIndex=="number"?F.pointerIndex:0,xe=F&&typeof F.lastIsoWeek=="number"?F.lastIsoWeek:T;if(T!==xe){const Pe=T-xe;Pe>0?U+=Pe:U=0,xe=T}const ve=Math.max(0,V.length-1);U=Math.max(0,Math.min(U,ve));try{localStorage.setItem(A,JSON.stringify({pointerIndex:U,lastIsoWeek:xe}))}catch{}De(U)},[t==null?void 0:t.userId,o,V]),g.useEffect(()=>{if(!t)return Se([]);const T=Array.isArray(V)&&V.length?V[Math.max(0,Math.min(z,V.length-1))]:null;if(!T){Se([]);return}const A=new Date().getDay(),F=[],U=Math.max(0,Math.min(z,V.length-1)),xe=T;M(xe.weekDays||xe.days||[]).forEach((nt,st)=>{const Be=(nt.date||"").toString().slice(0,10),tt=Be?le(Be):"",it=(nt.dayName||nt.name||tt||"").toString().trim(),P=`${W||"anon"}::${o||"nocourse"}::${xe.week||U}::${it||st}`,ae=ie.includes(P),Ee=(it||"").toLowerCase(),Te=Ee&&ce.hasOwnProperty(Ee)?ce[Ee]:null,Me=ae?"submitted":Te!==null&&Te<A?"missed":"pending",qe=Be?Be===H:Te===A;F.push({key:P,dayName:it||`Day ${st+1}`,topic:nt.topic||xe.topic||"",week:xe.week,status:Me,scheduledIndex:Te,date:Be,isToday:qe})});const Pe=F.filter(nt=>nt.isToday);Se(Pe)},[V,z,o,t,W,ie,H]),g.useEffect(()=>{if(!t||!t.userId)return Y([]);(async()=>{try{const F=(await ee.get(`${ma}/LessonPlans.json`)).data||{};let U=null;if(F[t.userId])U=F[t.userId];else{const P=Object.values(F).filter(ae=>ae?!!(ae.teacherId&&String(ae.teacherId)===String(t.userId)||ae.teacherUserId&&String(ae.teacherUserId)===String(t.userId)):!1);P.length===1?U=P[0]:P.length>1&&(U=P.reduce((ae,Ee)=>({...ae,...Ee}),{}))}const xe=new Date().toLocaleDateString("en-US",{weekday:"long"}),ve=new Date().getDay(),Pe=Array.isArray(V)&&V.length?V[Math.max(0,Math.min(z,V.length-1))]:null,nt=Pe==null?void 0:Pe.week,st=(P,ae)=>Array.isArray(P)?P.map((Ee,Te)=>{const Me=(Ee.dayName||Ee.name||Ee.day||Ee.label||"").toString(),qe=Ee.topic||Ee.subject||Ee.title||"",Xe=ae||Ee.week||null,Fe=Me&&ce.hasOwnProperty(Me.toLowerCase())?ce[Me.toLowerCase()]:null,Qe=`${W||"anon"}::${o||"nocourse"}::${Xe||""}::${Me||Te}`,Le=ie.includes(Qe)?"submitted":Fe!==null&&Fe<ve?"missed":"pending";return{key:Qe,dayName:Me||`Day ${Te+1}`,topic:qe,week:Xe,status:Le,scheduledIndex:Fe}}):[];let Be=[];U&&(Array.isArray(U.daily)?Be=st(U.daily,U.week):Array.isArray(U.days)?Be=st(U.days,U.week):Array.isArray(U.weekDays)?Be=st(U.weekDays,U.week):U.weeks&&typeof U.weeks=="object"?Object.entries(U.weeks).forEach(([P,ae])=>{const Ee=ae.weekDays||ae.days||ae.daily||[],Te=st(Ee,ae.week||P);Te&&Te.length&&(Be=Be.concat(Te))}):Object.keys(U).forEach(P=>{if(P.startsWith("week_")||P.startsWith("week")){const ae=U[P],Ee=ae.weekDays||ae.days||ae.daily||[];Be=Be.concat(st(Ee,ae.week||P.replace(/^week_?/,"")))}})),Be.length||Object.values(F).forEach(P=>{if(!P)return;const ae=P.weekDays||P.days||P.daily||[];Array.isArray(ae)&&ae.length&&(Be=Be.concat(st(ae,P.week||P.weekNumber||null)))});const it=(nt?Be.filter(P=>String(P.week)===String(nt)):Be).filter(P=>P.scheduledIndex===ve||P.dayName&&P.dayName.toLowerCase()===xe.toLowerCase());Y(it)}catch(A){console.error("Failed to fetch LessonPlans from RTDB",A),Y([])}})()},[t,o,ie,V,z]);const ne=async()=>{if(!(!W||!o)){try{const T=await ee.get(`${Yr}/lesson-plans/submissions`,{params:{teacherId:W,courseId:o,academicYear:"2025/26"}});if(T.data&&T.data.success&&Array.isArray(T.data.data)){const A=T.data.data.map(F=>F.key).filter(Boolean);return G(A),A}}catch(T){console.warn("Could not fetch submissions from API, will rely on local cache",(T==null?void 0:T.message)||T)}return[]}};g.useEffect(()=>{ne()},[W,o]),g.useEffect(()=>{!W||!o||!V||V.length===0||ne().catch(()=>{})},[W,o,V]);const ue=async T=>{var A;if(T){if(T.status==="missed"){alert("Cannot submit a lesson for a day that has already passed.");return}if(ie.includes(T.key)){Se(F=>F.map(U=>U.key===T.key?{...U,status:"submitted"}:U));return}try{if(!W){alert("TeacherId not resolved yet. Please refresh and try again.");return}const F={teacherId:W,courseId:o,academicYear:"2025/26",week:T.week,dayName:T.dayName,key:T.key,submittedAt:new Date().toISOString()},U=await ee.post(`${Yr}/lesson-plans/submit-daily`,F);if(U!=null&&U.data&&U.data.success)await ne(),Se(xe=>xe.map(ve=>ve.key===T.key?{...ve,status:"submitted"}:ve));else{const xe=((A=U==null?void 0:U.data)==null?void 0:A.message)||JSON.stringify(U==null?void 0:U.data)||"Submission failed";throw new Error(xe)}}catch(F){console.error("Submit daily plan failed:",F);try{localStorage.setItem(T.key,"submitted"),G(U=>[...U,T.key]),Se(U=>U.map(xe=>xe.key===T.key?{...xe,status:"submitted"}:xe)),alert("Unable to reach server; saved locally. Submission marked locally.")}catch{alert("Failed to submit daily plan. Please try again.")}}}};g.useRef({}),t==null||t.userId;const Ce=g.useRef(null);g.useEffect(()=>{const T=JSON.parse(localStorage.getItem("teacher"));if(!T){w("/login");return}e(T),r((T==null?void 0:T.teacherId)||(T==null?void 0:T.teacherKey)||null)},[]),g.useEffect(()=>{(async()=>{if(!(!W||!o)){Ne(!0),_e([]);try{const A=await ee.get(`${Yr}/lesson-plans/${W}`,{params:{academicYear:"2025/26",courseId:o}});if(A.data&&A.data.success){const F=A.data.data||{};let U=null;if(F.annual&&Array.isArray(F.annual.annualRows)?U=F.annual.annualRows:Array.isArray(F.annualRows)&&(U=F.annualRows),Array.isArray(U)&&U.length>0){_e(pe(U));try{await ne()}catch{}}else{const xe=bt(F);xe.length?_e(pe(xe)):_e([]);try{await ne()}catch{}}}}catch(A){console.error("Error fetching lesson plans:",A),_e([])}finally{Ne(!1)}}})()},[W,o]),g.useEffect(()=>{if(!t)return;(async()=>{try{const A="https://ethiostore-17d9f-default-rtdb.firebaseio.com",[F,U,xe]=await Promise.all([ee.get(`${A}/Courses.json`),ee.get(`${A}/TeacherAssignments.json`),ee.get(`${A}/Teachers.json`)]),ve=Object.entries(xe.data||{}).find(([Be,tt])=>tt.userId===t.userId);if(!ve)return;const Pe=ve[0];if(r(Pe),Pe&&String((t==null?void 0:t.teacherId)||"")!==String(Pe)){const Be={...t||{},teacherId:Pe};e(Be);try{localStorage.setItem("teacher",JSON.stringify(Be))}catch{}}const st=Object.values(U.data||{}).filter(Be=>Be.teacherId===Pe).map(Be=>({id:Be.courseId,...F.data?F.data[Be.courseId]:{}}));i(st),!o&&st.length&&c(st[0].id)}catch(A){console.error("Error fetching courses for lesson plan:",A)}})()},[t]),g.useEffect(()=>{(async()=>{try{const U=((await ee.get(`${Yr}/get_posts`)).data||[]).slice(0,5).map(xe=>{var ve;return{id:xe.postId,title:((ve=xe.message)==null?void 0:ve.substring(0,50))||"Untitled post",adminName:xe.adminName||"Admin",adminProfile:xe.adminProfile||"/default-profile.png"}});D(U)}catch(A){console.error("Error fetching notifications:",A)}})()},[]);const Oe=async(T=null)=>{var A;try{if(!W){alert("TeacherId not resolved yet. Please refresh and try again.");return}const F=typeof T=="number"?T:q,U=typeof F=="number"&&((A=V[F])==null?void 0:A.week)||F,xe={teacherId:W,courseId:o,academicYear:"2025/26",week:U,weekTopic:E,days:I},ve=await ee.post(`${Yr}/lesson-plans/save-week`,xe);if(typeof F=="number"){const Pe=[...V];Pe[F]={...Pe[F],topic:E,weekDays:I},_e(Pe)}console.info("Save week response:",(ve==null?void 0:ve.data)||ve),alert("Week plan saved successfully!"),se(null)}catch(F){console.error("Save week error:",F);let U="Failed to save lesson plan";F.response?U+=`  server responded ${F.response.status}: ${JSON.stringify(F.response.data)}`:F.request?U+="  no response received (network/CORS issue)":F.message&&(U+=`  ${F.message}`),alert(U)}},de=()=>[],pe=T=>Array.isArray(T)?T.map(A=>({month:A.month||"",week:A.week||A.weekNumber||"",weekDays:Array.isArray(A.weekDays)?A.weekDays:Array.isArray(A.days)?A.days:A.weekDays||A.days||null,days:A.weekDays||A.days||A.daysList||"",topic:A.topic||A.weekTopic||"",objective:A.objective||A.goals||"",method:A.method||A.methods||"",material:A.aids||A.material||A.materials||"",assessment:A.assessment||A.assess||""})):[],Ae=T=>T?Array.isArray(T)?T.map(A=>({date:A.date||A.isoDate||A.dayDate||A.day_date||"",dayName:A.dayName||A.name||A.day||A.label||"",topic:A.topic||A.subject||A.title||"",method:A.method||A.methods||"",aids:A.aids||A.material||A.materials||A.aid||"",assessment:A.assessment||A.assess||A.evaluation||""})):typeof T=="object"?Object.keys(T).map(A=>{const F=T[A]||{};return typeof F=="string"?{date:"",dayName:A,topic:F,method:"",aids:"",assessment:""}:{date:F.date||F.isoDate||F.dayDate||F.day_date||"",dayName:F.dayName||F.name||A,topic:F.topic||F.subject||"",method:F.method||F.methods||"",aids:F.aids||F.material||"",assessment:F.assessment||F.assess||""}}):[]:[],Ue=V&&V.length?Math.max(0,Math.min(z,V.length-1)):null,Ge=Ue!==null&&V[Ue]?V[Ue]:null,vt=Ge?Ae(Ge.weekDays||Ge.days||[]):[];g.useEffect(()=>{if(!W||!o||Ue==null)return;const T=V==null?void 0:V[Ue];if(!T||M(T.weekDays||T.days||[]).length)return;const F=T.week||Ue,U=`${W}::${o}::${F}`;if(be.current.has(U))return;be.current.add(U);let xe=!1;return(async()=>{try{const ve=await ee.get(`${Yr}/lesson-plans/${W}`,{params:{academicYear:"2025/26",courseId:o}});if(!ve.data||!ve.data.success)return;const Pe=ve.data.data||{},nt=`week_${F}`;let st=null;if(Pe[nt]?st=Pe[nt]:Pe.annual&&Array.isArray(Pe.annual.annualRows)?st=Pe.annual.annualRows.find(tt=>String(tt.week||tt.weekNumber)===String(F)):Array.isArray(Pe.annualRows)&&(st=Pe.annualRows.find(tt=>String(tt.week||tt.weekNumber)===String(F))),!st)return;const Be=Ae(st.days||st.weekDays||st.week_days||[]);if(!Be.length||xe)return;_e(tt=>{const it=Array.isArray(tt)?[...tt]:[];return it[Ue]?(it[Ue]={...it[Ue],weekDays:Be},it):tt})}catch(ve){console.warn("Could not preload active week details for sidebar",(ve==null?void 0:ve.message)||ve)}})(),()=>{xe=!0}},[W,o,Ue]);const We=kt.useMemo(()=>{const T={};return(V||[]).forEach(A=>{let F=(A.month||"").toString().trim();if(!F){const xe=M(A.weekDays||A.days||[]).find(Pe=>((Pe==null?void 0:Pe.date)||"").toString().slice(0,10)),ve=((xe==null?void 0:xe.date)||"").toString().slice(0,10);if(ve){const Pe=new Date(`${ve}T00:00:00`);Number.isNaN(Pe.getTime())||(F=yc[Pe.getMonth()])}}F||(F="Unspecified"),T[F]||(T[F]=[]),T[F].push(A)}),T},[V]),Et=T=>{if(!T)return null;const A=String(T).trim();if(!A)return null;const F=A.replace(/[^0-9]/g,"");if(F){const ve=parseInt(F,10);if(ve>=1&&ve<=12)return ve-1}const U=yc.findIndex(ve=>ve.toLowerCase()===A.toLowerCase());if(U!==-1)return U;const xe=new Date(`${A} 1, 2026`);return Number.isNaN(xe.getTime())?null:xe.getMonth()},Ze=kt.useMemo(()=>{const T=Object.keys(We||{});if(!T.length)return null;const A=new Date().getMonth(),F=yc[A],U=T.find(ve=>ve.toLowerCase().trim()===F.toLowerCase());return U||T.find(ve=>Et(ve)===A)||null},[We]),Lt=kt.useMemo(()=>Ze?(We==null?void 0:We[Ze])||[]:[],[We,Ze]),Ct=T=>{if(!T)return null;const A=(T||"").toString().toLowerCase();return ce.hasOwnProperty(A)?ce[A]:null},Rt=(T,A,F)=>`${W||"anon"}::${o||"nocourse"}::${T||Ue||0}::${A||F}`,Xt=(T,A)=>{const F=new Date().getDay(),U=Ct(T.dayName||""),xe=Rt((Ge==null?void 0:Ge.week)||Ue,T.dayName,A);return ie.includes(xe)?{status:"submitted",key:xe}:U!==null&&U<F?{status:"missed",key:xe}:{status:"pending",key:xe}},Zt=kt.useMemo(()=>{const T={submitted:0,missed:0,pending:0,total:0};return(vt||[]).forEach((A,F)=>{const U=Xt(A,F);T[U.status]=(T[U.status]||0)+1,T.total+=1}),T},[vt,ie]),_n=kt.useMemo(()=>{const T={submitted:0,missed:0,pending:0,total:0};return((X&&X.length?X:Z)||[]).forEach(F=>{const U=F.status||"pending";T[U]=(T[U]||0)+1,T.total+=1}),T},[Z,X,ie]),ws=kt.useMemo(()=>(Lt==null?void 0:Lt.length)||0,[Lt]),Dn=kt.useMemo(()=>{const T={};return Object.entries(We||{}).forEach(([A,F])=>{const U={submitted:0,missed:0,pending:0,total:0,topics:[]};(F||[]).forEach(xe=>{const ve=Array.isArray(xe.weekDays)?xe.weekDays:Array.isArray(xe.days)?xe.days:[];Ae(ve||[]).forEach((nt,st)=>{const Be=Ct(nt.dayName||""),tt=new Date().getDay(),it=Rt(xe.week||Ue,nt.dayName,st);ie.includes(it)?U.submitted+=1:Be!==null&&Be<tt?U.missed+=1:U.pending+=1,U.total+=1}),xe.topic&&U.topics.push(xe.topic)}),T[A]=U}),T},[We,ie,V]),Zn=()=>ke==="daily"?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsx("h3",{className:"font-semibold",children:"Today's Plan"}),a.jsxs("div",{style:{textAlign:"right"},children:[a.jsx("div",{style:{fontSize:12,color:"#666"},children:"Today"}),a.jsx("div",{style:{fontWeight:700},children:_n.total})]})]}),(X&&X.length>0?X:Z&&Z.length>0)?a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:10},children:(X&&X.length>0?X:Z).map((T,A)=>{const F=T.status||"pending",U=F==="submitted"?"#2f855a":F==="missed"?"#c53030":"#4a5568";return a.jsxs("div",{style:{display:"flex",gap:12,padding:12,borderRadius:10,background:"#fff",boxShadow:"0 4px 10px rgba(11,20,30,0.04)",alignItems:"center"},children:[a.jsx("div",{style:{width:8,height:48,borderRadius:6,background:U}}),a.jsxs("div",{style:{flex:1},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsx("div",{style:{fontWeight:700},children:T.dayName||`Plan ${A+1}`}),a.jsxs("div",{style:{fontSize:12,color:"#666"},children:["Week: ",T.week||"-"]})]}),a.jsx("div",{style:{fontSize:13,color:"#333",marginTop:6},children:T.topic||"No topic provided"}),a.jsxs("div",{style:{fontSize:12,color:"#666",marginTop:6},children:["Quick note: ",T.note||T.description||"-"]})]}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:8},children:[a.jsx("div",{style:{background:U,color:"#fff",padding:"6px 10px",borderRadius:999,fontSize:12,fontWeight:700},children:F==="submitted"?"Submitted":F==="missed"?"Missed":"Pending"}),F==="pending"?a.jsx("button",{onClick:()=>ue(T),className:"btn btn-primary",style:{padding:"6px 10px",borderRadius:8},children:"Submit"}):F==="missed"?a.jsx("button",{className:"btn",disabled:!0,style:{padding:"6px 10px",borderRadius:8,background:"#c53030",color:"#fff"},children:"Missed"}):null]})]},T.key||A)})}):a.jsx("div",{style:{textAlign:"center",color:"#666"},children:"No plans for today."})]}):ke==="weekly"?a.jsxs("div",{className:"sidebar-week-list",children:[a.jsx("h3",{className:"font-semibold",children:"Week Plan"}),(vt||[]).map((T,A)=>{const F=Xt(T,A),U=F.status,xe=U==="submitted"?"#2f855a":U==="missed"?"#c53030":"#4a5568",ve=U==="submitted"?"#d9f8d5":U==="missed"?"#ffe4e4":"#ffffff";return a.jsxs("div",{className:`sidebar-week-card ${U}`,style:{display:"flex",gap:22,color:"#333",padding:12,borderRadius:10,background:ve,alignItems:"center",boxShadow:"0 6px 14px rgba(11,20,30,0.04)"},children:[a.jsx("div",{style:{width:10,height:46,borderRadius:6,background:U==="submitted"?"linear-gradient(180deg,#9ae6b4,#2f855a)":U==="missed"?"linear-gradient(180deg,#feb2b2,#c53030)":"linear-gradient(180deg,#e2e8f0,#4a5568)"}}),a.jsxs("div",{style:{flex:1},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsx("div",{style:{fontWeight:700},children:T.dayName||`Day ${A+1}`}),a.jsx("div",{style:{fontSize:12,color:"#666"},children:Ge!=null&&Ge.week?`Week ${Ge.week}`:""})]}),a.jsx("div",{style:{fontSize:13,color:"#333",marginTop:6},children:T.topic||(Ge==null?void 0:Ge.topic)||"No topic set"})]}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:8},children:[a.jsx("div",{style:{background:xe,color:"#fff",padding:"6px 10px",borderRadius:999,fontSize:12,fontWeight:700},children:U==="submitted"?"Submitted":U==="missed"?"Missed":"Pending"}),U==="pending"&&a.jsx("button",{onClick:()=>ue({key:F.key,week:Ge==null?void 0:Ge.week,dayName:T.dayName,status:U}),className:"btn btn-primary",style:{padding:"6px 10px",borderRadius:8},children:"Submit"})]})]},A)})]}):a.jsxs("div",{className:"space-y-2",children:[a.jsx("h3",{className:"font-semibold",children:"This Month"}),!Ze&&a.jsx("div",{className:"text-xs text-gray-500",children:"No plans for this month."}),Ze&&(()=>{const T=Ze,A=Lt,F=Dn[T]||{total:0,submitted:0,missed:0,pending:0,topics:[]},U=F.total?Math.round(F.submitted/F.total*100):0;return a.jsxs("div",{style:{padding:12,borderRadius:10,background:"#fff",boxShadow:"0 6px 14px rgba(12,20,30,0.04)",marginBottom:8},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:800},children:T}),a.jsxs("div",{style:{fontSize:12,color:"#666"},children:[A.length," week(s)  ",F.total," day(s)"]})]}),a.jsxs("div",{style:{textAlign:"right"},children:[a.jsx("div",{style:{fontSize:12,color:"#666"},children:"Completed"}),a.jsxs("div",{style:{fontWeight:700},children:[U,"%"]})]})]}),a.jsx("div",{style:{height:8,background:"#edf2f7",borderRadius:999,marginTop:10,overflow:"hidden"},children:a.jsx("div",{style:{width:`${U}%`,height:"100%",background:"linear-gradient(90deg,#67e8f9,#4b6cb7)"}})}),a.jsx("div",{style:{display:"flex",gap:8,marginTop:10,alignItems:"center"},children:a.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[a.jsxs("div",{style:{fontSize:12,color:"#2f855a"},children:["Submitted: ",a.jsx("strong",{children:F.submitted})]}),a.jsxs("div",{style:{fontSize:12,color:"#c53030"},children:["Missed: ",a.jsx("strong",{children:F.missed})]}),a.jsxs("div",{style:{fontSize:12,color:"#4a5568"},children:["Pending: ",a.jsx("strong",{children:F.pending})]})]})}),F.topics&&F.topics.length>0&&a.jsxs("div",{style:{marginTop:10},children:[a.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:6},children:"Topics this month"}),a.jsx("ul",{style:{margin:0,paddingLeft:16},children:F.topics.slice(0,3).map((xe,ve)=>a.jsx("li",{style:{fontSize:13,color:"#333"},children:xe},ve))})]})]},T)})()]}),bt=T=>{const A=[];return Object.keys(T).forEach(F=>{if(F.startsWith("week_")){const U=T[F]||{};A.push({month:U.month||"",week:U.week||F.replace("week_",""),days:U.days||U.weekDays||[],topic:U.weekTopic||U.topic||"",objective:U.objective||"",method:U.method||"",material:U.aids||U.material||"",assessment:U.assessment||""})}}),A},er=(T=null)=>{N(T===null?[...I,j()]:[...I.slice(0,T),j(),...I.slice(T)])},Ft=T=>{N(I.filter((A,F)=>F!==T))},hr=T=>{const A=V.filter((U,xe)=>xe!==T);_e(A);const F=O.filter(U=>U!==T).map(U=>U>T?U-1:U);C(F),q===T?se(null):typeof q=="number"&&q>T&&se(q-1)},Tr=async()=>{try{if(!W){alert("TeacherId not resolved yet. Please refresh and try again.");return}const T={teacherId:W,courseId:o,academicYear:"2025/26",annualRows:V},A=await ee.post(`${Yr}/lesson-plans/save-annual`,T);console.info("Save annual response:",(A==null?void 0:A.data)||A),alert("Annual plan saved successfully!")}catch(T){console.error("Save annual error:",T);let A="Failed to save annual plan";T.response?A+=`  ${T.response.status}: ${JSON.stringify(T.response.data)}`:T.request?A+="  no response (network/CORS)":T.message&&(A+=`  ${T.message}`),alert(A)}},tr=[];V.forEach(T=>{const A=Array.isArray(T.weekDays)?T.weekDays:Array.isArray(T.days)?T.days:[];A.length?A.forEach(F=>{tr.push([T.month||"",T.week||"",F.dayName||"",F.topic||"",F.method||"",F.aids||"",F.assessment||"",T.topic||"",T.objective||""])}):tr.push([T.month||"",T.week||"","",T.topic||"",T.method||"",T.aids||"",T.assessment||"",T.topic||"",T.objective||""])});const nn=T=>{const A=V[T]||{};se(T),x(A.topic||"");const F=U=>{N(Array.isArray(U)&&U.length?U:de())};A.weekDays&&Array.isArray(A.weekDays)&&A.weekDays.length?F(A.weekDays):(async()=>{try{if(!W)return F([]);const U=await ee.get(`${Yr}/lesson-plans/${W}`,{params:{academicYear:"2025/26",courseId:o}});if(U.data&&U.data.success){const xe=U.data.data||{},ve=`week_${A.week||A.weekNumber||A.weekId||T}`,Pe=xe[ve]||(xe.annual&&Array.isArray(xe.annual.week)?{}:null);let nt=null;if(xe[ve]?nt=xe[ve]:xe.annual&&xe.annual.annualRows&&(nt=xe.annual.annualRows.find(st=>String(st.week)===String(A.week))),nt){const st=Ae(nt.days||nt.weekDays||nt.weekDays||[]);F(st);const Be=[...V];Be[T]={...Be[T],weekDays:st},_e(Be)}else F([])}else F([])}catch(U){console.error("Error fetching week details:",U),F([])}})(),O.includes(T)||C([...O,T])},zl=T=>{O.includes(T)?(C(O.filter(A=>A!==T)),q===T&&se(null)):(nn(T),C([T]))};g.useEffect(()=>{const T=JSON.parse(localStorage.getItem("teacher"));if(!T){w("/login");return}e(T)},[w]),g.useEffect(()=>{(async()=>{try{let F=(await ee.get(`${Yr}/get_posts`)).data||[];!Array.isArray(F)&&typeof F=="object"&&(F=Object.values(F));const[U,xe,ve]=await Promise.all([ee.get(`${ma}/School_Admins.json`),ee.get(`${ma}/Users.json`),ee.get(`${ma}/Chats.json`)]),Pe=U.data||{},nt=xe.data||{},st=ve.data||{},Be=JSON.parse(localStorage.getItem("teacher")),tt=Gr(Be==null?void 0:Be.userId),it=Te=>{const Me=Te.adminId||Te.posterAdminId||Te.poster||Te.admin||null;if(Me&&Pe[Me]){const qe=Pe[Me],Xe=qe.userId,Fe=nt[Xe]||null,Qe=Fe&&Fe.name||qe.name||Te.adminName||"Admin",$e=Fe&&Fe.profileImage||qe.profileImage||Te.adminProfile||"/default-profile.png";return{name:Qe,profile:$e}}return{name:Te.adminName||"Admin",profile:Te.adminProfile||"/default-profile.png"}},P=F.slice().sort((Te,Me)=>{const qe=Te.time?new Date(Te.time).getTime():0;return(Me.time?new Date(Me.time).getTime():0)-qe}).filter(Te=>Te.postId&&!tt.includes(Te.postId)).slice(0,5).map(Te=>{var qe;const Me=it(Te);return{id:Te.postId,type:"post",title:((qe=Te.message)==null?void 0:qe.substring(0,50))||"Untitled post",adminName:Me.name,adminProfile:Me.profile}});let ae=[];Be&&Be.userId&&Object.entries(st).forEach(([Te,Me])=>{const Xe=(Me.unread||{})[Be.userId]||0;if(!Xe)return;const Fe=Me.participants||{},Qe=Object.keys(Fe).find(Le=>Le!==Be.userId);let $e=nt[Qe]||{userId:Qe,name:Qe,profileImage:"/default-profile.png"};ae.push({chatId:Te,type:"message",displayName:$e.name||$e.username||Qe,profile:$e.profileImage||$e.profile||"/default-profile.png",unreadForMe:Xe})});const Ee=[...P,...ae].slice(0,5);D(Ee)}catch(A){console.error("Error fetching notifications:",A)}})()},[]);const qo=async T=>{if(t){if(T.type==="post"&&T.id)si(t.userId,T.id),D(A=>A.filter(F=>F.id!==T.id)),_(!1),w("/dashboard");else if(T.type==="message"&&T.chatId){D(A=>A.filter(F=>F.chatId!==T.chatId)),_(!1);try{await ee.put(`${ma}/Chats/${T.chatId}/unread/${t.userId}.json`,null)}catch{}w("/all-chat")}}};function Gr(T){return JSON.parse(localStorage.getItem(`seen_posts_${T}`))||[]}function si(T,A){const F=Gr(T);F.includes(A)||localStorage.setItem(`seen_posts_${T}`,JSON.stringify([...F,A]))}const ii=R.filter(T=>T.type==="message").reduce((T,A)=>T+(A.unreadForMe||0),0),oi=()=>{localStorage.removeItem("teacher"),w("/login")};if(!t)return null;const On=B?"50%":"75%";return a.jsxs("div",{className:"dashboard-page",children:[a.jsxs("nav",{className:"top-navbar",children:[a.jsx("h2",{children:"Gojo Dashboard"}),a.jsxs("div",{className:"nav-right",children:[a.jsxs("div",{className:"icon-circle",children:[a.jsxs("div",{onClick:()=>_(!S),style:{cursor:"pointer",position:"relative"},children:[a.jsx(gs,{size:24}),R.length>0&&a.jsx("span",{style:{position:"absolute",top:-5,right:-5,background:"red",color:"white",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:R.length})]}),S&&a.jsx("div",{style:{position:"absolute",top:30,right:0,width:300,maxHeight:400,overflowY:"auto",background:"#fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",borderRadius:8,zIndex:100},children:R.length>0?R.map((T,A)=>T.type==="post"?a.jsxs("div",{onClick:()=>qo(T),style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:T.adminProfile,alt:T.adminName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:T.adminName}),a.jsx("p",{style:{margin:0,fontSize:12},children:T.title})]})]},T.id||A):a.jsxs("div",{onClick:()=>qo(T),style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:T.profile||"/default-profile.png",alt:T.displayName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:T.displayName}),a.jsx("p",{style:{margin:0,fontSize:12,color:"#0b78f6"},children:"New message"})]})]},T.chatId||A)):a.jsx("div",{style:{padding:15},children:"No notifications"})})]}),a.jsx("div",{className:"icon-circle",style:{position:"relative",marginLeft:12},children:a.jsxs("div",{onClick:()=>w("/all-chat"),style:{cursor:"pointer",position:"relative"},children:[a.jsx(ms,{size:22}),ii>0&&a.jsx("span",{style:{position:"absolute",top:-6,right:-6,background:"#f60b0b",color:"#fff",borderRadius:"50%",minWidth:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 5px"},children:ii})]})}),a.jsx(ye,{className:"icon-circle",to:"/settings",children:a.jsx(Ir,{})}),a.jsx("img",{src:(t==null?void 0:t.profileImage)||"/default-profile.png",alt:"teacher",className:"profile-img"})]})]}),a.jsxs("div",{className:"google-dashboard",children:[a.jsxs("div",{className:"google-sidebar",children:[a.jsxs("div",{className:"sidebar-profile",children:[a.jsx("div",{className:"sidebar-img-circle",children:a.jsx("img",{src:(t==null?void 0:t.profileImage)||"/default-profile.png",alt:"profile"})}),a.jsx("h3",{children:t==null?void 0:t.name}),a.jsx("p",{children:t==null?void 0:t.username})]}),a.jsxs("div",{className:"sidebar-menu",children:[a.jsxs(ye,{className:"sidebar-btn",to:"/dashboard",children:[a.jsx(Hr,{})," Home"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/students",children:[a.jsx(Ut,{})," Students"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/admins",children:[a.jsx(Ut,{})," Admins"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/parents",children:[a.jsx(Wr,{})," Parents"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/marks",children:[a.jsx(lr,{})," Marks"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/attendance",children:[a.jsx(xs,{})," Attendance"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/schedule",children:[a.jsx(Ur,{})," Schedule"]}),a.jsxs(ye,{className:"sidebar-btn",to:"/lesson-plan",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[a.jsx(ys,{})," Lesson Plan"]}),a.jsxs("button",{className:"sidebar-btn logout-btn",onClick:oi,children:[a.jsx(Vr,{})," Logout"]})]})]}),a.jsxs("div",{className:"lesson-main",style:{width:On,position:"relative"},children:[a.jsxs("div",{className:"lesson-card-header",children:[a.jsxs("div",{className:"lesson-title",children:[a.jsx("h2",{children:"Annual Lesson Plan"}),a.jsx("p",{className:"muted",children:"Create your course roadmap  add rows, expand weeks and save."}),te?a.jsxs("div",{className:"course-info",children:[a.jsx("div",{className:"course-name",children:te.title||te.name||te.subject||"Selected Course"}),a.jsxs("div",{className:"course-meta",children:[te.grade&&a.jsxs("span",{className:"meta-badge",children:["Grade ",te.grade]}),te.section&&a.jsxs("span",{className:"meta-badge",children:["Section ",te.section]}),te.subject&&a.jsx("span",{className:"meta-badge",children:te.subject}),a.jsx("span",{className:"meta-badge",children:"Academic Year: 2025/26"})]})]}):a.jsx("div",{style:{marginTop:8,color:"#666",fontSize:13},children:"Please select a course to view its lesson plan."})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:6},children:[a.jsx("label",{style:{fontSize:18,color:"#1f1818",fontWeight:600},children:"Course"}),a.jsxs("select",{value:o,onChange:T=>c(T.target.value),style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:"#fff"},children:[a.jsx("option",{value:"",children:"-- Select Course --"}),s.map((T,A)=>a.jsx("option",{value:T.id,children:T.title||T.name||T.subject||T.courseName||`Course ${A+1}`},T.id||A))]})]}),a.jsx("div",{style:{display:"flex",gap:8},children:a.jsxs("button",{onClick:Tr,className:"btn btn-success",children:[a.jsx(ff,{style:{marginRight:8}}),"Save Annual"]})})]})]}),a.jsxs("div",{className:"lesson-card",ref:Ce,style:{marginTop:16,overflowX:"auto"},children:[he?a.jsx("div",{style:{padding:24,textAlign:"center"},children:"Loading lesson plan for selected course..."}):a.jsx(a.Fragment,{children:a.jsxs("table",{className:"lesson-table",children:[a.jsx("thead",{children:a.jsx("tr",{children:["Month","Week","Days","Topic","Objective","Method","Materials","Assessment"].map(T=>a.jsx("th",{children:T},T))})}),a.jsx("tbody",{children:V.map((T,A)=>a.jsxs(kt.Fragment,{children:[a.jsxs("tr",{children:[["month","week","days","topic","objective","method","material","assessment"].map(U=>{if(U==="month")return a.jsx("td",{style:{padding:8},children:a.jsxs("select",{className:"input input-full",value:(T.month||"").toString(),onChange:ve=>{const Pe=[...V];Pe[A].month=ve.target.value,_e(Pe)},children:[a.jsx("option",{value:"",children:"-- Select Month --"}),yc.map(ve=>a.jsx("option",{value:ve,children:ve},ve))]})},U);if(U==="week")return a.jsx("td",{style:{padding:8},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("input",{className:"input input-full",value:T.week||"",onChange:ve=>{const Pe=[...V];Pe[A].week=ve.target.value,_e(Pe)}}),a.jsx("button",{onClick:()=>zl(A),title:O.includes(A)?"Hide Days":"Add Days","aria-label":O.includes(A)?"Hide Days":"Add Days",className:"btn "+(O.includes(A)?"btn-ghost":"btn-primary"),style:{width:36,height:36,borderRadius:18,padding:0,display:"inline-flex",alignItems:"center",justifyContent:"center"},children:O.includes(A)?a.jsx(Mj,{}):a.jsx(Oj,{})})]})},U);if(U==="days"){const ve=T.days||[],Pe=Array.isArray(ve)?ve.map(nt=>nt.dayName||nt.name||"").filter(Boolean).join(", ")||`${ve.length} day(s)`:String(ve||"");return a.jsx("td",{style:{padding:8},children:a.jsx("div",{className:"muted-italic",children:Pe})},U)}return["topic","objective","method","material","assessment","aids"].includes(U)?a.jsx("td",{style:{padding:8},children:a.jsx("textarea",{className:"input textarea-full",rows:3,value:T[U]||"",onChange:ve=>{const Pe=[...V];Pe[A][U]=ve.target.value,_e(Pe)}})},U):a.jsx("td",{style:{padding:8},children:a.jsx("input",{className:"input input-full",value:T[U]||"",onChange:ve=>{const Pe=[...V];Pe[A][U]=ve.target.value,_e(Pe)}})},U)}),a.jsx("td",{style:{border:"1px solid #000",padding:5,textAlign:"center"},children:a.jsx("button",{onClick:()=>hr(A),title:"Remove Row",className:"btn btn-danger",children:a.jsx(pf,{})})})]}),O.includes(A)&&a.jsx("tr",{children:a.jsx("td",{colSpan:9,style:{background:"#fafafa",padding:12},children:a.jsxs("div",{className:"expand-panel",style:{display:"flex",flexDirection:"column",gap:10},children:[a.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:a.jsxs("strong",{children:["Daily Plan for Week ",T.week||A]})}),a.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[a.jsx("div",{}),a.jsx("div",{style:{flex:1}}),a.jsx("div",{style:{display:"flex",gap:8},children:a.jsx("button",{onClick:()=>Oe(A),className:"btn btn-primary",children:"Save Week Plan"})})]}),I.length===0&&a.jsx("div",{className:"muted",style:{padding:12},children:'No days yet. Click "Add Day" to create a day.'}),I.length>0&&a.jsx("div",{style:{overflowX:"auto",marginTop:6},children:a.jsx("table",{className:"mini-day-table",style:{width:"100%",marginBottom:10},children:a.jsx("thead",{children:a.jsxs("tr",{style:{marginLeft:"220px",gap:"28px"},children:[a.jsx("th",{children:"Day"}),a.jsx("th",{children:"Sub Topic"}),a.jsx("th",{children:"Method"}),a.jsx("th",{children:"Material"}),a.jsx("th",{children:"Assessment"})]})})})}),I.map((F,U)=>{var xe,ve,Pe,nt,st,Be;return a.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:4,width:170},children:[a.jsx("input",{type:"date",value:((xe=I[U])==null?void 0:xe.date)||"",onChange:tt=>{const it=tt.target.value,P=[...I];P[U]={...P[U],date:it,dayName:le(it)},N(P)},className:"input",style:{width:170}}),a.jsx("div",{className:"muted-italic",style:{fontSize:12},children:((ve=I[U])==null?void 0:ve.dayName)||""})]}),a.jsx("input",{placeholder:"Topic",value:((Pe=I[U])==null?void 0:Pe.topic)||"",onChange:tt=>{const it=[...I];it[U]={...it[U],topic:tt.target.value},N(it)},className:"input input-full",style:{width:240}}),a.jsx("textarea",{placeholder:"Method",value:((nt=I[U])==null?void 0:nt.method)||"",onChange:tt=>{const it=[...I];it[U]={...it[U],method:tt.target.value},N(it)},className:"input small-textarea",rows:2,style:{width:240}}),a.jsx("textarea",{placeholder:"Aids",value:((st=I[U])==null?void 0:st.aids)||"",onChange:tt=>{const it=[...I];it[U]={...it[U],aids:tt.target.value},N(it)},className:"input small-textarea",rows:2,style:{width:240}}),a.jsx("textarea",{placeholder:"Assessment",value:((Be=I[U])==null?void 0:Be.assessment)||"",onChange:tt=>{const it=[...I];it[U]={...it[U],assessment:tt.target.value},N(it)},className:"input small-textarea",rows:2,style:{width:240}}),a.jsx("button",{onClick:()=>Ft(U),title:"Remove day",className:"btn btn-danger",children:a.jsx(pf,{})})]},U)}),a.jsxs("div",{children:[a.jsxs("button",{onClick:()=>er(),className:"btn btn-primary",style:{marginLeft:1108,width:100},children:[a.jsx(qv,{style:{marginRight:1}}),"Add Day"]})," "]})]})})})]},A))})]})}),!he&&V.length===0&&a.jsx("div",{style:{padding:16,color:"#666"},children:'No lesson plan found for the selected course. Use "Add Row" to start creating one.'}),a.jsx("button",{onClick:()=>_e([...V,{month:"",week:"",days:"",topic:"",objective:"",method:"",aids:"",assessment:""}]),className:"btn btn-primary",style:{marginTop:15},children:"+ Add Row"})]})]}),a.jsxs("div",{className:"right-sidebar",style:{width:B?"26%":48,padding:B?16:6,background:"#f7fafc",borderLeft:"1px solid #eee",display:"flex",flexDirection:"column",gap:12,transition:"width 220ms ease"},children:[a.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:a.jsx("button",{"aria-label":B?"Close sidebar":"Open sidebar",onClick:()=>me(!B),style:{width:36,height:36,borderRadius:8,border:"none",background:"#fff",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",display:"flex",alignItems:"center",justifyContent:"center"},children:B?a.jsx(us,{}):a.jsx(Kv,{})})}),B&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{style:{background:"#fff",padding:12,borderRadius:12,boxShadow:"0 6px 18px rgba(14,30,37,0.06)"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[a.jsx("div",{style:{background:"#eef2ff",padding:8,borderRadius:8},children:a.jsx(Ur,{color:"#4b6cb7"})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:700},children:"Lesson Overview"}),a.jsx("div",{style:{fontSize:12,color:"#666"},children:new Date().toLocaleDateString()})]})]}),a.jsx("div",{style:{display:"flex",gap:8},children:a.jsxs("div",{style:{textAlign:"right"},children:[a.jsx("div",{style:{fontSize:12,color:"#666"},children:"This Week"}),a.jsx("div",{style:{fontWeight:700},children:Zt.total})]})})]}),a.jsxs("div",{style:{display:"flex",gap:8,marginTop:12},children:[a.jsxs("div",{style:{flex:1,background:"#f0fff4",padding:8,borderRadius:8,textAlign:"center"},children:[a.jsx("div",{style:{fontSize:12,color:"#2f855a"},children:a.jsx(Dj,{})}),a.jsx("div",{style:{fontWeight:700},children:Zt.submitted}),a.jsx("div",{style:{fontSize:11,color:"#555"},children:"Submitted"})]}),a.jsxs("div",{style:{flex:1,background:"#fff7f7",padding:8,borderRadius:8,textAlign:"center"},children:[a.jsx("div",{style:{fontSize:12,color:"#c53030"},children:a.jsx(Lj,{})}),a.jsx("div",{style:{fontWeight:700},children:Zt.missed}),a.jsx("div",{style:{fontSize:11,color:"#555"},children:"Missed"})]}),a.jsxs("div",{style:{flex:1,background:"#f7fafc",padding:8,borderRadius:8,textAlign:"center"},children:[a.jsx("div",{style:{fontSize:12,color:"#4a5568"},children:""}),a.jsx("div",{style:{fontWeight:700},children:Zt.pending}),a.jsx("div",{style:{fontSize:11,color:"#555"},children:"Pending"})]})]})]}),a.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[a.jsx("button",{onClick:()=>ge("daily"),className:"btn "+(ke==="daily"?"btn-primary":"btn-ghost"),style:{flex:1,borderRadius:999},children:"Daily"}),a.jsx("button",{onClick:()=>ge("weekly"),className:"btn "+(ke==="weekly"?"btn-primary":"btn-ghost"),style:{flex:1,borderRadius:999},children:"Weekly"}),a.jsx("button",{onClick:()=>ge("monthly"),className:"btn "+(ke==="monthly"?"btn-primary":"btn-ghost"),style:{flex:1,borderRadius:999},children:"Monthly"})]}),a.jsx("div",{style:{background:"#fff",padding:12,borderRadius:12,boxShadow:"0 6px 18px rgba(14,30,37,0.04)",overflowY:"auto",maxHeight:"56vh"},children:Zn()}),a.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"space-between"},children:[a.jsxs("div",{style:{fontSize:12,color:"#666"},children:["Monthly entries: ",a.jsx("strong",{children:ws})]}),a.jsx("div",{children:a.jsx("button",{className:"btn btn-ghost",onClick:()=>{G([]),ne()},children:"Refresh"})})]})]})]})]})]})}const ga=(t,e)=>`${String(t)}_${String(e)}`;function UN(){const t=Vn(),e=ri(),n=g.useRef(null),r=JSON.parse(localStorage.getItem("teacher"))||{},s=String(r.userId||""),[i,o]=g.useState([]),[c,u]=g.useState([]),[d,f]=g.useState([]),[p,y]=g.useState([]),[k,w]=g.useState(""),[R,D]=g.useState(!0),[S,_]=g.useState({}),[v,L]=g.useState(!1),[q,se]=g.useState({}),E=e.state||{},x=E.contact||E.user||null,j=E.chatId||null,I=E.tab||null,[N,O]=g.useState(I||"student"),[C,V]=g.useState(x||null),[_e,Z]=g.useState(null),[Se,X]=g.useState(null),[Y,ie]=g.useState({}),[G,he]=g.useState({}),Ne=(W={})=>W.profileImage||W.profile||W.avatar||"/default-profile.png";g.useEffect(()=>{(async()=>{try{const[oe,ce,H,re]=await Promise.all([fetch("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Students.json").then(ue=>ue.json()),fetch("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Parents.json").then(ue=>ue.json()),fetch("https://ethiostore-17d9f-default-rtdb.firebaseio.com/School_Admins.json").then(ue=>ue.json()),fetch("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Users.json").then(ue=>ue.json())]),le=re||{},M=Object.values(oe||{}).map(ue=>{const Ce=le[ue.userId]||{};return{userId:ue.userId,name:Ce.name||ue.name||"Student",profileImage:Ne(Ce)}}),z=Object.values(ce||{}).map(ue=>{const Ce=le[ue.userId]||{};return{userId:ue.userId,name:Ce.name||ue.name||"Parent",profileImage:Ne(Ce)}}),ne=Object.values(H||{}).map(ue=>{const Ce=le[ue.userId]||{};return{userId:ue.userId,name:ue.name||Ce.name||"Admin",profileImage:Ne(Ce)}});o(M),u(z),f(ne)}catch(oe){console.error(" Fetch error:",oe)}})()},[]),g.useEffect(()=>{if(!s)return;const W=[...i,...c,...d],oe=[];return W.forEach(ce=>{if(!ce||!ce.userId)return;const H=ga(s,ce.userId);try{const re=Ot(Bt,`Chats/${H}/unread/${s}`),le=yo(re,M=>{const z=M.val();se(ne=>({...ne,[ce.userId]:Number(z)||0}))});oe.push(le)}catch{}}),()=>{oe.forEach(ce=>ce())}},[i,c,d,s]),g.useEffect(()=>{const W=()=>{const oe=typeof window<"u"&&window.innerWidth<640;L(oe),oe&&D(!1)};return W(),window.addEventListener("resize",W),()=>window.removeEventListener("resize",W)},[]),g.useEffect(()=>{if(x&&V(x),I&&O(I),s&&(x!=null&&x.userId)){const W=ga(s,x.userId);Z(j&&j===W?j:W)}else Z(null)},[x,j,I,s]),g.useEffect(()=>{const W=x;if(W){if(N==="student"&&i.length){const oe=i.find(ce=>ce.userId===W.userId);oe&&V(oe)}if(N==="parent"&&c.length){const oe=c.find(ce=>ce.userId===W.userId);oe&&V(oe)}if(N==="admin"&&d.length){const oe=d.find(ce=>ce.userId===W.userId);oe&&V(oe)}}},[i,c,d,x,N]),g.useEffect(()=>{if(!C||!s)return;const W=_e||ga(s,C.userId);Z(W);const oe=Ot(Bt,`Chats/${W}/messages`),ce=yo(oe,H=>{const re=H.val()||{},le=Object.entries(re).filter(([M,z])=>!z.deleted).map(([M,z])=>({id:M,...z,isTeacher:z.senderId===s})).sort((M,z)=>M.timeStamp-z.timeStamp);y(le),Object.entries(re).forEach(([M,z])=>{z&&!z.seen&&z.receiverId===s&&Or(Ot(Bt,`Chats/${W}/messages/${M}`),{seen:!0}).catch(console.error)}),Or(Ot(Bt,`Chats/${W}/unread`),{[s]:0}).catch(console.error)});return()=>ce()},[C,s,_e]),g.useEffect(()=>{try{const W=Ot(Bt,"Presence"),oe=yo(W,ce=>{const H=ce.val()||{};_(H)});return()=>oe()}catch(W){console.warn("Presence listener unavailable:",W)}},[]);const ke=async()=>{if(!k.trim()||!C)return;const W=Object.keys(Y).find(ce=>Y[ce]),oe=_e||ga(s,C.userId);if(W)await Or(Ot(Bt,`Chats/${oe}/messages/${W}`),{text:k,edited:!0}),ie({}),X(null),w("");else{const ce=Ot(Bt,`Chats/${oe}/messages`),H={senderId:s,receiverId:C.userId,type:"text",text:k,seen:!1,edited:!1,deleted:!1,timeStamp:Date.now()};await j3(ce,H),await Or(Ot(Bt,`Chats/${oe}/participants`),{[s]:!0,[C.userId]:!0}),await Or(Ot(Bt,`Chats/${oe}/lastMessage`),{text:k,senderId:s,seen:!1,timeStamp:H.timeStamp});try{const re=Ot(Bt,`Chats/${oe}/unread/${C.userId}`);await Or(Ot(Bt,`Chats/${oe}/unread`),{[s]:0,[C.userId]:1})}catch{}w("")}},ge=W=>{const oe=_e||ga(s,C.userId);Or(Ot(Bt,`Chats/${oe}/messages/${W}`),{deleted:!0}).catch(console.error)},B=(W,oe)=>{ie({[W]:!0}),w(oe),X(W)},me=W=>{const oe=new Date(W);return`${oe.getHours().toString().padStart(2,"0")}:${oe.getMinutes().toString().padStart(2,"0")}`},$=W=>{if(!W)return"";const oe=new Date(Number(W)),ce=new Date,H=new Date(ce.getFullYear(),ce.getMonth(),ce.getDate()),re=new Date(oe.getFullYear(),oe.getMonth(),oe.getDate()),le=H-re,M=Math.floor(le/(24*60*60*1e3));return M===0?"Today":M===1?"Yesterday":M>1&&M<7?`${M} days ago`:oe.toLocaleDateString()};g.useEffect(()=>{var W;(W=n.current)==null||W.scrollIntoView({behavior:"smooth"})},[p]);const De=N==="student"?i:N==="parent"?c:d,te=W=>{if(!W)return!1;const ce=(()=>{if((S==null?void 0:S[W])!==void 0)return S[W];const H=String(W);if((S==null?void 0:S[H])!==void 0)return S[H];const re=Number(W);if(!Number.isNaN(re)&&(S==null?void 0:S[re])!==void 0)return S[re];for(const[,le]of Object.entries(S||{}))try{if(le&&(le.userId===W||String(le.userId)===H))return le}catch{}})();if(ce==null)return!1;if(typeof ce=="boolean")return ce===!0;if(typeof ce=="object"){if(ce.state==="online"||ce.online===!0)return!0;if(ce.lastSeen){const H=Number(ce.lastSeen)||0;return Date.now()-H<6e4}if(typeof ce=="number")return Date.now()-ce<6e4}return!1},be=W=>{const oe=S==null?void 0:S[W];if(!oe)return null;let ce=null;if((typeof oe=="number"||/^[0-9]+$/.test(String(oe)))&&(ce=Number(oe)),typeof oe=="object"&&(ce=oe.lastSeen||oe.timestamp||oe.lastActive||oe.last_seen||oe.time||null),!ce)return null;const H=Date.now()-Number(ce),re=Math.floor(H/1e3);if(re<60)return"last seen just now";const le=Math.floor(re/60);if(le<60)return`last seen ${le}m ago`;const M=Math.floor(le/60);if(M<24)return`last seen ${M}h ago`;const z=Math.floor(M/24);return z<7?`last seen ${z}d ago`:`last seen on ${new Date(ce).toLocaleDateString()}`};return a.jsxs("div",{style:{display:"flex",height:"100vh",background:"#eef2f7",fontFamily:"sans-serif",position:"relative"},children:[a.jsxs("div",{style:{display:v&&!C?"flex":v&&C?"none":"flex",alignItems:"stretch",position:v&&!C?"fixed":"static",top:0,left:0,width:v&&!C?"100vw":void 0,height:v&&!C?"100vh":void 0,background:v&&!C?"#fff":void 0,zIndex:v&&!C?100:void 0},children:[a.jsxs("div",{style:{width:v&&!C?"100vw":R?v?220:280:0,height:v&&!C?"100vh":"auto",background:"#fff",padding:R||v&&!C?16:0,boxShadow:R||v&&!C?"2px 0 10px rgba(0,0,0,0.1)":"none",display:R||v&&!C?"flex":"none",flexDirection:"column",transition:"width 180ms ease",overflowY:v&&!C?"auto":"visible"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[a.jsx("button",{onClick:()=>t(-1),style:{border:"none",background:"none",padding:4,cursor:"pointer"},children:a.jsx(R0,{size:18})}),a.jsx("div",{style:{display:"flex",gap:6,margin:"12px 0",alignItems:"center"},children:["student","parent","admin"].map(W=>a.jsx("button",{onClick:()=>{O(W),V(null),Z(null)},style:{flex:1,padding:8,borderRadius:20,border:"none",background:N===W?"#4facfe":"#ddd",color:N===W?"#fff":"#000",cursor:"pointer",fontSize:14},children:W.charAt(0).toUpperCase()+W.slice(1)}))})]}),a.jsx("div",{style:{marginTop:8,overflowY:"auto",flex:1},children:De.map(W=>a.jsxs("div",{onClick:()=>{V(W),Z(null),v&&D(!1)},style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:10,padding:v?18:10,borderRadius:14,cursor:"pointer",marginBottom:8,background:(C==null?void 0:C.userId)===W.userId?"#dbeafe":"#f9fafb",boxShadow:(C==null?void 0:C.userId)===W.userId?"0 2px 10px rgba(0,0,0,0.1)":"none",fontSize:v?18:15},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[a.jsxs("div",{style:{position:"relative"},children:[a.jsx("img",{src:W.profileImage,alt:W.name,onError:oe=>oe.target.src="/default-profile.png",style:{width:v?36:40,height:v?36:40,borderRadius:"50%",objectFit:"cover"}}),a.jsx("span",{style:{position:"absolute",right:-2,bottom:-2,width:12,height:12,borderRadius:12,border:"2px solid #fff",background:te(W.userId)?"#34D399":"#cbd5e1"}})]}),a.jsx("span",{style:{fontWeight:500,marginLeft:0},children:W.name})]}),q[W.userId]>0?a.jsx("div",{style:{minWidth:26,height:26,display:"flex",alignItems:"center",justifyContent:"center",background:"#ef4444",color:"#fff",borderRadius:14,padding:"0 6px",fontSize:12,fontWeight:600},children:q[W.userId]>99?"99+":q[W.userId]}):a.jsx("div",{style:{width:26}})]},W.userId))})]}),a.jsx("div",{style:{width:28,display:"flex",alignItems:"flex-start",justifyContent:"center"},children:a.jsx("button",{onClick:()=>D(W=>!W),style:{border:"none",background:"#fff",borderRadius:4,padding:4,boxShadow:"0 1px 4px rgba(0,0,0,0.08)",cursor:"pointer",marginTop:8},"aria-label":"Toggle sidebar",children:R?"":""})})]}),a.jsx("div",{style:{flex:1,padding:16,display:"flex",flexDirection:"column"},children:C?a.jsxs(a.Fragment,{children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:"12px 0",borderBottom:"1px solid #ccc",boxShadow:"0 2px 6px rgba(0,0,0,0.05)",background:"#fff",borderRadius:8,marginBottom:8},children:[v&&a.jsx("button",{onClick:()=>V(null),style:{border:"none",background:"none",padding:4,marginRight:8,cursor:"pointer",fontSize:20},"aria-label":"Back to user list",children:a.jsx(R0,{size:22})}),a.jsx("img",{src:C.profileImage,alt:C.name,onError:W=>W.target.src="/default-profile.png",style:{width:v?40:50,height:v?40:50,borderRadius:"50%",objectFit:"cover"}}),a.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[a.jsx("span",{style:{fontWeight:600,fontSize:16},children:C.name}),a.jsx("span",{style:{fontSize:12,color:te(C.userId)?"#16A34A":"#666"},children:te(C.userId)?"Online":be(C.userId)||N.charAt(0).toUpperCase()+N.slice(1)})]})]}),a.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"12px 16px",display:"flex",flexDirection:"column"},children:[p.map(W=>{const oe=W.isTeacher,ce=!!Y[W.id],H=Se===W.id;return a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:oe?"flex-end":"flex-start",marginBottom:10},children:[a.jsxs("div",{onClick:()=>X(W.id),style:{maxWidth:v?"85%":"70%",background:oe?"#4facfe":"#fff",color:oe?"#fff":"#000",padding:"10px 14px",borderRadius:18,borderTopRightRadius:oe?0:18,borderTopLeftRadius:oe?18:0,boxShadow:"0 1px 3px rgba(0,0,0,0.1)",wordBreak:"break-word",cursor:"pointer",position:"relative"},children:[W.text," ",W.edited&&a.jsx("small",{style:{fontSize:10},children:" (edited)"}),a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:6,marginTop:4,fontSize:11,color:oe?"#fff":"#888"},children:[a.jsx("span",{style:{marginRight:6,fontSize:11,opacity:.9},children:$(W.timeStamp)}),a.jsx("span",{children:me(W.timeStamp)}),oe&&!W.deleted&&a.jsxs("span",{style:{display:"flex",gap:0},children:[a.jsx(Io,{size:10,color:"#fff",style:{opacity:.8}}),W.seen&&a.jsx(Io,{size:10,color:"#f3f7f8",style:{marginLeft:2,opacity:.95}})]})]})]}),H&&oe&&!W.deleted&&!ce&&a.jsxs("div",{style:{display:"flex",gap:6,marginTop:4,fontSize:12,justifyContent:oe?"flex-end":"flex-start"},children:[a.jsx("button",{onClick:()=>B(W.id,W.text),style:{padding:"2px 6px",borderRadius:4,border:"1px solid #ccc",cursor:"pointer",background:"#f1f1f1"},children:"Edit"}),a.jsx("button",{onClick:()=>ge(W.id),style:{padding:"2px 6px",borderRadius:4,border:"1px solid #ccc",cursor:"pointer",background:"#f1f1f1",color:"red"},children:"Delete"})]})]},W.id)}),a.jsx("div",{ref:n})]}),a.jsxs("div",{style:{display:"flex",gap:8,marginTop:8},children:[a.jsx("input",{value:k,onChange:W=>w(W.target.value),onKeyDown:W=>W.key==="Enter"&&ke(),placeholder:"Type a message...",style:{flex:1,padding:v?10:12,borderRadius:25,border:"1px solid #ccc",outline:"none"}}),a.jsx("button",{onClick:ke,style:{width:v?40:45,height:v?40:45,borderRadius:"50%",background:"#4facfe",border:"none",color:"#fff",display:"flex",justifyContent:"center",alignItems:"center"},children:a.jsx(Gv,{})})]})]}):a.jsx("h3",{style:{textAlign:"center",marginTop:50},children:"Select a user to start chatting "})})]})}function WN(){return a.jsx(z4,{basename:"/Gojo-Teacher-Web",children:a.jsxs(g4,{children:[a.jsx(mn,{path:"/",element:a.jsx(Yd,{})}),a.jsx(mn,{path:"/login",element:a.jsx(Yd,{})}),a.jsx(mn,{path:"/register",element:a.jsx(Ej,{})}),a.jsx(mn,{path:"/dashboard",element:a.jsx(gN,{})}),a.jsx(mn,{path:"/students",element:a.jsx(bN,{})}),a.jsx(mn,{path:"/admins",element:a.jsx(NN,{})}),a.jsx(mn,{path:"/marks",element:a.jsx(CN,{})}),a.jsx(mn,{path:"/attendance",element:a.jsx(jN,{})}),a.jsx(mn,{path:"/notes",element:a.jsx(RN,{})})," ",a.jsx(mn,{path:"/parents",element:a.jsx(DN,{})}),a.jsx(mn,{path:"/settings",element:a.jsx(LN,{})}),a.jsx(mn,{path:"all-chat",element:a.jsx(UN,{})}),a.jsx(mn,{path:"schedule",element:a.jsx(zN,{})}),a.jsx(mn,{path:"exam",element:a.jsx(BN,{})}),a.jsx(mn,{path:"lesson-plan",element:a.jsx($N,{})}),a.jsx(mn,{path:"*",element:a.jsx(Yd,{})})]})})}const HN=g.createContext(),VN=({children:t})=>{const[e,n]=g.useState("light");g.useEffect(()=>{const s=localStorage.getItem("theme");s&&n(s)},[]),g.useEffect(()=>{document.body.className=e==="dark"?"dark-mode":"",localStorage.setItem("theme",e)},[e]);const r=()=>{n(s=>s==="light"?"dark":"light")};return a.jsx(HN.Provider,{value:{theme:e,toggleTheme:r},children:t})};function KN(){return a.jsx(VN,{children:a.jsx(WN,{})})}fh.createRoot(document.getElementById("root")).render(a.jsx(kt.StrictMode,{children:a.jsx(KN,{})}));
