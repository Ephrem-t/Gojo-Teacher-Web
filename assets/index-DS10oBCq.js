(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function zw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Dy={exports:{}},pu={},My={exports:{}},Ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zl=Symbol.for("react.element"),Bw=Symbol.for("react.portal"),Uw=Symbol.for("react.fragment"),$w=Symbol.for("react.strict_mode"),Ww=Symbol.for("react.profiler"),Vw=Symbol.for("react.provider"),Hw=Symbol.for("react.context"),Kw=Symbol.for("react.forward_ref"),Gw=Symbol.for("react.suspense"),qw=Symbol.for("react.memo"),Yw=Symbol.for("react.lazy"),Ug=Symbol.iterator;function Qw(t){return t===null||typeof t!="object"?null:(t=Ug&&t[Ug]||t["@@iterator"],typeof t=="function"?t:null)}var Ly={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Fy=Object.assign,zy={};function mo(t,e,n){this.props=t,this.context=e,this.refs=zy,this.updater=n||Ly}mo.prototype.isReactComponent={};mo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};mo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function By(){}By.prototype=mo.prototype;function wf(t,e,n){this.props=t,this.context=e,this.refs=zy,this.updater=n||Ly}var Sf=wf.prototype=new By;Sf.constructor=wf;Fy(Sf,mo.prototype);Sf.isPureReactComponent=!0;var $g=Array.isArray,Uy=Object.prototype.hasOwnProperty,bf={current:null},$y={key:!0,ref:!0,__self:!0,__source:!0};function Wy(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Uy.call(e,r)&&!$y.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:Zl,type:t,key:i,ref:o,props:s,_owner:bf.current}}function Jw(t,e){return{$$typeof:Zl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ef(t){return typeof t=="object"&&t!==null&&t.$$typeof===Zl}function Xw(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Wg=/\/+/g;function ld(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Xw(""+t.key):e.toString(36)}function ic(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Zl:case Bw:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+ld(o,0):r,$g(s)?(n="",t!=null&&(n=t.replace(Wg,"$&/")+"/"),ic(s,e,n,"",function(d){return d})):s!=null&&(Ef(s)&&(s=Jw(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Wg,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",$g(t))for(var c=0;c<t.length;c++){i=t[c];var u=r+ld(i,c);o+=ic(i,e,n,u,s)}else if(u=Qw(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=r+ld(i,c++),o+=ic(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Da(t,e,n){if(t==null)return t;var r=[],s=0;return ic(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Zw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var pn={current:null},oc={transition:null},e2={ReactCurrentDispatcher:pn,ReactCurrentBatchConfig:oc,ReactCurrentOwner:bf};function Vy(){throw Error("act(...) is not supported in production builds of React.")}Ke.Children={map:Da,forEach:function(t,e,n){Da(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Da(t,function(){e++}),e},toArray:function(t){return Da(t,function(e){return e})||[]},only:function(t){if(!Ef(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ke.Component=mo;Ke.Fragment=Uw;Ke.Profiler=Ww;Ke.PureComponent=wf;Ke.StrictMode=$w;Ke.Suspense=Gw;Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=e2;Ke.act=Vy;Ke.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Fy({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=bf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)Uy.call(e,u)&&!$y.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:Zl,type:t.type,key:s,ref:i,props:r,_owner:o}};Ke.createContext=function(t){return t={$$typeof:Hw,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Vw,_context:t},t.Consumer=t};Ke.createElement=Wy;Ke.createFactory=function(t){var e=Wy.bind(null,t);return e.type=t,e};Ke.createRef=function(){return{current:null}};Ke.forwardRef=function(t){return{$$typeof:Kw,render:t}};Ke.isValidElement=Ef;Ke.lazy=function(t){return{$$typeof:Yw,_payload:{_status:-1,_result:t},_init:Zw}};Ke.memo=function(t,e){return{$$typeof:qw,type:t,compare:e===void 0?null:e}};Ke.startTransition=function(t){var e=oc.transition;oc.transition={};try{t()}finally{oc.transition=e}};Ke.unstable_act=Vy;Ke.useCallback=function(t,e){return pn.current.useCallback(t,e)};Ke.useContext=function(t){return pn.current.useContext(t)};Ke.useDebugValue=function(){};Ke.useDeferredValue=function(t){return pn.current.useDeferredValue(t)};Ke.useEffect=function(t,e){return pn.current.useEffect(t,e)};Ke.useId=function(){return pn.current.useId()};Ke.useImperativeHandle=function(t,e,n){return pn.current.useImperativeHandle(t,e,n)};Ke.useInsertionEffect=function(t,e){return pn.current.useInsertionEffect(t,e)};Ke.useLayoutEffect=function(t,e){return pn.current.useLayoutEffect(t,e)};Ke.useMemo=function(t,e){return pn.current.useMemo(t,e)};Ke.useReducer=function(t,e,n){return pn.current.useReducer(t,e,n)};Ke.useRef=function(t){return pn.current.useRef(t)};Ke.useState=function(t){return pn.current.useState(t)};Ke.useSyncExternalStore=function(t,e,n){return pn.current.useSyncExternalStore(t,e,n)};Ke.useTransition=function(){return pn.current.useTransition()};Ke.version="18.3.1";My.exports=Ke;var y=My.exports;const Xt=zw(y);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t2=y,n2=Symbol.for("react.element"),r2=Symbol.for("react.fragment"),s2=Object.prototype.hasOwnProperty,i2=t2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o2={key:!0,ref:!0,__self:!0,__source:!0};function Hy(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)s2.call(e,r)&&!o2.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:n2,type:t,key:i,ref:o,props:s,_owner:i2.current}}pu.Fragment=r2;pu.jsx=Hy;pu.jsxs=Hy;Dy.exports=pu;var a=Dy.exports,th={},Ky={exports:{}},An={},Gy={exports:{}},qy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(te,P){var Q=te.length;te.push(P);e:for(;0<Q;){var oe=Q-1>>>1,Se=te[oe];if(0<s(Se,P))te[oe]=P,te[Q]=Se,Q=oe;else break e}}function n(te){return te.length===0?null:te[0]}function r(te){if(te.length===0)return null;var P=te[0],Q=te.pop();if(Q!==P){te[0]=Q;e:for(var oe=0,Se=te.length,G=Se>>>1;oe<G;){var L=2*(oe+1)-1,Y=te[L],se=L+1,ve=te[se];if(0>s(Y,Q))se<Se&&0>s(ve,Y)?(te[oe]=ve,te[se]=Q,oe=se):(te[oe]=Y,te[L]=Q,oe=L);else if(se<Se&&0>s(ve,Q))te[oe]=ve,te[se]=Q,oe=se;else break e}}return P}function s(te,P){var Q=te.sortIndex-P.sortIndex;return Q!==0?Q:te.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],p=1,f=null,m=3,k=!1,_=!1,N=!1,A=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(te){for(var P=n(d);P!==null;){if(P.callback===null)r(d);else if(P.startTime<=te)r(d),P.sortIndex=P.expirationTime,e(u,P);else break;P=n(d)}}function R(te){if(N=!1,v(te),!_)if(n(u)!==null)_=!0,ue(K);else{var P=n(d);P!==null&&Te(R,P.startTime-te)}}function K(te,P){_=!1,N&&(N=!1,b(x),x=-1),k=!0;var Q=m;try{for(v(P),f=n(u);f!==null&&(!(f.expirationTime>P)||te&&!T());){var oe=f.callback;if(typeof oe=="function"){f.callback=null,m=f.priorityLevel;var Se=oe(f.expirationTime<=P);P=t.unstable_now(),typeof Se=="function"?f.callback=Se:f===n(u)&&r(u),v(P)}else r(u);f=n(u)}if(f!==null)var G=!0;else{var L=n(d);L!==null&&Te(R,L.startTime-P),G=!1}return G}finally{f=null,m=Q,k=!1}}var ee=!1,E=null,x=-1,C=5,j=-1;function T(){return!(t.unstable_now()-j<C)}function D(){if(E!==null){var te=t.unstable_now();j=te;var P=!0;try{P=E(!0,te)}finally{P?I():(ee=!1,E=null)}}else ee=!1}var I;if(typeof w=="function")I=function(){w(D)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,ye=J.port2;J.port1.onmessage=D,I=function(){ye.postMessage(null)}}else I=function(){A(D,0)};function ue(te){E=te,ee||(ee=!0,I())}function Te(te,P){x=A(function(){te(t.unstable_now())},P)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(te){te.callback=null},t.unstable_continueExecution=function(){_||k||(_=!0,ue(K))},t.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<te?Math.floor(1e3/te):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(te){switch(m){case 1:case 2:case 3:var P=3;break;default:P=m}var Q=m;m=P;try{return te()}finally{m=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(te,P){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var Q=m;m=te;try{return P()}finally{m=Q}},t.unstable_scheduleCallback=function(te,P,Q){var oe=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?oe+Q:oe):Q=oe,te){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=Q+Se,te={id:p++,callback:P,priorityLevel:te,startTime:Q,expirationTime:Se,sortIndex:-1},Q>oe?(te.sortIndex=Q,e(d,te),n(u)===null&&te===n(d)&&(N?(b(x),x=-1):N=!0,Te(R,Q-oe))):(te.sortIndex=Se,e(u,te),_||k||(_=!0,ue(K))),te},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(te){var P=m;return function(){var Q=m;m=P;try{return te.apply(this,arguments)}finally{m=Q}}}})(qy);Gy.exports=qy;var l2=Gy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a2=y,Rn=l2;function ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Yy=new Set,_l={};function gi(t,e){Xi(t,e),Xi(t+"Capture",e)}function Xi(t,e){for(_l[t]=e,t=0;t<e.length;t++)Yy.add(e[t])}var Br=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nh=Object.prototype.hasOwnProperty,c2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Vg={},Hg={};function u2(t){return nh.call(Hg,t)?!0:nh.call(Vg,t)?!1:c2.test(t)?Hg[t]=!0:(Vg[t]=!0,!1)}function d2(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function h2(t,e,n,r){if(e===null||typeof e>"u"||d2(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function gn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var en={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){en[t]=new gn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];en[e]=new gn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){en[t]=new gn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){en[t]=new gn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){en[t]=new gn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){en[t]=new gn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){en[t]=new gn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){en[t]=new gn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){en[t]=new gn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Cf=/[\-:]([a-z])/g;function If(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Cf,If);en[e]=new gn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Cf,If);en[e]=new gn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Cf,If);en[e]=new gn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){en[t]=new gn(t,1,!1,t.toLowerCase(),null,!1,!1)});en.xlinkHref=new gn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){en[t]=new gn(t,1,!1,t.toLowerCase(),null,!0,!0)});function jf(t,e,n,r){var s=en.hasOwnProperty(e)?en[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(h2(e,n,s,r)&&(n=null),r||s===null?u2(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Gr=a2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ma=Symbol.for("react.element"),Ti=Symbol.for("react.portal"),Ni=Symbol.for("react.fragment"),kf=Symbol.for("react.strict_mode"),rh=Symbol.for("react.profiler"),Qy=Symbol.for("react.provider"),Jy=Symbol.for("react.context"),Tf=Symbol.for("react.forward_ref"),sh=Symbol.for("react.suspense"),ih=Symbol.for("react.suspense_list"),Nf=Symbol.for("react.memo"),as=Symbol.for("react.lazy"),Xy=Symbol.for("react.offscreen"),Kg=Symbol.iterator;function Lo(t){return t===null||typeof t!="object"?null:(t=Kg&&t[Kg]||t["@@iterator"],typeof t=="function"?t:null)}var St=Object.assign,ad;function Xo(t){if(ad===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ad=e&&e[1]||""}return`
`+ad+t}var cd=!1;function ud(t,e){if(!t||cd)return"";cd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,c=i.length-1;1<=o&&0<=c&&s[o]!==i[c];)c--;for(;1<=o&&0<=c;o--,c--)if(s[o]!==i[c]){if(o!==1||c!==1)do if(o--,c--,0>c||s[o]!==i[c]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{cd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Xo(t):""}function f2(t){switch(t.tag){case 5:return Xo(t.type);case 16:return Xo("Lazy");case 13:return Xo("Suspense");case 19:return Xo("SuspenseList");case 0:case 2:case 15:return t=ud(t.type,!1),t;case 11:return t=ud(t.type.render,!1),t;case 1:return t=ud(t.type,!0),t;default:return""}}function oh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ni:return"Fragment";case Ti:return"Portal";case rh:return"Profiler";case kf:return"StrictMode";case sh:return"Suspense";case ih:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Jy:return(t.displayName||"Context")+".Consumer";case Qy:return(t._context.displayName||"Context")+".Provider";case Tf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Nf:return e=t.displayName||null,e!==null?e:oh(t.type)||"Memo";case as:e=t._payload,t=t._init;try{return oh(t(e))}catch{}}return null}function p2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oh(e);case 8:return e===kf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ks(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Zy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function g2(t){var e=Zy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function La(t){t._valueTracker||(t._valueTracker=g2(t))}function e1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Zy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ec(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function lh(t,e){var n=e.checked;return St({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Gg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ks(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function t1(t,e){e=e.checked,e!=null&&jf(t,"checked",e,!1)}function ah(t,e){t1(t,e);var n=ks(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ch(t,e.type,n):e.hasOwnProperty("defaultValue")&&ch(t,e.type,ks(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function qg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ch(t,e,n){(e!=="number"||Ec(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Zo=Array.isArray;function $i(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ks(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function uh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ae(91));return St({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Yg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ae(92));if(Zo(n)){if(1<n.length)throw Error(ae(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ks(n)}}function n1(t,e){var n=ks(e.value),r=ks(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Qg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function r1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?r1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Fa,s1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Fa=Fa||document.createElement("div"),Fa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Fa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function wl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var nl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},m2=["Webkit","ms","Moz","O"];Object.keys(nl).forEach(function(t){m2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),nl[e]=nl[t]})});function i1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||nl.hasOwnProperty(t)&&nl[t]?(""+e).trim():e+"px"}function o1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=i1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var y2=St({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hh(t,e){if(e){if(y2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ae(62))}}function fh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ph=null;function Rf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var gh=null,Wi=null,Vi=null;function Jg(t){if(t=na(t)){if(typeof gh!="function")throw Error(ae(280));var e=t.stateNode;e&&(e=vu(e),gh(t.stateNode,t.type,e))}}function l1(t){Wi?Vi?Vi.push(t):Vi=[t]:Wi=t}function a1(){if(Wi){var t=Wi,e=Vi;if(Vi=Wi=null,Jg(t),e)for(t=0;t<e.length;t++)Jg(e[t])}}function c1(t,e){return t(e)}function u1(){}var dd=!1;function d1(t,e,n){if(dd)return t(e,n);dd=!0;try{return c1(t,e,n)}finally{dd=!1,(Wi!==null||Vi!==null)&&(u1(),a1())}}function Sl(t,e){var n=t.stateNode;if(n===null)return null;var r=vu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ae(231,e,typeof n));return n}var mh=!1;if(Br)try{var Fo={};Object.defineProperty(Fo,"passive",{get:function(){mh=!0}}),window.addEventListener("test",Fo,Fo),window.removeEventListener("test",Fo,Fo)}catch{mh=!1}function x2(t,e,n,r,s,i,o,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(p){this.onError(p)}}var rl=!1,Cc=null,Ic=!1,yh=null,v2={onError:function(t){rl=!0,Cc=t}};function _2(t,e,n,r,s,i,o,c,u){rl=!1,Cc=null,x2.apply(v2,arguments)}function w2(t,e,n,r,s,i,o,c,u){if(_2.apply(this,arguments),rl){if(rl){var d=Cc;rl=!1,Cc=null}else throw Error(ae(198));Ic||(Ic=!0,yh=d)}}function mi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function h1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Xg(t){if(mi(t)!==t)throw Error(ae(188))}function S2(t){var e=t.alternate;if(!e){if(e=mi(t),e===null)throw Error(ae(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Xg(s),t;if(i===r)return Xg(s),e;i=i.sibling}throw Error(ae(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o)throw Error(ae(189))}}if(n.alternate!==r)throw Error(ae(190))}if(n.tag!==3)throw Error(ae(188));return n.stateNode.current===n?t:e}function f1(t){return t=S2(t),t!==null?p1(t):null}function p1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=p1(t);if(e!==null)return e;t=t.sibling}return null}var g1=Rn.unstable_scheduleCallback,Zg=Rn.unstable_cancelCallback,b2=Rn.unstable_shouldYield,E2=Rn.unstable_requestPaint,Rt=Rn.unstable_now,C2=Rn.unstable_getCurrentPriorityLevel,Af=Rn.unstable_ImmediatePriority,m1=Rn.unstable_UserBlockingPriority,jc=Rn.unstable_NormalPriority,I2=Rn.unstable_LowPriority,y1=Rn.unstable_IdlePriority,gu=null,wr=null;function j2(t){if(wr&&typeof wr.onCommitFiberRoot=="function")try{wr.onCommitFiberRoot(gu,t,void 0,(t.current.flags&128)===128)}catch{}}var ir=Math.clz32?Math.clz32:N2,k2=Math.log,T2=Math.LN2;function N2(t){return t>>>=0,t===0?32:31-(k2(t)/T2|0)|0}var za=64,Ba=4194304;function el(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function kc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~s;c!==0?r=el(c):(i&=o,i!==0&&(r=el(i)))}else o=n&~s,o!==0?r=el(o):i!==0&&(r=el(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ir(e),s=1<<n,r|=t[n],e&=~s;return r}function R2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function A2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-ir(i),c=1<<o,u=s[o];u===-1?(!(c&n)||c&r)&&(s[o]=R2(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function xh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function x1(){var t=za;return za<<=1,!(za&4194240)&&(za=64),t}function hd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ea(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ir(e),t[e]=n}function P2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-ir(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Pf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ir(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ot=0;function v1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var _1,Of,w1,S1,b1,vh=!1,Ua=[],gs=null,ms=null,ys=null,bl=new Map,El=new Map,us=[],O2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function em(t,e){switch(t){case"focusin":case"focusout":gs=null;break;case"dragenter":case"dragleave":ms=null;break;case"mouseover":case"mouseout":ys=null;break;case"pointerover":case"pointerout":bl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":El.delete(e.pointerId)}}function zo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=na(e),e!==null&&Of(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function D2(t,e,n,r,s){switch(e){case"focusin":return gs=zo(gs,t,e,n,r,s),!0;case"dragenter":return ms=zo(ms,t,e,n,r,s),!0;case"mouseover":return ys=zo(ys,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return bl.set(i,zo(bl.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,El.set(i,zo(El.get(i)||null,t,e,n,r,s)),!0}return!1}function E1(t){var e=qs(t.target);if(e!==null){var n=mi(e);if(n!==null){if(e=n.tag,e===13){if(e=h1(n),e!==null){t.blockedOn=e,b1(t.priority,function(){w1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function lc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=_h(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ph=r,n.target.dispatchEvent(r),ph=null}else return e=na(n),e!==null&&Of(e),t.blockedOn=n,!1;e.shift()}return!0}function tm(t,e,n){lc(t)&&n.delete(e)}function M2(){vh=!1,gs!==null&&lc(gs)&&(gs=null),ms!==null&&lc(ms)&&(ms=null),ys!==null&&lc(ys)&&(ys=null),bl.forEach(tm),El.forEach(tm)}function Bo(t,e){t.blockedOn===e&&(t.blockedOn=null,vh||(vh=!0,Rn.unstable_scheduleCallback(Rn.unstable_NormalPriority,M2)))}function Cl(t){function e(s){return Bo(s,t)}if(0<Ua.length){Bo(Ua[0],t);for(var n=1;n<Ua.length;n++){var r=Ua[n];r.blockedOn===t&&(r.blockedOn=null)}}for(gs!==null&&Bo(gs,t),ms!==null&&Bo(ms,t),ys!==null&&Bo(ys,t),bl.forEach(e),El.forEach(e),n=0;n<us.length;n++)r=us[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<us.length&&(n=us[0],n.blockedOn===null);)E1(n),n.blockedOn===null&&us.shift()}var Hi=Gr.ReactCurrentBatchConfig,Tc=!0;function L2(t,e,n,r){var s=ot,i=Hi.transition;Hi.transition=null;try{ot=1,Df(t,e,n,r)}finally{ot=s,Hi.transition=i}}function F2(t,e,n,r){var s=ot,i=Hi.transition;Hi.transition=null;try{ot=4,Df(t,e,n,r)}finally{ot=s,Hi.transition=i}}function Df(t,e,n,r){if(Tc){var s=_h(t,e,n,r);if(s===null)Sd(t,e,r,Nc,n),em(t,r);else if(D2(s,t,e,n,r))r.stopPropagation();else if(em(t,r),e&4&&-1<O2.indexOf(t)){for(;s!==null;){var i=na(s);if(i!==null&&_1(i),i=_h(t,e,n,r),i===null&&Sd(t,e,r,Nc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Sd(t,e,r,null,n)}}var Nc=null;function _h(t,e,n,r){if(Nc=null,t=Rf(r),t=qs(t),t!==null)if(e=mi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=h1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Nc=t,null}function C1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(C2()){case Af:return 1;case m1:return 4;case jc:case I2:return 16;case y1:return 536870912;default:return 16}default:return 16}}var hs=null,Mf=null,ac=null;function I1(){if(ac)return ac;var t,e=Mf,n=e.length,r,s="value"in hs?hs.value:hs.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return ac=s.slice(t,1<r?1-r:void 0)}function cc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function $a(){return!0}function nm(){return!1}function Pn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?$a:nm,this.isPropagationStopped=nm,this}return St(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=$a)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=$a)},persist:function(){},isPersistent:$a}),e}var yo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lf=Pn(yo),ta=St({},yo,{view:0,detail:0}),z2=Pn(ta),fd,pd,Uo,mu=St({},ta,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ff,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Uo&&(Uo&&t.type==="mousemove"?(fd=t.screenX-Uo.screenX,pd=t.screenY-Uo.screenY):pd=fd=0,Uo=t),fd)},movementY:function(t){return"movementY"in t?t.movementY:pd}}),rm=Pn(mu),B2=St({},mu,{dataTransfer:0}),U2=Pn(B2),$2=St({},ta,{relatedTarget:0}),gd=Pn($2),W2=St({},yo,{animationName:0,elapsedTime:0,pseudoElement:0}),V2=Pn(W2),H2=St({},yo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),K2=Pn(H2),G2=St({},yo,{data:0}),sm=Pn(G2),q2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Y2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Q2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function J2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Q2[t])?!!e[t]:!1}function Ff(){return J2}var X2=St({},ta,{key:function(t){if(t.key){var e=q2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=cc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Y2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ff,charCode:function(t){return t.type==="keypress"?cc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?cc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Z2=Pn(X2),eS=St({},mu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),im=Pn(eS),tS=St({},ta,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ff}),nS=Pn(tS),rS=St({},yo,{propertyName:0,elapsedTime:0,pseudoElement:0}),sS=Pn(rS),iS=St({},mu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),oS=Pn(iS),lS=[9,13,27,32],zf=Br&&"CompositionEvent"in window,sl=null;Br&&"documentMode"in document&&(sl=document.documentMode);var aS=Br&&"TextEvent"in window&&!sl,j1=Br&&(!zf||sl&&8<sl&&11>=sl),om=" ",lm=!1;function k1(t,e){switch(t){case"keyup":return lS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function T1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ri=!1;function cS(t,e){switch(t){case"compositionend":return T1(e);case"keypress":return e.which!==32?null:(lm=!0,om);case"textInput":return t=e.data,t===om&&lm?null:t;default:return null}}function uS(t,e){if(Ri)return t==="compositionend"||!zf&&k1(t,e)?(t=I1(),ac=Mf=hs=null,Ri=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return j1&&e.locale!=="ko"?null:e.data;default:return null}}var dS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function am(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!dS[t.type]:e==="textarea"}function N1(t,e,n,r){l1(r),e=Rc(e,"onChange"),0<e.length&&(n=new Lf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var il=null,Il=null;function hS(t){U1(t,0)}function yu(t){var e=Oi(t);if(e1(e))return t}function fS(t,e){if(t==="change")return e}var R1=!1;if(Br){var md;if(Br){var yd="oninput"in document;if(!yd){var cm=document.createElement("div");cm.setAttribute("oninput","return;"),yd=typeof cm.oninput=="function"}md=yd}else md=!1;R1=md&&(!document.documentMode||9<document.documentMode)}function um(){il&&(il.detachEvent("onpropertychange",A1),Il=il=null)}function A1(t){if(t.propertyName==="value"&&yu(Il)){var e=[];N1(e,Il,t,Rf(t)),d1(hS,e)}}function pS(t,e,n){t==="focusin"?(um(),il=e,Il=n,il.attachEvent("onpropertychange",A1)):t==="focusout"&&um()}function gS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return yu(Il)}function mS(t,e){if(t==="click")return yu(e)}function yS(t,e){if(t==="input"||t==="change")return yu(e)}function xS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ar=typeof Object.is=="function"?Object.is:xS;function jl(t,e){if(ar(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!nh.call(e,s)||!ar(t[s],e[s]))return!1}return!0}function dm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function hm(t,e){var n=dm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=dm(n)}}function P1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?P1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function O1(){for(var t=window,e=Ec();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ec(t.document)}return e}function Bf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function vS(t){var e=O1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&P1(n.ownerDocument.documentElement,n)){if(r!==null&&Bf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=hm(n,i);var o=hm(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var _S=Br&&"documentMode"in document&&11>=document.documentMode,Ai=null,wh=null,ol=null,Sh=!1;function fm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Sh||Ai==null||Ai!==Ec(r)||(r=Ai,"selectionStart"in r&&Bf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ol&&jl(ol,r)||(ol=r,r=Rc(wh,"onSelect"),0<r.length&&(e=new Lf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ai)))}function Wa(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Pi={animationend:Wa("Animation","AnimationEnd"),animationiteration:Wa("Animation","AnimationIteration"),animationstart:Wa("Animation","AnimationStart"),transitionend:Wa("Transition","TransitionEnd")},xd={},D1={};Br&&(D1=document.createElement("div").style,"AnimationEvent"in window||(delete Pi.animationend.animation,delete Pi.animationiteration.animation,delete Pi.animationstart.animation),"TransitionEvent"in window||delete Pi.transitionend.transition);function xu(t){if(xd[t])return xd[t];if(!Pi[t])return t;var e=Pi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in D1)return xd[t]=e[n];return t}var M1=xu("animationend"),L1=xu("animationiteration"),F1=xu("animationstart"),z1=xu("transitionend"),B1=new Map,pm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Os(t,e){B1.set(t,e),gi(e,[t])}for(var vd=0;vd<pm.length;vd++){var _d=pm[vd],wS=_d.toLowerCase(),SS=_d[0].toUpperCase()+_d.slice(1);Os(wS,"on"+SS)}Os(M1,"onAnimationEnd");Os(L1,"onAnimationIteration");Os(F1,"onAnimationStart");Os("dblclick","onDoubleClick");Os("focusin","onFocus");Os("focusout","onBlur");Os(z1,"onTransitionEnd");Xi("onMouseEnter",["mouseout","mouseover"]);Xi("onMouseLeave",["mouseout","mouseover"]);Xi("onPointerEnter",["pointerout","pointerover"]);Xi("onPointerLeave",["pointerout","pointerover"]);gi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));gi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));gi("onBeforeInput",["compositionend","keypress","textInput","paste"]);gi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));gi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));gi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bS=new Set("cancel close invalid load scroll toggle".split(" ").concat(tl));function gm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,w2(r,e,void 0,t),t.currentTarget=null}function U1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;gm(s,c,d),i=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,d=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;gm(s,c,d),i=u}}}if(Ic)throw t=yh,Ic=!1,yh=null,t}function pt(t,e){var n=e[jh];n===void 0&&(n=e[jh]=new Set);var r=t+"__bubble";n.has(r)||($1(e,t,2,!1),n.add(r))}function wd(t,e,n){var r=0;e&&(r|=4),$1(n,t,r,e)}var Va="_reactListening"+Math.random().toString(36).slice(2);function kl(t){if(!t[Va]){t[Va]=!0,Yy.forEach(function(n){n!=="selectionchange"&&(bS.has(n)||wd(n,!1,t),wd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Va]||(e[Va]=!0,wd("selectionchange",!1,e))}}function $1(t,e,n,r){switch(C1(e)){case 1:var s=L2;break;case 4:s=F2;break;default:s=Df}n=s.bind(null,e,n,t),s=void 0,!mh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Sd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;c!==null;){if(o=qs(c),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}c=c.parentNode}}r=r.return}d1(function(){var d=i,p=Rf(n),f=[];e:{var m=B1.get(t);if(m!==void 0){var k=Lf,_=t;switch(t){case"keypress":if(cc(n)===0)break e;case"keydown":case"keyup":k=Z2;break;case"focusin":_="focus",k=gd;break;case"focusout":_="blur",k=gd;break;case"beforeblur":case"afterblur":k=gd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":k=rm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":k=U2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":k=nS;break;case M1:case L1:case F1:k=V2;break;case z1:k=sS;break;case"scroll":k=z2;break;case"wheel":k=oS;break;case"copy":case"cut":case"paste":k=K2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":k=im}var N=(e&4)!==0,A=!N&&t==="scroll",b=N?m!==null?m+"Capture":null:m;N=[];for(var w=d,v;w!==null;){v=w;var R=v.stateNode;if(v.tag===5&&R!==null&&(v=R,b!==null&&(R=Sl(w,b),R!=null&&N.push(Tl(w,R,v)))),A)break;w=w.return}0<N.length&&(m=new k(m,_,null,n,p),f.push({event:m,listeners:N}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",k=t==="mouseout"||t==="pointerout",m&&n!==ph&&(_=n.relatedTarget||n.fromElement)&&(qs(_)||_[Ur]))break e;if((k||m)&&(m=p.window===p?p:(m=p.ownerDocument)?m.defaultView||m.parentWindow:window,k?(_=n.relatedTarget||n.toElement,k=d,_=_?qs(_):null,_!==null&&(A=mi(_),_!==A||_.tag!==5&&_.tag!==6)&&(_=null)):(k=null,_=d),k!==_)){if(N=rm,R="onMouseLeave",b="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(N=im,R="onPointerLeave",b="onPointerEnter",w="pointer"),A=k==null?m:Oi(k),v=_==null?m:Oi(_),m=new N(R,w+"leave",k,n,p),m.target=A,m.relatedTarget=v,R=null,qs(p)===d&&(N=new N(b,w+"enter",_,n,p),N.target=v,N.relatedTarget=A,R=N),A=R,k&&_)t:{for(N=k,b=_,w=0,v=N;v;v=Ci(v))w++;for(v=0,R=b;R;R=Ci(R))v++;for(;0<w-v;)N=Ci(N),w--;for(;0<v-w;)b=Ci(b),v--;for(;w--;){if(N===b||b!==null&&N===b.alternate)break t;N=Ci(N),b=Ci(b)}N=null}else N=null;k!==null&&mm(f,m,k,N,!1),_!==null&&A!==null&&mm(f,A,_,N,!0)}}e:{if(m=d?Oi(d):window,k=m.nodeName&&m.nodeName.toLowerCase(),k==="select"||k==="input"&&m.type==="file")var K=fS;else if(am(m))if(R1)K=yS;else{K=gS;var ee=pS}else(k=m.nodeName)&&k.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(K=mS);if(K&&(K=K(t,d))){N1(f,K,n,p);break e}ee&&ee(t,m,d),t==="focusout"&&(ee=m._wrapperState)&&ee.controlled&&m.type==="number"&&ch(m,"number",m.value)}switch(ee=d?Oi(d):window,t){case"focusin":(am(ee)||ee.contentEditable==="true")&&(Ai=ee,wh=d,ol=null);break;case"focusout":ol=wh=Ai=null;break;case"mousedown":Sh=!0;break;case"contextmenu":case"mouseup":case"dragend":Sh=!1,fm(f,n,p);break;case"selectionchange":if(_S)break;case"keydown":case"keyup":fm(f,n,p)}var E;if(zf)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Ri?k1(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(j1&&n.locale!=="ko"&&(Ri||x!=="onCompositionStart"?x==="onCompositionEnd"&&Ri&&(E=I1()):(hs=p,Mf="value"in hs?hs.value:hs.textContent,Ri=!0)),ee=Rc(d,x),0<ee.length&&(x=new sm(x,t,null,n,p),f.push({event:x,listeners:ee}),E?x.data=E:(E=T1(n),E!==null&&(x.data=E)))),(E=aS?cS(t,n):uS(t,n))&&(d=Rc(d,"onBeforeInput"),0<d.length&&(p=new sm("onBeforeInput","beforeinput",null,n,p),f.push({event:p,listeners:d}),p.data=E))}U1(f,e)})}function Tl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Rc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Sl(t,n),i!=null&&r.unshift(Tl(t,i,s)),i=Sl(t,e),i!=null&&r.push(Tl(t,i,s))),t=t.return}return r}function Ci(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function mm(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=Sl(n,i),u!=null&&o.unshift(Tl(n,u,c))):s||(u=Sl(n,i),u!=null&&o.push(Tl(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var ES=/\r\n?/g,CS=/\u0000|\uFFFD/g;function ym(t){return(typeof t=="string"?t:""+t).replace(ES,`
`).replace(CS,"")}function Ha(t,e,n){if(e=ym(e),ym(t)!==e&&n)throw Error(ae(425))}function Ac(){}var bh=null,Eh=null;function Ch(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ih=typeof setTimeout=="function"?setTimeout:void 0,IS=typeof clearTimeout=="function"?clearTimeout:void 0,xm=typeof Promise=="function"?Promise:void 0,jS=typeof queueMicrotask=="function"?queueMicrotask:typeof xm<"u"?function(t){return xm.resolve(null).then(t).catch(kS)}:Ih;function kS(t){setTimeout(function(){throw t})}function bd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Cl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Cl(e)}function xs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function vm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var xo=Math.random().toString(36).slice(2),vr="__reactFiber$"+xo,Nl="__reactProps$"+xo,Ur="__reactContainer$"+xo,jh="__reactEvents$"+xo,TS="__reactListeners$"+xo,NS="__reactHandles$"+xo;function qs(t){var e=t[vr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ur]||n[vr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=vm(t);t!==null;){if(n=t[vr])return n;t=vm(t)}return e}t=n,n=t.parentNode}return null}function na(t){return t=t[vr]||t[Ur],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Oi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ae(33))}function vu(t){return t[Nl]||null}var kh=[],Di=-1;function Ds(t){return{current:t}}function gt(t){0>Di||(t.current=kh[Di],kh[Di]=null,Di--)}function ht(t,e){Di++,kh[Di]=t.current,t.current=e}var Ts={},ln=Ds(Ts),wn=Ds(!1),ii=Ts;function Zi(t,e){var n=t.type.contextTypes;if(!n)return Ts;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Sn(t){return t=t.childContextTypes,t!=null}function Pc(){gt(wn),gt(ln)}function _m(t,e,n){if(ln.current!==Ts)throw Error(ae(168));ht(ln,e),ht(wn,n)}function W1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ae(108,p2(t)||"Unknown",s));return St({},n,r)}function Oc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ts,ii=ln.current,ht(ln,t),ht(wn,wn.current),!0}function wm(t,e,n){var r=t.stateNode;if(!r)throw Error(ae(169));n?(t=W1(t,e,ii),r.__reactInternalMemoizedMergedChildContext=t,gt(wn),gt(ln),ht(ln,t)):gt(wn),ht(wn,n)}var Ar=null,_u=!1,Ed=!1;function V1(t){Ar===null?Ar=[t]:Ar.push(t)}function RS(t){_u=!0,V1(t)}function Ms(){if(!Ed&&Ar!==null){Ed=!0;var t=0,e=ot;try{var n=Ar;for(ot=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ar=null,_u=!1}catch(s){throw Ar!==null&&(Ar=Ar.slice(t+1)),g1(Af,Ms),s}finally{ot=e,Ed=!1}}return null}var Mi=[],Li=0,Dc=null,Mc=0,Fn=[],zn=0,oi=null,Or=1,Dr="";function Ws(t,e){Mi[Li++]=Mc,Mi[Li++]=Dc,Dc=t,Mc=e}function H1(t,e,n){Fn[zn++]=Or,Fn[zn++]=Dr,Fn[zn++]=oi,oi=t;var r=Or;t=Dr;var s=32-ir(r)-1;r&=~(1<<s),n+=1;var i=32-ir(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Or=1<<32-ir(e)+s|n<<s|r,Dr=i+t}else Or=1<<i|n<<s|r,Dr=t}function Uf(t){t.return!==null&&(Ws(t,1),H1(t,1,0))}function $f(t){for(;t===Dc;)Dc=Mi[--Li],Mi[Li]=null,Mc=Mi[--Li],Mi[Li]=null;for(;t===oi;)oi=Fn[--zn],Fn[zn]=null,Dr=Fn[--zn],Fn[zn]=null,Or=Fn[--zn],Fn[zn]=null}var Nn=null,Tn=null,yt=!1,er=null;function K1(t,e){var n=Bn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Sm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Nn=t,Tn=xs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Nn=t,Tn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=oi!==null?{id:Or,overflow:Dr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Bn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Nn=t,Tn=null,!0):!1;default:return!1}}function Th(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Nh(t){if(yt){var e=Tn;if(e){var n=e;if(!Sm(t,e)){if(Th(t))throw Error(ae(418));e=xs(n.nextSibling);var r=Nn;e&&Sm(t,e)?K1(r,n):(t.flags=t.flags&-4097|2,yt=!1,Nn=t)}}else{if(Th(t))throw Error(ae(418));t.flags=t.flags&-4097|2,yt=!1,Nn=t}}}function bm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Nn=t}function Ka(t){if(t!==Nn)return!1;if(!yt)return bm(t),yt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ch(t.type,t.memoizedProps)),e&&(e=Tn)){if(Th(t))throw G1(),Error(ae(418));for(;e;)K1(t,e),e=xs(e.nextSibling)}if(bm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Tn=xs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Tn=null}}else Tn=Nn?xs(t.stateNode.nextSibling):null;return!0}function G1(){for(var t=Tn;t;)t=xs(t.nextSibling)}function eo(){Tn=Nn=null,yt=!1}function Wf(t){er===null?er=[t]:er.push(t)}var AS=Gr.ReactCurrentBatchConfig;function $o(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ae(309));var r=n.stateNode}if(!r)throw Error(ae(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var c=s.refs;o===null?delete c[i]:c[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(ae(284));if(!n._owner)throw Error(ae(290,t))}return t}function Ga(t,e){throw t=Object.prototype.toString.call(e),Error(ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Em(t){var e=t._init;return e(t._payload)}function q1(t){function e(b,w){if(t){var v=b.deletions;v===null?(b.deletions=[w],b.flags|=16):v.push(w)}}function n(b,w){if(!t)return null;for(;w!==null;)e(b,w),w=w.sibling;return null}function r(b,w){for(b=new Map;w!==null;)w.key!==null?b.set(w.key,w):b.set(w.index,w),w=w.sibling;return b}function s(b,w){return b=Ss(b,w),b.index=0,b.sibling=null,b}function i(b,w,v){return b.index=v,t?(v=b.alternate,v!==null?(v=v.index,v<w?(b.flags|=2,w):v):(b.flags|=2,w)):(b.flags|=1048576,w)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function c(b,w,v,R){return w===null||w.tag!==6?(w=Rd(v,b.mode,R),w.return=b,w):(w=s(w,v),w.return=b,w)}function u(b,w,v,R){var K=v.type;return K===Ni?p(b,w,v.props.children,R,v.key):w!==null&&(w.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===as&&Em(K)===w.type)?(R=s(w,v.props),R.ref=$o(b,w,v),R.return=b,R):(R=mc(v.type,v.key,v.props,null,b.mode,R),R.ref=$o(b,w,v),R.return=b,R)}function d(b,w,v,R){return w===null||w.tag!==4||w.stateNode.containerInfo!==v.containerInfo||w.stateNode.implementation!==v.implementation?(w=Ad(v,b.mode,R),w.return=b,w):(w=s(w,v.children||[]),w.return=b,w)}function p(b,w,v,R,K){return w===null||w.tag!==7?(w=ti(v,b.mode,R,K),w.return=b,w):(w=s(w,v),w.return=b,w)}function f(b,w,v){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Rd(""+w,b.mode,v),w.return=b,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ma:return v=mc(w.type,w.key,w.props,null,b.mode,v),v.ref=$o(b,null,w),v.return=b,v;case Ti:return w=Ad(w,b.mode,v),w.return=b,w;case as:var R=w._init;return f(b,R(w._payload),v)}if(Zo(w)||Lo(w))return w=ti(w,b.mode,v,null),w.return=b,w;Ga(b,w)}return null}function m(b,w,v,R){var K=w!==null?w.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return K!==null?null:c(b,w,""+v,R);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ma:return v.key===K?u(b,w,v,R):null;case Ti:return v.key===K?d(b,w,v,R):null;case as:return K=v._init,m(b,w,K(v._payload),R)}if(Zo(v)||Lo(v))return K!==null?null:p(b,w,v,R,null);Ga(b,v)}return null}function k(b,w,v,R,K){if(typeof R=="string"&&R!==""||typeof R=="number")return b=b.get(v)||null,c(w,b,""+R,K);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Ma:return b=b.get(R.key===null?v:R.key)||null,u(w,b,R,K);case Ti:return b=b.get(R.key===null?v:R.key)||null,d(w,b,R,K);case as:var ee=R._init;return k(b,w,v,ee(R._payload),K)}if(Zo(R)||Lo(R))return b=b.get(v)||null,p(w,b,R,K,null);Ga(w,R)}return null}function _(b,w,v,R){for(var K=null,ee=null,E=w,x=w=0,C=null;E!==null&&x<v.length;x++){E.index>x?(C=E,E=null):C=E.sibling;var j=m(b,E,v[x],R);if(j===null){E===null&&(E=C);break}t&&E&&j.alternate===null&&e(b,E),w=i(j,w,x),ee===null?K=j:ee.sibling=j,ee=j,E=C}if(x===v.length)return n(b,E),yt&&Ws(b,x),K;if(E===null){for(;x<v.length;x++)E=f(b,v[x],R),E!==null&&(w=i(E,w,x),ee===null?K=E:ee.sibling=E,ee=E);return yt&&Ws(b,x),K}for(E=r(b,E);x<v.length;x++)C=k(E,b,x,v[x],R),C!==null&&(t&&C.alternate!==null&&E.delete(C.key===null?x:C.key),w=i(C,w,x),ee===null?K=C:ee.sibling=C,ee=C);return t&&E.forEach(function(T){return e(b,T)}),yt&&Ws(b,x),K}function N(b,w,v,R){var K=Lo(v);if(typeof K!="function")throw Error(ae(150));if(v=K.call(v),v==null)throw Error(ae(151));for(var ee=K=null,E=w,x=w=0,C=null,j=v.next();E!==null&&!j.done;x++,j=v.next()){E.index>x?(C=E,E=null):C=E.sibling;var T=m(b,E,j.value,R);if(T===null){E===null&&(E=C);break}t&&E&&T.alternate===null&&e(b,E),w=i(T,w,x),ee===null?K=T:ee.sibling=T,ee=T,E=C}if(j.done)return n(b,E),yt&&Ws(b,x),K;if(E===null){for(;!j.done;x++,j=v.next())j=f(b,j.value,R),j!==null&&(w=i(j,w,x),ee===null?K=j:ee.sibling=j,ee=j);return yt&&Ws(b,x),K}for(E=r(b,E);!j.done;x++,j=v.next())j=k(E,b,x,j.value,R),j!==null&&(t&&j.alternate!==null&&E.delete(j.key===null?x:j.key),w=i(j,w,x),ee===null?K=j:ee.sibling=j,ee=j);return t&&E.forEach(function(D){return e(b,D)}),yt&&Ws(b,x),K}function A(b,w,v,R){if(typeof v=="object"&&v!==null&&v.type===Ni&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Ma:e:{for(var K=v.key,ee=w;ee!==null;){if(ee.key===K){if(K=v.type,K===Ni){if(ee.tag===7){n(b,ee.sibling),w=s(ee,v.props.children),w.return=b,b=w;break e}}else if(ee.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===as&&Em(K)===ee.type){n(b,ee.sibling),w=s(ee,v.props),w.ref=$o(b,ee,v),w.return=b,b=w;break e}n(b,ee);break}else e(b,ee);ee=ee.sibling}v.type===Ni?(w=ti(v.props.children,b.mode,R,v.key),w.return=b,b=w):(R=mc(v.type,v.key,v.props,null,b.mode,R),R.ref=$o(b,w,v),R.return=b,b=R)}return o(b);case Ti:e:{for(ee=v.key;w!==null;){if(w.key===ee)if(w.tag===4&&w.stateNode.containerInfo===v.containerInfo&&w.stateNode.implementation===v.implementation){n(b,w.sibling),w=s(w,v.children||[]),w.return=b,b=w;break e}else{n(b,w);break}else e(b,w);w=w.sibling}w=Ad(v,b.mode,R),w.return=b,b=w}return o(b);case as:return ee=v._init,A(b,w,ee(v._payload),R)}if(Zo(v))return _(b,w,v,R);if(Lo(v))return N(b,w,v,R);Ga(b,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,w!==null&&w.tag===6?(n(b,w.sibling),w=s(w,v),w.return=b,b=w):(n(b,w),w=Rd(v,b.mode,R),w.return=b,b=w),o(b)):n(b,w)}return A}var to=q1(!0),Y1=q1(!1),Lc=Ds(null),Fc=null,Fi=null,Vf=null;function Hf(){Vf=Fi=Fc=null}function Kf(t){var e=Lc.current;gt(Lc),t._currentValue=e}function Rh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ki(t,e){Fc=t,Vf=Fi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(vn=!0),t.firstContext=null)}function Wn(t){var e=t._currentValue;if(Vf!==t)if(t={context:t,memoizedValue:e,next:null},Fi===null){if(Fc===null)throw Error(ae(308));Fi=t,Fc.dependencies={lanes:0,firstContext:t}}else Fi=Fi.next=t;return e}var Ys=null;function Gf(t){Ys===null?Ys=[t]:Ys.push(t)}function Q1(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Gf(e)):(n.next=s.next,s.next=n),e.interleaved=n,$r(t,r)}function $r(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var cs=!1;function qf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function J1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Lr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function vs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ze&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,$r(t,n)}return s=r.interleaved,s===null?(e.next=e,Gf(r)):(e.next=s.next,s.next=e),r.interleaved=e,$r(t,n)}function uc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Pf(t,n)}}function Cm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function zc(t,e,n,r){var s=t.updateQueue;cs=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var p=t.alternate;p!==null&&(p=p.updateQueue,c=p.lastBaseUpdate,c!==o&&(c===null?p.firstBaseUpdate=d:c.next=d,p.lastBaseUpdate=u))}if(i!==null){var f=s.baseState;o=0,p=d=u=null,c=i;do{var m=c.lane,k=c.eventTime;if((r&m)===m){p!==null&&(p=p.next={eventTime:k,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var _=t,N=c;switch(m=e,k=n,N.tag){case 1:if(_=N.payload,typeof _=="function"){f=_.call(k,f,m);break e}f=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=N.payload,m=typeof _=="function"?_.call(k,f,m):_,m==null)break e;f=St({},f,m);break e;case 2:cs=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[c]:m.push(c))}else k={eventTime:k,lane:m,tag:c.tag,payload:c.payload,callback:c.callback,next:null},p===null?(d=p=k,u=f):p=p.next=k,o|=m;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;m=c,c=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(p===null&&(u=f),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ai|=o,t.lanes=o,t.memoizedState=f}}function Im(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ae(191,s));s.call(r)}}}var ra={},Sr=Ds(ra),Rl=Ds(ra),Al=Ds(ra);function Qs(t){if(t===ra)throw Error(ae(174));return t}function Yf(t,e){switch(ht(Al,e),ht(Rl,t),ht(Sr,ra),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:dh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=dh(e,t)}gt(Sr),ht(Sr,e)}function no(){gt(Sr),gt(Rl),gt(Al)}function X1(t){Qs(Al.current);var e=Qs(Sr.current),n=dh(e,t.type);e!==n&&(ht(Rl,t),ht(Sr,n))}function Qf(t){Rl.current===t&&(gt(Sr),gt(Rl))}var vt=Ds(0);function Bc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Cd=[];function Jf(){for(var t=0;t<Cd.length;t++)Cd[t]._workInProgressVersionPrimary=null;Cd.length=0}var dc=Gr.ReactCurrentDispatcher,Id=Gr.ReactCurrentBatchConfig,li=0,_t=null,Ft=null,Ht=null,Uc=!1,ll=!1,Pl=0,PS=0;function nn(){throw Error(ae(321))}function Xf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ar(t[n],e[n]))return!1;return!0}function Zf(t,e,n,r,s,i){if(li=i,_t=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,dc.current=t===null||t.memoizedState===null?LS:FS,t=n(r,s),ll){i=0;do{if(ll=!1,Pl=0,25<=i)throw Error(ae(301));i+=1,Ht=Ft=null,e.updateQueue=null,dc.current=zS,t=n(r,s)}while(ll)}if(dc.current=$c,e=Ft!==null&&Ft.next!==null,li=0,Ht=Ft=_t=null,Uc=!1,e)throw Error(ae(300));return t}function ep(){var t=Pl!==0;return Pl=0,t}function mr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?_t.memoizedState=Ht=t:Ht=Ht.next=t,Ht}function Vn(){if(Ft===null){var t=_t.alternate;t=t!==null?t.memoizedState:null}else t=Ft.next;var e=Ht===null?_t.memoizedState:Ht.next;if(e!==null)Ht=e,Ft=t;else{if(t===null)throw Error(ae(310));Ft=t,t={memoizedState:Ft.memoizedState,baseState:Ft.baseState,baseQueue:Ft.baseQueue,queue:Ft.queue,next:null},Ht===null?_t.memoizedState=Ht=t:Ht=Ht.next=t}return Ht}function Ol(t,e){return typeof e=="function"?e(t):e}function jd(t){var e=Vn(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var r=Ft,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=o=null,u=null,d=i;do{var p=d.lane;if((li&p)===p)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var f={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=f,o=r):u=u.next=f,_t.lanes|=p,ai|=p}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=c,ar(r,e.memoizedState)||(vn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,_t.lanes|=i,ai|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function kd(t){var e=Vn(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);ar(i,e.memoizedState)||(vn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Z1(){}function ex(t,e){var n=_t,r=Vn(),s=e(),i=!ar(r.memoizedState,s);if(i&&(r.memoizedState=s,vn=!0),r=r.queue,tp(rx.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ht!==null&&Ht.memoizedState.tag&1){if(n.flags|=2048,Dl(9,nx.bind(null,n,r,s,e),void 0,null),Gt===null)throw Error(ae(349));li&30||tx(n,e,s)}return s}function tx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=_t.updateQueue,e===null?(e={lastEffect:null,stores:null},_t.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function nx(t,e,n,r){e.value=n,e.getSnapshot=r,sx(e)&&ix(t)}function rx(t,e,n){return n(function(){sx(e)&&ix(t)})}function sx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ar(t,n)}catch{return!0}}function ix(t){var e=$r(t,1);e!==null&&or(e,t,1,-1)}function jm(t){var e=mr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ol,lastRenderedState:t},e.queue=t,t=t.dispatch=MS.bind(null,_t,t),[e.memoizedState,t]}function Dl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=_t.updateQueue,e===null?(e={lastEffect:null,stores:null},_t.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function ox(){return Vn().memoizedState}function hc(t,e,n,r){var s=mr();_t.flags|=t,s.memoizedState=Dl(1|e,n,void 0,r===void 0?null:r)}function wu(t,e,n,r){var s=Vn();r=r===void 0?null:r;var i=void 0;if(Ft!==null){var o=Ft.memoizedState;if(i=o.destroy,r!==null&&Xf(r,o.deps)){s.memoizedState=Dl(e,n,i,r);return}}_t.flags|=t,s.memoizedState=Dl(1|e,n,i,r)}function km(t,e){return hc(8390656,8,t,e)}function tp(t,e){return wu(2048,8,t,e)}function lx(t,e){return wu(4,2,t,e)}function ax(t,e){return wu(4,4,t,e)}function cx(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ux(t,e,n){return n=n!=null?n.concat([t]):null,wu(4,4,cx.bind(null,e,t),n)}function np(){}function dx(t,e){var n=Vn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Xf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function hx(t,e){var n=Vn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Xf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function fx(t,e,n){return li&21?(ar(n,e)||(n=x1(),_t.lanes|=n,ai|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,vn=!0),t.memoizedState=n)}function OS(t,e){var n=ot;ot=n!==0&&4>n?n:4,t(!0);var r=Id.transition;Id.transition={};try{t(!1),e()}finally{ot=n,Id.transition=r}}function px(){return Vn().memoizedState}function DS(t,e,n){var r=ws(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},gx(t))mx(e,n);else if(n=Q1(t,e,n,r),n!==null){var s=hn();or(n,t,r,s),yx(n,e,r)}}function MS(t,e,n){var r=ws(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(gx(t))mx(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,c=i(o,n);if(s.hasEagerState=!0,s.eagerState=c,ar(c,o)){var u=e.interleaved;u===null?(s.next=s,Gf(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Q1(t,e,s,r),n!==null&&(s=hn(),or(n,t,r,s),yx(n,e,r))}}function gx(t){var e=t.alternate;return t===_t||e!==null&&e===_t}function mx(t,e){ll=Uc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function yx(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Pf(t,n)}}var $c={readContext:Wn,useCallback:nn,useContext:nn,useEffect:nn,useImperativeHandle:nn,useInsertionEffect:nn,useLayoutEffect:nn,useMemo:nn,useReducer:nn,useRef:nn,useState:nn,useDebugValue:nn,useDeferredValue:nn,useTransition:nn,useMutableSource:nn,useSyncExternalStore:nn,useId:nn,unstable_isNewReconciler:!1},LS={readContext:Wn,useCallback:function(t,e){return mr().memoizedState=[t,e===void 0?null:e],t},useContext:Wn,useEffect:km,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,hc(4194308,4,cx.bind(null,e,t),n)},useLayoutEffect:function(t,e){return hc(4194308,4,t,e)},useInsertionEffect:function(t,e){return hc(4,2,t,e)},useMemo:function(t,e){var n=mr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=mr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=DS.bind(null,_t,t),[r.memoizedState,t]},useRef:function(t){var e=mr();return t={current:t},e.memoizedState=t},useState:jm,useDebugValue:np,useDeferredValue:function(t){return mr().memoizedState=t},useTransition:function(){var t=jm(!1),e=t[0];return t=OS.bind(null,t[1]),mr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=_t,s=mr();if(yt){if(n===void 0)throw Error(ae(407));n=n()}else{if(n=e(),Gt===null)throw Error(ae(349));li&30||tx(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,km(rx.bind(null,r,i,t),[t]),r.flags|=2048,Dl(9,nx.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=mr(),e=Gt.identifierPrefix;if(yt){var n=Dr,r=Or;n=(r&~(1<<32-ir(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Pl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=PS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},FS={readContext:Wn,useCallback:dx,useContext:Wn,useEffect:tp,useImperativeHandle:ux,useInsertionEffect:lx,useLayoutEffect:ax,useMemo:hx,useReducer:jd,useRef:ox,useState:function(){return jd(Ol)},useDebugValue:np,useDeferredValue:function(t){var e=Vn();return fx(e,Ft.memoizedState,t)},useTransition:function(){var t=jd(Ol)[0],e=Vn().memoizedState;return[t,e]},useMutableSource:Z1,useSyncExternalStore:ex,useId:px,unstable_isNewReconciler:!1},zS={readContext:Wn,useCallback:dx,useContext:Wn,useEffect:tp,useImperativeHandle:ux,useInsertionEffect:lx,useLayoutEffect:ax,useMemo:hx,useReducer:kd,useRef:ox,useState:function(){return kd(Ol)},useDebugValue:np,useDeferredValue:function(t){var e=Vn();return Ft===null?e.memoizedState=t:fx(e,Ft.memoizedState,t)},useTransition:function(){var t=kd(Ol)[0],e=Vn().memoizedState;return[t,e]},useMutableSource:Z1,useSyncExternalStore:ex,useId:px,unstable_isNewReconciler:!1};function Xn(t,e){if(t&&t.defaultProps){e=St({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ah(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:St({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Su={isMounted:function(t){return(t=t._reactInternals)?mi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=hn(),s=ws(t),i=Lr(r,s);i.payload=e,n!=null&&(i.callback=n),e=vs(t,i,s),e!==null&&(or(e,t,s,r),uc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=hn(),s=ws(t),i=Lr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=vs(t,i,s),e!==null&&(or(e,t,s,r),uc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=hn(),r=ws(t),s=Lr(n,r);s.tag=2,e!=null&&(s.callback=e),e=vs(t,s,r),e!==null&&(or(e,t,r,n),uc(e,t,r))}};function Tm(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!jl(n,r)||!jl(s,i):!0}function xx(t,e,n){var r=!1,s=Ts,i=e.contextType;return typeof i=="object"&&i!==null?i=Wn(i):(s=Sn(e)?ii:ln.current,r=e.contextTypes,i=(r=r!=null)?Zi(t,s):Ts),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Su,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Nm(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Su.enqueueReplaceState(e,e.state,null)}function Ph(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},qf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Wn(i):(i=Sn(e)?ii:ln.current,s.context=Zi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Ah(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Su.enqueueReplaceState(s,s.state,null),zc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ro(t,e){try{var n="",r=e;do n+=f2(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Td(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Oh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var BS=typeof WeakMap=="function"?WeakMap:Map;function vx(t,e,n){n=Lr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Vc||(Vc=!0,Vh=r),Oh(t,e)},n}function _x(t,e,n){n=Lr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Oh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Oh(t,e),typeof r!="function"&&(_s===null?_s=new Set([this]):_s.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Rm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new BS;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=eb.bind(null,t,e,n),e.then(t,t))}function Am(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Pm(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Lr(-1,1),e.tag=2,vs(n,e,1))),n.lanes|=1),t)}var US=Gr.ReactCurrentOwner,vn=!1;function cn(t,e,n,r){e.child=t===null?Y1(e,null,n,r):to(e,t.child,n,r)}function Om(t,e,n,r,s){n=n.render;var i=e.ref;return Ki(e,s),r=Zf(t,e,n,r,i,s),n=ep(),t!==null&&!vn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Wr(t,e,s)):(yt&&n&&Uf(e),e.flags|=1,cn(t,e,r,s),e.child)}function Dm(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!up(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,wx(t,e,i,r,s)):(t=mc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:jl,n(o,r)&&t.ref===e.ref)return Wr(t,e,s)}return e.flags|=1,t=Ss(i,r),t.ref=e.ref,t.return=e,e.child=t}function wx(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(jl(i,r)&&t.ref===e.ref)if(vn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(vn=!0);else return e.lanes=t.lanes,Wr(t,e,s)}return Dh(t,e,n,r,s)}function Sx(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ht(Bi,kn),kn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ht(Bi,kn),kn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ht(Bi,kn),kn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ht(Bi,kn),kn|=r;return cn(t,e,s,n),e.child}function bx(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Dh(t,e,n,r,s){var i=Sn(n)?ii:ln.current;return i=Zi(e,i),Ki(e,s),n=Zf(t,e,n,r,i,s),r=ep(),t!==null&&!vn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Wr(t,e,s)):(yt&&r&&Uf(e),e.flags|=1,cn(t,e,n,s),e.child)}function Mm(t,e,n,r,s){if(Sn(n)){var i=!0;Oc(e)}else i=!1;if(Ki(e,s),e.stateNode===null)fc(t,e),xx(e,n,r),Ph(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Wn(d):(d=Sn(n)?ii:ln.current,d=Zi(e,d));var p=n.getDerivedStateFromProps,f=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==d)&&Nm(e,o,r,d),cs=!1;var m=e.memoizedState;o.state=m,zc(e,r,o,s),u=e.memoizedState,c!==r||m!==u||wn.current||cs?(typeof p=="function"&&(Ah(e,n,p,r),u=e.memoizedState),(c=cs||Tm(e,n,c,r,m,u,d))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,J1(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:Xn(e.type,c),o.props=d,f=e.pendingProps,m=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Wn(u):(u=Sn(n)?ii:ln.current,u=Zi(e,u));var k=n.getDerivedStateFromProps;(p=typeof k=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==f||m!==u)&&Nm(e,o,r,u),cs=!1,m=e.memoizedState,o.state=m,zc(e,r,o,s);var _=e.memoizedState;c!==f||m!==_||wn.current||cs?(typeof k=="function"&&(Ah(e,n,k,r),_=e.memoizedState),(d=cs||Tm(e,n,d,r,m,_,u)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Mh(t,e,n,r,i,s)}function Mh(t,e,n,r,s,i){bx(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&wm(e,n,!1),Wr(t,e,i);r=e.stateNode,US.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=to(e,t.child,null,i),e.child=to(e,null,c,i)):cn(t,e,c,i),e.memoizedState=r.state,s&&wm(e,n,!0),e.child}function Ex(t){var e=t.stateNode;e.pendingContext?_m(t,e.pendingContext,e.pendingContext!==e.context):e.context&&_m(t,e.context,!1),Yf(t,e.containerInfo)}function Lm(t,e,n,r,s){return eo(),Wf(s),e.flags|=256,cn(t,e,n,r),e.child}var Lh={dehydrated:null,treeContext:null,retryLane:0};function Fh(t){return{baseLanes:t,cachePool:null,transitions:null}}function Cx(t,e,n){var r=e.pendingProps,s=vt.current,i=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ht(vt,s&1),t===null)return Nh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Cu(o,r,0,null),t=ti(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Fh(n),e.memoizedState=Lh,t):rp(e,o));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return $S(t,e,o,r,c,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Ss(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=Ss(c,i):(i=ti(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Fh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Lh,r}return i=t.child,t=i.sibling,r=Ss(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function rp(t,e){return e=Cu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function qa(t,e,n,r){return r!==null&&Wf(r),to(e,t.child,null,n),t=rp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function $S(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Td(Error(ae(422))),qa(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Cu({mode:"visible",children:r.children},s,0,null),i=ti(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&to(e,t.child,null,o),e.child.memoizedState=Fh(o),e.memoizedState=Lh,i);if(!(e.mode&1))return qa(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(ae(419)),r=Td(i,r,void 0),qa(t,e,o,r)}if(c=(o&t.childLanes)!==0,vn||c){if(r=Gt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,$r(t,s),or(r,t,s,-1))}return cp(),r=Td(Error(ae(421))),qa(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=tb.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Tn=xs(s.nextSibling),Nn=e,yt=!0,er=null,t!==null&&(Fn[zn++]=Or,Fn[zn++]=Dr,Fn[zn++]=oi,Or=t.id,Dr=t.overflow,oi=e),e=rp(e,r.children),e.flags|=4096,e)}function Fm(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Rh(t.return,e,n)}function Nd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Ix(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(cn(t,e,r.children,n),r=vt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Fm(t,n,e);else if(t.tag===19)Fm(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ht(vt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Bc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Nd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Bc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Nd(e,!0,n,null,i);break;case"together":Nd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function fc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Wr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ai|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ae(153));if(e.child!==null){for(t=e.child,n=Ss(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ss(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function WS(t,e,n){switch(e.tag){case 3:Ex(e),eo();break;case 5:X1(e);break;case 1:Sn(e.type)&&Oc(e);break;case 4:Yf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ht(Lc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ht(vt,vt.current&1),e.flags|=128,null):n&e.child.childLanes?Cx(t,e,n):(ht(vt,vt.current&1),t=Wr(t,e,n),t!==null?t.sibling:null);ht(vt,vt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Ix(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ht(vt,vt.current),r)break;return null;case 22:case 23:return e.lanes=0,Sx(t,e,n)}return Wr(t,e,n)}var jx,zh,kx,Tx;jx=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};zh=function(){};kx=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Qs(Sr.current);var i=null;switch(n){case"input":s=lh(t,s),r=lh(t,r),i=[];break;case"select":s=St({},s,{value:void 0}),r=St({},r,{value:void 0}),i=[];break;case"textarea":s=uh(t,s),r=uh(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ac)}hh(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(_l.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(_l.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&pt("scroll",t),i||c===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};Tx=function(t,e,n,r){n!==r&&(e.flags|=4)};function Wo(t,e){if(!yt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function rn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function VS(t,e,n){var r=e.pendingProps;switch($f(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rn(e),null;case 1:return Sn(e.type)&&Pc(),rn(e),null;case 3:return r=e.stateNode,no(),gt(wn),gt(ln),Jf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ka(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,er!==null&&(Gh(er),er=null))),zh(t,e),rn(e),null;case 5:Qf(e);var s=Qs(Al.current);if(n=e.type,t!==null&&e.stateNode!=null)kx(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ae(166));return rn(e),null}if(t=Qs(Sr.current),Ka(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[vr]=e,r[Nl]=i,t=(e.mode&1)!==0,n){case"dialog":pt("cancel",r),pt("close",r);break;case"iframe":case"object":case"embed":pt("load",r);break;case"video":case"audio":for(s=0;s<tl.length;s++)pt(tl[s],r);break;case"source":pt("error",r);break;case"img":case"image":case"link":pt("error",r),pt("load",r);break;case"details":pt("toggle",r);break;case"input":Gg(r,i),pt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},pt("invalid",r);break;case"textarea":Yg(r,i),pt("invalid",r)}hh(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&Ha(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&Ha(r.textContent,c,t),s=["children",""+c]):_l.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&pt("scroll",r)}switch(n){case"input":La(r),qg(r,i,!0);break;case"textarea":La(r),Qg(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ac)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=r1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[vr]=e,t[Nl]=r,jx(t,e,!1,!1),e.stateNode=t;e:{switch(o=fh(n,r),n){case"dialog":pt("cancel",t),pt("close",t),s=r;break;case"iframe":case"object":case"embed":pt("load",t),s=r;break;case"video":case"audio":for(s=0;s<tl.length;s++)pt(tl[s],t);s=r;break;case"source":pt("error",t),s=r;break;case"img":case"image":case"link":pt("error",t),pt("load",t),s=r;break;case"details":pt("toggle",t),s=r;break;case"input":Gg(t,r),s=lh(t,r),pt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=St({},r,{value:void 0}),pt("invalid",t);break;case"textarea":Yg(t,r),s=uh(t,r),pt("invalid",t);break;default:s=r}hh(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?o1(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&s1(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&wl(t,u):typeof u=="number"&&wl(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(_l.hasOwnProperty(i)?u!=null&&i==="onScroll"&&pt("scroll",t):u!=null&&jf(t,i,u,o))}switch(n){case"input":La(t),qg(t,r,!1);break;case"textarea":La(t),Qg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ks(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?$i(t,!!r.multiple,i,!1):r.defaultValue!=null&&$i(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ac)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return rn(e),null;case 6:if(t&&e.stateNode!=null)Tx(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ae(166));if(n=Qs(Al.current),Qs(Sr.current),Ka(e)){if(r=e.stateNode,n=e.memoizedProps,r[vr]=e,(i=r.nodeValue!==n)&&(t=Nn,t!==null))switch(t.tag){case 3:Ha(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ha(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[vr]=e,e.stateNode=r}return rn(e),null;case 13:if(gt(vt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(yt&&Tn!==null&&e.mode&1&&!(e.flags&128))G1(),eo(),e.flags|=98560,i=!1;else if(i=Ka(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(ae(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ae(317));i[vr]=e}else eo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;rn(e),i=!1}else er!==null&&(Gh(er),er=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||vt.current&1?Ut===0&&(Ut=3):cp())),e.updateQueue!==null&&(e.flags|=4),rn(e),null);case 4:return no(),zh(t,e),t===null&&kl(e.stateNode.containerInfo),rn(e),null;case 10:return Kf(e.type._context),rn(e),null;case 17:return Sn(e.type)&&Pc(),rn(e),null;case 19:if(gt(vt),i=e.memoizedState,i===null)return rn(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Wo(i,!1);else{if(Ut!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Bc(t),o!==null){for(e.flags|=128,Wo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ht(vt,vt.current&1|2),e.child}t=t.sibling}i.tail!==null&&Rt()>so&&(e.flags|=128,r=!0,Wo(i,!1),e.lanes=4194304)}else{if(!r)if(t=Bc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Wo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!yt)return rn(e),null}else 2*Rt()-i.renderingStartTime>so&&n!==1073741824&&(e.flags|=128,r=!0,Wo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Rt(),e.sibling=null,n=vt.current,ht(vt,r?n&1|2:n&1),e):(rn(e),null);case 22:case 23:return ap(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?kn&1073741824&&(rn(e),e.subtreeFlags&6&&(e.flags|=8192)):rn(e),null;case 24:return null;case 25:return null}throw Error(ae(156,e.tag))}function HS(t,e){switch($f(e),e.tag){case 1:return Sn(e.type)&&Pc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return no(),gt(wn),gt(ln),Jf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Qf(e),null;case 13:if(gt(vt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ae(340));eo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return gt(vt),null;case 4:return no(),null;case 10:return Kf(e.type._context),null;case 22:case 23:return ap(),null;case 24:return null;default:return null}}var Ya=!1,sn=!1,KS=typeof WeakSet=="function"?WeakSet:Set,_e=null;function zi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ct(t,e,r)}else n.current=null}function Bh(t,e,n){try{n()}catch(r){Ct(t,e,r)}}var zm=!1;function GS(t,e){if(bh=Tc,t=O1(),Bf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,d=0,p=0,f=t,m=null;t:for(;;){for(var k;f!==n||s!==0&&f.nodeType!==3||(c=o+s),f!==i||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(k=f.firstChild)!==null;)m=f,f=k;for(;;){if(f===t)break t;if(m===n&&++d===s&&(c=o),m===i&&++p===r&&(u=o),(k=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=k}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Eh={focusedElem:t,selectionRange:n},Tc=!1,_e=e;_e!==null;)if(e=_e,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,_e=t;else for(;_e!==null;){e=_e;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var N=_.memoizedProps,A=_.memoizedState,b=e.stateNode,w=b.getSnapshotBeforeUpdate(e.elementType===e.type?N:Xn(e.type,N),A);b.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(R){Ct(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,_e=t;break}_e=e.return}return _=zm,zm=!1,_}function al(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Bh(e,n,i)}s=s.next}while(s!==r)}}function bu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Uh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Nx(t){var e=t.alternate;e!==null&&(t.alternate=null,Nx(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[vr],delete e[Nl],delete e[jh],delete e[TS],delete e[NS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Rx(t){return t.tag===5||t.tag===3||t.tag===4}function Bm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Rx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function $h(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ac));else if(r!==4&&(t=t.child,t!==null))for($h(t,e,n),t=t.sibling;t!==null;)$h(t,e,n),t=t.sibling}function Wh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Wh(t,e,n),t=t.sibling;t!==null;)Wh(t,e,n),t=t.sibling}var Qt=null,Zn=!1;function os(t,e,n){for(n=n.child;n!==null;)Ax(t,e,n),n=n.sibling}function Ax(t,e,n){if(wr&&typeof wr.onCommitFiberUnmount=="function")try{wr.onCommitFiberUnmount(gu,n)}catch{}switch(n.tag){case 5:sn||zi(n,e);case 6:var r=Qt,s=Zn;Qt=null,os(t,e,n),Qt=r,Zn=s,Qt!==null&&(Zn?(t=Qt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Qt.removeChild(n.stateNode));break;case 18:Qt!==null&&(Zn?(t=Qt,n=n.stateNode,t.nodeType===8?bd(t.parentNode,n):t.nodeType===1&&bd(t,n),Cl(t)):bd(Qt,n.stateNode));break;case 4:r=Qt,s=Zn,Qt=n.stateNode.containerInfo,Zn=!0,os(t,e,n),Qt=r,Zn=s;break;case 0:case 11:case 14:case 15:if(!sn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Bh(n,e,o),s=s.next}while(s!==r)}os(t,e,n);break;case 1:if(!sn&&(zi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Ct(n,e,c)}os(t,e,n);break;case 21:os(t,e,n);break;case 22:n.mode&1?(sn=(r=sn)||n.memoizedState!==null,os(t,e,n),sn=r):os(t,e,n);break;default:os(t,e,n)}}function Um(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new KS),e.forEach(function(r){var s=nb.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Jn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:Qt=c.stateNode,Zn=!1;break e;case 3:Qt=c.stateNode.containerInfo,Zn=!0;break e;case 4:Qt=c.stateNode.containerInfo,Zn=!0;break e}c=c.return}if(Qt===null)throw Error(ae(160));Ax(i,o,s),Qt=null,Zn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Ct(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Px(e,t),e=e.sibling}function Px(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Jn(e,t),pr(t),r&4){try{al(3,t,t.return),bu(3,t)}catch(N){Ct(t,t.return,N)}try{al(5,t,t.return)}catch(N){Ct(t,t.return,N)}}break;case 1:Jn(e,t),pr(t),r&512&&n!==null&&zi(n,n.return);break;case 5:if(Jn(e,t),pr(t),r&512&&n!==null&&zi(n,n.return),t.flags&32){var s=t.stateNode;try{wl(s,"")}catch(N){Ct(t,t.return,N)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&t1(s,i),fh(c,o);var d=fh(c,i);for(o=0;o<u.length;o+=2){var p=u[o],f=u[o+1];p==="style"?o1(s,f):p==="dangerouslySetInnerHTML"?s1(s,f):p==="children"?wl(s,f):jf(s,p,f,d)}switch(c){case"input":ah(s,i);break;case"textarea":n1(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var k=i.value;k!=null?$i(s,!!i.multiple,k,!1):m!==!!i.multiple&&(i.defaultValue!=null?$i(s,!!i.multiple,i.defaultValue,!0):$i(s,!!i.multiple,i.multiple?[]:"",!1))}s[Nl]=i}catch(N){Ct(t,t.return,N)}}break;case 6:if(Jn(e,t),pr(t),r&4){if(t.stateNode===null)throw Error(ae(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(N){Ct(t,t.return,N)}}break;case 3:if(Jn(e,t),pr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Cl(e.containerInfo)}catch(N){Ct(t,t.return,N)}break;case 4:Jn(e,t),pr(t);break;case 13:Jn(e,t),pr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(op=Rt())),r&4&&Um(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(sn=(d=sn)||p,Jn(e,t),sn=d):Jn(e,t),pr(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!p&&t.mode&1)for(_e=t,p=t.child;p!==null;){for(f=_e=p;_e!==null;){switch(m=_e,k=m.child,m.tag){case 0:case 11:case 14:case 15:al(4,m,m.return);break;case 1:zi(m,m.return);var _=m.stateNode;if(typeof _.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(N){Ct(r,n,N)}}break;case 5:zi(m,m.return);break;case 22:if(m.memoizedState!==null){Wm(f);continue}}k!==null?(k.return=m,_e=k):Wm(f)}p=p.sibling}e:for(p=null,f=t;;){if(f.tag===5){if(p===null){p=f;try{s=f.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=i1("display",o))}catch(N){Ct(t,t.return,N)}}}else if(f.tag===6){if(p===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(N){Ct(t,t.return,N)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;p===f&&(p=null),f=f.return}p===f&&(p=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Jn(e,t),pr(t),r&4&&Um(t);break;case 21:break;default:Jn(e,t),pr(t)}}function pr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Rx(n)){var r=n;break e}n=n.return}throw Error(ae(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(wl(s,""),r.flags&=-33);var i=Bm(t);Wh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,c=Bm(t);$h(t,c,o);break;default:throw Error(ae(161))}}catch(u){Ct(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function qS(t,e,n){_e=t,Ox(t)}function Ox(t,e,n){for(var r=(t.mode&1)!==0;_e!==null;){var s=_e,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ya;if(!o){var c=s.alternate,u=c!==null&&c.memoizedState!==null||sn;c=Ya;var d=sn;if(Ya=o,(sn=u)&&!d)for(_e=s;_e!==null;)o=_e,u=o.child,o.tag===22&&o.memoizedState!==null?Vm(s):u!==null?(u.return=o,_e=u):Vm(s);for(;i!==null;)_e=i,Ox(i),i=i.sibling;_e=s,Ya=c,sn=d}$m(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,_e=i):$m(t)}}function $m(t){for(;_e!==null;){var e=_e;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:sn||bu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!sn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Xn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Im(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Im(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var f=p.dehydrated;f!==null&&Cl(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}sn||e.flags&512&&Uh(e)}catch(m){Ct(e,e.return,m)}}if(e===t){_e=null;break}if(n=e.sibling,n!==null){n.return=e.return,_e=n;break}_e=e.return}}function Wm(t){for(;_e!==null;){var e=_e;if(e===t){_e=null;break}var n=e.sibling;if(n!==null){n.return=e.return,_e=n;break}_e=e.return}}function Vm(t){for(;_e!==null;){var e=_e;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{bu(4,e)}catch(u){Ct(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Ct(e,s,u)}}var i=e.return;try{Uh(e)}catch(u){Ct(e,i,u)}break;case 5:var o=e.return;try{Uh(e)}catch(u){Ct(e,o,u)}}}catch(u){Ct(e,e.return,u)}if(e===t){_e=null;break}var c=e.sibling;if(c!==null){c.return=e.return,_e=c;break}_e=e.return}}var YS=Math.ceil,Wc=Gr.ReactCurrentDispatcher,sp=Gr.ReactCurrentOwner,$n=Gr.ReactCurrentBatchConfig,Ze=0,Gt=null,At=null,Zt=0,kn=0,Bi=Ds(0),Ut=0,Ml=null,ai=0,Eu=0,ip=0,cl=null,xn=null,op=0,so=1/0,Nr=null,Vc=!1,Vh=null,_s=null,Qa=!1,fs=null,Hc=0,ul=0,Hh=null,pc=-1,gc=0;function hn(){return Ze&6?Rt():pc!==-1?pc:pc=Rt()}function ws(t){return t.mode&1?Ze&2&&Zt!==0?Zt&-Zt:AS.transition!==null?(gc===0&&(gc=x1()),gc):(t=ot,t!==0||(t=window.event,t=t===void 0?16:C1(t.type)),t):1}function or(t,e,n,r){if(50<ul)throw ul=0,Hh=null,Error(ae(185));ea(t,n,r),(!(Ze&2)||t!==Gt)&&(t===Gt&&(!(Ze&2)&&(Eu|=n),Ut===4&&ds(t,Zt)),bn(t,r),n===1&&Ze===0&&!(e.mode&1)&&(so=Rt()+500,_u&&Ms()))}function bn(t,e){var n=t.callbackNode;A2(t,e);var r=kc(t,t===Gt?Zt:0);if(r===0)n!==null&&Zg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Zg(n),e===1)t.tag===0?RS(Hm.bind(null,t)):V1(Hm.bind(null,t)),jS(function(){!(Ze&6)&&Ms()}),n=null;else{switch(v1(r)){case 1:n=Af;break;case 4:n=m1;break;case 16:n=jc;break;case 536870912:n=y1;break;default:n=jc}n=$x(n,Dx.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Dx(t,e){if(pc=-1,gc=0,Ze&6)throw Error(ae(327));var n=t.callbackNode;if(Gi()&&t.callbackNode!==n)return null;var r=kc(t,t===Gt?Zt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Kc(t,r);else{e=r;var s=Ze;Ze|=2;var i=Lx();(Gt!==t||Zt!==e)&&(Nr=null,so=Rt()+500,ei(t,e));do try{XS();break}catch(c){Mx(t,c)}while(!0);Hf(),Wc.current=i,Ze=s,At!==null?e=0:(Gt=null,Zt=0,e=Ut)}if(e!==0){if(e===2&&(s=xh(t),s!==0&&(r=s,e=Kh(t,s))),e===1)throw n=Ml,ei(t,0),ds(t,r),bn(t,Rt()),n;if(e===6)ds(t,r);else{if(s=t.current.alternate,!(r&30)&&!QS(s)&&(e=Kc(t,r),e===2&&(i=xh(t),i!==0&&(r=i,e=Kh(t,i))),e===1))throw n=Ml,ei(t,0),ds(t,r),bn(t,Rt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ae(345));case 2:Vs(t,xn,Nr);break;case 3:if(ds(t,r),(r&130023424)===r&&(e=op+500-Rt(),10<e)){if(kc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){hn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Ih(Vs.bind(null,t,xn,Nr),e);break}Vs(t,xn,Nr);break;case 4:if(ds(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-ir(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Rt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*YS(r/1960))-r,10<r){t.timeoutHandle=Ih(Vs.bind(null,t,xn,Nr),r);break}Vs(t,xn,Nr);break;case 5:Vs(t,xn,Nr);break;default:throw Error(ae(329))}}}return bn(t,Rt()),t.callbackNode===n?Dx.bind(null,t):null}function Kh(t,e){var n=cl;return t.current.memoizedState.isDehydrated&&(ei(t,e).flags|=256),t=Kc(t,e),t!==2&&(e=xn,xn=n,e!==null&&Gh(e)),t}function Gh(t){xn===null?xn=t:xn.push.apply(xn,t)}function QS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!ar(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ds(t,e){for(e&=~ip,e&=~Eu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ir(e),r=1<<n;t[n]=-1,e&=~r}}function Hm(t){if(Ze&6)throw Error(ae(327));Gi();var e=kc(t,0);if(!(e&1))return bn(t,Rt()),null;var n=Kc(t,e);if(t.tag!==0&&n===2){var r=xh(t);r!==0&&(e=r,n=Kh(t,r))}if(n===1)throw n=Ml,ei(t,0),ds(t,e),bn(t,Rt()),n;if(n===6)throw Error(ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Vs(t,xn,Nr),bn(t,Rt()),null}function lp(t,e){var n=Ze;Ze|=1;try{return t(e)}finally{Ze=n,Ze===0&&(so=Rt()+500,_u&&Ms())}}function ci(t){fs!==null&&fs.tag===0&&!(Ze&6)&&Gi();var e=Ze;Ze|=1;var n=$n.transition,r=ot;try{if($n.transition=null,ot=1,t)return t()}finally{ot=r,$n.transition=n,Ze=e,!(Ze&6)&&Ms()}}function ap(){kn=Bi.current,gt(Bi)}function ei(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,IS(n)),At!==null)for(n=At.return;n!==null;){var r=n;switch($f(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Pc();break;case 3:no(),gt(wn),gt(ln),Jf();break;case 5:Qf(r);break;case 4:no();break;case 13:gt(vt);break;case 19:gt(vt);break;case 10:Kf(r.type._context);break;case 22:case 23:ap()}n=n.return}if(Gt=t,At=t=Ss(t.current,null),Zt=kn=e,Ut=0,Ml=null,ip=Eu=ai=0,xn=cl=null,Ys!==null){for(e=0;e<Ys.length;e++)if(n=Ys[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Ys=null}return t}function Mx(t,e){do{var n=At;try{if(Hf(),dc.current=$c,Uc){for(var r=_t.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Uc=!1}if(li=0,Ht=Ft=_t=null,ll=!1,Pl=0,sp.current=null,n===null||n.return===null){Ut=1,Ml=e,At=null;break}e:{var i=t,o=n.return,c=n,u=e;if(e=Zt,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,p=c,f=p.tag;if(!(p.mode&1)&&(f===0||f===11||f===15)){var m=p.alternate;m?(p.updateQueue=m.updateQueue,p.memoizedState=m.memoizedState,p.lanes=m.lanes):(p.updateQueue=null,p.memoizedState=null)}var k=Am(o);if(k!==null){k.flags&=-257,Pm(k,o,c,i,e),k.mode&1&&Rm(i,d,e),e=k,u=d;var _=e.updateQueue;if(_===null){var N=new Set;N.add(u),e.updateQueue=N}else _.add(u);break e}else{if(!(e&1)){Rm(i,d,e),cp();break e}u=Error(ae(426))}}else if(yt&&c.mode&1){var A=Am(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),Pm(A,o,c,i,e),Wf(ro(u,c));break e}}i=u=ro(u,c),Ut!==4&&(Ut=2),cl===null?cl=[i]:cl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var b=vx(i,u,e);Cm(i,b);break e;case 1:c=u;var w=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(_s===null||!_s.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=_x(i,c,e);Cm(i,R);break e}}i=i.return}while(i!==null)}zx(n)}catch(K){e=K,At===n&&n!==null&&(At=n=n.return);continue}break}while(!0)}function Lx(){var t=Wc.current;return Wc.current=$c,t===null?$c:t}function cp(){(Ut===0||Ut===3||Ut===2)&&(Ut=4),Gt===null||!(ai&268435455)&&!(Eu&268435455)||ds(Gt,Zt)}function Kc(t,e){var n=Ze;Ze|=2;var r=Lx();(Gt!==t||Zt!==e)&&(Nr=null,ei(t,e));do try{JS();break}catch(s){Mx(t,s)}while(!0);if(Hf(),Ze=n,Wc.current=r,At!==null)throw Error(ae(261));return Gt=null,Zt=0,Ut}function JS(){for(;At!==null;)Fx(At)}function XS(){for(;At!==null&&!b2();)Fx(At)}function Fx(t){var e=Ux(t.alternate,t,kn);t.memoizedProps=t.pendingProps,e===null?zx(t):At=e,sp.current=null}function zx(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=HS(n,e),n!==null){n.flags&=32767,At=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ut=6,At=null;return}}else if(n=VS(n,e,kn),n!==null){At=n;return}if(e=e.sibling,e!==null){At=e;return}At=e=t}while(e!==null);Ut===0&&(Ut=5)}function Vs(t,e,n){var r=ot,s=$n.transition;try{$n.transition=null,ot=1,ZS(t,e,n,r)}finally{$n.transition=s,ot=r}return null}function ZS(t,e,n,r){do Gi();while(fs!==null);if(Ze&6)throw Error(ae(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ae(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(P2(t,i),t===Gt&&(At=Gt=null,Zt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Qa||(Qa=!0,$x(jc,function(){return Gi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=$n.transition,$n.transition=null;var o=ot;ot=1;var c=Ze;Ze|=4,sp.current=null,GS(t,n),Px(n,t),vS(Eh),Tc=!!bh,Eh=bh=null,t.current=n,qS(n),E2(),Ze=c,ot=o,$n.transition=i}else t.current=n;if(Qa&&(Qa=!1,fs=t,Hc=s),i=t.pendingLanes,i===0&&(_s=null),j2(n.stateNode),bn(t,Rt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Vc)throw Vc=!1,t=Vh,Vh=null,t;return Hc&1&&t.tag!==0&&Gi(),i=t.pendingLanes,i&1?t===Hh?ul++:(ul=0,Hh=t):ul=0,Ms(),null}function Gi(){if(fs!==null){var t=v1(Hc),e=$n.transition,n=ot;try{if($n.transition=null,ot=16>t?16:t,fs===null)var r=!1;else{if(t=fs,fs=null,Hc=0,Ze&6)throw Error(ae(331));var s=Ze;for(Ze|=4,_e=t.current;_e!==null;){var i=_e,o=i.child;if(_e.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(_e=d;_e!==null;){var p=_e;switch(p.tag){case 0:case 11:case 15:al(8,p,i)}var f=p.child;if(f!==null)f.return=p,_e=f;else for(;_e!==null;){p=_e;var m=p.sibling,k=p.return;if(Nx(p),p===d){_e=null;break}if(m!==null){m.return=k,_e=m;break}_e=k}}}var _=i.alternate;if(_!==null){var N=_.child;if(N!==null){_.child=null;do{var A=N.sibling;N.sibling=null,N=A}while(N!==null)}}_e=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,_e=o;else e:for(;_e!==null;){if(i=_e,i.flags&2048)switch(i.tag){case 0:case 11:case 15:al(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,_e=b;break e}_e=i.return}}var w=t.current;for(_e=w;_e!==null;){o=_e;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,_e=v;else e:for(o=w;_e!==null;){if(c=_e,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:bu(9,c)}}catch(K){Ct(c,c.return,K)}if(c===o){_e=null;break e}var R=c.sibling;if(R!==null){R.return=c.return,_e=R;break e}_e=c.return}}if(Ze=s,Ms(),wr&&typeof wr.onPostCommitFiberRoot=="function")try{wr.onPostCommitFiberRoot(gu,t)}catch{}r=!0}return r}finally{ot=n,$n.transition=e}}return!1}function Km(t,e,n){e=ro(n,e),e=vx(t,e,1),t=vs(t,e,1),e=hn(),t!==null&&(ea(t,1,e),bn(t,e))}function Ct(t,e,n){if(t.tag===3)Km(t,t,n);else for(;e!==null;){if(e.tag===3){Km(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(_s===null||!_s.has(r))){t=ro(n,t),t=_x(e,t,1),e=vs(e,t,1),t=hn(),e!==null&&(ea(e,1,t),bn(e,t));break}}e=e.return}}function eb(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=hn(),t.pingedLanes|=t.suspendedLanes&n,Gt===t&&(Zt&n)===n&&(Ut===4||Ut===3&&(Zt&130023424)===Zt&&500>Rt()-op?ei(t,0):ip|=n),bn(t,e)}function Bx(t,e){e===0&&(t.mode&1?(e=Ba,Ba<<=1,!(Ba&130023424)&&(Ba=4194304)):e=1);var n=hn();t=$r(t,e),t!==null&&(ea(t,e,n),bn(t,n))}function tb(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Bx(t,n)}function nb(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ae(314))}r!==null&&r.delete(e),Bx(t,n)}var Ux;Ux=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||wn.current)vn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return vn=!1,WS(t,e,n);vn=!!(t.flags&131072)}else vn=!1,yt&&e.flags&1048576&&H1(e,Mc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;fc(t,e),t=e.pendingProps;var s=Zi(e,ln.current);Ki(e,n),s=Zf(null,e,r,t,s,n);var i=ep();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Sn(r)?(i=!0,Oc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,qf(e),s.updater=Su,e.stateNode=s,s._reactInternals=e,Ph(e,r,t,n),e=Mh(null,e,r,!0,i,n)):(e.tag=0,yt&&i&&Uf(e),cn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(fc(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=sb(r),t=Xn(r,t),s){case 0:e=Dh(null,e,r,t,n);break e;case 1:e=Mm(null,e,r,t,n);break e;case 11:e=Om(null,e,r,t,n);break e;case 14:e=Dm(null,e,r,Xn(r.type,t),n);break e}throw Error(ae(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Xn(r,s),Dh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Xn(r,s),Mm(t,e,r,s,n);case 3:e:{if(Ex(e),t===null)throw Error(ae(387));r=e.pendingProps,i=e.memoizedState,s=i.element,J1(t,e),zc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ro(Error(ae(423)),e),e=Lm(t,e,r,n,s);break e}else if(r!==s){s=ro(Error(ae(424)),e),e=Lm(t,e,r,n,s);break e}else for(Tn=xs(e.stateNode.containerInfo.firstChild),Nn=e,yt=!0,er=null,n=Y1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(eo(),r===s){e=Wr(t,e,n);break e}cn(t,e,r,n)}e=e.child}return e;case 5:return X1(e),t===null&&Nh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Ch(r,s)?o=null:i!==null&&Ch(r,i)&&(e.flags|=32),bx(t,e),cn(t,e,o,n),e.child;case 6:return t===null&&Nh(e),null;case 13:return Cx(t,e,n);case 4:return Yf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=to(e,null,r,n):cn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Xn(r,s),Om(t,e,r,s,n);case 7:return cn(t,e,e.pendingProps,n),e.child;case 8:return cn(t,e,e.pendingProps.children,n),e.child;case 12:return cn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ht(Lc,r._currentValue),r._currentValue=o,i!==null)if(ar(i.value,o)){if(i.children===s.children&&!wn.current){e=Wr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){o=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Lr(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?u.next=u:(u.next=p.next,p.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Rh(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ae(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Rh(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}cn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ki(e,n),s=Wn(s),r=r(s),e.flags|=1,cn(t,e,r,n),e.child;case 14:return r=e.type,s=Xn(r,e.pendingProps),s=Xn(r.type,s),Dm(t,e,r,s,n);case 15:return wx(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Xn(r,s),fc(t,e),e.tag=1,Sn(r)?(t=!0,Oc(e)):t=!1,Ki(e,n),xx(e,r,s),Ph(e,r,s,n),Mh(null,e,r,!0,t,n);case 19:return Ix(t,e,n);case 22:return Sx(t,e,n)}throw Error(ae(156,e.tag))};function $x(t,e){return g1(t,e)}function rb(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bn(t,e,n,r){return new rb(t,e,n,r)}function up(t){return t=t.prototype,!(!t||!t.isReactComponent)}function sb(t){if(typeof t=="function")return up(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Tf)return 11;if(t===Nf)return 14}return 2}function Ss(t,e){var n=t.alternate;return n===null?(n=Bn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function mc(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")up(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ni:return ti(n.children,s,i,e);case kf:o=8,s|=8;break;case rh:return t=Bn(12,n,e,s|2),t.elementType=rh,t.lanes=i,t;case sh:return t=Bn(13,n,e,s),t.elementType=sh,t.lanes=i,t;case ih:return t=Bn(19,n,e,s),t.elementType=ih,t.lanes=i,t;case Xy:return Cu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Qy:o=10;break e;case Jy:o=9;break e;case Tf:o=11;break e;case Nf:o=14;break e;case as:o=16,r=null;break e}throw Error(ae(130,t==null?t:typeof t,""))}return e=Bn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ti(t,e,n,r){return t=Bn(7,t,r,e),t.lanes=n,t}function Cu(t,e,n,r){return t=Bn(22,t,r,e),t.elementType=Xy,t.lanes=n,t.stateNode={isHidden:!1},t}function Rd(t,e,n){return t=Bn(6,t,null,e),t.lanes=n,t}function Ad(t,e,n){return e=Bn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ib(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hd(0),this.expirationTimes=hd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function dp(t,e,n,r,s,i,o,c,u){return t=new ib(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Bn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},qf(i),t}function ob(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ti,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Wx(t){if(!t)return Ts;t=t._reactInternals;e:{if(mi(t)!==t||t.tag!==1)throw Error(ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Sn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ae(171))}if(t.tag===1){var n=t.type;if(Sn(n))return W1(t,n,e)}return e}function Vx(t,e,n,r,s,i,o,c,u){return t=dp(n,r,!0,t,s,i,o,c,u),t.context=Wx(null),n=t.current,r=hn(),s=ws(n),i=Lr(r,s),i.callback=e??null,vs(n,i,s),t.current.lanes=s,ea(t,s,r),bn(t,r),t}function Iu(t,e,n,r){var s=e.current,i=hn(),o=ws(s);return n=Wx(n),e.context===null?e.context=n:e.pendingContext=n,e=Lr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=vs(s,e,o),t!==null&&(or(t,s,o,i),uc(t,s,o)),o}function Gc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Gm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function hp(t,e){Gm(t,e),(t=t.alternate)&&Gm(t,e)}function lb(){return null}var Hx=typeof reportError=="function"?reportError:function(t){console.error(t)};function fp(t){this._internalRoot=t}ju.prototype.render=fp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ae(409));Iu(t,e,null,null)};ju.prototype.unmount=fp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ci(function(){Iu(null,t,null,null)}),e[Ur]=null}};function ju(t){this._internalRoot=t}ju.prototype.unstable_scheduleHydration=function(t){if(t){var e=S1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<us.length&&e!==0&&e<us[n].priority;n++);us.splice(n,0,t),n===0&&E1(t)}};function pp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ku(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function qm(){}function ab(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Gc(o);i.call(d)}}var o=Vx(e,r,t,0,null,!1,!1,"",qm);return t._reactRootContainer=o,t[Ur]=o.current,kl(t.nodeType===8?t.parentNode:t),ci(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=Gc(u);c.call(d)}}var u=dp(t,0,!1,null,null,!1,!1,"",qm);return t._reactRootContainer=u,t[Ur]=u.current,kl(t.nodeType===8?t.parentNode:t),ci(function(){Iu(e,u,n,r)}),u}function Tu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var c=s;s=function(){var u=Gc(o);c.call(u)}}Iu(e,o,t,s)}else o=ab(n,e,t,s,r);return Gc(o)}_1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=el(e.pendingLanes);n!==0&&(Pf(e,n|1),bn(e,Rt()),!(Ze&6)&&(so=Rt()+500,Ms()))}break;case 13:ci(function(){var r=$r(t,1);if(r!==null){var s=hn();or(r,t,1,s)}}),hp(t,1)}};Of=function(t){if(t.tag===13){var e=$r(t,134217728);if(e!==null){var n=hn();or(e,t,134217728,n)}hp(t,134217728)}};w1=function(t){if(t.tag===13){var e=ws(t),n=$r(t,e);if(n!==null){var r=hn();or(n,t,e,r)}hp(t,e)}};S1=function(){return ot};b1=function(t,e){var n=ot;try{return ot=t,e()}finally{ot=n}};gh=function(t,e,n){switch(e){case"input":if(ah(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=vu(r);if(!s)throw Error(ae(90));e1(r),ah(r,s)}}}break;case"textarea":n1(t,n);break;case"select":e=n.value,e!=null&&$i(t,!!n.multiple,e,!1)}};c1=lp;u1=ci;var cb={usingClientEntryPoint:!1,Events:[na,Oi,vu,l1,a1,lp]},Vo={findFiberByHostInstance:qs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ub={bundleType:Vo.bundleType,version:Vo.version,rendererPackageName:Vo.rendererPackageName,rendererConfig:Vo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=f1(t),t===null?null:t.stateNode},findFiberByHostInstance:Vo.findFiberByHostInstance||lb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ja=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ja.isDisabled&&Ja.supportsFiber)try{gu=Ja.inject(ub),wr=Ja}catch{}}An.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cb;An.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pp(e))throw Error(ae(200));return ob(t,e,null,n)};An.createRoot=function(t,e){if(!pp(t))throw Error(ae(299));var n=!1,r="",s=Hx;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=dp(t,1,!1,null,null,n,!1,r,s),t[Ur]=e.current,kl(t.nodeType===8?t.parentNode:t),new fp(e)};An.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ae(188)):(t=Object.keys(t).join(","),Error(ae(268,t)));return t=f1(e),t=t===null?null:t.stateNode,t};An.flushSync=function(t){return ci(t)};An.hydrate=function(t,e,n){if(!ku(e))throw Error(ae(200));return Tu(null,t,e,!0,n)};An.hydrateRoot=function(t,e,n){if(!pp(t))throw Error(ae(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Hx;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Vx(e,null,t,1,n??null,s,!1,i,o),t[Ur]=e.current,kl(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new ju(e)};An.render=function(t,e,n){if(!ku(e))throw Error(ae(200));return Tu(null,t,e,!1,n)};An.unmountComponentAtNode=function(t){if(!ku(t))throw Error(ae(40));return t._reactRootContainer?(ci(function(){Tu(null,null,t,!1,function(){t._reactRootContainer=null,t[Ur]=null})}),!0):!1};An.unstable_batchedUpdates=lp;An.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ku(n))throw Error(ae(200));if(t==null||t._reactInternals===void 0)throw Error(ae(38));return Tu(t,e,n,!1,r)};An.version="18.3.1-next-f1338f8080-20240426";function Kx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Kx)}catch(t){console.error(t)}}Kx(),Ky.exports=An;var db=Ky.exports,Ym=db;th.createRoot=Ym.createRoot,th.hydrateRoot=Ym.hydrateRoot;/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Qm="popstate";function hb(t={}){function e(r,s){let{pathname:i,search:o,hash:c}=r.location;return qh("",{pathname:i,search:o,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Ll(s)}return pb(e,n,null,t)}function wt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function cr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function fb(){return Math.random().toString(36).substring(2,10)}function Jm(t,e){return{usr:t.state,key:t.key,idx:e}}function qh(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?vo(e):e,state:n,key:e&&e.key||r||fb()}}function Ll({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function vo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function pb(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,c="POP",u=null,d=p();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function p(){return(o.state||{idx:null}).idx}function f(){c="POP";let A=p(),b=A==null?null:A-d;d=A,u&&u({action:c,location:N.location,delta:b})}function m(A,b){c="PUSH";let w=qh(N.location,A,b);d=p()+1;let v=Jm(w,d),R=N.createHref(w);try{o.pushState(v,"",R)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;s.location.assign(R)}i&&u&&u({action:c,location:N.location,delta:1})}function k(A,b){c="REPLACE";let w=qh(N.location,A,b);d=p();let v=Jm(w,d),R=N.createHref(w);o.replaceState(v,"",R),i&&u&&u({action:c,location:N.location,delta:0})}function _(A){return gb(A)}let N={get action(){return c},get location(){return t(s,o)},listen(A){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Qm,f),u=A,()=>{s.removeEventListener(Qm,f),u=null}},createHref(A){return e(s,A)},createURL:_,encodeLocation(A){let b=_(A);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:m,replace:k,go(A){return o.go(A)}};return N}function gb(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),wt(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Ll(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function Gx(t,e,n="/"){return mb(t,e,n,!1)}function mb(t,e,n,r){let s=typeof e=="string"?vo(e):e,i=Vr(s.pathname||"/",n);if(i==null)return null;let o=qx(t);yb(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=kb(i);c=Ib(o[u],d,r)}return c}function qx(t,e=[],n=[],r="",s=!1){let i=(o,c,u=s,d)=>{let p={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(r)&&u)return;wt(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length)}let f=Fr([r,p.relativePath]),m=n.concat(p);o.children&&o.children.length>0&&(wt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),qx(o.children,e,m,f,u)),!(o.path==null&&!o.index)&&e.push({path:f,score:Eb(f,o.index),routesMeta:m})};return t.forEach((o,c)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))i(o,c);else for(let d of Yx(o.path))i(o,c,!0,d)}),e}function Yx(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Yx(r.join("/")),c=[];return c.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function yb(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Cb(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var xb=/^:[\w-]+$/,vb=3,_b=2,wb=1,Sb=10,bb=-2,Xm=t=>t==="*";function Eb(t,e){let n=t.split("/"),r=n.length;return n.some(Xm)&&(r+=bb),e&&(r+=_b),n.filter(s=>!Xm(s)).reduce((s,i)=>s+(xb.test(i)?vb:i===""?wb:Sb),r)}function Cb(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Ib(t,e,n=!1){let{routesMeta:r}=t,s={},i="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,p=i==="/"?e:e.slice(i.length)||"/",f=qc({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},p),m=u.route;if(!f&&d&&n&&!r[r.length-1].route.index&&(f=qc({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},p)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:Fr([i,f.pathname]),pathnameBase:Pb(Fr([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=Fr([i,f.pathnameBase]))}return o}function qc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=jb(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((d,{paramName:p,isOptional:f},m)=>{if(p==="*"){let _=c[m]||"";o=i.slice(0,i.length-_.length).replace(/(.)\/+$/,"$1")}const k=c[m];return f&&!k?d[p]=void 0:d[p]=(k||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function jb(t,e=!1,n=!0){cr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function kb(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return cr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Vr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var Tb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Nb=t=>Tb.test(t);function Rb(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?vo(t):t,i;if(n)if(Nb(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),cr(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${n}`)}n.startsWith("/")?i=Zm(n.substring(1),"/"):i=Zm(n,e)}else i=e;return{pathname:i,search:Ob(r),hash:Db(s)}}function Zm(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Pd(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Ab(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Qx(t){let e=Ab(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Jx(t,e,n,r=!1){let s;typeof t=="string"?s=vo(t):(s={...t},wt(!s.pathname||!s.pathname.includes("?"),Pd("?","pathname","search",s)),wt(!s.pathname||!s.pathname.includes("#"),Pd("#","pathname","hash",s)),wt(!s.search||!s.search.includes("#"),Pd("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,c;if(o==null)c=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}c=f>=0?e[f]:"/"}let u=Rb(s,c),d=o&&o!=="/"&&o.endsWith("/"),p=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||p)&&(u.pathname+="/"),u}var Fr=t=>t.join("/").replace(/\/\/+/g,"/"),Pb=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Ob=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Db=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Mb(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function Lb(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Xx=["POST","PUT","PATCH","DELETE"];new Set(Xx);var Fb=["GET",...Xx];new Set(Fb);var _o=y.createContext(null);_o.displayName="DataRouter";var Nu=y.createContext(null);Nu.displayName="DataRouterState";y.createContext(!1);var Zx=y.createContext({isTransitioning:!1});Zx.displayName="ViewTransition";var zb=y.createContext(new Map);zb.displayName="Fetchers";var Bb=y.createContext(null);Bb.displayName="Await";var ur=y.createContext(null);ur.displayName="Navigation";var sa=y.createContext(null);sa.displayName="Location";var qr=y.createContext({outlet:null,matches:[],isDataRoute:!1});qr.displayName="Route";var gp=y.createContext(null);gp.displayName="RouteError";function Ub(t,{relative:e}={}){wt(ia(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=y.useContext(ur),{hash:s,pathname:i,search:o}=oa(t,{relative:e}),c=i;return n!=="/"&&(c=i==="/"?n:Fr([n,i])),r.createHref({pathname:c,search:o,hash:s})}function ia(){return y.useContext(sa)!=null}function Ls(){return wt(ia(),"useLocation() may be used only in the context of a <Router> component."),y.useContext(sa).location}var ev="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function tv(t){y.useContext(ur).static||y.useLayoutEffect(t)}function On(){let{isDataRoute:t}=y.useContext(qr);return t?eE():$b()}function $b(){wt(ia(),"useNavigate() may be used only in the context of a <Router> component.");let t=y.useContext(_o),{basename:e,navigator:n}=y.useContext(ur),{matches:r}=y.useContext(qr),{pathname:s}=Ls(),i=JSON.stringify(Qx(r)),o=y.useRef(!1);return tv(()=>{o.current=!0}),y.useCallback((u,d={})=>{if(cr(o.current,ev),!o.current)return;if(typeof u=="number"){n.go(u);return}let p=Jx(u,JSON.parse(i),s,d.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Fr([e,p.pathname])),(d.replace?n.replace:n.push)(p,d.state,d)},[e,n,i,s,t])}y.createContext(null);function oa(t,{relative:e}={}){let{matches:n}=y.useContext(qr),{pathname:r}=Ls(),s=JSON.stringify(Qx(n));return y.useMemo(()=>Jx(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function Wb(t,e){return nv(t,e)}function nv(t,e,n,r,s){var w;wt(ia(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=y.useContext(ur),{matches:o}=y.useContext(qr),c=o[o.length-1],u=c?c.params:{},d=c?c.pathname:"/",p=c?c.pathnameBase:"/",f=c&&c.route;{let v=f&&f.path||"";rv(d,!f||v.endsWith("*")||v.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${v}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${v}"> to <Route path="${v==="/"?"*":`${v}/*`}">.`)}let m=Ls(),k;if(e){let v=typeof e=="string"?vo(e):e;wt(p==="/"||((w=v.pathname)==null?void 0:w.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${v.pathname}" was given in the \`location\` prop.`),k=v}else k=m;let _=k.pathname||"/",N=_;if(p!=="/"){let v=p.replace(/^\//,"").split("/");N="/"+_.replace(/^\//,"").split("/").slice(v.length).join("/")}let A=Gx(t,{pathname:N});cr(f||A!=null,`No routes matched location "${k.pathname}${k.search}${k.hash}" `),cr(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${k.pathname}${k.search}${k.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=qb(A&&A.map(v=>Object.assign({},v,{params:Object.assign({},u,v.params),pathname:Fr([p,i.encodeLocation?i.encodeLocation(v.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?p:Fr([p,i.encodeLocation?i.encodeLocation(v.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:v.pathnameBase])})),o,n,r,s);return e&&b?y.createElement(sa.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...k},navigationType:"POP"}},b):b}function Vb(){let t=Zb(),e=Mb(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=y.createElement(y.Fragment,null,y.createElement("p",null," Hey developer "),y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",y.createElement("code",{style:i},"ErrorBoundary")," or"," ",y.createElement("code",{style:i},"errorElement")," prop on your route.")),y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},e),n?y.createElement("pre",{style:s},n):null,o)}var Hb=y.createElement(Vb,null),Kb=class extends y.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?y.createElement(qr.Provider,{value:this.props.routeContext},y.createElement(gp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Gb({routeContext:t,match:e,children:n}){let r=y.useContext(_o);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),y.createElement(qr.Provider,{value:t},n)}function qb(t,e=[],n=null,r=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=n==null?void 0:n.errors;if(o!=null){let p=i.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);wt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,p+1))}let c=!1,u=-1;if(n)for(let p=0;p<i.length;p++){let f=i[p];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=p),f.route.id){let{loaderData:m,errors:k}=n,_=f.route.loader&&!m.hasOwnProperty(f.route.id)&&(!k||k[f.route.id]===void 0);if(f.route.lazy||_){c=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}let d=n&&r?(p,f)=>{var m,k;r(p,{location:n.location,params:((k=(m=n.matches)==null?void 0:m[0])==null?void 0:k.params)??{},unstable_pattern:Lb(n.matches),errorInfo:f})}:void 0;return i.reduceRight((p,f,m)=>{let k,_=!1,N=null,A=null;n&&(k=o&&f.route.id?o[f.route.id]:void 0,N=f.route.errorElement||Hb,c&&(u<0&&m===0?(rv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,A=null):u===m&&(_=!0,A=f.route.hydrateFallbackElement||null)));let b=e.concat(i.slice(0,m+1)),w=()=>{let v;return k?v=N:_?v=A:f.route.Component?v=y.createElement(f.route.Component,null):f.route.element?v=f.route.element:v=p,y.createElement(Gb,{match:f,routeContext:{outlet:p,matches:b,isDataRoute:n!=null},children:v})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?y.createElement(Kb,{location:n.location,revalidation:n.revalidation,component:N,error:k,children:w(),routeContext:{outlet:null,matches:b,isDataRoute:!0},onError:d}):w()},null)}function mp(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Yb(t){let e=y.useContext(_o);return wt(e,mp(t)),e}function Qb(t){let e=y.useContext(Nu);return wt(e,mp(t)),e}function Jb(t){let e=y.useContext(qr);return wt(e,mp(t)),e}function yp(t){let e=Jb(t),n=e.matches[e.matches.length-1];return wt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function Xb(){return yp("useRouteId")}function Zb(){var r;let t=y.useContext(gp),e=Qb("useRouteError"),n=yp("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function eE(){let{router:t}=Yb("useNavigate"),e=yp("useNavigate"),n=y.useRef(!1);return tv(()=>{n.current=!0}),y.useCallback(async(s,i={})=>{cr(n.current,ev),n.current&&(typeof s=="number"?await t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var e0={};function rv(t,e,n){!e&&!e0[t]&&(e0[t]=!0,cr(!1,n))}y.memo(tE);function tE({routes:t,future:e,state:n,unstable_onError:r}){return nv(t,void 0,n,r,e)}function an(t){wt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function nE({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:i=!1,unstable_useTransitions:o}){wt(!ia(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),u=y.useMemo(()=>({basename:c,navigator:s,static:i,unstable_useTransitions:o,future:{}}),[c,s,i,o]);typeof n=="string"&&(n=vo(n));let{pathname:d="/",search:p="",hash:f="",state:m=null,key:k="default"}=n,_=y.useMemo(()=>{let N=Vr(d,c);return N==null?null:{location:{pathname:N,search:p,hash:f,state:m,key:k},navigationType:r}},[c,d,p,f,m,k,r]);return cr(_!=null,`<Router basename="${c}"> is not able to match the URL "${d}${p}${f}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:y.createElement(ur.Provider,{value:u},y.createElement(sa.Provider,{children:e,value:_}))}function rE({children:t,location:e}){return Wb(Yh(t),e)}function Yh(t,e=[]){let n=[];return y.Children.forEach(t,(r,s)=>{if(!y.isValidElement(r))return;let i=[...e,s];if(r.type===y.Fragment){n.push.apply(n,Yh(r.props.children,i));return}wt(r.type===an,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),wt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Yh(r.props.children,i)),n.push(o)}),n}var yc="get",xc="application/x-www-form-urlencoded";function Ru(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function sE(t){return Ru(t)&&t.tagName.toLowerCase()==="button"}function iE(t){return Ru(t)&&t.tagName.toLowerCase()==="form"}function oE(t){return Ru(t)&&t.tagName.toLowerCase()==="input"}function lE(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function aE(t,e){return t.button===0&&(!e||e==="_self")&&!lE(t)}var Xa=null;function cE(){if(Xa===null)try{new FormData(document.createElement("form"),0),Xa=!1}catch{Xa=!0}return Xa}var uE=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Od(t){return t!=null&&!uE.has(t)?(cr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${xc}"`),null):t}function dE(t,e){let n,r,s,i,o;if(iE(t)){let c=t.getAttribute("action");r=c?Vr(c,e):null,n=t.getAttribute("method")||yc,s=Od(t.getAttribute("enctype"))||xc,i=new FormData(t)}else if(sE(t)||oE(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||c.getAttribute("action");if(r=u?Vr(u,e):null,n=t.getAttribute("formmethod")||c.getAttribute("method")||yc,s=Od(t.getAttribute("formenctype"))||Od(c.getAttribute("enctype"))||xc,i=new FormData(c,t),!cE()){let{name:d,type:p,value:f}=t;if(p==="image"){let m=d?`${d}.`:"";i.append(`${m}x`,"0"),i.append(`${m}y`,"0")}else d&&i.append(d,f)}}else{if(Ru(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=yc,r=null,s=xc,o=t}return i&&s==="text/plain"&&(o=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function xp(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function hE(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Vr(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function fE(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function pE(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function gE(t,e,n){let r=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let o=await fE(i,n);return o.links?o.links():[]}return[]}));return vE(r.flat(1).filter(pE).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function t0(t,e,n,r,s,i){let o=(u,d)=>n[d]?u.route.id!==n[d].route.id:!0,c=(u,d)=>{var p;return n[d].pathname!==u.pathname||((p=n[d].route.path)==null?void 0:p.endsWith("*"))&&n[d].params["*"]!==u.params["*"]};return i==="assets"?e.filter((u,d)=>o(u,d)||c(u,d)):i==="data"?e.filter((u,d)=>{var f;let p=r.routes[u.route.id];if(!p||!p.hasLoader)return!1;if(o(u,d)||c(u,d))return!0;if(u.route.shouldRevalidate){let m=u.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function mE(t,e,{includeHydrateFallback:n}={}){return yE(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function yE(t){return[...new Set(t)]}function xE(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function vE(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let i=JSON.stringify(xE(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}function sv(){let t=y.useContext(_o);return xp(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function _E(){let t=y.useContext(Nu);return xp(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var vp=y.createContext(void 0);vp.displayName="FrameworkContext";function iv(){let t=y.useContext(vp);return xp(t,"You must render this element inside a <HydratedRouter> element"),t}function wE(t,e){let n=y.useContext(vp),[r,s]=y.useState(!1),[i,o]=y.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:d,onMouseLeave:p,onTouchStart:f}=e,m=y.useRef(null);y.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let N=b=>{b.forEach(w=>{o(w.isIntersecting)})},A=new IntersectionObserver(N,{threshold:.5});return m.current&&A.observe(m.current),()=>{A.disconnect()}}},[t]),y.useEffect(()=>{if(r){let N=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(N)}}},[r]);let k=()=>{s(!0)},_=()=>{s(!1),o(!1)};return n?t!=="intent"?[i,m,{}]:[i,m,{onFocus:Ho(c,k),onBlur:Ho(u,_),onMouseEnter:Ho(d,k),onMouseLeave:Ho(p,_),onTouchStart:Ho(f,k)}]:[!1,m,{}]}function Ho(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function SE({page:t,...e}){let{router:n}=sv(),r=y.useMemo(()=>Gx(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?y.createElement(EE,{page:t,matches:r,...e}):null}function bE(t){let{manifest:e,routeModules:n}=iv(),[r,s]=y.useState([]);return y.useEffect(()=>{let i=!1;return gE(t,e,n).then(o=>{i||s(o)}),()=>{i=!0}},[t,e,n]),r}function EE({page:t,matches:e,...n}){let r=Ls(),{manifest:s,routeModules:i}=iv(),{basename:o}=sv(),{loaderData:c,matches:u}=_E(),d=y.useMemo(()=>t0(t,e,u,s,r,"data"),[t,e,u,s,r]),p=y.useMemo(()=>t0(t,e,u,s,r,"assets"),[t,e,u,s,r]),f=y.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let _=new Set,N=!1;if(e.forEach(b=>{var v;let w=s.routes[b.route.id];!w||!w.hasLoader||(!d.some(R=>R.route.id===b.route.id)&&b.route.id in c&&((v=i[b.route.id])!=null&&v.shouldRevalidate)||w.hasClientLoader?N=!0:_.add(b.route.id))}),_.size===0)return[];let A=hE(t,o,"data");return N&&_.size>0&&A.searchParams.set("_routes",e.filter(b=>_.has(b.route.id)).map(b=>b.route.id).join(",")),[A.pathname+A.search]},[o,c,r,s,d,e,t,i]),m=y.useMemo(()=>mE(p,s),[p,s]),k=bE(p);return y.createElement(y.Fragment,null,f.map(_=>y.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...n})),m.map(_=>y.createElement("link",{key:_,rel:"modulepreload",href:_,...n})),k.map(({key:_,link:N})=>y.createElement("link",{key:_,nonce:n.nonce,...N})))}function CE(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var ov=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ov&&(window.__reactRouterVersion="7.10.1")}catch{}function IE({basename:t,children:e,unstable_useTransitions:n,window:r}){let s=y.useRef();s.current==null&&(s.current=hb({window:r,v5Compat:!0}));let i=s.current,[o,c]=y.useState({action:i.action,location:i.location}),u=y.useCallback(d=>{n===!1?c(d):y.startTransition(()=>c(d))},[n]);return y.useLayoutEffect(()=>i.listen(u),[i,u]),y.createElement(nE,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:i,unstable_useTransitions:n===!0})}var lv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xe=y.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:o,state:c,target:u,to:d,preventScrollReset:p,viewTransition:f,...m},k){let{basename:_,unstable_useTransitions:N}=y.useContext(ur),A=typeof d=="string"&&lv.test(d),b,w=!1;if(typeof d=="string"&&A&&(b=d,ov))try{let j=new URL(window.location.href),T=d.startsWith("//")?new URL(j.protocol+d):new URL(d),D=Vr(T.pathname,_);T.origin===j.origin&&D!=null?d=D+T.search+T.hash:w=!0}catch{cr(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=Ub(d,{relative:s}),[R,K,ee]=wE(r,m),E=NE(d,{replace:o,state:c,target:u,preventScrollReset:p,relative:s,viewTransition:f,unstable_useTransitions:N});function x(j){e&&e(j),j.defaultPrevented||E(j)}let C=y.createElement("a",{...m,...ee,href:b||v,onClick:w||i?e:x,ref:CE(k,K),target:u,"data-discover":!A&&n==="render"?"true":void 0});return R&&!A?y.createElement(y.Fragment,null,C,y.createElement(SE,{page:v})):C});xe.displayName="Link";var jE=y.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:o,viewTransition:c,children:u,...d},p){let f=oa(o,{relative:d.relative}),m=Ls(),k=y.useContext(Nu),{navigator:_,basename:N}=y.useContext(ur),A=k!=null&&DE(f)&&c===!0,b=_.encodeLocation?_.encodeLocation(f).pathname:f.pathname,w=m.pathname,v=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;n||(w=w.toLowerCase(),v=v?v.toLowerCase():null,b=b.toLowerCase()),v&&N&&(v=Vr(v,N)||v);const R=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let K=w===b||!s&&w.startsWith(b)&&w.charAt(R)==="/",ee=v!=null&&(v===b||!s&&v.startsWith(b)&&v.charAt(b.length)==="/"),E={isActive:K,isPending:ee,isTransitioning:A},x=K?e:void 0,C;typeof r=="function"?C=r(E):C=[r,K?"active":null,ee?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let j=typeof i=="function"?i(E):i;return y.createElement(xe,{...d,"aria-current":x,className:C,ref:p,style:j,to:o,viewTransition:c},typeof u=="function"?u(E):u)});jE.displayName="NavLink";var kE=y.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:i,method:o=yc,action:c,onSubmit:u,relative:d,preventScrollReset:p,viewTransition:f,...m},k)=>{let{unstable_useTransitions:_}=y.useContext(ur),N=PE(),A=OE(c,{relative:d}),b=o.toLowerCase()==="get"?"get":"post",w=typeof c=="string"&&lv.test(c),v=R=>{if(u&&u(R),R.defaultPrevented)return;R.preventDefault();let K=R.nativeEvent.submitter,ee=(K==null?void 0:K.getAttribute("formmethod"))||o,E=()=>N(K||R.currentTarget,{fetcherKey:e,method:ee,navigate:n,replace:s,state:i,relative:d,preventScrollReset:p,viewTransition:f});_&&n!==!1?y.startTransition(()=>E()):E()};return y.createElement("form",{ref:k,method:b,action:A,onSubmit:r?u:v,...m,"data-discover":!w&&t==="render"?"true":void 0})});kE.displayName="Form";function TE(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function av(t){let e=y.useContext(_o);return wt(e,TE(t)),e}function NE(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:o,unstable_useTransitions:c}={}){let u=On(),d=Ls(),p=oa(t,{relative:i});return y.useCallback(f=>{if(aE(f,e)){f.preventDefault();let m=n!==void 0?n:Ll(d)===Ll(p),k=()=>u(t,{replace:m,state:r,preventScrollReset:s,relative:i,viewTransition:o});c?y.startTransition(()=>k()):k()}},[d,u,p,n,r,e,t,s,i,o,c])}var RE=0,AE=()=>`__${String(++RE)}__`;function PE(){let{router:t}=av("useSubmit"),{basename:e}=y.useContext(ur),n=Xb(),r=t.fetch,s=t.navigate;return y.useCallback(async(i,o={})=>{let{action:c,method:u,encType:d,formData:p,body:f}=dE(i,e);if(o.navigate===!1){let m=o.fetcherKey||AE();await r(m,n,o.action||c,{preventScrollReset:o.preventScrollReset,formData:p,body:f,formMethod:o.method||u,formEncType:o.encType||d,flushSync:o.flushSync})}else await s(o.action||c,{preventScrollReset:o.preventScrollReset,formData:p,body:f,formMethod:o.method||u,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,s,e,n])}function OE(t,{relative:e}={}){let{basename:n}=y.useContext(ur),r=y.useContext(qr);wt(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...oa(t||".",{relative:e})},o=Ls();if(t==null){i.search=o.search;let c=new URLSearchParams(i.search),u=c.getAll("index");if(u.some(p=>p==="")){c.delete("index"),u.filter(f=>f).forEach(f=>c.append("index",f));let p=c.toString();i.search=p?`?${p}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:Fr([n,i.pathname])),Ll(i)}function DE(t,{relative:e}={}){let n=y.useContext(Zx);wt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=av("useViewTransitionState"),s=oa(t,{relative:e});if(!n.isTransitioning)return!1;let i=Vr(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Vr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return qc(s.pathname,o)!=null||qc(s.pathname,i)!=null}function cv(t,e){return function(){return t.apply(e,arguments)}}const{toString:ME}=Object.prototype,{getPrototypeOf:_p}=Object,{iterator:Au,toStringTag:uv}=Symbol,Pu=(t=>e=>{const n=ME.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),dr=t=>(t=t.toLowerCase(),e=>Pu(e)===t),Ou=t=>e=>typeof e===t,{isArray:wo}=Array,io=Ou("undefined");function la(t){return t!==null&&!io(t)&&t.constructor!==null&&!io(t.constructor)&&En(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const dv=dr("ArrayBuffer");function LE(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&dv(t.buffer),e}const FE=Ou("string"),En=Ou("function"),hv=Ou("number"),aa=t=>t!==null&&typeof t=="object",zE=t=>t===!0||t===!1,vc=t=>{if(Pu(t)!=="object")return!1;const e=_p(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(uv in t)&&!(Au in t)},BE=t=>{if(!aa(t)||la(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},UE=dr("Date"),$E=dr("File"),WE=dr("Blob"),VE=dr("FileList"),HE=t=>aa(t)&&En(t.pipe),KE=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||En(t.append)&&((e=Pu(t))==="formdata"||e==="object"&&En(t.toString)&&t.toString()==="[object FormData]"))},GE=dr("URLSearchParams"),[qE,YE,QE,JE]=["ReadableStream","Request","Response","Headers"].map(dr),XE=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ca(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),wo(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{if(la(t))return;const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let c;for(r=0;r<o;r++)c=i[r],e.call(null,t[c],c,t)}}function fv(t,e){if(la(t))return null;e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const Js=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,pv=t=>!io(t)&&t!==Js;function Qh(){const{caseless:t,skipUndefined:e}=pv(this)&&this||{},n={},r=(s,i)=>{const o=t&&fv(n,i)||i;vc(n[o])&&vc(s)?n[o]=Qh(n[o],s):vc(s)?n[o]=Qh({},s):wo(s)?n[o]=s.slice():(!e||!io(s))&&(n[o]=s)};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&ca(arguments[s],r);return n}const ZE=(t,e,n,{allOwnKeys:r}={})=>(ca(e,(s,i)=>{n&&En(s)?t[i]=cv(s,n):t[i]=s},{allOwnKeys:r}),t),eC=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),tC=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},nC=(t,e,n,r)=>{let s,i,o;const c={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!r||r(o,t,e))&&!c[o]&&(e[o]=t[o],c[o]=!0);t=n!==!1&&_p(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},rC=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},sC=t=>{if(!t)return null;if(wo(t))return t;let e=t.length;if(!hv(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},iC=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&_p(Uint8Array)),oC=(t,e)=>{const r=(t&&t[Au]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},lC=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},aC=dr("HTMLFormElement"),cC=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),n0=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),uC=dr("RegExp"),gv=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};ca(n,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(r[i]=o||s)}),Object.defineProperties(t,r)},dC=t=>{gv(t,(e,n)=>{if(En(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(En(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},hC=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return wo(t)?r(t):r(String(t).split(e)),n},fC=()=>{},pC=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function gC(t){return!!(t&&En(t.append)&&t[uv]==="FormData"&&t[Au])}const mC=t=>{const e=new Array(10),n=(r,s)=>{if(aa(r)){if(e.indexOf(r)>=0)return;if(la(r))return r;if(!("toJSON"in r)){e[s]=r;const i=wo(r)?[]:{};return ca(r,(o,c)=>{const u=n(o,s+1);!io(u)&&(i[c]=u)}),e[s]=void 0,i}}return r};return n(t,0)},yC=dr("AsyncFunction"),xC=t=>t&&(aa(t)||En(t))&&En(t.then)&&En(t.catch),mv=((t,e)=>t?setImmediate:e?((n,r)=>(Js.addEventListener("message",({source:s,data:i})=>{s===Js&&i===n&&r.length&&r.shift()()},!1),s=>{r.push(s),Js.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",En(Js.postMessage)),vC=typeof queueMicrotask<"u"?queueMicrotask.bind(Js):typeof process<"u"&&process.nextTick||mv,_C=t=>t!=null&&En(t[Au]),V={isArray:wo,isArrayBuffer:dv,isBuffer:la,isFormData:KE,isArrayBufferView:LE,isString:FE,isNumber:hv,isBoolean:zE,isObject:aa,isPlainObject:vc,isEmptyObject:BE,isReadableStream:qE,isRequest:YE,isResponse:QE,isHeaders:JE,isUndefined:io,isDate:UE,isFile:$E,isBlob:WE,isRegExp:uC,isFunction:En,isStream:HE,isURLSearchParams:GE,isTypedArray:iC,isFileList:VE,forEach:ca,merge:Qh,extend:ZE,trim:XE,stripBOM:eC,inherits:tC,toFlatObject:nC,kindOf:Pu,kindOfTest:dr,endsWith:rC,toArray:sC,forEachEntry:oC,matchAll:lC,isHTMLForm:aC,hasOwnProperty:n0,hasOwnProp:n0,reduceDescriptors:gv,freezeMethods:dC,toObjectSet:hC,toCamelCase:cC,noop:fC,toFiniteNumber:pC,findKey:fv,global:Js,isContextDefined:pv,isSpecCompliantForm:gC,toJSONObject:mC,isAsyncFn:yC,isThenable:xC,setImmediate:mv,asap:vC,isIterable:_C};function Le(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}V.inherits(Le,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:V.toJSONObject(this.config),code:this.code,status:this.status}}});const yv=Le.prototype,xv={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{xv[t]={value:t}});Object.defineProperties(Le,xv);Object.defineProperty(yv,"isAxiosError",{value:!0});Le.from=(t,e,n,r,s,i)=>{const o=Object.create(yv);V.toFlatObject(t,o,function(p){return p!==Error.prototype},d=>d!=="isAxiosError");const c=t&&t.message?t.message:"Error",u=e==null&&t?t.code:e;return Le.call(o,c,u,n,r,s),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",i&&Object.assign(o,i),o};const wC=null;function Jh(t){return V.isPlainObject(t)||V.isArray(t)}function vv(t){return V.endsWith(t,"[]")?t.slice(0,-2):t}function r0(t,e,n){return t?t.concat(e).map(function(s,i){return s=vv(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function SC(t){return V.isArray(t)&&!t.some(Jh)}const bC=V.toFlatObject(V,{},null,function(e){return/^is[A-Z]/.test(e)});function Du(t,e,n){if(!V.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=V.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(N,A){return!V.isUndefined(A[N])});const r=n.metaTokens,s=n.visitor||p,i=n.dots,o=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&V.isSpecCompliantForm(e);if(!V.isFunction(s))throw new TypeError("visitor must be a function");function d(_){if(_===null)return"";if(V.isDate(_))return _.toISOString();if(V.isBoolean(_))return _.toString();if(!u&&V.isBlob(_))throw new Le("Blob is not supported. Use a Buffer instead.");return V.isArrayBuffer(_)||V.isTypedArray(_)?u&&typeof Blob=="function"?new Blob([_]):Buffer.from(_):_}function p(_,N,A){let b=_;if(_&&!A&&typeof _=="object"){if(V.endsWith(N,"{}"))N=r?N:N.slice(0,-2),_=JSON.stringify(_);else if(V.isArray(_)&&SC(_)||(V.isFileList(_)||V.endsWith(N,"[]"))&&(b=V.toArray(_)))return N=vv(N),b.forEach(function(v,R){!(V.isUndefined(v)||v===null)&&e.append(o===!0?r0([N],R,i):o===null?N:N+"[]",d(v))}),!1}return Jh(_)?!0:(e.append(r0(A,N,i),d(_)),!1)}const f=[],m=Object.assign(bC,{defaultVisitor:p,convertValue:d,isVisitable:Jh});function k(_,N){if(!V.isUndefined(_)){if(f.indexOf(_)!==-1)throw Error("Circular reference detected in "+N.join("."));f.push(_),V.forEach(_,function(b,w){(!(V.isUndefined(b)||b===null)&&s.call(e,b,V.isString(w)?w.trim():w,N,m))===!0&&k(b,N?N.concat(w):[w])}),f.pop()}}if(!V.isObject(t))throw new TypeError("data must be an object");return k(t),e}function s0(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function wp(t,e){this._pairs=[],t&&Du(t,this,e)}const _v=wp.prototype;_v.append=function(e,n){this._pairs.push([e,n])};_v.toString=function(e){const n=e?function(r){return e.call(this,r,s0)}:s0;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function EC(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function wv(t,e,n){if(!e)return t;const r=n&&n.encode||EC;V.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(s?i=s(e,n):i=V.isURLSearchParams(e)?e.toString():new wp(e,n).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class i0{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){V.forEach(this.handlers,function(r){r!==null&&e(r)})}}const Sv={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},CC=typeof URLSearchParams<"u"?URLSearchParams:wp,IC=typeof FormData<"u"?FormData:null,jC=typeof Blob<"u"?Blob:null,kC={isBrowser:!0,classes:{URLSearchParams:CC,FormData:IC,Blob:jC},protocols:["http","https","file","blob","url","data"]},Sp=typeof window<"u"&&typeof document<"u",Xh=typeof navigator=="object"&&navigator||void 0,TC=Sp&&(!Xh||["ReactNative","NativeScript","NS"].indexOf(Xh.product)<0),NC=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",RC=Sp&&window.location.href||"http://localhost",AC=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Sp,hasStandardBrowserEnv:TC,hasStandardBrowserWebWorkerEnv:NC,navigator:Xh,origin:RC},Symbol.toStringTag,{value:"Module"})),on={...AC,...kC};function PC(t,e){return Du(t,new on.classes.URLSearchParams,{visitor:function(n,r,s,i){return on.isNode&&V.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function OC(t){return V.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function DC(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function bv(t){function e(n,r,s,i){let o=n[i++];if(o==="__proto__")return!0;const c=Number.isFinite(+o),u=i>=n.length;return o=!o&&V.isArray(s)?s.length:o,u?(V.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!c):((!s[o]||!V.isObject(s[o]))&&(s[o]=[]),e(n,r,s[o],i)&&V.isArray(s[o])&&(s[o]=DC(s[o])),!c)}if(V.isFormData(t)&&V.isFunction(t.entries)){const n={};return V.forEachEntry(t,(r,s)=>{e(OC(r),s,n,0)}),n}return null}function MC(t,e,n){if(V.isString(t))try{return(e||JSON.parse)(t),V.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const ua={transitional:Sv,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=V.isObject(e);if(i&&V.isHTMLForm(e)&&(e=new FormData(e)),V.isFormData(e))return s?JSON.stringify(bv(e)):e;if(V.isArrayBuffer(e)||V.isBuffer(e)||V.isStream(e)||V.isFile(e)||V.isBlob(e)||V.isReadableStream(e))return e;if(V.isArrayBufferView(e))return e.buffer;if(V.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let c;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return PC(e,this.formSerializer).toString();if((c=V.isFileList(e))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Du(c?{"files[]":e}:e,u&&new u,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),MC(e)):e}],transformResponse:[function(e){const n=this.transitional||ua.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(V.isResponse(e)||V.isReadableStream(e))return e;if(e&&V.isString(e)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e,this.parseReviver)}catch(c){if(o)throw c.name==="SyntaxError"?Le.from(c,Le.ERR_BAD_RESPONSE,this,null,this.response):c}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:on.classes.FormData,Blob:on.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};V.forEach(["delete","get","head","post","put","patch"],t=>{ua.headers[t]={}});const LC=V.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),FC=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||e[n]&&LC[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},o0=Symbol("internals");function Ko(t){return t&&String(t).trim().toLowerCase()}function _c(t){return t===!1||t==null?t:V.isArray(t)?t.map(_c):String(t)}function zC(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const BC=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Dd(t,e,n,r,s){if(V.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!V.isString(e)){if(V.isString(r))return e.indexOf(r)!==-1;if(V.isRegExp(r))return r.test(e)}}function UC(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function $C(t,e){const n=V.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,o){return this[r].call(this,e,s,i,o)},configurable:!0})})}let Cn=class{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(c,u,d){const p=Ko(u);if(!p)throw new Error("header name must be a non-empty string");const f=V.findKey(s,p);(!f||s[f]===void 0||d===!0||d===void 0&&s[f]!==!1)&&(s[f||u]=_c(c))}const o=(c,u)=>V.forEach(c,(d,p)=>i(d,p,u));if(V.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(V.isString(e)&&(e=e.trim())&&!BC(e))o(FC(e),n);else if(V.isObject(e)&&V.isIterable(e)){let c={},u,d;for(const p of e){if(!V.isArray(p))throw TypeError("Object iterator must return a key-value pair");c[d=p[0]]=(u=c[d])?V.isArray(u)?[...u,p[1]]:[u,p[1]]:p[1]}o(c,n)}else e!=null&&i(n,e,r);return this}get(e,n){if(e=Ko(e),e){const r=V.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return zC(s);if(V.isFunction(n))return n.call(this,s,r);if(V.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Ko(e),e){const r=V.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Dd(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(o){if(o=Ko(o),o){const c=V.findKey(r,o);c&&(!n||Dd(r,r[c],c,n))&&(delete r[c],s=!0)}}return V.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||Dd(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return V.forEach(this,(s,i)=>{const o=V.findKey(r,i);if(o){n[o]=_c(s),delete n[i];return}const c=e?UC(i):String(i).trim();c!==i&&delete n[i],n[c]=_c(s),r[c]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return V.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&V.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[o0]=this[o0]={accessors:{}}).accessors,s=this.prototype;function i(o){const c=Ko(o);r[c]||($C(s,o),r[c]=!0)}return V.isArray(e)?e.forEach(i):i(e),this}};Cn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);V.reduceDescriptors(Cn.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});V.freezeMethods(Cn);function Md(t,e){const n=this||ua,r=e||n,s=Cn.from(r.headers);let i=r.data;return V.forEach(t,function(c){i=c.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function Ev(t){return!!(t&&t.__CANCEL__)}function So(t,e,n){Le.call(this,t??"canceled",Le.ERR_CANCELED,e,n),this.name="CanceledError"}V.inherits(So,Le,{__CANCEL__:!0});function Cv(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Le("Request failed with status code "+n.status,[Le.ERR_BAD_REQUEST,Le.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function WC(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function VC(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(u){const d=Date.now(),p=r[i];o||(o=d),n[s]=u,r[s]=d;let f=i,m=0;for(;f!==s;)m+=n[f++],f=f%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),d-o<e)return;const k=p&&d-p;return k?Math.round(m*1e3/k):void 0}}function HC(t,e){let n=0,r=1e3/e,s,i;const o=(d,p=Date.now())=>{n=p,s=null,i&&(clearTimeout(i),i=null),t(...d)};return[(...d)=>{const p=Date.now(),f=p-n;f>=r?o(d,p):(s=d,i||(i=setTimeout(()=>{i=null,o(s)},r-f)))},()=>s&&o(s)]}const Yc=(t,e,n=3)=>{let r=0;const s=VC(50,250);return HC(i=>{const o=i.loaded,c=i.lengthComputable?i.total:void 0,u=o-r,d=s(u),p=o<=c;r=o;const f={loaded:o,total:c,progress:c?o/c:void 0,bytes:u,rate:d||void 0,estimated:d&&c&&p?(c-o)/d:void 0,event:i,lengthComputable:c!=null,[e?"download":"upload"]:!0};t(f)},n)},l0=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},a0=t=>(...e)=>V.asap(()=>t(...e)),KC=on.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,on.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(on.origin),on.navigator&&/(msie|trident)/i.test(on.navigator.userAgent)):()=>!0,GC=on.hasStandardBrowserEnv?{write(t,e,n,r,s,i,o){if(typeof document>"u")return;const c=[`${t}=${encodeURIComponent(e)}`];V.isNumber(n)&&c.push(`expires=${new Date(n).toUTCString()}`),V.isString(r)&&c.push(`path=${r}`),V.isString(s)&&c.push(`domain=${s}`),i===!0&&c.push("secure"),V.isString(o)&&c.push(`SameSite=${o}`),document.cookie=c.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function qC(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function YC(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Iv(t,e,n){let r=!qC(e);return t&&(r||n==!1)?YC(t,e):e}const c0=t=>t instanceof Cn?{...t}:t;function ui(t,e){e=e||{};const n={};function r(d,p,f,m){return V.isPlainObject(d)&&V.isPlainObject(p)?V.merge.call({caseless:m},d,p):V.isPlainObject(p)?V.merge({},p):V.isArray(p)?p.slice():p}function s(d,p,f,m){if(V.isUndefined(p)){if(!V.isUndefined(d))return r(void 0,d,f,m)}else return r(d,p,f,m)}function i(d,p){if(!V.isUndefined(p))return r(void 0,p)}function o(d,p){if(V.isUndefined(p)){if(!V.isUndefined(d))return r(void 0,d)}else return r(void 0,p)}function c(d,p,f){if(f in e)return r(d,p);if(f in t)return r(void 0,d)}const u={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c,headers:(d,p,f)=>s(c0(d),c0(p),f,!0)};return V.forEach(Object.keys({...t,...e}),function(p){const f=u[p]||s,m=f(t[p],e[p],p);V.isUndefined(m)&&f!==c||(n[p]=m)}),n}const jv=t=>{const e=ui({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:c}=e;if(e.headers=o=Cn.from(o),e.url=wv(Iv(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),c&&o.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),V.isFormData(n)){if(on.hasStandardBrowserEnv||on.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(V.isFunction(n.getHeaders)){const u=n.getHeaders(),d=["content-type","content-length"];Object.entries(u).forEach(([p,f])=>{d.includes(p.toLowerCase())&&o.set(p,f)})}}if(on.hasStandardBrowserEnv&&(r&&V.isFunction(r)&&(r=r(e)),r||r!==!1&&KC(e.url))){const u=s&&i&&GC.read(i);u&&o.set(s,u)}return e},QC=typeof XMLHttpRequest<"u",JC=QC&&function(t){return new Promise(function(n,r){const s=jv(t);let i=s.data;const o=Cn.from(s.headers).normalize();let{responseType:c,onUploadProgress:u,onDownloadProgress:d}=s,p,f,m,k,_;function N(){k&&k(),_&&_(),s.cancelToken&&s.cancelToken.unsubscribe(p),s.signal&&s.signal.removeEventListener("abort",p)}let A=new XMLHttpRequest;A.open(s.method.toUpperCase(),s.url,!0),A.timeout=s.timeout;function b(){if(!A)return;const v=Cn.from("getAllResponseHeaders"in A&&A.getAllResponseHeaders()),K={data:!c||c==="text"||c==="json"?A.responseText:A.response,status:A.status,statusText:A.statusText,headers:v,config:t,request:A};Cv(function(E){n(E),N()},function(E){r(E),N()},K),A=null}"onloadend"in A?A.onloadend=b:A.onreadystatechange=function(){!A||A.readyState!==4||A.status===0&&!(A.responseURL&&A.responseURL.indexOf("file:")===0)||setTimeout(b)},A.onabort=function(){A&&(r(new Le("Request aborted",Le.ECONNABORTED,t,A)),A=null)},A.onerror=function(R){const K=R&&R.message?R.message:"Network Error",ee=new Le(K,Le.ERR_NETWORK,t,A);ee.event=R||null,r(ee),A=null},A.ontimeout=function(){let R=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const K=s.transitional||Sv;s.timeoutErrorMessage&&(R=s.timeoutErrorMessage),r(new Le(R,K.clarifyTimeoutError?Le.ETIMEDOUT:Le.ECONNABORTED,t,A)),A=null},i===void 0&&o.setContentType(null),"setRequestHeader"in A&&V.forEach(o.toJSON(),function(R,K){A.setRequestHeader(K,R)}),V.isUndefined(s.withCredentials)||(A.withCredentials=!!s.withCredentials),c&&c!=="json"&&(A.responseType=s.responseType),d&&([m,_]=Yc(d,!0),A.addEventListener("progress",m)),u&&A.upload&&([f,k]=Yc(u),A.upload.addEventListener("progress",f),A.upload.addEventListener("loadend",k)),(s.cancelToken||s.signal)&&(p=v=>{A&&(r(!v||v.type?new So(null,t,A):v),A.abort(),A=null)},s.cancelToken&&s.cancelToken.subscribe(p),s.signal&&(s.signal.aborted?p():s.signal.addEventListener("abort",p)));const w=WC(s.url);if(w&&on.protocols.indexOf(w)===-1){r(new Le("Unsupported protocol "+w+":",Le.ERR_BAD_REQUEST,t));return}A.send(i||null)})},XC=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,s;const i=function(d){if(!s){s=!0,c();const p=d instanceof Error?d:this.reason;r.abort(p instanceof Le?p:new So(p instanceof Error?p.message:p))}};let o=e&&setTimeout(()=>{o=null,i(new Le(`timeout ${e} of ms exceeded`,Le.ETIMEDOUT))},e);const c=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),t=null)};t.forEach(d=>d.addEventListener("abort",i));const{signal:u}=r;return u.unsubscribe=()=>V.asap(c),u}},ZC=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,s;for(;r<n;)s=r+e,yield t.slice(r,s),r=s},eI=async function*(t,e){for await(const n of tI(t))yield*ZC(n,e)},tI=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},u0=(t,e,n,r)=>{const s=eI(t,e);let i=0,o,c=u=>{o||(o=!0,r&&r(u))};return new ReadableStream({async pull(u){try{const{done:d,value:p}=await s.next();if(d){c(),u.close();return}let f=p.byteLength;if(n){let m=i+=f;n(m)}u.enqueue(new Uint8Array(p))}catch(d){throw c(d),d}},cancel(u){return c(u),s.return()}},{highWaterMark:2})},d0=64*1024,{isFunction:Za}=V,nI=(({Request:t,Response:e})=>({Request:t,Response:e}))(V.global),{ReadableStream:h0,TextEncoder:f0}=V.global,p0=(t,...e)=>{try{return!!t(...e)}catch{return!1}},rI=t=>{t=V.merge.call({skipUndefined:!0},nI,t);const{fetch:e,Request:n,Response:r}=t,s=e?Za(e):typeof fetch=="function",i=Za(n),o=Za(r);if(!s)return!1;const c=s&&Za(h0),u=s&&(typeof f0=="function"?(_=>N=>_.encode(N))(new f0):async _=>new Uint8Array(await new n(_).arrayBuffer())),d=i&&c&&p0(()=>{let _=!1;const N=new n(on.origin,{body:new h0,method:"POST",get duplex(){return _=!0,"half"}}).headers.has("Content-Type");return _&&!N}),p=o&&c&&p0(()=>V.isReadableStream(new r("").body)),f={stream:p&&(_=>_.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(_=>{!f[_]&&(f[_]=(N,A)=>{let b=N&&N[_];if(b)return b.call(N);throw new Le(`Response type '${_}' is not supported`,Le.ERR_NOT_SUPPORT,A)})});const m=async _=>{if(_==null)return 0;if(V.isBlob(_))return _.size;if(V.isSpecCompliantForm(_))return(await new n(on.origin,{method:"POST",body:_}).arrayBuffer()).byteLength;if(V.isArrayBufferView(_)||V.isArrayBuffer(_))return _.byteLength;if(V.isURLSearchParams(_)&&(_=_+""),V.isString(_))return(await u(_)).byteLength},k=async(_,N)=>{const A=V.toFiniteNumber(_.getContentLength());return A??m(N)};return async _=>{let{url:N,method:A,data:b,signal:w,cancelToken:v,timeout:R,onDownloadProgress:K,onUploadProgress:ee,responseType:E,headers:x,withCredentials:C="same-origin",fetchOptions:j}=jv(_),T=e||fetch;E=E?(E+"").toLowerCase():"text";let D=XC([w,v&&v.toAbortSignal()],R),I=null;const J=D&&D.unsubscribe&&(()=>{D.unsubscribe()});let ye;try{if(ee&&d&&A!=="get"&&A!=="head"&&(ye=await k(x,b))!==0){let oe=new n(N,{method:"POST",body:b,duplex:"half"}),Se;if(V.isFormData(b)&&(Se=oe.headers.get("content-type"))&&x.setContentType(Se),oe.body){const[G,L]=l0(ye,Yc(a0(ee)));b=u0(oe.body,d0,G,L)}}V.isString(C)||(C=C?"include":"omit");const ue=i&&"credentials"in n.prototype,Te={...j,signal:D,method:A.toUpperCase(),headers:x.normalize().toJSON(),body:b,duplex:"half",credentials:ue?C:void 0};I=i&&new n(N,Te);let te=await(i?T(I,j):T(N,Te));const P=p&&(E==="stream"||E==="response");if(p&&(K||P&&J)){const oe={};["status","statusText","headers"].forEach(Y=>{oe[Y]=te[Y]});const Se=V.toFiniteNumber(te.headers.get("content-length")),[G,L]=K&&l0(Se,Yc(a0(K),!0))||[];te=new r(u0(te.body,d0,G,()=>{L&&L(),J&&J()}),oe)}E=E||"text";let Q=await f[V.findKey(f,E)||"text"](te,_);return!P&&J&&J(),await new Promise((oe,Se)=>{Cv(oe,Se,{data:Q,headers:Cn.from(te.headers),status:te.status,statusText:te.statusText,config:_,request:I})})}catch(ue){throw J&&J(),ue&&ue.name==="TypeError"&&/Load failed|fetch/i.test(ue.message)?Object.assign(new Le("Network Error",Le.ERR_NETWORK,_,I),{cause:ue.cause||ue}):Le.from(ue,ue&&ue.code,_,I)}}},sI=new Map,kv=t=>{let e=t&&t.env||{};const{fetch:n,Request:r,Response:s}=e,i=[r,s,n];let o=i.length,c=o,u,d,p=sI;for(;c--;)u=i[c],d=p.get(u),d===void 0&&p.set(u,d=c?new Map:rI(e)),p=d;return d};kv();const bp={http:wC,xhr:JC,fetch:{get:kv}};V.forEach(bp,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const g0=t=>`- ${t}`,iI=t=>V.isFunction(t)||t===null||t===!1;function oI(t,e){t=V.isArray(t)?t:[t];const{length:n}=t;let r,s;const i={};for(let o=0;o<n;o++){r=t[o];let c;if(s=r,!iI(r)&&(s=bp[(c=String(r)).toLowerCase()],s===void 0))throw new Le(`Unknown adapter '${c}'`);if(s&&(V.isFunction(s)||(s=s.get(e))))break;i[c||"#"+o]=s}if(!s){const o=Object.entries(i).map(([u,d])=>`adapter ${u} `+(d===!1?"is not supported by the environment":"is not available in the build"));let c=n?o.length>1?`since :
`+o.map(g0).join(`
`):" "+g0(o[0]):"as no adapter specified";throw new Le("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return s}const Tv={getAdapter:oI,adapters:bp};function Ld(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new So(null,t)}function m0(t){return Ld(t),t.headers=Cn.from(t.headers),t.data=Md.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Tv.getAdapter(t.adapter||ua.adapter,t)(t).then(function(r){return Ld(t),r.data=Md.call(t,t.transformResponse,r),r.headers=Cn.from(r.headers),r},function(r){return Ev(r)||(Ld(t),r&&r.response&&(r.response.data=Md.call(t,t.transformResponse,r.response),r.response.headers=Cn.from(r.response.headers))),Promise.reject(r)})}const Nv="1.13.2",Mu={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Mu[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const y0={};Mu.transitional=function(e,n,r){function s(i,o){return"[Axios v"+Nv+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,c)=>{if(e===!1)throw new Le(s(o," has been removed"+(n?" in "+n:"")),Le.ERR_DEPRECATED);return n&&!y0[o]&&(y0[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,c):!0}};Mu.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function lI(t,e,n){if(typeof t!="object")throw new Le("options must be an object",Le.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],o=e[i];if(o){const c=t[i],u=c===void 0||o(c,i,t);if(u!==!0)throw new Le("option "+i+" must be "+u,Le.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Le("Unknown option "+i,Le.ERR_BAD_OPTION)}}const wc={assertOptions:lI,validators:Mu},gr=wc.validators;let ni=class{constructor(e){this.defaults=e||{},this.interceptors={request:new i0,response:new i0}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=ui(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&wc.assertOptions(r,{silentJSONParsing:gr.transitional(gr.boolean),forcedJSONParsing:gr.transitional(gr.boolean),clarifyTimeoutError:gr.transitional(gr.boolean)},!1),s!=null&&(V.isFunction(s)?n.paramsSerializer={serialize:s}:wc.assertOptions(s,{encode:gr.function,serialize:gr.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),wc.assertOptions(n,{baseUrl:gr.spelling("baseURL"),withXsrfToken:gr.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&V.merge(i.common,i[n.method]);i&&V.forEach(["delete","get","head","post","put","patch","common"],_=>{delete i[_]}),n.headers=Cn.concat(o,i);const c=[];let u=!0;this.interceptors.request.forEach(function(N){typeof N.runWhen=="function"&&N.runWhen(n)===!1||(u=u&&N.synchronous,c.unshift(N.fulfilled,N.rejected))});const d=[];this.interceptors.response.forEach(function(N){d.push(N.fulfilled,N.rejected)});let p,f=0,m;if(!u){const _=[m0.bind(this),void 0];for(_.unshift(...c),_.push(...d),m=_.length,p=Promise.resolve(n);f<m;)p=p.then(_[f++],_[f++]);return p}m=c.length;let k=n;for(;f<m;){const _=c[f++],N=c[f++];try{k=_(k)}catch(A){N.call(this,A);break}}try{p=m0.call(this,k)}catch(_){return Promise.reject(_)}for(f=0,m=d.length;f<m;)p=p.then(d[f++],d[f++]);return p}getUri(e){e=ui(this.defaults,e);const n=Iv(e.baseURL,e.url,e.allowAbsoluteUrls);return wv(n,e.params,e.paramsSerializer)}};V.forEach(["delete","get","head","options"],function(e){ni.prototype[e]=function(n,r){return this.request(ui(r||{},{method:e,url:n,data:(r||{}).data}))}});V.forEach(["post","put","patch"],function(e){function n(r){return function(i,o,c){return this.request(ui(c||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}ni.prototype[e]=n(),ni.prototype[e+"Form"]=n(!0)});let aI=class Rv{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(c=>{r.subscribe(c),i=c}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,c){r.reason||(r.reason=new So(i,o,c),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new Rv(function(s){e=s}),cancel:e}}};function cI(t){return function(n){return t.apply(null,n)}}function uI(t){return V.isObject(t)&&t.isAxiosError===!0}const Zh={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Zh).forEach(([t,e])=>{Zh[e]=t});function Av(t){const e=new ni(t),n=cv(ni.prototype.request,e);return V.extend(n,ni.prototype,e,{allOwnKeys:!0}),V.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return Av(ui(t,s))},n}const X=Av(ua);X.Axios=ni;X.CanceledError=So;X.CancelToken=aI;X.isCancel=Ev;X.VERSION=Nv;X.toFormData=Du;X.AxiosError=Le;X.Cancel=X.CanceledError;X.all=function(e){return Promise.all(e)};X.spread=cI;X.isAxiosError=uI;X.mergeConfig=ui;X.AxiosHeaders=Cn;X.formToJSON=t=>bv(V.isHTMLForm(t)?new FormData(t):t);X.getAdapter=Tv.getAdapter;X.HttpStatusCode=Zh;X.default=X;const{Axios:D6,AxiosError:M6,CanceledError:L6,isCancel:F6,CancelToken:z6,VERSION:B6,all:U6,Cancel:$6,isAxiosError:W6,spread:V6,toFormData:H6,AxiosHeaders:K6,HttpStatusCode:G6,formToJSON:q6,getAdapter:Y6,mergeConfig:Q6}=X;var Py,Oy;const dI=((Oy=(Py=import.meta)==null?void 0:Py.env)==null?void 0:Oy.VITE_API_BASE)||"https://gojo-teacher-web.onrender.com/api",hI=async(t,e)=>{try{return(await X.post(`${dI}/teacher_login`,{username:t,password:e})).data}catch(n){return console.error("Login error:",n.response?n.response.data:n.message),{success:!1,message:"Network error or server not reachable"}}};function Fd(){const t=On(),[e,n]=y.useState(""),[r,s]=y.useState(""),[i,o]=y.useState(""),c=async u=>{u.preventDefault(),o("");const d=await hI(e,r);d.success?(localStorage.setItem("teacher",JSON.stringify(d.teacher)),t("/dashboard")):o(d.message||"Login failed")};return a.jsx("div",{className:"auth-container",children:a.jsxs("div",{className:"auth-box",children:[a.jsx("h2",{children:"Teacher Login"}),i&&a.jsx("p",{className:"auth-error",children:i}),a.jsxs("form",{onSubmit:c,children:[a.jsx("input",{type:"text",placeholder:"Username",value:e,onChange:u=>n(u.target.value),required:!0}),a.jsx("input",{type:"password",placeholder:"Password",value:r,onChange:u=>s(u.target.value),required:!0}),a.jsx("button",{type:"submit",className:"submit-btn",children:"Login"})]}),a.jsxs("p",{className:"auth-link",children:["Don't have an account? ",a.jsx(xe,{to:"/register",children:"Register Here"})]})]})})}function fI(){On();const t=["7","8","9","10","11 Social","11 Natural","12 Social","12 Natural"],e=["A","B","C"],n={7:["Mathematics","Amharic","English","Biology","Physics","Chemistry","Geography","History","Civics","ICT","Oromifa","Physical Education"],8:["Mathematics","Amharic","English","Biology","Physics","Chemistry","Geography","History","Civics","ICT","Oromifa","Physical Education"],9:["Mathematics","English","Biology","Physics","Chemistry","Geography","History","Civics","ICT","Physical Education"],10:["Mathematics","English","Biology","Physics","Chemistry","Geography","History","Civics","ICT","Physical Education"],"11 Social":["Mathematics","English","Physics","Chemistry","Biology","Economics","Geography","History"],"11 Natural":["Mathematics","English","Physics","Chemistry","Biology","Economics","Geography","History"],"12 Social":["Mathematics","English","Physics","Chemistry","Biology","Economics","Geography","History"],"12 Natural":["Mathematics","English","Physics","Chemistry","Biology","Economics","Geography","History"]},[r,s]=y.useState({name:"",password:"",email:"",phone:"",gender:"",courses:[{grade:"",section:"",subject:""}]}),[i,o]=y.useState(null),[c,u]=y.useState(""),[d,p]=y.useState(""),f=(w,v=null)=>{const{name:R,value:K}=w.target;if(v!==null){const ee=[...r.courses];ee[v][R]=K,R==="grade"&&(ee[v].subject=""),s({...r,courses:ee})}else s({...r,[R]:K})},m=()=>{s({...r,courses:[...r.courses,{grade:"",section:"",subject:""}]})},k=w=>{const v=r.courses.filter((R,K)=>K!==w);s({...r,courses:v})},_=()=>{const w=new Set;for(let v of r.courses){if(!v.grade||!v.section||!v.subject)continue;const R=`${v.grade}${v.section}-${v.subject}`;if(w.has(R))return!0;w.add(R)}return!1},N=w=>w===""||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(w).toLowerCase()),A=w=>/^[0-9+()\-\s]{6,20}$/.test(String(w).trim()),b=async w=>{if(w.preventDefault(),u(""),p(""),!N(r.email)){u("Please enter a valid email address or leave it empty.");return}if(!A(r.phone)){u("Please enter a valid phone number.");return}if(!r.gender){u("Please select gender.");return}if(!r.name||!r.password){u("Name and password are required.");return}if(_()){u("Duplicate subject detected! A subject can only be taught once per grade and section.");return}try{const v=new FormData;v.append("name",r.name),v.append("password",r.password),v.append("email",r.email),v.append("phone",r.phone),v.append("gender",r.gender),v.append("courses",JSON.stringify(r.courses)),i&&v.append("profile",i);const K=await(await fetch("https://gojo-teacher-web.onrender.com/register/teacher",{method:"POST",body:v})).json();if(K.success){const ee=K.teacherKey||K.teacherId||K.teacherKey||K.teacherId||"";p(ee),s({name:"",password:"",email:"",phone:"",gender:"",courses:[{grade:"",section:"",subject:""}]}),o(null),u("Registration successful. Your teacherId (username) is shown below.")}else u(K.message||"Registration failed.")}catch(v){console.error("Registration error:",v),u("Server error. Check console.")}};return a.jsx("div",{className:"auth-container",children:a.jsxs("div",{className:"auth-box",style:{maxWidth:"600px"},children:[a.jsx("h2",{children:"Teacher Registration"}),c&&a.jsx("p",{className:"auth-error",children:c}),a.jsxs("form",{onSubmit:b,children:[a.jsx("input",{type:"text",name:"name",placeholder:"Full Name",value:r.name,onChange:f,required:!0}),a.jsx("input",{type:"email",name:"email",placeholder:"Email (optional)",value:r.email,onChange:f}),a.jsx("input",{type:"tel",name:"phone",placeholder:"Phone number",value:r.phone,onChange:f,required:!0}),a.jsxs("select",{name:"gender",value:r.gender,onChange:f,required:!0,children:[a.jsx("option",{value:"",children:"Select Gender"}),a.jsx("option",{value:"Male",children:"Male"}),a.jsx("option",{value:"Female",children:"Female"}),a.jsx("option",{value:"Other",children:"Other"}),a.jsx("option",{value:"Prefer not to say",children:"Prefer not to say"})]}),a.jsx("input",{type:"password",name:"password",placeholder:"Password",value:r.password,onChange:f,required:!0}),a.jsxs("div",{className:"profile-upload",children:[i&&a.jsx("img",{src:URL.createObjectURL(i),alt:"Profile Preview",className:"profile-preview"}),a.jsx("input",{type:"file",accept:"image/*",onChange:w=>o(w.target.files[0])})]}),a.jsx("h3",{children:"Courses"}),r.courses.map((w,v)=>a.jsxs("div",{className:"course-group",children:[a.jsxs("select",{name:"grade",value:w.grade,onChange:R=>f(R,v),required:!0,children:[a.jsx("option",{value:"",children:"Select Grade"}),t.map(R=>a.jsx("option",{value:R,children:R},R))]}),a.jsxs("select",{name:"section",value:w.section,onChange:R=>f(R,v),required:!0,children:[a.jsx("option",{value:"",children:"Select Section"}),e.map(R=>a.jsx("option",{value:R,children:R},R))]}),a.jsxs("select",{name:"subject",value:w.subject,onChange:R=>f(R,v),required:!0,disabled:!w.grade,children:[a.jsx("option",{value:"",children:"Select Subject"}),w.grade&&n[w.grade].map(R=>a.jsx("option",{value:R,children:R},R))]}),r.courses.length>1&&a.jsx("button",{type:"button",className:"remove-btn",onClick:()=>k(v),children:"Remove"})]},v)),a.jsx("button",{type:"button",className:"add-btn",onClick:m,children:"Add Course"}),a.jsx("button",{type:"submit",className:"submit-btn",children:"Register"})]}),d&&a.jsxs("div",{className:"auth-success",style:{marginTop:12},children:[a.jsxs("p",{children:["Registration complete. Your teacherId (username) is:"," ",a.jsx("strong",{children:d})]}),a.jsxs("p",{children:["Use this ID to log in: ",a.jsx(xe,{to:"/login",children:"Go to Login"})]})]}),a.jsxs("p",{className:"auth-link",children:["Already have an account? ",a.jsx(xe,{to:"/login",children:"Go to Login"})]})]})})}var Pv={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},x0=Xt.createContext&&Xt.createContext(Pv),pI=["attr","size","title"];function gI(t,e){if(t==null)return{};var n=mI(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function mI(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Qc(){return Qc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qc.apply(this,arguments)}function v0(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Jc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?v0(Object(n),!0).forEach(function(r){yI(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v0(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yI(t,e,n){return e=xI(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xI(t){var e=vI(t,"string");return typeof e=="symbol"?e:e+""}function vI(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ov(t){return t&&t.map((e,n)=>Xt.createElement(e.tag,Jc({key:n},e.attr),Ov(e.child)))}function kt(t){return e=>Xt.createElement(_I,Qc({attr:Jc({},t.attr)},e),Ov(t.child))}function _I(t){var e=n=>{var{attr:r,size:s,title:i}=t,o=gI(t,pI),c=s||n.size||"1em",u;return n.className&&(u=n.className),t.className&&(u=(u?u+" ":"")+t.className),Xt.createElement("svg",Qc({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:u,style:Jc(Jc({color:t.color||n.color},n.style),t.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),i&&Xt.createElement("title",null,i),t.children)};return x0!==void 0?Xt.createElement(x0.Consumer,null,n=>e(n)):e(Pv)}function Yr(t){return kt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256.55 8C116.52 8 8 110.34 8 248.57c0 72.3 29.71 134.78 78.07 177.94 8.35 7.51 6.63 11.86 8.05 58.23A19.92 19.92 0 0 0 122 502.31c52.91-23.3 53.59-25.14 62.56-22.7C337.85 521.8 504 423.7 504 248.57 504 110.34 396.59 8 256.55 8zm149.24 185.13l-73 115.57a37.37 37.37 0 0 1-53.91 9.93l-58.08-43.47a15 15 0 0 0-18 0l-78.37 59.44c-10.46 7.93-24.16-4.6-17.11-15.67l73-115.57a37.36 37.36 0 0 1 53.91-9.93l58.06 43.46a15 15 0 0 0 18 0l78.41-59.38c10.44-7.98 24.14 4.54 17.09 15.62z"},child:[]}]})(t)}function wI(t){return kt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(t)}function Qr(t){return kt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(t)}function Jr(t){return kt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M208 352c-2.39 0-4.78.35-7.06 1.09C187.98 357.3 174.35 360 160 360c-14.35 0-27.98-2.7-40.95-6.91-2.28-.74-4.66-1.09-7.05-1.09C49.94 352-.33 402.48 0 464.62.14 490.88 21.73 512 48 512h224c26.27 0 47.86-21.12 48-47.38.33-62.14-49.94-112.62-112-112.62zm-48-32c53.02 0 96-42.98 96-96s-42.98-96-96-96-96 42.98-96 96 42.98 96 96 96zM592 0H208c-26.47 0-48 22.25-48 49.59V96c23.42 0 45.1 6.78 64 17.8V64h352v288h-64v-64H384v64h-76.24c19.1 16.69 33.12 38.73 39.69 64H592c26.47 0 48-22.25 48-49.59V49.59C640 22.25 618.47 0 592 0z"},child:[]}]})(t)}function oo(t){return kt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(t)}function SI(t){return kt({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(t)}function Ep(t){return kt({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(t)}function br(t){return kt({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM192 40c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm121.2 231.8l-143 141.8c-4.7 4.7-12.3 4.6-17-.1l-82.6-83.3c-4.7-4.7-4.6-12.3.1-17L99.1 285c4.7-4.7 12.3-4.6 17 .1l46 46.4 106-105.2c4.7-4.7 12.3-4.6 17 .1l28.2 28.4c4.7 4.8 4.6 12.3-.1 17z"},child:[]}]})(t)}function Er(t){return kt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(t)}function Cp(t){return kt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 32C114.6 32 0 125.1 0 240c0 49.6 21.4 95 57 130.7C44.5 421.1 2.7 466 2.2 466.5c-2.2 2.3-2.8 5.7-1.5 8.7S4.8 480 8 480c66.3 0 116-31.8 140.6-51.4 32.7 12.3 69 19.4 107.4 19.4 141.4 0 256-93.1 256-208S397.4 32 256 32zM128 272c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 0c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 0c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"},child:[]}]})(t)}function bI(t){return kt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(t)}function EI(t){return kt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"},child:[]}]})(t)}function Xr(t){return kt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(t)}function Dv(t){return kt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"},child:[]}]})(t)}function CI(t){return kt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(t)}function _0(t){return kt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"},child:[]}]})(t)}function II(t){return kt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(t)}function Zr(t){return kt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}function jI(t){return kt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(t)}function kI(t){return kt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M296 384h-80c-13.3 0-24-10.7-24-24V192h-87.7c-17.8 0-26.7-21.5-14.1-34.1L242.3 5.7c7.5-7.5 19.8-7.5 27.3 0l152.2 152.2c12.6 12.6 3.7 34.1-14.1 34.1H320v168c0 13.3-10.7 24-24 24zm216-8v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h136v8c0 30.9 25.1 56 56 56h80c30.9 0 56-25.1 56-56v-8h136c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(t)}function He(t){return kt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(t)}function TI(t){return kt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M458.4 64.3C400.6 15.7 311.3 23 256 79.3 200.7 23 111.4 15.6 53.6 64.3-21.6 127.6-10.6 230.8 43 285.5l175.4 178.7c10 10.2 23.4 15.9 37.6 15.9 14.3 0 27.6-5.6 37.6-15.8L469 285.6c53.5-54.7 64.7-157.9-10.6-221.3zm-23.6 187.5L259.4 430.5c-2.4 2.4-4.4 2.4-6.8 0L77.2 251.8c-36.5-37.2-43.9-107.6 7.3-150.7 38.9-32.7 98.9-27.8 136.5 10.5l35 35.7 35-35.7c37.8-38.5 97.8-43.2 136.5-10.6 51.1 43.1 43.5 113.9 7.3 150.8z"},child:[]}]})(t)}const NI=()=>{};var w0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pe=function(t,e){if(!t)throw bo(e)},bo=function(t){return new Error("Firebase Database ("+Mv.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},RI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Ip={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,p=i>>2,f=(i&3)<<4|c>>4;let m=(c&15)<<2|d>>6,k=d&63;u||(k=64,o||(m=64)),r.push(n[p],n[f],n[m],n[k])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Lv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):RI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||d==null||f==null)throw new AI;const m=i<<2|c>>4;if(r.push(m),d!==64){const k=c<<4&240|d>>2;if(r.push(k),f!==64){const _=d<<6&192|f;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class AI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Fv=function(t){const e=Lv(t);return Ip.encodeByteArray(e,!0)},Xc=function(t){return Fv(t).replace(/\./g,"")},ef=function(t){try{return Ip.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(t){return zv(void 0,t)}function zv(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!OI(n)||(t[n]=zv(t[n],e[n]));return t}function OI(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI=()=>DI().__FIREBASE_DEFAULTS__,LI=()=>{if(typeof process>"u"||typeof w0>"u")return;const t=w0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},FI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ef(t[1]);return e&&JSON.parse(e)},Bv=()=>{try{return NI()||MI()||LI()||FI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},zI=t=>{var e,n;return(n=(e=Bv())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},Uv=t=>{const e=zI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},$v=()=>{var t;return(t=Bv())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lu(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Wv(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vv(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Xc(JSON.stringify(n)),Xc(JSON.stringify(o)),""].join(".")}const dl={};function BI(){const t={prod:[],emulator:[]};for(const e of Object.keys(dl))dl[e]?t.emulator.push(e):t.prod.push(e);return t}function UI(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let S0=!1;function Hv(t,e){if(typeof window>"u"||typeof document>"u"||!Lu(window.location.host)||dl[t]===e||dl[t]||S0)return;dl[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=BI().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,k){m.setAttribute("width","24"),m.setAttribute("id",k),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function d(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{S0=!0,o()},m}function p(m,k){m.setAttribute("id",k),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=UI(r),k=n("text"),_=document.getElementById(k)||document.createElement("span"),N=n("learnmore"),A=document.getElementById(N)||document.createElement("a"),b=n("preprendIcon"),w=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const v=m.element;c(v),p(A,N);const R=d();u(w,b),v.append(w,_,A,R),document.body.appendChild(v)}i?(_.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Kv(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($I())}function WI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function VI(){return Mv.NODE_ADMIN===!0}function HI(){try{return typeof indexedDB=="object"}catch{return!1}}function KI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI="FirebaseError";class Eo extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=GI,Object.setPrototypeOf(this,Eo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gv.prototype.create)}}class Gv{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?qI(i,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new Eo(s,c,r)}}function qI(t,e){return t.replace(YI,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const YI=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fl(t){return JSON.parse(t)}function Bt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=Fl(ef(i[0])||""),n=Fl(ef(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},QI=function(t){const e=qv(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},JI=function(t){const e=qv(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function lo(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function b0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Zc(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function zl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(E0(i)&&E0(o)){if(!zl(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function E0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let f=0;f<16;f++)r[f]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let f=0;f<16;f++)r[f]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let f=16;f<80;f++){const m=r[f-3]^r[f-8]^r[f-14]^r[f-16];r[f]=(m<<1|m>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],c=this.chain_[3],u=this.chain_[4],d,p;for(let f=0;f<80;f++){f<40?f<20?(d=c^i&(o^c),p=1518500249):(d=i^o^c,p=1859775393):f<60?(d=i&o|c&(i|o),p=2400959708):(d=i^o^c,p=3395469782);const m=(s<<5|s>>>27)+d+u+p+r[f]&4294967295;u=c,c=o,o=(i<<30|i>>>2)&4294967295,i=s,s=m}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function Fu(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e4=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,pe(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},zu=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(t){return t&&t._delegate?t._delegate:t}class ao{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new da;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(r4(e))try{this.getOrInitializeService({instanceIdentifier:Hs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Hs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Hs){return this.instances.has(e)}getOptions(e=Hs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:n4(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Hs){return this.component?this.component.multipleInstances?e:Hs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function n4(t){return t===Hs?void 0:t}function r4(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new t4(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(it||(it={}));const i4={debug:it.DEBUG,verbose:it.VERBOSE,info:it.INFO,warn:it.WARN,error:it.ERROR,silent:it.SILENT},o4=it.INFO,l4={[it.DEBUG]:"log",[it.VERBOSE]:"log",[it.INFO]:"info",[it.WARN]:"warn",[it.ERROR]:"error"},a4=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=l4[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class jp{constructor(e){this.name=e,this._logLevel=o4,this._logHandler=a4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in it))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?i4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,it.DEBUG,...e),this._logHandler(this,it.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,it.VERBOSE,...e),this._logHandler(this,it.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,it.INFO,...e),this._logHandler(this,it.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,it.WARN,...e),this._logHandler(this,it.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,it.ERROR,...e),this._logHandler(this,it.ERROR,...e)}}const c4=(t,e)=>e.some(n=>t instanceof n);let C0,I0;function u4(){return C0||(C0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function d4(){return I0||(I0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Yv=new WeakMap,tf=new WeakMap,Qv=new WeakMap,zd=new WeakMap,kp=new WeakMap;function h4(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(bs(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Yv.set(n,t)}).catch(()=>{}),kp.set(e,t),e}function f4(t){if(tf.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});tf.set(t,e)}let nf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return tf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Qv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return bs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function p4(t){nf=t(nf)}function g4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Bd(this),e,...n);return Qv.set(r,e.sort?e.sort():[e]),bs(r)}:d4().includes(t)?function(...e){return t.apply(Bd(this),e),bs(Yv.get(this))}:function(...e){return bs(t.apply(Bd(this),e))}}function m4(t){return typeof t=="function"?g4(t):(t instanceof IDBTransaction&&f4(t),c4(t,u4())?new Proxy(t,nf):t)}function bs(t){if(t instanceof IDBRequest)return h4(t);if(zd.has(t))return zd.get(t);const e=m4(t);return e!==t&&(zd.set(t,e),kp.set(e,t)),e}const Bd=t=>kp.get(t);function y4(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=bs(o);return r&&o.addEventListener("upgradeneeded",u=>{r(bs(o.result),u.oldVersion,u.newVersion,bs(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const x4=["get","getKey","getAll","getAllKeys","count"],v4=["put","add","delete","clear"],Ud=new Map;function j0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ud.get(e))return Ud.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=v4.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||x4.includes(n)))return;const i=async function(o,...c){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return Ud.set(e,i),i}p4(t=>({...t,get:(e,n,r)=>j0(e,n)||t.get(e,n,r),has:(e,n)=>!!j0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(w4(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function w4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const rf="@firebase/app",k0="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr=new jp("@firebase/app"),S4="@firebase/app-compat",b4="@firebase/analytics-compat",E4="@firebase/analytics",C4="@firebase/app-check-compat",I4="@firebase/app-check",j4="@firebase/auth",k4="@firebase/auth-compat",T4="@firebase/database",N4="@firebase/data-connect",R4="@firebase/database-compat",A4="@firebase/functions",P4="@firebase/functions-compat",O4="@firebase/installations",D4="@firebase/installations-compat",M4="@firebase/messaging",L4="@firebase/messaging-compat",F4="@firebase/performance",z4="@firebase/performance-compat",B4="@firebase/remote-config",U4="@firebase/remote-config-compat",$4="@firebase/storage",W4="@firebase/storage-compat",V4="@firebase/firestore",H4="@firebase/ai",K4="@firebase/firestore-compat",G4="firebase",q4="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sf="[DEFAULT]",Y4={[rf]:"fire-core",[S4]:"fire-core-compat",[E4]:"fire-analytics",[b4]:"fire-analytics-compat",[I4]:"fire-app-check",[C4]:"fire-app-check-compat",[j4]:"fire-auth",[k4]:"fire-auth-compat",[T4]:"fire-rtdb",[N4]:"fire-data-connect",[R4]:"fire-rtdb-compat",[A4]:"fire-fn",[P4]:"fire-fn-compat",[O4]:"fire-iid",[D4]:"fire-iid-compat",[M4]:"fire-fcm",[L4]:"fire-fcm-compat",[F4]:"fire-perf",[z4]:"fire-perf-compat",[B4]:"fire-rc",[U4]:"fire-rc-compat",[$4]:"fire-gcs",[W4]:"fire-gcs-compat",[V4]:"fire-fst",[K4]:"fire-fst-compat",[H4]:"fire-vertex","fire-js":"fire-js",[G4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bl=new Map,Q4=new Map,of=new Map;function T0(t,e){try{t.container.addComponent(e)}catch(n){Hr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ul(t){const e=t.name;if(of.has(e))return Hr.debug(`There were multiple attempts to register component ${e}.`),!1;of.set(e,t);for(const n of Bl.values())T0(n,t);for(const n of Q4.values())T0(n,t);return!0}function Jv(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Xv(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Es=new Gv("app","Firebase",J4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ao("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Es.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv=q4;function e_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:sf,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Es.create("bad-app-name",{appName:String(s)});if(n||(n=$v()),!n)throw Es.create("no-options");const i=Bl.get(s);if(i){if(zl(n,i.options)&&zl(r,i.config))return i;throw Es.create("duplicate-app",{appName:s})}const o=new s4(s);for(const u of of.values())o.addComponent(u);const c=new X4(n,r,o);return Bl.set(s,c),c}function t_(t=sf){const e=Bl.get(t);if(!e&&t===sf&&$v())return e_();if(!e)throw Es.create("no-app",{appName:t});return e}function N0(){return Array.from(Bl.values())}function Cs(t,e,n){let r=Y4[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hr.warn(o.join(" "));return}Ul(new ao(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z4="firebase-heartbeat-database",ej=1,$l="firebase-heartbeat-store";let $d=null;function n_(){return $d||($d=y4(Z4,ej,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore($l)}catch(n){console.warn(n)}}}}).catch(t=>{throw Es.create("idb-open",{originalErrorMessage:t.message})})),$d}async function tj(t){try{const n=(await n_()).transaction($l),r=await n.objectStore($l).get(r_(t));return await n.done,r}catch(e){if(e instanceof Eo)Hr.warn(e.message);else{const n=Es.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Hr.warn(n.message)}}}async function R0(t,e){try{const r=(await n_()).transaction($l,"readwrite");await r.objectStore($l).put(e,r_(t)),await r.done}catch(n){if(n instanceof Eo)Hr.warn(n.message);else{const r=Es.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Hr.warn(r.message)}}}function r_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nj=1024,rj=30;class sj{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new oj(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=A0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>rj){const o=lj(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Hr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=A0(),{heartbeatsToSend:r,unsentEntries:s}=ij(this._heartbeatsCache.heartbeats),i=Xc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Hr.warn(n),""}}}function A0(){return new Date().toISOString().substring(0,10)}function ij(t,e=nj){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),P0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),P0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class oj{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return HI()?KI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await tj(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return R0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return R0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function P0(t){return Xc(JSON.stringify({version:2,heartbeats:t})).length}function lj(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aj(t){Ul(new ao("platform-logger",e=>new _4(e),"PRIVATE")),Ul(new ao("heartbeat",e=>new sj(e),"PRIVATE")),Cs(rf,k0,t),Cs(rf,k0,"esm2020"),Cs("fire-js","")}aj("");var cj="firebase",uj="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cs(cj,uj,"app");var O0={};const D0="@firebase/database",M0="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let s_="";function dj(t){s_=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Bt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Fl(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Cr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new hj(e)}}catch{}return new fj},Xs=i_("localStorage"),pj=i_("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi=new jp("@firebase/database"),gj=function(){let t=1;return function(){return t++}}(),o_=function(t){const e=e4(t),n=new ZI;n.update(e);const r=n.digest();return Ip.encodeByteArray(r)},ha=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=ha.apply(null,r):typeof r=="object"?e+=Bt(r):e+=r,e+=" "}return e};let hl=null,L0=!0;const mj=function(t,e){pe(!0,"Can't turn on custom loggers persistently."),qi.logLevel=it.VERBOSE,hl=qi.log.bind(qi)},Jt=function(...t){if(L0===!0&&(L0=!1,hl===null&&pj.get("logging_enabled")===!0&&mj()),hl){const e=ha.apply(null,t);hl(e)}},fa=function(t){return function(...e){Jt(t,...e)}},lf=function(...t){const e="FIREBASE INTERNAL ERROR: "+ha(...t);qi.error(e)},Kr=function(...t){const e=`FIREBASE FATAL ERROR: ${ha(...t)}`;throw qi.error(e),new Error(e)},fn=function(...t){const e="FIREBASE WARNING: "+ha(...t);qi.warn(e)},yj=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&fn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Tp=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},xj=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},co="[MIN_NAME]",di="[MAX_NAME]",xi=function(t,e){if(t===e)return 0;if(t===co||e===di)return-1;if(e===co||t===di)return 1;{const n=F0(t),r=F0(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},vj=function(t,e){return t===e?0:t<e?-1:1},Go=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Bt(e))},Np=function(t){if(typeof t!="object"||t===null)return Bt(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Bt(e[r]),n+=":",n+=Np(t[e[r]]);return n+="}",n},l_=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function tn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const a_=function(t){pe(!Tp(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,c,u;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(c=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=c+r,o=Math.round(t*Math.pow(2,n-c)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const d=[];for(u=n;u;u-=1)d.push(o%2?1:0),o=Math.floor(o/2);for(u=e;u;u-=1)d.push(i%2?1:0),i=Math.floor(i/2);d.push(s?1:0),d.reverse();const p=d.join("");let f="";for(u=0;u<64;u+=8){let m=parseInt(p.substr(u,8),2).toString(16);m.length===1&&(m="0"+m),f=f+m}return f.toLowerCase()},_j=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},wj=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Sj(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const bj=new RegExp("^-?(0*)\\d{1,10}$"),Ej=-2147483648,Cj=2147483647,F0=function(t){if(bj.test(t)){const e=Number(t);if(e>=Ej&&e<=Cj)return e}return null},Co=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw fn("Exception was thrown by user callback.",n),e},Math.floor(0))}},Ij=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},fl=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,Xv(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)==null||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){fn(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Jt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',fn(e)}}class Sc{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Sc.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rp="5",c_="v",u_="s",d_="r",h_="f",f_=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,p_="ls",g_="p",af="ac",m_="websocket",y_="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(e,n,r,s,i=!1,o="",c=!1,u=!1,d=null){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=c,this.isUsingEmulator=u,this.emulatorOptions=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Xs.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Xs.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Tj(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function v_(t,e,n){pe(typeof e=="string","typeof type must == string"),pe(typeof n=="object","typeof params must == object");let r;if(e===m_)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===y_)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Tj(t)&&(n.ns=t.namespace);const s=[];return tn(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(){this.counters_={}}incrementCounter(e,n=1){Cr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return PI(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wd={},Vd={};function Ap(t){const e=t.toString();return Wd[e]||(Wd[e]=new Nj),Wd[e]}function Rj(t,e){const n=t.toString();return Vd[n]||(Vd[n]=e()),Vd[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&Co(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0="start",Pj="close",Oj="pLPCommand",Dj="pRTLPCB",__="id",w_="pw",S_="ser",Mj="cb",Lj="seg",Fj="ts",zj="d",Bj="dframe",b_=1870,E_=30,Uj=b_-E_,$j=25e3,Wj=3e4;class Ui{constructor(e,n,r,s,i,o,c){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=fa(e),this.stats_=Ap(n),this.urlFn=u=>(this.appCheckToken&&(u[af]=this.appCheckToken),v_(n,y_,u))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Aj(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Wj)),xj(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Pp((...i)=>{const[o,c,u,d,p]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===z0)this.id=c,this.password=u;else if(o===Pj)c?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(c,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,c]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,c)},()=>{this.onClosed_()},this.urlFn);const r={};r[z0]="t",r[S_]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Mj]=this.scriptTagHolder.uniqueCallbackIdentifier),r[c_]=Rp,this.transportSessionId&&(r[u_]=this.transportSessionId),this.lastSessionId&&(r[p_]=this.lastSessionId),this.applicationId&&(r[g_]=this.applicationId),this.appCheckToken&&(r[af]=this.appCheckToken),typeof location<"u"&&location.hostname&&f_.test(location.hostname)&&(r[d_]=h_);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ui.forceAllow_=!0}static forceDisallow(){Ui.forceDisallow_=!0}static isAvailable(){return Ui.forceAllow_?!0:!Ui.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!_j()&&!wj()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Bt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Fv(n),s=l_(r,Uj);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[Bj]="t",r[__]=e,r[w_]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Bt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Pp{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=gj(),window[Oj+this.uniqueCallbackIdentifier]=e,window[Dj+this.uniqueCallbackIdentifier]=n,this.myIFrame=Pp.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(c){Jt("frame writing exception"),c.stack&&Jt(c.stack),Jt(c)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Jt("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[__]=this.myID,e[w_]=this.myPW,e[S_]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+E_+r.length<=b_;){const o=this.pendingSegs.shift();r=r+"&"+Lj+s+"="+o.seg+"&"+Fj+s+"="+o.ts+"&"+zj+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor($j)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Jt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vj=16384,Hj=45e3;let eu=null;typeof MozWebSocket<"u"?eu=MozWebSocket:typeof WebSocket<"u"&&(eu=WebSocket);class nr{constructor(e,n,r,s,i,o,c){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=fa(this.connId),this.stats_=Ap(n),this.connURL=nr.connectionURL_(n,o,c,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[c_]=Rp,typeof location<"u"&&location.hostname&&f_.test(location.hostname)&&(o[d_]=h_),n&&(o[u_]=n),r&&(o[p_]=r),s&&(o[af]=s),i&&(o[g_]=i),v_(e,m_,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Xs.set("previous_websocket_failure",!0);try{let r;VI(),this.mySock=new eu(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){nr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&eu!==null&&!nr.forceDisallow_}static previouslyFailed(){return Xs.isInMemoryStorage||Xs.get("previous_websocket_failure")===!0}markConnectionHealthy(){Xs.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Fl(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(pe(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Bt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=l_(n,Vj);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Hj))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}nr.responsesRequiredToBeHealthy=2;nr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{static get ALL_TRANSPORTS(){return[Ui,nr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=nr&&nr.isAvailable();let r=n&&!nr.previouslyFailed();if(e.webSocketOnly&&(n||fn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[nr];else{const s=this.transports_=[];for(const i of Wl.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);Wl.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Wl.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kj=6e4,Gj=5e3,qj=10*1024,Yj=100*1024,Hd="t",B0="d",Qj="s",U0="r",Jj="e",$0="o",W0="a",V0="n",H0="p",Xj="h";class Zj{constructor(e,n,r,s,i,o,c,u,d,p){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=c,this.onDisconnect_=u,this.onKill_=d,this.lastSessionId=p,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=fa("c:"+this.id+":"),this.transportManager_=new Wl(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=fl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Yj?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>qj?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Hd in e){const n=e[Hd];n===W0?this.upgradeIfSecondaryHealthy_():n===U0?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===$0&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Go("t",e),r=Go("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:H0,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:W0,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:V0,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Go("t",e),r=Go("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Go(Hd,e);if(B0 in e){const r=e[B0];if(n===Xj){const s={...r};this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===V0){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Qj?this.onConnectionShutdown_(r):n===U0?this.onReset_(r):n===Jj?lf("Server Error: "+r):n===$0?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):lf("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Rp!==r&&fn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),fl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Kj))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):fl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Gj))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:H0,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Xs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(e){this.allowedEvents_=e,this.listeners_={},pe(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){pe(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu extends I_{static getInstance(){return new tu}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Kv()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return pe(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0=32,G0=768;class at{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function nt(){return new at("")}function Ue(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Ns(t){return t.pieces_.length-t.pieceNum_}function dt(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new at(t.pieces_,e)}function Op(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function ek(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Vl(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function j_(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new at(e,0)}function It(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof at)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new at(n,0)}function Ve(t){return t.pieceNum_>=t.pieces_.length}function dn(t,e){const n=Ue(t),r=Ue(e);if(n===null)return e;if(n===r)return dn(dt(t),dt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function tk(t,e){const n=Vl(t,0),r=Vl(e,0);for(let s=0;s<n.length&&s<r.length;s++){const i=xi(n[s],r[s]);if(i!==0)return i}return n.length===r.length?0:n.length<r.length?-1:1}function Dp(t,e){if(Ns(t)!==Ns(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Un(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Ns(t)>Ns(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class nk{constructor(e,n){this.errorPrefix_=n,this.parts_=Vl(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=zu(this.parts_[r]);k_(this)}}function rk(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=zu(e),k_(t)}function sk(t){const e=t.parts_.pop();t.byteLength_-=zu(e),t.parts_.length>0&&(t.byteLength_-=1)}function k_(t){if(t.byteLength_>G0)throw new Error(t.errorPrefix_+"has a key path longer than "+G0+" bytes ("+t.byteLength_+").");if(t.parts_.length>K0)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+K0+") or object contains a cycle "+Ks(t))}function Ks(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp extends I_{static getInstance(){return new Mp}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return pe(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo=1e3,ik=60*5*1e3,q0=30*1e3,ok=1.3,lk=3e4,ak="server_kill",Y0=3;class zr extends C_{constructor(e,n,r,s,i,o,c,u){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=c,this.authOverride_=u,this.id=zr.nextPersistentConnectionId_++,this.log_=fa("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=qo,this.maxReconnectDelay_=ik,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Mp.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&tu.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(Bt(i)),pe(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new da,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const c=o.d;o.s==="ok"?n.resolve(c):n.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),pe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),pe(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const c={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,c),this.connected_&&this.sendListen_(c)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,c=>{const u=c.d,d=c.s;zr.warnOnListenWarnings_(u,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",c),d!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(d,u))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Cr(e,"w")){const r=lo(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();fn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||JI(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=q0)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=QI(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),pe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Bt(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):lf("Unrecognized action received from server: "+Bt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){pe(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=qo,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=qo,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>lk&&(this.reconnectDelay_=qo),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*ok)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+zr.nextConnectionId_++,i=this.lastSessionId;let o=!1,c=null;const u=function(){c?c.close():(o=!0,r())},d=function(f){pe(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(f)};this.realtime_={close:u,sendRequest:d};const p=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[f,m]=await Promise.all([this.authTokenProvider_.getToken(p),this.appCheckTokenProvider_.getToken(p)]);o?Jt("getToken() completed but was canceled"):(Jt("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=m&&m.token,c=new Zj(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,k=>{fn(k+" ("+this.repoInfo_.toString()+")"),this.interrupt(ak)},i))}catch(f){this.log_("Failed to get token: "+f),o||(this.repoInfo_.nodeAdmin&&fn(f),u())}}}interrupt(e){Jt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Jt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],b0(this.interruptReasons_)&&(this.reconnectDelay_=qo,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>Np(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new at(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){Jt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Y0&&(this.reconnectDelay_=q0,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Jt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Y0&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+s_.replace(/\./g,"-")]=1,Kv()?e["framework.cordova"]=1:WI()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=tu.getInstance().currentlyOnline();return b0(this.interruptReasons_)&&e}}zr.nextPersistentConnectionId_=0;zr.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new $e(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new $e(co,e),s=new $e(co,n);return this.compare(r,s)!==0}minPost(){return $e.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ec;class T_ extends Bu{static get __EMPTY_NODE(){return ec}static set __EMPTY_NODE(e){ec=e}compare(e,n){return xi(e.name,n.name)}isDefinedOn(e){throw bo("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return $e.MIN}maxPost(){return new $e(di,ec)}makePost(e,n){return pe(typeof e=="string","KeyIndex indexValue must always be a string."),new $e(e,ec)}toString(){return".key"}}const Yi=new T_;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Kt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Kt.RED,this.left=s??_n.EMPTY_NODE,this.right=i??_n.EMPTY_NODE}copy(e,n,r,s,i){return new Kt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return _n.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return _n.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Kt.RED=!0;Kt.BLACK=!1;class ck{copy(e,n,r,s,i){return this}insert(e,n,r){return new Kt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class _n{constructor(e,n=_n.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new _n(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Kt.BLACK,null,null))}remove(e){return new _n(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Kt.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new tc(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new tc(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new tc(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new tc(this.root_,null,this.comparator_,!0,e)}}_n.EMPTY_NODE=new ck;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uk(t,e){return xi(t.name,e.name)}function Lp(t,e){return xi(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cf;function dk(t){cf=t}const N_=function(t){return typeof t=="number"?"number:"+a_(t):"string:"+t},R_=function(t){if(t.isLeafNode()){const e=t.val();pe(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Cr(e,".sv"),"Priority must be a string or number.")}else pe(t===cf||t.isEmpty(),"priority of unexpected type.");pe(t===cf||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Q0;class Vt{static set __childrenNodeConstructor(e){Q0=e}static get __childrenNodeConstructor(){return Q0}constructor(e,n=Vt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,pe(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),R_(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Vt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Vt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ve(e)?this:Ue(e)===".priority"?this.priorityNode_:Vt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Vt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Ue(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(pe(r!==".priority"||Ns(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Vt.__childrenNodeConstructor.EMPTY_NODE.updateChild(dt(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+N_(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=a_(this.value_):e+=this.value_,this.lazyHash_=o_(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Vt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Vt.__childrenNodeConstructor?-1:(pe(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=Vt.VALUE_TYPE_ORDER.indexOf(n),i=Vt.VALUE_TYPE_ORDER.indexOf(r);return pe(s>=0,"Unknown leaf type: "+n),pe(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Vt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let A_,P_;function hk(t){A_=t}function fk(t){P_=t}class pk extends Bu{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?xi(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return $e.MIN}maxPost(){return new $e(di,new Vt("[PRIORITY-POST]",P_))}makePost(e,n){const r=A_(e);return new $e(n,new Vt("[PRIORITY-POST]",r))}toString(){return".priority"}}const jt=new pk;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk=Math.log(2);class mk{constructor(e){const n=i=>parseInt(Math.log(i)/gk,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const nu=function(t,e,n,r){t.sort(e);const s=function(u,d){const p=d-u;let f,m;if(p===0)return null;if(p===1)return f=t[u],m=n?n(f):f,new Kt(m,f.node,Kt.BLACK,null,null);{const k=parseInt(p/2,10)+u,_=s(u,k),N=s(k+1,d);return f=t[k],m=n?n(f):f,new Kt(m,f.node,Kt.BLACK,_,N)}},i=function(u){let d=null,p=null,f=t.length;const m=function(_,N){const A=f-_,b=f;f-=_;const w=s(A+1,b),v=t[A],R=n?n(v):v;k(new Kt(R,v.node,N,null,w))},k=function(_){d?(d.left=_,d=_):(p=_,d=_)};for(let _=0;_<u.count;++_){const N=u.nextBitIsOne(),A=Math.pow(2,u.count-(_+1));N?m(A,Kt.BLACK):(m(A,Kt.BLACK),m(A,Kt.RED))}return p},o=new mk(t.length),c=i(o);return new _n(r||e,c)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kd;const Ii={};class Mr{static get Default(){return pe(Ii&&jt,"ChildrenNode.ts has not been loaded"),Kd=Kd||new Mr({".priority":Ii},{".priority":jt}),Kd}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=lo(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof _n?n:null}hasIndex(e){return Cr(this.indexSet_,e.toString())}addIndex(e,n){pe(e!==Yi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator($e.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let c;s?c=nu(r,e.getCompare()):c=Ii;const u=e.toString(),d={...this.indexSet_};d[u]=e;const p={...this.indexes_};return p[u]=c,new Mr(p,d)}addToIndexes(e,n){const r=Zc(this.indexes_,(s,i)=>{const o=lo(this.indexSet_,i);if(pe(o,"Missing index implementation for "+i),s===Ii)if(o.isDefinedOn(e.node)){const c=[],u=n.getIterator($e.Wrap);let d=u.getNext();for(;d;)d.name!==e.name&&c.push(d),d=u.getNext();return c.push(e),nu(c,o.getCompare())}else return Ii;else{const c=n.get(e.name);let u=s;return c&&(u=u.remove(new $e(e.name,c))),u.insert(e,e.node)}});return new Mr(r,this.indexSet_)}removeFromIndexes(e,n){const r=Zc(this.indexes_,s=>{if(s===Ii)return s;{const i=n.get(e.name);return i?s.remove(new $e(e.name,i)):s}});return new Mr(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yo;class ke{static get EMPTY_NODE(){return Yo||(Yo=new ke(new _n(Lp),null,Mr.Default))}constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&R_(this.priorityNode_),this.children_.isEmpty()&&pe(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Yo}updatePriority(e){return this.children_.isEmpty()?this:new ke(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Yo:n}}getChild(e){const n=Ue(e);return n===null?this:this.getImmediateChild(n).getChild(dt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(pe(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new $e(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?Yo:this.priorityNode_;return new ke(s,o,i)}}updateChild(e,n){const r=Ue(e);if(r===null)return n;{pe(Ue(e)!==".priority"||Ns(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(dt(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(jt,(o,c)=>{n[o]=c.val(e),r++,i&&ke.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const c in n)o[c]=n[c];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+N_(this.getPriority().val())+":"),this.forEachChild(jt,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":o_(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new $e(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new $e(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new $e(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,$e.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,$e.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===pa?-1:0}withIndex(e){if(e===Yi||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ke(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Yi||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(jt),s=n.getIterator(jt);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Yi?null:this.indexMap_.get(e.toString())}}ke.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class yk extends ke{constructor(){super(new _n(Lp),ke.EMPTY_NODE,Mr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ke.EMPTY_NODE}isEmpty(){return!1}}const pa=new yk;Object.defineProperties($e,{MIN:{value:new $e(co,ke.EMPTY_NODE)},MAX:{value:new $e(di,pa)}});T_.__EMPTY_NODE=ke.EMPTY_NODE;Vt.__childrenNodeConstructor=ke;dk(pa);fk(pa);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk=!0;function zt(t,e=null){if(t===null)return ke.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),pe(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Vt(n,zt(e))}if(!(t instanceof Array)&&xk){const n=[];let r=!1;if(tn(t,(o,c)=>{if(o.substring(0,1)!=="."){const u=zt(c);u.isEmpty()||(r=r||!u.getPriority().isEmpty(),n.push(new $e(o,u)))}}),n.length===0)return ke.EMPTY_NODE;const i=nu(n,uk,o=>o.name,Lp);if(r){const o=nu(n,jt.getCompare());return new ke(i,zt(e),new Mr({".priority":o},{".priority":jt}))}else return new ke(i,zt(e),Mr.Default)}else{let n=ke.EMPTY_NODE;return tn(t,(r,s)=>{if(Cr(t,r)&&r.substring(0,1)!=="."){const i=zt(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(zt(e))}}hk(zt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk extends Bu{constructor(e){super(),this.indexPath_=e,pe(!Ve(e)&&Ue(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?xi(e.name,n.name):i}makePost(e,n){const r=zt(e),s=ke.EMPTY_NODE.updateChild(this.indexPath_,r);return new $e(n,s)}maxPost(){const e=ke.EMPTY_NODE.updateChild(this.indexPath_,pa);return new $e(di,e)}toString(){return Vl(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k extends Bu{compare(e,n){const r=e.node.compareTo(n.node);return r===0?xi(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return $e.MIN}maxPost(){return $e.MAX}makePost(e,n){const r=zt(e);return new $e(n,r)}toString(){return".value"}}const wk=new _k;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(t){return{type:"value",snapshotNode:t}}function uo(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Hl(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Kl(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Sk(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){pe(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const c=e.getImmediateChild(n);return c.getChild(s).equals(r.getChild(s))&&c.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Hl(n,c)):pe(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):c.isEmpty()?o.trackChildChange(uo(n,r)):o.trackChildChange(Kl(n,r,c))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(jt,(s,i)=>{n.hasChild(s)||r.trackChildChange(Hl(s,i))}),n.isLeafNode()||n.forEachChild(jt,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(Kl(s,i,o))}else r.trackChildChange(uo(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?ke.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e){this.indexedFilter_=new Fp(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Gl.getStartPost_(e),this.endPost_=Gl.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new $e(n,r))||(r=ke.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=ke.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(ke.EMPTY_NODE);const i=this;return n.forEachChild(jt,(o,c)=>{i.matches(new $e(o,c))||(s=s.updateImmediateChild(o,ke.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Gl(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new $e(n,r))||(r=ke.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=ke.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=ke.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const c=i.getNext();if(this.withinDirectionalStart(c))if(this.withinDirectionalEnd(c))s=s.updateImmediateChild(c.name,c.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(ke.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const c=i.getNext();o<this.limit_&&this.withinDirectionalStart(c)&&this.withinDirectionalEnd(c)?o++:s=s.updateImmediateChild(c.name,ke.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const f=this.index_.getCompare();o=(m,k)=>f(k,m)}else o=this.index_.getCompare();const c=e;pe(c.numChildren()===this.limit_,"");const u=new $e(n,r),d=this.reverse_?c.getFirstChild(this.index_):c.getLastChild(this.index_),p=this.rangedFilter_.matches(u);if(c.hasChild(n)){const f=c.getImmediateChild(n);let m=s.getChildAfterChild(this.index_,d,this.reverse_);for(;m!=null&&(m.name===n||c.hasChild(m.name));)m=s.getChildAfterChild(this.index_,m,this.reverse_);const k=m==null?1:o(m,u);if(p&&!r.isEmpty()&&k>=0)return i!=null&&i.trackChildChange(Kl(n,r,f)),c.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(Hl(n,f));const N=c.updateImmediateChild(n,ke.EMPTY_NODE);return m!=null&&this.rangedFilter_.matches(m)?(i!=null&&i.trackChildChange(uo(m.name,m.node)),N.updateImmediateChild(m.name,m.node)):N}}else return r.isEmpty()?e:p&&o(d,u)>=0?(i!=null&&(i.trackChildChange(Hl(d.name,d.node)),i.trackChildChange(uo(n,r))),c.updateImmediateChild(n,r).updateImmediateChild(d.name,ke.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=jt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return pe(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return pe(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:co}hasEnd(){return this.endSet_}getIndexEndValue(){return pe(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return pe(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:di}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return pe(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===jt}copy(){const e=new zp;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Ek(t){return t.loadsAllData()?new Fp(t.getIndex()):t.hasLimit()?new bk(t):new Gl(t)}function J0(t){const e={};if(t.isDefault())return e;let n;if(t.index_===jt?n="$priority":t.index_===wk?n="$value":t.index_===Yi?n="$key":(pe(t.index_ instanceof vk,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Bt(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Bt(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Bt(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Bt(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Bt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function X0(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==jt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru extends C_{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(pe(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=fa("p:rest:"),this.listens_={}}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=ru.getListenId_(e,r),c={};this.listens_[o]=c;const u=J0(e._queryParams);this.restRequest_(i+".json",u,(d,p)=>{let f=p;if(d===404&&(f=null,d=null),d===null&&this.onDataUpdate_(i,f,!1,r),lo(this.listens_,o)===c){let m;d?d===401?m="permission_denied":m="rest_error:"+d:m="ok",s(m,null)}})}unlisten(e,n){const r=ru.getListenId_(e,n);delete this.listens_[r]}get(e){const n=J0(e._queryParams),r=e._path.toString(),s=new da;return this.restRequest_(r+".json",n,(i,o)=>{let c=o;i===404&&(c=null,i=null),i===null?(this.onDataUpdate_(r,c,!1,null),s.resolve(c)):s.reject(new Error(c))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+XI(n);this.log_("Sending REST request for "+o);const c=new XMLHttpRequest;c.onreadystatechange=()=>{if(r&&c.readyState===4){this.log_("REST Response for "+o+" received. status:",c.status,"response:",c.responseText);let u=null;if(c.status>=200&&c.status<300){try{u=Fl(c.responseText)}catch{fn("Failed to parse JSON response for "+o+": "+c.responseText)}r(null,u)}else c.status!==401&&c.status!==404&&fn("Got unsuccessful REST response for "+o+" Status: "+c.status),r(c.status);r=null}},c.open("GET",o,!0),c.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(){this.rootNode_=ke.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function su(){return{value:null,children:new Map}}function D_(t,e,n){if(Ve(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Ue(e);t.children.has(r)||t.children.set(r,su());const s=t.children.get(r);e=dt(e),D_(s,e,n)}}function uf(t,e,n){t.value!==null?n(e,t.value):Ik(t,(r,s)=>{const i=new at(e.toString()+"/"+r);uf(s,i,n)})}function Ik(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&tn(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0=10*1e3,kk=30*1e3,Tk=5*60*1e3;class Nk{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new jk(e);const r=Z0+(kk-Z0)*Math.random();fl(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;tn(e,(s,i)=>{i>0&&Cr(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),fl(this.reportStats_.bind(this),Math.floor(Math.random()*2*Tk))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rr;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(rr||(rr={}));function Bp(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Up(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function $p(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=rr.ACK_USER_WRITE,this.source=Bp()}operationForChild(e){if(Ve(this.path)){if(this.affectedTree.value!=null)return pe(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new at(e));return new iu(nt(),n,this.revert)}}else return pe(Ue(this.path)===e,"operationForChild called for unrelated child."),new iu(dt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,n){this.source=e,this.path=n,this.type=rr.LISTEN_COMPLETE}operationForChild(e){return Ve(this.path)?new ql(this.source,nt()):new ql(this.source,dt(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=rr.OVERWRITE}operationForChild(e){return Ve(this.path)?new hi(this.source,nt(),this.snap.getImmediateChild(e)):new hi(this.source,dt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=rr.MERGE}operationForChild(e){if(Ve(this.path)){const n=this.children.subtree(new at(e));return n.isEmpty()?null:n.value?new hi(this.source,nt(),n.value):new ho(this.source,nt(),n)}else return pe(Ue(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ho(this.source,dt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ve(e))return this.isFullyInitialized()&&!this.filtered_;const n=Ue(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Ak(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(Sk(o.childName,o.snapshotNode))}),Qo(t,s,"child_removed",e,r,n),Qo(t,s,"child_added",e,r,n),Qo(t,s,"child_moved",i,r,n),Qo(t,s,"child_changed",e,r,n),Qo(t,s,"value",e,r,n),s}function Qo(t,e,n,r,s,i){const o=r.filter(c=>c.type===n);o.sort((c,u)=>Ok(t,c,u)),o.forEach(c=>{const u=Pk(t,c,i);s.forEach(d=>{d.respondsTo(c.type)&&e.push(d.createEvent(u,t.query_))})})}function Pk(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Ok(t,e,n){if(e.childName==null||n.childName==null)throw bo("Should only compare child_ events.");const r=new $e(e.childName,e.snapshotNode),s=new $e(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uu(t,e){return{eventCache:t,serverCache:e}}function pl(t,e,n,r){return Uu(new Rs(e,n,r),t.serverCache)}function M_(t,e,n,r){return Uu(t.eventCache,new Rs(e,n,r))}function ou(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function fi(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gd;const Dk=()=>(Gd||(Gd=new _n(vj)),Gd);class ut{static fromObject(e){let n=new ut(null);return tn(e,(r,s)=>{n=n.set(new at(r),s)}),n}constructor(e,n=Dk()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:nt(),value:this.value};if(Ve(e))return null;{const r=Ue(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(dt(e),n);return i!=null?{path:It(new at(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ve(e))return this;{const n=Ue(e),r=this.children.get(n);return r!==null?r.subtree(dt(e)):new ut(null)}}set(e,n){if(Ve(e))return new ut(n,this.children);{const r=Ue(e),i=(this.children.get(r)||new ut(null)).set(dt(e),n),o=this.children.insert(r,i);return new ut(this.value,o)}}remove(e){if(Ve(e))return this.children.isEmpty()?new ut(null):new ut(null,this.children);{const n=Ue(e),r=this.children.get(n);if(r){const s=r.remove(dt(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new ut(null):new ut(this.value,i)}else return this}}get(e){if(Ve(e))return this.value;{const n=Ue(e),r=this.children.get(n);return r?r.get(dt(e)):null}}setTree(e,n){if(Ve(e))return n;{const r=Ue(e),i=(this.children.get(r)||new ut(null)).setTree(dt(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new ut(this.value,o)}}fold(e){return this.fold_(nt(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(It(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,nt(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(Ve(e))return null;{const i=Ue(e),o=this.children.get(i);return o?o.findOnPath_(dt(e),It(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,nt(),n)}foreachOnPath_(e,n,r){if(Ve(e))return this;{this.value&&r(n,this.value);const s=Ue(e),i=this.children.get(s);return i?i.foreachOnPath_(dt(e),It(n,s),r):new ut(null)}}foreach(e){this.foreach_(nt(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(It(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e){this.writeTree_=e}static empty(){return new lr(new ut(null))}}function gl(t,e,n){if(Ve(e))return new lr(new ut(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=dn(s,e);return i=i.updateChild(o,n),new lr(t.writeTree_.set(s,i))}else{const s=new ut(n),i=t.writeTree_.setTree(e,s);return new lr(i)}}}function df(t,e,n){let r=t;return tn(n,(s,i)=>{r=gl(r,It(e,s),i)}),r}function ey(t,e){if(Ve(e))return lr.empty();{const n=t.writeTree_.setTree(e,new ut(null));return new lr(n)}}function hf(t,e){return vi(t,e)!=null}function vi(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(dn(n.path,e)):null}function ty(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(jt,(r,s)=>{e.push(new $e(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new $e(r,s.value))}),e}function Is(t,e){if(Ve(e))return t;{const n=vi(t,e);return n!=null?new lr(new ut(n)):new lr(t.writeTree_.subtree(e))}}function ff(t){return t.writeTree_.isEmpty()}function fo(t,e){return L_(nt(),t.writeTree_,e)}function L_(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(pe(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=L_(It(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(It(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $u(t,e){return U_(e,t)}function Mk(t,e,n,r,s){pe(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=gl(t.visibleWrites,e,n)),t.lastWriteId=r}function Lk(t,e,n,r){pe(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=df(t.visibleWrites,e,n),t.lastWriteId=r}function Fk(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function zk(t,e){const n=t.allWrites.findIndex(c=>c.writeId===e);pe(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const c=t.allWrites[o];c.visible&&(o>=n&&Bk(c,r.path)?s=!1:Un(r.path,c.path)&&(i=!0)),o--}if(s){if(i)return Uk(t),!0;if(r.snap)t.visibleWrites=ey(t.visibleWrites,r.path);else{const c=r.children;tn(c,u=>{t.visibleWrites=ey(t.visibleWrites,It(r.path,u))})}return!0}else return!1}function Bk(t,e){if(t.snap)return Un(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Un(It(t.path,n),e))return!0;return!1}function Uk(t){t.visibleWrites=F_(t.allWrites,$k,nt()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function $k(t){return t.visible}function F_(t,e,n){let r=lr.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let c;if(i.snap)Un(n,o)?(c=dn(n,o),r=gl(r,c,i.snap)):Un(o,n)&&(c=dn(o,n),r=gl(r,nt(),i.snap.getChild(c)));else if(i.children){if(Un(n,o))c=dn(n,o),r=df(r,c,i.children);else if(Un(o,n))if(c=dn(o,n),Ve(c))r=df(r,nt(),i.children);else{const u=lo(i.children,Ue(c));if(u){const d=u.getChild(dt(c));r=gl(r,nt(),d)}}}else throw bo("WriteRecord should have .snap or .children")}}return r}function z_(t,e,n,r,s){if(!r&&!s){const i=vi(t.visibleWrites,e);if(i!=null)return i;{const o=Is(t.visibleWrites,e);if(ff(o))return n;if(n==null&&!hf(o,nt()))return null;{const c=n||ke.EMPTY_NODE;return fo(o,c)}}}else{const i=Is(t.visibleWrites,e);if(!s&&ff(i))return n;if(!s&&n==null&&!hf(i,nt()))return null;{const o=function(d){return(d.visible||s)&&(!r||!~r.indexOf(d.writeId))&&(Un(d.path,e)||Un(e,d.path))},c=F_(t.allWrites,o,e),u=n||ke.EMPTY_NODE;return fo(c,u)}}}function Wk(t,e,n){let r=ke.EMPTY_NODE;const s=vi(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(jt,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=Is(t.visibleWrites,e);return n.forEachChild(jt,(o,c)=>{const u=fo(Is(i,new at(o)),c);r=r.updateImmediateChild(o,u)}),ty(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=Is(t.visibleWrites,e);return ty(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function Vk(t,e,n,r,s){pe(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=It(e,n);if(hf(t.visibleWrites,i))return null;{const o=Is(t.visibleWrites,i);return ff(o)?s.getChild(n):fo(o,s.getChild(n))}}function Hk(t,e,n,r){const s=It(e,n),i=vi(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=Is(t.visibleWrites,s);return fo(o,r.getNode().getImmediateChild(n))}else return null}function Kk(t,e){return vi(t.visibleWrites,e)}function Gk(t,e,n,r,s,i,o){let c;const u=Is(t.visibleWrites,e),d=vi(u,nt());if(d!=null)c=d;else if(n!=null)c=fo(u,n);else return[];if(c=c.withIndex(o),!c.isEmpty()&&!c.isLeafNode()){const p=[],f=o.getCompare(),m=i?c.getReverseIteratorFrom(r,o):c.getIteratorFrom(r,o);let k=m.getNext();for(;k&&p.length<s;)f(k,r)!==0&&p.push(k),k=m.getNext();return p}else return[]}function qk(){return{visibleWrites:lr.empty(),allWrites:[],lastWriteId:-1}}function lu(t,e,n,r){return z_(t.writeTree,t.treePath,e,n,r)}function Wp(t,e){return Wk(t.writeTree,t.treePath,e)}function ny(t,e,n,r){return Vk(t.writeTree,t.treePath,e,n,r)}function au(t,e){return Kk(t.writeTree,It(t.treePath,e))}function Yk(t,e,n,r,s,i){return Gk(t.writeTree,t.treePath,e,n,r,s,i)}function Vp(t,e,n){return Hk(t.writeTree,t.treePath,e,n)}function B_(t,e){return U_(It(t.treePath,e),t.writeTree)}function U_(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;pe(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),pe(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,Kl(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,Hl(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,uo(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,Kl(r,e.snapshotNode,s.oldSnap));else throw bo("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const $_=new Jk;class Hp{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Rs(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Vp(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:fi(this.viewCache_),i=Yk(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xk(t){return{filter:t}}function Zk(t,e){pe(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),pe(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function e3(t,e,n,r,s){const i=new Qk;let o,c;if(n.type===rr.OVERWRITE){const d=n;d.source.fromUser?o=pf(t,e,d.path,d.snap,r,s,i):(pe(d.source.fromServer,"Unknown source."),c=d.source.tagged||e.serverCache.isFiltered()&&!Ve(d.path),o=cu(t,e,d.path,d.snap,r,s,c,i))}else if(n.type===rr.MERGE){const d=n;d.source.fromUser?o=n3(t,e,d.path,d.children,r,s,i):(pe(d.source.fromServer,"Unknown source."),c=d.source.tagged||e.serverCache.isFiltered(),o=gf(t,e,d.path,d.children,r,s,c,i))}else if(n.type===rr.ACK_USER_WRITE){const d=n;d.revert?o=i3(t,e,d.path,r,s,i):o=r3(t,e,d.path,d.affectedTree,r,s,i)}else if(n.type===rr.LISTEN_COMPLETE)o=s3(t,e,n.path,r,i);else throw bo("Unknown operation type: "+n.type);const u=i.getChanges();return t3(e,o,u),{viewCache:o,changes:u}}function t3(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=ou(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(O_(ou(e)))}}function W_(t,e,n,r,s,i){const o=e.eventCache;if(au(r,n)!=null)return e;{let c,u;if(Ve(n))if(pe(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const d=fi(e),p=d instanceof ke?d:ke.EMPTY_NODE,f=Wp(r,p);c=t.filter.updateFullNode(e.eventCache.getNode(),f,i)}else{const d=lu(r,fi(e));c=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const d=Ue(n);if(d===".priority"){pe(Ns(n)===1,"Can't have a priority with additional path components");const p=o.getNode();u=e.serverCache.getNode();const f=ny(r,n,p,u);f!=null?c=t.filter.updatePriority(p,f):c=o.getNode()}else{const p=dt(n);let f;if(o.isCompleteForChild(d)){u=e.serverCache.getNode();const m=ny(r,n,o.getNode(),u);m!=null?f=o.getNode().getImmediateChild(d).updateChild(p,m):f=o.getNode().getImmediateChild(d)}else f=Vp(r,d,e.serverCache);f!=null?c=t.filter.updateChild(o.getNode(),d,f,p,s,i):c=o.getNode()}}return pl(e,c,o.isFullyInitialized()||Ve(n),t.filter.filtersNodes())}}function cu(t,e,n,r,s,i,o,c){const u=e.serverCache;let d;const p=o?t.filter:t.filter.getIndexedFilter();if(Ve(n))d=p.updateFullNode(u.getNode(),r,null);else if(p.filtersNodes()&&!u.isFiltered()){const k=u.getNode().updateChild(n,r);d=p.updateFullNode(u.getNode(),k,null)}else{const k=Ue(n);if(!u.isCompleteForPath(n)&&Ns(n)>1)return e;const _=dt(n),A=u.getNode().getImmediateChild(k).updateChild(_,r);k===".priority"?d=p.updatePriority(u.getNode(),A):d=p.updateChild(u.getNode(),k,A,_,$_,null)}const f=M_(e,d,u.isFullyInitialized()||Ve(n),p.filtersNodes()),m=new Hp(s,f,i);return W_(t,f,n,s,m,c)}function pf(t,e,n,r,s,i,o){const c=e.eventCache;let u,d;const p=new Hp(s,e,i);if(Ve(n))d=t.filter.updateFullNode(e.eventCache.getNode(),r,o),u=pl(e,d,!0,t.filter.filtersNodes());else{const f=Ue(n);if(f===".priority")d=t.filter.updatePriority(e.eventCache.getNode(),r),u=pl(e,d,c.isFullyInitialized(),c.isFiltered());else{const m=dt(n),k=c.getNode().getImmediateChild(f);let _;if(Ve(m))_=r;else{const N=p.getCompleteChild(f);N!=null?Op(m)===".priority"&&N.getChild(j_(m)).isEmpty()?_=N:_=N.updateChild(m,r):_=ke.EMPTY_NODE}if(k.equals(_))u=e;else{const N=t.filter.updateChild(c.getNode(),f,_,m,p,o);u=pl(e,N,c.isFullyInitialized(),t.filter.filtersNodes())}}}return u}function ry(t,e){return t.eventCache.isCompleteForChild(e)}function n3(t,e,n,r,s,i,o){let c=e;return r.foreach((u,d)=>{const p=It(n,u);ry(e,Ue(p))&&(c=pf(t,c,p,d,s,i,o))}),r.foreach((u,d)=>{const p=It(n,u);ry(e,Ue(p))||(c=pf(t,c,p,d,s,i,o))}),c}function sy(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function gf(t,e,n,r,s,i,o,c){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u=e,d;Ve(n)?d=r:d=new ut(null).setTree(n,r);const p=e.serverCache.getNode();return d.children.inorderTraversal((f,m)=>{if(p.hasChild(f)){const k=e.serverCache.getNode().getImmediateChild(f),_=sy(t,k,m);u=cu(t,u,new at(f),_,s,i,o,c)}}),d.children.inorderTraversal((f,m)=>{const k=!e.serverCache.isCompleteForChild(f)&&m.value===null;if(!p.hasChild(f)&&!k){const _=e.serverCache.getNode().getImmediateChild(f),N=sy(t,_,m);u=cu(t,u,new at(f),N,s,i,o,c)}}),u}function r3(t,e,n,r,s,i,o){if(au(s,n)!=null)return e;const c=e.serverCache.isFiltered(),u=e.serverCache;if(r.value!=null){if(Ve(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return cu(t,e,n,u.getNode().getChild(n),s,i,c,o);if(Ve(n)){let d=new ut(null);return u.getNode().forEachChild(Yi,(p,f)=>{d=d.set(new at(p),f)}),gf(t,e,n,d,s,i,c,o)}else return e}else{let d=new ut(null);return r.foreach((p,f)=>{const m=It(n,p);u.isCompleteForPath(m)&&(d=d.set(p,u.getNode().getChild(m)))}),gf(t,e,n,d,s,i,c,o)}}function s3(t,e,n,r,s){const i=e.serverCache,o=M_(e,i.getNode(),i.isFullyInitialized()||Ve(n),i.isFiltered());return W_(t,o,n,r,$_,s)}function i3(t,e,n,r,s,i){let o;if(au(r,n)!=null)return e;{const c=new Hp(r,e,s),u=e.eventCache.getNode();let d;if(Ve(n)||Ue(n)===".priority"){let p;if(e.serverCache.isFullyInitialized())p=lu(r,fi(e));else{const f=e.serverCache.getNode();pe(f instanceof ke,"serverChildren would be complete if leaf node"),p=Wp(r,f)}p=p,d=t.filter.updateFullNode(u,p,i)}else{const p=Ue(n);let f=Vp(r,p,e.serverCache);f==null&&e.serverCache.isCompleteForChild(p)&&(f=u.getImmediateChild(p)),f!=null?d=t.filter.updateChild(u,p,f,dt(n),c,i):e.eventCache.getNode().hasChild(p)?d=t.filter.updateChild(u,p,ke.EMPTY_NODE,dt(n),c,i):d=u,d.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=lu(r,fi(e)),o.isLeafNode()&&(d=t.filter.updateFullNode(d,o,i)))}return o=e.serverCache.isFullyInitialized()||au(r,nt())!=null,pl(e,d,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new Fp(r.getIndex()),i=Ek(r);this.processor_=Xk(i);const o=n.serverCache,c=n.eventCache,u=s.updateFullNode(ke.EMPTY_NODE,o.getNode(),null),d=i.updateFullNode(ke.EMPTY_NODE,c.getNode(),null),p=new Rs(u,o.isFullyInitialized(),s.filtersNodes()),f=new Rs(d,c.isFullyInitialized(),i.filtersNodes());this.viewCache_=Uu(f,p),this.eventGenerator_=new Rk(this.query_)}get query(){return this.query_}}function l3(t){return t.viewCache_.serverCache.getNode()}function a3(t){return ou(t.viewCache_)}function c3(t,e){const n=fi(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Ve(e)&&!n.getImmediateChild(Ue(e)).isEmpty())?n.getChild(e):null}function iy(t){return t.eventRegistrations_.length===0}function u3(t,e){t.eventRegistrations_.push(e)}function oy(t,e,n){const r=[];if(n){pe(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function ly(t,e,n,r){e.type===rr.MERGE&&e.source.queryId!==null&&(pe(fi(t.viewCache_),"We should always have a full cache before handling merges"),pe(ou(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=e3(t.processor_,s,e,n,r);return Zk(t.processor_,i.viewCache),pe(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,V_(t,i.changes,i.viewCache.eventCache.getNode(),null)}function d3(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(jt,(i,o)=>{r.push(uo(i,o))}),n.isFullyInitialized()&&r.push(O_(n.getNode())),V_(t,r,n.getNode(),e)}function V_(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return Ak(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uu;class H_{constructor(){this.views=new Map}}function h3(t){pe(!uu,"__referenceConstructor has already been defined"),uu=t}function f3(){return pe(uu,"Reference.ts has not been loaded"),uu}function p3(t){return t.views.size===0}function Kp(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return pe(i!=null,"SyncTree gave us an op for an invalid query."),ly(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(ly(o,e,n,r));return i}}function K_(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let c=lu(n,s?r:null),u=!1;c?u=!0:r instanceof ke?(c=Wp(n,r),u=!1):(c=ke.EMPTY_NODE,u=!1);const d=Uu(new Rs(c,u,!1),new Rs(r,s,!1));return new o3(e,d)}return o}function g3(t,e,n,r,s,i){const o=K_(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),u3(o,n),d3(o,n)}function m3(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const c=As(t);if(s==="default")for(const[u,d]of t.views.entries())o=o.concat(oy(d,n,r)),iy(d)&&(t.views.delete(u),d.query._queryParams.loadsAllData()||i.push(d.query));else{const u=t.views.get(s);u&&(o=o.concat(oy(u,n,r)),iy(u)&&(t.views.delete(s),u.query._queryParams.loadsAllData()||i.push(u.query)))}return c&&!As(t)&&i.push(new(f3())(e._repo,e._path)),{removed:i,events:o}}function G_(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function js(t,e){let n=null;for(const r of t.views.values())n=n||c3(r,e);return n}function q_(t,e){if(e._queryParams.loadsAllData())return Wu(t);{const r=e._queryIdentifier;return t.views.get(r)}}function Y_(t,e){return q_(t,e)!=null}function As(t){return Wu(t)!=null}function Wu(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let du;function y3(t){pe(!du,"__referenceConstructor has already been defined"),du=t}function x3(){return pe(du,"Reference.ts has not been loaded"),du}let v3=1;class ay{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ut(null),this.pendingWriteTree_=qk(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Q_(t,e,n,r,s){return Mk(t.pendingWriteTree_,e,n,r,s),s?Io(t,new hi(Bp(),e,n)):[]}function _3(t,e,n,r){Lk(t.pendingWriteTree_,e,n,r);const s=ut.fromObject(n);return Io(t,new ho(Bp(),e,s))}function ps(t,e,n=!1){const r=Fk(t.pendingWriteTree_,e);if(zk(t.pendingWriteTree_,e)){let i=new ut(null);return r.snap!=null?i=i.set(nt(),!0):tn(r.children,o=>{i=i.set(new at(o),!0)}),Io(t,new iu(r.path,i,n))}else return[]}function ga(t,e,n){return Io(t,new hi(Up(),e,n))}function w3(t,e,n){const r=ut.fromObject(n);return Io(t,new ho(Up(),e,r))}function S3(t,e){return Io(t,new ql(Up(),e))}function b3(t,e,n){const r=qp(t,n);if(r){const s=Yp(r),i=s.path,o=s.queryId,c=dn(i,e),u=new ql($p(o),c);return Qp(t,i,u)}else return[]}function hu(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let c=[];if(o&&(e._queryIdentifier==="default"||Y_(o,e))){const u=m3(o,e,n,r);p3(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const d=u.removed;if(c=u.events,!s){const p=d.findIndex(m=>m._queryParams.loadsAllData())!==-1,f=t.syncPointTree_.findOnPath(i,(m,k)=>As(k));if(p&&!f){const m=t.syncPointTree_.subtree(i);if(!m.isEmpty()){const k=I3(m);for(let _=0;_<k.length;++_){const N=k[_],A=N.query,b=ew(t,N);t.listenProvider_.startListening(ml(A),Yl(t,A),b.hashFn,b.onComplete)}}}!f&&d.length>0&&!r&&(p?t.listenProvider_.stopListening(ml(e),null):d.forEach(m=>{const k=t.queryToTagMap.get(Vu(m));t.listenProvider_.stopListening(ml(m),k)}))}j3(t,d)}return c}function J_(t,e,n,r){const s=qp(t,r);if(s!=null){const i=Yp(s),o=i.path,c=i.queryId,u=dn(o,e),d=new hi($p(c),u,n);return Qp(t,o,d)}else return[]}function E3(t,e,n,r){const s=qp(t,r);if(s){const i=Yp(s),o=i.path,c=i.queryId,u=dn(o,e),d=ut.fromObject(n),p=new ho($p(c),u,d);return Qp(t,o,p)}else return[]}function mf(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(m,k)=>{const _=dn(m,s);i=i||js(k,_),o=o||As(k)});let c=t.syncPointTree_.get(s);c?(o=o||As(c),i=i||js(c,nt())):(c=new H_,t.syncPointTree_=t.syncPointTree_.set(s,c));let u;i!=null?u=!0:(u=!1,i=ke.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((k,_)=>{const N=js(_,nt());N&&(i=i.updateImmediateChild(k,N))}));const d=Y_(c,e);if(!d&&!e._queryParams.loadsAllData()){const m=Vu(e);pe(!t.queryToTagMap.has(m),"View does not exist, but we have a tag");const k=k3();t.queryToTagMap.set(m,k),t.tagToQueryMap.set(k,m)}const p=$u(t.pendingWriteTree_,s);let f=g3(c,e,n,p,i,u);if(!d&&!o&&!r){const m=q_(c,e);f=f.concat(T3(t,e,m))}return f}function Gp(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,c)=>{const u=dn(o,e),d=js(c,u);if(d)return d});return z_(s,e,i,n,!0)}function C3(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(d,p)=>{const f=dn(d,n);r=r||js(p,f)});let s=t.syncPointTree_.get(n);s?r=r||js(s,nt()):(s=new H_,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new Rs(r,!0,!1):null,c=$u(t.pendingWriteTree_,e._path),u=K_(s,e,c,i?o.getNode():ke.EMPTY_NODE,i);return a3(u)}function Io(t,e){return X_(e,t.syncPointTree_,null,$u(t.pendingWriteTree_,nt()))}function X_(t,e,n,r){if(Ve(t.path))return Z_(t,e,n,r);{const s=e.get(nt());n==null&&s!=null&&(n=js(s,nt()));let i=[];const o=Ue(t.path),c=t.operationForChild(o),u=e.children.get(o);if(u&&c){const d=n?n.getImmediateChild(o):null,p=B_(r,o);i=i.concat(X_(c,u,d,p))}return s&&(i=i.concat(Kp(s,t,r,n))),i}}function Z_(t,e,n,r){const s=e.get(nt());n==null&&s!=null&&(n=js(s,nt()));let i=[];return e.children.inorderTraversal((o,c)=>{const u=n?n.getImmediateChild(o):null,d=B_(r,o),p=t.operationForChild(o);p&&(i=i.concat(Z_(p,c,u,d)))}),s&&(i=i.concat(Kp(s,t,r,n))),i}function ew(t,e){const n=e.query,r=Yl(t,n);return{hashFn:()=>(l3(e)||ke.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?b3(t,n._path,r):S3(t,n._path);{const i=Sj(s,n);return hu(t,n,null,i)}}}}function Yl(t,e){const n=Vu(e);return t.queryToTagMap.get(n)}function Vu(t){return t._path.toString()+"$"+t._queryIdentifier}function qp(t,e){return t.tagToQueryMap.get(e)}function Yp(t){const e=t.indexOf("$");return pe(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new at(t.substr(0,e))}}function Qp(t,e,n){const r=t.syncPointTree_.get(e);pe(r,"Missing sync point for query tag that we're tracking");const s=$u(t.pendingWriteTree_,e);return Kp(r,n,s,null)}function I3(t){return t.fold((e,n,r)=>{if(n&&As(n))return[Wu(n)];{let s=[];return n&&(s=G_(n)),tn(r,(i,o)=>{s=s.concat(o)}),s}})}function ml(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(x3())(t._repo,t._path):t}function j3(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=Vu(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function k3(){return v3++}function T3(t,e,n){const r=e._path,s=Yl(t,e),i=ew(t,n),o=t.listenProvider_.startListening(ml(e),s,i.hashFn,i.onComplete),c=t.syncPointTree_.subtree(r);if(s)pe(!As(c.value),"If we're adding a query, it shouldn't be shadowed");else{const u=c.fold((d,p,f)=>{if(!Ve(d)&&p&&As(p))return[Wu(p).query];{let m=[];return p&&(m=m.concat(G_(p).map(k=>k.query))),tn(f,(k,_)=>{m=m.concat(_)}),m}});for(let d=0;d<u.length;++d){const p=u[d];t.listenProvider_.stopListening(ml(p),Yl(t,p))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Jp(n)}node(){return this.node_}}class Xp{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=It(this.path_,e);return new Xp(this.syncTree_,n)}node(){return Gp(this.syncTree_,this.path_)}}const N3=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},cy=function(t,e,n){if(!t||typeof t!="object")return t;if(pe(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return R3(t[".sv"],e,n);if(typeof t[".sv"]=="object")return A3(t[".sv"],e);pe(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},R3=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:pe(!1,"Unexpected server value: "+t)}},A3=function(t,e,n){t.hasOwnProperty("increment")||pe(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&pe(!1,"Unexpected increment value: "+r);const s=e.node();if(pe(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},tw=function(t,e,n,r){return Zp(e,new Xp(n,t),r)},nw=function(t,e,n){return Zp(t,new Jp(e),n)};function Zp(t,e,n){const r=t.getPriority().val(),s=cy(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,c=cy(o.getValue(),e,n);return c!==o.getValue()||s!==o.getPriority().val()?new Vt(c,zt(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new Vt(s))),o.forEachChild(jt,(c,u)=>{const d=Zp(u,e.getImmediateChild(c),n);d!==u&&(i=i.updateImmediateChild(c,d))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function tg(t,e){let n=e instanceof at?e:new at(e),r=t,s=Ue(n);for(;s!==null;){const i=lo(r.node.children,s)||{children:{},childCount:0};r=new eg(s,r,i),n=dt(n),s=Ue(n)}return r}function jo(t){return t.node.value}function rw(t,e){t.node.value=e,yf(t)}function sw(t){return t.node.childCount>0}function P3(t){return jo(t)===void 0&&!sw(t)}function Hu(t,e){tn(t.node.children,(n,r)=>{e(new eg(n,t,r))})}function iw(t,e,n,r){n&&e(t),Hu(t,s=>{iw(s,e,!0)})}function O3(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function ma(t){return new at(t.parent===null?t.name:ma(t.parent)+"/"+t.name)}function yf(t){t.parent!==null&&D3(t.parent,t.name,t)}function D3(t,e,n){const r=P3(n),s=Cr(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,yf(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,yf(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M3=/[\[\].#$\/\u0000-\u001F\u007F]/,L3=/[\[\].#$\u0000-\u001F\u007F]/,qd=10*1024*1024,ng=function(t){return typeof t=="string"&&t.length!==0&&!M3.test(t)},ow=function(t){return typeof t=="string"&&t.length!==0&&!L3.test(t)},F3=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),ow(t)},z3=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Tp(t)||t&&typeof t=="object"&&Cr(t,".sv")},lw=function(t,e,n,r){r&&e===void 0||Ku(Fu(t,"value"),e,n)},Ku=function(t,e,n){const r=n instanceof at?new nk(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Ks(r));if(typeof e=="function")throw new Error(t+"contains a function "+Ks(r)+" with contents = "+e.toString());if(Tp(e))throw new Error(t+"contains "+e.toString()+" "+Ks(r));if(typeof e=="string"&&e.length>qd/3&&zu(e)>qd)throw new Error(t+"contains a string greater than "+qd+" utf8 bytes "+Ks(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(tn(e,(o,c)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!ng(o)))throw new Error(t+" contains an invalid key ("+o+") "+Ks(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);rk(r,o),Ku(t,c,r),sk(r)}),s&&i)throw new Error(t+' contains ".value" child '+Ks(r)+" in addition to actual children.")}},B3=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const i=Vl(r);for(let o=0;o<i.length;o++)if(!(i[o]===".priority"&&o===i.length-1)){if(!ng(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(tk);let s=null;for(n=0;n<e.length;n++){if(r=e[n],s!==null&&Un(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}},U3=function(t,e,n,r){const s=Fu(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const i=[];tn(e,(o,c)=>{const u=new at(o);if(Ku(s,c,It(n,u)),Op(u)===".priority"&&!z3(c))throw new Error(s+"contains an invalid value for '"+u.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");i.push(u)}),B3(s,i)},aw=function(t,e,n,r){if(!ow(n))throw new Error(Fu(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},$3=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),aw(t,e,n)},cw=function(t,e){if(Ue(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},W3=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!ng(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!F3(n))throw new Error(Fu(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Gu(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!Dp(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function uw(t,e,n){Gu(t,n),dw(t,r=>Dp(r,e))}function Hn(t,e,n){Gu(t,n),dw(t,r=>Un(r,e)||Un(e,r))}function dw(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(H3(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function H3(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();hl&&Jt("event: "+n.toString()),Co(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K3="repo_interrupt",G3=25;class q3{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new V3,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=su(),this.transactionQueueTree_=new eg,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Y3(t,e,n){if(t.stats_=Ap(t.repoInfo_),t.forceRestClient_||Ij())t.server_=new ru(t.repoInfo_,(r,s,i,o)=>{uy(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>dy(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Bt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new zr(t.repoInfo_,e,(r,s,i,o)=>{uy(t,r,s,i,o)},r=>{dy(t,r)},r=>{Q3(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=Rj(t.repoInfo_,()=>new Nk(t.stats_,t.server_)),t.infoData_=new Ck,t.infoSyncTree_=new ay({startListening:(r,s,i,o)=>{let c=[];const u=t.infoData_.getNode(r._path);return u.isEmpty()||(c=ga(t.infoSyncTree_,r._path,u),setTimeout(()=>{o("ok")},0)),c},stopListening:()=>{}}),rg(t,"connected",!1),t.serverSyncTree_=new ay({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(c,u)=>{const d=o(c,u);Hn(t.eventQueue_,r._path,d)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function hw(t){const n=t.infoData_.getNode(new at(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function qu(t){return N3({timestamp:hw(t)})}function uy(t,e,n,r,s){t.dataUpdateCount++;const i=new at(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const u=Zc(n,d=>zt(d));o=E3(t.serverSyncTree_,i,u,s)}else{const u=zt(n);o=J_(t.serverSyncTree_,i,u,s)}else if(r){const u=Zc(n,d=>zt(d));o=w3(t.serverSyncTree_,i,u)}else{const u=zt(n);o=ga(t.serverSyncTree_,i,u)}let c=i;o.length>0&&(c=po(t,i)),Hn(t.eventQueue_,c,o)}function dy(t,e){rg(t,"connected",e),e===!1&&eT(t)}function Q3(t,e){tn(e,(n,r)=>{rg(t,n,r)})}function rg(t,e,n){const r=new at("/.info/"+e),s=zt(n);t.infoData_.updateSnapshot(r,s);const i=ga(t.infoSyncTree_,r,s);Hn(t.eventQueue_,r,i)}function sg(t){return t.nextWriteId_++}function J3(t,e,n){const r=C3(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=zt(s).withIndex(e._queryParams.getIndex());mf(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=ga(t.serverSyncTree_,e._path,i);else{const c=Yl(t.serverSyncTree_,e);o=J_(t.serverSyncTree_,e._path,i,c)}return Hn(t.eventQueue_,e._path,o),hu(t.serverSyncTree_,e,n,null,!0),i},s=>(ya(t,"get for query "+Bt(e)+" failed: "+s),Promise.reject(new Error(s))))}function X3(t,e,n,r,s){ya(t,"set",{path:e.toString(),value:n,priority:r});const i=qu(t),o=zt(n,r),c=Gp(t.serverSyncTree_,e),u=nw(o,c,i),d=sg(t),p=Q_(t.serverSyncTree_,e,u,d,!0);Gu(t.eventQueue_,p),t.server_.put(e.toString(),o.val(!0),(m,k)=>{const _=m==="ok";_||fn("set at "+e+" failed: "+m);const N=ps(t.serverSyncTree_,d,!_);Hn(t.eventQueue_,e,N),xf(t,s,m,k)});const f=og(t,e);po(t,f),Hn(t.eventQueue_,f,[])}function Z3(t,e,n,r){ya(t,"update",{path:e.toString(),value:n});let s=!0;const i=qu(t),o={};if(tn(n,(c,u)=>{s=!1,o[c]=tw(It(e,c),zt(u),t.serverSyncTree_,i)}),s)Jt("update() called with empty data.  Don't do anything."),xf(t,r,"ok",void 0);else{const c=sg(t),u=_3(t.serverSyncTree_,e,o,c);Gu(t.eventQueue_,u),t.server_.merge(e.toString(),n,(d,p)=>{const f=d==="ok";f||fn("update at "+e+" failed: "+d);const m=ps(t.serverSyncTree_,c,!f),k=m.length>0?po(t,e):e;Hn(t.eventQueue_,k,m),xf(t,r,d,p)}),tn(n,d=>{const p=og(t,It(e,d));po(t,p)}),Hn(t.eventQueue_,e,[])}}function eT(t){ya(t,"onDisconnectEvents");const e=qu(t),n=su();uf(t.onDisconnect_,nt(),(s,i)=>{const o=tw(s,i,t.serverSyncTree_,e);D_(n,s,o)});let r=[];uf(n,nt(),(s,i)=>{r=r.concat(ga(t.serverSyncTree_,s,i));const o=og(t,s);po(t,o)}),t.onDisconnect_=su(),Hn(t.eventQueue_,nt(),r)}function tT(t,e,n){let r;Ue(e._path)===".info"?r=mf(t.infoSyncTree_,e,n):r=mf(t.serverSyncTree_,e,n),uw(t.eventQueue_,e._path,r)}function fw(t,e,n){let r;Ue(e._path)===".info"?r=hu(t.infoSyncTree_,e,n):r=hu(t.serverSyncTree_,e,n),uw(t.eventQueue_,e._path,r)}function nT(t){t.persistentConnection_&&t.persistentConnection_.interrupt(K3)}function ya(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Jt(n,...e)}function xf(t,e,n,r){e&&Co(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function pw(t,e,n){return Gp(t.serverSyncTree_,e,n)||ke.EMPTY_NODE}function ig(t,e=t.transactionQueueTree_){if(e||Yu(t,e),jo(e)){const n=mw(t,e);pe(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&rT(t,ma(e),n)}else sw(e)&&Hu(e,n=>{ig(t,n)})}function rT(t,e,n){const r=n.map(d=>d.currentWriteId),s=pw(t,e,r);let i=s;const o=s.hash();for(let d=0;d<n.length;d++){const p=n[d];pe(p.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),p.status=1,p.retryCount++;const f=dn(e,p.path);i=i.updateChild(f,p.currentOutputSnapshotRaw)}const c=i.val(!0),u=e;t.server_.put(u.toString(),c,d=>{ya(t,"transaction put response",{path:u.toString(),status:d});let p=[];if(d==="ok"){const f=[];for(let m=0;m<n.length;m++)n[m].status=2,p=p.concat(ps(t.serverSyncTree_,n[m].currentWriteId)),n[m].onComplete&&f.push(()=>n[m].onComplete(null,!0,n[m].currentOutputSnapshotResolved)),n[m].unwatcher();Yu(t,tg(t.transactionQueueTree_,e)),ig(t,t.transactionQueueTree_),Hn(t.eventQueue_,e,p);for(let m=0;m<f.length;m++)Co(f[m])}else{if(d==="datastale")for(let f=0;f<n.length;f++)n[f].status===3?n[f].status=4:n[f].status=0;else{fn("transaction at "+u.toString()+" failed: "+d);for(let f=0;f<n.length;f++)n[f].status=4,n[f].abortReason=d}po(t,e)}},o)}function po(t,e){const n=gw(t,e),r=ma(n),s=mw(t,n);return sT(t,s,r),r}function sT(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(c=>c.status===0).map(c=>c.currentWriteId);for(let c=0;c<e.length;c++){const u=e[c],d=dn(n,u.path);let p=!1,f;if(pe(d!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===4)p=!0,f=u.abortReason,s=s.concat(ps(t.serverSyncTree_,u.currentWriteId,!0));else if(u.status===0)if(u.retryCount>=G3)p=!0,f="maxretry",s=s.concat(ps(t.serverSyncTree_,u.currentWriteId,!0));else{const m=pw(t,u.path,o);u.currentInputSnapshot=m;const k=e[c].update(m.val());if(k!==void 0){Ku("transaction failed: Data returned ",k,u.path);let _=zt(k);typeof k=="object"&&k!=null&&Cr(k,".priority")||(_=_.updatePriority(m.getPriority()));const A=u.currentWriteId,b=qu(t),w=nw(_,m,b);u.currentOutputSnapshotRaw=_,u.currentOutputSnapshotResolved=w,u.currentWriteId=sg(t),o.splice(o.indexOf(A),1),s=s.concat(Q_(t.serverSyncTree_,u.path,w,u.currentWriteId,u.applyLocally)),s=s.concat(ps(t.serverSyncTree_,A,!0))}else p=!0,f="nodata",s=s.concat(ps(t.serverSyncTree_,u.currentWriteId,!0))}Hn(t.eventQueue_,n,s),s=[],p&&(e[c].status=2,function(m){setTimeout(m,Math.floor(0))}(e[c].unwatcher),e[c].onComplete&&(f==="nodata"?r.push(()=>e[c].onComplete(null,!1,e[c].currentInputSnapshot)):r.push(()=>e[c].onComplete(new Error(f),!1,null))))}Yu(t,t.transactionQueueTree_);for(let c=0;c<r.length;c++)Co(r[c]);ig(t,t.transactionQueueTree_)}function gw(t,e){let n,r=t.transactionQueueTree_;for(n=Ue(e);n!==null&&jo(r)===void 0;)r=tg(r,n),e=dt(e),n=Ue(e);return r}function mw(t,e){const n=[];return yw(t,e,n),n.sort((r,s)=>r.order-s.order),n}function yw(t,e,n){const r=jo(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);Hu(e,s=>{yw(t,s,n)})}function Yu(t,e){const n=jo(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,rw(e,n.length>0?n:void 0)}Hu(e,r=>{Yu(t,r)})}function og(t,e){const n=ma(gw(t,e)),r=tg(t.transactionQueueTree_,e);return O3(r,s=>{Yd(t,s)}),Yd(t,r),iw(r,s=>{Yd(t,s)}),n}function Yd(t,e){const n=jo(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(pe(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(pe(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(ps(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?rw(e,void 0):n.length=i+1,Hn(t.eventQueue_,ma(e),s);for(let o=0;o<r.length;o++)Co(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iT(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function oT(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):fn(`Invalid query segment '${n}' in query '${t}'`)}return e}const hy=function(t,e){const n=lT(t),r=n.namespace;n.domain==="firebase.com"&&Kr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Kr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||yj();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new x_(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new at(n.pathString)}},lT=function(t){let e="",n="",r="",s="",i="",o=!0,c="https",u=443;if(typeof t=="string"){let d=t.indexOf("//");d>=0&&(c=t.substring(0,d-1),t=t.substring(d+2));let p=t.indexOf("/");p===-1&&(p=t.length);let f=t.indexOf("?");f===-1&&(f=t.length),e=t.substring(0,Math.min(p,f)),p<f&&(s=iT(t.substring(p,f)));const m=oT(t.substring(Math.min(t.length,f)));d=e.indexOf(":"),d>=0?(o=c==="https"||c==="wss",u=parseInt(e.substring(d+1),10)):d=e.length;const k=e.slice(0,d);if(k.toLowerCase()==="localhost")n="localhost";else if(k.split(".").length<=2)n=k;else{const _=e.indexOf(".");r=e.substring(0,_).toLowerCase(),n=e.substring(_+1),i=r}"ns"in m&&(i=m.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:o,scheme:c,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fy="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",aT=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let s;const i=new Array(8);for(s=7;s>=0;s--)i[s]=fy.charAt(n%64),n=Math.floor(n/64);pe(n===0,"Cannot push at time == 0");let o=i.join("");if(r){for(s=11;s>=0&&e[s]===63;s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(Math.random()*64);for(s=0;s<12;s++)o+=fy.charAt(e[s]);return pe(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Bt(this.snapshot.exportVal())}}class uT{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return pe(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return Ve(this._path)?null:Op(this._path)}get ref(){return new es(this._repo,this._path)}get _queryIdentifier(){const e=X0(this._queryParams),n=Np(e);return n==="{}"?"default":n}get _queryObject(){return X0(this._queryParams)}isEqual(e){if(e=yi(e),!(e instanceof lg))return!1;const n=this._repo===e._repo,r=Dp(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+ek(this._path)}}class es extends lg{constructor(e,n){super(e,n,new zp,!1)}get parent(){const e=j_(this._path);return e===null?null:new es(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Ql{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new at(e),r=Jl(this.ref,e);return new Ql(this._node.getChild(n),r,jt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new Ql(s,Jl(this.ref,r),jt)))}hasChild(e){const n=new at(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Lt(t,e){return t=yi(t),t._checkNotDeleted("ref"),e!==void 0?Jl(t._root,e):t._root}function Jl(t,e){return t=yi(t),Ue(t._path)===null?$3("child","path",e):aw("child","path",e),new es(t._repo,It(t._path,e))}function dT(t,e){t=yi(t),cw("push",t._path),lw("push",e,t._path,!0);const n=hw(t._repo),r=aT(n),s=Jl(t,r),i=Jl(t,r);let o;return e!=null?o=hT(i,e).then(()=>i):o=Promise.resolve(i),s.then=o.then.bind(o),s.catch=o.then.bind(o,void 0),s}function hT(t,e){t=yi(t),cw("set",t._path),lw("set",e,t._path,!1);const n=new da;return X3(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Rr(t,e){U3("update",e,t._path);const n=new da;return Z3(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function vw(t){t=yi(t);const e=new xw(()=>{}),n=new Qu(e);return J3(t._repo,t,n).then(r=>new Ql(r,new es(t._repo,t._path),t._queryParams.getIndex()))}class Qu{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new cT("value",this,new Ql(e.snapshotNode,new es(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new uT(this,e,n):null}matches(e){return e instanceof Qu?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function fT(t,e,n,r,s){const i=new xw(n,void 0),o=new Qu(i);return tT(t._repo,t,o),()=>fw(t._repo,t,o)}function Qi(t,e,n,r){return fT(t,"value",e)}function _w(t,e,n){fw(t._repo,t,null)}h3(es);y3(es);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT="FIREBASE_DATABASE_EMULATOR_HOST",vf={};let gT=!1;function mT(t,e,n,r){const s=e.lastIndexOf(":"),i=e.substring(0,s),o=Lu(i);t.repoInfo_=new x_(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(t.authTokenProvider_=r)}function yT(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||Kr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Jt("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=hy(i,s),c=o.repoInfo,u;typeof process<"u"&&O0&&(u=O0[pT]),u?(i=`http://${u}?ns=${c.namespace}`,o=hy(i,s),c=o.repoInfo):o.repoInfo.secure;const d=new kj(t.name,t.options,e);W3("Invalid Firebase Database URL",o),Ve(o.path)||Kr("Database URL must point to the root of a Firebase Database (not including a child path).");const p=vT(c,t,d,new jj(t,n));return new _T(p,t)}function xT(t,e){const n=vf[e];(!n||n[t.key]!==t)&&Kr(`Database ${e}(${t.repoInfo_}) has already been deleted.`),nT(t),delete n[t.key]}function vT(t,e,n,r){let s=vf[e.name];s||(s={},vf[e.name]=s);let i=s[t.toURLString()];return i&&Kr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new q3(t,gT,n,r),s[t.toURLString()]=i,i}class _T{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Y3(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new es(this._repo,nt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(xT(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Kr("Cannot call "+e+" on a deleted database.")}}function ww(t=t_(),e){const n=Jv(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=Uv("database");r&&wT(n,...r)}return n}function wT(t,e,n,r={}){t=yi(t),t._checkNotDeleted("useEmulator");const s=`${e}:${n}`,i=t._repoInternal;if(t._instanceStarted){if(s===t._repoInternal.repoInfo_.host&&zl(r,i.repoInfo_.emulatorOptions))return;Kr("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Kr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Sc(Sc.OWNER);else if(r.mockUserToken){const c=typeof r.mockUserToken=="string"?r.mockUserToken:Vv(r.mockUserToken,t.app.options.projectId);o=new Sc(c)}Lu(e)&&(Wv(e),Hv("Database",!0)),mT(i,s,r,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ST(t){dj(Zv),Ul(new ao("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return yT(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),Cs(D0,M0,t),Cs(D0,M0,"esm2020")}zr.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};zr.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};ST();var py=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ag;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,x){function C(){}C.prototype=x.prototype,E.F=x.prototype,E.prototype=new C,E.prototype.constructor=E,E.D=function(j,T,D){for(var I=Array(arguments.length-2),J=2;J<arguments.length;J++)I[J-2]=arguments[J];return x.prototype[T].apply(j,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,x,C){C||(C=0);const j=Array(16);if(typeof x=="string")for(var T=0;T<16;++T)j[T]=x.charCodeAt(C++)|x.charCodeAt(C++)<<8|x.charCodeAt(C++)<<16|x.charCodeAt(C++)<<24;else for(T=0;T<16;++T)j[T]=x[C++]|x[C++]<<8|x[C++]<<16|x[C++]<<24;x=E.g[0],C=E.g[1],T=E.g[2];let D=E.g[3],I;I=x+(D^C&(T^D))+j[0]+3614090360&4294967295,x=C+(I<<7&4294967295|I>>>25),I=D+(T^x&(C^T))+j[1]+3905402710&4294967295,D=x+(I<<12&4294967295|I>>>20),I=T+(C^D&(x^C))+j[2]+606105819&4294967295,T=D+(I<<17&4294967295|I>>>15),I=C+(x^T&(D^x))+j[3]+3250441966&4294967295,C=T+(I<<22&4294967295|I>>>10),I=x+(D^C&(T^D))+j[4]+4118548399&4294967295,x=C+(I<<7&4294967295|I>>>25),I=D+(T^x&(C^T))+j[5]+1200080426&4294967295,D=x+(I<<12&4294967295|I>>>20),I=T+(C^D&(x^C))+j[6]+2821735955&4294967295,T=D+(I<<17&4294967295|I>>>15),I=C+(x^T&(D^x))+j[7]+4249261313&4294967295,C=T+(I<<22&4294967295|I>>>10),I=x+(D^C&(T^D))+j[8]+1770035416&4294967295,x=C+(I<<7&4294967295|I>>>25),I=D+(T^x&(C^T))+j[9]+2336552879&4294967295,D=x+(I<<12&4294967295|I>>>20),I=T+(C^D&(x^C))+j[10]+4294925233&4294967295,T=D+(I<<17&4294967295|I>>>15),I=C+(x^T&(D^x))+j[11]+2304563134&4294967295,C=T+(I<<22&4294967295|I>>>10),I=x+(D^C&(T^D))+j[12]+1804603682&4294967295,x=C+(I<<7&4294967295|I>>>25),I=D+(T^x&(C^T))+j[13]+4254626195&4294967295,D=x+(I<<12&4294967295|I>>>20),I=T+(C^D&(x^C))+j[14]+2792965006&4294967295,T=D+(I<<17&4294967295|I>>>15),I=C+(x^T&(D^x))+j[15]+1236535329&4294967295,C=T+(I<<22&4294967295|I>>>10),I=x+(T^D&(C^T))+j[1]+4129170786&4294967295,x=C+(I<<5&4294967295|I>>>27),I=D+(C^T&(x^C))+j[6]+3225465664&4294967295,D=x+(I<<9&4294967295|I>>>23),I=T+(x^C&(D^x))+j[11]+643717713&4294967295,T=D+(I<<14&4294967295|I>>>18),I=C+(D^x&(T^D))+j[0]+3921069994&4294967295,C=T+(I<<20&4294967295|I>>>12),I=x+(T^D&(C^T))+j[5]+3593408605&4294967295,x=C+(I<<5&4294967295|I>>>27),I=D+(C^T&(x^C))+j[10]+38016083&4294967295,D=x+(I<<9&4294967295|I>>>23),I=T+(x^C&(D^x))+j[15]+3634488961&4294967295,T=D+(I<<14&4294967295|I>>>18),I=C+(D^x&(T^D))+j[4]+3889429448&4294967295,C=T+(I<<20&4294967295|I>>>12),I=x+(T^D&(C^T))+j[9]+568446438&4294967295,x=C+(I<<5&4294967295|I>>>27),I=D+(C^T&(x^C))+j[14]+3275163606&4294967295,D=x+(I<<9&4294967295|I>>>23),I=T+(x^C&(D^x))+j[3]+4107603335&4294967295,T=D+(I<<14&4294967295|I>>>18),I=C+(D^x&(T^D))+j[8]+1163531501&4294967295,C=T+(I<<20&4294967295|I>>>12),I=x+(T^D&(C^T))+j[13]+2850285829&4294967295,x=C+(I<<5&4294967295|I>>>27),I=D+(C^T&(x^C))+j[2]+4243563512&4294967295,D=x+(I<<9&4294967295|I>>>23),I=T+(x^C&(D^x))+j[7]+1735328473&4294967295,T=D+(I<<14&4294967295|I>>>18),I=C+(D^x&(T^D))+j[12]+2368359562&4294967295,C=T+(I<<20&4294967295|I>>>12),I=x+(C^T^D)+j[5]+4294588738&4294967295,x=C+(I<<4&4294967295|I>>>28),I=D+(x^C^T)+j[8]+2272392833&4294967295,D=x+(I<<11&4294967295|I>>>21),I=T+(D^x^C)+j[11]+1839030562&4294967295,T=D+(I<<16&4294967295|I>>>16),I=C+(T^D^x)+j[14]+4259657740&4294967295,C=T+(I<<23&4294967295|I>>>9),I=x+(C^T^D)+j[1]+2763975236&4294967295,x=C+(I<<4&4294967295|I>>>28),I=D+(x^C^T)+j[4]+1272893353&4294967295,D=x+(I<<11&4294967295|I>>>21),I=T+(D^x^C)+j[7]+4139469664&4294967295,T=D+(I<<16&4294967295|I>>>16),I=C+(T^D^x)+j[10]+3200236656&4294967295,C=T+(I<<23&4294967295|I>>>9),I=x+(C^T^D)+j[13]+681279174&4294967295,x=C+(I<<4&4294967295|I>>>28),I=D+(x^C^T)+j[0]+3936430074&4294967295,D=x+(I<<11&4294967295|I>>>21),I=T+(D^x^C)+j[3]+3572445317&4294967295,T=D+(I<<16&4294967295|I>>>16),I=C+(T^D^x)+j[6]+76029189&4294967295,C=T+(I<<23&4294967295|I>>>9),I=x+(C^T^D)+j[9]+3654602809&4294967295,x=C+(I<<4&4294967295|I>>>28),I=D+(x^C^T)+j[12]+3873151461&4294967295,D=x+(I<<11&4294967295|I>>>21),I=T+(D^x^C)+j[15]+530742520&4294967295,T=D+(I<<16&4294967295|I>>>16),I=C+(T^D^x)+j[2]+3299628645&4294967295,C=T+(I<<23&4294967295|I>>>9),I=x+(T^(C|~D))+j[0]+4096336452&4294967295,x=C+(I<<6&4294967295|I>>>26),I=D+(C^(x|~T))+j[7]+1126891415&4294967295,D=x+(I<<10&4294967295|I>>>22),I=T+(x^(D|~C))+j[14]+2878612391&4294967295,T=D+(I<<15&4294967295|I>>>17),I=C+(D^(T|~x))+j[5]+4237533241&4294967295,C=T+(I<<21&4294967295|I>>>11),I=x+(T^(C|~D))+j[12]+1700485571&4294967295,x=C+(I<<6&4294967295|I>>>26),I=D+(C^(x|~T))+j[3]+2399980690&4294967295,D=x+(I<<10&4294967295|I>>>22),I=T+(x^(D|~C))+j[10]+4293915773&4294967295,T=D+(I<<15&4294967295|I>>>17),I=C+(D^(T|~x))+j[1]+2240044497&4294967295,C=T+(I<<21&4294967295|I>>>11),I=x+(T^(C|~D))+j[8]+1873313359&4294967295,x=C+(I<<6&4294967295|I>>>26),I=D+(C^(x|~T))+j[15]+4264355552&4294967295,D=x+(I<<10&4294967295|I>>>22),I=T+(x^(D|~C))+j[6]+2734768916&4294967295,T=D+(I<<15&4294967295|I>>>17),I=C+(D^(T|~x))+j[13]+1309151649&4294967295,C=T+(I<<21&4294967295|I>>>11),I=x+(T^(C|~D))+j[4]+4149444226&4294967295,x=C+(I<<6&4294967295|I>>>26),I=D+(C^(x|~T))+j[11]+3174756917&4294967295,D=x+(I<<10&4294967295|I>>>22),I=T+(x^(D|~C))+j[2]+718787259&4294967295,T=D+(I<<15&4294967295|I>>>17),I=C+(D^(T|~x))+j[9]+3951481745&4294967295,E.g[0]=E.g[0]+x&4294967295,E.g[1]=E.g[1]+(T+(I<<21&4294967295|I>>>11))&4294967295,E.g[2]=E.g[2]+T&4294967295,E.g[3]=E.g[3]+D&4294967295}r.prototype.v=function(E,x){x===void 0&&(x=E.length);const C=x-this.blockSize,j=this.C;let T=this.h,D=0;for(;D<x;){if(T==0)for(;D<=C;)s(this,E,D),D+=this.blockSize;if(typeof E=="string"){for(;D<x;)if(j[T++]=E.charCodeAt(D++),T==this.blockSize){s(this,j),T=0;break}}else for(;D<x;)if(j[T++]=E[D++],T==this.blockSize){s(this,j),T=0;break}}this.h=T,this.o+=x},r.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var x=1;x<E.length-8;++x)E[x]=0;x=this.o*8;for(var C=E.length-8;C<E.length;++C)E[C]=x&255,x/=256;for(this.v(E),E=Array(16),x=0,C=0;C<4;++C)for(let j=0;j<32;j+=8)E[x++]=this.g[C]>>>j&255;return E};function i(E,x){var C=c;return Object.prototype.hasOwnProperty.call(C,E)?C[E]:C[E]=x(E)}function o(E,x){this.h=x;const C=[];let j=!0;for(let T=E.length-1;T>=0;T--){const D=E[T]|0;j&&D==x||(C[T]=D,j=!1)}this.g=C}var c={};function u(E){return-128<=E&&E<128?i(E,function(x){return new o([x|0],x<0?-1:0)}):new o([E|0],E<0?-1:0)}function d(E){if(isNaN(E)||!isFinite(E))return f;if(E<0)return A(d(-E));const x=[];let C=1;for(let j=0;E>=C;j++)x[j]=E/C|0,C*=4294967296;return new o(x,0)}function p(E,x){if(E.length==0)throw Error("number format error: empty string");if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(E.charAt(0)=="-")return A(p(E.substring(1),x));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=d(Math.pow(x,8));let j=f;for(let D=0;D<E.length;D+=8){var T=Math.min(8,E.length-D);const I=parseInt(E.substring(D,D+T),x);T<8?(T=d(Math.pow(x,T)),j=j.j(T).add(d(I))):(j=j.j(C),j=j.add(d(I)))}return j}var f=u(0),m=u(1),k=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-A(this).m();let E=0,x=1;for(let C=0;C<this.g.length;C++){const j=this.i(C);E+=(j>=0?j:4294967296+j)*x,x*=4294967296}return E},t.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(_(this))return"0";if(N(this))return"-"+A(this).toString(E);const x=d(Math.pow(E,6));var C=this;let j="";for(;;){const T=R(C,x).g;C=b(C,T.j(x));let D=((C.g.length>0?C.g[0]:C.h)>>>0).toString(E);if(C=T,_(C))return D+j;for(;D.length<6;)D="0"+D;j=D+j}},t.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function _(E){if(E.h!=0)return!1;for(let x=0;x<E.g.length;x++)if(E.g[x]!=0)return!1;return!0}function N(E){return E.h==-1}t.l=function(E){return E=b(this,E),N(E)?-1:_(E)?0:1};function A(E){const x=E.g.length,C=[];for(let j=0;j<x;j++)C[j]=~E.g[j];return new o(C,~E.h).add(m)}t.abs=function(){return N(this)?A(this):this},t.add=function(E){const x=Math.max(this.g.length,E.g.length),C=[];let j=0;for(let T=0;T<=x;T++){let D=j+(this.i(T)&65535)+(E.i(T)&65535),I=(D>>>16)+(this.i(T)>>>16)+(E.i(T)>>>16);j=I>>>16,D&=65535,I&=65535,C[T]=I<<16|D}return new o(C,C[C.length-1]&-2147483648?-1:0)};function b(E,x){return E.add(A(x))}t.j=function(E){if(_(this)||_(E))return f;if(N(this))return N(E)?A(this).j(A(E)):A(A(this).j(E));if(N(E))return A(this.j(A(E)));if(this.l(k)<0&&E.l(k)<0)return d(this.m()*E.m());const x=this.g.length+E.g.length,C=[];for(var j=0;j<2*x;j++)C[j]=0;for(j=0;j<this.g.length;j++)for(let T=0;T<E.g.length;T++){const D=this.i(j)>>>16,I=this.i(j)&65535,J=E.i(T)>>>16,ye=E.i(T)&65535;C[2*j+2*T]+=I*ye,w(C,2*j+2*T),C[2*j+2*T+1]+=D*ye,w(C,2*j+2*T+1),C[2*j+2*T+1]+=I*J,w(C,2*j+2*T+1),C[2*j+2*T+2]+=D*J,w(C,2*j+2*T+2)}for(E=0;E<x;E++)C[E]=C[2*E+1]<<16|C[2*E];for(E=x;E<2*x;E++)C[E]=0;return new o(C,0)};function w(E,x){for(;(E[x]&65535)!=E[x];)E[x+1]+=E[x]>>>16,E[x]&=65535,x++}function v(E,x){this.g=E,this.h=x}function R(E,x){if(_(x))throw Error("division by zero");if(_(E))return new v(f,f);if(N(E))return x=R(A(E),x),new v(A(x.g),A(x.h));if(N(x))return x=R(E,A(x)),new v(A(x.g),x.h);if(E.g.length>30){if(N(E)||N(x))throw Error("slowDivide_ only works with positive integers.");for(var C=m,j=x;j.l(E)<=0;)C=K(C),j=K(j);var T=ee(C,1),D=ee(j,1);for(j=ee(j,2),C=ee(C,2);!_(j);){var I=D.add(j);I.l(E)<=0&&(T=T.add(C),D=I),j=ee(j,1),C=ee(C,1)}return x=b(E,T.j(x)),new v(T,x)}for(T=f;E.l(x)>=0;){for(C=Math.max(1,Math.floor(E.m()/x.m())),j=Math.ceil(Math.log(C)/Math.LN2),j=j<=48?1:Math.pow(2,j-48),D=d(C),I=D.j(x);N(I)||I.l(E)>0;)C-=j,D=d(C),I=D.j(x);_(D)&&(D=m),T=T.add(D),E=b(E,I)}return new v(T,E)}t.B=function(E){return R(this,E).h},t.and=function(E){const x=Math.max(this.g.length,E.g.length),C=[];for(let j=0;j<x;j++)C[j]=this.i(j)&E.i(j);return new o(C,this.h&E.h)},t.or=function(E){const x=Math.max(this.g.length,E.g.length),C=[];for(let j=0;j<x;j++)C[j]=this.i(j)|E.i(j);return new o(C,this.h|E.h)},t.xor=function(E){const x=Math.max(this.g.length,E.g.length),C=[];for(let j=0;j<x;j++)C[j]=this.i(j)^E.i(j);return new o(C,this.h^E.h)};function K(E){const x=E.g.length+1,C=[];for(let j=0;j<x;j++)C[j]=E.i(j)<<1|E.i(j-1)>>>31;return new o(C,E.h)}function ee(E,x){const C=x>>5;x%=32;const j=E.g.length-C,T=[];for(let D=0;D<j;D++)T[D]=x>0?E.i(D+C)>>>x|E.i(D+C+1)<<32-x:E.i(D+C);return new o(T,E.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=p,ag=o}).apply(typeof py<"u"?py:typeof self<"u"?self:typeof window<"u"?window:{});var nc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var t,e=Object.defineProperty;function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof nc=="object"&&nc];for(var h=0;h<l.length;++h){var g=l[h];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(l,h){if(h)e:{var g=r;l=l.split(".");for(var S=0;S<l.length-1;S++){var B=l[S];if(!(B in g))break e;g=g[B]}l=l[l.length-1],S=g[l],h=h(S),h!=S&&h!=null&&e(g,l,{configurable:!0,writable:!0,value:h})}}s("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(l){return l||function(h){var g=[],S;for(S in h)Object.prototype.hasOwnProperty.call(h,S)&&g.push([S,h[S]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function c(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function u(l,h,g){return l.call.apply(l.bind,arguments)}function d(l,h,g){return d=u,d.apply(null,arguments)}function p(l,h){var g=Array.prototype.slice.call(arguments,1);return function(){var S=g.slice();return S.push.apply(S,arguments),l.apply(this,S)}}function f(l,h){function g(){}g.prototype=h.prototype,l.Z=h.prototype,l.prototype=new g,l.prototype.constructor=l,l.Ob=function(S,B,H){for(var ge=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)ge[ze-2]=arguments[ze];return h.prototype[B].apply(S,ge)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function k(l){const h=l.length;if(h>0){const g=Array(h);for(let S=0;S<h;S++)g[S]=l[S];return g}return[]}function _(l,h){for(let S=1;S<arguments.length;S++){const B=arguments[S];var g=typeof B;if(g=g!="object"?g:B?Array.isArray(B)?"array":g:"null",g=="array"||g=="object"&&typeof B.length=="number"){g=l.length||0;const H=B.length||0;l.length=g+H;for(let ge=0;ge<H;ge++)l[g+ge]=B[ge]}else l.push(B)}}class N{constructor(h,g){this.i=h,this.j=g,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function A(l){o.setTimeout(()=>{throw l},0)}function b(){var l=E;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class w{constructor(){this.h=this.g=null}add(h,g){const S=v.get();S.set(h,g),this.h?this.h.next=S:this.g=S,this.h=S}}var v=new N(()=>new R,l=>l.reset());class R{constructor(){this.next=this.g=this.h=null}set(h,g){this.h=h,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let K,ee=!1,E=new w,x=()=>{const l=Promise.resolve(void 0);K=()=>{l.then(C)}};function C(){for(var l;l=b();){try{l.h.call(l.g)}catch(g){A(g)}var h=v;h.j(l),h.h<100&&(h.h++,l.next=h.g,h.g=l)}ee=!1}function j(){this.u=this.u,this.C=this.C}j.prototype.u=!1,j.prototype.dispose=function(){this.u||(this.u=!0,this.N())},j.prototype[Symbol.dispose]=function(){this.dispose()},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function T(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}T.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};o.addEventListener("test",g,h),o.removeEventListener("test",g,h)}catch{}return l}();function I(l){return/^[\s\xa0]*$/.test(l)}function J(l,h){T.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,h)}f(J,T),J.prototype.init=function(l,h){const g=this.type=l.type,S=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget,h||(g=="mouseover"?h=l.fromElement:g=="mouseout"&&(h=l.toElement)),this.relatedTarget=h,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&J.Z.h.call(this)},J.prototype.h=function(){J.Z.h.call(this);const l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var ye="closure_listenable_"+(Math.random()*1e6|0),ue=0;function Te(l,h,g,S,B){this.listener=l,this.proxy=null,this.src=h,this.type=g,this.capture=!!S,this.ha=B,this.key=++ue,this.da=this.fa=!1}function te(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function P(l,h,g){for(const S in l)h.call(g,l[S],S,l)}function Q(l,h){for(const g in l)h.call(void 0,l[g],g,l)}function oe(l){const h={};for(const g in l)h[g]=l[g];return h}const Se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function G(l,h){let g,S;for(let B=1;B<arguments.length;B++){S=arguments[B];for(g in S)l[g]=S[g];for(let H=0;H<Se.length;H++)g=Se[H],Object.prototype.hasOwnProperty.call(S,g)&&(l[g]=S[g])}}function L(l){this.src=l,this.g={},this.h=0}L.prototype.add=function(l,h,g,S,B){const H=l.toString();l=this.g[H],l||(l=this.g[H]=[],this.h++);const ge=se(l,h,S,B);return ge>-1?(h=l[ge],g||(h.fa=!1)):(h=new Te(h,this.src,H,!!S,B),h.fa=g,l.push(h)),h};function Y(l,h){const g=h.type;if(g in l.g){var S=l.g[g],B=Array.prototype.indexOf.call(S,h,void 0),H;(H=B>=0)&&Array.prototype.splice.call(S,B,1),H&&(te(h),l.g[g].length==0&&(delete l.g[g],l.h--))}}function se(l,h,g,S){for(let B=0;B<l.length;++B){const H=l[B];if(!H.da&&H.listener==h&&H.capture==!!g&&H.ha==S)return B}return-1}var ve="closure_lm_"+(Math.random()*1e6|0),F={};function q(l,h,g,S,B){if(Array.isArray(h)){for(let H=0;H<h.length;H++)q(l,h[H],g,S,B);return null}return g=W(g),l&&l[ye]?l.J(h,g,c(S)?!!S.capture:!1,B):he(l,h,g,!1,S,B)}function he(l,h,g,S,B,H){if(!h)throw Error("Invalid event type");const ge=c(B)?!!B.capture:!!B;let ze=$(l);if(ze||(l[ve]=ze=new L(l)),g=ze.add(h,g,S,ge,H),g.proxy)return g;if(S=we(),g.proxy=S,S.src=l,S.listener=g,l.addEventListener)D||(B=ge),B===void 0&&(B=!1),l.addEventListener(h.toString(),S,B);else if(l.attachEvent)l.attachEvent(O(h.toString()),S);else if(l.addListener&&l.removeListener)l.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return g}function we(){function l(g){return h.call(l.src,l.listener,g)}const h=z;return l}function U(l,h,g,S,B){if(Array.isArray(h))for(var H=0;H<h.length;H++)U(l,h[H],g,S,B);else S=c(S)?!!S.capture:!!S,g=W(g),l&&l[ye]?(l=l.i,H=String(h).toString(),H in l.g&&(h=l.g[H],g=se(h,g,S,B),g>-1&&(te(h[g]),Array.prototype.splice.call(h,g,1),h.length==0&&(delete l.g[H],l.h--)))):l&&(l=$(l))&&(h=l.g[h.toString()],l=-1,h&&(l=se(h,g,S,B)),(g=l>-1?h[l]:null)&&Z(g))}function Z(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[ye])Y(h.i,l);else{var g=l.type,S=l.proxy;h.removeEventListener?h.removeEventListener(g,S,l.capture):h.detachEvent?h.detachEvent(O(g),S):h.addListener&&h.removeListener&&h.removeListener(S),(g=$(h))?(Y(g,l),g.h==0&&(g.src=null,h[ve]=null)):te(l)}}}function O(l){return l in F?F[l]:F[l]="on"+l}function z(l,h){if(l.da)l=!0;else{h=new J(h,this);const g=l.listener,S=l.ha||l.src;l.fa&&Z(l),l=g.call(S,h)}return l}function $(l){return l=l[ve],l instanceof L?l:null}var ie="__closure_events_fn_"+(Math.random()*1e9>>>0);function W(l){return typeof l=="function"?l:(l[ie]||(l[ie]=function(h){return l.handleEvent(h)}),l[ie])}function re(){j.call(this),this.i=new L(this),this.M=this,this.G=null}f(re,j),re.prototype[ye]=!0,re.prototype.removeEventListener=function(l,h,g,S){U(this,l,h,g,S)};function ne(l,h){var g,S=l.G;if(S)for(g=[];S;S=S.G)g.push(S);if(l=l.M,S=h.type||h,typeof h=="string")h=new T(h,l);else if(h instanceof T)h.target=h.target||l;else{var B=h;h=new T(S,l),G(h,B)}B=!0;let H,ge;if(g)for(ge=g.length-1;ge>=0;ge--)H=h.g=g[ge],B=ce(H,S,!0,h)&&B;if(H=h.g=l,B=ce(H,S,!0,h)&&B,B=ce(H,S,!1,h)&&B,g)for(ge=0;ge<g.length;ge++)H=h.g=g[ge],B=ce(H,S,!1,h)&&B}re.prototype.N=function(){if(re.Z.N.call(this),this.i){var l=this.i;for(const h in l.g){const g=l.g[h];for(let S=0;S<g.length;S++)te(g[S]);delete l.g[h],l.h--}}this.G=null},re.prototype.J=function(l,h,g,S){return this.i.add(String(l),h,!1,g,S)},re.prototype.K=function(l,h,g,S){return this.i.add(String(l),h,!0,g,S)};function ce(l,h,g,S){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();let B=!0;for(let H=0;H<h.length;++H){const ge=h[H];if(ge&&!ge.da&&ge.capture==g){const ze=ge.listener,Mt=ge.ha||ge.src;ge.fa&&Y(l.i,ge),B=ze.call(Mt,S)!==!1&&B}}return B&&!S.defaultPrevented}function fe(l,h){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=d(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:o.setTimeout(l,h||0)}function de(l){l.g=fe(()=>{l.g=null,l.i&&(l.i=!1,de(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class Ne extends j{constructor(h,g){super(),this.m=h,this.l=g,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:de(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function et(l){j.call(this),this.h=l,this.g={}}f(et,j);var Ae=[];function Ge(l){P(l.g,function(h,g){this.g.hasOwnProperty(g)&&Z(h)},l),l.g={}}et.prototype.N=function(){et.Z.N.call(this),Ge(this)},et.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Be=o.JSON.stringify,mn=o.JSON.parse,lt=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function Ot(){}function Tt(){}var mt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function yn(){T.call(this,"d")}f(yn,T);function Fs(){T.call(this,"c")}f(Fs,T);var Kn={},ko=null;function Dn(){return ko=ko||new re}Kn.Ia="serverreachability";function Ir(l){T.call(this,Kn.Ia,l)}f(Ir,T);function Dt(l){const h=Dn();ne(h,new Ir(h))}Kn.STAT_EVENT="statevent";function Gn(l,h){T.call(this,Kn.STAT_EVENT,l),this.stat=h}f(Gn,T);function bt(l){const h=Dn();ne(h,new Gn(h,l))}Kn.Ja="timingevent";function qn(l,h){T.call(this,Kn.Ja,l),this.size=h}f(qn,T);function jr(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},h)}function _i(){this.g=!0}_i.prototype.ua=function(){this.g=!1};function _a(l,h,g,S,B,H){l.info(function(){if(l.g)if(H){var ge="",ze=H.split("&");for(let ct=0;ct<ze.length;ct++){var Mt=ze[ct].split("=");if(Mt.length>1){const $t=Mt[0];Mt=Mt[1];const fr=$t.split("_");ge=fr.length>=2&&fr[1]=="type"?ge+($t+"="+Mt+"&"):ge+($t+"=redacted&")}}}else ge=null;else ge=H;return"XMLHTTP REQ ("+S+") [attempt "+B+"]: "+h+`
`+g+`
`+ge})}function Ju(l,h,g,S,B,H,ge){l.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+B+"]: "+h+`
`+g+`
`+H+" "+ge})}function qt(l,h,g,S){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+pg(l,g)+(S?" "+S:"")})}function fg(l,h){l.info(function(){return"TIMEOUT: "+h})}_i.prototype.info=function(){};function pg(l,h){if(!l.g)return h;if(!h)return null;try{const H=JSON.parse(h);if(H){for(l=0;l<H.length;l++)if(Array.isArray(H[l])){var g=H[l];if(!(g.length<2)){var S=g[1];if(Array.isArray(S)&&!(S.length<1)){var B=S[0];if(B!="noop"&&B!="stop"&&B!="close")for(let ge=1;ge<S.length;ge++)S[ge]=""}}}}return Be(H)}catch{return h}}var wi={NO_ERROR:0,TIMEOUT:8},To={},wa;function No(){}f(No,Ot),No.prototype.g=function(){return new XMLHttpRequest},wa=new No;function Mn(l){return encodeURIComponent(String(l))}function Sa(l){var h=1;l=l.split(":");const g=[];for(;h>0&&l.length;)g.push(l.shift()),h--;return l.length&&g.push(l.join(":")),g}function hr(l,h,g,S){this.j=l,this.i=h,this.l=g,this.S=S||1,this.V=new et(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new zs}function zs(){this.i=null,this.g="",this.h=!1}var ba={},Ro={};function Si(l,h,g){l.M=1,l.A=Et(Oe(h)),l.u=g,l.R=!0,Ea(l,null)}function Ea(l,h){l.F=Date.now(),Yn(l),l.B=Oe(l.A);var g=l.B,S=l.S;Array.isArray(S)||(S=[String(S)]),vg(g.i,"t",S),l.C=0,g=l.j.L,l.h=new zs,l.g=Lg(l.j,g?h:null,!l.u),l.P>0&&(l.O=new Ne(d(l.Y,l,l.g),l.P)),h=l.V,g=l.g,S=l.ba;var B="readystatechange";Array.isArray(B)||(B&&(Ae[0]=B.toString()),B=Ae);for(let H=0;H<B.length;H++){const ge=q(g,B[H],S||h.handleEvent,!1,h.h||h);if(!ge)break;h.g[ge.key]=ge}h=l.J?oe(l.J):{},l.u?(l.v||(l.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,h)):(l.v="GET",l.g.ea(l.B,l.v,null,h)),Dt(),_a(l.i,l.v,l.B,l.l,l.S,l.u)}hr.prototype.ba=function(l){l=l.target;const h=this.O;h&&rs(l)==3?h.j():this.Y(l)},hr.prototype.Y=function(l){try{if(l==this.g)e:{const ze=rs(this.g),Mt=this.g.ya(),ct=this.g.ca();if(!(ze<3)&&(ze!=3||this.g&&(this.h.h||this.g.la()||Ig(this.g)))){this.K||ze!=4||Mt==7||(Mt==8||ct<=0?Dt(3):Dt(2)),M(this);var h=this.g.ca();this.X=h;var g=Xu(this);if(this.o=h==200,Ju(this.i,this.v,this.B,this.l,this.S,ze,h),this.o){if(this.U&&!this.L){t:{if(this.g){var S,B=this.g;if((S=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(S)){var H=S;break t}}H=null}if(l=H)qt(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Fe(this,l);else{this.o=!1,this.m=3,bt(12),be(this),le(this);break e}}if(this.R){l=!0;let $t;for(;!this.K&&this.C<g.length;)if($t=Ia(this,g),$t==Ro){ze==4&&(this.m=4,bt(14),l=!1),qt(this.i,this.l,null,"[Incomplete Response]");break}else if($t==ba){this.m=4,bt(15),qt(this.i,this.l,g,"[Invalid Chunk]"),l=!1;break}else qt(this.i,this.l,$t,null),Fe(this,$t);if(Ca(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ze!=4||g.length!=0||this.h.h||(this.m=1,bt(16),l=!1),this.o=this.o&&l,!l)qt(this.i,this.l,g,"[Invalid Chunked Response]"),be(this),le(this);else if(g.length>0&&!this.W){this.W=!0;var ge=this.j;ge.g==this&&ge.aa&&!ge.P&&(ge.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),id(ge),ge.P=!0,bt(11))}}else qt(this.i,this.l,g,null),Fe(this,g);ze==4&&be(this),this.o&&!this.K&&(ze==4?Pg(this.j,this):(this.o=!1,Yn(this)))}else Lw(this.g),h==400&&g.indexOf("Unknown SID")>0?(this.m=3,bt(12)):(this.m=0,bt(13)),be(this),le(this)}}}catch{}finally{}};function Xu(l){if(!Ca(l))return l.g.la();const h=Ig(l.g);if(h==="")return"";let g="";const S=h.length,B=rs(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return be(l),le(l),"";l.h.i=new o.TextDecoder}for(let H=0;H<S;H++)l.h.h=!0,g+=l.h.i.decode(h[H],{stream:!(B&&H==S-1)});return h.length=0,l.h.g+=g,l.C=0,l.h.g}function Ca(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function Ia(l,h){var g=l.C,S=h.indexOf(`
`,g);return S==-1?Ro:(g=Number(h.substring(g,S)),isNaN(g)?ba:(S+=1,S+g>h.length?Ro:(h=h.slice(S,S+g),l.C=S+g,h)))}hr.prototype.cancel=function(){this.K=!0,be(this)};function Yn(l){l.T=Date.now()+l.H,ja(l,l.H)}function ja(l,h){if(l.D!=null)throw Error("WatchDog timer not null");l.D=jr(d(l.aa,l),h)}function M(l){l.D&&(o.clearTimeout(l.D),l.D=null)}hr.prototype.aa=function(){this.D=null;const l=Date.now();l-this.T>=0?(fg(this.i,this.B),this.M!=2&&(Dt(),bt(17)),be(this),this.m=2,le(this)):ja(this,this.T-l)};function le(l){l.j.I==0||l.K||Pg(l.j,l)}function be(l){M(l);var h=l.O;h&&typeof h.dispose=="function"&&h.dispose(),l.O=null,Ge(l.V),l.g&&(h=l.g,l.g=null,h.abort(),h.dispose())}function Fe(l,h){try{var g=l.j;if(g.I!=0&&(g.g==l||Ye(g.h,l))){if(!l.L&&Ye(g.h,l)&&g.I==3){try{var S=g.Ba.g.parse(h)}catch{S=null}if(Array.isArray(S)&&S.length==3){var B=S;if(B[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<l.F)Pa(g),Ra(g);else break e;sd(g),bt(18)}}else g.xa=B[1],0<g.xa-g.K&&B[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=jr(d(g.Va,g),6e3));Ie(g.h)<=1&&g.ta&&(g.ta=void 0)}else Us(g,11)}else if((l.L||g.g==l)&&Pa(g),!I(h))for(B=g.Ba.g.parse(h),h=0;h<B.length;h++){let ct=B[h];const $t=ct[0];if(!($t<=g.K))if(g.K=$t,ct=ct[1],g.I==2)if(ct[0]=="c"){g.M=ct[1],g.ba=ct[2];const fr=ct[3];fr!=null&&(g.ka=fr,g.j.info("VER="+g.ka));const $s=ct[4];$s!=null&&(g.za=$s,g.j.info("SVER="+g.za));const ss=ct[5];ss!=null&&typeof ss=="number"&&ss>0&&(S=1.5*ss,g.O=S,g.j.info("backChannelRequestTimeoutMs_="+S)),S=g;const is=l.g;if(is){const Oa=is.g?is.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Oa){var H=S.h;H.g||Oa.indexOf("spdy")==-1&&Oa.indexOf("quic")==-1&&Oa.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(De(H,H.h),H.h=null))}if(S.G){const od=is.g?is.g.getResponseHeader("X-HTTP-Session-Id"):null;od&&(S.wa=od,Pe(S.J,S.G,od))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-l.F,g.j.info("Handshake RTT: "+g.T+"ms")),S=g;var ge=l;if(S.na=Mg(S,S.L?S.ba:null,S.W),ge.L){Ee(S.h,ge);var ze=ge,Mt=S.O;Mt&&(ze.H=Mt),ze.D&&(M(ze),Yn(ze)),S.g=ge}else Rg(S);g.i.length>0&&Aa(g)}else ct[0]!="stop"&&ct[0]!="close"||Us(g,7);else g.I==3&&(ct[0]=="stop"||ct[0]=="close"?ct[0]=="stop"?Us(g,7):rd(g):ct[0]!="noop"&&g.l&&g.l.qa(ct),g.A=0)}}Dt(4)}catch{}}var Me=class{constructor(l,h){this.g=l,this.map=h}};function rt(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function qe(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Ie(l){return l.h?1:l.g?l.g.size:0}function Ye(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function De(l,h){l.g?l.g.add(h):l.h=h}function Ee(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}rt.prototype.cancel=function(){if(this.i=Ce(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Ce(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const g of l.g.values())h=h.concat(g.G);return h}return k(l.i)}var We=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ft(l,h){if(l){l=l.split("&");for(let g=0;g<l.length;g++){const S=l[g].indexOf("=");let B,H=null;S>=0?(B=l[g].substring(0,S),H=l[g].substring(S+1)):B=l[g],h(B,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function Re(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;l instanceof Re?(this.l=l.l,me(this,l.j),this.o=l.o,this.g=l.g,je(this,l.u),this.h=l.h,tt(this,_g(l.i)),this.m=l.m):l&&(h=String(l).match(We))?(this.l=!1,me(this,h[1]||"",!0),this.o=xt(h[2]||""),this.g=xt(h[3]||"",!0),je(this,h[4]),this.h=xt(h[5]||"",!0),tt(this,h[6]||"",!0),this.m=xt(h[7]||"")):(this.l=!1,this.i=new Ao(null,this.l))}Re.prototype.toString=function(){const l=[];var h=this.j;h&&l.push(st(h,ts,!0),":");var g=this.g;return(g||h=="file")&&(l.push("//"),(h=this.o)&&l.push(st(h,ts,!0),"@"),l.push(Mn(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&l.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(st(g,g.charAt(0)=="/"?Zu:ka,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",st(g,gg)),l.join("")},Re.prototype.resolve=function(l){const h=Oe(this);let g=!!l.j;g?me(h,l.j):g=!!l.o,g?h.o=l.o:g=!!l.g,g?h.g=l.g:g=l.u!=null;var S=l.h;if(g)je(h,l.u);else if(g=!!l.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var B=h.h.lastIndexOf("/");B!=-1&&(S=h.h.slice(0,B+1)+S)}if(B=S,B==".."||B==".")S="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){S=B.lastIndexOf("/",0)==0,B=B.split("/");const H=[];for(let ge=0;ge<B.length;){const ze=B[ge++];ze=="."?S&&ge==B.length&&H.push(""):ze==".."?((H.length>1||H.length==1&&H[0]!="")&&H.pop(),S&&ge==B.length&&H.push("")):(H.push(ze),S=!0)}S=H.join("/")}else S=B}return g?h.h=S:g=l.i.toString()!=="",g?tt(h,_g(l.i)):g=!!l.m,g&&(h.m=l.m),h};function Oe(l){return new Re(l)}function me(l,h,g){l.j=g?xt(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function je(l,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);l.u=h}else l.u=null}function tt(l,h,g){h instanceof Ao?(l.i=h,Rw(l.i,l.l)):(g||(h=st(h,ed)),l.i=new Ao(h,l.l))}function Pe(l,h,g){l.i.set(h,g)}function Et(l){return Pe(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function xt(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function st(l,h,g){return typeof l=="string"?(l=encodeURI(l).replace(h,Qn),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Qn(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var ts=/[#\/\?@]/g,ka=/[#\?:]/g,Zu=/[#\?]/g,ed=/[#\?@]/g,gg=/#/g;function Ao(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function Bs(l){l.g||(l.g=new Map,l.h=0,l.i&&ft(l.i,function(h,g){l.add(decodeURIComponent(h.replace(/\+/g," ")),g)}))}t=Ao.prototype,t.add=function(l,h){Bs(this),this.i=null,l=bi(this,l);let g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(h),this.h+=1,this};function mg(l,h){Bs(l),h=bi(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function yg(l,h){return Bs(l),h=bi(l,h),l.g.has(h)}t.forEach=function(l,h){Bs(this),this.g.forEach(function(g,S){g.forEach(function(B){l.call(h,B,S,this)},this)},this)};function xg(l,h){Bs(l);let g=[];if(typeof h=="string")yg(l,h)&&(g=g.concat(l.g.get(bi(l,h))));else for(l=Array.from(l.g.values()),h=0;h<l.length;h++)g=g.concat(l[h]);return g}t.set=function(l,h){return Bs(this),this.i=null,l=bi(this,l),yg(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=xg(this,l),l.length>0?String(l[0]):h):h};function vg(l,h,g){mg(l,h),g.length>0&&(l.i=null,l.g.set(bi(l,h),k(g)),l.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(let S=0;S<h.length;S++){var g=h[S];const B=Mn(g);g=xg(this,g);for(let H=0;H<g.length;H++){let ge=B;g[H]!==""&&(ge+="="+Mn(g[H])),l.push(ge)}}return this.i=l.join("&")};function _g(l){const h=new Ao;return h.i=l.i,l.g&&(h.g=new Map(l.g),h.h=l.h),h}function bi(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function Rw(l,h){h&&!l.j&&(Bs(l),l.i=null,l.g.forEach(function(g,S){const B=S.toLowerCase();S!=B&&(mg(this,S),vg(this,B,g))},l)),l.j=h}function Aw(l,h){const g=new _i;if(o.Image){const S=new Image;S.onload=p(ns,g,"TestLoadImage: loaded",!0,h,S),S.onerror=p(ns,g,"TestLoadImage: error",!1,h,S),S.onabort=p(ns,g,"TestLoadImage: abort",!1,h,S),S.ontimeout=p(ns,g,"TestLoadImage: timeout",!1,h,S),o.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=l}else h(!1)}function Pw(l,h){const g=new _i,S=new AbortController,B=setTimeout(()=>{S.abort(),ns(g,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:S.signal}).then(H=>{clearTimeout(B),H.ok?ns(g,"TestPingServer: ok",!0,h):ns(g,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(B),ns(g,"TestPingServer: error",!1,h)})}function ns(l,h,g,S,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),S(g)}catch{}}function Ow(){this.g=new lt}function td(l){this.i=l.Sb||null,this.h=l.ab||!1}f(td,Ot),td.prototype.g=function(){return new Ta(this.i,this.h)};function Ta(l,h){re.call(this),this.H=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Ta,re),t=Ta.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=h,this.readyState=1,Oo(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(h.body=l),(this.H||o).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Po(this)),this.readyState=0},t.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Oo(this)),this.g&&(this.readyState=3,Oo(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;wg(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function wg(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}t.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Po(this):Oo(this),this.readyState==3&&wg(this)}},t.Oa=function(l){this.g&&(this.response=this.responseText=l,Po(this))},t.Na=function(l){this.g&&(this.response=l,Po(this))},t.ga=function(){this.g&&Po(this)};function Po(l){l.readyState=4,l.l=null,l.j=null,l.B=null,Oo(l)}t.setRequestHeader=function(l,h){this.A.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var g=h.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=h.next();return l.join(`\r
`)};function Oo(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Ta.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Sg(l){let h="";return P(l,function(g,S){h+=S,h+=":",h+=g,h+=`\r
`}),h}function nd(l,h,g){e:{for(S in g){var S=!1;break e}S=!0}S||(g=Sg(g),typeof l=="string"?g!=null&&Mn(g):Pe(l,h,g))}function Nt(l){re.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(Nt,re);var Dw=/^https?$/i,Mw=["POST","PUT"];t=Nt.prototype,t.Fa=function(l){this.H=l},t.ea=function(l,h,g,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():wa.g(),this.g.onreadystatechange=m(d(this.Ca,this));try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(H){bg(this,H);return}if(l=g||"",g=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var B in S)g.set(B,S[B]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const H of S.keys())g.set(H,S.get(H));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(g.keys()).find(H=>H.toLowerCase()=="content-type"),B=o.FormData&&l instanceof o.FormData,!(Array.prototype.indexOf.call(Mw,h,void 0)>=0)||S||B||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,ge]of g)this.g.setRequestHeader(H,ge);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(H){bg(this,H)}};function bg(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.o=5,Eg(l),Na(l)}function Eg(l){l.A||(l.A=!0,ne(l,"complete"),ne(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,ne(this,"complete"),ne(this,"abort"),Na(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Na(this,!0)),Nt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Cg(this):this.Xa())},t.Xa=function(){Cg(this)};function Cg(l){if(l.h&&typeof i<"u"){if(l.v&&rs(l)==4)setTimeout(l.Ca.bind(l),0);else if(ne(l,"readystatechange"),rs(l)==4){l.h=!1;try{const H=l.ca();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var g;if(!(g=h)){var S;if(S=H===0){let ge=String(l.D).match(We)[1]||null;!ge&&o.self&&o.self.location&&(ge=o.self.location.protocol.slice(0,-1)),S=!Dw.test(ge?ge.toLowerCase():"")}g=S}if(g)ne(l,"complete"),ne(l,"success");else{l.o=6;try{var B=rs(l)>2?l.g.statusText:""}catch{B=""}l.l=B+" ["+l.ca()+"]",Eg(l)}}finally{Na(l)}}}}function Na(l,h){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);const g=l.g;l.g=null,h||ne(l,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function rs(l){return l.g?l.g.readyState:0}t.ca=function(){try{return rs(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),mn(h)}};function Ig(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Lw(l){const h={};l=(l.g&&rs(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<l.length;S++){if(I(l[S]))continue;var g=Sa(l[S]);const B=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const H=h[B]||[];h[B]=H,H.push(g)}Q(h,function(S){return S.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Do(l,h,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||h}function jg(l){this.za=0,this.i=[],this.j=new _i,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Do("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Do("baseRetryDelayMs",5e3,l),this.Za=Do("retryDelaySeedMs",1e4,l),this.Ta=Do("forwardChannelMaxRetries",2,l),this.va=Do("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new rt(l&&l.concurrentRequestLimit),this.Ba=new Ow,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=jg.prototype,t.ka=8,t.I=1,t.connect=function(l,h,g,S){bt(0),this.W=l,this.H=h||{},g&&S!==void 0&&(this.H.OSID=g,this.H.OAID=S),this.F=this.X,this.J=Mg(this,null,this.W),Aa(this)};function rd(l){if(kg(l),l.I==3){var h=l.V++,g=Oe(l.J);if(Pe(g,"SID",l.M),Pe(g,"RID",h),Pe(g,"TYPE","terminate"),Mo(l,g),h=new hr(l,l.j,h),h.M=2,h.A=Et(Oe(g)),g=!1,o.navigator&&o.navigator.sendBeacon)try{g=o.navigator.sendBeacon(h.A.toString(),"")}catch{}!g&&o.Image&&(new Image().src=h.A,g=!0),g||(h.g=Lg(h.j,null),h.g.ea(h.A)),h.F=Date.now(),Yn(h)}Dg(l)}function Ra(l){l.g&&(id(l),l.g.cancel(),l.g=null)}function kg(l){Ra(l),l.v&&(o.clearTimeout(l.v),l.v=null),Pa(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&o.clearTimeout(l.m),l.m=null)}function Aa(l){if(!qe(l.h)&&!l.m){l.m=!0;var h=l.Ea;K||x(),ee||(K(),ee=!0),E.add(h,l),l.D=0}}function Fw(l,h){return Ie(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=h.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=jr(d(l.Ea,l,h),Og(l,l.D)),l.D++,!0)}t.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;const B=new hr(this,this.j,l);let H=this.o;if(this.U&&(H?(H=oe(H),G(H,this.U)):H=this.U),this.u!==null||this.R||(B.J=H,H=null),this.S)e:{for(var h=0,g=0;g<this.i.length;g++){t:{var S=this.i[g];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(h+=S,h>4096){h=g;break e}if(h===4096||g===this.i.length-1){h=g+1;break e}}h=1e3}else h=1e3;h=Ng(this,B,h),g=Oe(this.J),Pe(g,"RID",l),Pe(g,"CVER",22),this.G&&Pe(g,"X-HTTP-Session-Id",this.G),Mo(this,g),H&&(this.R?h="headers="+Mn(Sg(H))+"&"+h:this.u&&nd(g,this.u,H)),De(this.h,B),this.Ra&&Pe(g,"TYPE","init"),this.S?(Pe(g,"$req",h),Pe(g,"SID","null"),B.U=!0,Si(B,g,null)):Si(B,g,h),this.I=2}}else this.I==3&&(l?Tg(this,l):this.i.length==0||qe(this.h)||Tg(this))};function Tg(l,h){var g;h?g=h.l:g=l.V++;const S=Oe(l.J);Pe(S,"SID",l.M),Pe(S,"RID",g),Pe(S,"AID",l.K),Mo(l,S),l.u&&l.o&&nd(S,l.u,l.o),g=new hr(l,l.j,g,l.D+1),l.u===null&&(g.J=l.o),h&&(l.i=h.G.concat(l.i)),h=Ng(l,g,1e3),g.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),De(l.h,g),Si(g,S,h)}function Mo(l,h){l.H&&P(l.H,function(g,S){Pe(h,S,g)}),l.l&&P({},function(g,S){Pe(h,S,g)})}function Ng(l,h,g){g=Math.min(l.i.length,g);const S=l.l?d(l.l.Ka,l.l,l):null;e:{var B=l.i;let ze=-1;for(;;){const Mt=["count="+g];ze==-1?g>0?(ze=B[0].g,Mt.push("ofs="+ze)):ze=0:Mt.push("ofs="+ze);let ct=!0;for(let $t=0;$t<g;$t++){var H=B[$t].g;const fr=B[$t].map;if(H-=ze,H<0)ze=Math.max(0,B[$t].g-100),ct=!1;else try{H="req"+H+"_"||"";try{var ge=fr instanceof Map?fr:Object.entries(fr);for(const[$s,ss]of ge){let is=ss;c(ss)&&(is=Be(ss)),Mt.push(H+$s+"="+encodeURIComponent(is))}}catch($s){throw Mt.push(H+"type="+encodeURIComponent("_badmap")),$s}}catch{S&&S(fr)}}if(ct){ge=Mt.join("&");break e}}ge=void 0}return l=l.i.splice(0,g),h.G=l,ge}function Rg(l){if(!l.g&&!l.v){l.Y=1;var h=l.Da;K||x(),ee||(K(),ee=!0),E.add(h,l),l.A=0}}function sd(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=jr(d(l.Da,l),Og(l,l.A)),l.A++,!0)}t.Da=function(){if(this.v=null,Ag(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=jr(d(this.Wa,this),l)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,bt(10),Ra(this),Ag(this))};function id(l){l.B!=null&&(o.clearTimeout(l.B),l.B=null)}function Ag(l){l.g=new hr(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var h=Oe(l.na);Pe(h,"RID","rpc"),Pe(h,"SID",l.M),Pe(h,"AID",l.K),Pe(h,"CI",l.F?"0":"1"),!l.F&&l.ia&&Pe(h,"TO",l.ia),Pe(h,"TYPE","xmlhttp"),Mo(l,h),l.u&&l.o&&nd(h,l.u,l.o),l.O&&(l.g.H=l.O);var g=l.g;l=l.ba,g.M=1,g.A=Et(Oe(h)),g.u=null,g.R=!0,Ea(g,l)}t.Va=function(){this.C!=null&&(this.C=null,Ra(this),sd(this),bt(19))};function Pa(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function Pg(l,h){var g=null;if(l.g==h){Pa(l),id(l),l.g=null;var S=2}else if(Ye(l.h,h))g=h.G,Ee(l.h,h),S=1;else return;if(l.I!=0){if(h.o)if(S==1){g=h.u?h.u.length:0,h=Date.now()-h.F;var B=l.D;S=Dn(),ne(S,new qn(S,g)),Aa(l)}else Rg(l);else if(B=h.m,B==3||B==0&&h.X>0||!(S==1&&Fw(l,h)||S==2&&sd(l)))switch(g&&g.length>0&&(h=l.h,h.i=h.i.concat(g)),B){case 1:Us(l,5);break;case 4:Us(l,10);break;case 3:Us(l,6);break;default:Us(l,2)}}}function Og(l,h){let g=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(g*=2),g*h}function Us(l,h){if(l.j.info("Error code "+h),h==2){var g=d(l.bb,l),S=l.Ua;const B=!S;S=new Re(S||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||me(S,"https"),Et(S),B?Aw(S.toString(),g):Pw(S.toString(),g)}else bt(2);l.I=0,l.l&&l.l.pa(h),Dg(l),kg(l)}t.bb=function(l){l?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function Dg(l){if(l.I=0,l.ja=[],l.l){const h=Ce(l.h);(h.length!=0||l.i.length!=0)&&(_(l.ja,h),_(l.ja,l.i),l.h.i.length=0,k(l.i),l.i.length=0),l.l.oa()}}function Mg(l,h,g){var S=g instanceof Re?Oe(g):new Re(g);if(S.g!="")h&&(S.g=h+"."+S.g),je(S,S.u);else{var B=o.location;S=B.protocol,h=h?h+"."+B.hostname:B.hostname,B=+B.port;const H=new Re(null);S&&me(H,S),h&&(H.g=h),B&&je(H,B),g&&(H.h=g),S=H}return g=l.G,h=l.wa,g&&h&&Pe(S,g,h),Pe(S,"VER",l.ka),Mo(l,S),S}function Lg(l,h,g){if(h&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Aa&&!l.ma?new Nt(new td({ab:g})):new Nt(l.ma),h.Fa(l.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fg(){}t=Fg.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Ln(l,h){re.call(this),this.g=new jg(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(l?l["X-WebChannel-Client-Profile"]=h.sa:l={"X-WebChannel-Client-Profile":h.sa}),this.g.U=l,(l=h&&h.Qb)&&!I(l)&&(this.g.u=l),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!I(h)&&(this.g.G=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Ei(this)}f(Ln,re),Ln.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ln.prototype.close=function(){rd(this.g)},Ln.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.v&&(g={},g.__data__=Be(l),l=g);h.i.push(new Me(h.Ya++,l)),h.I==3&&Aa(h)},Ln.prototype.N=function(){this.g.l=null,delete this.j,rd(this.g),delete this.g,Ln.Z.N.call(this)};function zg(l){yn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const g in h){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}f(zg,yn);function Bg(){Fs.call(this),this.status=1}f(Bg,Fs);function Ei(l){this.g=l}f(Ei,Fg),Ei.prototype.ra=function(){ne(this.g,"a")},Ei.prototype.qa=function(l){ne(this.g,new zg(l))},Ei.prototype.pa=function(l){ne(this.g,new Bg)},Ei.prototype.oa=function(){ne(this.g,"b")},Ln.prototype.send=Ln.prototype.o,Ln.prototype.open=Ln.prototype.m,Ln.prototype.close=Ln.prototype.close,wi.NO_ERROR=0,wi.TIMEOUT=8,wi.HTTP_ERROR=6,To.COMPLETE="complete",Tt.EventType=mt,mt.OPEN="a",mt.CLOSE="b",mt.ERROR="c",mt.MESSAGE="d",re.prototype.listen=re.prototype.J,Nt.prototype.listenOnce=Nt.prototype.K,Nt.prototype.getLastError=Nt.prototype.Ha,Nt.prototype.getLastErrorCode=Nt.prototype.ya,Nt.prototype.getStatus=Nt.prototype.ca,Nt.prototype.getResponseJson=Nt.prototype.La,Nt.prototype.getResponseText=Nt.prototype.la,Nt.prototype.send=Nt.prototype.ea,Nt.prototype.setWithCredentials=Nt.prototype.Fa}).apply(typeof nc<"u"?nc:typeof self<"u"?self:typeof window<"u"?window:{});const gy="@firebase/firestore",my="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xa="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go=new jp("@firebase/firestore");function sr(t,...e){if(go.logLevel<=it.DEBUG){const n=e.map(cg);go.debug(`Firestore (${xa}): ${t}`,...n)}}function Sw(t,...e){if(go.logLevel<=it.ERROR){const n=e.map(cg);go.error(`Firestore (${xa}): ${t}`,...n)}}function bT(t,...e){if(go.logLevel<=it.WARN){const n=e.map(cg);go.warn(`Firestore (${xa}): ${t}`,...n)}}function cg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xl(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,bw(t,r,n)}function bw(t,e,n){let r=`FIRESTORE (${xa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Sw(r),new Error(r)}function yl(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||bw(e,s,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Je={CANCELLED:"cancelled",INVALID_ARGUMENT:"invalid-argument",FAILED_PRECONDITION:"failed-precondition"};class Xe extends Eo{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ET{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(un.UNAUTHENTICATED))}shutdown(){}}class CT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class IT{constructor(e){this.t=e,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){yl(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new xl;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new xl,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{sr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(sr("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new xl)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(sr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(yl(typeof r.accessToken=="string",31837,{l:r}),new Ew(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return yl(e===null||typeof e=="string",2055,{h:e}),new un(e)}}class jT{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=un.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class kT{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new jT(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(un.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TT{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Xv(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){yl(this.o===void 0,3512);const r=i=>{i.error!=null&&sr("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,sr("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{sr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):sr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new yy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(yl(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new yy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=NT(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Ps(t,e){return t<e?-1:t>e?1:0}function AT(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Qd(s)===Qd(i)?Ps(s,i):Qd(s)?1:-1}return Ps(t.length,e.length)}const PT=55296,OT=57343;function Qd(t){const e=t.charCodeAt(0);return e>=PT&&e<=OT}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xy="__name__";class yr{constructor(e,n,r){n===void 0?n=0:n>e.length&&Xl(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Xl(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return yr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof yr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=yr.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Ps(e.length,n.length)}static compareSegments(e,n){const r=yr.isNumericId(e),s=yr.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?yr.extractNumericId(e).compare(yr.extractNumericId(n)):AT(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ag.fromString(e.substring(4,e.length-2))}}class tr extends yr{construct(e,n,r){return new tr(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Xe(Je.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new tr(n)}static emptyPath(){return new tr([])}}const DT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gs extends yr{construct(e,n,r){return new Gs(e,n,r)}static isValidIdentifier(e){return DT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gs.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===xy}static keyField(){return new Gs([xy])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Xe(Je.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new Xe(Je.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Xe(Je.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(i(),s++)}if(i(),o)throw new Xe(Je.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Gs(n)}static emptyPath(){return new Gs([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e){this.path=e}static fromPath(e){return new Zs(tr.fromString(e))}static fromName(e){return new Zs(tr.fromString(e).popFirst(5))}static empty(){return new Zs(tr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return tr.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Zs(new tr(e.slice()))}}function MT(t,e,n,r){if(e===!0&&r===!0)throw new Xe(Je.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function LT(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function FT(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Xl(12329,{type:typeof t})}function zT(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Xe(Je.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=FT(t);throw new Xe(Je.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(t,e){const n={typeString:t};return e&&(n.value=e),n}function va(t,e){if(!LT(t))throw new Xe(Je.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new Xe(Je.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy=-62135596800,_y=1e6;class xr{static now(){return xr.fromMillis(Date.now())}static fromDate(e){return xr.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*_y);return new xr(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Xe(Je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Xe(Je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<vy)throw new Xe(Je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Xe(Je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/_y}_compareTo(e){return this.seconds===e.seconds?Ps(this.nanoseconds,e.nanoseconds):Ps(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:xr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(va(e,xr._jsonSchema))return new xr(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-vy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}xr._jsonSchemaVersion="firestore/timestamp/1.0",xr._jsonSchema={type:Pt("string",xr._jsonSchemaVersion),seconds:Pt("number"),nanoseconds:Pt("number")};function BT(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new UT("Invalid base64 string: "+i):i}}(e);return new pi(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new pi(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ps(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pi.EMPTY_BYTE_STRING=new pi("");const _f="(default)";class fu{constructor(e,n){this.projectId=e,this.database=n||_f}static empty(){return new fu("","")}get isDefaultDatabase(){return this.database===_f}isEqual(e){return e instanceof fu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e,n=null,r=[],s=[],i=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function WT(t){return new $T(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wy,Qe;(Qe=wy||(wy={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new ag([4294967295,4294967295],0);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT=41943040;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT=1048576;function Jd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&sr("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new xl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,c=new ug(e,n,o,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Xe(Je.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}var Sy,by;(by=Sy||(Sy={})).Ma="default",by.Cache="cache";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cw="firestore.googleapis.com",Cy=!0;class Iy{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Xe(Je.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Cw,this.ssl=Cy}else this.host=e.host,this.ssl=e.ssl??Cy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=VT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<HT)throw new Xe(Je.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}MT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=GT(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Xe(Je.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Xe(Je.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Xe(Je.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Iw{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Iy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Xe(Je.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Xe(Je.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Iy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ET;switch(r.type){case"firstParty":return new kT(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Xe(Je.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Ey.get(n);r&&(sr("ComponentProvider","Removing Datastore"),Ey.delete(n),r.terminate())}(this),Promise.resolve()}}function qT(t,e,n,r={}){var d;t=zT(t,Iw);const s=Lu(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;s&&(Wv(`https://${c}`),Hv("Firestore",!0)),i.host!==Cw&&i.host!==c&&bT("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:c,ssl:s,emulatorOptions:r};if(!zl(u,o)&&(t._setSettings(u),r.mockUserToken)){let p,f;if(typeof r.mockUserToken=="string")p=r.mockUserToken,f=un.MOCK_USER;else{p=Vv(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Xe(Je.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new un(m)}t._authCredentials=new CT(new Ew(p,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new dg(this.firestore,e,this._query)}}class _r{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hg(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _r(this.firestore,e,this._key)}toJSON(){return{type:_r._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(va(n,_r._jsonSchema))return new _r(e,r||null,new Zs(tr.fromString(n.referencePath)))}}_r._jsonSchemaVersion="firestore/documentReference/1.0",_r._jsonSchema={type:Pt("string",_r._jsonSchemaVersion),referencePath:Pt("string")};class hg extends dg{constructor(e,n,r){super(e,n,WT(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _r(this.firestore,null,new Zs(e))}withConverter(e){return new hg(this.firestore,e,this._path)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy="AsyncQueue";class ky{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new KT(this,"async_queue_retry"),this._c=()=>{const r=Jd();r&&sr(jy,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Jd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Jd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new xl;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!BT(e))throw e;sr(jy,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Sw("INTERNAL UNHANDLED ERROR: ",Ty(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=ug.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&Xl(47125,{Pc:Ty(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Ty(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class YT extends Iw{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new ky,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ky(e),this._firestoreClient=void 0,await e}}}function QT(t,e){const n=typeof t=="object"?t:t_(),r=typeof t=="string"?t:_f,s=Jv(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Uv("firestore");i&&qT(s,...i)}return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pr(pi.fromBase64String(e))}catch(n){throw new Xe(Je.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Pr(pi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Pr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(va(e,Pr._jsonSchema))return Pr.fromBase64String(e.bytes)}}Pr._jsonSchemaVersion="firestore/bytes/1.0",Pr._jsonSchema={type:Pt("string",Pr._jsonSchemaVersion),bytes:Pt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Xe(Je.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gs(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Xe(Je.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Xe(Je.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ps(this._lat,e._lat)||Ps(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ri._jsonSchemaVersion}}static fromJSON(e){if(va(e,ri._jsonSchema))return new ri(e.latitude,e.longitude)}}ri._jsonSchemaVersion="firestore/geoPoint/1.0",ri._jsonSchema={type:Pt("string",ri._jsonSchemaVersion),latitude:Pt("number"),longitude:Pt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:si._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(va(e,si._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new si(e.vectorValues);throw new Xe(Je.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}si._jsonSchemaVersion="firestore/vectorValue/1.0",si._jsonSchema={type:Pt("string",si._jsonSchemaVersion),vectorValues:Pt("object")};const JT=new RegExp("[~\\*/\\[\\]]");function XT(t,e,n){if(e.search(JT)>=0)throw Ny(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t);try{return new jw(...e.split("."))._internalPath}catch{throw Ny(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t)}}function Ny(t,e,n,r,s){let i=`Function ${e}() called with invalid data`;i+=". ";let o="";return new Xe(Je.INVALID_ARGUMENT,i+t+o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new _r(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ZT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Tw("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ZT extends kw{data(){return super.data()}}function Tw(t,e){return typeof e=="string"?XT(t,e):e instanceof jw?e._internalPath:e._delegate._internalPath}class rc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ji extends kw{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new bc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Tw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Xe(Je.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ji._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ji._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ji._jsonSchema={type:Pt("string",Ji._jsonSchemaVersion),bundleSource:Pt("string","DocumentSnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class bc extends Ji{data(e={}){return super.data(e)}}class vl{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new rc(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new bc(this._firestore,this._userDataWriter,r.key,r,new rc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Xe(Je.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(c=>{const u=new bc(s._firestore,s._userDataWriter,c.doc.key,c.doc,new rc(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new bc(s._firestore,s._userDataWriter,c.doc.key,c.doc,new rc(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,p=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),p=o.indexOf(c.doc.key)),{type:e6(c.type),doc:u,oldIndex:d,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Xe(Je.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=vl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=RT.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function e6(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xl(61501,{type:t})}}vl._jsonSchemaVersion="firestore/querySnapshot/1.0",vl._jsonSchema={type:Pt("string",vl._jsonSchemaVersion),bundleSource:Pt("string","QuerySnapshot"),bundleName:Pt("string"),bundle:Pt("string")};(function(e,n=!0){(function(s){xa=s})(Zv),Ul(new ao("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),c=new YT(new IT(r.getProvider("auth-internal")),new TT(o,r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Xe(Je.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fu(d.options.projectId,p)}(o,s),o);return i={useFetchStreams:n,...i},c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),Cs(gy,my,e),Cs(gy,my,"esm2020")})();const t6={apiKey:"AIzaSyCMkZr4Xz204NjvETje-Rhznf6ECDYiEnE",authDomain:"ethiostore-17d9f.firebaseapp.com",databaseURL:"https://ethiostore-17d9f-default-rtdb.firebaseio.com",projectId:"ethiostore-17d9f",storageBucket:"ethiostore-17d9f.appspot.com",messagingSenderId:"964518277159",appId:"1:964518277159:web:9404cace890edf88961e02"},Nw=N0().length>0?N0()[0]:e_(t6),Wt=ww(Nw);QT(Nw);const n6="https://gojo-teacher-web.onrender.com/api",ji="https://ethiostore-17d9f-default-rtdb.firebaseio.com";function ki(t){return!t||typeof t!="string"||!t.trim()||t==="null"||t==="undefined"?"/default-profile.png":t}function r6(){const[t,e]=y.useState(window.innerWidth>600),n=On(),[r,s]=y.useState(null),[i,o]=y.useState([]),[c,u]=y.useState([]),[d,p]=y.useState([]),[f,m]=y.useState(null),[k,_]=y.useState(!1),[N,A]=y.useState(!1),[b,w]=y.useState([]),v=y.useRef({}),R=(r==null?void 0:r.userId)||null;y.useEffect(()=>{const J=JSON.parse(localStorage.getItem("teacher"));if(!J){n("/login");return}const ye=async()=>{try{const Te=Lt(Wt,"Users"),P=(await vw(Te)).val()||{},Q=Object.values(P).find(oe=>oe.userId===J.userId);if(Q){const oe={...J,...Q};s(oe),localStorage.setItem("teacher",JSON.stringify(oe))}else s(J)}catch{s(J)}},ue=async Te=>{try{const te=Te||JSON.parse(localStorage.getItem("teacher"));if(!te||!te.userId){p([]);return}const[P,Q]=await Promise.all([X.get(`${ji}/Chats.json`),X.get(`${ji}/Users.json`)]),oe=P.data||{},G=Q.data||{}||{},L={};Object.entries(G).forEach(([se,ve])=>{ve&&ve.userId&&(L[ve.userId]=se)});const Y=Object.entries(oe).map(([se,ve])=>{const q=(ve.unread||{})[te.userId]||0;if(!q)return null;const he=ve.participants||{},we=Object.keys(he||{}).find($=>$!==te.userId);if(!we)return null;let U=we,Z=G[U];if(!Z){const $=L[we];$&&(U=$,Z=G[$])}Z||(Z={userId:we,name:we,profileImage:"/default-profile.png"});const O={pushKey:U,userId:Z.userId||we,name:Z.name||Z.username||we,profileImage:ki(Z.profileImage||Z.profile||"")},z=ve.lastMessage||{};return{id:se,title:z.text||"New message",adminName:O.name,adminProfile:O.profileImage,isMessage:!0,unreadForMe:q}}).filter(Boolean);p(Y)}catch{p([])}};ye(),K(),j(J),ue(J)},[]),y.useEffect(()=>{r&&console.log("Teacher object (debug):",r)},[r]);const K=async()=>{try{let ye=(await X.get(`${n6}/get_posts`)).data||[];!Array.isArray(ye)&&typeof ye=="object"&&(ye=Object.values(ye));const[ue,Te]=await Promise.all([X.get(`${ji}/School_Admins.json`),X.get(`${ji}/Users.json`)]),te=ue.data||{},P=Te.data||{},Q=Y=>{if(!Y)return{name:"Admin",profile:"/default-profile.png"};const se=te[Y];if(!se)return{name:Y,profile:"/default-profile.png"};const ve=se.userId,F=ve?P[ve]:null,q=(F==null?void 0:F.name)||(se==null?void 0:se.title)||Y,he=ki(F==null?void 0:F.profileImage);return{name:q,profile:he}},oe=ye.map(Y=>{const se=Y.postId||Y.id||Y.key||"",{name:ve,profile:F}=Q(Y.adminId);let q=[];Array.isArray(Y.likes)?q=Y.likes:Y.likes&&typeof Y.likes=="object"&&(q=Object.keys(Y.likes));const he=Y.time||Y.timestamp||Y.createdAt||null;return{...Y,postId:se,adminName:ve,adminProfile:F,time:he,likes:q,likeCount:Y.likeCount||q.length||0}});oe.sort((Y,se)=>{const ve=Y.time?new Date(Y.time).getTime():0;return(se.time?new Date(se.time).getTime():0)-ve}),o(oe);const Se=JSON.parse(localStorage.getItem("teacher")),G=E(Se==null?void 0:Se.userId),L=oe.filter(Y=>!G.includes(Y.postId)).slice(0,5).map(Y=>{var se;return{id:Y.postId,title:((se=Y.message)==null?void 0:se.substring(0,80))||"Untitled post",adminName:Y.adminName,adminProfile:Y.adminProfile}});u(L)}catch(J){console.error("Error fetching posts/admins handshake:",J)}},ee=async J=>{try{if(!R)return;const ye=await X.post("https://gojo-teacher-web.onrender.com/api/like_post",{postId:J,teacherId:R});if(ye.data.success){const ue=ye.data.liked,Te=ye.data.likeCount;o(te=>te.map(P=>P.postId===J?{...P,likeCount:Te,likes:{...P.likes,[R]:ue?!0:void 0}}:P))}}catch(ye){console.error("Error liking post:",ye)}},E=J=>JSON.parse(localStorage.getItem(`seen_posts_${J}`))||[],x=(J,ye)=>{const ue=E(J);ue.includes(ye)||localStorage.setItem(`seen_posts_${J}`,JSON.stringify([...ue,ye]))},C=()=>{localStorage.removeItem("teacher"),n("/login")},j=async(J=r)=>{try{const ye=J||JSON.parse(localStorage.getItem("teacher"));if(!ye||!ye.userId){w([]);return}const[ue,Te]=await Promise.all([X.get(`${ji}/Chats.json`),X.get(`${ji}/Users.json`)]),te=ue.data||{},Q=Te.data||{}||{},oe={};Object.entries(Q).forEach(([G,L])=>{L&&L.userId&&(oe[L.userId]=G)});const Se=Object.entries(te).map(([G,L])=>{const se=(L.unread||{})[ye.userId]||0;if(!se)return null;const ve=L.participants||{},F=Object.keys(ve||{}).find(Z=>Z!==ye.userId);if(!F)return null;let q=F,he=Q[q];if(!he){const Z=oe[F];Z&&(q=Z,he=Q[Z])}he||(he={userId:F,name:F,profileImage:"/default-profile.png"});const we={pushKey:q,userId:he.userId||F,name:he.name||he.username||F,profileImage:ki(he.profileImage||he.profile||"")},U=L.lastMessage||{};return{chatId:G,contact:we,displayName:we.name,profile:we.profileImage,lastMessageText:U.text||"",lastMessageTime:U.timeStamp||U.time||null,unreadForMe:se}}).filter(Boolean).sort((G,L)=>(L.lastMessageTime||0)-(G.lastMessageTime||0));w(Se)}catch(ye){console.error("Error fetching conversations:",ye),w([])}},T=b.reduce((J,ye)=>J+(ye.unreadForMe||0),0),D=r||{},I=()=>e(!1);return y.useEffect(()=>{const J=()=>{window.innerWidth<=600?e(!1):e(!0)};return window.addEventListener("resize",J),J(),()=>window.removeEventListener("resize",J)},[]),a.jsxs("div",{className:"dashboard-page",children:[a.jsxs("nav",{className:"top-navbar",children:[window.innerWidth<=600&&!t&&a.jsx("button",{className:"sidebar-arrow-btn",style:{position:"fixed",left:0,top:180,transform:"none",zIndex:1300,background:"#fff",border:"none",borderRadius:"0 8px 8px 0",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",padding:8,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:()=>e(!0),"aria-label":"Open sidebar menu",children:a.jsx(Ep,{size:22})}),a.jsx("h2",{children:"Gojo Dashboard"}),a.jsxs("div",{className:"nav-right",children:[a.jsxs("div",{className:"icon-circle",style:{position:"relative"},children:[a.jsxs("div",{onClick:()=>_(!k),style:{cursor:"pointer",position:"relative"},"aria-label":"Show notifications",tabIndex:0,role:"button",onKeyPress:J=>{J.key==="Enter"&&_(!k)},children:[a.jsx(Qr,{size:22}),c.length+d.length>0&&a.jsx("span",{style:{position:"absolute",top:-6,right:-6,background:"red",color:"#fff",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:c.length+d.length})]}),k&&a.jsx("div",{className:"notification-popup",children:[...c,...d].length>0?[...c,...d].map((J,ye)=>a.jsxs("div",{className:"notification-item",onClick:()=>{J.isMessage?(n("/all-chat"),_(!1)):(R&&x(R,J.id),u(ue=>ue.filter(Te=>Te.id!==J.id)),_(!1))},tabIndex:0,role:"button","aria-label":J.isMessage?"See message notification "+J.title:"See post notification "+J.title,onKeyPress:ue=>{ue.key==="Enter"&&(J.isMessage?(n("/all-chat"),_(!1)):(R&&x(R,J.id),u(Te=>Te.filter(te=>te.id!==J.id)),_(!1)))},children:[a.jsx("img",{src:ki(J.adminProfile),alt:J.adminName||"Admin",className:"notification-profile"}),a.jsxs("div",{children:[a.jsx("strong",{children:J.adminName}),a.jsx("div",{className:"notification-title",children:J.title}),J.isMessage&&a.jsx("span",{style:{color:"#0b78f6",fontSize:12,fontWeight:500},children:"[Message]"})]})]},J.id||ye)):a.jsx("div",{className:"no-notifications",children:"No notifications"})})]}),a.jsxs("div",{className:"icon-circle",style:{position:"relative",marginLeft:12,cursor:"pointer"},onClick:()=>n("/all-chat"),"aria-label":"Go to all chat",tabIndex:0,role:"button",onKeyPress:J=>{J.key==="Enter"&&n("/all-chat")},children:[a.jsx(Yr,{size:22}),T>0&&a.jsx("span",{style:{position:"absolute",top:1,right:0,background:"#f60b0b",color:"#fff",borderRadius:"50%",minWidth:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 5px"},children:T})]}),a.jsx("div",{className:"icon-circle",onClick:()=>n("/settings"),children:a.jsx(Er,{})}),a.jsx("img",{src:ki(D.profileImage),alt:"teacher",className:"profile-img"})]})]}),a.jsxs("div",{className:"google-dashboard",children:[window.innerWidth<=600&&t&&a.jsx("div",{className:"sidebar-overlay visible",onClick:I,style:{display:"block"}}),a.jsxs("div",{className:`google-sidebar${t?" open":""}`,style:window.innerWidth<=600?{position:"fixed",top:64,left:t?0:"-220px",width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",zIndex:1200,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto",transition:"left 0.25s cubic-bezier(.4,0,.2,1)"}:{position:"fixed",top:64,left:0,width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.04)",zIndex:900,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto"},children:[r&&a.jsxs("div",{className:"sidebar-profile",children:[a.jsx("div",{className:"sidebar-img-circle",children:a.jsx("img",{src:r.profileImage||"/default-profile.png",alt:"profile",style:{width:"100%",height:"100%",objectFit:"cover",border:"none",boxShadow:"none"}})}),a.jsx("h3",{children:r.name}),a.jsx("p",{children:r.username})]}),a.jsxs("div",{className:"sidebar-menu",children:[a.jsxs(xe,{className:"sidebar-btn",to:"/dashboard",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[a.jsx(Xr,{})," Home"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/students",children:[a.jsx(He,{})," Students"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/admins",children:[a.jsx(He,{})," Admins"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/parents",children:[a.jsx(Jr,{})," Parents"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/marks",children:[a.jsx(br,{})," Marks"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/attendance",children:[a.jsx(He,{})," Attendance"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/schedule",children:[a.jsx(He,{})," Schedule"]}),a.jsxs("button",{className:"sidebar-btn logout-btn",onClick:C,children:[a.jsx(Zr,{})," Logout"]})]})]}),a.jsx("div",{className:"google-main posts-full-mobile",children:a.jsxs("div",{className:"posts-container",children:[i.length===0&&a.jsx("p",{children:"No posts available"}),i.map(J=>a.jsxs("div",{ref:ye=>v.current[J.postId]=ye,className:"post-box",style:{border:f===J.postId?"2px solid #4b6cb7":"1px solid #eee",backgroundColor:f===J.postId?"#fff9c4":"#fff",transition:"background-color 0.4s, border 0.2s",marginBottom:18},children:[a.jsxs("div",{className:"fb-post-top",children:[a.jsx("img",{src:ki(J.adminProfile),alt:J.adminName||"Admin"}),a.jsxs("div",{className:"post-info",children:[a.jsx("h4",{style:{margin:0,fontSize:17,fontWeight:700},children:J.adminName||"Admin"}),a.jsx("div",{style:{fontSize:12,color:"#666"},children:J.time?new Date(J.time).toLocaleString():""})]})]}),a.jsx("div",{style:{marginTop:12,fontSize:17,lineHeight:1.6,color:"#222",wordBreak:"break-word",paddingLeft:"10px"},children:J.message}),J.postUrl&&a.jsx("img",{src:J.postUrl,alt:"post media",className:"post-media",style:{width:"100%",borderRadius:8,marginTop:8,maxHeight:400,objectFit:"cover"}}),a.jsx("div",{className:"post-actions",style:{marginTop:14,display:"flex",alignItems:"center",gap:18},children:a.jsxs("button",{onClick:()=>ee(J.postId),style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 18px",background:"#f0f2f5",border:"none",borderRadius:8,cursor:"pointer",fontSize:"16px",fontWeight:"500",color:J.likes&&R&&J.likes[R]?"#e0245e":"#555",transition:"all 0.2s ease"},children:[J.likes&&R&&J.likes[R]?a.jsx(EI,{style:{color:"#e0245e",fontSize:"16px"}}):a.jsx(TI,{style:{fontSize:"16px"}}),J.likes&&R&&J.likes[R]?"Liked":"Like",a.jsx("span",{style:{marginLeft:8,fontSize:"15px",color:"#777"},children:J.likeCount||0})]})})]},J.postId))]})}),a.jsx("style",{children:`
          .posts-container {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            justify-content: flex-start;
            margin-left: 120px;
          }
          .post-box {
            margin-left: 0;
            margin-right: auto;
            margin-top: 12px;
          }
          @media (max-width: 600px) {
            .posts-container {
              margin-left: 0 !important;
            }
            .post-box {
              margin-top: 0 !important;
            }
          }
          @media (max-width: 600px) {
            .posts-full-mobile, .posts-container, .post-box {
              width: 100vw !important;
              max-width: 100vw !important;
              margin: 0 !important;
              padding: 0 !important;
              border-radius: 0 !important;
              box-shadow: none !important;
            }
            .posts-container {
              align-items: stretch;
            }
            .google-sidebar {
              left: -220px;
              transition: left 0.25s cubic-bezier(.4,0,.2,1);
            }
            .google-sidebar.open {
              left: 0 !important;
              z-index: 1202;
            }
            .sidebar-overlay {
              display: block;
              position: fixed;
              inset: 0;
              background: rgba(0,0,0,0.35);
              z-index: 1200;
              transition: opacity 0.2s;
            }
            .sidebar-arrow-btn {
              display: flex !important;
            }
          }
        `})]})]})}const Xd=(t,e)=>[t,e].sort().join("_"),s6=(t="")=>t?String(t).replace(/^course_/,"").replace(/_[0-9A-Za-z]+$/,"").replace(/_/g," ").trim().split(/\s+/).map(n=>n?n[0].toUpperCase()+n.slice(1).toLowerCase():"").join(" "):"Unknown",i6="https://gojo-teacher-web.onrender.com/api",Yt="https://ethiostore-17d9f-default-rtdb.firebaseio.com",Zd=t=>{if(!t)return null;let e;if(typeof t=="number"?e=new Date(t):e=new Date(String(t)),isNaN(e.getTime()))return null;const n=new Date;let r=n.getFullYear()-e.getFullYear();const s=n.getMonth()-e.getMonth();return(s<0||s===0&&n.getDate()<e.getDate())&&r--,r},o6=t=>{if(!t)return"";const e=new Date(Number(t));return`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`},l6=t=>{if(!t)return"";const e=new Date(Number(t)),n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()),s=new Date(e.getFullYear(),e.getMonth(),e.getDate()),i=r-s,o=Math.floor(i/(24*60*60*1e3));return o===0?"Today":o===1?"Yesterday":o>1&&o<7?`${o} days ago`:e.toLocaleDateString()},eh=(t,e)=>!t||!e?null:Object.values(t).find(n=>String(n==null?void 0:n.userId)===String(e))||null,a6=({student:t,selected:e,onClick:n})=>a.jsxs("div",{onClick:()=>n(t),style:{width:"100%",borderRadius:"12px",padding:"15px",display:"flex",alignItems:"center",gap:"20px",cursor:"pointer",background:e?"#e0e7ff":"#fff",border:e?"2px solid #4b6cb7":"1px solid #ddd",boxShadow:e?"0 6px 15px rgba(75,108,183,0.3)":"0 4px 10px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},children:[a.jsx("img",{src:t.profileImage||"/default-profile.png",alt:t.name,style:{width:"50px",height:"50px",borderRadius:"50%",objectFit:"cover",border:e?"3px solid #4b6cb7":"3px solid red"}}),a.jsxs("div",{children:[a.jsx("h3",{style:{margin:0},children:t.name}),a.jsxs("p",{style:{margin:"4px 0",color:"#555"},children:["Grade ",t.grade," - Section ",t.section]})]})]});function c6(){const[t,e]=y.useState(typeof window<"u"?window.innerWidth>600:!0),[n,r]=y.useState([]),[s,i]=y.useState(""),[o,c]=y.useState("All"),[u,d]=y.useState("All"),[p,f]=y.useState([]),[m,k]=y.useState("details"),[_,N]=y.useState([]),[A,b]=y.useState(""),[w,v]=y.useState(null),[R,K]=y.useState(!1),[ee,E]=y.useState(!1),[x,C]=y.useState("daily"),[j,T]=y.useState({}),[D,I]=y.useState({}),[J,ye]=y.useState({}),[ue,Te]=y.useState(null),[te,P]=y.useState([]),[Q,oe]=y.useState(""),[Se,G]=y.useState(!1),[L,Y]=y.useState({}),[se,ve]=y.useState(null),[F,q]=y.useState(null),[he,we]=y.useState(!1),[U,Z]=y.useState([]),[O,z]=y.useState(""),$=y.useRef(null),ie=JSON.parse(localStorage.getItem("teacher"))||{},W=String(ie.userId||""),[re,ne]=y.useState({}),[ce,fe]=y.useState([]),[de,Ne]=y.useState("daily"),[et,Ae]=y.useState("All"),[Ge,Be]=y.useState({}),[mn,lt]=y.useState({}),[Ot,Tt]=y.useState(!0),[mt,yn]=y.useState([]),[Fs,Kn]=y.useState("semester2"),[ko,Dn]=y.useState({}),[Ir,Dt]=y.useState([]),[Gn,bt]=y.useState([]),[qn,jr]=y.useState(!1),[_i,_a]=y.useState(null),Ju=y.useRef({}),qt=On(),[fg,pg]=y.useState(!1),[wi,To]=y.useState([]);y.useEffect(()=>{const M=JSON.parse(localStorage.getItem("teacher"));if(!M){qt("/login");return}ve(M),No(M)},[qt]),y.useEffect(()=>{const M=JSON.parse(localStorage.getItem("teacher"));if(!M){qt("/login");return}v(M)},[qt]),y.useEffect(()=>{(async()=>{try{let be=(await X.get(`${i6}/get_posts`)).data||[];!Array.isArray(be)&&typeof be=="object"&&(be=Object.values(be));const[Fe,Me]=await Promise.all([X.get(`${Yt}/School_Admins.json`),X.get(`${Yt}/Users.json`)]),rt=Fe.data||{},qe=Me.data||{},Ie=JSON.parse(localStorage.getItem("teacher")),Ye=wa(Ie==null?void 0:Ie.userId),De=Ce=>{const We=Ce.adminId||Ce.posterAdminId||Ce.poster||Ce.admin||null;if(We&&rt[We]){const ft=rt[We],Re=ft.userId,Oe=qe[Re]||null,me=Oe&&Oe.name||ft.name||Ce.adminName||"Admin",je=Oe&&Oe.profileImage||ft.profileImage||Ce.adminProfile||"/default-profile.png";return{name:me,profile:je}}return{name:Ce.adminName||"Admin",profile:Ce.adminProfile||"/default-profile.png"}},Ee=be.slice().sort((Ce,We)=>{const ft=Ce.time?new Date(Ce.time).getTime():0;return(We.time?new Date(We.time).getTime():0)-ft}).filter(Ce=>Ce.postId&&!Ye.includes(Ce.postId)).slice(0,5).map(Ce=>{var ft;const We=De(Ce);return{id:Ce.postId,title:((ft=Ce.message)==null?void 0:ft.substring(0,50))||"Untitled post",adminName:We.name,adminProfile:We.profile}});bt(Ee)}catch(le){console.error("Error fetching notifications:",le)}})()},[]);function wa(M){return JSON.parse(localStorage.getItem(`seen_posts_${M}`))||[]}const No=async(M=se)=>{try{const le=M||JSON.parse(localStorage.getItem("teacher"));if(!le||!le.userId){To([]);return}const[be,Fe]=await Promise.all([X.get(`${Yt}/Chats.json`),X.get(`${Yt}/Users.json`)]),Me=be.data||{},qe=Fe.data||{}||{},Ie={};Object.entries(qe).forEach(([De,Ee])=>{Ee&&Ee.userId&&(Ie[Ee.userId]=De)});const Ye=Object.entries(Me).map(([De,Ee])=>{const We=(Ee.unread||{})[le.userId]||0;if(!We)return null;const ft=Ee.participants||{},Re=Object.keys(ft||{}).find(Pe=>Pe!==le.userId);if(!Re)return null;let Oe=Re,me=qe[Oe];if(!me){const Pe=Ie[Re];Pe&&(Oe=Pe,me=qe[Pe])}me||(me={userId:Re,name:Re,profileImage:"/default-profile.png"});const je={pushKey:Oe,userId:me.userId||Re,name:me.name||me.username||Re,profileImage:me.profileImage||me.profile||"/default-profile.png"},tt=Ee.lastMessage||{};return{chatId:De,contact:je,displayName:je.name,profile:je.profileImage,lastMessageText:tt.text||"",lastMessageTime:tt.timeStamp||tt.time||null,lastMessageSeen:!!tt.seen,lastMessageSeenAt:tt.seenAt||tt.seenAt||null,lastMessageSenderId:tt.senderId||null,unreadForMe:We}}).filter(Boolean).sort((De,Ee)=>(Ee.lastMessageTime||0)-(De.lastMessageTime||0));To(Ye)}catch(le){console.error("Error fetching conversations:",le),To([])}},Mn=wi.reduce((M,le)=>M+(le.unreadForMe||0),0);y.useEffect(()=>{if(!(w!=null&&w.userId))return;let M=!1;return(async()=>{Tt(!0);try{const[be,Fe,Me,rt,qe]=await Promise.all([X.get(`${Yt}/Students.json`),X.get(`${Yt}/Users.json`),X.get(`${Yt}/Courses.json`),X.get(`${Yt}/TeacherAssignments.json`),X.get(`${Yt}/Teachers.json`)]),Ie=qe.data||{},Ye=Object.entries(Ie).find(([Re,Oe])=>Oe.userId===w.userId);if(!Ye){console.warn("Teacher not found in Teachers node"),M||(r([]),Tt(!1),i("No teacher assignment found"));return}const De=Ye[0],Ee=Object.values(rt.data||{}).filter(Re=>Re.teacherId===De).map(Re=>Re.courseId),Ce=Fe.data||{};ye(Ce);const We=Re=>eh(Ce,Re),ft=Object.entries(be.data||{}).map(([Re,Oe])=>{var xt,st;const me=We(Oe.userId),je=Oe.parentName||((xt=Oe.parent)==null?void 0:xt.name)||(me==null?void 0:me.parentName)||Oe.rawParentName||null,tt=Oe.parentPhone||((st=Oe.parent)==null?void 0:st.phone)||(me==null?void 0:me.parentPhone)||Oe.rawParentPhone||null,Pe=(me==null?void 0:me.dob)||(me==null?void 0:me.birthDate)||Oe.dob||Oe.birthDate||null,Et=Zd(Pe);return{...Oe,studentId:Re,name:(me==null?void 0:me.name)||Oe.name||"Unknown",email:(me==null?void 0:me.email)||Oe.email||"",profileImage:(me==null?void 0:me.profileImage)||Oe.profileImage||"/default-profile.png",phone:(me==null?void 0:me.phone)||Oe.phone||"",gender:(me==null?void 0:me.gender)||Oe.gender||"",dob:Pe,age:Et,parentName:je||null,parentPhone:tt||null,raw:Oe}}).filter(Re=>Ee.some(Oe=>{var je;const me=(je=Me.data)==null?void 0:je[Oe];return me&&me.grade===Re.grade&&me.section===Re.section}));M||(r(ft),i(""))}catch(be){console.error(be),M||i("Failed to load students")}finally{M||Tt(!1)}})(),()=>M=!0},[w]),y.useEffect(()=>{var Fe,Me,rt,qe,Ie,Ye;if(!F){Te(null);return}const M={fullName:F.name||"",phone:F.phone||((Fe=F.raw)==null?void 0:Fe.phone)||"",gender:F.gender||((Me=F.raw)==null?void 0:Me.gender)||"",email:F.email||"",grade:F.grade||"",section:F.section||"",parentName:F.parentName||((rt=F.raw)==null?void 0:rt.parentName)||"",parentPhone:F.parentPhone||((qe=F.raw)==null?void 0:qe.parentPhone)||"",dob:F.dob||((Ie=F.raw)==null?void 0:Ie.dob)||"",age:F.age??Zd(F.dob||((Ye=F.raw)==null?void 0:Ye.dob))??"",profileImage:F.profileImage||"/default-profile.png"};Te(M);let le=!1;return(async()=>{var De,Ee,Ce,We,ft,Re,Oe;try{let me=J;(!me||Object.keys(me).length===0)&&(me=(await X.get(`${Yt}/Users.json`)).data||{},ye(me));const je=eh(me,F.userId)||{},tt=((De=F.raw)==null?void 0:De.parentId)||((Ee=F.raw)==null?void 0:Ee.parentUserId)||(je==null?void 0:je.parentId)||(je==null?void 0:je.parentUserId)||null,Pe=tt?eh(me,tt):null,Et=(Pe==null?void 0:Pe.name)||((Ce=F.raw)==null?void 0:Ce.parentName)||F.parentName||"",xt=(Pe==null?void 0:Pe.phone)||((We=F.raw)==null?void 0:We.parentPhone)||F.parentPhone||"",st=(je==null?void 0:je.phone)||F.phone||((ft=F.raw)==null?void 0:ft.phone)||"",Qn=(je==null?void 0:je.gender)||F.gender||((Re=F.raw)==null?void 0:Re.gender)||"",ts=(je==null?void 0:je.email)||F.email||"",ka=(je==null?void 0:je.dob)||(je==null?void 0:je.birthDate)||F.dob||((Oe=F.raw)==null?void 0:Oe.dob)||null,Zu=Zd(ka)??F.age??"",ed={fullName:(je==null?void 0:je.name)||F.name||"",phone:st,gender:Qn,email:ts,grade:F.grade||"",section:F.section||"",parentName:Et,parentPhone:xt,dob:ka||"",age:Zu,profileImage:(je==null?void 0:je.profileImage)||F.profileImage||"/default-profile.png",userRec:je,parentRec:Pe};le||Te(ed)}catch(me){console.error("Failed to derive student details",me)}})(),()=>{le=!0}},[F,J]),y.useEffect(()=>{if(!F)return;let M=!1;return(async()=>{var be,Fe;try{const rt=(await X.get(`${Yt}/Parents.json`)).data||{},qe=[(be=F.raw)==null?void 0:be.parentId,(Fe=F.raw)==null?void 0:Fe.parentUserId,F.parentId,F.parentUserId].filter(Boolean);let Ie=null;for(const Ee of qe){if(rt[Ee]){Ie=rt[Ee];break}const Ce=Object.values(rt).find(We=>String(We.userId)===String(Ee));if(Ce){Ie=Ce;break}}if(!Ie){const Ee=F.studentId||F.userId;for(const Ce of Object.values(rt)){const We=(Ce==null?void 0:Ce.children)||{};if(Object.values(We).find(Re=>String(Re==null?void 0:Re.studentId)===String(Ee))){Ie=Ce;break}}}let Ye=null,De=null;if(Ie&&(Ye=Ie.name||Ie.displayName||null,De=Ie.phone||Ie.phoneNumber||Ie.contact||null,(!Ye||!De)&&Ie.userId))try{const Ce=(await X.get(`${Yt}/Users.json`)).data||{},We=Object.values(Ce).find(ft=>String(ft.userId)===String(Ie.userId));We&&(Ye=Ye||We.name||null,De=De||We.phone||null)}catch{}M||Te(Ee=>({...Ee||{},parentName:Ye||(Ee==null?void 0:Ee.parentName)||"",parentPhone:De||(Ee==null?void 0:Ee.parentPhone)||""}))}catch(Me){console.error("Error resolving parent info:",Me)}})(),()=>M=!0},[F]),y.useEffect(()=>{const M=document.querySelector(".chat-messages");M&&(M.scrollTop=M.scrollHeight)},[_]),y.useEffect(()=>{if(o==="All")f([]),d("All");else{const M=[...new Set(n.filter(le=>le.grade===o).map(le=>le.section))];f(M),d("All")}},[o,n]);const Sa=n.filter(M=>!(o!=="All"&&M.grade!==o||u!=="All"&&M.section!==u)),hr=[...new Set(n.map(M=>M.grade))].sort();y.useEffect(()=>{if(!(F!=null&&F.studentId)&&!(F!=null&&F.userId)){Dt([]);return}let M=!1;return(async()=>{K(!0);try{const[be,Fe,Me,rt]=await Promise.all([X.get(`${Yt}/Attendance.json`),X.get(`${Yt}/Teachers.json`),X.get(`${Yt}/Users.json`),X.get(`${Yt}/TeacherAssignments.json`)]),qe=be.data||{},Ie=Fe.data||{},Ye=Me.data||{},De=rt.data||{},Ee=[];Object.entries(qe).forEach(([Ce,We])=>{!We||typeof We!="object"||Object.entries(We).forEach(([ft,Re])=>{if(!Re||typeof Re!="object")return;let me=Re[F.studentId]??Re[F.userId];if(!me&&Re.students&&(me=Re.students[F.studentId]??Re.students[F.userId]),!me){const Et=Object.entries(Re).find(([xt,st])=>!st||typeof st!="object"?!1:!!(st.userId&&(String(st.userId)===String(F.userId)||String(st.userId)===String(F.studentId))));Et&&(me=Et[1])}if(!me)return;let je="absent",tt="",Pe=Ce;if(typeof me=="string")je=me;else if(typeof me=="object"){if(je=me.status||me.attendance_status||Object.values(me)[0]||"present",tt=me.teacherName||me.teacher||me.tutor||"",!tt){const Et=me.teacherId||me.teacherKey||null;if(Et&&Ie[Et]){const xt=Ie[Et];if(xt.userId){const st=Object.values(Ye).find(Qn=>String(Qn==null?void 0:Qn.userId)===String(xt.userId));tt=(st==null?void 0:st.name)||xt.name||tt}else tt=xt.name||tt}}if(!tt){const Et=me.teacherUserId||me.teacherUser||me.takenBy||null;if(Et){const xt=Object.values(Ye).find(st=>String(st==null?void 0:st.userId)===String(Et));xt&&(tt=xt.name||tt)}}Pe=me.subject||Ce}if(!tt){const Et=Object.values(De).find(xt=>String(xt.courseId)===String(Ce));if(Et&&Et.teacherId){const xt=Et.teacherId,st=Ie[xt];if(st)if(st.userId){const Qn=Object.values(Ye).find(ts=>String(ts==null?void 0:ts.userId)===String(st.userId));tt=(Qn==null?void 0:Qn.name)||st.name||tt}else tt=st.name||tt}}Ee.push({courseId:Ce,date:ft,status:String(je).toLowerCase(),teacherName:tt,subject:Pe})})}),M||(Ee.sort((Ce,We)=>new Date(We.date)-new Date(Ce.date)),Dt(Ee))}catch(be){console.error("Attendance fetch error:",be),M||Dt([])}finally{M||K(!1)}})(),()=>{M=!0}},[F]);const zs=Xt.useMemo(()=>Ir.map(M=>({date:M.date,courseId:M.courseId,teacherName:M.teacherName||"",status:M.status||"absent"})),[Ir]),ba=Xt.useMemo(()=>!zs||zs.length===0?{}:zs.reduce((M,le)=>{const be=le.courseId||le.subject||"unknown";return M[be]||(M[be]=[]),M[be].push(le),M},{}),[zs]),Ro=M=>{if(!M||M.length===0)return 0;const le=M.filter(be=>be.status==="present"||be.status==="late").length;return Math.round(le/M.length*100)},Si=M=>{Be(le=>({...le,[M]:!le[M]}))},Ea=()=>{localStorage.removeItem("teacher"),qt("/login")};y.useEffect(()=>{if(!F){ne({});return}(async()=>{Tt(!0);try{const le=ww(),be=await vw(Lt(le,"ClassMarks"));if(!be.exists()){ne({}),Tt(!1);return}const Fe=be.val(),Me={},rt=new Set([F.studentId,F.userId,F.userId?`student_${F.userId}`:null].filter(Boolean));Object.entries(Fe).forEach(([qe,Ie])=>{if(!Ie||typeof Ie!="object")return;const Ye=Object.entries(Ie).find(([De,Ee])=>!!(rt.has(De)||Ee&&typeof Ee=="object"&&(Ee.userId&&rt.has(Ee.userId)||Ee.studentId&&rt.has(Ee.studentId))));if(Ye){const[,De]=Ye;Me[qe]=De}}),ne(Me)}catch(le){console.error("Failed to fetch marks:",le),ne({})}finally{Tt(!1)}})()},[F]),y.useEffect(()=>{if(!(F!=null&&F.userId))return;async function M(){try{const le=await X.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/StudentNotes/${F==null?void 0:F.userId}.json`);if(!le.data){P([]);return}const be=Object.entries(le.data).map(([Fe,Me])=>({id:Fe,...Me}));be.sort((Fe,Me)=>new Date(Me.createdAt)-new Date(Fe.createdAt)),P(be)}catch(le){console.error("Failed to fetch teacher notes",le),P([])}}M()},[F]);const Xu=async()=>{if(!Q.trim()||!w||!F)return;G(!0);const M={teacherId:w.userId,teacherName:w.name,note:Q.trim(),createdAt:new Date().toISOString()};try{await X.post(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/StudentNotes/${F==null?void 0:F.userId}.json`,M),P(le=>[M,...le]),oe("")}catch(le){console.error("Error saving note",le)}finally{G(!1)}},Ca=()=>{var M;(M=$.current)==null||M.scrollIntoView({behavior:"smooth"})};y.useEffect(()=>{Ca()},[U]),y.useEffect(()=>{if(!W||!F)return;const M=Xd(W,F.userId),le=Lt(Wt,`Chats/${M}/messages`),be=Qi(le,Fe=>{const Me=Fe.val()||{},rt=Object.entries(Me).map(([qe,Ie])=>({id:qe,...Ie,isTeacher:Ie.senderId===W})).sort((qe,Ie)=>qe.timeStamp-Ie.timeStamp);Z(rt)});return()=>be()},[W,F]),y.useEffect(()=>{if(!ee||!F||!W||!U||U.length===0)return;const M=U.filter(Me=>String(Me.receiverId)===String(W)&&!Me.seen);if(M.length===0)return;const le=Xd(W,F.userId),be=Date.now(),Fe={messages:{},unread:{}};M.forEach(Me=>{Fe.messages[Me.id]={...Fe.messages[Me.id]||{},seen:!0,seenAt:be}}),Fe.unread[W]=null,Fe.lastMessage={seen:!0,seenAt:be},X.patch(`${Yt}/Chats/${le}.json`,Fe).catch(Me=>console.error("Failed to mark messages seen:",Me))},[ee,U,F,W]),y.useEffect(()=>{var M;(M=$.current)==null||M.scrollIntoView({behavior:"smooth"})},[U]);const Ia=async()=>{if(!O.trim()||!F)return;const M=W,le=F.userId,be=Xd(M,le),Fe=Date.now(),Me={senderId:M,receiverId:le,type:"text",text:O,seen:!1,timeStamp:Fe};await X.post(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${be}/messages.json`,Me),await X.patch(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${be}.json`,{participants:{[M]:!0,[le]:!0},lastMessage:{text:O,senderId:M,seen:!1,timeStamp:Fe},unread:{[le]:1}}),z("")},[Yn,ja]=Xt.useState(window.innerWidth<window.innerHeight);return Xt.useEffect(()=>{const M=()=>{ja(window.innerWidth<window.innerHeight)};return window.addEventListener("resize",M),()=>window.removeEventListener("resize",M)},[]),y.useEffect(()=>{const M=document.querySelector(".chat-messages");M&&(M.scrollTop=M.scrollHeight)},[_]),a.jsxs("div",{className:"dashboard-page",children:[a.jsxs("nav",{className:"top-navbar",children:[a.jsx("h2",{children:"Gojo Dashboard"}),a.jsxs("div",{className:"nav-right",children:[a.jsxs("div",{className:"icon-circle",children:[a.jsxs("div",{onClick:()=>jr(!qn),style:{cursor:"pointer",position:"relative"},children:[a.jsx(Qr,{size:24}),Gn.length+Mn>0&&a.jsx("span",{style:{position:"absolute",top:-5,right:-5,background:"red",color:"white",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:Gn.length+Mn})]}),qn&&a.jsxs("div",{style:{position:"absolute",top:30,right:0,width:300,maxHeight:400,overflowY:"auto",background:"#fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",borderRadius:8,zIndex:100},children:[Gn.length>0&&Gn.map((M,le)=>a.jsxs("div",{onClick:()=>{bt(be=>be.filter((Fe,Me)=>Me!==le)),jr(!1),qt("/dashboard"),setTimeout(()=>{const be=Ju.current[M.id];be&&(be.scrollIntoView({behavior:"smooth",block:"center"}),_a(M.id),setTimeout(()=>_a(null),3e3))},150)},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:M.adminProfile,alt:M.adminName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:M.adminName}),a.jsx("p",{style:{margin:0,fontSize:12},children:M.title})]})]},M.id||le)),Mn>0&&wi.filter(M=>M.unreadForMe>0).map((M,le)=>a.jsxs("div",{onClick:()=>{jr(!1),qt("/all-chat")},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:M.profile||"/default-profile.png",alt:M.displayName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:M.displayName}),a.jsxs("p",{style:{margin:0,fontSize:12,color:"#0b78f6",display:"flex",alignItems:"center",gap:8},children:[M.lastMessageSenderId===W?a.jsx("span",{style:{color:M.lastMessageSeen?"#0bda63":"#cbd5e1"},children:M.lastMessageSeen?"":""}):null,a.jsx("span",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:160},children:M.lastMessageText||"New message"}),M.lastMessageSeenAt&&a.jsx("span",{style:{marginLeft:6,color:"#64748b",fontSize:11},children:new Date(M.lastMessageSeenAt).toLocaleTimeString()})]})]})]},M.chatId||le)),Gn.length===0&&Mn===0&&a.jsx("div",{style:{padding:15},children:"No notifications"})]})]}),a.jsx("div",{className:"icon-circle",style:{position:"relative",marginLeft:12},children:a.jsxs("div",{onClick:()=>qt("/all-chat"),style:{cursor:"pointer",position:"relative"},children:[a.jsx(Yr,{size:22}),Mn>0&&a.jsx("span",{style:{position:"absolute",top:-6,right:-6,background:"#f60b0b",color:"#fff",borderRadius:"50%",minWidth:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 5px"},children:Mn})]})}),a.jsx("div",{className:"icon-circle",onClick:()=>qt("/settings"),children:a.jsx(Er,{})}),a.jsx("img",{src:(se==null?void 0:se.profileImage)||"/default-profile.png"})]})]}),a.jsxs("div",{className:"google-dashboard",children:[typeof window<"u"&&y.useEffect(()=>{const M=()=>{window.innerWidth<=600?e(!1):e(!0)};return window.addEventListener("resize",M),M(),()=>window.removeEventListener("resize",M)},[]),typeof window<"u"&&window.innerWidth<=600&&!t&&a.jsx("button",{className:"sidebar-arrow-btn",style:{position:"fixed",left:0,top:0,zIndex:1300,background:"#fff",border:"none",borderRadius:"0 8px 8px 0",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",padding:8,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:()=>e(!0),"aria-label":"Open sidebar menu",children:a.jsx(Ep,{size:22})}),typeof window<"u"&&window.innerWidth<=600&&t&&a.jsx("div",{className:"sidebar-overlay visible",onClick:()=>e(!1),style:{display:"block",position:"fixed",inset:0,background:"rgba(0,0,0,0.35)",zIndex:1200}}),a.jsxs("div",{className:`google-sidebar${typeof window<"u"&&window.innerWidth<=600&&t?" open":""}`,style:typeof window<"u"&&window.innerWidth<=600?{position:"fixed",top:64,left:t?0:"-220px",width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",zIndex:1200,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto",borderRadius:0,transition:"left 0.25s cubic-bezier(.4,0,.2,1)"}:{position:"fixed",top:64,left:0,width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.04)",zIndex:900,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto",borderRadius:0},children:[a.jsx("style",{children:`
                    @media (max-width: 600px) {
                      .google-sidebar {
                        left: -220px;
                        transition: left 0.25s cubic-bezier(.4,0,.2,1);
                        border-radius: 0 !important;
                      }
                      .google-sidebar.open {
                        left: 0 !important;
                        z-index: 1202;
                        border-radius: 0 !important;
                      }
                      .sidebar-overlay {
                        display: block;
                        position: fixed;
                        inset: 0;
                        background: rgba(0,0,0,0.35);
                        z-index: 1200;
                        transition: opacity 0.2s;
                      }
                      .sidebar-arrow-btn {
                        display: flex !important;
                      }
                    }
                  `}),se&&a.jsxs("div",{className:"sidebar-profile",children:[a.jsx("div",{className:"sidebar-img-circle",children:a.jsx("img",{src:se.profileImage||"/default-profile.png",alt:"profile"})}),a.jsx("h3",{children:se.name}),a.jsx("p",{children:se.username})]}),a.jsxs("div",{className:"sidebar-menu",children:[a.jsxs(xe,{className:"sidebar-btn",to:"/dashboard",children:[a.jsx(Xr,{})," Home"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/students",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[a.jsx(He,{})," Students"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/admins",children:[a.jsx(He,{})," Admins"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/parents",children:[a.jsx(Jr,{})," Parents"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/marks",children:[a.jsx(br,{})," Marks"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/attendance",children:[a.jsx(He,{})," Attendance"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/schedule",children:[a.jsx(He,{})," Schedule"]}),a.jsxs("button",{className:"sidebar-btn logout-btn",onClick:Ea,children:[a.jsx(Zr,{})," Logout"]})]})]}),a.jsxs("div",{style:{flex:1,display:"flex",justifyContent:"center",padding:"30px"},children:[a.jsxs("div",{className:"student-list-card-responsive",style:{width:"300px",position:"relative",marginLeft:"50px",marginRight:Yn?0:"50px"},children:[a.jsx("style",{children:`
               @media (max-width: 600px) {
                 .student-list-card-responsive {
                   margin-left: -25px !important;
                   margin-right: auto !important;
                   width: 90vw !important;
                   max-width: 90vw !important;
                 }
               }
             `}),a.jsx("h2",{style:{textAlign:"center",marginBottom:"20px"},children:"My Students"}),a.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px",flexWrap:"wrap"},children:[a.jsx("button",{onClick:()=>c("All"),style:{padding:"8px 15px",borderRadius:"8px",background:o==="All"?"#4b6cb7":"#ddd",color:o==="All"?"#fff":"#000",border:"none"},children:"All Grades"}),hr.map(M=>a.jsxs("button",{onClick:()=>c(M),style:{padding:"8px 15px",borderRadius:"8px",background:o===M?"#4b6cb7":"#ddd",color:o===M?"#fff":"#000",border:"none"},children:["Grade ",M]},M))]}),o!=="All"&&a.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"20px",flexWrap:"wrap"},children:[a.jsx("button",{onClick:()=>d("All"),style:{padding:"6px 12px",borderRadius:"8px",background:u==="All"?"#4b6cb7":"#ddd",color:u==="All"?"#fff":"#000",border:"none"},children:"All Sections"}),p.map(M=>a.jsxs("button",{onClick:()=>d(M),style:{padding:"6px 12px",borderRadius:"8px",background:u===M?"#4b6cb7":"#ddd",color:u===M?"#fff":"#000",border:"none"},children:["Section ",M]},M))]}),Ot&&a.jsx("p",{children:"Loading students..."}),s&&a.jsx("p",{style:{color:"red"},children:s}),!Ot&&!s&&Sa.length===0&&a.jsx("p",{children:"No students found."}),a.jsx("style",{children:`
              .student-list-responsive {
                display: flex;
                flex-direction: column;
                margin-top: 30px;
                gap: 12px;
                width: 100%;
                max-width: 100vw;
                margin-left: 0;
                margin-right: 0;
              }
              @media (max-width: 600px) {
                .student-list-responsive {
                  width: 100vw !important;
                  max-width: 100vw !important;
                  margin-left: 0 !important;
                  margin-right: 0 !important;
                  padding: 0 !important;
                  align-items: flex-start !important;
                }
                .student-list-responsive > div {
                  margin-left: 10px !important;
                  padding-left: 10px !important;
                  width: 100vw !important;
                  max-width: 100vw !important;
                  min-width: 100vw !important;
                  box-sizing: border-box !important;
                }
              }
              @media (min-width: 350px) {
                .student-list-responsive {
                  width: 350px;
                  max-width: 70vw;
                }
              }
               @media (max-width: 600px) {
                 .student-list-card-responsive {
                   margin-left: -32px !important;
                   margin-right: auto !important;
                   width: 80vw !important;
                   max-width: 80vw !important;
                 }
               }
                  width: 500px;
                  max-width: 80vw;
                }
              }
              @media (min-width: 1200px) {
                .student-list-responsive {
                  width: 600px;
                  max-width: 700px;
                  margin-left: -100px;
                }
              }
              @media (min-width: 1500px) {
                .student-list-responsive {
                  width: 600px;
                  max-width: 700px;
                  margin-left: -250px;
                }
              }
            `}),a.jsx("div",{className:"student-list-responsive",children:Sa.map((M,le)=>a.jsx(a6,{student:M,selected:(F==null?void 0:F.userId)===M.userId,onClick:()=>q(M)},M.userId||M.id||le))})]}),F&&a.jsxs("div",{style:{width:Yn?"100%":"30%",height:Yn?"100vh":"calc(100vh - 60px)",position:"fixed",right:0,top:Yn?0:"60px",background:"#fff",zIndex:1e3,display:"flex",flexDirection:"column",overflowY:"auto",boxShadow:Yn?"0 0 0 rgba(0,0,0,0)":"0 0 15px rgba(0,0,0,0.08)",transition:"all 0.35s ease"},children:[a.jsx("button",{onClick:()=>q(null),style:{position:"fixed",top:56,right:16,width:42,height:42,borderRadius:12,border:"none",background:"#ffffff",boxShadow:"0 6px 18px rgba(2,6,23,0.15)",cursor:"pointer",fontSize:22,fontWeight:900,zIndex:2e3},children:""}),a.jsxs("div",{style:{textAlign:"center",marginBottom:"20px",paddingTop:20},children:[a.jsx("div",{style:{width:"120px",height:"120px",margin:"0 auto 15px",borderRadius:"50%",overflow:"hidden",border:"4px solid #4b6cb7"},children:a.jsx("img",{src:F.profileImage,alt:F.name,style:{width:"100%",height:"100%",objectFit:"cover"}})}),a.jsx("h2",{style:{margin:0,fontSize:"22px"},children:F.name}),a.jsx("p",{style:{color:"#555",margin:"5px 0"},children:F.studentId}),a.jsxs("p",{style:{color:"#555",margin:"5px 0"},children:[a.jsx("strong",{children:"Grade:"})," ",F.grade,F.section]})]}),a.jsx("div",{style:{display:"flex",marginBottom:"15px"},children:["details","attendance","performance"].map(M=>a.jsx("button",{onClick:()=>k(M),style:{flex:1,padding:"10px",border:"none",background:"none",cursor:"pointer",fontWeight:"600",color:m===M?"#4b6cb7":"#777",borderBottom:m===M?"3px solid #4b6cb7":"3px solid transparent"},children:M.toUpperCase()},M))}),a.jsxs("div",{children:[m==="details"&&a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:28,padding:50,marginLeft:0,marginRight:0,borderRadius:0,background:"linear-gradient(180deg,#eef2ff,#f8fafc)",fontFamily:"Inter, system-ui"},children:a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:24,fontWeight:900,marginBottom:18,marginTop:-30,background:"linear-gradient(90deg,#2563eb,#7c3aed)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Student Details"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",columnGap:68,rowGap:14},children:[["Phone",ue==null?void 0:ue.phone],["Gender",ue==null?void 0:ue.gender],["Email",ue==null?void 0:ue.email],["Grade",ue==null?void 0:ue.grade],["Section",ue==null?void 0:ue.section],["Age",ue==null?void 0:ue.age],["Birth Date",ue==null?void 0:ue.dob],["Parent Name",ue==null?void 0:ue.parentName],["Parent Phone",ue==null?void 0:ue.parentPhone]].map(([M,le])=>a.jsxs("div",{style:{padding:18,borderRadius:20,background:"#ffffff",boxShadow:"0 6px 10px rgba(0,0,0,0.08)",marginLeft:-30,marginRight:-30},children:[a.jsx("div",{style:{fontSize:12,fontWeight:700,color:"#000102",textTransform:"uppercase"},children:M}),a.jsx("div",{style:{marginTop:8,fontSize:16,fontWeight:400,color:"#000102"},children:le||""})]},M))}),a.jsxs("div",{style:{marginTop:36},children:[a.jsx("div",{style:{fontSize:22,fontWeight:900,marginBottom:14,color:"#1e293b"},children:"Teacher Comments"}),a.jsxs("div",{style:{background:"#ffffff",padding:18,borderRadius:22,boxShadow:"0 14px 40px rgba(0,0,0,0.1)"},children:[a.jsx("textarea",{value:Q,onChange:M=>oe(M.target.value),placeholder:"Write an important comment about the student...",style:{width:"100%",minHeight:30,border:"none",outline:"none",resize:"vertical",fontSize:15,lineHeight:1.6}}),a.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:12},children:a.jsx("button",{onClick:Xu,disabled:Se,style:{padding:"10px 22px",borderRadius:999,border:"none",background:"linear-gradient(135deg,#2563eb,#7c3aed)",color:"#fff",fontWeight:900,cursor:"pointer",boxShadow:"0 12px 30px rgba(37,99,235,0.45)"},children:Se?"Saving...":"Add Comment"})})]}),a.jsx("div",{style:{marginTop:18,display:"flex",flexDirection:"column",gap:14},children:te.length===0?a.jsx("div",{style:{textAlign:"center",padding:18,color:"#64748b",background:"#ffffff",borderRadius:18},children:"No teacher comments yet"}):te.map(M=>{var le;return a.jsxs("div",{style:{display:"flex",gap:12},children:[a.jsx("div",{style:{width:44,height:44,borderRadius:"50%",background:"linear-gradient(135deg,#60a5fa,#2563eb)",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:900},children:((le=M.teacherName)==null?void 0:le.split(" ").map(be=>be[0]).join("").slice(0,2).toUpperCase())||"T"}),a.jsxs("div",{style:{flex:1,background:"#ffffff",padding:14,borderRadius:18,boxShadow:"0 8px 24px rgba(0,0,0,0.08)"},children:[a.jsx("div",{style:{fontWeight:800,color:"#1e293b"},children:M.teacherName}),a.jsx("div",{style:{marginTop:6},children:M.note}),a.jsx("div",{style:{marginTop:6,fontSize:12,color:"#64748b",textAlign:"right"},children:new Date(M.createdAt).toLocaleString()})]})]},M.id)})})]})]})}),m==="attendance"&&F&&a.jsxs("div",{style:{padding:30,background:"radial-gradient(circle at top,#eef2ff,#f8fafc)",borderRadius:26,fontFamily:"Inter, system-ui"},children:[a.jsx("div",{style:{display:"flex",justifyContent:"center",gap:16,marginBottom:32},children:["daily","weekly","monthly"].map(M=>a.jsx("button",{onClick:()=>Ne(M),style:{padding:"12px 28px",borderRadius:999,border:"none",fontWeight:800,fontSize:13,letterSpacing:1,cursor:"pointer",background:de===M?"linear-gradient(135deg,#4f46e5,#2563eb)":"rgba(255,255,255,.8)",color:de===M?"#fff":"#1f2937",boxShadow:de===M?"0 5px 5px rgba(79,70,229,.45)":"0 5px 5px rgba(0,0,0,.08)",transition:"all .3s ease"},children:M.toUpperCase()},M))}),Object.entries(ba).filter(([M])=>et==="All"||M===et).map(([M,le])=>{var Ye;const be=new Date().toDateString(),Fe=le.filter(De=>{var Ee,Ce,We,ft;return((Ce=(Ee=new Date(De.date)).getWeek)==null?void 0:Ce.call(Ee))===((ft=(We=new Date).getWeek)==null?void 0:ft.call(We))}),Me=le.filter(De=>new Date(De.date).getMonth()===new Date().getMonth()),rt=de==="daily"?le.filter(De=>new Date(De.date).toDateString()===be):de==="weekly"?Fe:Me,qe=Ro(rt),Ie=`${de}-${M}`;return a.jsxs("div",{onClick:()=>Si(Ie),style:{cursor:"pointer",background:"linear-gradient(180deg,rgba(255,255,255,.95),rgba(255,255,255,.85))",backdropFilter:"blur(14px)",borderRadius:26,padding:26,marginBottom:26,boxShadow:"0 10px 10px rgba(0,0,0,.12)",position:"relative",overflow:"hidden"},children:[a.jsx("div",{style:{position:"absolute",inset:0,background:"radial-gradient(circle at top left,rgba(99,102,241,.15),transparent 60%)",pointerEvents:"none"}}),a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:18},children:[a.jsxs("div",{children:[a.jsxs("h3",{style:{margin:0,fontSize:20,fontWeight:900,color:"#1e3a8a"},children:[" ",s6(M)]}),a.jsxs("p",{style:{margin:"6px 0 0",fontSize:13,color:"#64748b"},children:[" ",(Ye=le[0])==null?void 0:Ye.teacherName]})]}),a.jsxs("div",{style:{padding:"8px 16px",borderRadius:999,fontSize:13,fontWeight:900,background:qe>=75?"linear-gradient(135deg,#22c55e,#16a34a)":qe>=50?"linear-gradient(135deg,#facc15,#eab308)":"linear-gradient(135deg,#ef4444,#dc2626)",color:"#fff",boxShadow:"0 10px 25px rgba(0,0,0,.25)"},children:[qe,"%"]})]}),a.jsx("div",{onClick:()=>Si(Ie),style:{height:16,background:"#e5e7eb",borderRadius:999,cursor:"pointer",overflow:"hidden",marginBottom:10},children:a.jsx("div",{style:{height:"100%",width:`${qe}%`,background:qe>=75?"linear-gradient(90deg,#22c55e,#16a34a)":qe>=50?"linear-gradient(90deg,#facc15,#eab308)":"linear-gradient(90deg,#ef4444,#dc2626)",transition:"width .5s cubic-bezier(.4,0,.2,1)"}})}),a.jsxs("div",{style:{fontSize:12,fontWeight:700,color:"#475569",marginBottom:12,letterSpacing:.6},children:["CLICK BAR TO VIEW ",de.toUpperCase()," DETAILS"]}),Ge[Ie]&&a.jsx("div",{style:{marginTop:14,background:"#f1f5f9",borderRadius:18,padding:14},children:rt.map((De,Ee)=>a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 8px",borderBottom:Ee!==rt.length-1?"1px solid #e5e7eb":"none"},children:[a.jsx("div",{style:{display:"flex",flexDirection:"column"},children:a.jsxs("span",{style:{fontSize:13,color:"#1f2937"},children:[" ",new Date(De.date).toDateString()]})}),a.jsx("span",{style:{padding:"6px 14px",borderRadius:999,fontSize:12,fontWeight:900,background:De.status==="present"?"#dcfce7":De.status==="late"?"#fef3c7":"#fee2e2",color:De.status==="present"?"#166534":De.status==="late"?"#92400e":"#991b1b"},children:De.status.toUpperCase()})]},Ee))})]},M)})]}),m==="performance"&&a.jsxs("div",{style:{position:"relative",paddingBottom:"70px",background:"#f8fafc"},children:[a.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"40px",marginBottom:"25px",borderBottom:"2px solid #e5e7eb",paddingBottom:"8px"},children:["semester1","semester2"].map(M=>{const le=Fs===M;return a.jsxs("button",{onClick:()=>Kn(M),style:{background:"none",border:"none",cursor:"pointer",fontSize:"16px",fontWeight:"800",color:le?"#2563eb":"#64748b",paddingBottom:"10px",position:"relative"},children:[M==="semester1"?"Semester 1":"Semester 2",le&&a.jsx("span",{style:{position:"absolute",bottom:"-2px",left:0,width:"100%",height:"4px",background:"linear-gradient(135deg,#4b6cb7,#1e40af)",borderRadius:"6px"}})]},M)})}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"20px",padding:"20px"},children:Ot?a.jsx("div",{style:{textAlign:"center",gridColumn:"1 / -1",padding:"30px"},children:"Loading performance..."}):Object.keys(re||{}).length===0?a.jsx("div",{style:{textAlign:"center",padding:"30px",borderRadius:"18px",background:"#ffffff",color:"#475569",fontSize:"16px",fontWeight:"600",boxShadow:"0 10px 25px rgba(0,0,0,0.08)",gridColumn:"1 / -1"},children:" No Performance Records"}):Object.entries(re).map(([M,le],be)=>{const Fe=le==null?void 0:le[Fs];if(!Fe)return null;const Me=Fe.assessments||{},rt=Object.values(Me).reduce((Ee,Ce)=>Ee+(Ce.score||0),0),qe=Object.values(Me).reduce((Ee,Ce)=>Ee+(Ce.max||0),0),Ie=qe?rt/qe*100:0,Ye=Ie>=75?"#16a34a":Ie>=50?"#f59e0b":"#dc2626",De=M.replace("course_","").replace(/_/g," ").toUpperCase();return a.jsxs("div",{style:{padding:"18px",borderRadius:"20px",background:"#ffffff",boxShadow:"0 12px 30px rgba(0,0,0,0.08)"},children:[a.jsx("div",{style:{fontSize:"16px",fontWeight:"800",marginBottom:"14px",color:"#2563eb",textAlign:"center"},children:De}),a.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"16px"},children:a.jsx("div",{style:{width:"90px",height:"90px",borderRadius:"50%",background:`conic-gradient(${Ye} ${Ie*3.6}deg, #e5e7eb 0deg)`,display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsxs("div",{style:{width:"66px",height:"66px",borderRadius:"50%",background:"#fff",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[a.jsx("strong",{style:{color:Ye},children:rt}),a.jsxs("span",{style:{fontSize:"11px"},children:["/ ",qe]})]})})}),Object.entries(Me).map(([Ee,Ce])=>a.jsxs("div",{style:{marginBottom:"10px"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"13px",fontWeight:"600"},children:[a.jsx("span",{children:Ce.name}),a.jsxs("span",{children:[Ce.score," / ",Ce.max]})]}),a.jsx("div",{style:{height:"6px",borderRadius:"999px",background:"#e5e7eb",marginTop:"5px"},children:a.jsx("div",{style:{width:`${Ce.score/Ce.max*100}%`,height:"100%",background:Ye}})})]},Ee)),a.jsx("div",{style:{marginTop:"10px",textAlign:"center",fontWeight:"700",color:Ye},children:Ie>=75?"Excellent":Ie>=50?"Good":"Needs Improvement"}),a.jsxs("div",{style:{marginTop:"6px",textAlign:"center",fontSize:"12px",color:"#64748b"},children:[" ",le.teacherName||Fe.teacherName||"N/A"]})]},`${M}-${be}`)})})]})]}),!ee&&a.jsx("div",{onClick:()=>E(!0),style:{position:"fixed",bottom:"20px",right:"20px",width:"60px",height:"60px",background:"linear-gradient(135deg, #833ab4, #0259fa, #459afc)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",cursor:"pointer",zIndex:1e3,boxShadow:"0 8px 18px rgba(0,0,0,0.25)",transition:"transform 0.2s ease"},children:a.jsx(Cp,{size:30})}),ee&&F&&a.jsxs("div",{style:{position:"fixed",bottom:"20px",right:"20px",width:"360px",height:"480px",background:"#fff",borderRadius:"16px",boxShadow:"0 12px 30px rgba(0,0,0,0.25)",zIndex:2e3,display:"flex",flexDirection:"column",overflow:"hidden"},children:[a.jsxs("div",{style:{padding:"14px",borderBottom:"1px solid #eee",display:"flex",justifyContent:"space-between",alignItems:"center",background:"#fafafa"},children:[a.jsx("strong",{children:F.name}),a.jsxs("div",{style:{display:"flex",gap:"10px"},children:[a.jsx("button",{onClick:()=>{E(!1),qt("/all-chat",{state:{user:F,tab:"student"}})},style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px"},children:""}),a.jsx("button",{onClick:()=>E(!1),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:""})]})]}),a.jsxs("div",{style:{flex:1,padding:"12px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"6px",background:"#f9f9f9"},children:[U.length===0?a.jsxs("p",{style:{textAlign:"center",color:"#aaa"},children:["Start chatting with ",F.name]}):U.map(M=>{const le=String(M.senderId)===String(se==null?void 0:se.userId);return a.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:le?"flex-end":"flex-start",marginBottom:10},children:a.jsxs("div",{style:{maxWidth:"70%",background:le?"#4facfe":"#fff",color:le?"#fff":"#000",padding:"10px 14px",borderRadius:18,borderTopRightRadius:le?0:18,borderTopLeftRadius:le?18:0,boxShadow:"0 1px 3px rgba(0,0,0,0.1)",wordBreak:"break-word",cursor:"default",position:"relative"},children:[M.text," ",M.edited&&a.jsx("small",{style:{fontSize:10},children:" (edited)"}),a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:6,marginTop:6,fontSize:11,color:le?"#fff":"#888"},children:[a.jsx("span",{style:{marginRight:6,fontSize:11,opacity:.9},children:l6(M.timeStamp)}),a.jsx("span",{children:o6(M.timeStamp)}),le&&!M.deleted&&a.jsxs("span",{style:{display:"flex",gap:0,alignItems:"center"},children:[a.jsx(oo,{size:12,color:le?"#fff":"#888",style:{opacity:.85,marginLeft:6}}),M.seen&&a.jsx(oo,{size:12,color:le?"#f3f7f8":"#ccc",style:{marginLeft:2,opacity:.95}})]})]})]})},M.messageId||M.id)}),a.jsx("div",{ref:$})]}),a.jsxs("div",{style:{padding:"10px",borderTop:"1px solid #eee",display:"flex",gap:"8px",background:"#fff"},children:[a.jsx("input",{value:O,onChange:M=>z(M.target.value),placeholder:"Type a message...",style:{flex:1,padding:"10px 14px",borderRadius:"25px",border:"1px solid #ccc",outline:"none"},onKeyDown:M=>{M.key==="Enter"&&Ia()}}),a.jsx("button",{onClick:()=>Ia(),style:{width:45,height:45,borderRadius:"50%",background:"#4facfe",border:"none",color:"#fff",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},children:a.jsx(Dv,{})})]})]})]})]})]})]})}const u6="https://gojo-teacher-web.onrender.com/api",In="https://ethiostore-17d9f-default-rtdb.firebaseio.com";function d6(){const[t,e]=y.useState(null),[n,r]=y.useState([]),[s,i]=y.useState([]),[o,c]=y.useState(""),[u,d]=y.useState([]),[p,f]=y.useState({}),[m,k]=y.useState(!1),[_,N]=y.useState("semester2"),[A,b]=y.useState([]),[w,v]=y.useState(!1),[R,K]=y.useState([]),[ee,E]=y.useState(null),[x,C]=y.useState(!1),j=On(),[T,D]=y.useState(!1),[I,J]=y.useState([]);y.useEffect(()=>{const O=JSON.parse(localStorage.getItem("teacher"));if(!O){j("/login");return}e(O)},[j]);const ye=t==null?void 0:t.userId;y.useEffect(()=>{t&&G(t)},[t]),y.useEffect(()=>{if(!o)return;(async()=>{try{const z=await X.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/ClassMarks/${o}.json`),$=n.find(ne=>ne.id===o);if(!$)return;const ie=s.filter(ne=>ne.grade===$.grade&&ne.section===$.section),W={};let re=[];ie.forEach(ne=>{var fe,de;const ce=(de=(fe=z.data)==null?void 0:fe[ne.id])==null?void 0:de[_];ce!=null&&ce.assessments?(W[ne.id]=ce.assessments,re.length||(re=Object.values(ce.assessments))):W[ne.id]={}}),f(W),d(re.map(ne=>({name:ne.name,max:ne.max}))),k(re.length>0)}catch(z){console.error("Error loading marks:",z),k(!1),f({})}})()},[o,n,s,_]),y.useEffect(()=>{if(!t)return;(async()=>{try{const[z,$,ie]=await Promise.all([X.get(`${In}/TeacherAssignments.json`),X.get(`${In}/Courses.json`),X.get(`${In}/Teachers.json`)]),W=Object.entries(ie.data||{}).find(([fe,de])=>de.userId===ye);if(!W)return;const re=W[0],ne=Object.values(z.data||{}).filter(fe=>fe.teacherId===re).map(fe=>fe.courseId),ce=Object.entries($.data||{}).filter(([fe])=>ne.includes(fe)).map(([fe,de])=>({id:fe,...de}));r(ce)}catch(z){console.error("Error fetching courses:",z)}})()},[t,ye]),y.useEffect(()=>{if(!ye)return;(async()=>{try{const[z,$]=await Promise.all([X.get(`${In}/Students.json`),X.get(`${In}/Users.json`)]),ie=z.data||{},W=$.data||{},re=Object.entries(ie).map(([ne,ce])=>{var fe,de;return{id:ne,...ce,name:((fe=W==null?void 0:W[ce.userId])==null?void 0:fe.name)||"Unknown",profileImage:((de=W==null?void 0:W[ce.userId])==null?void 0:de.profileImage)||"/default-profile.png"}});i(re)}catch(z){console.error("Error fetching students:",z),i([])}})()},[ye]),y.useEffect(()=>{o&&(d([]),k(!1),f({}))},[o]);const ue=()=>d(O=>[...O,{name:"",max:""}]),Te=(O,z,$)=>{const ie=[...u];ie[O][z]=$,d(ie)},te=O=>d(z=>z.filter(($,ie)=>ie!==O)),P=async()=>{if(u.reduce((z,$)=>z+Number($.max||0),0)!==100){alert("Total MAX must be exactly 100");return}const O={};u.forEach((z,$)=>{O[`a${$+1}`]={name:z.name,max:Number(z.max),score:0}});try{const z=n.find(W=>W.id===o);if(!z)return;const $=s.filter(W=>W.grade===z.grade&&W.section===z.section);await Promise.all($.map(W=>X.put(`${In}/ClassMarks/${o}/${W.id}/${_}.json`,{teacherName:t.name,assessments:O})));const ie={};$.forEach(W=>{ie[W.id]=O}),f(ie),k(!0),alert("Assessment structure saved!")}catch(z){console.error("Error submitting structure:",z),alert("Failed to submit structure")}},Q=(O,z,$)=>{f(ie=>({...ie,[O]:{...ie[O],[z]:{...ie[O][z],score:Number($)}}}))},oe=async O=>{try{await X.put(`${In}/ClassMarks/${o}/${O}/${_}.json`,{teacherName:t.name,assessments:p[O]}),alert("Marks saved successfully")}catch(z){console.error("Save failed:",z),alert("Failed to save marks")}},Se=()=>{localStorage.removeItem("teacher"),j("/login")};y.useEffect(()=>{(async()=>{try{let $=(await X.get(`${u6}/get_posts`)).data||[];!Array.isArray($)&&typeof $=="object"&&($=Object.values($));const[ie,W]=await Promise.all([X.get(`${In}/School_Admins.json`),X.get(`${In}/Users.json`)]),re=ie.data||{},ne=W.data||{},ce=JSON.parse(localStorage.getItem("teacher")),fe=se(ce==null?void 0:ce.userId),de=Ae=>{const Ge=Ae.adminId||Ae.posterAdminId||Ae.poster||Ae.admin||null;if(Ge&&re[Ge]){const Be=re[Ge],mn=Be.userId,lt=ne[mn]||null,Ot=lt&&lt.name||Be.name||Ae.adminName||"Admin",Tt=lt&&lt.profileImage||Be.profileImage||Ae.adminProfile||"/default-profile.png";return{name:Ot,profile:Tt}}return{name:Ae.adminName||"Admin",profile:Ae.adminProfile||"/default-profile.png"}},Ne=$.slice().sort((Ae,Ge)=>(Ge.time?new Date(Ge.time).getTime():0)-(Ae.time?new Date(Ae.time).getTime():0)).filter(Ae=>Ae.postId&&!fe.includes(Ae.postId)).slice(0,5).map(Ae=>{var Be;const Ge=de(Ae);return{type:"post",id:Ae.postId,title:((Be=Ae.message)==null?void 0:Be.substring(0,50))||"Untitled post",adminName:Ge.name,adminProfile:Ge.profile}});let et=[];try{const Ae=ce;if(Ae&&Ae.userId){const[Ge,Be]=await Promise.all([X.get(`${In}/Chats.json`),X.get(`${In}/Users.json`)]),mn=Ge.data||{},Ot=Be.data||{}||{},Tt={};Object.entries(Ot).forEach(([mt,yn])=>{yn&&yn.userId&&(Tt[yn.userId]=mt)}),et=Object.entries(mn).map(([mt,yn])=>{const Kn=(yn.unread||{})[Ae.userId]||0;if(!Kn)return null;const ko=yn.participants||{},Dn=Object.keys(ko||{}).find(qn=>qn!==Ae.userId);if(!Dn)return null;let Ir=Dn,Dt=Ot[Ir];if(!Dt){const qn=Tt[Dn];qn&&(Ir=qn,Dt=Ot[qn])}Dt||(Dt={userId:Dn,name:Dn,profileImage:"/default-profile.png"});const Gn={pushKey:Ir,userId:Dt.userId||Dn,name:Dt.name||Dt.username||Dn,profileImage:Dt.profileImage||Dt.profile||"/default-profile.png"},bt=yn.lastMessage||{};return{type:"message",chatId:mt,displayName:Gn.name,profile:Gn.profileImage,lastMessageText:bt.text||"",lastMessageTime:bt.timeStamp||bt.time||null,unreadForMe:Kn}}).filter(Boolean).sort((mt,yn)=>(yn.lastMessageTime||0)-(mt.lastMessageTime||0))}}catch(Ae){console.error("Error fetching message notifications:",Ae)}b([...Ne,...et]),K(et)}catch(z){console.error("Error fetching notifications:",z)}})()},[]);const G=async(O=t)=>{try{const z=O||JSON.parse(localStorage.getItem("teacher"));if(!z||!z.userId){J([]);return}const[$,ie]=await Promise.all([X.get(`${In}/Chats.json`),X.get(`${In}/Users.json`)]),W=$.data||{},ne=ie.data||{}||{},ce={};Object.entries(ne).forEach(([de,Ne])=>{Ne&&Ne.userId&&(ce[Ne.userId]=de)});const fe=Object.entries(W).map(([de,Ne])=>{const Ae=(Ne.unread||{})[z.userId]||0;if(!Ae)return null;const Ge=Ne.participants||{},Be=Object.keys(Ge||{}).find(mt=>mt!==z.userId);if(!Be)return null;let mn=Be,lt=ne[mn];if(!lt){const mt=ce[Be];mt&&(mn=mt,lt=ne[mt])}lt||(lt={userId:Be,name:Be,profileImage:"/default-profile.png"});const Ot={pushKey:mn,userId:lt.userId||Be,name:lt.name||lt.username||Be,profileImage:lt.profileImage||lt.profile||"/default-profile.png"},Tt=Ne.lastMessage||{};return{chatId:de,contact:Ot,displayName:Ot.name,profile:Ot.profileImage,lastMessageText:Tt.text||"",lastMessageTime:Tt.timeStamp||Tt.time||null,unreadForMe:Ae}}).filter(Boolean).sort((de,Ne)=>(Ne.lastMessageTime||0)-(de.lastMessageTime||0));J(fe)}catch(z){console.error("Error fetching conversations:",z),J([])}},L=R.reduce((O,z)=>O+(z.unreadForMe||0),0),Y=O=>{!t||!O||(ve(t.userId,O),b(z=>z.filter($=>$.id!==O)),v(!1))};function se(O){return JSON.parse(localStorage.getItem(`seen_posts_${O}`))||[]}function ve(O,z){const $=se(O);$.includes(z)||localStorage.setItem(`seen_posts_${O}`,JSON.stringify([...$,z]))}const F=y.useRef(null),[q,he]=y.useState(!1),[we,U]=y.useState(!1),Z=()=>{const O=F.current;if(!O)return;const{scrollLeft:z,scrollWidth:$,clientWidth:ie}=O;he(z>8),U(z+ie<$-8)};return y.useEffect(()=>{const O=F.current;if(!O)return;Z();const z=()=>Z(),$=()=>Z();return O.addEventListener("scroll",z,{passive:!0}),window.addEventListener("resize",$),()=>{O.removeEventListener("scroll",z),window.removeEventListener("resize",$)}},[m,u.length]),a.jsxs("div",{className:"dashboard-page",children:[a.jsxs("nav",{className:"top-navbar",children:[a.jsx("h2",{children:"Gojo Dashboard"}),a.jsxs("div",{className:"nav-right",children:[a.jsxs("div",{className:"icon-circle",style:{position:"relative"},children:[a.jsxs("div",{onClick:()=>v(!w),style:{cursor:"pointer",position:"relative"},children:[a.jsx(Qr,{size:24}),A.length>0&&a.jsx("span",{style:{position:"absolute",top:-5,right:-5,background:"red",color:"white",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:A.length})]}),w&&a.jsx("div",{style:{position:"absolute",top:30,right:0,width:300,maxHeight:400,overflowY:"auto",background:"#fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",borderRadius:8,zIndex:100},children:A.length>0?A.map((O,z)=>O.type==="post"?a.jsxs("div",{onClick:()=>Y(O.id),style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:O.adminProfile,alt:O.adminName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:O.adminName}),a.jsx("p",{style:{margin:0,fontSize:12},children:O.title})]})]},O.id||z):a.jsxs("div",{onClick:()=>{v(!1),j("/all-chat")},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:O.profile||"/default-profile.png",alt:O.displayName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:O.displayName}),a.jsx("p",{style:{margin:0,fontSize:12,color:"#0b78f6"},children:"New message"})]})]},O.chatId||z)):a.jsx("div",{style:{padding:15},children:"No notifications"})})]}),a.jsx("div",{className:"icon-circle",style:{position:"relative",marginLeft:12},children:a.jsxs("div",{onClick:()=>j("/all-chat"),style:{cursor:"pointer",position:"relative"},children:[a.jsx(Yr,{size:22}),L>0&&a.jsx("span",{style:{position:"absolute",top:-6,right:-6,background:"#f60b0b",color:"#fff",borderRadius:"50%",minWidth:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 6px"},children:L})]})}),a.jsx("div",{className:"icon-circle",onClick:()=>j("/settings"),children:a.jsx(Er,{})}),a.jsx("img",{src:(t==null?void 0:t.profileImage)||"/default-profile.png",alt:"profile"})]})]}),a.jsxs("div",{className:"google-dashboard",children:[a.jsxs("div",{className:"google-sidebar",style:{position:"fixed",top:64,left:0,width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.04)",zIndex:900,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto"},children:[t&&a.jsxs("div",{className:"sidebar-profile",children:[a.jsx("div",{className:"sidebar-img-circle",children:a.jsx("img",{src:t.profileImage||"/default-profile.png",alt:"profile"})}),a.jsx("h3",{children:t.name}),a.jsx("p",{children:t.username})]}),a.jsxs("div",{className:"sidebar-menu",children:[a.jsxs(xe,{className:"sidebar-btn",to:"/dashboard",children:[a.jsx(Xr,{})," Home"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/students",children:[a.jsx(He,{})," Students"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/admins",children:[a.jsx(He,{})," Admins"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/parents",children:[a.jsx(Jr,{})," Parents"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/marks",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[a.jsx(br,{})," Marks"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/attendance",children:[a.jsx(He,{})," Attendance"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/schedule",children:[a.jsx(He,{})," Schedule"]}),a.jsxs("button",{className:"sidebar-btn logout-btn",onClick:Se,children:[a.jsx(Zr,{})," Logout"]})]})]}),a.jsx("div",{className:"google-main",children:a.jsxs("div",{className:"main-inner",children:[a.jsx("h2",{style:{textAlign:"center",marginBottom:"35px",color:"#1e3a8a",fontSize:"36px",fontWeight:"700",letterSpacing:"1px"},children:"Marks Entry Dashboard"}),a.jsxs("div",{style:{marginBottom:"30px",display:"flex",justifyContent:"center",alignItems:"center",gap:"15px"},children:[a.jsx("label",{style:{fontWeight:"600",color:"#374151",fontSize:"16px"},children:"Select Course:"}),a.jsxs("select",{value:o,onChange:O=>c(O.target.value),style:{padding:"12px 18px",borderRadius:"12px",border:"1px solid #cbd5e1",background:"#fff",minWidth:"300px",fontSize:"15px",fontWeight:"500",boxShadow:"0 6px 15px rgba(0,0,0,0.08)",transition:"0.3s all"},children:[a.jsx("option",{value:"",children:"-- Select Course --"}),n.map(O=>a.jsxs("option",{value:O.id,children:[O.subject," - Grade ",O.grade," Section ",O.section]},O.id))]})]}),o&&a.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"40px",marginBottom:"35px",borderBottom:"2px solid #c7d2fe",paddingBottom:"10px"},children:["semester1","semester2"].map(O=>{const z=_===O;return a.jsxs("button",{onClick:()=>{N(O),k(!1),d([]),f({})},style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px",fontWeight:"700",letterSpacing:"1px",color:z?"#1e40af":"#6b7280",paddingBottom:"12px",position:"relative",transition:"0.3s all"},children:[O==="semester1"?"Semester 1":"Semester 2",z&&a.jsx("span",{style:{position:"absolute",left:0,bottom:"-2px",width:"100%",height:"4px",borderRadius:"6px",background:"linear-gradient(135deg, #4b6cb7, #1e40af)"}})]},O)})}),m&&a.jsxs("button",{style:{marginBottom:"30px",padding:"10px 18px",background:"linear-gradient(135deg, #f59e0b, #d97706)",color:"#fff",borderRadius:"12px",border:"none",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",boxShadow:"0 8px 20px rgba(0,0,0,0.15)",transition:"0.3s all"},onClick:()=>{k(!1),f({})},children:[a.jsx(bI,{})," Edit Assessment Structure"]}),o&&!m&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{style:{backdropFilter:"blur(15px)",background:"rgba(255, 255, 255, 0.85)",padding:"30px",borderRadius:"20px",boxShadow:"0 15px 30px rgba(0,0,0,0.08)",marginBottom:"40px",transition:"all 0.3s ease"},children:[a.jsx("h3",{style:{marginBottom:"25px",color:"#1f2937",fontWeight:"600",fontSize:"20px"},children:"Assessment Structure"}),u.map((O,z)=>a.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"18px",alignItems:"center"},children:[a.jsx("input",{placeholder:"Assessment Name",value:O.name,onChange:$=>Te(z,"name",$.target.value),style:{flex:2,padding:"12px 14px",borderRadius:"12px",border:"1px solid #d1d5db",outline:"none",boxShadow:"inset 0 3px 6px rgba(0,0,0,0.06)",fontWeight:"500"}}),a.jsx("input",{type:"number",placeholder:"Max",value:O.max,onChange:$=>Te(z,"max",$.target.value),style:{flex:1,padding:"12px 14px",borderRadius:"12px",border:"1px solid #d1d5db",outline:"none",boxShadow:"inset 0 3px 6px rgba(0,0,0,0.06)",fontWeight:"500"}}),a.jsx("button",{onClick:()=>te(z),style:{background:"#ef4444",color:"#fff",padding:"12px 14px",borderRadius:"12px",border:"none",cursor:"pointer",boxShadow:"0 6px 15px rgba(0,0,0,0.12)",transition:"0.3s all"},children:a.jsx(jI,{})})]},z)),a.jsxs("div",{style:{display:"flex",gap:"20px",alignItems:"center",marginTop:"20px"},children:[a.jsxs("button",{style:{padding:"12px 20px",borderRadius:"14px",background:"#10b981",color:"#fff",border:"none",cursor:"pointer",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 6px 18px rgba(0,0,0,0.12)",transition:"0.3s all"},onClick:ue,children:[a.jsx(CI,{})," Add Assessment"]}),a.jsxs("span",{style:{fontWeight:"600",color:"#374151",fontSize:"16px"},children:["Total Max: ",u.reduce((O,z)=>O+Number(z.max||0),0)," / 100"]})]}),a.jsx("button",{style:{marginTop:"30px",padding:"14px 20px",borderRadius:"16px",background:"linear-gradient(135deg, #4b6cb7, #1e40af)",color:"#fff",border:"none",fontWeight:"600",cursor:"pointer",boxShadow:"0 8px 20px rgba(0,0,0,0.15)",transition:"0.3s all",fontSize:"16px"},onClick:P,children:"Submit Structure"})]}),a.jsx("style",{children:`
        /* Larger fixed table width on wide screens to give more horizontal space */
        @media (min-width: 1024px) {
          /* Wider layout for large screens to increase horizontal scroll area */
          .marks-table-wrapper { overflow-x: visible !important; white-space: normal !important; }
          .marks-table { width: 1600px !important; min-width: 1600px !important; table-layout: auto !important; }
          .marks-table th, .marks-table td { white-space: normal !important; }
          .marks-table td input { width: 120px !important; }
          .marks-scroll-arrow-fixed { display: none !important; }
        }

        @media (max-width: 1023px) {
          .marks-table { width: max-content !important; min-width: 1600px; }
        }
      `})]}),m&&a.jsx("div",{className:"marks-table-wrapper",ref:F,style:{position:"relative",overflowX:"auto",overflowY:"visible",minHeight:120,width:"1130px",paddingBottom:32,whiteSpace:"nowrap"},children:a.jsxs("table",{className:"marks-table",style:{borderCollapse:"separate",borderSpacing:"0 12px",fontSize:"15px",minWidth:0,width:"1100px"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:"linear-gradient(135deg, #4b6cb7, #1e3a8a)",color:"#fff",borderRadius:"16px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",textTransform:"uppercase",letterSpacing:"1px",fontWeight:"600",fontSize:"14px"},children:[a.jsx("th",{style:{padding:"16px 20px",textAlign:"left",borderRadius:"16px 0 0 16px",background:"rgba(255,255,255,0.1)"},children:a.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx(He,{})," Student"]})}),u.map((O,z)=>a.jsxs("th",{style:{padding:"16px 18px",background:"rgba(255,255,255,0.05)",textAlign:"center",transition:"0.3s all"},children:[O.name," (",O.max,")"]},z)),a.jsx("th",{style:{padding:"16px 18px",background:"rgba(255,255,255,0.05)",textAlign:"center"},children:"Total"}),a.jsx("th",{style:{padding:"16px 18px",background:"rgba(255,255,255,0.05)",textAlign:"center"},children:"Grade"}),a.jsxs("th",{style:{padding:"16px 20px",borderRadius:"0 16px 16px 0",background:"rgba(255,255,255,0.1)",textAlign:"center"},children:[a.jsx(_0,{})," Save"]})]})}),a.jsx("tbody",{children:Object.entries(p).map(([O,z])=>{const $=Object.values(z).reduce((ne,ce)=>ne+(ce.score||0),0),ie=$>=90?"A":$>=80?"B":$>=70?"C":$>=60?"D":"F",W=s.find(ne=>ne.id===O),re=ie==="A"?"#16a34a":ie==="B"?"#2563eb":ie==="C"?"#f59e0b":ie==="D"?"#f97316":"#ef4444";return a.jsxs("tr",{style:{background:"#f9fafb",borderRadius:"12px",marginBottom:"10px",transition:"0.3s all",cursor:"pointer"},onMouseEnter:ne=>ne.currentTarget.style.background="#e0e7ff",onMouseLeave:ne=>ne.currentTarget.style.background="#f9fafb",children:[a.jsxs("td",{style:{padding:"12px",display:"flex",alignItems:"center",gap:"12px",fontWeight:"600"},children:[a.jsx("div",{style:{width:"45px",height:"45px",borderRadius:"50%",overflow:"hidden",border:"2px solid #4b6cb7"},children:a.jsx("img",{src:(W==null?void 0:W.profileImage)||"/default-profile.png",alt:W==null?void 0:W.name,style:{width:"100%",height:"100%",objectFit:"cover"}})}),W==null?void 0:W.name]}),Object.entries(z).map(([ne,ce])=>a.jsx("td",{style:{padding:"12px"},children:a.jsx("input",{type:"number",min:"0",max:ce.max,value:ce.score,onChange:fe=>Q(O,ne,fe.target.value),style:{width:"70px",padding:"8px 12px",borderRadius:"10px",border:"1px solid #cbd5e1",textAlign:"center",boxShadow:"inset 0 3px 6px rgba(0,0,0,0.06)",transition:"0.3s all",fontWeight:"500"}})},ne)),a.jsx("td",{style:{padding:"12px",fontWeight:"600"},children:$}),a.jsx("td",{style:{padding:"12px",fontWeight:"700",color:re},children:ie}),a.jsx("td",{style:{padding:"12px"},children:a.jsx("button",{style:{padding:"8px 14px",borderRadius:"12px",background:"#2563eb",color:"#fff",border:"none",cursor:"pointer",transition:"0.3s all"},onClick:()=>oe(O),onMouseEnter:ne=>ne.currentTarget.style.background="#1e40af",onMouseLeave:ne=>ne.currentTarget.style.background="#2563eb",children:a.jsx(_0,{})})})]},O)})})]})})]})})]})]})}const h6="https://gojo-teacher-web.onrender.com/api",kr="https://ethiostore-17d9f-default-rtdb.firebaseio.com";function f6(){const[t,e]=y.useState([]),[n,r]=y.useState(!0),[s,i]=y.useState(""),[o,c]=y.useState(null),[u,d]=y.useState({}),[p,f]=y.useState(new Date().toISOString().split("T")[0]),[m,k]=y.useState(null),[_,N]=y.useState([]),A=On(),[b,w]=y.useState([]),[v,R]=y.useState(!1),[K,ee]=y.useState(null),[E,x]=y.useState(!1),[C,j]=y.useState([]),[T,D]=y.useState(null);y.useEffect(()=>{if(!T)return;(async()=>{try{const[L,Y,se]=await Promise.all([X.get(`${kr}/TeacherAssignments.json`),X.get(`${kr}/Courses.json`),X.get(`${kr}/Teachers.json`)]),ve=Object.entries(se.data||{}).find(([we,U])=>U.userId===T.userId);if(!ve)return;const F=ve[0],q=Object.values(L.data||{}).filter(we=>we.teacherId===F).map(we=>we.courseId),he=Object.entries(Y.data||{}).filter(([we])=>q.includes(we)).map(([we,U])=>({id:we,...U}));N(he),!m&&he.length>0&&k(he[0])}catch(L){console.error("Error fetching courses:",L)}})()},[T]),y.useEffect(()=>{if(!m)return;(async()=>{r(!0);try{const[L,Y]=await Promise.all([X.get(`${kr}/Students.json`),X.get(`${kr}/Users.json`)]),se=L.data||{},ve=Y.data||{},F=Object.entries(se).filter(([,q])=>q.grade===m.grade&&q.section===m.section).map(([q,he])=>{var we,U;return{studentId:q,...he,name:((we=ve==null?void 0:ve[he.userId])==null?void 0:we.name)||"Unknown",profileImage:((U=ve==null?void 0:ve[he.userId])==null?void 0:U.profileImage)||"/default-profile.png"}});e(F),i("")}catch{i("Failed to fetch students. Please try again."),e([])}finally{r(!1)}})()},[m]);const I=()=>{localStorage.removeItem("teacher"),A("/login")};y.useEffect(()=>{const G=JSON.parse(localStorage.getItem("teacher"));G&&D(G)},[]),T==null||T.userId,y.useEffect(()=>{const G=JSON.parse(localStorage.getItem("teacher"));G&&c(G)},[]),y.useEffect(()=>{if(!m)return;(async()=>{try{const L=await X.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Attendance/${m.id}/${p}.json`);d(L.data||{})}catch(L){console.error("Error fetching attendance:",L),d({})}})()},[m,p]);const J=(G,L)=>{d(Y=>({...Y,[G]:L}))},ye=async()=>{if(!m){alert("Please select a course");return}try{await X.put(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Attendance/${m.id}/${p}.json`,u),alert("Attendance saved successfully!")}catch(G){console.error("Error saving attendance:",G),alert("Failed to save attendance")}};[...new Set(t.map(G=>G.grade))].sort(),y.useEffect(()=>{(async()=>{try{let Y=(await X.get(`${h6}/get_posts`)).data||[];!Array.isArray(Y)&&typeof Y=="object"&&(Y=Object.values(Y));const[se,ve,F]=await Promise.all([X.get(`${kr}/School_Admins.json`),X.get(`${kr}/Users.json`),X.get(`${kr}/Chats.json`)]),q=se.data||{},he=ve.data||{},we=F.data||{},U=JSON.parse(localStorage.getItem("teacher")),Z=Te(U==null?void 0:U.userId),O=W=>{const re=W.adminId||W.posterAdminId||W.poster||W.admin||null;if(re&&q[re]){const ne=q[re],ce=ne.userId,fe=he[ce]||null,de=fe&&fe.name||ne.name||W.adminName||"Admin",Ne=fe&&fe.profileImage||ne.profileImage||W.adminProfile||"/default-profile.png";return{name:de,profile:Ne}}return{name:W.adminName||"Admin",profile:W.adminProfile||"/default-profile.png"}},z=Y.slice().sort((W,re)=>{const ne=W.time?new Date(W.time).getTime():0;return(re.time?new Date(re.time).getTime():0)-ne}).filter(W=>W.postId&&!Z.includes(W.postId)).slice(0,5).map(W=>{var ne;const re=O(W);return{id:W.postId,type:"post",title:((ne=W.message)==null?void 0:ne.substring(0,50))||"Untitled post",adminName:re.name,adminProfile:re.profile}});let $=[];U&&U.userId&&Object.entries(we).forEach(([W,re])=>{const ce=(re.unread||{})[U.userId]||0;if(!ce)return;const fe=re.participants||{},de=Object.keys(fe).find(et=>et!==U.userId);let Ne=he[de]||{userId:de,name:de,profileImage:"/default-profile.png"};$.push({chatId:W,type:"message",displayName:Ne.name||Ne.username||de,profile:Ne.profileImage||Ne.profile||"/default-profile.png",unreadForMe:ce})});const ie=[...z,...$].slice(0,5);w(ie)}catch(L){console.error("Error fetching notifications:",L)}})()},[]);const ue=async G=>{if(T){if(G.type==="post"&&G.id)te(T.userId,G.id),w(L=>L.filter(Y=>Y.id!==G.id)),R(!1),A("/dashboard");else if(G.type==="message"&&G.chatId){w(L=>L.filter(Y=>Y.chatId!==G.chatId)),R(!1);try{await X.put(`${kr}/Chats/${G.chatId}/unread/${T.userId}.json`,null)}catch(L){console.error("Failed to clear unread in DB:",L)}A("/all-chat")}}};function Te(G){return JSON.parse(localStorage.getItem(`seen_posts_${G}`))||[]}function te(G,L){const Y=Te(G);Y.includes(L)||localStorage.setItem(`seen_posts_${G}`,JSON.stringify([...Y,L]))}const P=b.filter(G=>G.type==="message").reduce((G,L)=>G+(L.unreadForMe||0),0),[Q,oe]=Xt.useState(window.innerWidth<window.innerHeight);return Xt.useEffect(()=>{const G=()=>{oe(window.innerWidth<window.innerHeight)};return window.addEventListener("resize",G),()=>window.removeEventListener("resize",G)},[]),a.jsxs(a.Fragment,{children:[a.jsx("style",{children:`
    .dashboard-page {
      min-height: 100vh;
      background: #f0f4f8;
      display: flex;
      flex-direction: column;
    }
    .top-navbar {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      z-index: 1000;
      background: #fff;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 24px;
      height: 64px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.07);
    }
    .nav-right {
      display: flex;
      align-items: center;
      gap: 18px;
    }
    .google-dashboard {
      display: flex;
      flex: 1;
      margin-top: 64px;
      min-height: 0;
    }
    .google-sidebar {
      position: fixed;
      top: 64px;
      left: 0;
      width: 200px;
      height: calc(100vh - 64px);
      background: #fff;
      box-shadow: 2px 0 8px rgba(0,0,0,0.04);
      z-index: 900;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-top: 18px;
      overflow-y: auto;
    }
    .attendance-main-content-responsive {
      margin-left: 220px;
      margin-top: 0;
      width: calc(100vw - 240px);
      min-width: 320px;
      max-width: 100vw;
      background: #fff;
      border-radius: 15px;
      box-shadow: 0 8px 10px rgba(0,0,0,0.1);
      padding: 30px;
      position: relative;
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
    }
    @media (max-width: 900px) {
      .attendance-main-content-responsive {
        width: 100vw;
        margin-left: 60px;
        min-width: unset;
        max-width: unset;
        padding: 18px 4vw;
      }
      .google-sidebar {
        width: 60px;
        padding: 0;
        align-items: flex-start;
      }
    }
    @media (max-width: 600px) {
      .top-navbar {
        height: 54px;
        padding: 0 8px;
      }
      .google-sidebar {
        top: 54px;
        width: 48px;
        min-width: 48px;
        padding: 0;
        align-items: flex-start;
      }
      .attendance-main-content-responsive {
        width: 100vw;
        margin-left: 48px;
        padding: 10px 2vw;
        border-radius: 8px;
        align-items: flex-start;
      }
      .dashboard-page {
        min-height: 100vh;
      }
      .google-dashboard {
        flex-direction: column;
        margin-top: 54px;
      }
    }
  `}),a.jsxs("div",{className:"dashboard-page",children:[a.jsxs("nav",{className:"top-navbar",children:[a.jsx("h2",{children:"Gojo Dashboard"}),a.jsxs("div",{className:"nav-right",children:[a.jsxs("div",{className:"icon-circle",style:{position:"relative"},children:[a.jsxs("div",{onClick:()=>R(!v),style:{cursor:"pointer",position:"relative"},children:[a.jsx(Qr,{size:24}),b.length>0&&a.jsx("span",{style:{position:"absolute",top:-5,right:-5,background:"red",color:"white",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:b.length})]}),v&&a.jsx("div",{style:{position:"absolute",top:30,right:0,width:300,maxHeight:400,overflowY:"auto",background:"#fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",borderRadius:8,zIndex:100},children:b.length>0?b.map((G,L)=>G.type==="post"?a.jsxs("div",{onClick:()=>ue(G),style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:G.adminProfile,alt:G.adminName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:G.adminName}),a.jsx("p",{style:{margin:0,fontSize:12},children:G.title})]})]},G.id||L):a.jsxs("div",{onClick:()=>ue(G),style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:G.profile||"/default-profile.png",alt:G.displayName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:G.displayName}),a.jsx("p",{style:{margin:0,fontSize:12,color:"#0b78f6"},children:"New message"})]})]},G.chatId||L)):a.jsx("div",{style:{padding:15},children:"No notifications"})})]}),a.jsx("div",{className:"icon-circle",style:{position:"relative",marginLeft:12},children:a.jsxs("div",{onClick:()=>A("/all-chat"),style:{cursor:"pointer",position:"relative"},children:[a.jsx(Yr,{size:22}),P>0&&a.jsx("span",{style:{position:"absolute",top:-6,right:-6,background:"#f60b0b",color:"#fff",borderRadius:"50%",minWidth:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 5px"},children:P})]})}),a.jsx("div",{className:"icon-circle",onClick:()=>A("/settings"),children:a.jsx(Er,{})}),a.jsx("img",{src:(T==null?void 0:T.profileImage)||"/default-profile.png",alt:"teacher",className:"profile-img"})]})]}),a.jsxs("div",{className:"google-dashboard",children:[a.jsxs("div",{className:"google-sidebar",children:[T&&a.jsxs("div",{className:"sidebar-profile",children:[a.jsx("div",{className:"sidebar-img-circle",children:a.jsx("img",{src:T.profileImage||"/default-profile.png",alt:"profile"})}),a.jsx("h3",{children:T.name}),a.jsx("p",{children:T.username})]}),a.jsxs("div",{className:"sidebar-menu",children:[a.jsxs(xe,{className:"sidebar-btn",to:"/dashboard",children:[a.jsx(Xr,{})," Home"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/students",children:[a.jsx(He,{})," Students"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/admins",children:[a.jsx(He,{})," Admins"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/parents",children:[a.jsx(Jr,{})," Parents"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/marks",children:[a.jsx(br,{})," Marks"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/attendance",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[a.jsx(He,{})," Attendance"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/schedule",children:[a.jsx(He,{})," Schedule"]}),a.jsxs("button",{className:"sidebar-btn logout-btn",onClick:I,children:[a.jsx(Zr,{})," Logout"]})]})]}),a.jsx("div",{style:{flex:1,display:"flex",justifyContent:"flex-start",padding:"20px 24px",background:"#f0f4f8"},children:a.jsxs("div",{className:"attendance-main-content-responsive",children:[a.jsx("h2",{style:{textAlign:"center",marginBottom:"25px",color:"#333"},children:"Attendance"}),a.jsxs("div",{style:{marginBottom:"20px",display:"flex",alignItems:"center",gap:"15px"},children:[a.jsx("label",{style:{fontWeight:"500",color:"#555"},children:"Select Course:"}),a.jsxs("select",{value:(m==null?void 0:m.id)||"",onChange:G=>{const L=_.find(Y=>Y.id===G.target.value);k(L||null)},style:{padding:"8px 12px",borderRadius:"8px",border:"1px solid #ccc",outline:"none",background:"#f9f9f9",minWidth:"200px",fontWeight:"500"},children:[a.jsx("option",{value:"",children:"-- Select Course --"}),_.map(G=>a.jsxs("option",{value:G.id,children:[G.name," - Grade ",G.grade," Section ",G.section]},G.id))]})]}),a.jsxs("div",{style:{marginBottom:"25px",display:"flex",alignItems:"center",gap:"15px"},children:[a.jsx("label",{style:{fontWeight:"500",color:"#555"},children:"Date:"}),a.jsx("input",{type:"date",value:p,onChange:G=>f(G.target.value),style:{padding:"8px 12px",borderRadius:"8px",border:"1px solid #ccc",outline:"none",background:"#f9f9f9"}})]}),n?a.jsx("p",{children:"Loading students..."}):s?a.jsx("p",{style:{color:"red"},children:s}):a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",boxShadow:"0 4px 10px rgba(0,0,0,0.05)"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:"#4b6cb7",color:"#fff",textAlign:"left"},children:[a.jsx("th",{style:{padding:"12px"},children:"Student"}),a.jsx("th",{style:{padding:"12px",textAlign:"center"},children:"Present"}),a.jsx("th",{style:{padding:"12px",textAlign:"center"},children:"Absent"}),a.jsx("th",{style:{padding:"12px",textAlign:"center"},children:"Late"})]})}),a.jsx("tbody",{children:t.map(G=>a.jsxs("tr",{style:{borderBottom:"1px solid #eee",transition:"background 0.3s"},onMouseEnter:L=>L.currentTarget.style.background="#f9f9f9",onMouseLeave:L=>L.currentTarget.style.background="transparent",children:[a.jsxs("td",{style:{padding:"12px",display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",overflow:"hidden",border:"2px solid #4b6cb7"},children:a.jsx("img",{src:G.profileImage||"/default-profile.png",alt:G.name,style:{width:"100%",height:"100%",objectFit:"cover"}})}),a.jsx("span",{style:{fontWeight:"500",color:"#333"},children:G.name})]}),a.jsx("td",{style:{padding:"10px",textAlign:"center"},children:a.jsx("button",{style:{background:u[G.studentId]==="present"?"#28a745":"#e0e0e0",color:u[G.studentId]==="present"?"#fff":"#333",padding:"6px 12px",border:"none",borderRadius:"6px",cursor:"pointer",transition:"0.2s"},onClick:()=>J(G.studentId,"present"),children:"Present"})}),a.jsx("td",{style:{padding:"10px",textAlign:"center"},children:a.jsx("button",{style:{background:u[G.studentId]==="absent"?"#dc3545":"#e0e0e0",color:u[G.studentId]==="absent"?"#fff":"#333",padding:"6px 12px",border:"none",borderRadius:"6px",cursor:"pointer",transition:"0.2s"},onClick:()=>J(G.studentId,"absent"),children:"Absent"})}),a.jsx("td",{style:{padding:"10px",textAlign:"center"},children:a.jsx("button",{style:{background:u[G.studentId]==="late"?"#ffc107":"#e0e0e0",color:u[G.studentId]==="late"?"#fff":"#333",padding:"6px 12px",border:"none",borderRadius:"6px",cursor:"pointer",transition:"0.2s"},onClick:()=>J(G.studentId,"late"),children:"Late"})})]},G.studentId))})]}),a.jsx("div",{style:{textAlign:"center"},children:a.jsx("button",{style:{marginTop:"25px",padding:"12px 25px",borderRadius:"10px",background:"#4b6cb7",color:"#fff",fontWeight:"600",border:"none",cursor:"pointer",boxShadow:"0 4px 10px rgba(0,0,0,0.15)",transition:"0.3s"},onClick:ye,onMouseEnter:G=>G.currentTarget.style.background="#3a539b",onMouseLeave:G=>G.currentTarget.style.background="#4b6cb7",children:"Save Attendance"})})]})})]})]})]})}const Ry=(t,e)=>[t,e].sort().join("_"),p6=t=>{if(!t)return"";const e=new Date(t),n=e.getHours().toString().padStart(2,"0"),r=e.getMinutes().toString().padStart(2,"0");return`${n}:${r}`},g6="https://gojo-teacher-web.onrender.com/api",ls="https://ethiostore-17d9f-default-rtdb.firebaseio.com",m6=({admin:t,selected:e,onClick:n})=>a.jsxs("div",{onClick:()=>n(t),style:{width:"100%",borderRadius:"12px",padding:"15px",display:"flex",alignItems:"center",gap:"20px",cursor:"pointer",background:e?"#e0e7ff":"#fff",border:e?"2px solid #4b6cb7":"1px solid #ddd",boxShadow:e?"0 6px 15px rgba(75,108,183,0.3)":"0 4px 10px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},children:[a.jsx("img",{src:t.profileImage||"/default-profile.png",alt:t.name,style:{width:"50px",height:"50px",borderRadius:"50%",objectFit:"cover",border:e?"3px solid #4b6cb7":"3px solid transparent"}}),a.jsxs("div",{children:[a.jsx("h3",{style:{margin:0},children:t.name}),a.jsx("p",{style:{margin:"4px 0",color:"#555"},children:t.username||t.email})]})]});function y6(){const[t,e]=y.useState([]),[n,r]=y.useState(!0),[s,i]=y.useState(""),[o,c]=y.useState(null),[u,d]=y.useState("details"),[p,f]=y.useState(!1),[m,k]=y.useState([]),[_,N]=y.useState(""),A=y.useRef(null),[b,w]=y.useState(null),v=JSON.parse(localStorage.getItem("teacher"))||{},R=String(v.userId||""),[K,ee]=y.useState(null),[E,x]=y.useState([]),[C,j]=y.useState(!1),[T,D]=y.useState(null),I=y.useRef({}),[J,ye]=y.useState(!1),[ue,Te]=y.useState([]),te=On();y.useEffect(()=>{const q=JSON.parse(localStorage.getItem("teacher"));if(!q){te("/login");return}w(q)},[te]),y.useEffect(()=>{b&&Se(b)},[b]);const P=()=>{localStorage.removeItem("teacher"),te("/login")};y.useEffect(()=>{async function q(){try{r(!0);const[he,we]=await Promise.all([X.get(`${ls}/Users.json`),X.get(`${ls}/School_Admins.json`)]),U=he.data||{},Z=we.data||{},O={};Object.entries(Z).forEach(([$,ie])=>{ie.userId&&(O[ie.userId]={...ie,adminKey:$})});const z=Object.entries(U).filter(([$,ie])=>{const W=(ie.role||ie.userType||"").toLowerCase();return W==="admin"||W==="school_admin"||W==="school_admins"}).map(([$,ie])=>{const W=O[ie.userId];return{adminId:W&&W.adminKey||$,...ie,...W?{title:W.title,status:W.status,schoolAdminKey:W.adminKey}:{}}});e(z),i(z.length===0?"No admins found":"")}catch(he){console.error(he),i("Failed to fetch admins")}finally{r(!1)}}q()},[]),y.useEffect(()=>{var q;(q=A.current)==null||q.scrollIntoView({behavior:"smooth"})},[m]),y.useEffect(()=>{if(!R||!K)return;const q=Ry(R,K.userId),he=Lt(Wt,`Chats/${q}/messages`);return Qi(he,we=>{const U=we.val()||{},Z=Object.entries(U).map(([O,z])=>({id:O,...z,isTeacher:z.senderId===R})).sort((O,z)=>O.timeStamp-z.timeStamp);k(Z),Object.entries(U).forEach(([O,z])=>{if(z&&!z.seen&&z.receiverId===R){const $=Date.now();Rr(Lt(Wt,`Chats/${q}/messages/${O}`),{seen:!0,seenAt:$}).catch(()=>{})}}),Rr(Lt(Wt,`Chats/${q}/unread`),{[R]:0}).catch(()=>{})}),()=>_w(he)},[R,K]);const Q=async()=>{if(!_.trim()||!o)return;const q=R,he=o.userId,we=Ry(q,he),U=Date.now(),Z={senderId:q,receiverId:he,type:"text",text:_,imageUrl:null,replyTo:null,seen:!1,edited:!1,deleted:!1,timeStamp:U};try{await X.post(`${ls}/Chats/${we}/messages.json`,Z),await X.patch(`${ls}/Chats/${we}.json`,{participants:{[q]:!0,[he]:!0},lastMessage:{text:_,senderId:q,seen:!1,timeStamp:U},unread:{[q]:0,[he]:1}}),N("")}catch(O){console.error("Send message error:",O)}};y.useEffect(()=>{(async()=>{try{let we=(await X.get(`${g6}/get_posts`)).data||[];!Array.isArray(we)&&typeof we=="object"&&(we=Object.values(we));const[U,Z]=await Promise.all([X.get(`${ls}/School_Admins.json`),X.get(`${ls}/Users.json`)]),O=U.data||{},z=Z.data||{},$=JSON.parse(localStorage.getItem("teacher")),ie=oe($==null?void 0:$.userId),W=ne=>{const ce=ne.adminId||ne.posterAdminId||ne.poster||ne.admin||null;if(ce&&O[ce]){const fe=O[ce],de=fe.userId,Ne=z[de]||null,et=Ne&&Ne.name||fe.name||ne.adminName||"Admin",Ae=Ne&&Ne.profileImage||fe.profileImage||ne.adminProfile||"/default-profile.png";return{name:et,profile:Ae}}return{name:ne.adminName||"Admin",profile:ne.adminProfile||"/default-profile.png"}},re=we.slice().sort((ne,ce)=>{const fe=ne.time?new Date(ne.time).getTime():0;return(ce.time?new Date(ce.time).getTime():0)-fe}).filter(ne=>ne.postId&&!ie.includes(ne.postId)).slice(0,5).map(ne=>{var fe;const ce=W(ne);return{id:ne.postId,title:((fe=ne.message)==null?void 0:fe.substring(0,50))||"Untitled post",adminName:ce.name,adminProfile:ce.profile}});x(re)}catch(he){console.error("Error fetching notifications:",he)}})()},[]);function oe(q){return JSON.parse(localStorage.getItem(`seen_posts_${q}`))||[]}const Se=async(q=b)=>{try{const he=q||JSON.parse(localStorage.getItem("teacher"));if(!he||!he.userId){Te([]);return}const[we,U]=await Promise.all([X.get(`${ls}/Chats.json`),X.get(`${ls}/Users.json`)]),Z=we.data||{},z=U.data||{}||{},$={};Object.entries(z).forEach(([W,re])=>{re&&re.userId&&($[re.userId]=W)});const ie=Object.entries(Z).map(([W,re])=>{const ce=(re.unread||{})[he.userId]||0;if(!ce)return null;const fe=re.participants||{},de=Object.keys(fe||{}).find(Be=>Be!==he.userId);if(!de)return null;let Ne=de,et=z[Ne];if(!et){const Be=$[de];Be&&(Ne=Be,et=z[Be])}et||(et={userId:de,name:de,profileImage:"/default-profile.png"});const Ae={pushKey:Ne,userId:et.userId||de,name:et.name||et.username||de,profileImage:et.profileImage||et.profile||"/default-profile.png"},Ge=re.lastMessage||{};return{chatId:W,contact:Ae,displayName:Ae.name,profile:Ae.profileImage,lastMessageText:Ge.text||"",lastMessageTime:Ge.timeStamp||Ge.time||null,unreadForMe:ce}}).filter(Boolean).sort((W,re)=>(re.lastMessageTime||0)-(W.lastMessageTime||0));Te(ie)}catch(he){console.error("Error fetching conversations:",he),Te([])}},G=ue.reduce((q,he)=>q+(he.unreadForMe||0),0),[L,Y]=Xt.useState(window.innerWidth<window.innerHeight),[se,ve]=Xt.useState(window.innerWidth);Xt.useEffect(()=>{const q=()=>{const he=window.innerWidth;Y(he<window.innerHeight),ve(he)};return q(),window.addEventListener("resize",q),()=>window.removeEventListener("resize",q)},[]);const F=se>=1800?"800px":se>=1500?"600px":se>=1200?"400px":"300px";return a.jsxs("div",{className:"dashboard-page",children:[a.jsxs("nav",{className:"top-navbar",children:[a.jsx("h2",{children:"Gojo Dashboard"}),a.jsxs("div",{className:"nav-right",children:[a.jsxs("div",{className:"icon-circle",style:{position:"relative"},children:[a.jsxs("div",{onClick:()=>j(!C),style:{cursor:"pointer",position:"relative"},children:[a.jsx(Qr,{size:24}),E.length+G>0&&a.jsx("span",{style:{position:"absolute",top:-5,right:-5,background:"red",color:"white",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:E.length+G})]}),C&&a.jsxs("div",{style:{position:"absolute",top:30,right:0,width:300,maxHeight:400,overflowY:"auto",background:"#fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",borderRadius:8,zIndex:100},children:[E.length>0&&E.map((q,he)=>a.jsxs("div",{onClick:()=>{te("/dashboard"),setTimeout(()=>{const we=I.current[q.id];we&&(we.scrollIntoView({behavior:"smooth",block:"center"}),D(q.id),setTimeout(()=>D(null),3e3))},150),x(we=>we.filter((U,Z)=>Z!==he)),j(!1)},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:q.adminProfile,alt:q.adminName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:q.adminName}),a.jsx("p",{style:{margin:0,fontSize:12},children:q.title})]})]},q.id||he)),G>0&&ue.filter(q=>q.unreadForMe>0).map((q,he)=>a.jsxs("div",{onClick:()=>{j(!1),te("/all-chat")},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:q.profile||"/default-profile.png",alt:q.displayName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:q.displayName}),a.jsx("p",{style:{margin:0,fontSize:12,color:"#0b78f6"},children:"New message"})]})]},q.chatId||he)),E.length===0&&G===0&&a.jsx("div",{style:{padding:15},children:"No notifications"})]})]}),a.jsx("div",{className:"icon-circle",style:{position:"relative",marginLeft:12},children:a.jsxs("div",{onClick:()=>te("/all-chat"),style:{cursor:"pointer",position:"relative"},children:[a.jsx(Yr,{size:22}),G>0&&a.jsx("span",{style:{position:"absolute",top:-6,right:-6,background:"#f60b0b",color:"#fff",borderRadius:"50%",minWidth:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 5px"},children:G})]})}),a.jsx("div",{className:"icon-circle",onClick:()=>te("/settings"),children:a.jsx(Er,{})}),a.jsx("img",{src:(b==null?void 0:b.profileImage)||"/default-profile.png",alt:"teacher",className:"profile-img"})]})]}),a.jsxs("div",{className:"google-dashboard",children:[a.jsxs("div",{className:"google-sidebar",style:{position:"fixed",top:64,left:0,width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.04)",zIndex:900,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto"},children:[b&&a.jsxs("div",{className:"sidebar-profile",children:[a.jsx("div",{className:"sidebar-img-circle",children:a.jsx("img",{src:b.profileImage||"/default-profile.png",alt:"profile"})}),a.jsx("h3",{children:b.name}),a.jsx("p",{children:b.username})]}),a.jsxs("div",{className:"sidebar-menu",children:[a.jsxs(xe,{className:"sidebar-btn",to:"/dashboard",children:[a.jsx(Xr,{})," Home"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/students",children:[a.jsx(He,{})," Students"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/admins",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[a.jsx(He,{})," Admins"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/parents",children:[a.jsx(Jr,{})," Parents"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/marks",children:[a.jsx(br,{})," Marks"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/attendance",children:[a.jsx(He,{})," Attendance"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/schedule",children:[a.jsx(He,{})," Schedule"]}),a.jsxs("button",{className:"sidebar-btn logout-btn",onClick:P,children:[a.jsx(Zr,{})," Logout"]})]})]}),a.jsxs("div",{style:{flex:1,display:"flex",justifyContent:"center",padding:"30px"},children:[a.jsxs("div",{style:{width:F,marginLeft:"40px"},children:[a.jsx("h2",{style:{textAlign:"center",marginBottom:"20px"},children:"All Admins"}),n&&a.jsx("p",{children:"Loading admins..."}),s&&a.jsx("p",{style:{color:"red"},children:s}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:t.map(q=>a.jsx(m6,{admin:q,selected:(o==null?void 0:o.adminId)===q.adminId,onClick:he=>{c(he),ee(he)}},q.adminId))})]}),o&&a.jsxs("div",{style:{width:L?"100%":"30%",height:L?"100vh":"calc(100vh - 60px)",position:"fixed",right:0,top:L?0:"60px",background:"#fff",boxShadow:L?"0 0 0 rgba(0,0,0,0)":"0 0 15px rgba(0,0,0,0.05)",zIndex:1e3,display:"flex",flexDirection:"column",overflowY:"auto",padding:L?"18px":"25px",transition:"all 0.35s ease"},children:[a.jsx("button",{onClick:()=>c(null),"aria-label":"Close admin details",title:"Close",style:{position:"fixed",top:52,right:16,width:42,height:42,borderRadius:"12px",border:"none",background:"#fff",boxShadow:"0 8px 18px rgba(2,6,23,0.15)",cursor:"pointer",display:"grid",placeItems:"center",zIndex:2e3,fontSize:22,fontWeight:900,color:"#0f172a"},children:""}),a.jsxs("div",{style:{textAlign:"center",marginBottom:"20px"},children:[a.jsx("div",{style:{width:"120px",height:"120px",margin:"0 auto 15px",borderRadius:"50%",overflow:"hidden",border:"4px solid #4b6cb7"},children:a.jsx("img",{src:o.profileImage||"/default-profile.png",alt:o.name,style:{width:"100%",height:"100%",objectFit:"cover"}})}),a.jsx("h2",{children:o.name}),a.jsx("p",{children:o.username})]}),a.jsx("div",{style:{display:"flex",marginBottom:"15px"},children:["details","Plan","Report"].map(q=>a.jsx("button",{onClick:()=>d(q),style:{flex:1,padding:"10px",border:"none",background:"none",cursor:"pointer",fontWeight:"600",color:u===q?"#4b6cb7":"#777",borderBottom:u===q?"3px solid #4b6cb7":"3px solid transparent"},children:q.toUpperCase()},q))}),u==="details"&&o&&a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:28,padding:50,marginLeft:0,marginRight:0,borderRadius:0,background:"linear-gradient(180deg,#eef2ff,#f8fafc)",fontFamily:"Inter, system-ui"},children:a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:24,fontWeight:900,marginBottom:18,marginTop:-30,background:"linear-gradient(90deg,#2563eb,#7c3aed)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Administrator Details"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",columnGap:68,rowGap:14},children:[["Admin ID",o.adminId||o.userId],["Email",o.email],["Phone",o.phone],["Gender",o.gender?o.gender.charAt(0).toUpperCase()+o.gender.slice(1):null],["Title",o.title],["Status",o.status?o.status.charAt(0).toUpperCase()+o.status.slice(1):null]].map(([q,he])=>a.jsxs("div",{style:{padding:18,borderRadius:20,background:"#ffffff",boxShadow:"0 6px 10px rgba(0,0,0,0.08)",marginLeft:-30,marginRight:-30},children:[a.jsx("div",{style:{fontSize:12,fontWeight:700,color:"#000102",textTransform:"uppercase"},children:q}),a.jsx("div",{style:{marginTop:8,fontSize:16,fontWeight:400,color:"#000102"},children:he||""})]},q))})]})}),u==="Plan"&&a.jsx("p",{children:"Plan data here."}),u==="Report"&&a.jsx("p",{children:"Report data here."}),!p&&o&&a.jsx("div",{onClick:()=>f(!0),style:{position:"fixed",bottom:"20px",right:"20px",width:"60px",height:"60px",background:"linear-gradient(135deg, #833ab4, #202ef3, #395a8b)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",cursor:"pointer",zIndex:1e3,boxShadow:"0 8px 18px rgba(0,0,0,0.25)"},children:a.jsx(Cp,{size:30})}),p&&o&&b&&a.jsxs("div",{style:{position:"fixed",bottom:"20px",right:"20px",width:"360px",height:"480px",background:"#fff",borderRadius:"16px",boxShadow:"0 12px 30px rgba(0,0,0,0.25)",zIndex:2e3,display:"flex",flexDirection:"column",overflow:"hidden"},children:[a.jsxs("div",{style:{padding:"14px",borderBottom:"1px solid #eee",display:"flex",justifyContent:"space-between",alignItems:"center",background:"#fafafa"},children:[a.jsx("strong",{children:o.name}),a.jsxs("div",{style:{display:"flex",gap:"10px"},children:[a.jsx("button",{onClick:()=>{f(!1),te("/all-chat",{state:{contact:o,tab:"admin"}})},style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px"},children:""}),a.jsx("button",{onClick:()=>f(!1),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:""})]})]}),a.jsxs("div",{style:{flex:1,padding:"12px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"6px",background:"#f9f9f9"},children:[m.length===0?a.jsxs("p",{style:{textAlign:"center",color:"#aaa"},children:["Start chatting with ",o.name]}):m.map(q=>a.jsx("div",{style:{display:"flex",flexDirection:q.isTeacher?"row-reverse":"row",alignItems:"flex-end",marginBottom:10},children:a.jsxs("div",{style:{background:q.isTeacher?"#4facfe":"#fff",color:q.isTeacher?"#fff":"#000",padding:"10px 14px",borderRadius:18,maxWidth:"65%",position:"relative",boxShadow:"0 2px 6px rgba(0,0,0,0.05)"},children:[q.text,a.jsxs("div",{style:{fontSize:10,color:"#888",marginTop:4,display:"flex",justifyContent:"flex-end",alignItems:"center",gap:4},children:[p6(q.timeStamp),q.isTeacher&&a.jsx(oo,{size:10,color:q.seen?"#4facfe":"#ccc"})]})]})},q.id)),a.jsx("div",{ref:A})]}),a.jsxs("div",{style:{padding:"10px",borderTop:"1px solid #eee",display:"flex",gap:"8px",background:"#fff"},children:[a.jsx("input",{value:_,onChange:q=>N(q.target.value),placeholder:"Type a message...",style:{flex:1,padding:"10px 14px",borderRadius:"999px",border:"1px solid #ccc",outline:"none"},onKeyDown:q=>{q.key==="Enter"&&Q()}}),a.jsx("button",{onClick:Q,style:{background:"linear-gradient(135deg, #0751f1, #0e35e4, #0f5afc)",border:"none",borderRadius:"50%",width:"42px",height:"42px",color:"#fff",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px"},children:""})]})]})]})]})]})]})}const x6="https://gojo-teacher-web.onrender.com/api";function v6(){const[t,e]=y.useState(null),[n,r]=y.useState([]),[s,i]=y.useState(""),[o,c]=y.useState(""),[u,d]=y.useState(null),[p,f]=y.useState([]),m=On(),[k,_]=y.useState([]),[N,A]=y.useState(!1),[b,w]=y.useState(null),v=y.useRef({}),R=t==null?void 0:t.userId;y.useEffect(()=>{const x=JSON.parse(localStorage.getItem("teacher"));if(!x){m("/login");return}e(x)},[]),y.useEffect(()=>{(async()=>{try{const T=((await X.get(`${x6}/get_posts`)).data||[]).slice(0,5).map(D=>{var I;return{id:D.postId,title:((I=D.message)==null?void 0:I.substring(0,50))||"Untitled post",adminName:D.adminName||"Admin",adminProfile:D.adminProfile||"/default-profile.png"}});_(T)}catch(C){console.error("Error fetching notifications:",C)}})()},[]);const K=(x,C)=>{w(x);const j=v.current[x];j&&j.scrollIntoView({behavior:"smooth",block:"center"});const T=[...k];T.splice(C,1),_(T),A(!1),setTimeout(()=>w(null),3e3)};y.useEffect(()=>{if(!t)return;async function x(){try{const[C,j,T]=await Promise.all([X.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Courses.json"),X.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/TeacherAssignments.json"),X.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Teachers.json")]),D=Object.entries(T.data||{}).find(([ue,Te])=>Te.userId===t.userId);if(!D)return;const I=D[0],ye=Object.values(j.data||{}).filter(ue=>ue.teacherId===I).map(ue=>({id:ue.courseId,...C.data[ue.courseId]}));r(ye)}catch(C){console.error("Error fetching courses:",C)}}x()},[t]),y.useEffect(()=>{async function x(){try{const C=await X.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/TeacherPosts.json");f(Object.entries(C.data||{}).map(([j,T])=>({id:j,...T})))}catch(C){console.error(C)}}x()},[]);const ee=async()=>{if(!s||!o&&!u){alert("Please select a class and enter a note or upload a file");return}let x="";u&&(x=URL.createObjectURL(u));const C={teacherId:R,courseId:s,text:o,fileUrl:x,createdAt:new Date().toISOString()};try{await X.post("https://ethiostore-17d9f-default-rtdb.firebaseio.com/TeacherPosts.json",C),alert("Post submitted!"),c(""),d(null),f(j=>[...j,{...C,id:Date.now()}])}catch(j){console.error(j),alert("Failed to submit post")}},E=()=>{localStorage.removeItem("teacher"),m("/login")};return t?a.jsxs("div",{className:"dashboard-page",children:[a.jsxs("nav",{className:"top-navbar",children:[a.jsx("h2",{children:"Gojo Dashboard"}),a.jsxs("div",{className:"nav-search",children:[a.jsx(II,{className:"search-icon"}),a.jsx("input",{type:"text",placeholder:"Search Teacher and Student..."})]}),a.jsxs("div",{className:"nav-right",children:[a.jsxs("div",{className:"icon-circle",children:[a.jsxs("div",{onClick:()=>A(!N),style:{cursor:"pointer",position:"relative"},children:[a.jsx(Qr,{size:24}),k.length>0&&a.jsx("span",{style:{position:"absolute",top:-5,right:-5,background:"red",color:"white",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:k.length})]}),N&&a.jsx("div",{style:{position:"absolute",top:30,right:0,width:300,maxHeight:400,overflowY:"auto",background:"#fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",borderRadius:8,zIndex:100},children:k.length>0?k.map((x,C)=>a.jsxs("div",{onClick:()=>{m("/dashboard"),setTimeout(()=>K(x.id,C),100)},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:x.adminProfile,alt:x.adminName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:x.adminName}),a.jsx("p",{style:{margin:0,fontSize:12},children:x.title})]})]},x.id||C)):a.jsx("div",{style:{padding:15},children:"No notifications"})})]}),a.jsx("div",{className:"icon-circle",children:a.jsx(Yr,{})}),a.jsx("div",{className:"icon-circle",children:a.jsx(Er,{})}),a.jsx("img",{src:(t==null?void 0:t.profileImage)||"/default-profile.png",alt:"teacher",className:"profile-img"})]})]}),a.jsxs("div",{className:"google-dashboard",children:[a.jsxs("div",{className:"google-sidebar",children:[a.jsxs("div",{className:"sidebar-profile",children:[a.jsx("div",{className:"sidebar-img-circle",children:a.jsx("img",{src:(t==null?void 0:t.profileImage)||"/default-profile.png",alt:"profile"})}),a.jsx("h3",{children:t==null?void 0:t.name}),a.jsx("p",{children:t==null?void 0:t.username})]}),a.jsxs("div",{className:"sidebar-menu",children:[a.jsxs(xe,{className:"sidebar-btn",to:"/dashboard",children:[a.jsx(Xr,{})," Home"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/notes",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[a.jsx(br,{})," Notes"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/students",children:[a.jsx(He,{})," Students"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/admins",children:[a.jsx(He,{})," Admins"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/parents",children:[a.jsx(Jr,{})," Parents"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/marks",children:[a.jsx(br,{})," Marks"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/attendance",children:[a.jsx(He,{})," Attendance"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/schedule",children:[a.jsx(He,{})," Schedule"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/settings",children:[a.jsx(Er,{})," Settings"]}),a.jsxs("button",{className:"sidebar-btn logout-btn",onClick:E,children:[a.jsx(Zr,{})," Logout"]})]})]}),a.jsxs("div",{style:{marginLeft:"500px",width:"40%",padding:"100px 30px 50px",background:"#f3f4f6",minHeight:"100vh",fontFamily:"'Inter', sans-serif"},children:[a.jsxs("div",{style:{marginBottom:"30px",display:"flex",justifyContent:"space-between",alignItems:"center",background:"linear-gradient(90deg, #e0e7ff, #c7d2fe)",padding:"20px 25px",borderRadius:"18px",boxShadow:"0 5px 20px rgba(0,0,0,0.08)"},children:[a.jsx("h2",{style:{fontSize:"28px",fontWeight:700,color:"#1e293b"},children:"Post Notes / Files"}),a.jsxs("span",{style:{color:"#475569",fontSize:"16px",fontWeight:500},children:[t==null?void 0:t.name,", share notes with your students"]})]}),a.jsxs("div",{style:{marginBottom:"40px",background:"#fff",padding:"30px 25px",borderRadius:"18px",boxShadow:"0 6px 25px rgba(0,0,0,0.08)"},children:[a.jsxs("select",{value:s,onChange:x=>i(x.target.value),style:{width:"100%",padding:"14px 16px",borderRadius:"12px",border:"1px solid #cbd5e1",fontSize:"15px",marginBottom:"18px",background:"#f8fafc",cursor:"pointer"},children:[a.jsx("option",{value:"",children:"Select Class & Subject"}),n.map(x=>a.jsxs("option",{value:x.id,children:[x.subject,"  Grade ",x.grade,x.section]},x.id))]}),a.jsx("textarea",{placeholder:"Write your note here...",value:o,onChange:x=>c(x.target.value),style:{width:"100%",padding:"18px",borderRadius:"15px",border:"1px solid #cbd5e1",marginBottom:"18px",minHeight:"140px",fontSize:"15px",resize:"vertical",background:"#f8fafc"}}),a.jsx("input",{type:"file",onChange:x=>d(x.target.files[0]),style:{display:"block",marginBottom:"25px",fontSize:"15px",cursor:"pointer",padding:"10px",borderRadius:"12px",border:"1px solid #cbd5e1",background:"#f8fafc",width:"100%"}}),a.jsxs("button",{onClick:ee,style:{background:"linear-gradient(90deg, #4b6cb7, #182848)",color:"#fff",border:"none",padding:"14px 30px",borderRadius:"15px",cursor:"pointer",fontSize:"16px",fontWeight:600,width:"100%"},children:[a.jsx(kI,{style:{marginRight:"10px"}})," Submit Post"]})]}),a.jsxs("div",{children:[a.jsx("h3",{style:{fontSize:"22px",fontWeight:700,marginBottom:"20px",color:"#1e293b"},children:"All Posts"}),p.filter(x=>x.teacherId===R||x.courseId===s).map((x,C)=>a.jsxs("div",{style:{background:"#fff",padding:"20px 25px",borderRadius:"18px",marginBottom:"18px",boxShadow:"0 6px 18px rgba(0,0,0,0.06)"},children:[a.jsx("p",{style:{marginBottom:"12px",fontSize:"15px",lineHeight:"1.6",color:"#334155"},children:x.text}),x.fileUrl&&a.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"10px"},children:[a.jsx("span",{style:{fontSize:"20px",marginRight:"10px"},children:""}),a.jsx("a",{href:x.fileUrl,target:"_blank",rel:"noopener noreferrer",download:!0,style:{color:"#2563eb",fontWeight:600,textDecoration:"none",fontSize:"15px"},children:"View / Download File"})]}),a.jsxs("div",{style:{fontSize:"13px",color:"#64748b",textAlign:"right"},children:["Posted: ",new Date(x.createdAt).toLocaleString()]})]},C))]})]})]})]}):null}const Ay=(t,e)=>[t,e].sort().join("_"),_6="https://gojo-teacher-web.onrender.com/api",jn="https://ethiostore-17d9f-default-rtdb.firebaseio.com",w6=t=>{if(!t)return"";const e=new Date(Number(t)),n=e.getHours().toString().padStart(2,"0"),r=e.getMinutes().toString().padStart(2,"0");return`${n}:${r}`};function S6(){const[t,e]=y.useState(null),[n,r]=y.useState([]),[s,i]=y.useState(null),[o,c]=y.useState(!0),[u,d]=y.useState("Details"),[p,f]=y.useState(!1),[m,k]=y.useState([]),[_,N]=y.useState(""),A=y.useRef(null),[b,w]=y.useState([]),[v,R]=y.useState([]),[K,ee]=y.useState(!1),[E,x]=y.useState([]),[C,j]=y.useState(null),[T,D]=y.useState(!1),[I,J]=y.useState([]),ye=On(),[ue,Te]=y.useState(window.innerWidth<window.innerHeight);y.useEffect(()=>{const L=()=>Te(window.innerWidth<window.innerHeight);return window.addEventListener("resize",L),window.addEventListener("orientationchange",L),()=>{window.removeEventListener("resize",L),window.removeEventListener("orientationchange",L)}},[]),y.useEffect(()=>{const L=JSON.parse(localStorage.getItem("teacher"));if(!L){ye("/login");return}e(L)},[ye]);const te=()=>{localStorage.removeItem("teacher"),ye("/login")},P=(t==null?void 0:t.userId)||"";y.useEffect(()=>{if(!t)return;let L=!1;return(async()=>{try{c(!0);const[se,ve,F,q,he]=await Promise.all([X.get(`${jn}/TeacherAssignments.json`),X.get(`${jn}/Courses.json`),X.get(`${jn}/Students.json`),X.get(`${jn}/Users.json`),X.get(`${jn}/Parents.json`)]),we=se.data||{},U=ve.data||{},Z=F.data||{},O=q.data||{},z=he.data||{},$=t.userId,ie=Object.values(we).filter(ce=>ce.teacherId===$).map(ce=>ce.courseId),W={};Object.entries(z).forEach(([ce,fe])=>{fe.children&&Object.values(fe.children).forEach(de=>{if(!de.studentId)return;const Ne=de.relationship||de.relation||de.relationToChild||de.type||de.role||null;W[de.studentId]||(W[de.studentId]=[]),W[de.studentId].push({parentId:ce,relationship:Ne})})});const re={};Object.entries(Z).forEach(([ce,fe])=>{const de=Object.values(O).find(Ge=>String(Ge.userId)===String(fe.userId)),Ne=(de==null?void 0:de.name)||"No Name",et=(de==null?void 0:de.profileImage)||"/default-profile.png";(W[ce]||[]).forEach(({parentId:Ge,relationship:Be})=>{re[Ge]||(re[Ge]=[]),re[Ge].push({studentId:ce,name:Ne,grade:fe.grade,section:fe.section,profileImage:et,userId:fe.userId,relationship:Be||"",age:fe.age||(de==null?void 0:de.age)||null,city:fe.city||(de==null?void 0:de.city)||fe.address&&fe.address.city||null,citizenship:fe.citizenship||(de==null?void 0:de.citizenship)||fe.nationality||null,address:fe.address||(de==null?void 0:de.address)||null,status:fe.status||"Active"})})});const ne=Object.keys(re).map(ce=>{var Ae;const fe=z[ce]||{},de=Object.values(O).find(Ge=>String(Ge.userId)===String(fe.userId))||{},Ne=re[ce]||[],et=Array.from(new Set(Ne.map(Ge=>Ge.relationship).filter(Boolean)));return{id:ce,userId:fe.userId,name:de.name||fe.name||"No Name",email:de.email||fe.email||"N/A",phone:de.phone||fe.phone||"",profileImage:de.profileImage||fe.profileImage||"/default-profile.png",children:Ne,relationships:et,age:fe.age||de.age||null,city:fe.city||de.city||((Ae=fe.address)==null?void 0:Ae.city)||null,citizenship:fe.citizenship||de.citizenship||fe.nationality||null,status:fe.status||"Active",createdAt:fe.createdAt,address:fe.address||de.address||null,extra:fe.extra}});L||r(ne)}catch(se){console.error("Error fetching parents:",se)}finally{L||c(!1)}})(),()=>{L=!0}},[t]),y.useEffect(()=>{var L;(L=A.current)==null||L.scrollIntoView({behavior:"smooth"})},[m]),y.useEffect(()=>{if(!s||!t||!p)return;const L=Ay(P,s.userId),Y=Lt(Wt,`Chats/${L}/messages`);return Qi(Y,se=>{const ve=se.val()||{},F=Object.entries(ve).map(([q,he])=>({messageId:q,...he}));F.sort((q,he)=>q.timeStamp-he.timeStamp),k(F)}),oe(L),()=>_w(Y)},[s,t,p]);const Q=async L=>{if(!(L!=null&&L.trim())||!s||!t)return;const Y=P,se=s.userId,ve=Ay(Y,se),F=Date.now(),q={senderId:Y,receiverId:se,type:"text",text:L,seen:!1,timeStamp:F};try{await X.post(`${jn}/Chats/${ve}/messages.json`,q),await X.patch(`${jn}/Chats/${ve}.json`,{participants:{[Y]:!0,[se]:!0},lastMessage:{text:L,senderId:Y,seen:!1,timeStamp:F},unread:{[Y]:0,[se]:1}}),N("")}catch(he){console.error("Send message error:",he)}},oe=async L=>{try{await X.patch(`${jn}/Chats/${L}/unread.json`,{[P]:0}),await X.patch(`${jn}/Chats/${L}/lastMessage.json`,{seen:!0})}catch(Y){console.error("Mark as seen error:",Y)}};y.useEffect(()=>{(async()=>{try{let se=(await X.get(`${_6}/get_posts`)).data||[];!Array.isArray(se)&&typeof se=="object"&&(se=Object.values(se));const[ve,F]=await Promise.all([X.get(`${jn}/School_Admins.json`),X.get(`${jn}/Users.json`)]),q=ve.data||{},he=F.data||{},we=JSON.parse(localStorage.getItem("teacher")),U=Se(we==null?void 0:we.userId),Z=$=>{const ie=$.adminId||$.posterAdminId||$.poster||$.admin||null;if(ie&&q[ie]){const W=q[ie],re=W.userId,ne=he[re]||null,ce=ne&&ne.name||W.name||$.adminName||"Admin",fe=ne&&ne.profileImage||W.profileImage||$.adminProfile||"/default-profile.png";return{name:ce,profile:fe}}return{name:$.adminName||"Admin",profile:$.adminProfile||"/default-profile.png"}},O=se.slice().sort(($,ie)=>(ie.time?new Date(ie.time).getTime():0)-($.time?new Date($.time).getTime():0)).filter($=>$.postId&&!U.includes($.postId)).slice(0,5).map($=>{var W;const ie=Z($);return{type:"post",id:$.postId,title:((W=$.message)==null?void 0:W.substring(0,50))||"Untitled post",adminName:ie.name,adminProfile:ie.profile}});let z=[];try{const $=we;if($&&$.userId){const[ie,W]=await Promise.all([X.get(`${jn}/Chats.json`),X.get(`${jn}/Users.json`)]),re=ie.data||{},ce=W.data||{}||{},fe={};Object.entries(ce).forEach(([de,Ne])=>{Ne&&Ne.userId&&(fe[Ne.userId]=de)}),z=Object.entries(re).map(([de,Ne])=>{const Ae=(Ne.unread||{})[$.userId]||0;if(!Ae)return null;const Ge=Ne.participants||{},Be=Object.keys(Ge||{}).find(mt=>mt!==$.userId);if(!Be)return null;let mn=Be,lt=ce[mn];if(!lt){const mt=fe[Be];mt&&(mn=mt,lt=ce[mt])}lt||(lt={userId:Be,name:Be,profileImage:"/default-profile.png"});const Ot={pushKey:mn,userId:lt.userId||Be,name:lt.name||lt.username||Be,profileImage:lt.profileImage||lt.profile||"/default-profile.png"},Tt=Ne.lastMessage||{};return{type:"message",chatId:de,displayName:Ot.name,profile:Ot.profileImage,lastMessageText:Tt.text||"",lastMessageTime:Tt.timeStamp||Tt.time||null,unreadForMe:Ae}}).filter(Boolean).sort((de,Ne)=>(Ne.lastMessageTime||0)-(de.lastMessageTime||0))}}catch($){console.error("Error fetching message notifications:",$)}R([...O,...z]),x(z)}catch(Y){console.error("Error fetching notifications:",Y)}})()},[]);function Se(L){return JSON.parse(localStorage.getItem(`seen_posts_${L}`))||[]}const G=E.reduce((L,Y)=>L+(Y.unreadForMe||0),0);return y.useEffect(()=>(s?document.body.classList.add("sidebar-open"):document.body.classList.remove("sidebar-open"),()=>document.body.classList.remove("sidebar-open")),[s]),a.jsxs("div",{className:"dashboard-page",children:[a.jsxs("nav",{className:"top-navbar",children:[a.jsx("h2",{children:"Gojo Dashboard"}),a.jsxs("div",{className:"nav-right",children:[a.jsxs("div",{className:"icon-circle",style:{position:"relative"},children:[a.jsxs("div",{onClick:()=>ee(!K),style:{cursor:"pointer",position:"relative"},children:[a.jsx(Qr,{size:24}),v.length>0&&a.jsx("span",{style:{position:"absolute",top:-5,right:-5,background:"red",color:"white",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:v.length})]}),K&&a.jsx("div",{style:{position:"absolute",top:30,right:0,width:300,maxHeight:400,overflowY:"auto",background:"#fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",borderRadius:8,zIndex:100},children:v.length>0?v.map((L,Y)=>L.type==="post"?a.jsxs("div",{onClick:()=>{ye("/dashboard"),setTimeout(()=>{var ve;const se=(ve=postRefs==null?void 0:postRefs.current)==null?void 0:ve[L.id];se&&(se.scrollIntoView({behavior:"smooth",block:"center"}),j(L.id),setTimeout(()=>j(null),3e3))},150),R(se=>se.filter((ve,F)=>F!==Y)),ee(!1)},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:L.adminProfile,alt:L.adminName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:L.adminName}),a.jsx("p",{style:{margin:0,fontSize:12},children:L.title})]})]},L.id||Y):a.jsxs("div",{onClick:()=>{ee(!1),ye("/all-chat")},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:L.profile||"/default-profile.png",alt:L.displayName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:L.displayName}),a.jsx("p",{style:{margin:0,fontSize:12,color:"#0b78f6"},children:"New message"})]})]},L.chatId||Y)):a.jsx("div",{style:{padding:15},children:"No notifications"})})]}),a.jsx("div",{className:"icon-circle",style:{position:"relative",marginLeft:12},children:a.jsxs("div",{onClick:()=>ye("/all-chat"),style:{cursor:"pointer",position:"relative"},children:[a.jsx(Yr,{size:22}),G>0&&a.jsx("span",{style:{position:"absolute",top:-6,right:-6,background:"#f60b0b",color:"#fff",borderRadius:"50%",minWidth:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 5px"},children:G})]})}),a.jsx("div",{className:"icon-circle",onClick:()=>ye("/settings"),children:a.jsx(Er,{})}),a.jsx("img",{src:(t==null?void 0:t.profileImage)||"/default-profile.png",alt:"teacher",className:"profile-img"})]})]}),a.jsxs("div",{className:"google-dashboard",style:{display:"flex"},children:[a.jsxs("div",{className:"google-sidebar",style:{position:"fixed",top:64,left:0,width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.04)",zIndex:900,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto"},children:[t&&a.jsxs("div",{className:"sidebar-profile",children:[a.jsx("div",{className:"sidebar-img-circle",children:a.jsx("img",{src:t.profileImage||"/default-profile.png",alt:"profile"})}),a.jsx("h3",{children:t.name}),a.jsx("p",{children:t.username})]}),a.jsxs("div",{className:"sidebar-menu",children:[a.jsxs(xe,{className:"sidebar-btn",to:"/dashboard",children:[a.jsx(Xr,{})," Home"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/students",children:[a.jsx(He,{})," Students"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/admins",children:[a.jsx(He,{})," Admins"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/parents",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[a.jsx(Jr,{})," Parents"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/marks",children:[a.jsx(br,{})," Marks"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/attendance",children:[a.jsx(He,{})," Attendance"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/schedule",children:[a.jsx(He,{})," Schedule"]}),a.jsxs("button",{className:"sidebar-btn logout-btn",onClick:te,children:[a.jsx(Zr,{})," Logout"]})]})]}),a.jsx("main",{style:{flex:1,padding:30},children:a.jsxs("div",{style:{maxWidth:480,margin:"0 auto",display:"flex",gap:24,alignItems:"flex-start",flexWrap:"wrap"},children:[a.jsxs("section",{style:{flex:"1 1 320px",minWidth:280},children:[a.jsx("h2",{style:{textAlign:"center",marginBottom:20,color:"#4b6cb7",fontWeight:700},children:"Parents"}),o?a.jsx("p",{style:{textAlign:"center",fontSize:18,color:"#555"},children:"Loading..."}):n.length===0?a.jsx("p",{style:{textAlign:"center",fontSize:18,color:"#999"},children:"No parents found."}):a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:15},children:n.map(L=>a.jsxs("div",{onClick:()=>i(L),style:{display:"flex",gap:15,width:"calc(100% - 50px)",padding:16,marginLeft:50,borderRadius:12,boxShadow:"0 4px 15px rgba(0,0,0,0.08)",backgroundColor:(s==null?void 0:s.id)===L.id?"#f0f4ff":"#fff",cursor:"pointer",alignItems:"center"},children:[a.jsx("img",{src:L.profileImage,alt:L.name,style:{width:60,height:60,borderRadius:"50%",objectFit:"cover"}}),a.jsxs("div",{children:[a.jsx("h3",{style:{margin:0,fontSize:18},children:L.name}),a.jsx("p",{style:{margin:"6px 0 0 0",color:"#777"},children:L.email})]})]},L.id))})]}),s&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"parent-sidebar-overlay",onClick:()=>i(null),style:{display:"none",position:"fixed",inset:0,background:"rgba(0,0,0,0.35)",zIndex:999}}),a.jsxs("aside",{className:"parent-sidebar",style:{width:ue?"100%":420,height:ue?"100vh":"calc(100vh - 60px)",position:"fixed",right:0,top:ue?0:60,background:"#fff",boxShadow:ue?"none":"0 0 20px rgba(0,0,0,0.06)",zIndex:1e3,display:"flex",flexDirection:"column",overflowY:"auto",padding:ue?18:24,transition:"all 0.32s ease"},role:"dialog","aria-modal":"true",children:[a.jsx("button",{onClick:()=>i(null),style:{position:"absolute",top:ue?8:-11,right:18,width:40,height:40,borderRadius:10,border:"none",background:"#fff",boxShadow:"0 8px 18px rgba(2,6,23,0.08)",cursor:"pointer",display:"grid",placeItems:"center",zIndex:1010,fontSize:20},"aria-label":"Close details",children:""}),a.jsxs("div",{style:{textAlign:"center",marginBottom:12},children:[a.jsx("div",{style:{width:100,height:100,margin:"0 auto 12px",borderRadius:"50%",overflow:"hidden",border:"4px solid #4b6cb7"},children:a.jsx("img",{src:s.profileImage,alt:s.name,style:{width:"100%",height:"100%",objectFit:"cover"}})}),a.jsx("h3",{style:{margin:0},children:s.name}),a.jsx("div",{style:{color:"#666",marginTop:6},children:s.email})]}),a.jsx("div",{style:{display:"flex",gap:8,marginBottom:12},children:["Details","Children","Status"].map(L=>a.jsx("button",{onClick:()=>d(L),style:{flex:1,padding:"8px 10px",borderRadius:10,border:"none",cursor:"pointer",background:u===L?"#4b6cb7":"#f0f0f0",color:u===L?"#fff":"#333",fontWeight:700},children:L},L))}),a.jsxs("div",{style:{paddingBottom:40},children:[u==="Details"&&a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:28,padding:50,marginLeft:0,marginRight:0,borderRadius:0,background:"linear-gradient(180deg,#eef2ff,#f8fafc)",fontFamily:"Inter, system-ui"},children:a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:24,fontWeight:900,marginBottom:18,marginTop:-30,background:"linear-gradient(90deg,#2563eb,#7c3aed)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Parent Details"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",columnGap:68,rowGap:14},children:[["Email",s.email||"N/A"],["Phone",s.phone||"N/A"],["Relationship(s)",s.relationships&&s.relationships.length?s.relationships.join(", "):""],["Age",s.age||""],["City",s.city||(s.address&&typeof s.address=="object"?s.address.city:s.city)||""],["Citizenship",s.citizenship||""],["Status",s.status?s.status.charAt(0).toUpperCase()+s.status.slice(1):""],["Address",(typeof s.address=="string"?s.address:s.address&&(s.address.street||s.address.city||JSON.stringify(s.address)))||"",!0]].map(([L,Y,se])=>a.jsxs("div",{style:{padding:18,borderRadius:20,background:"#ffffff",boxShadow:"0 6px 10px rgba(0,0,0,0.08)",marginLeft:-30,marginRight:-30,gridColumn:se?"span 2":"span 1"},children:[a.jsx("div",{style:{fontSize:12,fontWeight:700,color:"#000102",textTransform:"uppercase"},children:L}),a.jsx("div",{style:{marginTop:8,fontSize:16,fontWeight:400,color:"#000102"},children:Y})]},L))})]})}),u==="Children"&&a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:20,background:"#f5f7fa",padding:18,borderRadius:10},children:s.children.map(L=>a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:22,background:"#fff",borderRadius:16,padding:"22px 30px",boxShadow:"0 4px 24px rgba(80,90,130,0.10)",border:"1px solid #edeef2",transition:"box-shadow 0.2s, transform 0.18s",cursor:"pointer"},onMouseEnter:Y=>Y.currentTarget.style.boxShadow="0 8px 32px 0 rgba(60,72,120,0.17)",onMouseLeave:Y=>Y.currentTarget.style.boxShadow="0 4px 24px rgba(80,90,130,0.10)",children:[a.jsx("img",{src:L.profileImage,alt:L.name,style:{width:66,height:66,borderRadius:"50%",border:"3px solid #2868f1",objectFit:"cover",background:"#f0f4fa",flexShrink:0,boxShadow:"0 2px 8px 0 rgba(60,72,120,0.07)"}}),a.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:5},children:[a.jsx("span",{style:{fontWeight:700,fontSize:21,color:"#213052",marginBottom:2},children:L.name}),a.jsxs("div",{style:{display:"flex",columnGap:1,marginTop:-12,marginLeft:-19},children:[a.jsxs("div",{style:{color:"#050505",fontWeight:400,fontSize:14,padding:"6px 18px",borderRadius:999,letterSpacing:.5,boxShadow:"0 2px 8px rgba(22,119,255,.09)"},children:["Grade:",L.grade]}),a.jsxs("div",{style:{color:"#000000",fontWeight:400,fontSize:14,padding:"6px 1px",borderRadius:999,letterSpacing:.5,boxShadow:"0 2px 8px rgba(255,126,95,.09)"},children:["Section:",L.section]})]}),a.jsx("span",{style:{fontSize:15,color:"#424242",marginTop:"-10px"},children:L.relationship&&`Relation: ${L.relationship}`})]})]},L.studentId))}),u==="Status"&&a.jsxs("div",{children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Status:"})," ",s.status||"Active"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Created:"})," ",s.createdAt?new Date(s.createdAt).toLocaleString():""]})]})]}),!p&&a.jsx("div",{onClick:()=>f(!0),style:{position:"fixed",bottom:"20px",right:"20px",width:"60px",height:"60px",background:"linear-gradient(135deg, #3a6fb4, #2147f0, #457ffc)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",cursor:"pointer",zIndex:1e3,boxShadow:"0 8px 18px rgba(0,0,0,0.25)",transition:"transform 0.2s ease"},children:a.jsx(Cp,{size:30})}),p&&s&&a.jsxs("div",{style:{position:"fixed",bottom:"20px",right:"20px",width:"360px",height:"480px",background:"#fff",borderRadius:"16px",boxShadow:"0 12px 30px rgba(0,0,0,0.25)",zIndex:2e3,display:"flex",flexDirection:"column",overflow:"hidden"},children:[a.jsxs("div",{style:{padding:"14px",borderBottom:"1px solid #eee",display:"flex",justifyContent:"space-between",alignItems:"center",background:"#fafafa"},children:[a.jsx("strong",{children:s.name}),a.jsxs("div",{style:{display:"flex",gap:"10px"},children:[a.jsx("button",{onClick:()=>{f(!1),ye("/all-chat",{state:{user:s,tab:"parent"}})},style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px"},children:""}),a.jsx("button",{onClick:()=>f(!1),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:""})]})]}),a.jsxs("div",{style:{flex:1,padding:"12px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"6px",background:"#f9f9f9"},children:[m.length===0?a.jsxs("p",{style:{textAlign:"center",color:"#aaa"},children:["Start chatting with ",s.name]}):m.map(L=>a.jsx("div",{style:{display:"flex",flexDirection:L.senderId===P?"row-reverse":"row",alignItems:"flex-end",marginBottom:10},children:a.jsx("div",{style:{maxWidth:"75%",display:"flex",flexDirection:"column",alignItems:L.senderId===P?"flex-end":"flex-start"},children:a.jsxs("div",{style:{background:L.senderId===P?"#4b6cb7":"#fff",color:L.senderId===P?"#fff":"#0f172a",padding:"10px 14px",borderRadius:18,boxShadow:"0 2px 6px rgba(0,0,0,0.04)",wordBreak:"break-word",position:"relative",paddingBottom:"26px"},children:[a.jsx("div",{children:L.text}),a.jsxs("div",{style:{position:"absolute",right:8,bottom:6,display:"flex",alignItems:"center",gap:6,fontSize:11,color:L.senderId===P?"rgba(255,255,255,0.9)":"#64748b"},children:[a.jsx("span",{style:{fontSize:11},children:w6(L.timeStamp)}),L.senderId===P&&a.jsx(oo,{size:12,color:L.seen?(L.seenAt,"#10b981"):L.seen?"#10b981":"#94a3b8"})]})]})})},L.messageId)),a.jsx("div",{ref:A})]}),a.jsxs("div",{style:{padding:"10px",borderTop:"1px solid #eee",display:"flex",gap:"8px",background:"#fff"},children:[a.jsx("input",{value:_,onChange:L=>N(L.target.value),placeholder:"Type a message...",style:{flex:1,padding:"10px 14px",borderRadius:"999px",border:"1px solid #ccc",outline:"none"},onKeyDown:L=>{L.key==="Enter"&&Q(_)}}),a.jsx("button",{onClick:()=>Q(_),style:{background:"linear-gradient(135deg, #3a65b4, #2c4fee, #458efc)",border:"none",borderRadius:"50%",width:"42px",height:"42px",color:"#fff",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px"},children:""})]})]})]}),a.jsx("style",{children:`
                  @media (max-width: 900px), (orientation: portrait) {
                    .parent-sidebar { width: 100vw !important; height: 100vh !important; left: 0 !important; top: 0 !important; border-radius: 0 !important; padding: 16px !important; }
                    .parent-sidebar-overlay { display: block !important; }
                    body.sidebar-open { overflow: hidden !important; }
                  }
                `})]})]})})]})]})}function b6(){const[t,e]=y.useState(localStorage.getItem("darkMode")==="true");return y.useEffect(()=>{t?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode"),localStorage.setItem("darkMode",t)},[t]),[t,()=>e(r=>!r)]}const E6="https://gojo-teacher-web.onrender.com/api",Tr="https://ethiostore-17d9f-default-rtdb.firebaseio.com";function C6(){const[t,e]=y.useState(null),[n,r]=y.useState("/default-profile.png"),[s,i]=y.useState(""),[o,c]=y.useState(""),[u,d]=y.useState(null),[p,f]=b6(),[m,k]=y.useState(""),[_,N]=y.useState(""),[A,b]=y.useState([]),[w,v]=y.useState(!1),R=On(),[K,ee]=y.useState(!1),[E,x]=y.useState([]);y.useEffect(()=>{const P=JSON.parse(localStorage.getItem("teacher"));if(!P){R("/login");return}e(P)},[R]),y.useEffect(()=>{t&&(r(t.profileImage||"/default-profile.png"),i(t.name||""),c(t.username||""),Te(t))},[t]);const C=P=>d(P.target.files[0]),j=async()=>{if(!u)return alert("Select an image first.");try{const P=new FileReader;P.readAsDataURL(u),P.onloadend=async()=>{const Q=P.result;await X.patch(`${Tr}/Users/${t.userId}.json`,{profileImage:Q});const oe={...t,profileImage:Q};localStorage.setItem("teacher",JSON.stringify(oe)),r(Q),d(null),alert("Profile image updated!")}}catch(P){console.error("Error updating profile image:",P)}},T=async()=>{if(!s||!o)return alert("Name and Username required!");try{await X.patch(`${Tr}/Users/${t.userId}.json`,{name:s,username:o});const P={...t,name:s,username:o};localStorage.setItem("teacher",JSON.stringify(P)),e(P),alert("Profile info updated!")}catch(P){console.error("Error updating info:",P)}},D=async()=>{if(!m||!_)return alert("Fill both password fields.");if(m!==_)return alert("Passwords do not match!");try{await X.patch(`${Tr}/Users/${t.userId}.json`,{password:m}),k(""),N(""),alert("Password updated successfully!")}catch(P){console.error("Error updating password:",P)}},I=()=>{localStorage.removeItem("teacher"),R("/login")};y.useEffect(()=>{(async()=>{try{let oe=(await X.get(`${E6}/get_posts`)).data||[];!Array.isArray(oe)&&typeof oe=="object"&&(oe=Object.values(oe));const[Se,G,L]=await Promise.all([X.get(`${Tr}/School_Admins.json`),X.get(`${Tr}/Users.json`),X.get(`${Tr}/Chats.json`)]),Y=Se.data||{},se=G.data||{},ve=L.data||{},F=JSON.parse(localStorage.getItem("teacher")),q=ye(F==null?void 0:F.userId),he=O=>{const z=O.adminId||O.posterAdminId||O.poster||O.admin||null;if(z&&Y[z]){const $=Y[z],ie=$.userId,W=se[ie]||null,re=W&&W.name||$.name||O.adminName||"Admin",ne=W&&W.profileImage||$.profileImage||O.adminProfile||"/default-profile.png";return{name:re,profile:ne}}return{name:O.adminName||"Admin",profile:O.adminProfile||"/default-profile.png"}},we=oe.slice().sort((O,z)=>{const $=O.time?new Date(O.time).getTime():0;return(z.time?new Date(z.time).getTime():0)-$}).filter(O=>O.postId&&!q.includes(O.postId)).slice(0,5).map(O=>{var $;const z=he(O);return{id:O.postId,type:"post",title:(($=O.message)==null?void 0:$.substring(0,50))||"Untitled post",adminName:z.name,adminProfile:z.profile}});let U=[];F&&F.userId&&Object.entries(ve).forEach(([O,z])=>{const ie=(z.unread||{})[F.userId]||0;if(!ie)return;const W=z.participants||{},re=Object.keys(W).find(ce=>ce!==F.userId);let ne=se[re]||{userId:re,name:re,profileImage:"/default-profile.png"};U.push({chatId:O,type:"message",displayName:ne.name||ne.username||re,profile:ne.profileImage||ne.profile||"/default-profile.png",unreadForMe:ie})});const Z=[...we,...U].slice(0,5);b(Z)}catch(Q){console.error("Error fetching notifications:",Q)}})()},[]);const J=async P=>{if(t){if(P.type==="post"&&P.id)ue(t.userId,P.id),b(Q=>Q.filter(oe=>oe.id!==P.id)),v(!1),R("/dashboard");else if(P.type==="message"&&P.chatId){b(Q=>Q.filter(oe=>oe.chatId!==P.chatId)),v(!1);try{await X.put(`${Tr}/Chats/${P.chatId}/unread/${t.userId}.json`,null)}catch{}R("/all-chat")}}};function ye(P){return JSON.parse(localStorage.getItem(`seen_posts_${P}`))||[]}function ue(P,Q){const oe=ye(P);oe.includes(Q)||localStorage.setItem(`seen_posts_${P}`,JSON.stringify([...oe,Q]))}const Te=async(P=t)=>{try{const Q=P||JSON.parse(localStorage.getItem("teacher"));if(!Q||!Q.userId){x([]);return}const[oe,Se]=await Promise.all([X.get(`${Tr}/Chats.json`),X.get(`${Tr}/Users.json`)]),G=oe.data||{},Y=Se.data||{}||{},se={};Object.entries(Y).forEach(([F,q])=>{q&&q.userId&&(se[q.userId]=F)});const ve=Object.entries(G).map(([F,q])=>{const we=(q.unread||{})[Q.userId]||0;if(!we)return null;const U=q.participants||{},Z=Object.keys(U||{}).find(W=>W!==Q.userId);if(!Z)return null;let O=Z,z=Y[O];if(!z){const W=se[Z];W&&(O=W,z=Y[W])}z||(z={userId:Z,name:Z,profileImage:"/default-profile.png"});const $={pushKey:O,userId:z.userId||Z,name:z.name||z.username||Z,profileImage:z.profileImage||z.profile||"/default-profile.png"},ie=q.lastMessage||{};return{chatId:F,contact:$,displayName:$.name,profile:$.profileImage,lastMessageText:ie.text||"",lastMessageTime:ie.timeStamp||ie.time||null,unreadForMe:we}}).filter(Boolean).sort((F,q)=>(q.lastMessageTime||0)-(F.lastMessageTime||0));x(ve)}catch(Q){console.error("Error fetching conversations:",Q),x([])}},te=A.filter(P=>P.type==="message").reduce((P,Q)=>P+(Q.unreadForMe||0),0);return a.jsxs("div",{className:"dashboard-page",children:[a.jsxs("nav",{className:"top-navbar",children:[a.jsx("h2",{children:"Gojo Dashboard"}),a.jsxs("div",{className:"nav-right",children:[a.jsxs("div",{className:"icon-circle",children:[a.jsxs("div",{onClick:()=>v(!w),style:{cursor:"pointer",position:"relative"},children:[a.jsx(Qr,{size:24}),A.length>0&&a.jsx("span",{style:{position:"absolute",top:-5,right:-5,background:"red",color:"white",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:A.length})]}),w&&a.jsx("div",{style:{position:"absolute",top:30,right:0,width:300,maxHeight:400,overflowY:"auto",background:"#fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",borderRadius:8,zIndex:100},children:A.length>0?A.map((P,Q)=>P.type==="post"?a.jsxs("div",{onClick:()=>J(P),style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:P.adminProfile,alt:P.adminName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:P.adminName}),a.jsx("p",{style:{margin:0,fontSize:12},children:P.title})]})]},P.id||Q):a.jsxs("div",{onClick:()=>J(P),style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:P.profile||"/default-profile.png",alt:P.displayName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:P.displayName}),a.jsx("p",{style:{margin:0,fontSize:12,color:"#0b78f6"},children:"New message"})]})]},P.chatId||Q)):a.jsx("div",{style:{padding:15},children:"No notifications"})})]}),a.jsx("div",{className:"icon-circle",style:{position:"relative",marginLeft:12},children:a.jsxs("div",{onClick:()=>R("/all-chat"),style:{cursor:"pointer",position:"relative"},children:[a.jsx(Yr,{size:22}),te>0&&a.jsx("span",{style:{position:"absolute",top:-6,right:-6,background:"#f60b0b",color:"#fff",borderRadius:"50%",minWidth:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 5px"},children:te})]})}),a.jsx(xe,{className:"icon-circle",to:"/settings",children:a.jsx(Er,{})}),a.jsx("img",{src:(t==null?void 0:t.profileImage)||"/default-profile.png",alt:"teacher",className:"profile-img"})]})]}),a.jsxs("div",{className:"google-dashboard",children:[a.jsxs("div",{className:"google-sidebar",children:[t&&a.jsxs("div",{className:"sidebar-profile",children:[a.jsx("div",{className:"sidebar-img-circle",children:a.jsx("img",{src:t.profileImage||"/default-profile.png",alt:"profile"})}),a.jsx("h3",{children:t.name}),a.jsx("p",{children:t.username})]}),a.jsxs("div",{className:"sidebar-menu",children:[a.jsxs(xe,{className:"sidebar-btn",to:"/dashboard",children:[a.jsx(Xr,{})," Home"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/students",children:[a.jsx(He,{})," Students"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/admins",children:[a.jsx(He,{})," Admins"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/parents",children:[a.jsx(Jr,{})," Parents"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/marks",children:[a.jsx(br,{})," Marks"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/attendance",children:[a.jsx(He,{})," Attendance"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/schedule",children:[a.jsx(He,{})," Schedule"]}),a.jsxs("button",{className:"sidebar-btn logout-btn",onClick:I,children:[a.jsx(Zr,{})," Logout"]})]})]}),a.jsxs("div",{className:"main-content",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",marginTop:"10px",padding:"10px",width:"100%",gap:"30px"},children:[a.jsx("h2",{children:"Settings"}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"30px",borderRadius:"12px",background:p?"#3a3a3a":"#fff",boxShadow:"0 4px 10px rgba(0,0,0,0.1)"},children:[a.jsx("img",{src:n,alt:"profile",style:{width:"150px",height:"150px",borderRadius:"50%",objectFit:"cover",marginBottom:"15px",border:"3px solid #4b6cb7"}}),a.jsx("input",{type:"file",onChange:C}),a.jsx("button",{onClick:j,style:{marginTop:"15px",padding:"10px 20px",borderRadius:"8px",border:"none",background:"#4b6cb7",color:"#fff",cursor:"pointer"},children:"Update Profile Image"})]}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px",padding:"30px",borderRadius:"12px",background:p?"#3a3a3a":"#fff",boxShadow:"0 4px 10px rgba(0,0,0,0.1)"},children:[a.jsx("input",{type:"text",placeholder:"Name",value:s,onChange:P=>i(P.target.value),style:{padding:"10px",borderRadius:"6px",border:"1px solid #ccc"}}),a.jsx("input",{type:"text",placeholder:"Username",value:o,onChange:P=>c(P.target.value),style:{padding:"10px",borderRadius:"6px",border:"1px solid #ccc"}}),a.jsx("button",{onClick:T,style:{padding:"10px 20px",borderRadius:"8px",border:"none",background:"#4b6cb7",color:"#fff",cursor:"pointer"},children:"Update Info"})]}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px",padding:"30px",borderRadius:"12px",background:p?"#3a3a3a":"#fff",boxShadow:"0 4px 10px rgba(0,0,0,0.1)"},children:[a.jsx("input",{type:"password",placeholder:"New Password",value:m,onChange:P=>k(P.target.value),style:{padding:"10px",borderRadius:"6px",border:"1px solid #ccc"}}),a.jsx("input",{type:"password",placeholder:"Confirm Password",value:_,onChange:P=>N(P.target.value),style:{padding:"10px",borderRadius:"6px",border:"1px solid #ccc"}}),a.jsx("button",{onClick:D,style:{padding:"10px 20px",borderRadius:"8px",border:"none",background:"#4b6cb7",color:"#fff",cursor:"pointer"},children:"Change Password"})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px",padding:"20px",borderRadius:"12px",background:p?"#3a3a3a":"#fff",boxShadow:"0 4px 10px rgba(0,0,0,0.1)"},children:[a.jsx("label",{style:{fontSize:"18px",fontWeight:"500"},children:"Dark Mode"}),a.jsx("input",{type:"checkbox",checked:p,onChange:f})]})]})]})]})}const I6="https://gojo-teacher-web.onrender.com/api",Jo="https://ethiostore-17d9f-default-rtdb.firebaseio.com";function j6(){const[t,e]=y.useState(null),[n,r]=y.useState({}),[s,i]=y.useState(!0),[o,c]=y.useState(""),[u,d]=y.useState("All"),[p,f]=y.useState("All"),[m,k]=y.useState([]),[_,N]=y.useState(!1),[A,b]=y.useState(null),[w,v]=y.useState(!0),[R,K]=y.useState([]);y.useRef({});const ee=On(),E=["All","A","B","C","D"],x=["Monday","Tuesday","Wednesday","Thursday","Friday"],[C,j]=y.useState(typeof window<"u"?window.innerWidth<=900:!1);y.useEffect(()=>{const P=()=>j(window.innerWidth<=900);return window.addEventListener("resize",P),()=>window.removeEventListener("resize",P)},[]);const T=m.filter(P=>P.type==="message").reduce((P,Q)=>P+(Q.unreadForMe||0),0);y.useEffect(()=>{const P=JSON.parse(localStorage.getItem("teacher"));if(!P){ee("/login");return}e(P)},[ee]),y.useEffect(()=>{if(!t)return;async function P(){i(!0);try{const Q=await X.get(`${Jo}/Schedules.json`);r(Q.data||{}),c("")}catch{c("Failed to load schedule.")}finally{i(!1)}}P()},[t]);const D=()=>{localStorage.removeItem("teacher"),ee("/login")},J=(()=>{if(!t||!n)return{};const P={};return Object.entries(n).forEach(([Q,oe])=>{Object.entries(oe||{}).forEach(([Se,G])=>{Object.entries(G||{}).forEach(([L,Y])=>{var se;Y!=null&&Y.teacherName&&Y.teacherName===t.name&&(P[Q]||(P[Q]={}),P[Q][L]||(P[Q][L]=[]),P[Q][L].push({class:Se,subject:Y.subject||"-",time:Y.time||((se=L.match(/\((.*?)\)/))==null?void 0:se[1])||"N/A"}))})})}),P})();function ye(P){return JSON.parse(localStorage.getItem(`seen_posts_${P}`))||[]}function ue(P,Q){const oe=ye(P);oe.includes(Q)||localStorage.setItem(`seen_posts_${P}`,JSON.stringify([...oe,Q]))}y.useEffect(()=>{(async()=>{try{let oe=(await X.get(`${I6}/get_posts`)).data||[];!Array.isArray(oe)&&typeof oe=="object"&&(oe=Object.values(oe));const[Se,G,L]=await Promise.all([X.get(`${Jo}/School_Admins.json`),X.get(`${Jo}/Users.json`),X.get(`${Jo}/Chats.json`)]),Y=Se.data||{},se=G.data||{},ve=L.data||{},F=JSON.parse(localStorage.getItem("teacher")),q=ye(F==null?void 0:F.userId),he=O=>{const z=O.adminId||O.posterAdminId||O.poster||O.admin||null;if(z&&Y[z]){const $=Y[z],ie=$.userId,W=se[ie]||null,re=W&&W.name||$.name||O.adminName||"Admin",ne=W&&W.profileImage||$.profileImage||O.adminProfile||"/default-profile.png";return{name:re,profile:ne}}return{name:O.adminName||"Admin",profile:O.adminProfile||"/default-profile.png"}},we=oe.slice().sort((O,z)=>{const $=O.time?new Date(O.time).getTime():0;return(z.time?new Date(z.time).getTime():0)-$}).filter(O=>O.postId&&!q.includes(O.postId)).slice(0,5).map(O=>{var $;const z=he(O);return{id:O.postId,type:"post",title:(($=O.message)==null?void 0:$.substring(0,50))||"Untitled post",adminName:z.name,adminProfile:z.profile}});let U=[];F&&F.userId&&Object.entries(ve).forEach(([O,z])=>{const ie=(z.unread||{})[F.userId]||0;if(!ie)return;const W=z.participants||{},re=Object.keys(W).find(ce=>ce!==F.userId);let ne=se[re]||{userId:re,name:re,profileImage:"/default-profile.png"};U.push({chatId:O,type:"message",displayName:ne.name||ne.username||re,profile:ne.profileImage||ne.profile||"/default-profile.png",unreadForMe:ie})});const Z=[...we,...U].slice(0,5);k(Z)}catch{}})()},[]);const Te=async P=>{if(t){if(P.type==="post"&&P.id)ue(t.userId,P.id),k(Q=>Q.filter(oe=>oe.id!==P.id)),N(!1),ee("/dashboard");else if(P.type==="message"&&P.chatId){k(Q=>Q.filter(oe=>oe.chatId!==P.chatId)),N(!1);try{await X.put(`${Jo}/Chats/${P.chatId}/unread/${t.userId}.json`,null)}catch{}ee("/all-chat")}}};return a.jsxs("div",{className:"gojo-root-dashboard",children:[a.jsx("style",{children:`
    body, html, #root { height: 100%; margin: 0; }
    .gojo-root-dashboard {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      background: #f0f4f8;
      overflow: hidden;
    }
    .top-navbar {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      z-index: 1000;
      background: #fff;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 24px;
      height: 60px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.07);
    }
    .google-sidebar {
      position: fixed;
      top: 60px;
      left: 0;
      width: 220px;
      height: calc(100vh - 60px);
      background: #fff;
      box-shadow: 2px 0 8px rgba(0,0,0,0.04);
      z-index: 900;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-top: 18px;
      overflow-y: auto;
      transition: width 0.2s;
      min-width: 48px;
    }
    .main-area-row {
      display: flex;
      flex: 1;
      flex-direction: row;
      height: 100vh;
      margin-top: 60px;
      width: 100%;
      min-width: 0;
    }
    .schedule-main {
      flex: 1;
      margin-left: 220px;
      padding: 30px;
      background: #f0f4f8;
      min-height: calc(100vh - 60px);
      overflow-y: auto;
      transition: margin-left 0.2s;
      position: relative;
      z-index: 20;
    }
    .right-sidebar {
      position: fixed;
      top: 60px;
      right: 0;
      width: 350px;
      height: calc(100vh - 60px);
      z-index: 300;
      background: #fff;
      box-shadow: 0 0 20px rgba(0,0,0,0.07);
      display: flex;
      flex-direction: column;
      transition: right 0.2s, left 0.2s, width 0.2s;
    }
    .close-sidebar-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      background: linear-gradient(90deg, #2563eb, #3b82f6);
      color: #fff;
      border: none;
      border-radius: 50%;
      width: 36px;
      height: 36px;
      font-size: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
      z-index: 10;
      cursor: pointer;
    }
    @media (max-width: 900px) {
      .google-sidebar { width: 60px; min-width: 60px; }
      .schedule-main { margin-left: 60px; padding: 17px 2vw; }
      .right-sidebar { width: 90vw; left: 60px; right: initial; }
    }
    @media (max-width: 600px) {
      .top-navbar { height: 54px; padding: 0 7px; }
      .google-sidebar {
        top: 54px;
        width: 48px;
        min-width: 48px;
        padding: 0;
        align-items: flex-start;
      }
      .main-area-row { margin-top: 54px; }
      .schedule-main { margin-left: 48px; padding: 8px 2vw; border-radius: 7px; }
      .right-sidebar { left: 48px; right: initial; width: 100vw; height: calc(100vh - 54px); }
      .close-sidebar-btn {
        top: 8px !important;
        right: 8px !important;
        width: 44px !important;
        height: 44px !important;
        font-size: 22px !important;
      }
    }
  `}),a.jsxs("nav",{className:"top-navbar",children:[a.jsx("h2",{children:"Gojo Dashboard"}),a.jsxs("div",{className:"nav-right",style:{display:"flex",alignItems:"center",gap:16},children:[a.jsxs("div",{className:"icon-circle",style:{position:"relative"},children:[a.jsxs("div",{onClick:()=>N(!_),style:{cursor:"pointer",position:"relative"},children:[a.jsx(Qr,{size:24}),m.length>0&&a.jsx("span",{style:{position:"absolute",top:-5,right:-5,background:"red",color:"white",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:m.length})]}),_&&a.jsx("div",{style:{position:"absolute",top:28,right:0,width:300,maxHeight:400,overflowY:"auto",background:"#fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",borderRadius:8,zIndex:100},children:m.length?m.map((P,Q)=>a.jsxs("div",{onClick:()=>Te(P.id),style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[a.jsx("img",{src:P.adminProfile,alt:P.adminName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),a.jsxs("div",{children:[a.jsx("strong",{children:P.adminName}),a.jsx("p",{style:{margin:0,fontSize:12},children:P.title})]})]},P.id||Q)):a.jsx("div",{style:{padding:15},children:"No notifications"})})]}),a.jsx("div",{className:"icon-circle",style:{position:"relative",marginLeft:12},children:a.jsxs("div",{onClick:()=>ee("/all-chat"),style:{cursor:"pointer",position:"relative"},children:[a.jsx(Yr,{size:22}),T>0&&a.jsx("span",{style:{position:"absolute",top:-6,right:-6,background:"#ff0000",color:"#fff",borderRadius:"50%",minWidth:18,height:18,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 6px",fontSize:12},children:T})]})}),a.jsx("div",{className:"icon-circle",onClick:()=>ee("/settings"),children:a.jsx(Er,{})}),a.jsx("img",{src:(t==null?void 0:t.profileImage)||"/default-profile.png",alt:"profile",style:{width:36,height:36,borderRadius:"50%"}})]})]}),a.jsxs("div",{className:"main-area-row",children:[a.jsxs("div",{className:"google-sidebar",style:{position:"fixed",top:64,left:0,width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.04)",zIndex:900,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto"},children:[t&&a.jsxs("div",{className:"sidebar-profile",children:[a.jsx("div",{className:"sidebar-img-circle",children:a.jsx("img",{src:t.profileImage||"/default-profile.png",alt:"profile",style:{width:"100%",height:"100%",objectFit:"cover",border:"none",boxShadow:"none"}})}),a.jsx("h3",{children:t.name}),a.jsx("p",{children:t.username})]}),a.jsxs("div",{className:"sidebar-menu",style:{display:"flex",flexDirection:"column",gap:8,width:"100%"},children:[a.jsxs(xe,{className:"sidebar-btn",to:"/dashboard",children:[a.jsx(Xr,{})," Home"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/students",children:[a.jsx(He,{})," Students"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/admins",children:[a.jsx(He,{})," Admins"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/parents",children:[a.jsx(Jr,{})," Parents"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/marks",children:[a.jsx(br,{})," Marks"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/attendance",children:[a.jsx(He,{})," Attendance"]}),a.jsxs(xe,{className:"sidebar-btn",to:"/schedule",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[a.jsx(He,{})," Schedule"]}),a.jsxs("button",{className:"sidebar-btn logout-btn",onClick:D,children:[a.jsx(Zr,{})," Logout"]})]})]}),a.jsx("div",{className:"schedule-main",children:a.jsxs("div",{className:"schedule-container",style:{width:"100%",maxWidth:900,margin:"0 auto"},children:[a.jsxs("div",{style:{display:"flex",gap:"20px",marginBottom:"25px",justifyContent:"center",flexWrap:"wrap"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{marginRight:"8px",fontWeight:"600"},children:"Grade:"}),a.jsxs("select",{value:u,onChange:P=>d(P.target.value),style:{padding:"8px 12px",borderRadius:"8px",border:"1px solid #ccc",cursor:"pointer"},children:[a.jsx("option",{value:"All",children:"All"}),a.jsx("option",{value:"9",children:"9"}),a.jsx("option",{value:"10",children:"10"}),a.jsx("option",{value:"12",children:"12"})]})]}),a.jsxs("div",{children:[a.jsx("label",{style:{marginRight:"8px",fontWeight:"600"},children:"Section:"}),a.jsxs("select",{value:p,onChange:P=>f(P.target.value),style:{padding:"8px 12px",borderRadius:"8px",border:"1px solid #ccc",cursor:"pointer"},children:[a.jsx("option",{value:"All",children:"All"}),E.filter(P=>P!=="All").map(P=>a.jsx("option",{value:P,children:P},P))]})]})]}),a.jsx("h2",{style:{textAlign:"center",marginBottom:"30px",color:"#2563eb"},children:"Full Schedule"}),s&&a.jsx("p",{style:{textAlign:"center"},children:"Loading schedule..."}),o&&a.jsx("p",{style:{color:"red",textAlign:"center"},children:o}),!s&&x.map(P=>{const Q=n[P];return Q?a.jsxs("div",{style:{marginBottom:"40px"},children:[a.jsx("h3",{style:{color:"#1c03ffff",marginBottom:"15px"},children:P}),Object.entries(Q).filter(([oe])=>u==="All"||oe.includes(u)).map(([oe,Se])=>{const G=oe.slice(-1);return p!=="All"&&G!==p?null:a.jsxs("div",{style:{marginBottom:"18px"},children:[a.jsx("h4",{style:{color:"#4603fcff",marginBottom:"10px"},children:oe}),a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",background:"#fff",borderRadius:"12px",overflow:"hidden",boxShadow:"0 8px 20px rgba(0,0,0,0.1)"},children:[a.jsx("thead",{style:{background:"#2563eb",color:"#fff"},children:a.jsxs("tr",{children:[a.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Period"}),a.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Subject"}),a.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Time"}),a.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Teacher"})]})}),a.jsx("tbody",{children:Object.entries(Se).map(([L,Y],se)=>{var q;const ve=(Y==null?void 0:Y.teacherName)===(t==null?void 0:t.name),F=Y.time||((q=L.match(/\((.*?)\)/))==null?void 0:q[1])||"N/A";return a.jsxs("tr",{style:{borderBottom:"1px solid #eee",backgroundColor:ve?"#dbeafe":"#f3f4f6",color:ve?"#1e40af":"#6b7280",fontWeight:ve?"700":"400",borderLeft:ve?"4px solid #2563eb":"none",opacity:ve?1:.85},children:[a.jsx("td",{style:{padding:"12px"},children:L}),a.jsx("td",{style:{padding:"12px"},children:Y.subject||"-"}),a.jsx("td",{style:{padding:"12px"},children:F}),a.jsx("td",{style:{padding:"12px"},children:Y.teacherName||"-"})]},se)})})]})]},oe)})]},P):null})]})}),w&&a.jsxs("div",{className:"right-sidebar",children:[a.jsx("button",{title:"Close sidebar",onClick:()=>v(!1),className:"close-sidebar-btn",style:{marginRight:"40px"},children:a.jsx(Ep,{})}),a.jsx("div",{style:{display:"flex",alignItems:"center",background:"linear-gradient(90deg, #2563eb, #3b82f6)",color:"#fff",padding:"12px 48px 12px 20px",textAlign:"center",fontWeight:"600",fontSize:"1.2rem",boxShadow:"0 2px 6px rgba(0,0,0,0.1)",borderTopLeftRadius:"1px",borderTopRightRadius:"1px",justifyContent:"flex-start"},children:"My Schedule"}),a.jsx("div",{style:{padding:"20px",height:"calc(100% - 60px)",overflowY:"auto",background:"#f9fafb"},children:s?a.jsx("p",{style:{textAlign:"center",color:"#6b7280"},children:"Loading schedule..."}):Object.keys(J).length===0?a.jsx("p",{style:{textAlign:"center",color:"#6b7280"},children:"No schedule found."}):x.map(P=>{const Q=J[P];if(!Q)return null;const Se=new Date().toLocaleDateString("en-US",{weekday:"long"})===P;return a.jsxs("div",{style:{marginBottom:"20px",padding:"10px",borderRadius:"12px",background:Se?"#e0f2fe":"#fff",boxShadow:Se?"0 4px 12px rgba(59, 130, 246, 0.2)":"0 2px 6px rgba(0,0,0,0.05)"},children:[a.jsx("h4",{style:{color:"#1e3a8a",marginBottom:"12px",fontWeight:"600",fontSize:"1.05rem",borderBottom:"1px solid #e5e7eb",paddingBottom:"5px"},children:P}),Object.entries(Q).map(([G,L])=>a.jsxs("div",{style:{marginBottom:"12px",background:"#f3f4f6",padding:"12px 15px",borderRadius:"10px",borderLeft:"5px solid #2563eb",boxShadow:"0 1px 3px rgba(0,0,0,0.05)",transition:"transform 0.2s, box-shadow 0.2s"},children:[a.jsx("strong",{style:{display:"block",marginBottom:"6px",color:"#1e3a8a",fontSize:"0.98rem"},children:G}),a.jsx("ul",{style:{paddingLeft:"18px",margin:0},children:L.map((Y,se)=>a.jsxs("li",{style:{marginBottom:"6px",color:"#374151",fontSize:"0.95rem"},children:[a.jsx("span",{style:{fontWeight:"600",color:"#2563eb"},children:Y.class})," - ",Y.subject," (",Y.time,")"]},se))})]},G))]},P)})})]}),!w&&a.jsx("button",{title:"Open sidebar",onClick:()=>v(!0),style:{position:"fixed",top:"80px",right:"20px",width:"35px",height:"40px",background:"linear-gradient(90deg, #2563eb, #3b82f6)",color:"#fff",border:"none",borderRadius:"20px",boxShadow:"0 4px 12px rgba(59,130,246, 0.15)",zIndex:301,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"right 0.3s"},children:a.jsx(SI,{})})]})]})}const sc=(t,e)=>[String(t),String(e)].sort().join("_");function k6(){const t=On(),e=Ls(),n=y.useRef(null),r=JSON.parse(localStorage.getItem("teacher"))||{},s=String(r.userId||""),[i,o]=y.useState([]),[c,u]=y.useState([]),[d,p]=y.useState([]),[f,m]=y.useState([]),[k,_]=y.useState(""),[N,A]=y.useState(!0),[b,w]=y.useState({}),[v,R]=y.useState(!1),[K,ee]=y.useState({}),E=e.state||{},x=E.contact||E.user||null,C=E.chatId||null,j=E.tab||null,[T,D]=y.useState(j||"student"),[I,J]=y.useState(x||null),[ye,ue]=y.useState(C||null),[Te,te]=y.useState(null),[P,Q]=y.useState({}),[oe,Se]=y.useState({}),G=(U={})=>U.profileImage||U.profile||U.avatar||"/default-profile.png";y.useEffect(()=>{(async()=>{try{const[Z,O,z,$]=await Promise.all([fetch("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Students.json").then(ce=>ce.json()),fetch("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Parents.json").then(ce=>ce.json()),fetch("https://ethiostore-17d9f-default-rtdb.firebaseio.com/School_Admins.json").then(ce=>ce.json()),fetch("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Users.json").then(ce=>ce.json())]),ie=$||{},W=Object.values(Z||{}).map(ce=>{const fe=ie[ce.userId]||{};return{userId:ce.userId,name:fe.name||ce.name||"Student",profileImage:G(fe)}}),re=Object.values(O||{}).map(ce=>{const fe=ie[ce.userId]||{};return{userId:ce.userId,name:fe.name||ce.name||"Parent",profileImage:G(fe)}}),ne=Object.values(z||{}).map(ce=>{const fe=ie[ce.userId]||{};return{userId:ce.userId,name:ce.name||fe.name||"Admin",profileImage:G(fe)}});o(W),u(re),p(ne)}catch(Z){console.error(" Fetch error:",Z)}})()},[]),y.useEffect(()=>{if(!s)return;const U=[...i,...c,...d],Z=[];return U.forEach(O=>{if(!O||!O.userId)return;const z=sc(s,O.userId);try{const $=Lt(Wt,`Chats/${z}/unread/${s}`),ie=Qi($,W=>{const re=W.val();ee(ne=>({...ne,[O.userId]:Number(re)||0}))});Z.push(ie)}catch{}}),()=>{Z.forEach(O=>O())}},[i,c,d,s]),y.useEffect(()=>{const U=()=>{const Z=typeof window<"u"&&window.innerWidth<640;R(Z),Z&&A(!1)};return U(),window.addEventListener("resize",U),()=>window.removeEventListener("resize",U)},[]),y.useEffect(()=>{x&&J(x),C&&ue(C),j&&D(j)},[x,C,j]),y.useEffect(()=>{I||(T==="student"&&i.length&&J(i[0]),T==="parent"&&c.length&&J(c[0]),T==="admin"&&d.length&&J(d[0]))},[T,i,c,d,I]),y.useEffect(()=>{const U=x;if(U){if(T==="student"&&i.length){const Z=i.find(O=>O.userId===U.userId);Z&&J(Z)}if(T==="parent"&&c.length){const Z=c.find(O=>O.userId===U.userId);Z&&J(Z)}if(T==="admin"&&d.length){const Z=d.find(O=>O.userId===U.userId);Z&&J(Z)}}},[i,c,d,x,T]),y.useEffect(()=>{if(!I||!s)return;const U=ye||sc(s,I.userId);ue(U);const Z=Lt(Wt,`Chats/${U}/messages`),O=Qi(Z,z=>{const $=z.val()||{},ie=Object.entries($).filter(([W,re])=>!re.deleted).map(([W,re])=>({id:W,...re,isTeacher:re.senderId===s})).sort((W,re)=>W.timeStamp-re.timeStamp);m(ie),Object.entries($).forEach(([W,re])=>{re&&!re.seen&&re.receiverId===s&&Rr(Lt(Wt,`Chats/${U}/messages/${W}`),{seen:!0}).catch(console.error)}),Rr(Lt(Wt,`Chats/${U}/unread`),{[s]:0}).catch(console.error)});return()=>O()},[I,s,ye]),y.useEffect(()=>{try{const U=Lt(Wt,"Presence"),Z=Qi(U,O=>{const z=O.val()||{};w(z)});return()=>Z()}catch(U){console.warn("Presence listener unavailable:",U)}},[]);const L=async()=>{if(!k.trim()||!I)return;const U=Object.keys(P).find(O=>P[O]),Z=ye||sc(s,I.userId);if(U)await Rr(Lt(Wt,`Chats/${Z}/messages/${U}`),{text:k,edited:!0}),Q({}),te(null),_("");else{const O=Lt(Wt,`Chats/${Z}/messages`),z={senderId:s,receiverId:I.userId,type:"text",text:k,seen:!1,edited:!1,deleted:!1,timeStamp:Date.now()};await dT(O,z),await Rr(Lt(Wt,`Chats/${Z}/participants`),{[s]:!0,[I.userId]:!0}),await Rr(Lt(Wt,`Chats/${Z}/lastMessage`),{text:k,senderId:s,seen:!1,timeStamp:z.timeStamp});try{const $=Lt(Wt,`Chats/${Z}/unread/${I.userId}`);await Rr(Lt(Wt,`Chats/${Z}/unread`),{[s]:0,[I.userId]:1})}catch{}_("")}},Y=U=>{const Z=ye||sc(s,I.userId);Rr(Lt(Wt,`Chats/${Z}/messages/${U}`),{deleted:!0}).catch(console.error)},se=(U,Z)=>{Q({[U]:!0}),_(Z),te(U)},ve=U=>{const Z=new Date(U);return`${Z.getHours().toString().padStart(2,"0")}:${Z.getMinutes().toString().padStart(2,"0")}`},F=U=>{if(!U)return"";const Z=new Date(Number(U)),O=new Date,z=new Date(O.getFullYear(),O.getMonth(),O.getDate()),$=new Date(Z.getFullYear(),Z.getMonth(),Z.getDate()),ie=z-$,W=Math.floor(ie/(24*60*60*1e3));return W===0?"Today":W===1?"Yesterday":W>1&&W<7?`${W} days ago`:Z.toLocaleDateString()};y.useEffect(()=>{var U;(U=n.current)==null||U.scrollIntoView({behavior:"smooth"})},[f]);const q=T==="student"?i:T==="parent"?c:d,he=U=>{if(!U)return!1;const O=(()=>{if((b==null?void 0:b[U])!==void 0)return b[U];const z=String(U);if((b==null?void 0:b[z])!==void 0)return b[z];const $=Number(U);if(!Number.isNaN($)&&(b==null?void 0:b[$])!==void 0)return b[$];for(const[,ie]of Object.entries(b||{}))try{if(ie&&(ie.userId===U||String(ie.userId)===z))return ie}catch{}})();if(O==null)return!1;if(typeof O=="boolean")return O===!0;if(typeof O=="object"){if(O.state==="online"||O.online===!0)return!0;if(O.lastSeen){const z=Number(O.lastSeen)||0;return Date.now()-z<6e4}if(typeof O=="number")return Date.now()-O<6e4}return!1},we=U=>{const Z=b==null?void 0:b[U];if(!Z)return null;let O=null;if((typeof Z=="number"||/^[0-9]+$/.test(String(Z)))&&(O=Number(Z)),typeof Z=="object"&&(O=Z.lastSeen||Z.timestamp||Z.lastActive||Z.last_seen||Z.time||null),!O)return null;const z=Date.now()-Number(O),$=Math.floor(z/1e3);if($<60)return"last seen just now";const ie=Math.floor($/60);if(ie<60)return`last seen ${ie}m ago`;const W=Math.floor(ie/60);if(W<24)return`last seen ${W}h ago`;const re=Math.floor(W/24);return re<7?`last seen ${re}d ago`:`last seen on ${new Date(O).toLocaleDateString()}`};return a.jsxs("div",{style:{display:"flex",height:"100vh",background:"#eef2f7",fontFamily:"sans-serif"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"stretch"},children:[a.jsxs("div",{style:{width:N?v?220:280:0,background:"#fff",padding:N?16:0,boxShadow:N?"2px 0 10px rgba(0,0,0,0.1)":"none",display:N?"flex":"none",flexDirection:"column",transition:"width 180ms ease"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[a.jsx("button",{onClick:()=>t(-1),style:{border:"none",background:"none",padding:4,cursor:"pointer"},children:a.jsx(wI,{size:18})}),a.jsx("div",{style:{display:"flex",gap:6,margin:"12px 0",alignItems:"center"},children:["student","parent","admin"].map(U=>a.jsx("button",{onClick:()=>{D(U),J(null),ue(null)},style:{flex:1,padding:8,borderRadius:20,border:"none",background:T===U?"#4facfe":"#ddd",color:T===U?"#fff":"#000",cursor:"pointer",fontSize:14},children:U.charAt(0).toUpperCase()+U.slice(1)}))})]}),a.jsx("div",{style:{marginTop:8,overflowY:"auto",flex:1},children:q.map(U=>a.jsxs("div",{onClick:()=>{J(U),ue(null)},style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:10,padding:10,borderRadius:14,cursor:"pointer",marginBottom:8,background:(I==null?void 0:I.userId)===U.userId?"#dbeafe":"#f9fafb",boxShadow:(I==null?void 0:I.userId)===U.userId?"0 2px 10px rgba(0,0,0,0.1)":"none"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[a.jsxs("div",{style:{position:"relative"},children:[a.jsx("img",{src:U.profileImage,alt:U.name,onError:Z=>Z.target.src="/default-profile.png",style:{width:v?36:40,height:v?36:40,borderRadius:"50%",objectFit:"cover"}}),a.jsx("span",{style:{position:"absolute",right:-2,bottom:-2,width:12,height:12,borderRadius:12,border:"2px solid #fff",background:he(U.userId)?"#34D399":"#cbd5e1"}})]}),a.jsx("span",{style:{fontWeight:500,marginLeft:0},children:U.name})]}),K[U.userId]>0?a.jsx("div",{style:{minWidth:26,height:26,display:"flex",alignItems:"center",justifyContent:"center",background:"#ef4444",color:"#fff",borderRadius:14,padding:"0 6px",fontSize:12,fontWeight:600},children:K[U.userId]>99?"99+":K[U.userId]}):a.jsx("div",{style:{width:26}})]},U.userId))})]}),a.jsx("div",{style:{width:28,display:"flex",alignItems:"flex-start",justifyContent:"center"},children:a.jsx("button",{onClick:()=>A(U=>!U),style:{border:"none",background:"#fff",borderRadius:4,padding:4,boxShadow:"0 1px 4px rgba(0,0,0,0.08)",cursor:"pointer",marginTop:8},"aria-label":"Toggle sidebar",children:N?"":""})})]}),a.jsx("div",{style:{flex:1,padding:16,display:"flex",flexDirection:"column"},children:I?a.jsxs(a.Fragment,{children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:"12px 0",borderBottom:"1px solid #ccc",boxShadow:"0 2px 6px rgba(0,0,0,0.05)",background:"#fff",borderRadius:8,marginBottom:8},children:[a.jsx("img",{src:I.profileImage,alt:I.name,onError:U=>U.target.src="/default-profile.png",style:{width:v?40:50,height:v?40:50,borderRadius:"50%",objectFit:"cover"}}),a.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[a.jsx("span",{style:{fontWeight:600,fontSize:16},children:I.name}),a.jsx("span",{style:{fontSize:12,color:he(I.userId)?"#16A34A":"#666"},children:he(I.userId)?"Online":we(I.userId)||T.charAt(0).toUpperCase()+T.slice(1)})]})]}),a.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"12px 16px",display:"flex",flexDirection:"column"},children:[f.map(U=>{const Z=U.isTeacher,O=!!P[U.id],z=Te===U.id;return a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:Z?"flex-end":"flex-start",marginBottom:10},children:[a.jsxs("div",{onClick:()=>te(U.id),style:{maxWidth:v?"85%":"70%",background:Z?"#4facfe":"#fff",color:Z?"#fff":"#000",padding:"10px 14px",borderRadius:18,borderTopRightRadius:Z?0:18,borderTopLeftRadius:Z?18:0,boxShadow:"0 1px 3px rgba(0,0,0,0.1)",wordBreak:"break-word",cursor:"pointer",position:"relative"},children:[U.text," ",U.edited&&a.jsx("small",{style:{fontSize:10},children:" (edited)"}),a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:6,marginTop:4,fontSize:11,color:Z?"#fff":"#888"},children:[a.jsx("span",{style:{marginRight:6,fontSize:11,opacity:.9},children:F(U.timeStamp)}),a.jsx("span",{children:ve(U.timeStamp)}),Z&&!U.deleted&&a.jsxs("span",{style:{display:"flex",gap:0},children:[a.jsx(oo,{size:10,color:"#fff",style:{opacity:.8}}),U.seen&&a.jsx(oo,{size:10,color:"#f3f7f8",style:{marginLeft:2,opacity:.95}})]})]})]}),z&&Z&&!U.deleted&&!O&&a.jsxs("div",{style:{display:"flex",gap:6,marginTop:4,fontSize:12,justifyContent:Z?"flex-end":"flex-start"},children:[a.jsx("button",{onClick:()=>se(U.id,U.text),style:{padding:"2px 6px",borderRadius:4,border:"1px solid #ccc",cursor:"pointer",background:"#f1f1f1"},children:"Edit"}),a.jsx("button",{onClick:()=>Y(U.id),style:{padding:"2px 6px",borderRadius:4,border:"1px solid #ccc",cursor:"pointer",background:"#f1f1f1",color:"red"},children:"Delete"})]})]},U.id)}),a.jsx("div",{ref:n})]}),a.jsxs("div",{style:{display:"flex",gap:8,marginTop:8},children:[a.jsx("input",{value:k,onChange:U=>_(U.target.value),onKeyDown:U=>U.key==="Enter"&&L(),placeholder:"Type a message...",style:{flex:1,padding:v?10:12,borderRadius:25,border:"1px solid #ccc",outline:"none"}}),a.jsx("button",{onClick:L,style:{width:v?40:45,height:v?40:45,borderRadius:"50%",background:"#4facfe",border:"none",color:"#fff",display:"flex",justifyContent:"center",alignItems:"center"},children:a.jsx(Dv,{})})]})]}):a.jsx("h3",{style:{textAlign:"center",marginTop:50},children:"Select a user to start chatting "})})]})}function T6(){return a.jsx(IE,{basename:"/Gojo-Teacher-Web",children:a.jsxs(rE,{children:[a.jsx(an,{path:"/",element:a.jsx(Fd,{})}),a.jsx(an,{path:"/login",element:a.jsx(Fd,{})}),a.jsx(an,{path:"/register",element:a.jsx(fI,{})}),a.jsx(an,{path:"/dashboard",element:a.jsx(r6,{})}),a.jsx(an,{path:"/students",element:a.jsx(c6,{})}),a.jsx(an,{path:"/admins",element:a.jsx(y6,{})}),a.jsx(an,{path:"/marks",element:a.jsx(d6,{})}),a.jsx(an,{path:"/attendance",element:a.jsx(f6,{})}),a.jsx(an,{path:"/notes",element:a.jsx(v6,{})})," ",a.jsx(an,{path:"/parents",element:a.jsx(S6,{})}),a.jsx(an,{path:"/settings",element:a.jsx(C6,{})}),a.jsx(an,{path:"all-chat",element:a.jsx(k6,{})}),a.jsx(an,{path:"schedule",element:a.jsx(j6,{})}),a.jsx(an,{path:"*",element:a.jsx(Fd,{})})]})})}const N6=y.createContext(),R6=({children:t})=>{const[e,n]=y.useState("light");y.useEffect(()=>{const s=localStorage.getItem("theme");s&&n(s)},[]),y.useEffect(()=>{document.body.className=e==="dark"?"dark-mode":"",localStorage.setItem("theme",e)},[e]);const r=()=>{n(s=>s==="light"?"dark":"light")};return a.jsx(N6.Provider,{value:{theme:e,toggleTheme:r},children:t})};function A6(){return a.jsx(R6,{children:a.jsx(T6,{})})}th.createRoot(document.getElementById("root")).render(a.jsx(Xt.StrictMode,{children:a.jsx(A6,{})}));
