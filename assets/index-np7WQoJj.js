(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function z_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Dy={exports:{}},gu={},My={exports:{}},Ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nl=Symbol.for("react.element"),B_=Symbol.for("react.portal"),U_=Symbol.for("react.fragment"),$_=Symbol.for("react.strict_mode"),W_=Symbol.for("react.profiler"),H_=Symbol.for("react.provider"),V_=Symbol.for("react.context"),K_=Symbol.for("react.forward_ref"),G_=Symbol.for("react.suspense"),q_=Symbol.for("react.memo"),Y_=Symbol.for("react.lazy"),Um=Symbol.iterator;function Q_(t){return t===null||typeof t!="object"?null:(t=Um&&t[Um]||t["@@iterator"],typeof t=="function"?t:null)}var Ly={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Fy=Object.assign,zy={};function wo(t,e,n){this.props=t,this.context=e,this.refs=zy,this.updater=n||Ly}wo.prototype.isReactComponent={};wo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};wo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function By(){}By.prototype=wo.prototype;function Sf(t,e,n){this.props=t,this.context=e,this.refs=zy,this.updater=n||Ly}var bf=Sf.prototype=new By;bf.constructor=Sf;Fy(bf,wo.prototype);bf.isPureReactComponent=!0;var $m=Array.isArray,Uy=Object.prototype.hasOwnProperty,Ef={current:null},$y={key:!0,ref:!0,__self:!0,__source:!0};function Wy(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Uy.call(e,r)&&!$y.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:nl,type:t,key:i,ref:o,props:s,_owner:Ef.current}}function J_(t,e){return{$$typeof:nl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Cf(t){return typeof t=="object"&&t!==null&&t.$$typeof===nl}function X_(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Wm=/\/+/g;function ld(t,e){return typeof t=="object"&&t!==null&&t.key!=null?X_(""+t.key):e.toString(36)}function ac(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case nl:case B_:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+ld(o,0):r,$m(s)?(n="",t!=null&&(n=t.replace(Wm,"$&/")+"/"),ac(s,e,n,"",function(d){return d})):s!=null&&(Cf(s)&&(s=J_(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Wm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",$m(t))for(var c=0;c<t.length;c++){i=t[c];var u=r+ld(i,c);o+=ac(i,e,n,u,s)}else if(u=Q_(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=r+ld(i,c++),o+=ac(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ll(t,e,n){if(t==null)return t;var r=[],s=0;return ac(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Z_(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var vn={current:null},lc={transition:null},e2={ReactCurrentDispatcher:vn,ReactCurrentBatchConfig:lc,ReactCurrentOwner:Ef};function Hy(){throw Error("act(...) is not supported in production builds of React.")}Ge.Children={map:Ll,forEach:function(t,e,n){Ll(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ll(t,function(){e++}),e},toArray:function(t){return Ll(t,function(e){return e})||[]},only:function(t){if(!Cf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ge.Component=wo;Ge.Fragment=U_;Ge.Profiler=W_;Ge.PureComponent=Sf;Ge.StrictMode=$_;Ge.Suspense=G_;Ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=e2;Ge.act=Hy;Ge.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Fy({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Ef.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)Uy.call(e,u)&&!$y.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:nl,type:t.type,key:s,ref:i,props:r,_owner:o}};Ge.createContext=function(t){return t={$$typeof:V_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:H_,_context:t},t.Consumer=t};Ge.createElement=Wy;Ge.createFactory=function(t){var e=Wy.bind(null,t);return e.type=t,e};Ge.createRef=function(){return{current:null}};Ge.forwardRef=function(t){return{$$typeof:K_,render:t}};Ge.isValidElement=Cf;Ge.lazy=function(t){return{$$typeof:Y_,_payload:{_status:-1,_result:t},_init:Z_}};Ge.memo=function(t,e){return{$$typeof:q_,type:t,compare:e===void 0?null:e}};Ge.startTransition=function(t){var e=lc.transition;lc.transition={};try{t()}finally{lc.transition=e}};Ge.unstable_act=Hy;Ge.useCallback=function(t,e){return vn.current.useCallback(t,e)};Ge.useContext=function(t){return vn.current.useContext(t)};Ge.useDebugValue=function(){};Ge.useDeferredValue=function(t){return vn.current.useDeferredValue(t)};Ge.useEffect=function(t,e){return vn.current.useEffect(t,e)};Ge.useId=function(){return vn.current.useId()};Ge.useImperativeHandle=function(t,e,n){return vn.current.useImperativeHandle(t,e,n)};Ge.useInsertionEffect=function(t,e){return vn.current.useInsertionEffect(t,e)};Ge.useLayoutEffect=function(t,e){return vn.current.useLayoutEffect(t,e)};Ge.useMemo=function(t,e){return vn.current.useMemo(t,e)};Ge.useReducer=function(t,e,n){return vn.current.useReducer(t,e,n)};Ge.useRef=function(t){return vn.current.useRef(t)};Ge.useState=function(t){return vn.current.useState(t)};Ge.useSyncExternalStore=function(t,e,n){return vn.current.useSyncExternalStore(t,e,n)};Ge.useTransition=function(){return vn.current.useTransition()};Ge.version="18.3.1";My.exports=Ge;var y=My.exports;const mn=z_(y);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t2=y,n2=Symbol.for("react.element"),r2=Symbol.for("react.fragment"),s2=Object.prototype.hasOwnProperty,i2=t2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o2={key:!0,ref:!0,__self:!0,__source:!0};function Vy(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)s2.call(e,r)&&!o2.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:n2,type:t,key:i,ref:o,props:s,_owner:i2.current}}gu.Fragment=r2;gu.jsx=Vy;gu.jsxs=Vy;Dy.exports=gu;var l=Dy.exports,nh={},Ky={exports:{}},Mn={},Gy={exports:{}},qy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(K,$){var ee=K.length;K.push($);e:for(;0<ee;){var B=ee-1>>>1,ce=K[B];if(0<s(ce,$))K[B]=$,K[ee]=ce,ee=B;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var $=K[0],ee=K.pop();if(ee!==$){K[0]=ee;e:for(var B=0,ce=K.length,ve=ce>>>1;B<ve;){var we=2*(B+1)-1,he=K[we],L=we+1,de=K[L];if(0>s(he,ee))L<ce&&0>s(de,he)?(K[B]=de,K[L]=ee,B=L):(K[B]=he,K[we]=ee,B=we);else if(L<ce&&0>s(de,ee))K[B]=de,K[L]=ee,B=L;else break e}}return $}function s(K,$){var ee=K.sortIndex-$.sortIndex;return ee!==0?ee:K.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],f=1,p=null,g=3,j=!1,v=!1,N=!1,R=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(K){for(var $=n(d);$!==null;){if($.callback===null)r(d);else if($.startTime<=K)r(d),$.sortIndex=$.expirationTime,e(u,$);else break;$=n(d)}}function P(K){if(N=!1,_(K),!v)if(n(u)!==null)v=!0,G(H);else{var $=n(d);$!==null&&ye(P,$.startTime-K)}}function H(K,$){v=!1,N&&(N=!1,b(x),x=-1),j=!0;var ee=g;try{for(_($),p=n(u);p!==null&&(!(p.expirationTime>$)||K&&!T());){var B=p.callback;if(typeof B=="function"){p.callback=null,g=p.priorityLevel;var ce=B(p.expirationTime<=$);$=t.unstable_now(),typeof ce=="function"?p.callback=ce:p===n(u)&&r(u),_($)}else r(u);p=n(u)}if(p!==null)var ve=!0;else{var we=n(d);we!==null&&ye(P,we.startTime-$),ve=!1}return ve}finally{p=null,g=ee,j=!1}}var X=!1,C=null,x=-1,E=5,k=-1;function T(){return!(t.unstable_now()-k<E)}function A(){if(C!==null){var K=t.unstable_now();k=K;var $=!0;try{$=C(!0,K)}finally{$?I():(X=!1,C=null)}}else X=!1}var I;if(typeof w=="function")I=function(){w(A)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,be=J.port2;J.port1.onmessage=A,I=function(){be.postMessage(null)}}else I=function(){R(A,0)};function G(K){C=K,X||(X=!0,I())}function ye(K,$){x=R(function(){K(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_continueExecution=function(){v||j||(v=!0,G(H))},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(K){switch(g){case 1:case 2:case 3:var $=3;break;default:$=g}var ee=g;g=$;try{return K()}finally{g=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(K,$){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var ee=g;g=K;try{return $()}finally{g=ee}},t.unstable_scheduleCallback=function(K,$,ee){var B=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?B+ee:B):ee=B,K){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=ee+ce,K={id:f++,callback:$,priorityLevel:K,startTime:ee,expirationTime:ce,sortIndex:-1},ee>B?(K.sortIndex=ee,e(d,K),n(u)===null&&K===n(d)&&(N?(b(x),x=-1):N=!0,ye(P,ee-B))):(K.sortIndex=ce,e(u,K),v||j||(v=!0,G(H))),K},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(K){var $=g;return function(){var ee=g;g=$;try{return K.apply(this,arguments)}finally{g=ee}}}})(qy);Gy.exports=qy;var a2=Gy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l2=y,Dn=a2;function oe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Yy=new Set,ba={};function vi(t,e){no(t,e),no(t+"Capture",e)}function no(t,e){for(ba[t]=e,t=0;t<e.length;t++)Yy.add(e[t])}var $r=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rh=Object.prototype.hasOwnProperty,c2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hm={},Vm={};function u2(t){return rh.call(Vm,t)?!0:rh.call(Hm,t)?!1:c2.test(t)?Vm[t]=!0:(Hm[t]=!0,!1)}function d2(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function h2(t,e,n,r){if(e===null||typeof e>"u"||d2(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function wn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var rn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){rn[t]=new wn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];rn[e]=new wn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){rn[t]=new wn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){rn[t]=new wn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){rn[t]=new wn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){rn[t]=new wn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){rn[t]=new wn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){rn[t]=new wn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){rn[t]=new wn(t,5,!1,t.toLowerCase(),null,!1,!1)});var If=/[\-:]([a-z])/g;function jf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(If,jf);rn[e]=new wn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(If,jf);rn[e]=new wn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(If,jf);rn[e]=new wn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){rn[t]=new wn(t,1,!1,t.toLowerCase(),null,!1,!1)});rn.xlinkHref=new wn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){rn[t]=new wn(t,1,!1,t.toLowerCase(),null,!0,!0)});function kf(t,e,n,r){var s=rn.hasOwnProperty(e)?rn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(h2(e,n,s,r)&&(n=null),r||s===null?u2(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Yr=l2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fl=Symbol.for("react.element"),Pi=Symbol.for("react.portal"),Oi=Symbol.for("react.fragment"),Tf=Symbol.for("react.strict_mode"),sh=Symbol.for("react.profiler"),Qy=Symbol.for("react.provider"),Jy=Symbol.for("react.context"),Nf=Symbol.for("react.forward_ref"),ih=Symbol.for("react.suspense"),oh=Symbol.for("react.suspense_list"),Rf=Symbol.for("react.memo"),cs=Symbol.for("react.lazy"),Xy=Symbol.for("react.offscreen"),Km=Symbol.iterator;function Bo(t){return t===null||typeof t!="object"?null:(t=Km&&t[Km]||t["@@iterator"],typeof t=="function"?t:null)}var It=Object.assign,cd;function ta(t){if(cd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);cd=e&&e[1]||""}return`
`+cd+t}var ud=!1;function dd(t,e){if(!t||ud)return"";ud=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,c=i.length-1;1<=o&&0<=c&&s[o]!==i[c];)c--;for(;1<=o&&0<=c;o--,c--)if(s[o]!==i[c]){if(o!==1||c!==1)do if(o--,c--,0>c||s[o]!==i[c]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{ud=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ta(t):""}function f2(t){switch(t.tag){case 5:return ta(t.type);case 16:return ta("Lazy");case 13:return ta("Suspense");case 19:return ta("SuspenseList");case 0:case 2:case 15:return t=dd(t.type,!1),t;case 11:return t=dd(t.type.render,!1),t;case 1:return t=dd(t.type,!0),t;default:return""}}function ah(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Oi:return"Fragment";case Pi:return"Portal";case sh:return"Profiler";case Tf:return"StrictMode";case ih:return"Suspense";case oh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Jy:return(t.displayName||"Context")+".Consumer";case Qy:return(t._context.displayName||"Context")+".Provider";case Nf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Rf:return e=t.displayName||null,e!==null?e:ah(t.type)||"Memo";case cs:e=t._payload,t=t._init;try{return ah(t(e))}catch{}}return null}function p2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ah(e);case 8:return e===Tf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ts(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Zy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function m2(t){var e=Zy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function zl(t){t._valueTracker||(t._valueTracker=m2(t))}function ex(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Zy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ic(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function lh(t,e){var n=e.checked;return It({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Gm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ts(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function tx(t,e){e=e.checked,e!=null&&kf(t,"checked",e,!1)}function ch(t,e){tx(t,e);var n=Ts(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?uh(t,e.type,n):e.hasOwnProperty("defaultValue")&&uh(t,e.type,Ts(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function qm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function uh(t,e,n){(e!=="number"||Ic(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var na=Array.isArray;function Ki(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ts(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function dh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(oe(91));return It({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ym(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(oe(92));if(na(n)){if(1<n.length)throw Error(oe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ts(n)}}function nx(t,e){var n=Ts(e.value),r=Ts(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Qm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function rx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?rx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Bl,sx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Bl=Bl||document.createElement("div"),Bl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Bl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ea(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ia={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},g2=["Webkit","ms","Moz","O"];Object.keys(ia).forEach(function(t){g2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ia[e]=ia[t]})});function ix(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ia.hasOwnProperty(t)&&ia[t]?(""+e).trim():e+"px"}function ox(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=ix(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var y2=It({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fh(t,e){if(e){if(y2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(oe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(oe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(oe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(oe(62))}}function ph(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mh=null;function Af(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var gh=null,Gi=null,qi=null;function Jm(t){if(t=il(t)){if(typeof gh!="function")throw Error(oe(280));var e=t.stateNode;e&&(e=_u(e),gh(t.stateNode,t.type,e))}}function ax(t){Gi?qi?qi.push(t):qi=[t]:Gi=t}function lx(){if(Gi){var t=Gi,e=qi;if(qi=Gi=null,Jm(t),e)for(t=0;t<e.length;t++)Jm(e[t])}}function cx(t,e){return t(e)}function ux(){}var hd=!1;function dx(t,e,n){if(hd)return t(e,n);hd=!0;try{return cx(t,e,n)}finally{hd=!1,(Gi!==null||qi!==null)&&(ux(),lx())}}function Ca(t,e){var n=t.stateNode;if(n===null)return null;var r=_u(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(oe(231,e,typeof n));return n}var yh=!1;if($r)try{var Uo={};Object.defineProperty(Uo,"passive",{get:function(){yh=!0}}),window.addEventListener("test",Uo,Uo),window.removeEventListener("test",Uo,Uo)}catch{yh=!1}function x2(t,e,n,r,s,i,o,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var oa=!1,jc=null,kc=!1,xh=null,v2={onError:function(t){oa=!0,jc=t}};function w2(t,e,n,r,s,i,o,c,u){oa=!1,jc=null,x2.apply(v2,arguments)}function _2(t,e,n,r,s,i,o,c,u){if(w2.apply(this,arguments),oa){if(oa){var d=jc;oa=!1,jc=null}else throw Error(oe(198));kc||(kc=!0,xh=d)}}function wi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function hx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Xm(t){if(wi(t)!==t)throw Error(oe(188))}function S2(t){var e=t.alternate;if(!e){if(e=wi(t),e===null)throw Error(oe(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Xm(s),t;if(i===r)return Xm(s),e;i=i.sibling}throw Error(oe(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o)throw Error(oe(189))}}if(n.alternate!==r)throw Error(oe(190))}if(n.tag!==3)throw Error(oe(188));return n.stateNode.current===n?t:e}function fx(t){return t=S2(t),t!==null?px(t):null}function px(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=px(t);if(e!==null)return e;t=t.sibling}return null}var mx=Dn.unstable_scheduleCallback,Zm=Dn.unstable_cancelCallback,b2=Dn.unstable_shouldYield,E2=Dn.unstable_requestPaint,Dt=Dn.unstable_now,C2=Dn.unstable_getCurrentPriorityLevel,Pf=Dn.unstable_ImmediatePriority,gx=Dn.unstable_UserBlockingPriority,Tc=Dn.unstable_NormalPriority,I2=Dn.unstable_LowPriority,yx=Dn.unstable_IdlePriority,yu=null,Er=null;function j2(t){if(Er&&typeof Er.onCommitFiberRoot=="function")try{Er.onCommitFiberRoot(yu,t,void 0,(t.current.flags&128)===128)}catch{}}var or=Math.clz32?Math.clz32:N2,k2=Math.log,T2=Math.LN2;function N2(t){return t>>>=0,t===0?32:31-(k2(t)/T2|0)|0}var Ul=64,$l=4194304;function ra(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Nc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~s;c!==0?r=ra(c):(i&=o,i!==0&&(r=ra(i)))}else o=n&~s,o!==0?r=ra(o):i!==0&&(r=ra(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-or(e),s=1<<n,r|=t[n],e&=~s;return r}function R2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function A2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-or(i),c=1<<o,u=s[o];u===-1?(!(c&n)||c&r)&&(s[o]=R2(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function vh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function xx(){var t=Ul;return Ul<<=1,!(Ul&4194240)&&(Ul=64),t}function fd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function rl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-or(e),t[e]=n}function P2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-or(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Of(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-or(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var at=0;function vx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var wx,Df,_x,Sx,bx,wh=!1,Wl=[],gs=null,ys=null,xs=null,Ia=new Map,ja=new Map,ds=[],O2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function eg(t,e){switch(t){case"focusin":case"focusout":gs=null;break;case"dragenter":case"dragleave":ys=null;break;case"mouseover":case"mouseout":xs=null;break;case"pointerover":case"pointerout":Ia.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ja.delete(e.pointerId)}}function $o(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=il(e),e!==null&&Df(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function D2(t,e,n,r,s){switch(e){case"focusin":return gs=$o(gs,t,e,n,r,s),!0;case"dragenter":return ys=$o(ys,t,e,n,r,s),!0;case"mouseover":return xs=$o(xs,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ia.set(i,$o(Ia.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ja.set(i,$o(ja.get(i)||null,t,e,n,r,s)),!0}return!1}function Ex(t){var e=Xs(t.target);if(e!==null){var n=wi(e);if(n!==null){if(e=n.tag,e===13){if(e=hx(n),e!==null){t.blockedOn=e,bx(t.priority,function(){_x(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function cc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=_h(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);mh=r,n.target.dispatchEvent(r),mh=null}else return e=il(n),e!==null&&Df(e),t.blockedOn=n,!1;e.shift()}return!0}function tg(t,e,n){cc(t)&&n.delete(e)}function M2(){wh=!1,gs!==null&&cc(gs)&&(gs=null),ys!==null&&cc(ys)&&(ys=null),xs!==null&&cc(xs)&&(xs=null),Ia.forEach(tg),ja.forEach(tg)}function Wo(t,e){t.blockedOn===e&&(t.blockedOn=null,wh||(wh=!0,Dn.unstable_scheduleCallback(Dn.unstable_NormalPriority,M2)))}function ka(t){function e(s){return Wo(s,t)}if(0<Wl.length){Wo(Wl[0],t);for(var n=1;n<Wl.length;n++){var r=Wl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(gs!==null&&Wo(gs,t),ys!==null&&Wo(ys,t),xs!==null&&Wo(xs,t),Ia.forEach(e),ja.forEach(e),n=0;n<ds.length;n++)r=ds[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ds.length&&(n=ds[0],n.blockedOn===null);)Ex(n),n.blockedOn===null&&ds.shift()}var Yi=Yr.ReactCurrentBatchConfig,Rc=!0;function L2(t,e,n,r){var s=at,i=Yi.transition;Yi.transition=null;try{at=1,Mf(t,e,n,r)}finally{at=s,Yi.transition=i}}function F2(t,e,n,r){var s=at,i=Yi.transition;Yi.transition=null;try{at=4,Mf(t,e,n,r)}finally{at=s,Yi.transition=i}}function Mf(t,e,n,r){if(Rc){var s=_h(t,e,n,r);if(s===null)bd(t,e,r,Ac,n),eg(t,r);else if(D2(s,t,e,n,r))r.stopPropagation();else if(eg(t,r),e&4&&-1<O2.indexOf(t)){for(;s!==null;){var i=il(s);if(i!==null&&wx(i),i=_h(t,e,n,r),i===null&&bd(t,e,r,Ac,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else bd(t,e,r,null,n)}}var Ac=null;function _h(t,e,n,r){if(Ac=null,t=Af(r),t=Xs(t),t!==null)if(e=wi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=hx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ac=t,null}function Cx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(C2()){case Pf:return 1;case gx:return 4;case Tc:case I2:return 16;case yx:return 536870912;default:return 16}default:return 16}}var fs=null,Lf=null,uc=null;function Ix(){if(uc)return uc;var t,e=Lf,n=e.length,r,s="value"in fs?fs.value:fs.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return uc=s.slice(t,1<r?1-r:void 0)}function dc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Hl(){return!0}function ng(){return!1}function Ln(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Hl:ng,this.isPropagationStopped=ng,this}return It(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Hl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Hl)},persist:function(){},isPersistent:Hl}),e}var _o={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ff=Ln(_o),sl=It({},_o,{view:0,detail:0}),z2=Ln(sl),pd,md,Ho,xu=It({},sl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ho&&(Ho&&t.type==="mousemove"?(pd=t.screenX-Ho.screenX,md=t.screenY-Ho.screenY):md=pd=0,Ho=t),pd)},movementY:function(t){return"movementY"in t?t.movementY:md}}),rg=Ln(xu),B2=It({},xu,{dataTransfer:0}),U2=Ln(B2),$2=It({},sl,{relatedTarget:0}),gd=Ln($2),W2=It({},_o,{animationName:0,elapsedTime:0,pseudoElement:0}),H2=Ln(W2),V2=It({},_o,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),K2=Ln(V2),G2=It({},_o,{data:0}),sg=Ln(G2),q2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Y2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Q2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function J2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Q2[t])?!!e[t]:!1}function zf(){return J2}var X2=It({},sl,{key:function(t){if(t.key){var e=q2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=dc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Y2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zf,charCode:function(t){return t.type==="keypress"?dc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?dc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Z2=Ln(X2),eS=It({},xu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ig=Ln(eS),tS=It({},sl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zf}),nS=Ln(tS),rS=It({},_o,{propertyName:0,elapsedTime:0,pseudoElement:0}),sS=Ln(rS),iS=It({},xu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),oS=Ln(iS),aS=[9,13,27,32],Bf=$r&&"CompositionEvent"in window,aa=null;$r&&"documentMode"in document&&(aa=document.documentMode);var lS=$r&&"TextEvent"in window&&!aa,jx=$r&&(!Bf||aa&&8<aa&&11>=aa),og=" ",ag=!1;function kx(t,e){switch(t){case"keyup":return aS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Di=!1;function cS(t,e){switch(t){case"compositionend":return Tx(e);case"keypress":return e.which!==32?null:(ag=!0,og);case"textInput":return t=e.data,t===og&&ag?null:t;default:return null}}function uS(t,e){if(Di)return t==="compositionend"||!Bf&&kx(t,e)?(t=Ix(),uc=Lf=fs=null,Di=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return jx&&e.locale!=="ko"?null:e.data;default:return null}}var dS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!dS[t.type]:e==="textarea"}function Nx(t,e,n,r){ax(r),e=Pc(e,"onChange"),0<e.length&&(n=new Ff("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var la=null,Ta=null;function hS(t){Ux(t,0)}function vu(t){var e=Fi(t);if(ex(e))return t}function fS(t,e){if(t==="change")return e}var Rx=!1;if($r){var yd;if($r){var xd="oninput"in document;if(!xd){var cg=document.createElement("div");cg.setAttribute("oninput","return;"),xd=typeof cg.oninput=="function"}yd=xd}else yd=!1;Rx=yd&&(!document.documentMode||9<document.documentMode)}function ug(){la&&(la.detachEvent("onpropertychange",Ax),Ta=la=null)}function Ax(t){if(t.propertyName==="value"&&vu(Ta)){var e=[];Nx(e,Ta,t,Af(t)),dx(hS,e)}}function pS(t,e,n){t==="focusin"?(ug(),la=e,Ta=n,la.attachEvent("onpropertychange",Ax)):t==="focusout"&&ug()}function mS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return vu(Ta)}function gS(t,e){if(t==="click")return vu(e)}function yS(t,e){if(t==="input"||t==="change")return vu(e)}function xS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var cr=typeof Object.is=="function"?Object.is:xS;function Na(t,e){if(cr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!rh.call(e,s)||!cr(t[s],e[s]))return!1}return!0}function dg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function hg(t,e){var n=dg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=dg(n)}}function Px(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Px(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ox(){for(var t=window,e=Ic();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ic(t.document)}return e}function Uf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function vS(t){var e=Ox(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Px(n.ownerDocument.documentElement,n)){if(r!==null&&Uf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=hg(n,i);var o=hg(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var wS=$r&&"documentMode"in document&&11>=document.documentMode,Mi=null,Sh=null,ca=null,bh=!1;function fg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;bh||Mi==null||Mi!==Ic(r)||(r=Mi,"selectionStart"in r&&Uf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ca&&Na(ca,r)||(ca=r,r=Pc(Sh,"onSelect"),0<r.length&&(e=new Ff("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Mi)))}function Vl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Li={animationend:Vl("Animation","AnimationEnd"),animationiteration:Vl("Animation","AnimationIteration"),animationstart:Vl("Animation","AnimationStart"),transitionend:Vl("Transition","TransitionEnd")},vd={},Dx={};$r&&(Dx=document.createElement("div").style,"AnimationEvent"in window||(delete Li.animationend.animation,delete Li.animationiteration.animation,delete Li.animationstart.animation),"TransitionEvent"in window||delete Li.transitionend.transition);function wu(t){if(vd[t])return vd[t];if(!Li[t])return t;var e=Li[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Dx)return vd[t]=e[n];return t}var Mx=wu("animationend"),Lx=wu("animationiteration"),Fx=wu("animationstart"),zx=wu("transitionend"),Bx=new Map,pg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ms(t,e){Bx.set(t,e),vi(e,[t])}for(var wd=0;wd<pg.length;wd++){var _d=pg[wd],_S=_d.toLowerCase(),SS=_d[0].toUpperCase()+_d.slice(1);Ms(_S,"on"+SS)}Ms(Mx,"onAnimationEnd");Ms(Lx,"onAnimationIteration");Ms(Fx,"onAnimationStart");Ms("dblclick","onDoubleClick");Ms("focusin","onFocus");Ms("focusout","onBlur");Ms(zx,"onTransitionEnd");no("onMouseEnter",["mouseout","mouseover"]);no("onMouseLeave",["mouseout","mouseover"]);no("onPointerEnter",["pointerout","pointerover"]);no("onPointerLeave",["pointerout","pointerover"]);vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vi("onBeforeInput",["compositionend","keypress","textInput","paste"]);vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bS=new Set("cancel close invalid load scroll toggle".split(" ").concat(sa));function mg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,_2(r,e,void 0,t),t.currentTarget=null}function Ux(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;mg(s,c,d),i=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,d=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;mg(s,c,d),i=u}}}if(kc)throw t=xh,kc=!1,xh=null,t}function yt(t,e){var n=e[kh];n===void 0&&(n=e[kh]=new Set);var r=t+"__bubble";n.has(r)||($x(e,t,2,!1),n.add(r))}function Sd(t,e,n){var r=0;e&&(r|=4),$x(n,t,r,e)}var Kl="_reactListening"+Math.random().toString(36).slice(2);function Ra(t){if(!t[Kl]){t[Kl]=!0,Yy.forEach(function(n){n!=="selectionchange"&&(bS.has(n)||Sd(n,!1,t),Sd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Kl]||(e[Kl]=!0,Sd("selectionchange",!1,e))}}function $x(t,e,n,r){switch(Cx(e)){case 1:var s=L2;break;case 4:s=F2;break;default:s=Mf}n=s.bind(null,e,n,t),s=void 0,!yh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function bd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;c!==null;){if(o=Xs(c),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}c=c.parentNode}}r=r.return}dx(function(){var d=i,f=Af(n),p=[];e:{var g=Bx.get(t);if(g!==void 0){var j=Ff,v=t;switch(t){case"keypress":if(dc(n)===0)break e;case"keydown":case"keyup":j=Z2;break;case"focusin":v="focus",j=gd;break;case"focusout":v="blur",j=gd;break;case"beforeblur":case"afterblur":j=gd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=rg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=U2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=nS;break;case Mx:case Lx:case Fx:j=H2;break;case zx:j=sS;break;case"scroll":j=z2;break;case"wheel":j=oS;break;case"copy":case"cut":case"paste":j=K2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=ig}var N=(e&4)!==0,R=!N&&t==="scroll",b=N?g!==null?g+"Capture":null:g;N=[];for(var w=d,_;w!==null;){_=w;var P=_.stateNode;if(_.tag===5&&P!==null&&(_=P,b!==null&&(P=Ca(w,b),P!=null&&N.push(Aa(w,P,_)))),R)break;w=w.return}0<N.length&&(g=new j(g,v,null,n,f),p.push({event:g,listeners:N}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",j=t==="mouseout"||t==="pointerout",g&&n!==mh&&(v=n.relatedTarget||n.fromElement)&&(Xs(v)||v[Wr]))break e;if((j||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,j?(v=n.relatedTarget||n.toElement,j=d,v=v?Xs(v):null,v!==null&&(R=wi(v),v!==R||v.tag!==5&&v.tag!==6)&&(v=null)):(j=null,v=d),j!==v)){if(N=rg,P="onMouseLeave",b="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(N=ig,P="onPointerLeave",b="onPointerEnter",w="pointer"),R=j==null?g:Fi(j),_=v==null?g:Fi(v),g=new N(P,w+"leave",j,n,f),g.target=R,g.relatedTarget=_,P=null,Xs(f)===d&&(N=new N(b,w+"enter",v,n,f),N.target=_,N.relatedTarget=R,P=N),R=P,j&&v)t:{for(N=j,b=v,w=0,_=N;_;_=Ti(_))w++;for(_=0,P=b;P;P=Ti(P))_++;for(;0<w-_;)N=Ti(N),w--;for(;0<_-w;)b=Ti(b),_--;for(;w--;){if(N===b||b!==null&&N===b.alternate)break t;N=Ti(N),b=Ti(b)}N=null}else N=null;j!==null&&gg(p,g,j,N,!1),v!==null&&R!==null&&gg(p,R,v,N,!0)}}e:{if(g=d?Fi(d):window,j=g.nodeName&&g.nodeName.toLowerCase(),j==="select"||j==="input"&&g.type==="file")var H=fS;else if(lg(g))if(Rx)H=yS;else{H=mS;var X=pS}else(j=g.nodeName)&&j.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(H=gS);if(H&&(H=H(t,d))){Nx(p,H,n,f);break e}X&&X(t,g,d),t==="focusout"&&(X=g._wrapperState)&&X.controlled&&g.type==="number"&&uh(g,"number",g.value)}switch(X=d?Fi(d):window,t){case"focusin":(lg(X)||X.contentEditable==="true")&&(Mi=X,Sh=d,ca=null);break;case"focusout":ca=Sh=Mi=null;break;case"mousedown":bh=!0;break;case"contextmenu":case"mouseup":case"dragend":bh=!1,fg(p,n,f);break;case"selectionchange":if(wS)break;case"keydown":case"keyup":fg(p,n,f)}var C;if(Bf)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Di?kx(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(jx&&n.locale!=="ko"&&(Di||x!=="onCompositionStart"?x==="onCompositionEnd"&&Di&&(C=Ix()):(fs=f,Lf="value"in fs?fs.value:fs.textContent,Di=!0)),X=Pc(d,x),0<X.length&&(x=new sg(x,t,null,n,f),p.push({event:x,listeners:X}),C?x.data=C:(C=Tx(n),C!==null&&(x.data=C)))),(C=lS?cS(t,n):uS(t,n))&&(d=Pc(d,"onBeforeInput"),0<d.length&&(f=new sg("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:d}),f.data=C))}Ux(p,e)})}function Aa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Pc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ca(t,n),i!=null&&r.unshift(Aa(t,i,s)),i=Ca(t,e),i!=null&&r.push(Aa(t,i,s))),t=t.return}return r}function Ti(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function gg(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=Ca(n,i),u!=null&&o.unshift(Aa(n,u,c))):s||(u=Ca(n,i),u!=null&&o.push(Aa(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var ES=/\r\n?/g,CS=/\u0000|\uFFFD/g;function yg(t){return(typeof t=="string"?t:""+t).replace(ES,`
`).replace(CS,"")}function Gl(t,e,n){if(e=yg(e),yg(t)!==e&&n)throw Error(oe(425))}function Oc(){}var Eh=null,Ch=null;function Ih(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var jh=typeof setTimeout=="function"?setTimeout:void 0,IS=typeof clearTimeout=="function"?clearTimeout:void 0,xg=typeof Promise=="function"?Promise:void 0,jS=typeof queueMicrotask=="function"?queueMicrotask:typeof xg<"u"?function(t){return xg.resolve(null).then(t).catch(kS)}:jh;function kS(t){setTimeout(function(){throw t})}function Ed(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),ka(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ka(e)}function vs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function vg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var So=Math.random().toString(36).slice(2),Sr="__reactFiber$"+So,Pa="__reactProps$"+So,Wr="__reactContainer$"+So,kh="__reactEvents$"+So,TS="__reactListeners$"+So,NS="__reactHandles$"+So;function Xs(t){var e=t[Sr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Wr]||n[Sr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=vg(t);t!==null;){if(n=t[Sr])return n;t=vg(t)}return e}t=n,n=t.parentNode}return null}function il(t){return t=t[Sr]||t[Wr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Fi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(oe(33))}function _u(t){return t[Pa]||null}var Th=[],zi=-1;function Ls(t){return{current:t}}function xt(t){0>zi||(t.current=Th[zi],Th[zi]=null,zi--)}function pt(t,e){zi++,Th[zi]=t.current,t.current=e}var Ns={},un=Ls(Ns),In=Ls(!1),ci=Ns;function ro(t,e){var n=t.type.contextTypes;if(!n)return Ns;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function jn(t){return t=t.childContextTypes,t!=null}function Dc(){xt(In),xt(un)}function wg(t,e,n){if(un.current!==Ns)throw Error(oe(168));pt(un,e),pt(In,n)}function Wx(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(oe(108,p2(t)||"Unknown",s));return It({},n,r)}function Mc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ns,ci=un.current,pt(un,t),pt(In,In.current),!0}function _g(t,e,n){var r=t.stateNode;if(!r)throw Error(oe(169));n?(t=Wx(t,e,ci),r.__reactInternalMemoizedMergedChildContext=t,xt(In),xt(un),pt(un,t)):xt(In),pt(In,n)}var Or=null,Su=!1,Cd=!1;function Hx(t){Or===null?Or=[t]:Or.push(t)}function RS(t){Su=!0,Hx(t)}function Fs(){if(!Cd&&Or!==null){Cd=!0;var t=0,e=at;try{var n=Or;for(at=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Or=null,Su=!1}catch(s){throw Or!==null&&(Or=Or.slice(t+1)),mx(Pf,Fs),s}finally{at=e,Cd=!1}}return null}var Bi=[],Ui=0,Lc=null,Fc=0,$n=[],Wn=0,ui=null,Mr=1,Lr="";function Gs(t,e){Bi[Ui++]=Fc,Bi[Ui++]=Lc,Lc=t,Fc=e}function Vx(t,e,n){$n[Wn++]=Mr,$n[Wn++]=Lr,$n[Wn++]=ui,ui=t;var r=Mr;t=Lr;var s=32-or(r)-1;r&=~(1<<s),n+=1;var i=32-or(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Mr=1<<32-or(e)+s|n<<s|r,Lr=i+t}else Mr=1<<i|n<<s|r,Lr=t}function $f(t){t.return!==null&&(Gs(t,1),Vx(t,1,0))}function Wf(t){for(;t===Lc;)Lc=Bi[--Ui],Bi[Ui]=null,Fc=Bi[--Ui],Bi[Ui]=null;for(;t===ui;)ui=$n[--Wn],$n[Wn]=null,Lr=$n[--Wn],$n[Wn]=null,Mr=$n[--Wn],$n[Wn]=null}var On=null,Pn=null,_t=!1,tr=null;function Kx(t,e){var n=Hn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Sg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,On=t,Pn=vs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,On=t,Pn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ui!==null?{id:Mr,overflow:Lr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Hn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,On=t,Pn=null,!0):!1;default:return!1}}function Nh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Rh(t){if(_t){var e=Pn;if(e){var n=e;if(!Sg(t,e)){if(Nh(t))throw Error(oe(418));e=vs(n.nextSibling);var r=On;e&&Sg(t,e)?Kx(r,n):(t.flags=t.flags&-4097|2,_t=!1,On=t)}}else{if(Nh(t))throw Error(oe(418));t.flags=t.flags&-4097|2,_t=!1,On=t}}}function bg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;On=t}function ql(t){if(t!==On)return!1;if(!_t)return bg(t),_t=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ih(t.type,t.memoizedProps)),e&&(e=Pn)){if(Nh(t))throw Gx(),Error(oe(418));for(;e;)Kx(t,e),e=vs(e.nextSibling)}if(bg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(oe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Pn=vs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Pn=null}}else Pn=On?vs(t.stateNode.nextSibling):null;return!0}function Gx(){for(var t=Pn;t;)t=vs(t.nextSibling)}function so(){Pn=On=null,_t=!1}function Hf(t){tr===null?tr=[t]:tr.push(t)}var AS=Yr.ReactCurrentBatchConfig;function Vo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(oe(309));var r=n.stateNode}if(!r)throw Error(oe(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var c=s.refs;o===null?delete c[i]:c[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(oe(284));if(!n._owner)throw Error(oe(290,t))}return t}function Yl(t,e){throw t=Object.prototype.toString.call(e),Error(oe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Eg(t){var e=t._init;return e(t._payload)}function qx(t){function e(b,w){if(t){var _=b.deletions;_===null?(b.deletions=[w],b.flags|=16):_.push(w)}}function n(b,w){if(!t)return null;for(;w!==null;)e(b,w),w=w.sibling;return null}function r(b,w){for(b=new Map;w!==null;)w.key!==null?b.set(w.key,w):b.set(w.index,w),w=w.sibling;return b}function s(b,w){return b=bs(b,w),b.index=0,b.sibling=null,b}function i(b,w,_){return b.index=_,t?(_=b.alternate,_!==null?(_=_.index,_<w?(b.flags|=2,w):_):(b.flags|=2,w)):(b.flags|=1048576,w)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function c(b,w,_,P){return w===null||w.tag!==6?(w=Ad(_,b.mode,P),w.return=b,w):(w=s(w,_),w.return=b,w)}function u(b,w,_,P){var H=_.type;return H===Oi?f(b,w,_.props.children,P,_.key):w!==null&&(w.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===cs&&Eg(H)===w.type)?(P=s(w,_.props),P.ref=Vo(b,w,_),P.return=b,P):(P=xc(_.type,_.key,_.props,null,b.mode,P),P.ref=Vo(b,w,_),P.return=b,P)}function d(b,w,_,P){return w===null||w.tag!==4||w.stateNode.containerInfo!==_.containerInfo||w.stateNode.implementation!==_.implementation?(w=Pd(_,b.mode,P),w.return=b,w):(w=s(w,_.children||[]),w.return=b,w)}function f(b,w,_,P,H){return w===null||w.tag!==7?(w=ii(_,b.mode,P,H),w.return=b,w):(w=s(w,_),w.return=b,w)}function p(b,w,_){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Ad(""+w,b.mode,_),w.return=b,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Fl:return _=xc(w.type,w.key,w.props,null,b.mode,_),_.ref=Vo(b,null,w),_.return=b,_;case Pi:return w=Pd(w,b.mode,_),w.return=b,w;case cs:var P=w._init;return p(b,P(w._payload),_)}if(na(w)||Bo(w))return w=ii(w,b.mode,_,null),w.return=b,w;Yl(b,w)}return null}function g(b,w,_,P){var H=w!==null?w.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return H!==null?null:c(b,w,""+_,P);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Fl:return _.key===H?u(b,w,_,P):null;case Pi:return _.key===H?d(b,w,_,P):null;case cs:return H=_._init,g(b,w,H(_._payload),P)}if(na(_)||Bo(_))return H!==null?null:f(b,w,_,P,null);Yl(b,_)}return null}function j(b,w,_,P,H){if(typeof P=="string"&&P!==""||typeof P=="number")return b=b.get(_)||null,c(w,b,""+P,H);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Fl:return b=b.get(P.key===null?_:P.key)||null,u(w,b,P,H);case Pi:return b=b.get(P.key===null?_:P.key)||null,d(w,b,P,H);case cs:var X=P._init;return j(b,w,_,X(P._payload),H)}if(na(P)||Bo(P))return b=b.get(_)||null,f(w,b,P,H,null);Yl(w,P)}return null}function v(b,w,_,P){for(var H=null,X=null,C=w,x=w=0,E=null;C!==null&&x<_.length;x++){C.index>x?(E=C,C=null):E=C.sibling;var k=g(b,C,_[x],P);if(k===null){C===null&&(C=E);break}t&&C&&k.alternate===null&&e(b,C),w=i(k,w,x),X===null?H=k:X.sibling=k,X=k,C=E}if(x===_.length)return n(b,C),_t&&Gs(b,x),H;if(C===null){for(;x<_.length;x++)C=p(b,_[x],P),C!==null&&(w=i(C,w,x),X===null?H=C:X.sibling=C,X=C);return _t&&Gs(b,x),H}for(C=r(b,C);x<_.length;x++)E=j(C,b,x,_[x],P),E!==null&&(t&&E.alternate!==null&&C.delete(E.key===null?x:E.key),w=i(E,w,x),X===null?H=E:X.sibling=E,X=E);return t&&C.forEach(function(T){return e(b,T)}),_t&&Gs(b,x),H}function N(b,w,_,P){var H=Bo(_);if(typeof H!="function")throw Error(oe(150));if(_=H.call(_),_==null)throw Error(oe(151));for(var X=H=null,C=w,x=w=0,E=null,k=_.next();C!==null&&!k.done;x++,k=_.next()){C.index>x?(E=C,C=null):E=C.sibling;var T=g(b,C,k.value,P);if(T===null){C===null&&(C=E);break}t&&C&&T.alternate===null&&e(b,C),w=i(T,w,x),X===null?H=T:X.sibling=T,X=T,C=E}if(k.done)return n(b,C),_t&&Gs(b,x),H;if(C===null){for(;!k.done;x++,k=_.next())k=p(b,k.value,P),k!==null&&(w=i(k,w,x),X===null?H=k:X.sibling=k,X=k);return _t&&Gs(b,x),H}for(C=r(b,C);!k.done;x++,k=_.next())k=j(C,b,x,k.value,P),k!==null&&(t&&k.alternate!==null&&C.delete(k.key===null?x:k.key),w=i(k,w,x),X===null?H=k:X.sibling=k,X=k);return t&&C.forEach(function(A){return e(b,A)}),_t&&Gs(b,x),H}function R(b,w,_,P){if(typeof _=="object"&&_!==null&&_.type===Oi&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Fl:e:{for(var H=_.key,X=w;X!==null;){if(X.key===H){if(H=_.type,H===Oi){if(X.tag===7){n(b,X.sibling),w=s(X,_.props.children),w.return=b,b=w;break e}}else if(X.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===cs&&Eg(H)===X.type){n(b,X.sibling),w=s(X,_.props),w.ref=Vo(b,X,_),w.return=b,b=w;break e}n(b,X);break}else e(b,X);X=X.sibling}_.type===Oi?(w=ii(_.props.children,b.mode,P,_.key),w.return=b,b=w):(P=xc(_.type,_.key,_.props,null,b.mode,P),P.ref=Vo(b,w,_),P.return=b,b=P)}return o(b);case Pi:e:{for(X=_.key;w!==null;){if(w.key===X)if(w.tag===4&&w.stateNode.containerInfo===_.containerInfo&&w.stateNode.implementation===_.implementation){n(b,w.sibling),w=s(w,_.children||[]),w.return=b,b=w;break e}else{n(b,w);break}else e(b,w);w=w.sibling}w=Pd(_,b.mode,P),w.return=b,b=w}return o(b);case cs:return X=_._init,R(b,w,X(_._payload),P)}if(na(_))return v(b,w,_,P);if(Bo(_))return N(b,w,_,P);Yl(b,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,w!==null&&w.tag===6?(n(b,w.sibling),w=s(w,_),w.return=b,b=w):(n(b,w),w=Ad(_,b.mode,P),w.return=b,b=w),o(b)):n(b,w)}return R}var io=qx(!0),Yx=qx(!1),zc=Ls(null),Bc=null,$i=null,Vf=null;function Kf(){Vf=$i=Bc=null}function Gf(t){var e=zc.current;xt(zc),t._currentValue=e}function Ah(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Qi(t,e){Bc=t,Vf=$i=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(En=!0),t.firstContext=null)}function Gn(t){var e=t._currentValue;if(Vf!==t)if(t={context:t,memoizedValue:e,next:null},$i===null){if(Bc===null)throw Error(oe(308));$i=t,Bc.dependencies={lanes:0,firstContext:t}}else $i=$i.next=t;return e}var Zs=null;function qf(t){Zs===null?Zs=[t]:Zs.push(t)}function Qx(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,qf(e)):(n.next=s.next,s.next=n),e.interleaved=n,Hr(t,r)}function Hr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var us=!1;function Yf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Jx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function zr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ws(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,tt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Hr(t,n)}return s=r.interleaved,s===null?(e.next=e,qf(r)):(e.next=s.next,s.next=e),r.interleaved=e,Hr(t,n)}function hc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Of(t,n)}}function Cg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Uc(t,e,n,r){var s=t.updateQueue;us=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==o&&(c===null?f.firstBaseUpdate=d:c.next=d,f.lastBaseUpdate=u))}if(i!==null){var p=s.baseState;o=0,f=d=u=null,c=i;do{var g=c.lane,j=c.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:j,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var v=t,N=c;switch(g=e,j=n,N.tag){case 1:if(v=N.payload,typeof v=="function"){p=v.call(j,p,g);break e}p=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=N.payload,g=typeof v=="function"?v.call(j,p,g):v,g==null)break e;p=It({},p,g);break e;case 2:us=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[c]:g.push(c))}else j={eventTime:j,lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(d=f=j,u=p):f=f.next=j,o|=g;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;g=c,c=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=p),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);hi|=o,t.lanes=o,t.memoizedState=p}}function Ig(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(oe(191,s));s.call(r)}}}var ol={},Cr=Ls(ol),Oa=Ls(ol),Da=Ls(ol);function ei(t){if(t===ol)throw Error(oe(174));return t}function Qf(t,e){switch(pt(Da,e),pt(Oa,t),pt(Cr,ol),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:hh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=hh(e,t)}xt(Cr),pt(Cr,e)}function oo(){xt(Cr),xt(Oa),xt(Da)}function Xx(t){ei(Da.current);var e=ei(Cr.current),n=hh(e,t.type);e!==n&&(pt(Oa,t),pt(Cr,n))}function Jf(t){Oa.current===t&&(xt(Cr),xt(Oa))}var bt=Ls(0);function $c(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Id=[];function Xf(){for(var t=0;t<Id.length;t++)Id[t]._workInProgressVersionPrimary=null;Id.length=0}var fc=Yr.ReactCurrentDispatcher,jd=Yr.ReactCurrentBatchConfig,di=0,Et=null,Bt=null,Gt=null,Wc=!1,ua=!1,Ma=0,PS=0;function on(){throw Error(oe(321))}function Zf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!cr(t[n],e[n]))return!1;return!0}function ep(t,e,n,r,s,i){if(di=i,Et=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,fc.current=t===null||t.memoizedState===null?LS:FS,t=n(r,s),ua){i=0;do{if(ua=!1,Ma=0,25<=i)throw Error(oe(301));i+=1,Gt=Bt=null,e.updateQueue=null,fc.current=zS,t=n(r,s)}while(ua)}if(fc.current=Hc,e=Bt!==null&&Bt.next!==null,di=0,Gt=Bt=Et=null,Wc=!1,e)throw Error(oe(300));return t}function tp(){var t=Ma!==0;return Ma=0,t}function vr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?Et.memoizedState=Gt=t:Gt=Gt.next=t,Gt}function qn(){if(Bt===null){var t=Et.alternate;t=t!==null?t.memoizedState:null}else t=Bt.next;var e=Gt===null?Et.memoizedState:Gt.next;if(e!==null)Gt=e,Bt=t;else{if(t===null)throw Error(oe(310));Bt=t,t={memoizedState:Bt.memoizedState,baseState:Bt.baseState,baseQueue:Bt.baseQueue,queue:Bt.queue,next:null},Gt===null?Et.memoizedState=Gt=t:Gt=Gt.next=t}return Gt}function La(t,e){return typeof e=="function"?e(t):e}function kd(t){var e=qn(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var r=Bt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=o=null,u=null,d=i;do{var f=d.lane;if((di&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=p,o=r):u=u.next=p,Et.lanes|=f,hi|=f}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=c,cr(r,e.memoizedState)||(En=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Et.lanes|=i,hi|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Td(t){var e=qn(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);cr(i,e.memoizedState)||(En=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Zx(){}function e1(t,e){var n=Et,r=qn(),s=e(),i=!cr(r.memoizedState,s);if(i&&(r.memoizedState=s,En=!0),r=r.queue,np(r1.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Gt!==null&&Gt.memoizedState.tag&1){if(n.flags|=2048,Fa(9,n1.bind(null,n,r,s,e),void 0,null),Yt===null)throw Error(oe(349));di&30||t1(n,e,s)}return s}function t1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Et.updateQueue,e===null?(e={lastEffect:null,stores:null},Et.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function n1(t,e,n,r){e.value=n,e.getSnapshot=r,s1(e)&&i1(t)}function r1(t,e,n){return n(function(){s1(e)&&i1(t)})}function s1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!cr(t,n)}catch{return!0}}function i1(t){var e=Hr(t,1);e!==null&&ar(e,t,1,-1)}function jg(t){var e=vr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:t},e.queue=t,t=t.dispatch=MS.bind(null,Et,t),[e.memoizedState,t]}function Fa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Et.updateQueue,e===null?(e={lastEffect:null,stores:null},Et.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function o1(){return qn().memoizedState}function pc(t,e,n,r){var s=vr();Et.flags|=t,s.memoizedState=Fa(1|e,n,void 0,r===void 0?null:r)}function bu(t,e,n,r){var s=qn();r=r===void 0?null:r;var i=void 0;if(Bt!==null){var o=Bt.memoizedState;if(i=o.destroy,r!==null&&Zf(r,o.deps)){s.memoizedState=Fa(e,n,i,r);return}}Et.flags|=t,s.memoizedState=Fa(1|e,n,i,r)}function kg(t,e){return pc(8390656,8,t,e)}function np(t,e){return bu(2048,8,t,e)}function a1(t,e){return bu(4,2,t,e)}function l1(t,e){return bu(4,4,t,e)}function c1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function u1(t,e,n){return n=n!=null?n.concat([t]):null,bu(4,4,c1.bind(null,e,t),n)}function rp(){}function d1(t,e){var n=qn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Zf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function h1(t,e){var n=qn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Zf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function f1(t,e,n){return di&21?(cr(n,e)||(n=xx(),Et.lanes|=n,hi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,En=!0),t.memoizedState=n)}function OS(t,e){var n=at;at=n!==0&&4>n?n:4,t(!0);var r=jd.transition;jd.transition={};try{t(!1),e()}finally{at=n,jd.transition=r}}function p1(){return qn().memoizedState}function DS(t,e,n){var r=Ss(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},m1(t))g1(e,n);else if(n=Qx(t,e,n,r),n!==null){var s=yn();ar(n,t,r,s),y1(n,e,r)}}function MS(t,e,n){var r=Ss(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(m1(t))g1(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,c=i(o,n);if(s.hasEagerState=!0,s.eagerState=c,cr(c,o)){var u=e.interleaved;u===null?(s.next=s,qf(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Qx(t,e,s,r),n!==null&&(s=yn(),ar(n,t,r,s),y1(n,e,r))}}function m1(t){var e=t.alternate;return t===Et||e!==null&&e===Et}function g1(t,e){ua=Wc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function y1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Of(t,n)}}var Hc={readContext:Gn,useCallback:on,useContext:on,useEffect:on,useImperativeHandle:on,useInsertionEffect:on,useLayoutEffect:on,useMemo:on,useReducer:on,useRef:on,useState:on,useDebugValue:on,useDeferredValue:on,useTransition:on,useMutableSource:on,useSyncExternalStore:on,useId:on,unstable_isNewReconciler:!1},LS={readContext:Gn,useCallback:function(t,e){return vr().memoizedState=[t,e===void 0?null:e],t},useContext:Gn,useEffect:kg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,pc(4194308,4,c1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return pc(4194308,4,t,e)},useInsertionEffect:function(t,e){return pc(4,2,t,e)},useMemo:function(t,e){var n=vr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=vr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=DS.bind(null,Et,t),[r.memoizedState,t]},useRef:function(t){var e=vr();return t={current:t},e.memoizedState=t},useState:jg,useDebugValue:rp,useDeferredValue:function(t){return vr().memoizedState=t},useTransition:function(){var t=jg(!1),e=t[0];return t=OS.bind(null,t[1]),vr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Et,s=vr();if(_t){if(n===void 0)throw Error(oe(407));n=n()}else{if(n=e(),Yt===null)throw Error(oe(349));di&30||t1(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,kg(r1.bind(null,r,i,t),[t]),r.flags|=2048,Fa(9,n1.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=vr(),e=Yt.identifierPrefix;if(_t){var n=Lr,r=Mr;n=(r&~(1<<32-or(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ma++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=PS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},FS={readContext:Gn,useCallback:d1,useContext:Gn,useEffect:np,useImperativeHandle:u1,useInsertionEffect:a1,useLayoutEffect:l1,useMemo:h1,useReducer:kd,useRef:o1,useState:function(){return kd(La)},useDebugValue:rp,useDeferredValue:function(t){var e=qn();return f1(e,Bt.memoizedState,t)},useTransition:function(){var t=kd(La)[0],e=qn().memoizedState;return[t,e]},useMutableSource:Zx,useSyncExternalStore:e1,useId:p1,unstable_isNewReconciler:!1},zS={readContext:Gn,useCallback:d1,useContext:Gn,useEffect:np,useImperativeHandle:u1,useInsertionEffect:a1,useLayoutEffect:l1,useMemo:h1,useReducer:Td,useRef:o1,useState:function(){return Td(La)},useDebugValue:rp,useDeferredValue:function(t){var e=qn();return Bt===null?e.memoizedState=t:f1(e,Bt.memoizedState,t)},useTransition:function(){var t=Td(La)[0],e=qn().memoizedState;return[t,e]},useMutableSource:Zx,useSyncExternalStore:e1,useId:p1,unstable_isNewReconciler:!1};function Zn(t,e){if(t&&t.defaultProps){e=It({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ph(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:It({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Eu={isMounted:function(t){return(t=t._reactInternals)?wi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=yn(),s=Ss(t),i=zr(r,s);i.payload=e,n!=null&&(i.callback=n),e=ws(t,i,s),e!==null&&(ar(e,t,s,r),hc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=yn(),s=Ss(t),i=zr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ws(t,i,s),e!==null&&(ar(e,t,s,r),hc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=yn(),r=Ss(t),s=zr(n,r);s.tag=2,e!=null&&(s.callback=e),e=ws(t,s,r),e!==null&&(ar(e,t,r,n),hc(e,t,r))}};function Tg(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Na(n,r)||!Na(s,i):!0}function x1(t,e,n){var r=!1,s=Ns,i=e.contextType;return typeof i=="object"&&i!==null?i=Gn(i):(s=jn(e)?ci:un.current,r=e.contextTypes,i=(r=r!=null)?ro(t,s):Ns),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Eu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Ng(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Eu.enqueueReplaceState(e,e.state,null)}function Oh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Yf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Gn(i):(i=jn(e)?ci:un.current,s.context=ro(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Ph(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Eu.enqueueReplaceState(s,s.state,null),Uc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ao(t,e){try{var n="",r=e;do n+=f2(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Nd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Dh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var BS=typeof WeakMap=="function"?WeakMap:Map;function v1(t,e,n){n=zr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Kc||(Kc=!0,Vh=r),Dh(t,e)},n}function w1(t,e,n){n=zr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Dh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Dh(t,e),typeof r!="function"&&(_s===null?_s=new Set([this]):_s.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Rg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new BS;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=eb.bind(null,t,e,n),e.then(t,t))}function Ag(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Pg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=zr(-1,1),e.tag=2,ws(n,e,1))),n.lanes|=1),t)}var US=Yr.ReactCurrentOwner,En=!1;function fn(t,e,n,r){e.child=t===null?Yx(e,null,n,r):io(e,t.child,n,r)}function Og(t,e,n,r,s){n=n.render;var i=e.ref;return Qi(e,s),r=ep(t,e,n,r,i,s),n=tp(),t!==null&&!En?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Vr(t,e,s)):(_t&&n&&$f(e),e.flags|=1,fn(t,e,r,s),e.child)}function Dg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!dp(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,_1(t,e,i,r,s)):(t=xc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Na,n(o,r)&&t.ref===e.ref)return Vr(t,e,s)}return e.flags|=1,t=bs(i,r),t.ref=e.ref,t.return=e,e.child=t}function _1(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Na(i,r)&&t.ref===e.ref)if(En=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(En=!0);else return e.lanes=t.lanes,Vr(t,e,s)}return Mh(t,e,n,r,s)}function S1(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},pt(Hi,An),An|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,pt(Hi,An),An|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,pt(Hi,An),An|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,pt(Hi,An),An|=r;return fn(t,e,s,n),e.child}function b1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Mh(t,e,n,r,s){var i=jn(n)?ci:un.current;return i=ro(e,i),Qi(e,s),n=ep(t,e,n,r,i,s),r=tp(),t!==null&&!En?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Vr(t,e,s)):(_t&&r&&$f(e),e.flags|=1,fn(t,e,n,s),e.child)}function Mg(t,e,n,r,s){if(jn(n)){var i=!0;Mc(e)}else i=!1;if(Qi(e,s),e.stateNode===null)mc(t,e),x1(e,n,r),Oh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Gn(d):(d=jn(n)?ci:un.current,d=ro(e,d));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==d)&&Ng(e,o,r,d),us=!1;var g=e.memoizedState;o.state=g,Uc(e,r,o,s),u=e.memoizedState,c!==r||g!==u||In.current||us?(typeof f=="function"&&(Ph(e,n,f,r),u=e.memoizedState),(c=us||Tg(e,n,c,r,g,u,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Jx(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:Zn(e.type,c),o.props=d,p=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Gn(u):(u=jn(n)?ci:un.current,u=ro(e,u));var j=n.getDerivedStateFromProps;(f=typeof j=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==p||g!==u)&&Ng(e,o,r,u),us=!1,g=e.memoizedState,o.state=g,Uc(e,r,o,s);var v=e.memoizedState;c!==p||g!==v||In.current||us?(typeof j=="function"&&(Ph(e,n,j,r),v=e.memoizedState),(d=us||Tg(e,n,d,r,g,v,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Lh(t,e,n,r,i,s)}function Lh(t,e,n,r,s,i){b1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&_g(e,n,!1),Vr(t,e,i);r=e.stateNode,US.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=io(e,t.child,null,i),e.child=io(e,null,c,i)):fn(t,e,c,i),e.memoizedState=r.state,s&&_g(e,n,!0),e.child}function E1(t){var e=t.stateNode;e.pendingContext?wg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&wg(t,e.context,!1),Qf(t,e.containerInfo)}function Lg(t,e,n,r,s){return so(),Hf(s),e.flags|=256,fn(t,e,n,r),e.child}var Fh={dehydrated:null,treeContext:null,retryLane:0};function zh(t){return{baseLanes:t,cachePool:null,transitions:null}}function C1(t,e,n){var r=e.pendingProps,s=bt.current,i=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),pt(bt,s&1),t===null)return Rh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ju(o,r,0,null),t=ii(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=zh(n),e.memoizedState=Fh,t):sp(e,o));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return $S(t,e,o,r,c,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=bs(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=bs(c,i):(i=ii(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?zh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Fh,r}return i=t.child,t=i.sibling,r=bs(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function sp(t,e){return e=ju({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ql(t,e,n,r){return r!==null&&Hf(r),io(e,t.child,null,n),t=sp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function $S(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Nd(Error(oe(422))),Ql(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=ju({mode:"visible",children:r.children},s,0,null),i=ii(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&io(e,t.child,null,o),e.child.memoizedState=zh(o),e.memoizedState=Fh,i);if(!(e.mode&1))return Ql(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(oe(419)),r=Nd(i,r,void 0),Ql(t,e,o,r)}if(c=(o&t.childLanes)!==0,En||c){if(r=Yt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Hr(t,s),ar(r,t,s,-1))}return up(),r=Nd(Error(oe(421))),Ql(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=tb.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Pn=vs(s.nextSibling),On=e,_t=!0,tr=null,t!==null&&($n[Wn++]=Mr,$n[Wn++]=Lr,$n[Wn++]=ui,Mr=t.id,Lr=t.overflow,ui=e),e=sp(e,r.children),e.flags|=4096,e)}function Fg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ah(t.return,e,n)}function Rd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function I1(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(fn(t,e,r.children,n),r=bt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Fg(t,n,e);else if(t.tag===19)Fg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(pt(bt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&$c(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Rd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&$c(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Rd(e,!0,n,null,i);break;case"together":Rd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function mc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Vr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),hi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(oe(153));if(e.child!==null){for(t=e.child,n=bs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=bs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function WS(t,e,n){switch(e.tag){case 3:E1(e),so();break;case 5:Xx(e);break;case 1:jn(e.type)&&Mc(e);break;case 4:Qf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;pt(zc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(pt(bt,bt.current&1),e.flags|=128,null):n&e.child.childLanes?C1(t,e,n):(pt(bt,bt.current&1),t=Vr(t,e,n),t!==null?t.sibling:null);pt(bt,bt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return I1(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),pt(bt,bt.current),r)break;return null;case 22:case 23:return e.lanes=0,S1(t,e,n)}return Vr(t,e,n)}var j1,Bh,k1,T1;j1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Bh=function(){};k1=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ei(Cr.current);var i=null;switch(n){case"input":s=lh(t,s),r=lh(t,r),i=[];break;case"select":s=It({},s,{value:void 0}),r=It({},r,{value:void 0}),i=[];break;case"textarea":s=dh(t,s),r=dh(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Oc)}fh(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ba.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ba.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&yt("scroll",t),i||c===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};T1=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ko(t,e){if(!_t)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function an(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function HS(t,e,n){var r=e.pendingProps;switch(Wf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return an(e),null;case 1:return jn(e.type)&&Dc(),an(e),null;case 3:return r=e.stateNode,oo(),xt(In),xt(un),Xf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ql(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,tr!==null&&(qh(tr),tr=null))),Bh(t,e),an(e),null;case 5:Jf(e);var s=ei(Da.current);if(n=e.type,t!==null&&e.stateNode!=null)k1(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(oe(166));return an(e),null}if(t=ei(Cr.current),ql(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Sr]=e,r[Pa]=i,t=(e.mode&1)!==0,n){case"dialog":yt("cancel",r),yt("close",r);break;case"iframe":case"object":case"embed":yt("load",r);break;case"video":case"audio":for(s=0;s<sa.length;s++)yt(sa[s],r);break;case"source":yt("error",r);break;case"img":case"image":case"link":yt("error",r),yt("load",r);break;case"details":yt("toggle",r);break;case"input":Gm(r,i),yt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},yt("invalid",r);break;case"textarea":Ym(r,i),yt("invalid",r)}fh(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&Gl(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&Gl(r.textContent,c,t),s=["children",""+c]):ba.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&yt("scroll",r)}switch(n){case"input":zl(r),qm(r,i,!0);break;case"textarea":zl(r),Qm(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Oc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=rx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Sr]=e,t[Pa]=r,j1(t,e,!1,!1),e.stateNode=t;e:{switch(o=ph(n,r),n){case"dialog":yt("cancel",t),yt("close",t),s=r;break;case"iframe":case"object":case"embed":yt("load",t),s=r;break;case"video":case"audio":for(s=0;s<sa.length;s++)yt(sa[s],t);s=r;break;case"source":yt("error",t),s=r;break;case"img":case"image":case"link":yt("error",t),yt("load",t),s=r;break;case"details":yt("toggle",t),s=r;break;case"input":Gm(t,r),s=lh(t,r),yt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=It({},r,{value:void 0}),yt("invalid",t);break;case"textarea":Ym(t,r),s=dh(t,r),yt("invalid",t);break;default:s=r}fh(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?ox(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&sx(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ea(t,u):typeof u=="number"&&Ea(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ba.hasOwnProperty(i)?u!=null&&i==="onScroll"&&yt("scroll",t):u!=null&&kf(t,i,u,o))}switch(n){case"input":zl(t),qm(t,r,!1);break;case"textarea":zl(t),Qm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ts(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ki(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ki(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Oc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return an(e),null;case 6:if(t&&e.stateNode!=null)T1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(oe(166));if(n=ei(Da.current),ei(Cr.current),ql(e)){if(r=e.stateNode,n=e.memoizedProps,r[Sr]=e,(i=r.nodeValue!==n)&&(t=On,t!==null))switch(t.tag){case 3:Gl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Gl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Sr]=e,e.stateNode=r}return an(e),null;case 13:if(xt(bt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(_t&&Pn!==null&&e.mode&1&&!(e.flags&128))Gx(),so(),e.flags|=98560,i=!1;else if(i=ql(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(oe(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(oe(317));i[Sr]=e}else so(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;an(e),i=!1}else tr!==null&&(qh(tr),tr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||bt.current&1?Wt===0&&(Wt=3):up())),e.updateQueue!==null&&(e.flags|=4),an(e),null);case 4:return oo(),Bh(t,e),t===null&&Ra(e.stateNode.containerInfo),an(e),null;case 10:return Gf(e.type._context),an(e),null;case 17:return jn(e.type)&&Dc(),an(e),null;case 19:if(xt(bt),i=e.memoizedState,i===null)return an(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Ko(i,!1);else{if(Wt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=$c(t),o!==null){for(e.flags|=128,Ko(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return pt(bt,bt.current&1|2),e.child}t=t.sibling}i.tail!==null&&Dt()>lo&&(e.flags|=128,r=!0,Ko(i,!1),e.lanes=4194304)}else{if(!r)if(t=$c(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ko(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!_t)return an(e),null}else 2*Dt()-i.renderingStartTime>lo&&n!==1073741824&&(e.flags|=128,r=!0,Ko(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Dt(),e.sibling=null,n=bt.current,pt(bt,r?n&1|2:n&1),e):(an(e),null);case 22:case 23:return cp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?An&1073741824&&(an(e),e.subtreeFlags&6&&(e.flags|=8192)):an(e),null;case 24:return null;case 25:return null}throw Error(oe(156,e.tag))}function VS(t,e){switch(Wf(e),e.tag){case 1:return jn(e.type)&&Dc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return oo(),xt(In),xt(un),Xf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Jf(e),null;case 13:if(xt(bt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(oe(340));so()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return xt(bt),null;case 4:return oo(),null;case 10:return Gf(e.type._context),null;case 22:case 23:return cp(),null;case 24:return null;default:return null}}var Jl=!1,ln=!1,KS=typeof WeakSet=="function"?WeakSet:Set,Se=null;function Wi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Nt(t,e,r)}else n.current=null}function Uh(t,e,n){try{n()}catch(r){Nt(t,e,r)}}var zg=!1;function GS(t,e){if(Eh=Rc,t=Ox(),Uf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,d=0,f=0,p=t,g=null;t:for(;;){for(var j;p!==n||s!==0&&p.nodeType!==3||(c=o+s),p!==i||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(j=p.firstChild)!==null;)g=p,p=j;for(;;){if(p===t)break t;if(g===n&&++d===s&&(c=o),g===i&&++f===r&&(u=o),(j=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=j}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ch={focusedElem:t,selectionRange:n},Rc=!1,Se=e;Se!==null;)if(e=Se,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Se=t;else for(;Se!==null;){e=Se;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var N=v.memoizedProps,R=v.memoizedState,b=e.stateNode,w=b.getSnapshotBeforeUpdate(e.elementType===e.type?N:Zn(e.type,N),R);b.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(oe(163))}}catch(P){Nt(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,Se=t;break}Se=e.return}return v=zg,zg=!1,v}function da(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Uh(e,n,i)}s=s.next}while(s!==r)}}function Cu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function $h(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function N1(t){var e=t.alternate;e!==null&&(t.alternate=null,N1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Sr],delete e[Pa],delete e[kh],delete e[TS],delete e[NS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function R1(t){return t.tag===5||t.tag===3||t.tag===4}function Bg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||R1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Wh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Oc));else if(r!==4&&(t=t.child,t!==null))for(Wh(t,e,n),t=t.sibling;t!==null;)Wh(t,e,n),t=t.sibling}function Hh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Hh(t,e,n),t=t.sibling;t!==null;)Hh(t,e,n),t=t.sibling}var en=null,er=!1;function as(t,e,n){for(n=n.child;n!==null;)A1(t,e,n),n=n.sibling}function A1(t,e,n){if(Er&&typeof Er.onCommitFiberUnmount=="function")try{Er.onCommitFiberUnmount(yu,n)}catch{}switch(n.tag){case 5:ln||Wi(n,e);case 6:var r=en,s=er;en=null,as(t,e,n),en=r,er=s,en!==null&&(er?(t=en,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):en.removeChild(n.stateNode));break;case 18:en!==null&&(er?(t=en,n=n.stateNode,t.nodeType===8?Ed(t.parentNode,n):t.nodeType===1&&Ed(t,n),ka(t)):Ed(en,n.stateNode));break;case 4:r=en,s=er,en=n.stateNode.containerInfo,er=!0,as(t,e,n),en=r,er=s;break;case 0:case 11:case 14:case 15:if(!ln&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Uh(n,e,o),s=s.next}while(s!==r)}as(t,e,n);break;case 1:if(!ln&&(Wi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Nt(n,e,c)}as(t,e,n);break;case 21:as(t,e,n);break;case 22:n.mode&1?(ln=(r=ln)||n.memoizedState!==null,as(t,e,n),ln=r):as(t,e,n);break;default:as(t,e,n)}}function Ug(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new KS),e.forEach(function(r){var s=nb.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Xn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:en=c.stateNode,er=!1;break e;case 3:en=c.stateNode.containerInfo,er=!0;break e;case 4:en=c.stateNode.containerInfo,er=!0;break e}c=c.return}if(en===null)throw Error(oe(160));A1(i,o,s),en=null,er=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Nt(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)P1(e,t),e=e.sibling}function P1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Xn(e,t),yr(t),r&4){try{da(3,t,t.return),Cu(3,t)}catch(N){Nt(t,t.return,N)}try{da(5,t,t.return)}catch(N){Nt(t,t.return,N)}}break;case 1:Xn(e,t),yr(t),r&512&&n!==null&&Wi(n,n.return);break;case 5:if(Xn(e,t),yr(t),r&512&&n!==null&&Wi(n,n.return),t.flags&32){var s=t.stateNode;try{Ea(s,"")}catch(N){Nt(t,t.return,N)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&tx(s,i),ph(c,o);var d=ph(c,i);for(o=0;o<u.length;o+=2){var f=u[o],p=u[o+1];f==="style"?ox(s,p):f==="dangerouslySetInnerHTML"?sx(s,p):f==="children"?Ea(s,p):kf(s,f,p,d)}switch(c){case"input":ch(s,i);break;case"textarea":nx(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var j=i.value;j!=null?Ki(s,!!i.multiple,j,!1):g!==!!i.multiple&&(i.defaultValue!=null?Ki(s,!!i.multiple,i.defaultValue,!0):Ki(s,!!i.multiple,i.multiple?[]:"",!1))}s[Pa]=i}catch(N){Nt(t,t.return,N)}}break;case 6:if(Xn(e,t),yr(t),r&4){if(t.stateNode===null)throw Error(oe(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(N){Nt(t,t.return,N)}}break;case 3:if(Xn(e,t),yr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ka(e.containerInfo)}catch(N){Nt(t,t.return,N)}break;case 4:Xn(e,t),yr(t);break;case 13:Xn(e,t),yr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(ap=Dt())),r&4&&Ug(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(ln=(d=ln)||f,Xn(e,t),ln=d):Xn(e,t),yr(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(Se=t,f=t.child;f!==null;){for(p=Se=f;Se!==null;){switch(g=Se,j=g.child,g.tag){case 0:case 11:case 14:case 15:da(4,g,g.return);break;case 1:Wi(g,g.return);var v=g.stateNode;if(typeof v.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(N){Nt(r,n,N)}}break;case 5:Wi(g,g.return);break;case 22:if(g.memoizedState!==null){Wg(p);continue}}j!==null?(j.return=g,Se=j):Wg(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{s=p.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=ix("display",o))}catch(N){Nt(t,t.return,N)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(N){Nt(t,t.return,N)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Xn(e,t),yr(t),r&4&&Ug(t);break;case 21:break;default:Xn(e,t),yr(t)}}function yr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(R1(n)){var r=n;break e}n=n.return}throw Error(oe(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ea(s,""),r.flags&=-33);var i=Bg(t);Hh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,c=Bg(t);Wh(t,c,o);break;default:throw Error(oe(161))}}catch(u){Nt(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function qS(t,e,n){Se=t,O1(t)}function O1(t,e,n){for(var r=(t.mode&1)!==0;Se!==null;){var s=Se,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Jl;if(!o){var c=s.alternate,u=c!==null&&c.memoizedState!==null||ln;c=Jl;var d=ln;if(Jl=o,(ln=u)&&!d)for(Se=s;Se!==null;)o=Se,u=o.child,o.tag===22&&o.memoizedState!==null?Hg(s):u!==null?(u.return=o,Se=u):Hg(s);for(;i!==null;)Se=i,O1(i),i=i.sibling;Se=s,Jl=c,ln=d}$g(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Se=i):$g(t)}}function $g(t){for(;Se!==null;){var e=Se;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ln||Cu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ln)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Zn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Ig(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Ig(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&ka(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(oe(163))}ln||e.flags&512&&$h(e)}catch(g){Nt(e,e.return,g)}}if(e===t){Se=null;break}if(n=e.sibling,n!==null){n.return=e.return,Se=n;break}Se=e.return}}function Wg(t){for(;Se!==null;){var e=Se;if(e===t){Se=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Se=n;break}Se=e.return}}function Hg(t){for(;Se!==null;){var e=Se;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Cu(4,e)}catch(u){Nt(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Nt(e,s,u)}}var i=e.return;try{$h(e)}catch(u){Nt(e,i,u)}break;case 5:var o=e.return;try{$h(e)}catch(u){Nt(e,o,u)}}}catch(u){Nt(e,e.return,u)}if(e===t){Se=null;break}var c=e.sibling;if(c!==null){c.return=e.return,Se=c;break}Se=e.return}}var YS=Math.ceil,Vc=Yr.ReactCurrentDispatcher,ip=Yr.ReactCurrentOwner,Kn=Yr.ReactCurrentBatchConfig,tt=0,Yt=null,Mt=null,nn=0,An=0,Hi=Ls(0),Wt=0,za=null,hi=0,Iu=0,op=0,ha=null,bn=null,ap=0,lo=1/0,Ar=null,Kc=!1,Vh=null,_s=null,Xl=!1,ps=null,Gc=0,fa=0,Kh=null,gc=-1,yc=0;function yn(){return tt&6?Dt():gc!==-1?gc:gc=Dt()}function Ss(t){return t.mode&1?tt&2&&nn!==0?nn&-nn:AS.transition!==null?(yc===0&&(yc=xx()),yc):(t=at,t!==0||(t=window.event,t=t===void 0?16:Cx(t.type)),t):1}function ar(t,e,n,r){if(50<fa)throw fa=0,Kh=null,Error(oe(185));rl(t,n,r),(!(tt&2)||t!==Yt)&&(t===Yt&&(!(tt&2)&&(Iu|=n),Wt===4&&hs(t,nn)),kn(t,r),n===1&&tt===0&&!(e.mode&1)&&(lo=Dt()+500,Su&&Fs()))}function kn(t,e){var n=t.callbackNode;A2(t,e);var r=Nc(t,t===Yt?nn:0);if(r===0)n!==null&&Zm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Zm(n),e===1)t.tag===0?RS(Vg.bind(null,t)):Hx(Vg.bind(null,t)),jS(function(){!(tt&6)&&Fs()}),n=null;else{switch(vx(r)){case 1:n=Pf;break;case 4:n=gx;break;case 16:n=Tc;break;case 536870912:n=yx;break;default:n=Tc}n=$1(n,D1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function D1(t,e){if(gc=-1,yc=0,tt&6)throw Error(oe(327));var n=t.callbackNode;if(Ji()&&t.callbackNode!==n)return null;var r=Nc(t,t===Yt?nn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=qc(t,r);else{e=r;var s=tt;tt|=2;var i=L1();(Yt!==t||nn!==e)&&(Ar=null,lo=Dt()+500,si(t,e));do try{XS();break}catch(c){M1(t,c)}while(!0);Kf(),Vc.current=i,tt=s,Mt!==null?e=0:(Yt=null,nn=0,e=Wt)}if(e!==0){if(e===2&&(s=vh(t),s!==0&&(r=s,e=Gh(t,s))),e===1)throw n=za,si(t,0),hs(t,r),kn(t,Dt()),n;if(e===6)hs(t,r);else{if(s=t.current.alternate,!(r&30)&&!QS(s)&&(e=qc(t,r),e===2&&(i=vh(t),i!==0&&(r=i,e=Gh(t,i))),e===1))throw n=za,si(t,0),hs(t,r),kn(t,Dt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(oe(345));case 2:qs(t,bn,Ar);break;case 3:if(hs(t,r),(r&130023424)===r&&(e=ap+500-Dt(),10<e)){if(Nc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){yn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=jh(qs.bind(null,t,bn,Ar),e);break}qs(t,bn,Ar);break;case 4:if(hs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-or(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Dt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*YS(r/1960))-r,10<r){t.timeoutHandle=jh(qs.bind(null,t,bn,Ar),r);break}qs(t,bn,Ar);break;case 5:qs(t,bn,Ar);break;default:throw Error(oe(329))}}}return kn(t,Dt()),t.callbackNode===n?D1.bind(null,t):null}function Gh(t,e){var n=ha;return t.current.memoizedState.isDehydrated&&(si(t,e).flags|=256),t=qc(t,e),t!==2&&(e=bn,bn=n,e!==null&&qh(e)),t}function qh(t){bn===null?bn=t:bn.push.apply(bn,t)}function QS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!cr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function hs(t,e){for(e&=~op,e&=~Iu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-or(e),r=1<<n;t[n]=-1,e&=~r}}function Vg(t){if(tt&6)throw Error(oe(327));Ji();var e=Nc(t,0);if(!(e&1))return kn(t,Dt()),null;var n=qc(t,e);if(t.tag!==0&&n===2){var r=vh(t);r!==0&&(e=r,n=Gh(t,r))}if(n===1)throw n=za,si(t,0),hs(t,e),kn(t,Dt()),n;if(n===6)throw Error(oe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,qs(t,bn,Ar),kn(t,Dt()),null}function lp(t,e){var n=tt;tt|=1;try{return t(e)}finally{tt=n,tt===0&&(lo=Dt()+500,Su&&Fs())}}function fi(t){ps!==null&&ps.tag===0&&!(tt&6)&&Ji();var e=tt;tt|=1;var n=Kn.transition,r=at;try{if(Kn.transition=null,at=1,t)return t()}finally{at=r,Kn.transition=n,tt=e,!(tt&6)&&Fs()}}function cp(){An=Hi.current,xt(Hi)}function si(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,IS(n)),Mt!==null)for(n=Mt.return;n!==null;){var r=n;switch(Wf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Dc();break;case 3:oo(),xt(In),xt(un),Xf();break;case 5:Jf(r);break;case 4:oo();break;case 13:xt(bt);break;case 19:xt(bt);break;case 10:Gf(r.type._context);break;case 22:case 23:cp()}n=n.return}if(Yt=t,Mt=t=bs(t.current,null),nn=An=e,Wt=0,za=null,op=Iu=hi=0,bn=ha=null,Zs!==null){for(e=0;e<Zs.length;e++)if(n=Zs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Zs=null}return t}function M1(t,e){do{var n=Mt;try{if(Kf(),fc.current=Hc,Wc){for(var r=Et.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Wc=!1}if(di=0,Gt=Bt=Et=null,ua=!1,Ma=0,ip.current=null,n===null||n.return===null){Wt=1,za=e,Mt=null;break}e:{var i=t,o=n.return,c=n,u=e;if(e=nn,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=c,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var j=Ag(o);if(j!==null){j.flags&=-257,Pg(j,o,c,i,e),j.mode&1&&Rg(i,d,e),e=j,u=d;var v=e.updateQueue;if(v===null){var N=new Set;N.add(u),e.updateQueue=N}else v.add(u);break e}else{if(!(e&1)){Rg(i,d,e),up();break e}u=Error(oe(426))}}else if(_t&&c.mode&1){var R=Ag(o);if(R!==null){!(R.flags&65536)&&(R.flags|=256),Pg(R,o,c,i,e),Hf(ao(u,c));break e}}i=u=ao(u,c),Wt!==4&&(Wt=2),ha===null?ha=[i]:ha.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var b=v1(i,u,e);Cg(i,b);break e;case 1:c=u;var w=i.type,_=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(_s===null||!_s.has(_)))){i.flags|=65536,e&=-e,i.lanes|=e;var P=w1(i,c,e);Cg(i,P);break e}}i=i.return}while(i!==null)}z1(n)}catch(H){e=H,Mt===n&&n!==null&&(Mt=n=n.return);continue}break}while(!0)}function L1(){var t=Vc.current;return Vc.current=Hc,t===null?Hc:t}function up(){(Wt===0||Wt===3||Wt===2)&&(Wt=4),Yt===null||!(hi&268435455)&&!(Iu&268435455)||hs(Yt,nn)}function qc(t,e){var n=tt;tt|=2;var r=L1();(Yt!==t||nn!==e)&&(Ar=null,si(t,e));do try{JS();break}catch(s){M1(t,s)}while(!0);if(Kf(),tt=n,Vc.current=r,Mt!==null)throw Error(oe(261));return Yt=null,nn=0,Wt}function JS(){for(;Mt!==null;)F1(Mt)}function XS(){for(;Mt!==null&&!b2();)F1(Mt)}function F1(t){var e=U1(t.alternate,t,An);t.memoizedProps=t.pendingProps,e===null?z1(t):Mt=e,ip.current=null}function z1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=VS(n,e),n!==null){n.flags&=32767,Mt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Wt=6,Mt=null;return}}else if(n=HS(n,e,An),n!==null){Mt=n;return}if(e=e.sibling,e!==null){Mt=e;return}Mt=e=t}while(e!==null);Wt===0&&(Wt=5)}function qs(t,e,n){var r=at,s=Kn.transition;try{Kn.transition=null,at=1,ZS(t,e,n,r)}finally{Kn.transition=s,at=r}return null}function ZS(t,e,n,r){do Ji();while(ps!==null);if(tt&6)throw Error(oe(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(oe(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(P2(t,i),t===Yt&&(Mt=Yt=null,nn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Xl||(Xl=!0,$1(Tc,function(){return Ji(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Kn.transition,Kn.transition=null;var o=at;at=1;var c=tt;tt|=4,ip.current=null,GS(t,n),P1(n,t),vS(Ch),Rc=!!Eh,Ch=Eh=null,t.current=n,qS(n),E2(),tt=c,at=o,Kn.transition=i}else t.current=n;if(Xl&&(Xl=!1,ps=t,Gc=s),i=t.pendingLanes,i===0&&(_s=null),j2(n.stateNode),kn(t,Dt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Kc)throw Kc=!1,t=Vh,Vh=null,t;return Gc&1&&t.tag!==0&&Ji(),i=t.pendingLanes,i&1?t===Kh?fa++:(fa=0,Kh=t):fa=0,Fs(),null}function Ji(){if(ps!==null){var t=vx(Gc),e=Kn.transition,n=at;try{if(Kn.transition=null,at=16>t?16:t,ps===null)var r=!1;else{if(t=ps,ps=null,Gc=0,tt&6)throw Error(oe(331));var s=tt;for(tt|=4,Se=t.current;Se!==null;){var i=Se,o=i.child;if(Se.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(Se=d;Se!==null;){var f=Se;switch(f.tag){case 0:case 11:case 15:da(8,f,i)}var p=f.child;if(p!==null)p.return=f,Se=p;else for(;Se!==null;){f=Se;var g=f.sibling,j=f.return;if(N1(f),f===d){Se=null;break}if(g!==null){g.return=j,Se=g;break}Se=j}}}var v=i.alternate;if(v!==null){var N=v.child;if(N!==null){v.child=null;do{var R=N.sibling;N.sibling=null,N=R}while(N!==null)}}Se=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Se=o;else e:for(;Se!==null;){if(i=Se,i.flags&2048)switch(i.tag){case 0:case 11:case 15:da(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,Se=b;break e}Se=i.return}}var w=t.current;for(Se=w;Se!==null;){o=Se;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,Se=_;else e:for(o=w;Se!==null;){if(c=Se,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Cu(9,c)}}catch(H){Nt(c,c.return,H)}if(c===o){Se=null;break e}var P=c.sibling;if(P!==null){P.return=c.return,Se=P;break e}Se=c.return}}if(tt=s,Fs(),Er&&typeof Er.onPostCommitFiberRoot=="function")try{Er.onPostCommitFiberRoot(yu,t)}catch{}r=!0}return r}finally{at=n,Kn.transition=e}}return!1}function Kg(t,e,n){e=ao(n,e),e=v1(t,e,1),t=ws(t,e,1),e=yn(),t!==null&&(rl(t,1,e),kn(t,e))}function Nt(t,e,n){if(t.tag===3)Kg(t,t,n);else for(;e!==null;){if(e.tag===3){Kg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(_s===null||!_s.has(r))){t=ao(n,t),t=w1(e,t,1),e=ws(e,t,1),t=yn(),e!==null&&(rl(e,1,t),kn(e,t));break}}e=e.return}}function eb(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=yn(),t.pingedLanes|=t.suspendedLanes&n,Yt===t&&(nn&n)===n&&(Wt===4||Wt===3&&(nn&130023424)===nn&&500>Dt()-ap?si(t,0):op|=n),kn(t,e)}function B1(t,e){e===0&&(t.mode&1?(e=$l,$l<<=1,!($l&130023424)&&($l=4194304)):e=1);var n=yn();t=Hr(t,e),t!==null&&(rl(t,e,n),kn(t,n))}function tb(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),B1(t,n)}function nb(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(oe(314))}r!==null&&r.delete(e),B1(t,n)}var U1;U1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||In.current)En=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return En=!1,WS(t,e,n);En=!!(t.flags&131072)}else En=!1,_t&&e.flags&1048576&&Vx(e,Fc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;mc(t,e),t=e.pendingProps;var s=ro(e,un.current);Qi(e,n),s=ep(null,e,r,t,s,n);var i=tp();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,jn(r)?(i=!0,Mc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Yf(e),s.updater=Eu,e.stateNode=s,s._reactInternals=e,Oh(e,r,t,n),e=Lh(null,e,r,!0,i,n)):(e.tag=0,_t&&i&&$f(e),fn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(mc(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=sb(r),t=Zn(r,t),s){case 0:e=Mh(null,e,r,t,n);break e;case 1:e=Mg(null,e,r,t,n);break e;case 11:e=Og(null,e,r,t,n);break e;case 14:e=Dg(null,e,r,Zn(r.type,t),n);break e}throw Error(oe(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zn(r,s),Mh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zn(r,s),Mg(t,e,r,s,n);case 3:e:{if(E1(e),t===null)throw Error(oe(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Jx(t,e),Uc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ao(Error(oe(423)),e),e=Lg(t,e,r,n,s);break e}else if(r!==s){s=ao(Error(oe(424)),e),e=Lg(t,e,r,n,s);break e}else for(Pn=vs(e.stateNode.containerInfo.firstChild),On=e,_t=!0,tr=null,n=Yx(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(so(),r===s){e=Vr(t,e,n);break e}fn(t,e,r,n)}e=e.child}return e;case 5:return Xx(e),t===null&&Rh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Ih(r,s)?o=null:i!==null&&Ih(r,i)&&(e.flags|=32),b1(t,e),fn(t,e,o,n),e.child;case 6:return t===null&&Rh(e),null;case 13:return C1(t,e,n);case 4:return Qf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=io(e,null,r,n):fn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zn(r,s),Og(t,e,r,s,n);case 7:return fn(t,e,e.pendingProps,n),e.child;case 8:return fn(t,e,e.pendingProps.children,n),e.child;case 12:return fn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,pt(zc,r._currentValue),r._currentValue=o,i!==null)if(cr(i.value,o)){if(i.children===s.children&&!In.current){e=Vr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){o=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=zr(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Ah(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(oe(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Ah(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}fn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Qi(e,n),s=Gn(s),r=r(s),e.flags|=1,fn(t,e,r,n),e.child;case 14:return r=e.type,s=Zn(r,e.pendingProps),s=Zn(r.type,s),Dg(t,e,r,s,n);case 15:return _1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zn(r,s),mc(t,e),e.tag=1,jn(r)?(t=!0,Mc(e)):t=!1,Qi(e,n),x1(e,r,s),Oh(e,r,s,n),Lh(null,e,r,!0,t,n);case 19:return I1(t,e,n);case 22:return S1(t,e,n)}throw Error(oe(156,e.tag))};function $1(t,e){return mx(t,e)}function rb(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hn(t,e,n,r){return new rb(t,e,n,r)}function dp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function sb(t){if(typeof t=="function")return dp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Nf)return 11;if(t===Rf)return 14}return 2}function bs(t,e){var n=t.alternate;return n===null?(n=Hn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function xc(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")dp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Oi:return ii(n.children,s,i,e);case Tf:o=8,s|=8;break;case sh:return t=Hn(12,n,e,s|2),t.elementType=sh,t.lanes=i,t;case ih:return t=Hn(13,n,e,s),t.elementType=ih,t.lanes=i,t;case oh:return t=Hn(19,n,e,s),t.elementType=oh,t.lanes=i,t;case Xy:return ju(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Qy:o=10;break e;case Jy:o=9;break e;case Nf:o=11;break e;case Rf:o=14;break e;case cs:o=16,r=null;break e}throw Error(oe(130,t==null?t:typeof t,""))}return e=Hn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ii(t,e,n,r){return t=Hn(7,t,r,e),t.lanes=n,t}function ju(t,e,n,r){return t=Hn(22,t,r,e),t.elementType=Xy,t.lanes=n,t.stateNode={isHidden:!1},t}function Ad(t,e,n){return t=Hn(6,t,null,e),t.lanes=n,t}function Pd(t,e,n){return e=Hn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ib(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fd(0),this.expirationTimes=fd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function hp(t,e,n,r,s,i,o,c,u){return t=new ib(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Hn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yf(i),t}function ob(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function W1(t){if(!t)return Ns;t=t._reactInternals;e:{if(wi(t)!==t||t.tag!==1)throw Error(oe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(jn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(oe(171))}if(t.tag===1){var n=t.type;if(jn(n))return Wx(t,n,e)}return e}function H1(t,e,n,r,s,i,o,c,u){return t=hp(n,r,!0,t,s,i,o,c,u),t.context=W1(null),n=t.current,r=yn(),s=Ss(n),i=zr(r,s),i.callback=e??null,ws(n,i,s),t.current.lanes=s,rl(t,s,r),kn(t,r),t}function ku(t,e,n,r){var s=e.current,i=yn(),o=Ss(s);return n=W1(n),e.context===null?e.context=n:e.pendingContext=n,e=zr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ws(s,e,o),t!==null&&(ar(t,s,o,i),hc(t,s,o)),o}function Yc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Gg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function fp(t,e){Gg(t,e),(t=t.alternate)&&Gg(t,e)}function ab(){return null}var V1=typeof reportError=="function"?reportError:function(t){console.error(t)};function pp(t){this._internalRoot=t}Tu.prototype.render=pp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(oe(409));ku(t,e,null,null)};Tu.prototype.unmount=pp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;fi(function(){ku(null,t,null,null)}),e[Wr]=null}};function Tu(t){this._internalRoot=t}Tu.prototype.unstable_scheduleHydration=function(t){if(t){var e=Sx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ds.length&&e!==0&&e<ds[n].priority;n++);ds.splice(n,0,t),n===0&&Ex(t)}};function mp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Nu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function qg(){}function lb(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Yc(o);i.call(d)}}var o=H1(e,r,t,0,null,!1,!1,"",qg);return t._reactRootContainer=o,t[Wr]=o.current,Ra(t.nodeType===8?t.parentNode:t),fi(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=Yc(u);c.call(d)}}var u=hp(t,0,!1,null,null,!1,!1,"",qg);return t._reactRootContainer=u,t[Wr]=u.current,Ra(t.nodeType===8?t.parentNode:t),fi(function(){ku(e,u,n,r)}),u}function Ru(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var c=s;s=function(){var u=Yc(o);c.call(u)}}ku(e,o,t,s)}else o=lb(n,e,t,s,r);return Yc(o)}wx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ra(e.pendingLanes);n!==0&&(Of(e,n|1),kn(e,Dt()),!(tt&6)&&(lo=Dt()+500,Fs()))}break;case 13:fi(function(){var r=Hr(t,1);if(r!==null){var s=yn();ar(r,t,1,s)}}),fp(t,1)}};Df=function(t){if(t.tag===13){var e=Hr(t,134217728);if(e!==null){var n=yn();ar(e,t,134217728,n)}fp(t,134217728)}};_x=function(t){if(t.tag===13){var e=Ss(t),n=Hr(t,e);if(n!==null){var r=yn();ar(n,t,e,r)}fp(t,e)}};Sx=function(){return at};bx=function(t,e){var n=at;try{return at=t,e()}finally{at=n}};gh=function(t,e,n){switch(e){case"input":if(ch(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=_u(r);if(!s)throw Error(oe(90));ex(r),ch(r,s)}}}break;case"textarea":nx(t,n);break;case"select":e=n.value,e!=null&&Ki(t,!!n.multiple,e,!1)}};cx=lp;ux=fi;var cb={usingClientEntryPoint:!1,Events:[il,Fi,_u,ax,lx,lp]},Go={findFiberByHostInstance:Xs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ub={bundleType:Go.bundleType,version:Go.version,rendererPackageName:Go.rendererPackageName,rendererConfig:Go.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=fx(t),t===null?null:t.stateNode},findFiberByHostInstance:Go.findFiberByHostInstance||ab,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zl.isDisabled&&Zl.supportsFiber)try{yu=Zl.inject(ub),Er=Zl}catch{}}Mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cb;Mn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mp(e))throw Error(oe(200));return ob(t,e,null,n)};Mn.createRoot=function(t,e){if(!mp(t))throw Error(oe(299));var n=!1,r="",s=V1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=hp(t,1,!1,null,null,n,!1,r,s),t[Wr]=e.current,Ra(t.nodeType===8?t.parentNode:t),new pp(e)};Mn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(oe(188)):(t=Object.keys(t).join(","),Error(oe(268,t)));return t=fx(e),t=t===null?null:t.stateNode,t};Mn.flushSync=function(t){return fi(t)};Mn.hydrate=function(t,e,n){if(!Nu(e))throw Error(oe(200));return Ru(null,t,e,!0,n)};Mn.hydrateRoot=function(t,e,n){if(!mp(t))throw Error(oe(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=V1;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=H1(e,null,t,1,n??null,s,!1,i,o),t[Wr]=e.current,Ra(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Tu(e)};Mn.render=function(t,e,n){if(!Nu(e))throw Error(oe(200));return Ru(null,t,e,!1,n)};Mn.unmountComponentAtNode=function(t){if(!Nu(t))throw Error(oe(40));return t._reactRootContainer?(fi(function(){Ru(null,null,t,!1,function(){t._reactRootContainer=null,t[Wr]=null})}),!0):!1};Mn.unstable_batchedUpdates=lp;Mn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Nu(n))throw Error(oe(200));if(t==null||t._reactInternals===void 0)throw Error(oe(38));return Ru(t,e,n,!1,r)};Mn.version="18.3.1-next-f1338f8080-20240426";function K1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(K1)}catch(t){console.error(t)}}K1(),Ky.exports=Mn;var db=Ky.exports,Yg=db;nh.createRoot=Yg.createRoot,nh.hydrateRoot=Yg.hydrateRoot;/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Qg="popstate";function hb(t={}){function e(r,s){let{pathname:i,search:o,hash:c}=r.location;return Yh("",{pathname:i,search:o,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Ba(s)}return pb(e,n,null,t)}function Ct(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ur(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function fb(){return Math.random().toString(36).substring(2,10)}function Jg(t,e){return{usr:t.state,key:t.key,idx:e}}function Yh(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?bo(e):e,state:n,key:e&&e.key||r||fb()}}function Ba({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function bo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function pb(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,c="POP",u=null,d=f();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function f(){return(o.state||{idx:null}).idx}function p(){c="POP";let R=f(),b=R==null?null:R-d;d=R,u&&u({action:c,location:N.location,delta:b})}function g(R,b){c="PUSH";let w=Yh(N.location,R,b);d=f()+1;let _=Jg(w,d),P=N.createHref(w);try{o.pushState(_,"",P)}catch(H){if(H instanceof DOMException&&H.name==="DataCloneError")throw H;s.location.assign(P)}i&&u&&u({action:c,location:N.location,delta:1})}function j(R,b){c="REPLACE";let w=Yh(N.location,R,b);d=f();let _=Jg(w,d),P=N.createHref(w);o.replaceState(_,"",P),i&&u&&u({action:c,location:N.location,delta:0})}function v(R){return mb(R)}let N={get action(){return c},get location(){return t(s,o)},listen(R){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Qg,p),u=R,()=>{s.removeEventListener(Qg,p),u=null}},createHref(R){return e(s,R)},createURL:v,encodeLocation(R){let b=v(R);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:g,replace:j,go(R){return o.go(R)}};return N}function mb(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ct(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Ba(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function G1(t,e,n="/"){return gb(t,e,n,!1)}function gb(t,e,n,r){let s=typeof e=="string"?bo(e):e,i=Kr(s.pathname||"/",n);if(i==null)return null;let o=q1(t);yb(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=kb(i);c=Ib(o[u],d,r)}return c}function q1(t,e=[],n=[],r="",s=!1){let i=(o,c,u=s,d)=>{let f={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(r)&&u)return;Ct(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length)}let p=Br([r,f.relativePath]),g=n.concat(f);o.children&&o.children.length>0&&(Ct(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),q1(o.children,e,g,p,u)),!(o.path==null&&!o.index)&&e.push({path:p,score:Eb(p,o.index),routesMeta:g})};return t.forEach((o,c)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))i(o,c);else for(let d of Y1(o.path))i(o,c,!0,d)}),e}function Y1(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Y1(r.join("/")),c=[];return c.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function yb(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Cb(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var xb=/^:[\w-]+$/,vb=3,wb=2,_b=1,Sb=10,bb=-2,Xg=t=>t==="*";function Eb(t,e){let n=t.split("/"),r=n.length;return n.some(Xg)&&(r+=bb),e&&(r+=wb),n.filter(s=>!Xg(s)).reduce((s,i)=>s+(xb.test(i)?vb:i===""?_b:Sb),r)}function Cb(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Ib(t,e,n=!1){let{routesMeta:r}=t,s={},i="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",p=Qc({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),g=u.route;if(!p&&d&&n&&!r[r.length-1].route.index&&(p=Qc({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:Br([i,p.pathname]),pathnameBase:Pb(Br([i,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(i=Br([i,p.pathnameBase]))}return o}function Qc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=jb(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((d,{paramName:f,isOptional:p},g)=>{if(f==="*"){let v=c[g]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const j=c[g];return p&&!j?d[f]=void 0:d[f]=(j||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function jb(t,e=!1,n=!0){ur(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function kb(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ur(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Kr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var Tb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Nb=t=>Tb.test(t);function Rb(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?bo(t):t,i;if(n)if(Nb(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),ur(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${n}`)}n.startsWith("/")?i=Zg(n.substring(1),"/"):i=Zg(n,e)}else i=e;return{pathname:i,search:Ob(r),hash:Db(s)}}function Zg(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Od(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Ab(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Q1(t){let e=Ab(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function J1(t,e,n,r=!1){let s;typeof t=="string"?s=bo(t):(s={...t},Ct(!s.pathname||!s.pathname.includes("?"),Od("?","pathname","search",s)),Ct(!s.pathname||!s.pathname.includes("#"),Od("#","pathname","hash",s)),Ct(!s.search||!s.search.includes("#"),Od("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,c;if(o==null)c=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;s.pathname=g.join("/")}c=p>=0?e[p]:"/"}let u=Rb(s,c),d=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}var Br=t=>t.join("/").replace(/\/\/+/g,"/"),Pb=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Ob=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Db=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Mb(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function Lb(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var X1=["POST","PUT","PATCH","DELETE"];new Set(X1);var Fb=["GET",...X1];new Set(Fb);var Eo=y.createContext(null);Eo.displayName="DataRouter";var Au=y.createContext(null);Au.displayName="DataRouterState";y.createContext(!1);var Z1=y.createContext({isTransitioning:!1});Z1.displayName="ViewTransition";var zb=y.createContext(new Map);zb.displayName="Fetchers";var Bb=y.createContext(null);Bb.displayName="Await";var dr=y.createContext(null);dr.displayName="Navigation";var al=y.createContext(null);al.displayName="Location";var Qr=y.createContext({outlet:null,matches:[],isDataRoute:!1});Qr.displayName="Route";var gp=y.createContext(null);gp.displayName="RouteError";function Ub(t,{relative:e}={}){Ct(ll(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=y.useContext(dr),{hash:s,pathname:i,search:o}=cl(t,{relative:e}),c=i;return n!=="/"&&(c=i==="/"?n:Br([n,i])),r.createHref({pathname:c,search:o,hash:s})}function ll(){return y.useContext(al)!=null}function zs(){return Ct(ll(),"useLocation() may be used only in the context of a <Router> component."),y.useContext(al).location}var ev="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function tv(t){y.useContext(dr).static||y.useLayoutEffect(t)}function Fn(){let{isDataRoute:t}=y.useContext(Qr);return t?eE():$b()}function $b(){Ct(ll(),"useNavigate() may be used only in the context of a <Router> component.");let t=y.useContext(Eo),{basename:e,navigator:n}=y.useContext(dr),{matches:r}=y.useContext(Qr),{pathname:s}=zs(),i=JSON.stringify(Q1(r)),o=y.useRef(!1);return tv(()=>{o.current=!0}),y.useCallback((u,d={})=>{if(ur(o.current,ev),!o.current)return;if(typeof u=="number"){n.go(u);return}let f=J1(u,JSON.parse(i),s,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Br([e,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[e,n,i,s,t])}y.createContext(null);function cl(t,{relative:e}={}){let{matches:n}=y.useContext(Qr),{pathname:r}=zs(),s=JSON.stringify(Q1(n));return y.useMemo(()=>J1(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function Wb(t,e){return nv(t,e)}function nv(t,e,n,r,s){var w;Ct(ll(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=y.useContext(dr),{matches:o}=y.useContext(Qr),c=o[o.length-1],u=c?c.params:{},d=c?c.pathname:"/",f=c?c.pathnameBase:"/",p=c&&c.route;{let _=p&&p.path||"";rv(d,!p||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let g=zs(),j;if(e){let _=typeof e=="string"?bo(e):e;Ct(f==="/"||((w=_.pathname)==null?void 0:w.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${_.pathname}" was given in the \`location\` prop.`),j=_}else j=g;let v=j.pathname||"/",N=v;if(f!=="/"){let _=f.replace(/^\//,"").split("/");N="/"+v.replace(/^\//,"").split("/").slice(_.length).join("/")}let R=G1(t,{pathname:N});ur(p||R!=null,`No routes matched location "${j.pathname}${j.search}${j.hash}" `),ur(R==null||R[R.length-1].route.element!==void 0||R[R.length-1].route.Component!==void 0||R[R.length-1].route.lazy!==void 0,`Matched leaf route at location "${j.pathname}${j.search}${j.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=qb(R&&R.map(_=>Object.assign({},_,{params:Object.assign({},u,_.params),pathname:Br([f,i.encodeLocation?i.encodeLocation(_.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?f:Br([f,i.encodeLocation?i.encodeLocation(_.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathnameBase])})),o,n,r,s);return e&&b?y.createElement(al.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...j},navigationType:"POP"}},b):b}function Hb(){let t=Zb(),e=Mb(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=y.createElement(y.Fragment,null,y.createElement("p",null," Hey developer "),y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",y.createElement("code",{style:i},"ErrorBoundary")," or"," ",y.createElement("code",{style:i},"errorElement")," prop on your route.")),y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},e),n?y.createElement("pre",{style:s},n):null,o)}var Vb=y.createElement(Hb,null),Kb=class extends y.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?y.createElement(Qr.Provider,{value:this.props.routeContext},y.createElement(gp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Gb({routeContext:t,match:e,children:n}){let r=y.useContext(Eo);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),y.createElement(Qr.Provider,{value:t},n)}function qb(t,e=[],n=null,r=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=n==null?void 0:n.errors;if(o!=null){let f=i.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);Ct(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,f+1))}let c=!1,u=-1;if(n)for(let f=0;f<i.length;f++){let p=i[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=f),p.route.id){let{loaderData:g,errors:j}=n,v=p.route.loader&&!g.hasOwnProperty(p.route.id)&&(!j||j[p.route.id]===void 0);if(p.route.lazy||v){c=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}let d=n&&r?(f,p)=>{var g,j;r(f,{location:n.location,params:((j=(g=n.matches)==null?void 0:g[0])==null?void 0:j.params)??{},unstable_pattern:Lb(n.matches),errorInfo:p})}:void 0;return i.reduceRight((f,p,g)=>{let j,v=!1,N=null,R=null;n&&(j=o&&p.route.id?o[p.route.id]:void 0,N=p.route.errorElement||Vb,c&&(u<0&&g===0?(rv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,R=null):u===g&&(v=!0,R=p.route.hydrateFallbackElement||null)));let b=e.concat(i.slice(0,g+1)),w=()=>{let _;return j?_=N:v?_=R:p.route.Component?_=y.createElement(p.route.Component,null):p.route.element?_=p.route.element:_=f,y.createElement(Gb,{match:p,routeContext:{outlet:f,matches:b,isDataRoute:n!=null},children:_})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?y.createElement(Kb,{location:n.location,revalidation:n.revalidation,component:N,error:j,children:w(),routeContext:{outlet:null,matches:b,isDataRoute:!0},onError:d}):w()},null)}function yp(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Yb(t){let e=y.useContext(Eo);return Ct(e,yp(t)),e}function Qb(t){let e=y.useContext(Au);return Ct(e,yp(t)),e}function Jb(t){let e=y.useContext(Qr);return Ct(e,yp(t)),e}function xp(t){let e=Jb(t),n=e.matches[e.matches.length-1];return Ct(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function Xb(){return xp("useRouteId")}function Zb(){var r;let t=y.useContext(gp),e=Qb("useRouteError"),n=xp("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function eE(){let{router:t}=Yb("useNavigate"),e=xp("useNavigate"),n=y.useRef(!1);return tv(()=>{n.current=!0}),y.useCallback(async(s,i={})=>{ur(n.current,ev),n.current&&(typeof s=="number"?await t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var e0={};function rv(t,e,n){!e&&!e0[t]&&(e0[t]=!0,ur(!1,n))}y.memo(tE);function tE({routes:t,future:e,state:n,unstable_onError:r}){return nv(t,void 0,n,r,e)}function hn(t){Ct(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function nE({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:i=!1,unstable_useTransitions:o}){Ct(!ll(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),u=y.useMemo(()=>({basename:c,navigator:s,static:i,unstable_useTransitions:o,future:{}}),[c,s,i,o]);typeof n=="string"&&(n=bo(n));let{pathname:d="/",search:f="",hash:p="",state:g=null,key:j="default"}=n,v=y.useMemo(()=>{let N=Kr(d,c);return N==null?null:{location:{pathname:N,search:f,hash:p,state:g,key:j},navigationType:r}},[c,d,f,p,g,j,r]);return ur(v!=null,`<Router basename="${c}"> is not able to match the URL "${d}${f}${p}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:y.createElement(dr.Provider,{value:u},y.createElement(al.Provider,{children:e,value:v}))}function rE({children:t,location:e}){return Wb(Qh(t),e)}function Qh(t,e=[]){let n=[];return y.Children.forEach(t,(r,s)=>{if(!y.isValidElement(r))return;let i=[...e,s];if(r.type===y.Fragment){n.push.apply(n,Qh(r.props.children,i));return}Ct(r.type===hn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ct(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Qh(r.props.children,i)),n.push(o)}),n}var vc="get",wc="application/x-www-form-urlencoded";function Pu(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function sE(t){return Pu(t)&&t.tagName.toLowerCase()==="button"}function iE(t){return Pu(t)&&t.tagName.toLowerCase()==="form"}function oE(t){return Pu(t)&&t.tagName.toLowerCase()==="input"}function aE(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function lE(t,e){return t.button===0&&(!e||e==="_self")&&!aE(t)}var ec=null;function cE(){if(ec===null)try{new FormData(document.createElement("form"),0),ec=!1}catch{ec=!0}return ec}var uE=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Dd(t){return t!=null&&!uE.has(t)?(ur(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${wc}"`),null):t}function dE(t,e){let n,r,s,i,o;if(iE(t)){let c=t.getAttribute("action");r=c?Kr(c,e):null,n=t.getAttribute("method")||vc,s=Dd(t.getAttribute("enctype"))||wc,i=new FormData(t)}else if(sE(t)||oE(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||c.getAttribute("action");if(r=u?Kr(u,e):null,n=t.getAttribute("formmethod")||c.getAttribute("method")||vc,s=Dd(t.getAttribute("formenctype"))||Dd(c.getAttribute("enctype"))||wc,i=new FormData(c,t),!cE()){let{name:d,type:f,value:p}=t;if(f==="image"){let g=d?`${d}.`:"";i.append(`${g}x`,"0"),i.append(`${g}y`,"0")}else d&&i.append(d,p)}}else{if(Pu(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=vc,r=null,s=wc,o=t}return i&&s==="text/plain"&&(o=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function vp(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function hE(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Kr(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function fE(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function pE(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function mE(t,e,n){let r=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let o=await fE(i,n);return o.links?o.links():[]}return[]}));return vE(r.flat(1).filter(pE).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function t0(t,e,n,r,s,i){let o=(u,d)=>n[d]?u.route.id!==n[d].route.id:!0,c=(u,d)=>{var f;return n[d].pathname!==u.pathname||((f=n[d].route.path)==null?void 0:f.endsWith("*"))&&n[d].params["*"]!==u.params["*"]};return i==="assets"?e.filter((u,d)=>o(u,d)||c(u,d)):i==="data"?e.filter((u,d)=>{var p;let f=r.routes[u.route.id];if(!f||!f.hasLoader)return!1;if(o(u,d)||c(u,d))return!0;if(u.route.shouldRevalidate){let g=u.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((p=n[0])==null?void 0:p.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function gE(t,e,{includeHydrateFallback:n}={}){return yE(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function yE(t){return[...new Set(t)]}function xE(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function vE(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let i=JSON.stringify(xE(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}function sv(){let t=y.useContext(Eo);return vp(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function wE(){let t=y.useContext(Au);return vp(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var wp=y.createContext(void 0);wp.displayName="FrameworkContext";function iv(){let t=y.useContext(wp);return vp(t,"You must render this element inside a <HydratedRouter> element"),t}function _E(t,e){let n=y.useContext(wp),[r,s]=y.useState(!1),[i,o]=y.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:d,onMouseLeave:f,onTouchStart:p}=e,g=y.useRef(null);y.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let N=b=>{b.forEach(w=>{o(w.isIntersecting)})},R=new IntersectionObserver(N,{threshold:.5});return g.current&&R.observe(g.current),()=>{R.disconnect()}}},[t]),y.useEffect(()=>{if(r){let N=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(N)}}},[r]);let j=()=>{s(!0)},v=()=>{s(!1),o(!1)};return n?t!=="intent"?[i,g,{}]:[i,g,{onFocus:qo(c,j),onBlur:qo(u,v),onMouseEnter:qo(d,j),onMouseLeave:qo(f,v),onTouchStart:qo(p,j)}]:[!1,g,{}]}function qo(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function SE({page:t,...e}){let{router:n}=sv(),r=y.useMemo(()=>G1(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?y.createElement(EE,{page:t,matches:r,...e}):null}function bE(t){let{manifest:e,routeModules:n}=iv(),[r,s]=y.useState([]);return y.useEffect(()=>{let i=!1;return mE(t,e,n).then(o=>{i||s(o)}),()=>{i=!0}},[t,e,n]),r}function EE({page:t,matches:e,...n}){let r=zs(),{manifest:s,routeModules:i}=iv(),{basename:o}=sv(),{loaderData:c,matches:u}=wE(),d=y.useMemo(()=>t0(t,e,u,s,r,"data"),[t,e,u,s,r]),f=y.useMemo(()=>t0(t,e,u,s,r,"assets"),[t,e,u,s,r]),p=y.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let v=new Set,N=!1;if(e.forEach(b=>{var _;let w=s.routes[b.route.id];!w||!w.hasLoader||(!d.some(P=>P.route.id===b.route.id)&&b.route.id in c&&((_=i[b.route.id])!=null&&_.shouldRevalidate)||w.hasClientLoader?N=!0:v.add(b.route.id))}),v.size===0)return[];let R=hE(t,o,"data");return N&&v.size>0&&R.searchParams.set("_routes",e.filter(b=>v.has(b.route.id)).map(b=>b.route.id).join(",")),[R.pathname+R.search]},[o,c,r,s,d,e,t,i]),g=y.useMemo(()=>gE(f,s),[f,s]),j=bE(f);return y.createElement(y.Fragment,null,p.map(v=>y.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...n})),g.map(v=>y.createElement("link",{key:v,rel:"modulepreload",href:v,...n})),j.map(({key:v,link:N})=>y.createElement("link",{key:v,nonce:n.nonce,...N})))}function CE(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var ov=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ov&&(window.__reactRouterVersion="7.10.1")}catch{}function IE({basename:t,children:e,unstable_useTransitions:n,window:r}){let s=y.useRef();s.current==null&&(s.current=hb({window:r,v5Compat:!0}));let i=s.current,[o,c]=y.useState({action:i.action,location:i.location}),u=y.useCallback(d=>{n===!1?c(d):y.startTransition(()=>c(d))},[n]);return y.useLayoutEffect(()=>i.listen(u),[i,u]),y.createElement(nE,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:i,unstable_useTransitions:n===!0})}var av=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xe=y.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:o,state:c,target:u,to:d,preventScrollReset:f,viewTransition:p,...g},j){let{basename:v,unstable_useTransitions:N}=y.useContext(dr),R=typeof d=="string"&&av.test(d),b,w=!1;if(typeof d=="string"&&R&&(b=d,ov))try{let k=new URL(window.location.href),T=d.startsWith("//")?new URL(k.protocol+d):new URL(d),A=Kr(T.pathname,v);T.origin===k.origin&&A!=null?d=A+T.search+T.hash:w=!0}catch{ur(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let _=Ub(d,{relative:s}),[P,H,X]=_E(r,g),C=NE(d,{replace:o,state:c,target:u,preventScrollReset:f,relative:s,viewTransition:p,unstable_useTransitions:N});function x(k){e&&e(k),k.defaultPrevented||C(k)}let E=y.createElement("a",{...g,...X,href:b||_,onClick:w||i?e:x,ref:CE(j,H),target:u,"data-discover":!R&&n==="render"?"true":void 0});return P&&!R?y.createElement(y.Fragment,null,E,y.createElement(SE,{page:_})):E});xe.displayName="Link";var jE=y.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:o,viewTransition:c,children:u,...d},f){let p=cl(o,{relative:d.relative}),g=zs(),j=y.useContext(Au),{navigator:v,basename:N}=y.useContext(dr),R=j!=null&&DE(p)&&c===!0,b=v.encodeLocation?v.encodeLocation(p).pathname:p.pathname,w=g.pathname,_=j&&j.navigation&&j.navigation.location?j.navigation.location.pathname:null;n||(w=w.toLowerCase(),_=_?_.toLowerCase():null,b=b.toLowerCase()),_&&N&&(_=Kr(_,N)||_);const P=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let H=w===b||!s&&w.startsWith(b)&&w.charAt(P)==="/",X=_!=null&&(_===b||!s&&_.startsWith(b)&&_.charAt(b.length)==="/"),C={isActive:H,isPending:X,isTransitioning:R},x=H?e:void 0,E;typeof r=="function"?E=r(C):E=[r,H?"active":null,X?"pending":null,R?"transitioning":null].filter(Boolean).join(" ");let k=typeof i=="function"?i(C):i;return y.createElement(xe,{...d,"aria-current":x,className:E,ref:f,style:k,to:o,viewTransition:c},typeof u=="function"?u(C):u)});jE.displayName="NavLink";var kE=y.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:i,method:o=vc,action:c,onSubmit:u,relative:d,preventScrollReset:f,viewTransition:p,...g},j)=>{let{unstable_useTransitions:v}=y.useContext(dr),N=PE(),R=OE(c,{relative:d}),b=o.toLowerCase()==="get"?"get":"post",w=typeof c=="string"&&av.test(c),_=P=>{if(u&&u(P),P.defaultPrevented)return;P.preventDefault();let H=P.nativeEvent.submitter,X=(H==null?void 0:H.getAttribute("formmethod"))||o,C=()=>N(H||P.currentTarget,{fetcherKey:e,method:X,navigate:n,replace:s,state:i,relative:d,preventScrollReset:f,viewTransition:p});v&&n!==!1?y.startTransition(()=>C()):C()};return y.createElement("form",{ref:j,method:b,action:R,onSubmit:r?u:_,...g,"data-discover":!w&&t==="render"?"true":void 0})});kE.displayName="Form";function TE(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lv(t){let e=y.useContext(Eo);return Ct(e,TE(t)),e}function NE(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:o,unstable_useTransitions:c}={}){let u=Fn(),d=zs(),f=cl(t,{relative:i});return y.useCallback(p=>{if(lE(p,e)){p.preventDefault();let g=n!==void 0?n:Ba(d)===Ba(f),j=()=>u(t,{replace:g,state:r,preventScrollReset:s,relative:i,viewTransition:o});c?y.startTransition(()=>j()):j()}},[d,u,f,n,r,e,t,s,i,o,c])}var RE=0,AE=()=>`__${String(++RE)}__`;function PE(){let{router:t}=lv("useSubmit"),{basename:e}=y.useContext(dr),n=Xb(),r=t.fetch,s=t.navigate;return y.useCallback(async(i,o={})=>{let{action:c,method:u,encType:d,formData:f,body:p}=dE(i,e);if(o.navigate===!1){let g=o.fetcherKey||AE();await r(g,n,o.action||c,{preventScrollReset:o.preventScrollReset,formData:f,body:p,formMethod:o.method||u,formEncType:o.encType||d,flushSync:o.flushSync})}else await s(o.action||c,{preventScrollReset:o.preventScrollReset,formData:f,body:p,formMethod:o.method||u,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,s,e,n])}function OE(t,{relative:e}={}){let{basename:n}=y.useContext(dr),r=y.useContext(Qr);Ct(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...cl(t||".",{relative:e})},o=zs();if(t==null){i.search=o.search;let c=new URLSearchParams(i.search),u=c.getAll("index");if(u.some(f=>f==="")){c.delete("index"),u.filter(p=>p).forEach(p=>c.append("index",p));let f=c.toString();i.search=f?`?${f}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:Br([n,i.pathname])),Ba(i)}function DE(t,{relative:e}={}){let n=y.useContext(Z1);Ct(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=lv("useViewTransitionState"),s=cl(t,{relative:e});if(!n.isTransitioning)return!1;let i=Kr(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Kr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Qc(s.pathname,o)!=null||Qc(s.pathname,i)!=null}function cv(t,e){return function(){return t.apply(e,arguments)}}const{toString:ME}=Object.prototype,{getPrototypeOf:_p}=Object,{iterator:Ou,toStringTag:uv}=Symbol,Du=(t=>e=>{const n=ME.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),hr=t=>(t=t.toLowerCase(),e=>Du(e)===t),Mu=t=>e=>typeof e===t,{isArray:Co}=Array,co=Mu("undefined");function ul(t){return t!==null&&!co(t)&&t.constructor!==null&&!co(t.constructor)&&Tn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const dv=hr("ArrayBuffer");function LE(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&dv(t.buffer),e}const FE=Mu("string"),Tn=Mu("function"),hv=Mu("number"),dl=t=>t!==null&&typeof t=="object",zE=t=>t===!0||t===!1,_c=t=>{if(Du(t)!=="object")return!1;const e=_p(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(uv in t)&&!(Ou in t)},BE=t=>{if(!dl(t)||ul(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},UE=hr("Date"),$E=hr("File"),WE=hr("Blob"),HE=hr("FileList"),VE=t=>dl(t)&&Tn(t.pipe),KE=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Tn(t.append)&&((e=Du(t))==="formdata"||e==="object"&&Tn(t.toString)&&t.toString()==="[object FormData]"))},GE=hr("URLSearchParams"),[qE,YE,QE,JE]=["ReadableStream","Request","Response","Headers"].map(hr),XE=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function hl(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),Co(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{if(ul(t))return;const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let c;for(r=0;r<o;r++)c=i[r],e.call(null,t[c],c,t)}}function fv(t,e){if(ul(t))return null;e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const ti=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,pv=t=>!co(t)&&t!==ti;function Jh(){const{caseless:t,skipUndefined:e}=pv(this)&&this||{},n={},r=(s,i)=>{const o=t&&fv(n,i)||i;_c(n[o])&&_c(s)?n[o]=Jh(n[o],s):_c(s)?n[o]=Jh({},s):Co(s)?n[o]=s.slice():(!e||!co(s))&&(n[o]=s)};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&hl(arguments[s],r);return n}const ZE=(t,e,n,{allOwnKeys:r}={})=>(hl(e,(s,i)=>{n&&Tn(s)?t[i]=cv(s,n):t[i]=s},{allOwnKeys:r}),t),eC=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),tC=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},nC=(t,e,n,r)=>{let s,i,o;const c={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!r||r(o,t,e))&&!c[o]&&(e[o]=t[o],c[o]=!0);t=n!==!1&&_p(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},rC=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},sC=t=>{if(!t)return null;if(Co(t))return t;let e=t.length;if(!hv(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},iC=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&_p(Uint8Array)),oC=(t,e)=>{const r=(t&&t[Ou]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},aC=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},lC=hr("HTMLFormElement"),cC=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),n0=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),uC=hr("RegExp"),mv=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};hl(n,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(r[i]=o||s)}),Object.defineProperties(t,r)},dC=t=>{mv(t,(e,n)=>{if(Tn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Tn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},hC=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return Co(t)?r(t):r(String(t).split(e)),n},fC=()=>{},pC=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function mC(t){return!!(t&&Tn(t.append)&&t[uv]==="FormData"&&t[Ou])}const gC=t=>{const e=new Array(10),n=(r,s)=>{if(dl(r)){if(e.indexOf(r)>=0)return;if(ul(r))return r;if(!("toJSON"in r)){e[s]=r;const i=Co(r)?[]:{};return hl(r,(o,c)=>{const u=n(o,s+1);!co(u)&&(i[c]=u)}),e[s]=void 0,i}}return r};return n(t,0)},yC=hr("AsyncFunction"),xC=t=>t&&(dl(t)||Tn(t))&&Tn(t.then)&&Tn(t.catch),gv=((t,e)=>t?setImmediate:e?((n,r)=>(ti.addEventListener("message",({source:s,data:i})=>{s===ti&&i===n&&r.length&&r.shift()()},!1),s=>{r.push(s),ti.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Tn(ti.postMessage)),vC=typeof queueMicrotask<"u"?queueMicrotask.bind(ti):typeof process<"u"&&process.nextTick||gv,wC=t=>t!=null&&Tn(t[Ou]),W={isArray:Co,isArrayBuffer:dv,isBuffer:ul,isFormData:KE,isArrayBufferView:LE,isString:FE,isNumber:hv,isBoolean:zE,isObject:dl,isPlainObject:_c,isEmptyObject:BE,isReadableStream:qE,isRequest:YE,isResponse:QE,isHeaders:JE,isUndefined:co,isDate:UE,isFile:$E,isBlob:WE,isRegExp:uC,isFunction:Tn,isStream:VE,isURLSearchParams:GE,isTypedArray:iC,isFileList:HE,forEach:hl,merge:Jh,extend:ZE,trim:XE,stripBOM:eC,inherits:tC,toFlatObject:nC,kindOf:Du,kindOfTest:hr,endsWith:rC,toArray:sC,forEachEntry:oC,matchAll:aC,isHTMLForm:lC,hasOwnProperty:n0,hasOwnProp:n0,reduceDescriptors:mv,freezeMethods:dC,toObjectSet:hC,toCamelCase:cC,noop:fC,toFiniteNumber:pC,findKey:fv,global:ti,isContextDefined:pv,isSpecCompliantForm:mC,toJSONObject:gC,isAsyncFn:yC,isThenable:xC,setImmediate:gv,asap:vC,isIterable:wC};function Fe(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}W.inherits(Fe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:W.toJSONObject(this.config),code:this.code,status:this.status}}});const yv=Fe.prototype,xv={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{xv[t]={value:t}});Object.defineProperties(Fe,xv);Object.defineProperty(yv,"isAxiosError",{value:!0});Fe.from=(t,e,n,r,s,i)=>{const o=Object.create(yv);W.toFlatObject(t,o,function(f){return f!==Error.prototype},d=>d!=="isAxiosError");const c=t&&t.message?t.message:"Error",u=e==null&&t?t.code:e;return Fe.call(o,c,u,n,r,s),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",i&&Object.assign(o,i),o};const _C=null;function Xh(t){return W.isPlainObject(t)||W.isArray(t)}function vv(t){return W.endsWith(t,"[]")?t.slice(0,-2):t}function r0(t,e,n){return t?t.concat(e).map(function(s,i){return s=vv(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function SC(t){return W.isArray(t)&&!t.some(Xh)}const bC=W.toFlatObject(W,{},null,function(e){return/^is[A-Z]/.test(e)});function Lu(t,e,n){if(!W.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=W.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(N,R){return!W.isUndefined(R[N])});const r=n.metaTokens,s=n.visitor||f,i=n.dots,o=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&W.isSpecCompliantForm(e);if(!W.isFunction(s))throw new TypeError("visitor must be a function");function d(v){if(v===null)return"";if(W.isDate(v))return v.toISOString();if(W.isBoolean(v))return v.toString();if(!u&&W.isBlob(v))throw new Fe("Blob is not supported. Use a Buffer instead.");return W.isArrayBuffer(v)||W.isTypedArray(v)?u&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function f(v,N,R){let b=v;if(v&&!R&&typeof v=="object"){if(W.endsWith(N,"{}"))N=r?N:N.slice(0,-2),v=JSON.stringify(v);else if(W.isArray(v)&&SC(v)||(W.isFileList(v)||W.endsWith(N,"[]"))&&(b=W.toArray(v)))return N=vv(N),b.forEach(function(_,P){!(W.isUndefined(_)||_===null)&&e.append(o===!0?r0([N],P,i):o===null?N:N+"[]",d(_))}),!1}return Xh(v)?!0:(e.append(r0(R,N,i),d(v)),!1)}const p=[],g=Object.assign(bC,{defaultVisitor:f,convertValue:d,isVisitable:Xh});function j(v,N){if(!W.isUndefined(v)){if(p.indexOf(v)!==-1)throw Error("Circular reference detected in "+N.join("."));p.push(v),W.forEach(v,function(b,w){(!(W.isUndefined(b)||b===null)&&s.call(e,b,W.isString(w)?w.trim():w,N,g))===!0&&j(b,N?N.concat(w):[w])}),p.pop()}}if(!W.isObject(t))throw new TypeError("data must be an object");return j(t),e}function s0(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Sp(t,e){this._pairs=[],t&&Lu(t,this,e)}const wv=Sp.prototype;wv.append=function(e,n){this._pairs.push([e,n])};wv.toString=function(e){const n=e?function(r){return e.call(this,r,s0)}:s0;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function EC(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function _v(t,e,n){if(!e)return t;const r=n&&n.encode||EC;W.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(s?i=s(e,n):i=W.isURLSearchParams(e)?e.toString():new Sp(e,n).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class i0{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){W.forEach(this.handlers,function(r){r!==null&&e(r)})}}const Sv={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},CC=typeof URLSearchParams<"u"?URLSearchParams:Sp,IC=typeof FormData<"u"?FormData:null,jC=typeof Blob<"u"?Blob:null,kC={isBrowser:!0,classes:{URLSearchParams:CC,FormData:IC,Blob:jC},protocols:["http","https","file","blob","url","data"]},bp=typeof window<"u"&&typeof document<"u",Zh=typeof navigator=="object"&&navigator||void 0,TC=bp&&(!Zh||["ReactNative","NativeScript","NS"].indexOf(Zh.product)<0),NC=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",RC=bp&&window.location.href||"http://localhost",AC=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:bp,hasStandardBrowserEnv:TC,hasStandardBrowserWebWorkerEnv:NC,navigator:Zh,origin:RC},Symbol.toStringTag,{value:"Module"})),cn={...AC,...kC};function PC(t,e){return Lu(t,new cn.classes.URLSearchParams,{visitor:function(n,r,s,i){return cn.isNode&&W.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function OC(t){return W.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function DC(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function bv(t){function e(n,r,s,i){let o=n[i++];if(o==="__proto__")return!0;const c=Number.isFinite(+o),u=i>=n.length;return o=!o&&W.isArray(s)?s.length:o,u?(W.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!c):((!s[o]||!W.isObject(s[o]))&&(s[o]=[]),e(n,r,s[o],i)&&W.isArray(s[o])&&(s[o]=DC(s[o])),!c)}if(W.isFormData(t)&&W.isFunction(t.entries)){const n={};return W.forEachEntry(t,(r,s)=>{e(OC(r),s,n,0)}),n}return null}function MC(t,e,n){if(W.isString(t))try{return(e||JSON.parse)(t),W.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const fl={transitional:Sv,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=W.isObject(e);if(i&&W.isHTMLForm(e)&&(e=new FormData(e)),W.isFormData(e))return s?JSON.stringify(bv(e)):e;if(W.isArrayBuffer(e)||W.isBuffer(e)||W.isStream(e)||W.isFile(e)||W.isBlob(e)||W.isReadableStream(e))return e;if(W.isArrayBufferView(e))return e.buffer;if(W.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let c;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return PC(e,this.formSerializer).toString();if((c=W.isFileList(e))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Lu(c?{"files[]":e}:e,u&&new u,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),MC(e)):e}],transformResponse:[function(e){const n=this.transitional||fl.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(W.isResponse(e)||W.isReadableStream(e))return e;if(e&&W.isString(e)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e,this.parseReviver)}catch(c){if(o)throw c.name==="SyntaxError"?Fe.from(c,Fe.ERR_BAD_RESPONSE,this,null,this.response):c}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:cn.classes.FormData,Blob:cn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};W.forEach(["delete","get","head","post","put","patch"],t=>{fl.headers[t]={}});const LC=W.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),FC=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||e[n]&&LC[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},o0=Symbol("internals");function Yo(t){return t&&String(t).trim().toLowerCase()}function Sc(t){return t===!1||t==null?t:W.isArray(t)?t.map(Sc):String(t)}function zC(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const BC=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Md(t,e,n,r,s){if(W.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!W.isString(e)){if(W.isString(r))return e.indexOf(r)!==-1;if(W.isRegExp(r))return r.test(e)}}function UC(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function $C(t,e){const n=W.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,o){return this[r].call(this,e,s,i,o)},configurable:!0})})}let Nn=class{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(c,u,d){const f=Yo(u);if(!f)throw new Error("header name must be a non-empty string");const p=W.findKey(s,f);(!p||s[p]===void 0||d===!0||d===void 0&&s[p]!==!1)&&(s[p||u]=Sc(c))}const o=(c,u)=>W.forEach(c,(d,f)=>i(d,f,u));if(W.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(W.isString(e)&&(e=e.trim())&&!BC(e))o(FC(e),n);else if(W.isObject(e)&&W.isIterable(e)){let c={},u,d;for(const f of e){if(!W.isArray(f))throw TypeError("Object iterator must return a key-value pair");c[d=f[0]]=(u=c[d])?W.isArray(u)?[...u,f[1]]:[u,f[1]]:f[1]}o(c,n)}else e!=null&&i(n,e,r);return this}get(e,n){if(e=Yo(e),e){const r=W.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return zC(s);if(W.isFunction(n))return n.call(this,s,r);if(W.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Yo(e),e){const r=W.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Md(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(o){if(o=Yo(o),o){const c=W.findKey(r,o);c&&(!n||Md(r,r[c],c,n))&&(delete r[c],s=!0)}}return W.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||Md(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return W.forEach(this,(s,i)=>{const o=W.findKey(r,i);if(o){n[o]=Sc(s),delete n[i];return}const c=e?UC(i):String(i).trim();c!==i&&delete n[i],n[c]=Sc(s),r[c]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return W.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&W.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[o0]=this[o0]={accessors:{}}).accessors,s=this.prototype;function i(o){const c=Yo(o);r[c]||($C(s,o),r[c]=!0)}return W.isArray(e)?e.forEach(i):i(e),this}};Nn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);W.reduceDescriptors(Nn.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});W.freezeMethods(Nn);function Ld(t,e){const n=this||fl,r=e||n,s=Nn.from(r.headers);let i=r.data;return W.forEach(t,function(c){i=c.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function Ev(t){return!!(t&&t.__CANCEL__)}function Io(t,e,n){Fe.call(this,t??"canceled",Fe.ERR_CANCELED,e,n),this.name="CanceledError"}W.inherits(Io,Fe,{__CANCEL__:!0});function Cv(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Fe("Request failed with status code "+n.status,[Fe.ERR_BAD_REQUEST,Fe.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function WC(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function HC(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(u){const d=Date.now(),f=r[i];o||(o=d),n[s]=u,r[s]=d;let p=i,g=0;for(;p!==s;)g+=n[p++],p=p%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),d-o<e)return;const j=f&&d-f;return j?Math.round(g*1e3/j):void 0}}function VC(t,e){let n=0,r=1e3/e,s,i;const o=(d,f=Date.now())=>{n=f,s=null,i&&(clearTimeout(i),i=null),t(...d)};return[(...d)=>{const f=Date.now(),p=f-n;p>=r?o(d,f):(s=d,i||(i=setTimeout(()=>{i=null,o(s)},r-p)))},()=>s&&o(s)]}const Jc=(t,e,n=3)=>{let r=0;const s=HC(50,250);return VC(i=>{const o=i.loaded,c=i.lengthComputable?i.total:void 0,u=o-r,d=s(u),f=o<=c;r=o;const p={loaded:o,total:c,progress:c?o/c:void 0,bytes:u,rate:d||void 0,estimated:d&&c&&f?(c-o)/d:void 0,event:i,lengthComputable:c!=null,[e?"download":"upload"]:!0};t(p)},n)},a0=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},l0=t=>(...e)=>W.asap(()=>t(...e)),KC=cn.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,cn.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(cn.origin),cn.navigator&&/(msie|trident)/i.test(cn.navigator.userAgent)):()=>!0,GC=cn.hasStandardBrowserEnv?{write(t,e,n,r,s,i,o){if(typeof document>"u")return;const c=[`${t}=${encodeURIComponent(e)}`];W.isNumber(n)&&c.push(`expires=${new Date(n).toUTCString()}`),W.isString(r)&&c.push(`path=${r}`),W.isString(s)&&c.push(`domain=${s}`),i===!0&&c.push("secure"),W.isString(o)&&c.push(`SameSite=${o}`),document.cookie=c.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function qC(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function YC(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Iv(t,e,n){let r=!qC(e);return t&&(r||n==!1)?YC(t,e):e}const c0=t=>t instanceof Nn?{...t}:t;function pi(t,e){e=e||{};const n={};function r(d,f,p,g){return W.isPlainObject(d)&&W.isPlainObject(f)?W.merge.call({caseless:g},d,f):W.isPlainObject(f)?W.merge({},f):W.isArray(f)?f.slice():f}function s(d,f,p,g){if(W.isUndefined(f)){if(!W.isUndefined(d))return r(void 0,d,p,g)}else return r(d,f,p,g)}function i(d,f){if(!W.isUndefined(f))return r(void 0,f)}function o(d,f){if(W.isUndefined(f)){if(!W.isUndefined(d))return r(void 0,d)}else return r(void 0,f)}function c(d,f,p){if(p in e)return r(d,f);if(p in t)return r(void 0,d)}const u={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c,headers:(d,f,p)=>s(c0(d),c0(f),p,!0)};return W.forEach(Object.keys({...t,...e}),function(f){const p=u[f]||s,g=p(t[f],e[f],f);W.isUndefined(g)&&p!==c||(n[f]=g)}),n}const jv=t=>{const e=pi({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:c}=e;if(e.headers=o=Nn.from(o),e.url=_v(Iv(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),c&&o.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),W.isFormData(n)){if(cn.hasStandardBrowserEnv||cn.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(W.isFunction(n.getHeaders)){const u=n.getHeaders(),d=["content-type","content-length"];Object.entries(u).forEach(([f,p])=>{d.includes(f.toLowerCase())&&o.set(f,p)})}}if(cn.hasStandardBrowserEnv&&(r&&W.isFunction(r)&&(r=r(e)),r||r!==!1&&KC(e.url))){const u=s&&i&&GC.read(i);u&&o.set(s,u)}return e},QC=typeof XMLHttpRequest<"u",JC=QC&&function(t){return new Promise(function(n,r){const s=jv(t);let i=s.data;const o=Nn.from(s.headers).normalize();let{responseType:c,onUploadProgress:u,onDownloadProgress:d}=s,f,p,g,j,v;function N(){j&&j(),v&&v(),s.cancelToken&&s.cancelToken.unsubscribe(f),s.signal&&s.signal.removeEventListener("abort",f)}let R=new XMLHttpRequest;R.open(s.method.toUpperCase(),s.url,!0),R.timeout=s.timeout;function b(){if(!R)return;const _=Nn.from("getAllResponseHeaders"in R&&R.getAllResponseHeaders()),H={data:!c||c==="text"||c==="json"?R.responseText:R.response,status:R.status,statusText:R.statusText,headers:_,config:t,request:R};Cv(function(C){n(C),N()},function(C){r(C),N()},H),R=null}"onloadend"in R?R.onloadend=b:R.onreadystatechange=function(){!R||R.readyState!==4||R.status===0&&!(R.responseURL&&R.responseURL.indexOf("file:")===0)||setTimeout(b)},R.onabort=function(){R&&(r(new Fe("Request aborted",Fe.ECONNABORTED,t,R)),R=null)},R.onerror=function(P){const H=P&&P.message?P.message:"Network Error",X=new Fe(H,Fe.ERR_NETWORK,t,R);X.event=P||null,r(X),R=null},R.ontimeout=function(){let P=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const H=s.transitional||Sv;s.timeoutErrorMessage&&(P=s.timeoutErrorMessage),r(new Fe(P,H.clarifyTimeoutError?Fe.ETIMEDOUT:Fe.ECONNABORTED,t,R)),R=null},i===void 0&&o.setContentType(null),"setRequestHeader"in R&&W.forEach(o.toJSON(),function(P,H){R.setRequestHeader(H,P)}),W.isUndefined(s.withCredentials)||(R.withCredentials=!!s.withCredentials),c&&c!=="json"&&(R.responseType=s.responseType),d&&([g,v]=Jc(d,!0),R.addEventListener("progress",g)),u&&R.upload&&([p,j]=Jc(u),R.upload.addEventListener("progress",p),R.upload.addEventListener("loadend",j)),(s.cancelToken||s.signal)&&(f=_=>{R&&(r(!_||_.type?new Io(null,t,R):_),R.abort(),R=null)},s.cancelToken&&s.cancelToken.subscribe(f),s.signal&&(s.signal.aborted?f():s.signal.addEventListener("abort",f)));const w=WC(s.url);if(w&&cn.protocols.indexOf(w)===-1){r(new Fe("Unsupported protocol "+w+":",Fe.ERR_BAD_REQUEST,t));return}R.send(i||null)})},XC=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,s;const i=function(d){if(!s){s=!0,c();const f=d instanceof Error?d:this.reason;r.abort(f instanceof Fe?f:new Io(f instanceof Error?f.message:f))}};let o=e&&setTimeout(()=>{o=null,i(new Fe(`timeout ${e} of ms exceeded`,Fe.ETIMEDOUT))},e);const c=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),t=null)};t.forEach(d=>d.addEventListener("abort",i));const{signal:u}=r;return u.unsubscribe=()=>W.asap(c),u}},ZC=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,s;for(;r<n;)s=r+e,yield t.slice(r,s),r=s},e4=async function*(t,e){for await(const n of t4(t))yield*ZC(n,e)},t4=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},u0=(t,e,n,r)=>{const s=e4(t,e);let i=0,o,c=u=>{o||(o=!0,r&&r(u))};return new ReadableStream({async pull(u){try{const{done:d,value:f}=await s.next();if(d){c(),u.close();return}let p=f.byteLength;if(n){let g=i+=p;n(g)}u.enqueue(new Uint8Array(f))}catch(d){throw c(d),d}},cancel(u){return c(u),s.return()}},{highWaterMark:2})},d0=64*1024,{isFunction:tc}=W,n4=(({Request:t,Response:e})=>({Request:t,Response:e}))(W.global),{ReadableStream:h0,TextEncoder:f0}=W.global,p0=(t,...e)=>{try{return!!t(...e)}catch{return!1}},r4=t=>{t=W.merge.call({skipUndefined:!0},n4,t);const{fetch:e,Request:n,Response:r}=t,s=e?tc(e):typeof fetch=="function",i=tc(n),o=tc(r);if(!s)return!1;const c=s&&tc(h0),u=s&&(typeof f0=="function"?(v=>N=>v.encode(N))(new f0):async v=>new Uint8Array(await new n(v).arrayBuffer())),d=i&&c&&p0(()=>{let v=!1;const N=new n(cn.origin,{body:new h0,method:"POST",get duplex(){return v=!0,"half"}}).headers.has("Content-Type");return v&&!N}),f=o&&c&&p0(()=>W.isReadableStream(new r("").body)),p={stream:f&&(v=>v.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(v=>{!p[v]&&(p[v]=(N,R)=>{let b=N&&N[v];if(b)return b.call(N);throw new Fe(`Response type '${v}' is not supported`,Fe.ERR_NOT_SUPPORT,R)})});const g=async v=>{if(v==null)return 0;if(W.isBlob(v))return v.size;if(W.isSpecCompliantForm(v))return(await new n(cn.origin,{method:"POST",body:v}).arrayBuffer()).byteLength;if(W.isArrayBufferView(v)||W.isArrayBuffer(v))return v.byteLength;if(W.isURLSearchParams(v)&&(v=v+""),W.isString(v))return(await u(v)).byteLength},j=async(v,N)=>{const R=W.toFiniteNumber(v.getContentLength());return R??g(N)};return async v=>{let{url:N,method:R,data:b,signal:w,cancelToken:_,timeout:P,onDownloadProgress:H,onUploadProgress:X,responseType:C,headers:x,withCredentials:E="same-origin",fetchOptions:k}=jv(v),T=e||fetch;C=C?(C+"").toLowerCase():"text";let A=XC([w,_&&_.toAbortSignal()],P),I=null;const J=A&&A.unsubscribe&&(()=>{A.unsubscribe()});let be;try{if(X&&d&&R!=="get"&&R!=="head"&&(be=await j(x,b))!==0){let B=new n(N,{method:"POST",body:b,duplex:"half"}),ce;if(W.isFormData(b)&&(ce=B.headers.get("content-type"))&&x.setContentType(ce),B.body){const[ve,we]=a0(be,Jc(l0(X)));b=u0(B.body,d0,ve,we)}}W.isString(E)||(E=E?"include":"omit");const G=i&&"credentials"in n.prototype,ye={...k,signal:A,method:R.toUpperCase(),headers:x.normalize().toJSON(),body:b,duplex:"half",credentials:G?E:void 0};I=i&&new n(N,ye);let K=await(i?T(I,k):T(N,ye));const $=f&&(C==="stream"||C==="response");if(f&&(H||$&&J)){const B={};["status","statusText","headers"].forEach(he=>{B[he]=K[he]});const ce=W.toFiniteNumber(K.headers.get("content-length")),[ve,we]=H&&a0(ce,Jc(l0(H),!0))||[];K=new r(u0(K.body,d0,ve,()=>{we&&we(),J&&J()}),B)}C=C||"text";let ee=await p[W.findKey(p,C)||"text"](K,v);return!$&&J&&J(),await new Promise((B,ce)=>{Cv(B,ce,{data:ee,headers:Nn.from(K.headers),status:K.status,statusText:K.statusText,config:v,request:I})})}catch(G){throw J&&J(),G&&G.name==="TypeError"&&/Load failed|fetch/i.test(G.message)?Object.assign(new Fe("Network Error",Fe.ERR_NETWORK,v,I),{cause:G.cause||G}):Fe.from(G,G&&G.code,v,I)}}},s4=new Map,kv=t=>{let e=t&&t.env||{};const{fetch:n,Request:r,Response:s}=e,i=[r,s,n];let o=i.length,c=o,u,d,f=s4;for(;c--;)u=i[c],d=f.get(u),d===void 0&&f.set(u,d=c?new Map:r4(e)),f=d;return d};kv();const Ep={http:_C,xhr:JC,fetch:{get:kv}};W.forEach(Ep,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const m0=t=>`- ${t}`,i4=t=>W.isFunction(t)||t===null||t===!1;function o4(t,e){t=W.isArray(t)?t:[t];const{length:n}=t;let r,s;const i={};for(let o=0;o<n;o++){r=t[o];let c;if(s=r,!i4(r)&&(s=Ep[(c=String(r)).toLowerCase()],s===void 0))throw new Fe(`Unknown adapter '${c}'`);if(s&&(W.isFunction(s)||(s=s.get(e))))break;i[c||"#"+o]=s}if(!s){const o=Object.entries(i).map(([u,d])=>`adapter ${u} `+(d===!1?"is not supported by the environment":"is not available in the build"));let c=n?o.length>1?`since :
`+o.map(m0).join(`
`):" "+m0(o[0]):"as no adapter specified";throw new Fe("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return s}const Tv={getAdapter:o4,adapters:Ep};function Fd(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Io(null,t)}function g0(t){return Fd(t),t.headers=Nn.from(t.headers),t.data=Ld.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Tv.getAdapter(t.adapter||fl.adapter,t)(t).then(function(r){return Fd(t),r.data=Ld.call(t,t.transformResponse,r),r.headers=Nn.from(r.headers),r},function(r){return Ev(r)||(Fd(t),r&&r.response&&(r.response.data=Ld.call(t,t.transformResponse,r.response),r.response.headers=Nn.from(r.response.headers))),Promise.reject(r)})}const Nv="1.13.2",Fu={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Fu[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const y0={};Fu.transitional=function(e,n,r){function s(i,o){return"[Axios v"+Nv+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,c)=>{if(e===!1)throw new Fe(s(o," has been removed"+(n?" in "+n:"")),Fe.ERR_DEPRECATED);return n&&!y0[o]&&(y0[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,c):!0}};Fu.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function a4(t,e,n){if(typeof t!="object")throw new Fe("options must be an object",Fe.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],o=e[i];if(o){const c=t[i],u=c===void 0||o(c,i,t);if(u!==!0)throw new Fe("option "+i+" must be "+u,Fe.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Fe("Unknown option "+i,Fe.ERR_BAD_OPTION)}}const bc={assertOptions:a4,validators:Fu},xr=bc.validators;let oi=class{constructor(e){this.defaults=e||{},this.interceptors={request:new i0,response:new i0}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=pi(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&bc.assertOptions(r,{silentJSONParsing:xr.transitional(xr.boolean),forcedJSONParsing:xr.transitional(xr.boolean),clarifyTimeoutError:xr.transitional(xr.boolean)},!1),s!=null&&(W.isFunction(s)?n.paramsSerializer={serialize:s}:bc.assertOptions(s,{encode:xr.function,serialize:xr.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),bc.assertOptions(n,{baseUrl:xr.spelling("baseURL"),withXsrfToken:xr.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&W.merge(i.common,i[n.method]);i&&W.forEach(["delete","get","head","post","put","patch","common"],v=>{delete i[v]}),n.headers=Nn.concat(o,i);const c=[];let u=!0;this.interceptors.request.forEach(function(N){typeof N.runWhen=="function"&&N.runWhen(n)===!1||(u=u&&N.synchronous,c.unshift(N.fulfilled,N.rejected))});const d=[];this.interceptors.response.forEach(function(N){d.push(N.fulfilled,N.rejected)});let f,p=0,g;if(!u){const v=[g0.bind(this),void 0];for(v.unshift(...c),v.push(...d),g=v.length,f=Promise.resolve(n);p<g;)f=f.then(v[p++],v[p++]);return f}g=c.length;let j=n;for(;p<g;){const v=c[p++],N=c[p++];try{j=v(j)}catch(R){N.call(this,R);break}}try{f=g0.call(this,j)}catch(v){return Promise.reject(v)}for(p=0,g=d.length;p<g;)f=f.then(d[p++],d[p++]);return f}getUri(e){e=pi(this.defaults,e);const n=Iv(e.baseURL,e.url,e.allowAbsoluteUrls);return _v(n,e.params,e.paramsSerializer)}};W.forEach(["delete","get","head","options"],function(e){oi.prototype[e]=function(n,r){return this.request(pi(r||{},{method:e,url:n,data:(r||{}).data}))}});W.forEach(["post","put","patch"],function(e){function n(r){return function(i,o,c){return this.request(pi(c||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}oi.prototype[e]=n(),oi.prototype[e+"Form"]=n(!0)});let l4=class Rv{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(c=>{r.subscribe(c),i=c}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,c){r.reason||(r.reason=new Io(i,o,c),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new Rv(function(s){e=s}),cancel:e}}};function c4(t){return function(n){return t.apply(null,n)}}function u4(t){return W.isObject(t)&&t.isAxiosError===!0}const ef={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(ef).forEach(([t,e])=>{ef[e]=t});function Av(t){const e=new oi(t),n=cv(oi.prototype.request,e);return W.extend(n,oi.prototype,e,{allOwnKeys:!0}),W.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return Av(pi(t,s))},n}const Z=Av(fl);Z.Axios=oi;Z.CanceledError=Io;Z.CancelToken=l4;Z.isCancel=Ev;Z.VERSION=Nv;Z.toFormData=Lu;Z.AxiosError=Fe;Z.Cancel=Z.CanceledError;Z.all=function(e){return Promise.all(e)};Z.spread=c4;Z.isAxiosError=u4;Z.mergeConfig=pi;Z.AxiosHeaders=Nn;Z.formToJSON=t=>bv(W.isHTMLForm(t)?new FormData(t):t);Z.getAdapter=Tv.getAdapter;Z.HttpStatusCode=ef;Z.default=Z;const{Axios:DT,AxiosError:MT,CanceledError:LT,isCancel:FT,CancelToken:zT,VERSION:BT,all:UT,Cancel:$T,isAxiosError:WT,spread:HT,toFormData:VT,AxiosHeaders:KT,HttpStatusCode:GT,formToJSON:qT,getAdapter:YT,mergeConfig:QT}=Z;var Py,Oy;const d4=((Oy=(Py=import.meta)==null?void 0:Py.env)==null?void 0:Oy.VITE_API_BASE)||"https://gojo-teacher-web.onrender.com/api",h4=async(t,e)=>{try{return(await Z.post(`${d4}/teacher_login`,{username:t,password:e})).data}catch(n){return console.error("Login error:",n.response?n.response.data:n.message),{success:!1,message:"Network error or server not reachable"}}};function zd(){const t=Fn(),[e,n]=y.useState(""),[r,s]=y.useState(""),[i,o]=y.useState(""),c=async u=>{u.preventDefault(),o("");const d=await h4(e,r);d.success?(localStorage.setItem("teacher",JSON.stringify(d.teacher)),t("/dashboard")):o(d.message||"Login failed")};return l.jsx("div",{className:"auth-container",children:l.jsxs("div",{className:"auth-box",children:[l.jsx("h2",{children:"Teacher Login"}),i&&l.jsx("p",{className:"auth-error",children:i}),l.jsxs("form",{onSubmit:c,children:[l.jsx("input",{type:"text",placeholder:"Username",value:e,onChange:u=>n(u.target.value),required:!0}),l.jsx("input",{type:"password",placeholder:"Password",value:r,onChange:u=>s(u.target.value),required:!0}),l.jsx("button",{type:"submit",className:"submit-btn",children:"Login"})]}),l.jsxs("p",{className:"auth-link",children:["Don't have an account? ",l.jsx(xe,{to:"/register",children:"Register Here"})]})]})})}function f4(){Fn();const t=["7","8","9","10","11 Social","11 Natural","12 Social","12 Natural"],e=["A","B","C"],n={7:["Mathematics","Amharic","English","Biology","Physics","Chemistry","Geography","History","Civics","ICT","Oromifa","Physical Education"],8:["Mathematics","Amharic","English","Biology","Physics","Chemistry","Geography","History","Civics","ICT","Oromifa","Physical Education"],9:["Mathematics","English","Biology","Physics","Chemistry","Geography","History","Civics","ICT","Physical Education"],10:["Mathematics","English","Biology","Physics","Chemistry","Geography","History","Civics","ICT","Physical Education"],"11 Social":["Mathematics","English","Physics","Chemistry","Biology","Economics","Geography","History"],"11 Natural":["Mathematics","English","Physics","Chemistry","Biology","Economics","Geography","History"],"12 Social":["Mathematics","English","Physics","Chemistry","Biology","Economics","Geography","History"],"12 Natural":["Mathematics","English","Physics","Chemistry","Biology","Economics","Geography","History"]},[r,s]=y.useState({name:"",password:"",email:"",phone:"",gender:"",courses:[{grade:"",section:"",subject:""}]}),[i,o]=y.useState(null),[c,u]=y.useState(""),[d,f]=y.useState(""),p=(w,_=null)=>{const{name:P,value:H}=w.target;if(_!==null){const X=[...r.courses];X[_][P]=H,P==="grade"&&(X[_].subject=""),s({...r,courses:X})}else s({...r,[P]:H})},g=()=>{s({...r,courses:[...r.courses,{grade:"",section:"",subject:""}]})},j=w=>{const _=r.courses.filter((P,H)=>H!==w);s({...r,courses:_})},v=()=>{const w=new Set;for(let _ of r.courses){if(!_.grade||!_.section||!_.subject)continue;const P=`${_.grade}${_.section}-${_.subject}`;if(w.has(P))return!0;w.add(P)}return!1},N=w=>w===""||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(w).toLowerCase()),R=w=>/^[0-9+()\-\s]{6,20}$/.test(String(w).trim()),b=async w=>{if(w.preventDefault(),u(""),f(""),!N(r.email)){u("Please enter a valid email address or leave it empty.");return}if(!R(r.phone)){u("Please enter a valid phone number.");return}if(!r.gender){u("Please select gender.");return}if(!r.name||!r.password){u("Name and password are required.");return}if(v()){u("Duplicate subject detected! A subject can only be taught once per grade and section.");return}try{const _=new FormData;_.append("name",r.name),_.append("password",r.password),_.append("email",r.email),_.append("phone",r.phone),_.append("gender",r.gender),_.append("courses",JSON.stringify(r.courses)),i&&_.append("profile",i);const H=await(await fetch("https://gojo-teacher-web.onrender.com/register/teacher",{method:"POST",body:_})).json();if(H.success){const X=H.teacherKey||H.teacherId||H.teacherKey||H.teacherId||"";f(X),s({name:"",password:"",email:"",phone:"",gender:"",courses:[{grade:"",section:"",subject:""}]}),o(null),u("Registration successful. Your teacherId (username) is shown below.")}else u(H.message||"Registration failed.")}catch(_){console.error("Registration error:",_),u("Server error. Check console.")}};return l.jsx("div",{className:"auth-container",children:l.jsxs("div",{className:"auth-box",style:{maxWidth:"600px"},children:[l.jsx("h2",{children:"Teacher Registration"}),c&&l.jsx("p",{className:"auth-error",children:c}),l.jsxs("form",{onSubmit:b,children:[l.jsx("input",{type:"text",name:"name",placeholder:"Full Name",value:r.name,onChange:p,required:!0}),l.jsx("input",{type:"email",name:"email",placeholder:"Email (optional)",value:r.email,onChange:p}),l.jsx("input",{type:"tel",name:"phone",placeholder:"Phone number",value:r.phone,onChange:p,required:!0}),l.jsxs("select",{name:"gender",value:r.gender,onChange:p,required:!0,children:[l.jsx("option",{value:"",children:"Select Gender"}),l.jsx("option",{value:"Male",children:"Male"}),l.jsx("option",{value:"Female",children:"Female"}),l.jsx("option",{value:"Other",children:"Other"}),l.jsx("option",{value:"Prefer not to say",children:"Prefer not to say"})]}),l.jsx("input",{type:"password",name:"password",placeholder:"Password",value:r.password,onChange:p,required:!0}),l.jsxs("div",{className:"profile-upload",children:[i&&l.jsx("img",{src:URL.createObjectURL(i),alt:"Profile Preview",className:"profile-preview"}),l.jsx("input",{type:"file",accept:"image/*",onChange:w=>o(w.target.files[0])})]}),l.jsx("h3",{children:"Courses"}),r.courses.map((w,_)=>l.jsxs("div",{className:"course-group",children:[l.jsxs("select",{name:"grade",value:w.grade,onChange:P=>p(P,_),required:!0,children:[l.jsx("option",{value:"",children:"Select Grade"}),t.map(P=>l.jsx("option",{value:P,children:P},P))]}),l.jsxs("select",{name:"section",value:w.section,onChange:P=>p(P,_),required:!0,children:[l.jsx("option",{value:"",children:"Select Section"}),e.map(P=>l.jsx("option",{value:P,children:P},P))]}),l.jsxs("select",{name:"subject",value:w.subject,onChange:P=>p(P,_),required:!0,disabled:!w.grade,children:[l.jsx("option",{value:"",children:"Select Subject"}),w.grade&&n[w.grade].map(P=>l.jsx("option",{value:P,children:P},P))]}),r.courses.length>1&&l.jsx("button",{type:"button",className:"remove-btn",onClick:()=>j(_),children:"Remove"})]},_)),l.jsx("button",{type:"button",className:"add-btn",onClick:g,children:"Add Course"}),l.jsx("button",{type:"submit",className:"submit-btn",children:"Register"})]}),d&&l.jsxs("div",{className:"auth-success",style:{marginTop:12},children:[l.jsxs("p",{children:["Registration complete. Your teacherId (username) is:"," ",l.jsx("strong",{children:d})]}),l.jsxs("p",{children:["Use this ID to log in: ",l.jsx(xe,{to:"/login",children:"Go to Login"})]})]}),l.jsxs("p",{className:"auth-link",children:["Already have an account? ",l.jsx(xe,{to:"/login",children:"Go to Login"})]})]})})}var Pv={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},x0=mn.createContext&&mn.createContext(Pv),p4=["attr","size","title"];function m4(t,e){if(t==null)return{};var n=g4(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function g4(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Xc(){return Xc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xc.apply(this,arguments)}function v0(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Zc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?v0(Object(n),!0).forEach(function(r){y4(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v0(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function y4(t,e,n){return e=x4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function x4(t){var e=v4(t,"string");return typeof e=="symbol"?e:e+""}function v4(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ov(t){return t&&t.map((e,n)=>mn.createElement(e.tag,Zc({key:n},e.attr),Ov(e.child)))}function jt(t){return e=>mn.createElement(w4,Xc({attr:Zc({},t.attr)},e),Ov(t.child))}function w4(t){var e=n=>{var{attr:r,size:s,title:i}=t,o=m4(t,p4),c=s||n.size||"1em",u;return n.className&&(u=n.className),t.className&&(u=(u?u+" ":"")+t.className),mn.createElement("svg",Xc({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:u,style:Zc(Zc({color:t.color||n.color},n.style),t.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),i&&mn.createElement("title",null,i),t.children)};return x0!==void 0?mn.createElement(x0.Consumer,null,n=>e(n)):e(Pv)}function Bs(t){return jt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256.55 8C116.52 8 8 110.34 8 248.57c0 72.3 29.71 134.78 78.07 177.94 8.35 7.51 6.63 11.86 8.05 58.23A19.92 19.92 0 0 0 122 502.31c52.91-23.3 53.59-25.14 62.56-22.7C337.85 521.8 504 423.7 504 248.57 504 110.34 396.59 8 256.55 8zm149.24 185.13l-73 115.57a37.37 37.37 0 0 1-53.91 9.93l-58.08-43.47a15 15 0 0 0-18 0l-78.37 59.44c-10.46 7.93-24.16-4.6-17.11-15.67l73-115.57a37.36 37.36 0 0 1 53.91-9.93l58.06 43.46a15 15 0 0 0 18 0l78.41-59.38c10.44-7.98 24.14 4.54 17.09 15.62z"},child:[]}]})(t)}function _4(t){return jt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(t)}function Us(t){return jt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(t)}function Jr(t){return jt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M208 352c-2.39 0-4.78.35-7.06 1.09C187.98 357.3 174.35 360 160 360c-14.35 0-27.98-2.7-40.95-6.91-2.28-.74-4.66-1.09-7.05-1.09C49.94 352-.33 402.48 0 464.62.14 490.88 21.73 512 48 512h224c26.27 0 47.86-21.12 48-47.38.33-62.14-49.94-112.62-112-112.62zm-48-32c53.02 0 96-42.98 96-96s-42.98-96-96-96-96 42.98-96 96 42.98 96 96 96zM592 0H208c-26.47 0-48 22.25-48 49.59V96c23.42 0 45.1 6.78 64 17.8V64h352v288h-64v-64H384v64h-76.24c19.1 16.69 33.12 38.73 39.69 64H592c26.47 0 48-22.25 48-49.59V49.59C640 22.25 618.47 0 592 0z"},child:[]}]})(t)}function uo(t){return jt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(t)}function S4(t){return jt({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(t)}function Rs(t){return jt({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(t)}function Ir(t){return jt({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM192 40c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm121.2 231.8l-143 141.8c-4.7 4.7-12.3 4.6-17-.1l-82.6-83.3c-4.7-4.7-4.6-12.3.1-17L99.1 285c4.7-4.7 12.3-4.6 17 .1l46 46.4 106-105.2c4.7-4.7 12.3-4.6 17 .1l28.2 28.4c4.7 4.8 4.6 12.3-.1 17z"},child:[]}]})(t)}function jr(t){return jt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(t)}function Cp(t){return jt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 32C114.6 32 0 125.1 0 240c0 49.6 21.4 95 57 130.7C44.5 421.1 2.7 466 2.2 466.5c-2.2 2.3-2.8 5.7-1.5 8.7S4.8 480 8 480c66.3 0 116-31.8 140.6-51.4 32.7 12.3 69 19.4 107.4 19.4 141.4 0 256-93.1 256-208S397.4 32 256 32zM128 272c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 0c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 0c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"},child:[]}]})(t)}function b4(t){return jt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(t)}function E4(t){return jt({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm60.1 106.5L224 336l60.1 93.5c5.1 8-.6 18.5-10.1 18.5h-34.9c-4.4 0-8.5-2.4-10.6-6.3C208.9 405.5 192 373 192 373c-6.4 14.8-10 20-36.6 68.8-2.1 3.9-6.1 6.3-10.5 6.3H110c-9.5 0-15.2-10.5-10.1-18.5l60.3-93.5-60.3-93.5c-5.2-8 .6-18.5 10.1-18.5h34.8c4.4 0 8.5 2.4 10.6 6.3 26.1 48.8 20 33.6 36.6 68.5 0 0 6.1-11.7 36.6-68.5 2.1-3.9 6.2-6.3 10.6-6.3H274c9.5-.1 15.2 10.4 10.1 18.4zM384 121.9v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"},child:[]}]})(t)}function C4(t){return jt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"},child:[]}]})(t)}function Xr(t){return jt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(t)}function Dv(t){return jt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"},child:[]}]})(t)}function I4(t){return jt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(t)}function w0(t){return jt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"},child:[]}]})(t)}function j4(t){return jt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(t)}function Zr(t){return jt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}function k4(t){return jt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(t)}function T4(t){return jt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M296 384h-80c-13.3 0-24-10.7-24-24V192h-87.7c-17.8 0-26.7-21.5-14.1-34.1L242.3 5.7c7.5-7.5 19.8-7.5 27.3 0l152.2 152.2c12.6 12.6 3.7 34.1-14.1 34.1H320v168c0 13.3-10.7 24-24 24zm216-8v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h136v8c0 30.9 25.1 56 56 56h80c30.9 0 56-25.1 56-56v-8h136c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(t)}function Ke(t){return jt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(t)}function N4(t){return jt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M458.4 64.3C400.6 15.7 311.3 23 256 79.3 200.7 23 111.4 15.6 53.6 64.3-21.6 127.6-10.6 230.8 43 285.5l175.4 178.7c10 10.2 23.4 15.9 37.6 15.9 14.3 0 27.6-5.6 37.6-15.8L469 285.6c53.5-54.7 64.7-157.9-10.6-221.3zm-23.6 187.5L259.4 430.5c-2.4 2.4-4.4 2.4-6.8 0L77.2 251.8c-36.5-37.2-43.9-107.6 7.3-150.7 38.9-32.7 98.9-27.8 136.5 10.5l35 35.7 35-35.7c37.8-38.5 97.8-43.2 136.5-10.6 51.1 43.1 43.5 113.9 7.3 150.8z"},child:[]}]})(t)}const R4=()=>{};var _0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue=function(t,e){if(!t)throw jo(e)},jo=function(t){return new Error("Firebase Database ("+Mv.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},A4=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Ip={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,f=i>>2,p=(i&3)<<4|c>>4;let g=(c&15)<<2|d>>6,j=d&63;u||(j=64,o||(g=64)),r.push(n[f],n[p],n[g],n[j])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Lv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):A4(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||d==null||p==null)throw new P4;const g=i<<2|c>>4;if(r.push(g),d!==64){const j=c<<4&240|d>>2;if(r.push(j),p!==64){const v=d<<6&192|p;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class P4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Fv=function(t){const e=Lv(t);return Ip.encodeByteArray(e,!0)},eu=function(t){return Fv(t).replace(/\./g,"")},tf=function(t){try{return Ip.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O4(t){return zv(void 0,t)}function zv(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!D4(n)||(t[n]=zv(t[n],e[n]));return t}function D4(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4=()=>M4().__FIREBASE_DEFAULTS__,F4=()=>{if(typeof process>"u"||typeof _0>"u")return;const t=_0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},z4=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&tf(t[1]);return e&&JSON.parse(e)},Bv=()=>{try{return R4()||L4()||F4()||z4()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},B4=t=>{var e,n;return(n=(e=Bv())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},Uv=t=>{const e=B4(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},$v=()=>{var t;return(t=Bv())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Wv(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[eu(JSON.stringify(n)),eu(JSON.stringify(o)),""].join(".")}const pa={};function U4(){const t={prod:[],emulator:[]};for(const e of Object.keys(pa))pa[e]?t.emulator.push(e):t.prod.push(e);return t}function $4(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let S0=!1;function Vv(t,e){if(typeof window>"u"||typeof document>"u"||!zu(window.location.host)||pa[t]===e||pa[t]||S0)return;pa[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=U4().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function c(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,j){g.setAttribute("width","24"),g.setAttribute("id",j),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{S0=!0,o()},g}function f(g,j){g.setAttribute("id",j),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=$4(r),j=n("text"),v=document.getElementById(j)||document.createElement("span"),N=n("learnmore"),R=document.getElementById(N)||document.createElement("a"),b=n("preprendIcon"),w=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const _=g.element;c(_),f(R,N);const P=d();u(w,b),_.append(w,v,R,P),document.body.appendChild(_)}i?(v.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",j)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W4(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Kv(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(W4())}function H4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function V4(){return Mv.NODE_ADMIN===!0}function K4(){try{return typeof indexedDB=="object"}catch{return!1}}function G4(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q4="FirebaseError";class ko extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=q4,Object.setPrototypeOf(this,ko.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gv.prototype.create)}}class Gv{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Y4(i,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new ko(s,c,r)}}function Y4(t,e){return t.replace(Q4,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Q4=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ua(t){return JSON.parse(t)}function $t(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=Ua(tf(i[0])||""),n=Ua(tf(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},J4=function(t){const e=qv(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},X4=function(t){const e=qv(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ho(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function b0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function tu(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function $a(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(E0(i)&&E0(o)){if(!$a(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function E0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z4(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let p=0;p<16;p++)r[p]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let p=0;p<16;p++)r[p]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let p=16;p<80;p++){const g=r[p-3]^r[p-8]^r[p-14]^r[p-16];r[p]=(g<<1|g>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],c=this.chain_[3],u=this.chain_[4],d,f;for(let p=0;p<80;p++){p<40?p<20?(d=c^i&(o^c),f=1518500249):(d=i^o^c,f=1859775393):p<60?(d=i&o|c&(i|o),f=2400959708):(d=i^o^c,f=3395469782);const g=(s<<5|s>>>27)+d+u+f+r[p]&4294967295;u=c,c=o,o=(i<<30|i>>>2)&4294967295,i=s,s=g}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function Bu(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,ue(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Uu=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(t){return t&&t._delegate?t._delegate:t}class fo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new pl;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sI(e))try{this.getOrInitializeService({instanceIdentifier:Ys})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ys){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ys){return this.instances.has(e)}getOptions(e=Ys){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:rI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ys){return this.component?this.component.multipleInstances?e:Ys:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rI(t){return t===Ys?void 0:t}function sI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new nI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ot||(ot={}));const oI={debug:ot.DEBUG,verbose:ot.VERBOSE,info:ot.INFO,warn:ot.WARN,error:ot.ERROR,silent:ot.SILENT},aI=ot.INFO,lI={[ot.DEBUG]:"log",[ot.VERBOSE]:"log",[ot.INFO]:"info",[ot.WARN]:"warn",[ot.ERROR]:"error"},cI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=lI[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class jp{constructor(e){this.name=e,this._logLevel=aI,this._logHandler=cI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ot))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?oI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ot.DEBUG,...e),this._logHandler(this,ot.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ot.VERBOSE,...e),this._logHandler(this,ot.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ot.INFO,...e),this._logHandler(this,ot.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ot.WARN,...e),this._logHandler(this,ot.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ot.ERROR,...e),this._logHandler(this,ot.ERROR,...e)}}const uI=(t,e)=>e.some(n=>t instanceof n);let C0,I0;function dI(){return C0||(C0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hI(){return I0||(I0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Yv=new WeakMap,nf=new WeakMap,Qv=new WeakMap,Bd=new WeakMap,kp=new WeakMap;function fI(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Es(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Yv.set(n,t)}).catch(()=>{}),kp.set(e,t),e}function pI(t){if(nf.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});nf.set(t,e)}let rf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return nf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Qv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Es(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function mI(t){rf=t(rf)}function gI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ud(this),e,...n);return Qv.set(r,e.sort?e.sort():[e]),Es(r)}:hI().includes(t)?function(...e){return t.apply(Ud(this),e),Es(Yv.get(this))}:function(...e){return Es(t.apply(Ud(this),e))}}function yI(t){return typeof t=="function"?gI(t):(t instanceof IDBTransaction&&pI(t),uI(t,dI())?new Proxy(t,rf):t)}function Es(t){if(t instanceof IDBRequest)return fI(t);if(Bd.has(t))return Bd.get(t);const e=yI(t);return e!==t&&(Bd.set(t,e),kp.set(e,t)),e}const Ud=t=>kp.get(t);function xI(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=Es(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Es(o.result),u.oldVersion,u.newVersion,Es(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const vI=["get","getKey","getAll","getAllKeys","count"],wI=["put","add","delete","clear"],$d=new Map;function j0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if($d.get(e))return $d.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=wI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||vI.includes(n)))return;const i=async function(o,...c){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return $d.set(e,i),i}mI(t=>({...t,get:(e,n,r)=>j0(e,n)||t.get(e,n,r),has:(e,n)=>!!j0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(SI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function SI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const sf="@firebase/app",k0="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr=new jp("@firebase/app"),bI="@firebase/app-compat",EI="@firebase/analytics-compat",CI="@firebase/analytics",II="@firebase/app-check-compat",jI="@firebase/app-check",kI="@firebase/auth",TI="@firebase/auth-compat",NI="@firebase/database",RI="@firebase/data-connect",AI="@firebase/database-compat",PI="@firebase/functions",OI="@firebase/functions-compat",DI="@firebase/installations",MI="@firebase/installations-compat",LI="@firebase/messaging",FI="@firebase/messaging-compat",zI="@firebase/performance",BI="@firebase/performance-compat",UI="@firebase/remote-config",$I="@firebase/remote-config-compat",WI="@firebase/storage",HI="@firebase/storage-compat",VI="@firebase/firestore",KI="@firebase/ai",GI="@firebase/firestore-compat",qI="firebase",YI="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const of="[DEFAULT]",QI={[sf]:"fire-core",[bI]:"fire-core-compat",[CI]:"fire-analytics",[EI]:"fire-analytics-compat",[jI]:"fire-app-check",[II]:"fire-app-check-compat",[kI]:"fire-auth",[TI]:"fire-auth-compat",[NI]:"fire-rtdb",[RI]:"fire-data-connect",[AI]:"fire-rtdb-compat",[PI]:"fire-fn",[OI]:"fire-fn-compat",[DI]:"fire-iid",[MI]:"fire-iid-compat",[LI]:"fire-fcm",[FI]:"fire-fcm-compat",[zI]:"fire-perf",[BI]:"fire-perf-compat",[UI]:"fire-rc",[$I]:"fire-rc-compat",[WI]:"fire-gcs",[HI]:"fire-gcs-compat",[VI]:"fire-fst",[GI]:"fire-fst-compat",[KI]:"fire-vertex","fire-js":"fire-js",[qI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wa=new Map,JI=new Map,af=new Map;function T0(t,e){try{t.container.addComponent(e)}catch(n){Gr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ha(t){const e=t.name;if(af.has(e))return Gr.debug(`There were multiple attempts to register component ${e}.`),!1;af.set(e,t);for(const n of Wa.values())T0(n,t);for(const n of JI.values())T0(n,t);return!0}function Jv(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Xv(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Cs=new Gv("app","Firebase",XI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new fo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Cs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv=YI;function ew(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:of,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Cs.create("bad-app-name",{appName:String(s)});if(n||(n=$v()),!n)throw Cs.create("no-options");const i=Wa.get(s);if(i){if($a(n,i.options)&&$a(r,i.config))return i;throw Cs.create("duplicate-app",{appName:s})}const o=new iI(s);for(const u of af.values())o.addComponent(u);const c=new ZI(n,r,o);return Wa.set(s,c),c}function tw(t=of){const e=Wa.get(t);if(!e&&t===of&&$v())return ew();if(!e)throw Cs.create("no-app",{appName:t});return e}function N0(){return Array.from(Wa.values())}function Is(t,e,n){let r=QI[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Gr.warn(o.join(" "));return}Ha(new fo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ej="firebase-heartbeat-database",tj=1,Va="firebase-heartbeat-store";let Wd=null;function nw(){return Wd||(Wd=xI(ej,tj,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Va)}catch(n){console.warn(n)}}}}).catch(t=>{throw Cs.create("idb-open",{originalErrorMessage:t.message})})),Wd}async function nj(t){try{const n=(await nw()).transaction(Va),r=await n.objectStore(Va).get(rw(t));return await n.done,r}catch(e){if(e instanceof ko)Gr.warn(e.message);else{const n=Cs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Gr.warn(n.message)}}}async function R0(t,e){try{const r=(await nw()).transaction(Va,"readwrite");await r.objectStore(Va).put(e,rw(t)),await r.done}catch(n){if(n instanceof ko)Gr.warn(n.message);else{const r=Cs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Gr.warn(r.message)}}}function rw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rj=1024,sj=30;class ij{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new aj(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=A0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>sj){const o=lj(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Gr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=A0(),{heartbeatsToSend:r,unsentEntries:s}=oj(this._heartbeatsCache.heartbeats),i=eu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Gr.warn(n),""}}}function A0(){return new Date().toISOString().substring(0,10)}function oj(t,e=rj){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),P0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),P0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class aj{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return K4()?G4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await nj(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return R0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return R0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function P0(t){return eu(JSON.stringify({version:2,heartbeats:t})).length}function lj(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cj(t){Ha(new fo("platform-logger",e=>new _I(e),"PRIVATE")),Ha(new fo("heartbeat",e=>new ij(e),"PRIVATE")),Is(sf,k0,t),Is(sf,k0,"esm2020"),Is("fire-js","")}cj("");var uj="firebase",dj="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Is(uj,dj,"app");var O0={};const D0="@firebase/database",M0="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sw="";function hj(t){sw=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),$t(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Ua(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return kr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new fj(e)}}catch{}return new pj},ni=iw("localStorage"),mj=iw("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi=new jp("@firebase/database"),gj=function(){let t=1;return function(){return t++}}(),ow=function(t){const e=tI(t),n=new eI;n.update(e);const r=n.digest();return Ip.encodeByteArray(r)},ml=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=ml.apply(null,r):typeof r=="object"?e+=$t(r):e+=r,e+=" "}return e};let ma=null,L0=!0;const yj=function(t,e){ue(!0,"Can't turn on custom loggers persistently."),Xi.logLevel=ot.VERBOSE,ma=Xi.log.bind(Xi)},tn=function(...t){if(L0===!0&&(L0=!1,ma===null&&mj.get("logging_enabled")===!0&&yj()),ma){const e=ml.apply(null,t);ma(e)}},gl=function(t){return function(...e){tn(t,...e)}},lf=function(...t){const e="FIREBASE INTERNAL ERROR: "+ml(...t);Xi.error(e)},qr=function(...t){const e=`FIREBASE FATAL ERROR: ${ml(...t)}`;throw Xi.error(e),new Error(e)},xn=function(...t){const e="FIREBASE WARNING: "+ml(...t);Xi.warn(e)},xj=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&xn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Tp=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},vj=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},po="[MIN_NAME]",mi="[MAX_NAME]",Si=function(t,e){if(t===e)return 0;if(t===po||e===mi)return-1;if(e===po||t===mi)return 1;{const n=F0(t),r=F0(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},wj=function(t,e){return t===e?0:t<e?-1:1},Qo=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+$t(e))},Np=function(t){if(typeof t!="object"||t===null)return $t(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=$t(e[r]),n+=":",n+=Np(t[e[r]]);return n+="}",n},aw=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function sn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const lw=function(t){ue(!Tp(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,c,u;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(c=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=c+r,o=Math.round(t*Math.pow(2,n-c)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const d=[];for(u=n;u;u-=1)d.push(o%2?1:0),o=Math.floor(o/2);for(u=e;u;u-=1)d.push(i%2?1:0),i=Math.floor(i/2);d.push(s?1:0),d.reverse();const f=d.join("");let p="";for(u=0;u<64;u+=8){let g=parseInt(f.substr(u,8),2).toString(16);g.length===1&&(g="0"+g),p=p+g}return p.toLowerCase()},_j=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Sj=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function bj(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const Ej=new RegExp("^-?(0*)\\d{1,10}$"),Cj=-2147483648,Ij=2147483647,F0=function(t){if(Ej.test(t)){const e=Number(t);if(e>=Cj&&e<=Ij)return e}return null},To=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw xn("Exception was thrown by user callback.",n),e},Math.floor(0))}},jj=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ga=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,Xv(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)==null||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){xn(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(tn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',xn(e)}}class Ec{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Ec.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rp="5",cw="v",uw="s",dw="r",hw="f",fw=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,pw="ls",mw="p",cf="ac",gw="websocket",yw="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(e,n,r,s,i=!1,o="",c=!1,u=!1,d=null){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=c,this.isUsingEmulator=u,this.emulatorOptions=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ni.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ni.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Nj(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function vw(t,e,n){ue(typeof e=="string","typeof type must == string"),ue(typeof n=="object","typeof params must == object");let r;if(e===gw)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===yw)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Nj(t)&&(n.ns=t.namespace);const s=[];return sn(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(){this.counters_={}}incrementCounter(e,n=1){kr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return O4(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd={},Vd={};function Ap(t){const e=t.toString();return Hd[e]||(Hd[e]=new Rj),Hd[e]}function Aj(t,e){const n=t.toString();return Vd[n]||(Vd[n]=e()),Vd[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&To(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0="start",Oj="close",Dj="pLPCommand",Mj="pRTLPCB",ww="id",_w="pw",Sw="ser",Lj="cb",Fj="seg",zj="ts",Bj="d",Uj="dframe",bw=1870,Ew=30,$j=bw-Ew,Wj=25e3,Hj=3e4;class Vi{constructor(e,n,r,s,i,o,c){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=gl(e),this.stats_=Ap(n),this.urlFn=u=>(this.appCheckToken&&(u[cf]=this.appCheckToken),vw(n,yw,u))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Pj(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Hj)),vj(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Pp((...i)=>{const[o,c,u,d,f]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===z0)this.id=c,this.password=u;else if(o===Oj)c?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(c,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,c]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,c)},()=>{this.onClosed_()},this.urlFn);const r={};r[z0]="t",r[Sw]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Lj]=this.scriptTagHolder.uniqueCallbackIdentifier),r[cw]=Rp,this.transportSessionId&&(r[uw]=this.transportSessionId),this.lastSessionId&&(r[pw]=this.lastSessionId),this.applicationId&&(r[mw]=this.applicationId),this.appCheckToken&&(r[cf]=this.appCheckToken),typeof location<"u"&&location.hostname&&fw.test(location.hostname)&&(r[dw]=hw);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Vi.forceAllow_=!0}static forceDisallow(){Vi.forceDisallow_=!0}static isAvailable(){return Vi.forceAllow_?!0:!Vi.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!_j()&&!Sj()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=$t(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Fv(n),s=aw(r,$j);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[Uj]="t",r[ww]=e,r[_w]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=$t(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Pp{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=gj(),window[Dj+this.uniqueCallbackIdentifier]=e,window[Mj+this.uniqueCallbackIdentifier]=n,this.myIFrame=Pp.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(c){tn("frame writing exception"),c.stack&&tn(c.stack),tn(c)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||tn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[ww]=this.myID,e[_w]=this.myPW,e[Sw]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Ew+r.length<=bw;){const o=this.pendingSegs.shift();r=r+"&"+Fj+s+"="+o.seg+"&"+zj+s+"="+o.ts+"&"+Bj+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(Wj)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{tn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vj=16384,Kj=45e3;let nu=null;typeof MozWebSocket<"u"?nu=MozWebSocket:typeof WebSocket<"u"&&(nu=WebSocket);class rr{constructor(e,n,r,s,i,o,c){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=gl(this.connId),this.stats_=Ap(n),this.connURL=rr.connectionURL_(n,o,c,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[cw]=Rp,typeof location<"u"&&location.hostname&&fw.test(location.hostname)&&(o[dw]=hw),n&&(o[uw]=n),r&&(o[pw]=r),s&&(o[cf]=s),i&&(o[mw]=i),vw(e,gw,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ni.set("previous_websocket_failure",!0);try{let r;V4(),this.mySock=new nu(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){rr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&nu!==null&&!rr.forceDisallow_}static previouslyFailed(){return ni.isInMemoryStorage||ni.get("previous_websocket_failure")===!0}markConnectionHealthy(){ni.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Ua(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ue(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=$t(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=aw(n,Vj);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Kj))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}rr.responsesRequiredToBeHealthy=2;rr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{static get ALL_TRANSPORTS(){return[Vi,rr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=rr&&rr.isAvailable();let r=n&&!rr.previouslyFailed();if(e.webSocketOnly&&(n||xn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[rr];else{const s=this.transports_=[];for(const i of Ka.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);Ka.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Ka.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gj=6e4,qj=5e3,Yj=10*1024,Qj=100*1024,Kd="t",B0="d",Jj="s",U0="r",Xj="e",$0="o",W0="a",H0="n",V0="p",Zj="h";class ek{constructor(e,n,r,s,i,o,c,u,d,f){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=c,this.onDisconnect_=u,this.onKill_=d,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=gl("c:"+this.id+":"),this.transportManager_=new Ka(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=ga(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Qj?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Yj?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Kd in e){const n=e[Kd];n===W0?this.upgradeIfSecondaryHealthy_():n===U0?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===$0&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Qo("t",e),r=Qo("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:V0,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:W0,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:H0,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Qo("t",e),r=Qo("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Qo(Kd,e);if(B0 in e){const r=e[B0];if(n===Zj){const s={...r};this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===H0){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Jj?this.onConnectionShutdown_(r):n===U0?this.onReset_(r):n===Xj?lf("Server Error: "+r):n===$0?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):lf("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Rp!==r&&xn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),ga(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Gj))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ga(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(qj))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:V0,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ni.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(e){this.allowedEvents_=e,this.listeners_={},ue(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){ue(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru extends Iw{static getInstance(){return new ru}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Kv()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return ue(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0=32,G0=768;class ct{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function rt(){return new ct("")}function $e(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function As(t){return t.pieces_.length-t.pieceNum_}function ft(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ct(t.pieces_,e)}function Op(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function tk(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Ga(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function jw(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ct(e,0)}function Rt(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof ct)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new ct(n,0)}function Ve(t){return t.pieceNum_>=t.pieces_.length}function gn(t,e){const n=$e(t),r=$e(e);if(n===null)return e;if(n===r)return gn(ft(t),ft(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function nk(t,e){const n=Ga(t,0),r=Ga(e,0);for(let s=0;s<n.length&&s<r.length;s++){const i=Si(n[s],r[s]);if(i!==0)return i}return n.length===r.length?0:n.length<r.length?-1:1}function Dp(t,e){if(As(t)!==As(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Vn(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(As(t)>As(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class rk{constructor(e,n){this.errorPrefix_=n,this.parts_=Ga(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Uu(this.parts_[r]);kw(this)}}function sk(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Uu(e),kw(t)}function ik(t){const e=t.parts_.pop();t.byteLength_-=Uu(e),t.parts_.length>0&&(t.byteLength_-=1)}function kw(t){if(t.byteLength_>G0)throw new Error(t.errorPrefix_+"has a key path longer than "+G0+" bytes ("+t.byteLength_+").");if(t.parts_.length>K0)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+K0+") or object contains a cycle "+Qs(t))}function Qs(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp extends Iw{static getInstance(){return new Mp}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return ue(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo=1e3,ok=60*5*1e3,q0=30*1e3,ak=1.3,lk=3e4,ck="server_kill",Y0=3;class Ur extends Cw{constructor(e,n,r,s,i,o,c,u){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=c,this.authOverride_=u,this.id=Ur.nextPersistentConnectionId_++,this.log_=gl("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Jo,this.maxReconnectDelay_=ok,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Mp.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&ru.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_($t(i)),ue(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new pl,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const c=o.d;o.s==="ok"?n.resolve(c):n.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),ue(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ue(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const c={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,c),this.connected_&&this.sendListen_(c)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,c=>{const u=c.d,d=c.s;Ur.warnOnListenWarnings_(u,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",c),d!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(d,u))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&kr(e,"w")){const r=ho(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();xn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||X4(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=q0)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=J4(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),ue(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+$t(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):lf("Unrecognized action received from server: "+$t(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ue(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Jo,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Jo,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>lk&&(this.reconnectDelay_=Jo),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*ak)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Ur.nextConnectionId_++,i=this.lastSessionId;let o=!1,c=null;const u=function(){c?c.close():(o=!0,r())},d=function(p){ue(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(p)};this.realtime_={close:u,sendRequest:d};const f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[p,g]=await Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);o?tn("getToken() completed but was canceled"):(tn("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=g&&g.token,c=new ek(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,j=>{xn(j+" ("+this.repoInfo_.toString()+")"),this.interrupt(ck)},i))}catch(p){this.log_("Failed to get token: "+p),o||(this.repoInfo_.nodeAdmin&&xn(p),u())}}}interrupt(e){tn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){tn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],b0(this.interruptReasons_)&&(this.reconnectDelay_=Jo,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>Np(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new ct(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){tn("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Y0&&(this.reconnectDelay_=q0,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){tn("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Y0&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+sw.replace(/\./g,"-")]=1,Kv()?e["framework.cordova"]=1:H4()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=ru.getInstance().currentlyOnline();return b0(this.interruptReasons_)&&e}}Ur.nextPersistentConnectionId_=0;Ur.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new We(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new We(po,e),s=new We(po,n);return this.compare(r,s)!==0}minPost(){return We.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nc;class Tw extends $u{static get __EMPTY_NODE(){return nc}static set __EMPTY_NODE(e){nc=e}compare(e,n){return Si(e.name,n.name)}isDefinedOn(e){throw jo("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return We.MIN}maxPost(){return new We(mi,nc)}makePost(e,n){return ue(typeof e=="string","KeyIndex indexValue must always be a string."),new We(e,nc)}toString(){return".key"}}const Zi=new Tw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class qt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??qt.RED,this.left=s??Cn.EMPTY_NODE,this.right=i??Cn.EMPTY_NODE}copy(e,n,r,s,i){return new qt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Cn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Cn.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}qt.RED=!0;qt.BLACK=!1;class uk{copy(e,n,r,s,i){return this}insert(e,n,r){return new qt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Cn{constructor(e,n=Cn.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Cn(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,qt.BLACK,null,null))}remove(e){return new Cn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,qt.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new rc(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new rc(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new rc(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new rc(this.root_,null,this.comparator_,!0,e)}}Cn.EMPTY_NODE=new uk;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dk(t,e){return Si(t.name,e.name)}function Lp(t,e){return Si(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uf;function hk(t){uf=t}const Nw=function(t){return typeof t=="number"?"number:"+lw(t):"string:"+t},Rw=function(t){if(t.isLeafNode()){const e=t.val();ue(typeof e=="string"||typeof e=="number"||typeof e=="object"&&kr(e,".sv"),"Priority must be a string or number.")}else ue(t===uf||t.isEmpty(),"priority of unexpected type.");ue(t===uf||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Q0;class Kt{static set __childrenNodeConstructor(e){Q0=e}static get __childrenNodeConstructor(){return Q0}constructor(e,n=Kt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,ue(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Rw(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Kt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Kt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ve(e)?this:$e(e)===".priority"?this.priorityNode_:Kt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Kt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=$e(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(ue(r!==".priority"||As(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Kt.__childrenNodeConstructor.EMPTY_NODE.updateChild(ft(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Nw(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=lw(this.value_):e+=this.value_,this.lazyHash_=ow(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Kt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Kt.__childrenNodeConstructor?-1:(ue(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=Kt.VALUE_TYPE_ORDER.indexOf(n),i=Kt.VALUE_TYPE_ORDER.indexOf(r);return ue(s>=0,"Unknown leaf type: "+n),ue(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Kt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Aw,Pw;function fk(t){Aw=t}function pk(t){Pw=t}class mk extends $u{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?Si(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return We.MIN}maxPost(){return new We(mi,new Kt("[PRIORITY-POST]",Pw))}makePost(e,n){const r=Aw(e);return new We(n,new Kt("[PRIORITY-POST]",r))}toString(){return".priority"}}const At=new mk;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk=Math.log(2);class yk{constructor(e){const n=i=>parseInt(Math.log(i)/gk,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const su=function(t,e,n,r){t.sort(e);const s=function(u,d){const f=d-u;let p,g;if(f===0)return null;if(f===1)return p=t[u],g=n?n(p):p,new qt(g,p.node,qt.BLACK,null,null);{const j=parseInt(f/2,10)+u,v=s(u,j),N=s(j+1,d);return p=t[j],g=n?n(p):p,new qt(g,p.node,qt.BLACK,v,N)}},i=function(u){let d=null,f=null,p=t.length;const g=function(v,N){const R=p-v,b=p;p-=v;const w=s(R+1,b),_=t[R],P=n?n(_):_;j(new qt(P,_.node,N,null,w))},j=function(v){d?(d.left=v,d=v):(f=v,d=v)};for(let v=0;v<u.count;++v){const N=u.nextBitIsOne(),R=Math.pow(2,u.count-(v+1));N?g(R,qt.BLACK):(g(R,qt.BLACK),g(R,qt.RED))}return f},o=new yk(t.length),c=i(o);return new Cn(r||e,c)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gd;const Ni={};class Fr{static get Default(){return ue(Ni&&At,"ChildrenNode.ts has not been loaded"),Gd=Gd||new Fr({".priority":Ni},{".priority":At}),Gd}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=ho(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Cn?n:null}hasIndex(e){return kr(this.indexSet_,e.toString())}addIndex(e,n){ue(e!==Zi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(We.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let c;s?c=su(r,e.getCompare()):c=Ni;const u=e.toString(),d={...this.indexSet_};d[u]=e;const f={...this.indexes_};return f[u]=c,new Fr(f,d)}addToIndexes(e,n){const r=tu(this.indexes_,(s,i)=>{const o=ho(this.indexSet_,i);if(ue(o,"Missing index implementation for "+i),s===Ni)if(o.isDefinedOn(e.node)){const c=[],u=n.getIterator(We.Wrap);let d=u.getNext();for(;d;)d.name!==e.name&&c.push(d),d=u.getNext();return c.push(e),su(c,o.getCompare())}else return Ni;else{const c=n.get(e.name);let u=s;return c&&(u=u.remove(new We(e.name,c))),u.insert(e,e.node)}});return new Fr(r,this.indexSet_)}removeFromIndexes(e,n){const r=tu(this.indexes_,s=>{if(s===Ni)return s;{const i=n.get(e.name);return i?s.remove(new We(e.name,i)):s}});return new Fr(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xo;class Ae{static get EMPTY_NODE(){return Xo||(Xo=new Ae(new Cn(Lp),null,Fr.Default))}constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Rw(this.priorityNode_),this.children_.isEmpty()&&ue(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Xo}updatePriority(e){return this.children_.isEmpty()?this:new Ae(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Xo:n}}getChild(e){const n=$e(e);return n===null?this:this.getImmediateChild(n).getChild(ft(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(ue(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new We(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?Xo:this.priorityNode_;return new Ae(s,o,i)}}updateChild(e,n){const r=$e(e);if(r===null)return n;{ue($e(e)!==".priority"||As(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(ft(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(At,(o,c)=>{n[o]=c.val(e),r++,i&&Ae.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const c in n)o[c]=n[c];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Nw(this.getPriority().val())+":"),this.forEachChild(At,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":ow(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new We(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new We(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new We(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,We.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,We.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===yl?-1:0}withIndex(e){if(e===Zi||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Ae(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Zi||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(At),s=n.getIterator(At);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Zi?null:this.indexMap_.get(e.toString())}}Ae.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class xk extends Ae{constructor(){super(new Cn(Lp),Ae.EMPTY_NODE,Fr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ae.EMPTY_NODE}isEmpty(){return!1}}const yl=new xk;Object.defineProperties(We,{MIN:{value:new We(po,Ae.EMPTY_NODE)},MAX:{value:new We(mi,yl)}});Tw.__EMPTY_NODE=Ae.EMPTY_NODE;Kt.__childrenNodeConstructor=Ae;hk(yl);pk(yl);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=!0;function Ut(t,e=null){if(t===null)return Ae.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),ue(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Kt(n,Ut(e))}if(!(t instanceof Array)&&vk){const n=[];let r=!1;if(sn(t,(o,c)=>{if(o.substring(0,1)!=="."){const u=Ut(c);u.isEmpty()||(r=r||!u.getPriority().isEmpty(),n.push(new We(o,u)))}}),n.length===0)return Ae.EMPTY_NODE;const i=su(n,dk,o=>o.name,Lp);if(r){const o=su(n,At.getCompare());return new Ae(i,Ut(e),new Fr({".priority":o},{".priority":At}))}else return new Ae(i,Ut(e),Fr.Default)}else{let n=Ae.EMPTY_NODE;return sn(t,(r,s)=>{if(kr(t,r)&&r.substring(0,1)!=="."){const i=Ut(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(Ut(e))}}fk(Ut);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk extends $u{constructor(e){super(),this.indexPath_=e,ue(!Ve(e)&&$e(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?Si(e.name,n.name):i}makePost(e,n){const r=Ut(e),s=Ae.EMPTY_NODE.updateChild(this.indexPath_,r);return new We(n,s)}maxPost(){const e=Ae.EMPTY_NODE.updateChild(this.indexPath_,yl);return new We(mi,e)}toString(){return Ga(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k extends $u{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Si(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return We.MIN}maxPost(){return We.MAX}makePost(e,n){const r=Ut(e);return new We(n,r)}toString(){return".value"}}const Sk=new _k;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ow(t){return{type:"value",snapshotNode:t}}function mo(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function qa(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Ya(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function bk(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){ue(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const c=e.getImmediateChild(n);return c.getChild(s).equals(r.getChild(s))&&c.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(qa(n,c)):ue(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):c.isEmpty()?o.trackChildChange(mo(n,r)):o.trackChildChange(Ya(n,r,c))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(At,(s,i)=>{n.hasChild(s)||r.trackChildChange(qa(s,i))}),n.isLeafNode()||n.forEachChild(At,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(Ya(s,i,o))}else r.trackChildChange(mo(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?Ae.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e){this.indexedFilter_=new Fp(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Qa.getStartPost_(e),this.endPost_=Qa.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new We(n,r))||(r=Ae.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=Ae.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(Ae.EMPTY_NODE);const i=this;return n.forEachChild(At,(o,c)=>{i.matches(new We(o,c))||(s=s.updateImmediateChild(o,Ae.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Qa(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new We(n,r))||(r=Ae.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=Ae.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=Ae.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const c=i.getNext();if(this.withinDirectionalStart(c))if(this.withinDirectionalEnd(c))s=s.updateImmediateChild(c.name,c.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(Ae.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const c=i.getNext();o<this.limit_&&this.withinDirectionalStart(c)&&this.withinDirectionalEnd(c)?o++:s=s.updateImmediateChild(c.name,Ae.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const p=this.index_.getCompare();o=(g,j)=>p(j,g)}else o=this.index_.getCompare();const c=e;ue(c.numChildren()===this.limit_,"");const u=new We(n,r),d=this.reverse_?c.getFirstChild(this.index_):c.getLastChild(this.index_),f=this.rangedFilter_.matches(u);if(c.hasChild(n)){const p=c.getImmediateChild(n);let g=s.getChildAfterChild(this.index_,d,this.reverse_);for(;g!=null&&(g.name===n||c.hasChild(g.name));)g=s.getChildAfterChild(this.index_,g,this.reverse_);const j=g==null?1:o(g,u);if(f&&!r.isEmpty()&&j>=0)return i!=null&&i.trackChildChange(Ya(n,r,p)),c.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(qa(n,p));const N=c.updateImmediateChild(n,Ae.EMPTY_NODE);return g!=null&&this.rangedFilter_.matches(g)?(i!=null&&i.trackChildChange(mo(g.name,g.node)),N.updateImmediateChild(g.name,g.node)):N}}else return r.isEmpty()?e:f&&o(d,u)>=0?(i!=null&&(i.trackChildChange(qa(d.name,d.node)),i.trackChildChange(mo(n,r))),c.updateImmediateChild(n,r).updateImmediateChild(d.name,Ae.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=At}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ue(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ue(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:po}hasEnd(){return this.endSet_}getIndexEndValue(){return ue(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ue(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:mi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ue(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===At}copy(){const e=new zp;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Ck(t){return t.loadsAllData()?new Fp(t.getIndex()):t.hasLimit()?new Ek(t):new Qa(t)}function J0(t){const e={};if(t.isDefault())return e;let n;if(t.index_===At?n="$priority":t.index_===Sk?n="$value":t.index_===Zi?n="$key":(ue(t.index_ instanceof wk,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=$t(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=$t(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+$t(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=$t(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+$t(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function X0(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==At&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu extends Cw{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(ue(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=gl("p:rest:"),this.listens_={}}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=iu.getListenId_(e,r),c={};this.listens_[o]=c;const u=J0(e._queryParams);this.restRequest_(i+".json",u,(d,f)=>{let p=f;if(d===404&&(p=null,d=null),d===null&&this.onDataUpdate_(i,p,!1,r),ho(this.listens_,o)===c){let g;d?d===401?g="permission_denied":g="rest_error:"+d:g="ok",s(g,null)}})}unlisten(e,n){const r=iu.getListenId_(e,n);delete this.listens_[r]}get(e){const n=J0(e._queryParams),r=e._path.toString(),s=new pl;return this.restRequest_(r+".json",n,(i,o)=>{let c=o;i===404&&(c=null,i=null),i===null?(this.onDataUpdate_(r,c,!1,null),s.resolve(c)):s.reject(new Error(c))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Z4(n);this.log_("Sending REST request for "+o);const c=new XMLHttpRequest;c.onreadystatechange=()=>{if(r&&c.readyState===4){this.log_("REST Response for "+o+" received. status:",c.status,"response:",c.responseText);let u=null;if(c.status>=200&&c.status<300){try{u=Ua(c.responseText)}catch{xn("Failed to parse JSON response for "+o+": "+c.responseText)}r(null,u)}else c.status!==401&&c.status!==404&&xn("Got unsuccessful REST response for "+o+" Status: "+c.status),r(c.status);r=null}},c.open("GET",o,!0),c.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(){this.rootNode_=Ae.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(){return{value:null,children:new Map}}function Dw(t,e,n){if(Ve(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=$e(e);t.children.has(r)||t.children.set(r,ou());const s=t.children.get(r);e=ft(e),Dw(s,e,n)}}function df(t,e,n){t.value!==null?n(e,t.value):jk(t,(r,s)=>{const i=new ct(e.toString()+"/"+r);df(s,i,n)})}function jk(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&sn(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0=10*1e3,Tk=30*1e3,Nk=5*60*1e3;class Rk{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new kk(e);const r=Z0+(Tk-Z0)*Math.random();ga(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;sn(e,(s,i)=>{i>0&&kr(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),ga(this.reportStats_.bind(this),Math.floor(Math.random()*2*Nk))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sr;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(sr||(sr={}));function Bp(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Up(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function $p(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=sr.ACK_USER_WRITE,this.source=Bp()}operationForChild(e){if(Ve(this.path)){if(this.affectedTree.value!=null)return ue(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new ct(e));return new au(rt(),n,this.revert)}}else return ue($e(this.path)===e,"operationForChild called for unrelated child."),new au(ft(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e,n){this.source=e,this.path=n,this.type=sr.LISTEN_COMPLETE}operationForChild(e){return Ve(this.path)?new Ja(this.source,rt()):new Ja(this.source,ft(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=sr.OVERWRITE}operationForChild(e){return Ve(this.path)?new gi(this.source,rt(),this.snap.getImmediateChild(e)):new gi(this.source,ft(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=sr.MERGE}operationForChild(e){if(Ve(this.path)){const n=this.children.subtree(new ct(e));return n.isEmpty()?null:n.value?new gi(this.source,rt(),n.value):new go(this.source,rt(),n)}else return ue($e(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new go(this.source,ft(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ve(e))return this.isFullyInitialized()&&!this.filtered_;const n=$e(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Pk(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(bk(o.childName,o.snapshotNode))}),Zo(t,s,"child_removed",e,r,n),Zo(t,s,"child_added",e,r,n),Zo(t,s,"child_moved",i,r,n),Zo(t,s,"child_changed",e,r,n),Zo(t,s,"value",e,r,n),s}function Zo(t,e,n,r,s,i){const o=r.filter(c=>c.type===n);o.sort((c,u)=>Dk(t,c,u)),o.forEach(c=>{const u=Ok(t,c,i);s.forEach(d=>{d.respondsTo(c.type)&&e.push(d.createEvent(u,t.query_))})})}function Ok(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Dk(t,e,n){if(e.childName==null||n.childName==null)throw jo("Should only compare child_ events.");const r=new We(e.childName,e.snapshotNode),s=new We(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wu(t,e){return{eventCache:t,serverCache:e}}function ya(t,e,n,r){return Wu(new Ps(e,n,r),t.serverCache)}function Mw(t,e,n,r){return Wu(t.eventCache,new Ps(e,n,r))}function lu(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function yi(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qd;const Mk=()=>(qd||(qd=new Cn(wj)),qd);class ht{static fromObject(e){let n=new ht(null);return sn(e,(r,s)=>{n=n.set(new ct(r),s)}),n}constructor(e,n=Mk()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:rt(),value:this.value};if(Ve(e))return null;{const r=$e(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(ft(e),n);return i!=null?{path:Rt(new ct(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ve(e))return this;{const n=$e(e),r=this.children.get(n);return r!==null?r.subtree(ft(e)):new ht(null)}}set(e,n){if(Ve(e))return new ht(n,this.children);{const r=$e(e),i=(this.children.get(r)||new ht(null)).set(ft(e),n),o=this.children.insert(r,i);return new ht(this.value,o)}}remove(e){if(Ve(e))return this.children.isEmpty()?new ht(null):new ht(null,this.children);{const n=$e(e),r=this.children.get(n);if(r){const s=r.remove(ft(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new ht(null):new ht(this.value,i)}else return this}}get(e){if(Ve(e))return this.value;{const n=$e(e),r=this.children.get(n);return r?r.get(ft(e)):null}}setTree(e,n){if(Ve(e))return n;{const r=$e(e),i=(this.children.get(r)||new ht(null)).setTree(ft(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new ht(this.value,o)}}fold(e){return this.fold_(rt(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(Rt(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,rt(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(Ve(e))return null;{const i=$e(e),o=this.children.get(i);return o?o.findOnPath_(ft(e),Rt(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,rt(),n)}foreachOnPath_(e,n,r){if(Ve(e))return this;{this.value&&r(n,this.value);const s=$e(e),i=this.children.get(s);return i?i.foreachOnPath_(ft(e),Rt(n,s),r):new ht(null)}}foreach(e){this.foreach_(rt(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(Rt(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e){this.writeTree_=e}static empty(){return new lr(new ht(null))}}function xa(t,e,n){if(Ve(e))return new lr(new ht(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=gn(s,e);return i=i.updateChild(o,n),new lr(t.writeTree_.set(s,i))}else{const s=new ht(n),i=t.writeTree_.setTree(e,s);return new lr(i)}}}function hf(t,e,n){let r=t;return sn(n,(s,i)=>{r=xa(r,Rt(e,s),i)}),r}function ey(t,e){if(Ve(e))return lr.empty();{const n=t.writeTree_.setTree(e,new ht(null));return new lr(n)}}function ff(t,e){return bi(t,e)!=null}function bi(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(gn(n.path,e)):null}function ty(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(At,(r,s)=>{e.push(new We(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new We(r,s.value))}),e}function js(t,e){if(Ve(e))return t;{const n=bi(t,e);return n!=null?new lr(new ht(n)):new lr(t.writeTree_.subtree(e))}}function pf(t){return t.writeTree_.isEmpty()}function yo(t,e){return Lw(rt(),t.writeTree_,e)}function Lw(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(ue(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=Lw(Rt(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Rt(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hu(t,e){return Uw(e,t)}function Lk(t,e,n,r,s){ue(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=xa(t.visibleWrites,e,n)),t.lastWriteId=r}function Fk(t,e,n,r){ue(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=hf(t.visibleWrites,e,n),t.lastWriteId=r}function zk(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function Bk(t,e){const n=t.allWrites.findIndex(c=>c.writeId===e);ue(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const c=t.allWrites[o];c.visible&&(o>=n&&Uk(c,r.path)?s=!1:Vn(r.path,c.path)&&(i=!0)),o--}if(s){if(i)return $k(t),!0;if(r.snap)t.visibleWrites=ey(t.visibleWrites,r.path);else{const c=r.children;sn(c,u=>{t.visibleWrites=ey(t.visibleWrites,Rt(r.path,u))})}return!0}else return!1}function Uk(t,e){if(t.snap)return Vn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Vn(Rt(t.path,n),e))return!0;return!1}function $k(t){t.visibleWrites=Fw(t.allWrites,Wk,rt()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Wk(t){return t.visible}function Fw(t,e,n){let r=lr.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let c;if(i.snap)Vn(n,o)?(c=gn(n,o),r=xa(r,c,i.snap)):Vn(o,n)&&(c=gn(o,n),r=xa(r,rt(),i.snap.getChild(c)));else if(i.children){if(Vn(n,o))c=gn(n,o),r=hf(r,c,i.children);else if(Vn(o,n))if(c=gn(o,n),Ve(c))r=hf(r,rt(),i.children);else{const u=ho(i.children,$e(c));if(u){const d=u.getChild(ft(c));r=xa(r,rt(),d)}}}else throw jo("WriteRecord should have .snap or .children")}}return r}function zw(t,e,n,r,s){if(!r&&!s){const i=bi(t.visibleWrites,e);if(i!=null)return i;{const o=js(t.visibleWrites,e);if(pf(o))return n;if(n==null&&!ff(o,rt()))return null;{const c=n||Ae.EMPTY_NODE;return yo(o,c)}}}else{const i=js(t.visibleWrites,e);if(!s&&pf(i))return n;if(!s&&n==null&&!ff(i,rt()))return null;{const o=function(d){return(d.visible||s)&&(!r||!~r.indexOf(d.writeId))&&(Vn(d.path,e)||Vn(e,d.path))},c=Fw(t.allWrites,o,e),u=n||Ae.EMPTY_NODE;return yo(c,u)}}}function Hk(t,e,n){let r=Ae.EMPTY_NODE;const s=bi(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(At,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=js(t.visibleWrites,e);return n.forEachChild(At,(o,c)=>{const u=yo(js(i,new ct(o)),c);r=r.updateImmediateChild(o,u)}),ty(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=js(t.visibleWrites,e);return ty(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function Vk(t,e,n,r,s){ue(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=Rt(e,n);if(ff(t.visibleWrites,i))return null;{const o=js(t.visibleWrites,i);return pf(o)?s.getChild(n):yo(o,s.getChild(n))}}function Kk(t,e,n,r){const s=Rt(e,n),i=bi(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=js(t.visibleWrites,s);return yo(o,r.getNode().getImmediateChild(n))}else return null}function Gk(t,e){return bi(t.visibleWrites,e)}function qk(t,e,n,r,s,i,o){let c;const u=js(t.visibleWrites,e),d=bi(u,rt());if(d!=null)c=d;else if(n!=null)c=yo(u,n);else return[];if(c=c.withIndex(o),!c.isEmpty()&&!c.isLeafNode()){const f=[],p=o.getCompare(),g=i?c.getReverseIteratorFrom(r,o):c.getIteratorFrom(r,o);let j=g.getNext();for(;j&&f.length<s;)p(j,r)!==0&&f.push(j),j=g.getNext();return f}else return[]}function Yk(){return{visibleWrites:lr.empty(),allWrites:[],lastWriteId:-1}}function cu(t,e,n,r){return zw(t.writeTree,t.treePath,e,n,r)}function Wp(t,e){return Hk(t.writeTree,t.treePath,e)}function ny(t,e,n,r){return Vk(t.writeTree,t.treePath,e,n,r)}function uu(t,e){return Gk(t.writeTree,Rt(t.treePath,e))}function Qk(t,e,n,r,s,i){return qk(t.writeTree,t.treePath,e,n,r,s,i)}function Hp(t,e,n){return Kk(t.writeTree,t.treePath,e,n)}function Bw(t,e){return Uw(Rt(t.treePath,e),t.writeTree)}function Uw(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;ue(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),ue(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,Ya(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,qa(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,mo(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,Ya(r,e.snapshotNode,s.oldSnap));else throw jo("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const $w=new Xk;class Vp{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Ps(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Hp(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:yi(this.viewCache_),i=Qk(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(t){return{filter:t}}function e3(t,e){ue(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),ue(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function t3(t,e,n,r,s){const i=new Jk;let o,c;if(n.type===sr.OVERWRITE){const d=n;d.source.fromUser?o=mf(t,e,d.path,d.snap,r,s,i):(ue(d.source.fromServer,"Unknown source."),c=d.source.tagged||e.serverCache.isFiltered()&&!Ve(d.path),o=du(t,e,d.path,d.snap,r,s,c,i))}else if(n.type===sr.MERGE){const d=n;d.source.fromUser?o=r3(t,e,d.path,d.children,r,s,i):(ue(d.source.fromServer,"Unknown source."),c=d.source.tagged||e.serverCache.isFiltered(),o=gf(t,e,d.path,d.children,r,s,c,i))}else if(n.type===sr.ACK_USER_WRITE){const d=n;d.revert?o=o3(t,e,d.path,r,s,i):o=s3(t,e,d.path,d.affectedTree,r,s,i)}else if(n.type===sr.LISTEN_COMPLETE)o=i3(t,e,n.path,r,i);else throw jo("Unknown operation type: "+n.type);const u=i.getChanges();return n3(e,o,u),{viewCache:o,changes:u}}function n3(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=lu(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(Ow(lu(e)))}}function Ww(t,e,n,r,s,i){const o=e.eventCache;if(uu(r,n)!=null)return e;{let c,u;if(Ve(n))if(ue(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const d=yi(e),f=d instanceof Ae?d:Ae.EMPTY_NODE,p=Wp(r,f);c=t.filter.updateFullNode(e.eventCache.getNode(),p,i)}else{const d=cu(r,yi(e));c=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const d=$e(n);if(d===".priority"){ue(As(n)===1,"Can't have a priority with additional path components");const f=o.getNode();u=e.serverCache.getNode();const p=ny(r,n,f,u);p!=null?c=t.filter.updatePriority(f,p):c=o.getNode()}else{const f=ft(n);let p;if(o.isCompleteForChild(d)){u=e.serverCache.getNode();const g=ny(r,n,o.getNode(),u);g!=null?p=o.getNode().getImmediateChild(d).updateChild(f,g):p=o.getNode().getImmediateChild(d)}else p=Hp(r,d,e.serverCache);p!=null?c=t.filter.updateChild(o.getNode(),d,p,f,s,i):c=o.getNode()}}return ya(e,c,o.isFullyInitialized()||Ve(n),t.filter.filtersNodes())}}function du(t,e,n,r,s,i,o,c){const u=e.serverCache;let d;const f=o?t.filter:t.filter.getIndexedFilter();if(Ve(n))d=f.updateFullNode(u.getNode(),r,null);else if(f.filtersNodes()&&!u.isFiltered()){const j=u.getNode().updateChild(n,r);d=f.updateFullNode(u.getNode(),j,null)}else{const j=$e(n);if(!u.isCompleteForPath(n)&&As(n)>1)return e;const v=ft(n),R=u.getNode().getImmediateChild(j).updateChild(v,r);j===".priority"?d=f.updatePriority(u.getNode(),R):d=f.updateChild(u.getNode(),j,R,v,$w,null)}const p=Mw(e,d,u.isFullyInitialized()||Ve(n),f.filtersNodes()),g=new Vp(s,p,i);return Ww(t,p,n,s,g,c)}function mf(t,e,n,r,s,i,o){const c=e.eventCache;let u,d;const f=new Vp(s,e,i);if(Ve(n))d=t.filter.updateFullNode(e.eventCache.getNode(),r,o),u=ya(e,d,!0,t.filter.filtersNodes());else{const p=$e(n);if(p===".priority")d=t.filter.updatePriority(e.eventCache.getNode(),r),u=ya(e,d,c.isFullyInitialized(),c.isFiltered());else{const g=ft(n),j=c.getNode().getImmediateChild(p);let v;if(Ve(g))v=r;else{const N=f.getCompleteChild(p);N!=null?Op(g)===".priority"&&N.getChild(jw(g)).isEmpty()?v=N:v=N.updateChild(g,r):v=Ae.EMPTY_NODE}if(j.equals(v))u=e;else{const N=t.filter.updateChild(c.getNode(),p,v,g,f,o);u=ya(e,N,c.isFullyInitialized(),t.filter.filtersNodes())}}}return u}function ry(t,e){return t.eventCache.isCompleteForChild(e)}function r3(t,e,n,r,s,i,o){let c=e;return r.foreach((u,d)=>{const f=Rt(n,u);ry(e,$e(f))&&(c=mf(t,c,f,d,s,i,o))}),r.foreach((u,d)=>{const f=Rt(n,u);ry(e,$e(f))||(c=mf(t,c,f,d,s,i,o))}),c}function sy(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function gf(t,e,n,r,s,i,o,c){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u=e,d;Ve(n)?d=r:d=new ht(null).setTree(n,r);const f=e.serverCache.getNode();return d.children.inorderTraversal((p,g)=>{if(f.hasChild(p)){const j=e.serverCache.getNode().getImmediateChild(p),v=sy(t,j,g);u=du(t,u,new ct(p),v,s,i,o,c)}}),d.children.inorderTraversal((p,g)=>{const j=!e.serverCache.isCompleteForChild(p)&&g.value===null;if(!f.hasChild(p)&&!j){const v=e.serverCache.getNode().getImmediateChild(p),N=sy(t,v,g);u=du(t,u,new ct(p),N,s,i,o,c)}}),u}function s3(t,e,n,r,s,i,o){if(uu(s,n)!=null)return e;const c=e.serverCache.isFiltered(),u=e.serverCache;if(r.value!=null){if(Ve(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return du(t,e,n,u.getNode().getChild(n),s,i,c,o);if(Ve(n)){let d=new ht(null);return u.getNode().forEachChild(Zi,(f,p)=>{d=d.set(new ct(f),p)}),gf(t,e,n,d,s,i,c,o)}else return e}else{let d=new ht(null);return r.foreach((f,p)=>{const g=Rt(n,f);u.isCompleteForPath(g)&&(d=d.set(f,u.getNode().getChild(g)))}),gf(t,e,n,d,s,i,c,o)}}function i3(t,e,n,r,s){const i=e.serverCache,o=Mw(e,i.getNode(),i.isFullyInitialized()||Ve(n),i.isFiltered());return Ww(t,o,n,r,$w,s)}function o3(t,e,n,r,s,i){let o;if(uu(r,n)!=null)return e;{const c=new Vp(r,e,s),u=e.eventCache.getNode();let d;if(Ve(n)||$e(n)===".priority"){let f;if(e.serverCache.isFullyInitialized())f=cu(r,yi(e));else{const p=e.serverCache.getNode();ue(p instanceof Ae,"serverChildren would be complete if leaf node"),f=Wp(r,p)}f=f,d=t.filter.updateFullNode(u,f,i)}else{const f=$e(n);let p=Hp(r,f,e.serverCache);p==null&&e.serverCache.isCompleteForChild(f)&&(p=u.getImmediateChild(f)),p!=null?d=t.filter.updateChild(u,f,p,ft(n),c,i):e.eventCache.getNode().hasChild(f)?d=t.filter.updateChild(u,f,Ae.EMPTY_NODE,ft(n),c,i):d=u,d.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=cu(r,yi(e)),o.isLeafNode()&&(d=t.filter.updateFullNode(d,o,i)))}return o=e.serverCache.isFullyInitialized()||uu(r,rt())!=null,ya(e,d,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new Fp(r.getIndex()),i=Ck(r);this.processor_=Zk(i);const o=n.serverCache,c=n.eventCache,u=s.updateFullNode(Ae.EMPTY_NODE,o.getNode(),null),d=i.updateFullNode(Ae.EMPTY_NODE,c.getNode(),null),f=new Ps(u,o.isFullyInitialized(),s.filtersNodes()),p=new Ps(d,c.isFullyInitialized(),i.filtersNodes());this.viewCache_=Wu(p,f),this.eventGenerator_=new Ak(this.query_)}get query(){return this.query_}}function l3(t){return t.viewCache_.serverCache.getNode()}function c3(t){return lu(t.viewCache_)}function u3(t,e){const n=yi(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Ve(e)&&!n.getImmediateChild($e(e)).isEmpty())?n.getChild(e):null}function iy(t){return t.eventRegistrations_.length===0}function d3(t,e){t.eventRegistrations_.push(e)}function oy(t,e,n){const r=[];if(n){ue(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function ay(t,e,n,r){e.type===sr.MERGE&&e.source.queryId!==null&&(ue(yi(t.viewCache_),"We should always have a full cache before handling merges"),ue(lu(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=t3(t.processor_,s,e,n,r);return e3(t.processor_,i.viewCache),ue(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,Hw(t,i.changes,i.viewCache.eventCache.getNode(),null)}function h3(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(At,(i,o)=>{r.push(mo(i,o))}),n.isFullyInitialized()&&r.push(Ow(n.getNode())),Hw(t,r,n.getNode(),e)}function Hw(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return Pk(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hu;class Vw{constructor(){this.views=new Map}}function f3(t){ue(!hu,"__referenceConstructor has already been defined"),hu=t}function p3(){return ue(hu,"Reference.ts has not been loaded"),hu}function m3(t){return t.views.size===0}function Kp(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return ue(i!=null,"SyncTree gave us an op for an invalid query."),ay(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(ay(o,e,n,r));return i}}function Kw(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let c=cu(n,s?r:null),u=!1;c?u=!0:r instanceof Ae?(c=Wp(n,r),u=!1):(c=Ae.EMPTY_NODE,u=!1);const d=Wu(new Ps(c,u,!1),new Ps(r,s,!1));return new a3(e,d)}return o}function g3(t,e,n,r,s,i){const o=Kw(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),d3(o,n),h3(o,n)}function y3(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const c=Os(t);if(s==="default")for(const[u,d]of t.views.entries())o=o.concat(oy(d,n,r)),iy(d)&&(t.views.delete(u),d.query._queryParams.loadsAllData()||i.push(d.query));else{const u=t.views.get(s);u&&(o=o.concat(oy(u,n,r)),iy(u)&&(t.views.delete(s),u.query._queryParams.loadsAllData()||i.push(u.query)))}return c&&!Os(t)&&i.push(new(p3())(e._repo,e._path)),{removed:i,events:o}}function Gw(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function ks(t,e){let n=null;for(const r of t.views.values())n=n||u3(r,e);return n}function qw(t,e){if(e._queryParams.loadsAllData())return Vu(t);{const r=e._queryIdentifier;return t.views.get(r)}}function Yw(t,e){return qw(t,e)!=null}function Os(t){return Vu(t)!=null}function Vu(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fu;function x3(t){ue(!fu,"__referenceConstructor has already been defined"),fu=t}function v3(){return ue(fu,"Reference.ts has not been loaded"),fu}let w3=1;class ly{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ht(null),this.pendingWriteTree_=Yk(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Qw(t,e,n,r,s){return Lk(t.pendingWriteTree_,e,n,r,s),s?No(t,new gi(Bp(),e,n)):[]}function _3(t,e,n,r){Fk(t.pendingWriteTree_,e,n,r);const s=ht.fromObject(n);return No(t,new go(Bp(),e,s))}function ms(t,e,n=!1){const r=zk(t.pendingWriteTree_,e);if(Bk(t.pendingWriteTree_,e)){let i=new ht(null);return r.snap!=null?i=i.set(rt(),!0):sn(r.children,o=>{i=i.set(new ct(o),!0)}),No(t,new au(r.path,i,n))}else return[]}function xl(t,e,n){return No(t,new gi(Up(),e,n))}function S3(t,e,n){const r=ht.fromObject(n);return No(t,new go(Up(),e,r))}function b3(t,e){return No(t,new Ja(Up(),e))}function E3(t,e,n){const r=qp(t,n);if(r){const s=Yp(r),i=s.path,o=s.queryId,c=gn(i,e),u=new Ja($p(o),c);return Qp(t,i,u)}else return[]}function pu(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let c=[];if(o&&(e._queryIdentifier==="default"||Yw(o,e))){const u=y3(o,e,n,r);m3(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const d=u.removed;if(c=u.events,!s){const f=d.findIndex(g=>g._queryParams.loadsAllData())!==-1,p=t.syncPointTree_.findOnPath(i,(g,j)=>Os(j));if(f&&!p){const g=t.syncPointTree_.subtree(i);if(!g.isEmpty()){const j=j3(g);for(let v=0;v<j.length;++v){const N=j[v],R=N.query,b=e_(t,N);t.listenProvider_.startListening(va(R),Xa(t,R),b.hashFn,b.onComplete)}}}!p&&d.length>0&&!r&&(f?t.listenProvider_.stopListening(va(e),null):d.forEach(g=>{const j=t.queryToTagMap.get(Ku(g));t.listenProvider_.stopListening(va(g),j)}))}k3(t,d)}return c}function Jw(t,e,n,r){const s=qp(t,r);if(s!=null){const i=Yp(s),o=i.path,c=i.queryId,u=gn(o,e),d=new gi($p(c),u,n);return Qp(t,o,d)}else return[]}function C3(t,e,n,r){const s=qp(t,r);if(s){const i=Yp(s),o=i.path,c=i.queryId,u=gn(o,e),d=ht.fromObject(n),f=new go($p(c),u,d);return Qp(t,o,f)}else return[]}function yf(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(g,j)=>{const v=gn(g,s);i=i||ks(j,v),o=o||Os(j)});let c=t.syncPointTree_.get(s);c?(o=o||Os(c),i=i||ks(c,rt())):(c=new Vw,t.syncPointTree_=t.syncPointTree_.set(s,c));let u;i!=null?u=!0:(u=!1,i=Ae.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((j,v)=>{const N=ks(v,rt());N&&(i=i.updateImmediateChild(j,N))}));const d=Yw(c,e);if(!d&&!e._queryParams.loadsAllData()){const g=Ku(e);ue(!t.queryToTagMap.has(g),"View does not exist, but we have a tag");const j=T3();t.queryToTagMap.set(g,j),t.tagToQueryMap.set(j,g)}const f=Hu(t.pendingWriteTree_,s);let p=g3(c,e,n,f,i,u);if(!d&&!o&&!r){const g=qw(c,e);p=p.concat(N3(t,e,g))}return p}function Gp(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,c)=>{const u=gn(o,e),d=ks(c,u);if(d)return d});return zw(s,e,i,n,!0)}function I3(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(d,f)=>{const p=gn(d,n);r=r||ks(f,p)});let s=t.syncPointTree_.get(n);s?r=r||ks(s,rt()):(s=new Vw,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new Ps(r,!0,!1):null,c=Hu(t.pendingWriteTree_,e._path),u=Kw(s,e,c,i?o.getNode():Ae.EMPTY_NODE,i);return c3(u)}function No(t,e){return Xw(e,t.syncPointTree_,null,Hu(t.pendingWriteTree_,rt()))}function Xw(t,e,n,r){if(Ve(t.path))return Zw(t,e,n,r);{const s=e.get(rt());n==null&&s!=null&&(n=ks(s,rt()));let i=[];const o=$e(t.path),c=t.operationForChild(o),u=e.children.get(o);if(u&&c){const d=n?n.getImmediateChild(o):null,f=Bw(r,o);i=i.concat(Xw(c,u,d,f))}return s&&(i=i.concat(Kp(s,t,r,n))),i}}function Zw(t,e,n,r){const s=e.get(rt());n==null&&s!=null&&(n=ks(s,rt()));let i=[];return e.children.inorderTraversal((o,c)=>{const u=n?n.getImmediateChild(o):null,d=Bw(r,o),f=t.operationForChild(o);f&&(i=i.concat(Zw(f,c,u,d)))}),s&&(i=i.concat(Kp(s,t,r,n))),i}function e_(t,e){const n=e.query,r=Xa(t,n);return{hashFn:()=>(l3(e)||Ae.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?E3(t,n._path,r):b3(t,n._path);{const i=bj(s,n);return pu(t,n,null,i)}}}}function Xa(t,e){const n=Ku(e);return t.queryToTagMap.get(n)}function Ku(t){return t._path.toString()+"$"+t._queryIdentifier}function qp(t,e){return t.tagToQueryMap.get(e)}function Yp(t){const e=t.indexOf("$");return ue(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ct(t.substr(0,e))}}function Qp(t,e,n){const r=t.syncPointTree_.get(e);ue(r,"Missing sync point for query tag that we're tracking");const s=Hu(t.pendingWriteTree_,e);return Kp(r,n,s,null)}function j3(t){return t.fold((e,n,r)=>{if(n&&Os(n))return[Vu(n)];{let s=[];return n&&(s=Gw(n)),sn(r,(i,o)=>{s=s.concat(o)}),s}})}function va(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(v3())(t._repo,t._path):t}function k3(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=Ku(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function T3(){return w3++}function N3(t,e,n){const r=e._path,s=Xa(t,e),i=e_(t,n),o=t.listenProvider_.startListening(va(e),s,i.hashFn,i.onComplete),c=t.syncPointTree_.subtree(r);if(s)ue(!Os(c.value),"If we're adding a query, it shouldn't be shadowed");else{const u=c.fold((d,f,p)=>{if(!Ve(d)&&f&&Os(f))return[Vu(f).query];{let g=[];return f&&(g=g.concat(Gw(f).map(j=>j.query))),sn(p,(j,v)=>{g=g.concat(v)}),g}});for(let d=0;d<u.length;++d){const f=u[d];t.listenProvider_.stopListening(va(f),Xa(t,f))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Jp(n)}node(){return this.node_}}class Xp{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Rt(this.path_,e);return new Xp(this.syncTree_,n)}node(){return Gp(this.syncTree_,this.path_)}}const R3=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},cy=function(t,e,n){if(!t||typeof t!="object")return t;if(ue(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return A3(t[".sv"],e,n);if(typeof t[".sv"]=="object")return P3(t[".sv"],e);ue(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},A3=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:ue(!1,"Unexpected server value: "+t)}},P3=function(t,e,n){t.hasOwnProperty("increment")||ue(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&ue(!1,"Unexpected increment value: "+r);const s=e.node();if(ue(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},t_=function(t,e,n,r){return Zp(e,new Xp(n,t),r)},n_=function(t,e,n){return Zp(t,new Jp(e),n)};function Zp(t,e,n){const r=t.getPriority().val(),s=cy(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,c=cy(o.getValue(),e,n);return c!==o.getValue()||s!==o.getPriority().val()?new Kt(c,Ut(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new Kt(s))),o.forEachChild(At,(c,u)=>{const d=Zp(u,e.getImmediateChild(c),n);d!==u&&(i=i.updateImmediateChild(c,d))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function tm(t,e){let n=e instanceof ct?e:new ct(e),r=t,s=$e(n);for(;s!==null;){const i=ho(r.node.children,s)||{children:{},childCount:0};r=new em(s,r,i),n=ft(n),s=$e(n)}return r}function Ro(t){return t.node.value}function r_(t,e){t.node.value=e,xf(t)}function s_(t){return t.node.childCount>0}function O3(t){return Ro(t)===void 0&&!s_(t)}function Gu(t,e){sn(t.node.children,(n,r)=>{e(new em(n,t,r))})}function i_(t,e,n,r){n&&e(t),Gu(t,s=>{i_(s,e,!0)})}function D3(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function vl(t){return new ct(t.parent===null?t.name:vl(t.parent)+"/"+t.name)}function xf(t){t.parent!==null&&M3(t.parent,t.name,t)}function M3(t,e,n){const r=O3(n),s=kr(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,xf(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,xf(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L3=/[\[\].#$\/\u0000-\u001F\u007F]/,F3=/[\[\].#$\u0000-\u001F\u007F]/,Yd=10*1024*1024,nm=function(t){return typeof t=="string"&&t.length!==0&&!L3.test(t)},o_=function(t){return typeof t=="string"&&t.length!==0&&!F3.test(t)},z3=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),o_(t)},B3=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Tp(t)||t&&typeof t=="object"&&kr(t,".sv")},a_=function(t,e,n,r){r&&e===void 0||qu(Bu(t,"value"),e,n)},qu=function(t,e,n){const r=n instanceof ct?new rk(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Qs(r));if(typeof e=="function")throw new Error(t+"contains a function "+Qs(r)+" with contents = "+e.toString());if(Tp(e))throw new Error(t+"contains "+e.toString()+" "+Qs(r));if(typeof e=="string"&&e.length>Yd/3&&Uu(e)>Yd)throw new Error(t+"contains a string greater than "+Yd+" utf8 bytes "+Qs(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(sn(e,(o,c)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!nm(o)))throw new Error(t+" contains an invalid key ("+o+") "+Qs(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);sk(r,o),qu(t,c,r),ik(r)}),s&&i)throw new Error(t+' contains ".value" child '+Qs(r)+" in addition to actual children.")}},U3=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const i=Ga(r);for(let o=0;o<i.length;o++)if(!(i[o]===".priority"&&o===i.length-1)){if(!nm(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(nk);let s=null;for(n=0;n<e.length;n++){if(r=e[n],s!==null&&Vn(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}},$3=function(t,e,n,r){const s=Bu(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const i=[];sn(e,(o,c)=>{const u=new ct(o);if(qu(s,c,Rt(n,u)),Op(u)===".priority"&&!B3(c))throw new Error(s+"contains an invalid value for '"+u.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");i.push(u)}),U3(s,i)},l_=function(t,e,n,r){if(!o_(n))throw new Error(Bu(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},W3=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),l_(t,e,n)},c_=function(t,e){if($e(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},H3=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!nm(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!z3(n))throw new Error(Bu(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Yu(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!Dp(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function u_(t,e,n){Yu(t,n),d_(t,r=>Dp(r,e))}function Yn(t,e,n){Yu(t,n),d_(t,r=>Vn(r,e)||Vn(e,r))}function d_(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(K3(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function K3(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();ma&&tn("event: "+n.toString()),To(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G3="repo_interrupt",q3=25;class Y3{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new V3,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ou(),this.transactionQueueTree_=new em,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Q3(t,e,n){if(t.stats_=Ap(t.repoInfo_),t.forceRestClient_||jj())t.server_=new iu(t.repoInfo_,(r,s,i,o)=>{uy(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>dy(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{$t(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Ur(t.repoInfo_,e,(r,s,i,o)=>{uy(t,r,s,i,o)},r=>{dy(t,r)},r=>{J3(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=Aj(t.repoInfo_,()=>new Rk(t.stats_,t.server_)),t.infoData_=new Ik,t.infoSyncTree_=new ly({startListening:(r,s,i,o)=>{let c=[];const u=t.infoData_.getNode(r._path);return u.isEmpty()||(c=xl(t.infoSyncTree_,r._path,u),setTimeout(()=>{o("ok")},0)),c},stopListening:()=>{}}),rm(t,"connected",!1),t.serverSyncTree_=new ly({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(c,u)=>{const d=o(c,u);Yn(t.eventQueue_,r._path,d)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function h_(t){const n=t.infoData_.getNode(new ct(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Qu(t){return R3({timestamp:h_(t)})}function uy(t,e,n,r,s){t.dataUpdateCount++;const i=new ct(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const u=tu(n,d=>Ut(d));o=C3(t.serverSyncTree_,i,u,s)}else{const u=Ut(n);o=Jw(t.serverSyncTree_,i,u,s)}else if(r){const u=tu(n,d=>Ut(d));o=S3(t.serverSyncTree_,i,u)}else{const u=Ut(n);o=xl(t.serverSyncTree_,i,u)}let c=i;o.length>0&&(c=xo(t,i)),Yn(t.eventQueue_,c,o)}function dy(t,e){rm(t,"connected",e),e===!1&&t6(t)}function J3(t,e){sn(e,(n,r)=>{rm(t,n,r)})}function rm(t,e,n){const r=new ct("/.info/"+e),s=Ut(n);t.infoData_.updateSnapshot(r,s);const i=xl(t.infoSyncTree_,r,s);Yn(t.eventQueue_,r,i)}function sm(t){return t.nextWriteId_++}function X3(t,e,n){const r=I3(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=Ut(s).withIndex(e._queryParams.getIndex());yf(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=xl(t.serverSyncTree_,e._path,i);else{const c=Xa(t.serverSyncTree_,e);o=Jw(t.serverSyncTree_,e._path,i,c)}return Yn(t.eventQueue_,e._path,o),pu(t.serverSyncTree_,e,n,null,!0),i},s=>(wl(t,"get for query "+$t(e)+" failed: "+s),Promise.reject(new Error(s))))}function Z3(t,e,n,r,s){wl(t,"set",{path:e.toString(),value:n,priority:r});const i=Qu(t),o=Ut(n,r),c=Gp(t.serverSyncTree_,e),u=n_(o,c,i),d=sm(t),f=Qw(t.serverSyncTree_,e,u,d,!0);Yu(t.eventQueue_,f),t.server_.put(e.toString(),o.val(!0),(g,j)=>{const v=g==="ok";v||xn("set at "+e+" failed: "+g);const N=ms(t.serverSyncTree_,d,!v);Yn(t.eventQueue_,e,N),vf(t,s,g,j)});const p=om(t,e);xo(t,p),Yn(t.eventQueue_,p,[])}function e6(t,e,n,r){wl(t,"update",{path:e.toString(),value:n});let s=!0;const i=Qu(t),o={};if(sn(n,(c,u)=>{s=!1,o[c]=t_(Rt(e,c),Ut(u),t.serverSyncTree_,i)}),s)tn("update() called with empty data.  Don't do anything."),vf(t,r,"ok",void 0);else{const c=sm(t),u=_3(t.serverSyncTree_,e,o,c);Yu(t.eventQueue_,u),t.server_.merge(e.toString(),n,(d,f)=>{const p=d==="ok";p||xn("update at "+e+" failed: "+d);const g=ms(t.serverSyncTree_,c,!p),j=g.length>0?xo(t,e):e;Yn(t.eventQueue_,j,g),vf(t,r,d,f)}),sn(n,d=>{const f=om(t,Rt(e,d));xo(t,f)}),Yn(t.eventQueue_,e,[])}}function t6(t){wl(t,"onDisconnectEvents");const e=Qu(t),n=ou();df(t.onDisconnect_,rt(),(s,i)=>{const o=t_(s,i,t.serverSyncTree_,e);Dw(n,s,o)});let r=[];df(n,rt(),(s,i)=>{r=r.concat(xl(t.serverSyncTree_,s,i));const o=om(t,s);xo(t,o)}),t.onDisconnect_=ou(),Yn(t.eventQueue_,rt(),r)}function n6(t,e,n){let r;$e(e._path)===".info"?r=yf(t.infoSyncTree_,e,n):r=yf(t.serverSyncTree_,e,n),u_(t.eventQueue_,e._path,r)}function f_(t,e,n){let r;$e(e._path)===".info"?r=pu(t.infoSyncTree_,e,n):r=pu(t.serverSyncTree_,e,n),u_(t.eventQueue_,e._path,r)}function r6(t){t.persistentConnection_&&t.persistentConnection_.interrupt(G3)}function wl(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),tn(n,...e)}function vf(t,e,n,r){e&&To(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function p_(t,e,n){return Gp(t.serverSyncTree_,e,n)||Ae.EMPTY_NODE}function im(t,e=t.transactionQueueTree_){if(e||Ju(t,e),Ro(e)){const n=g_(t,e);ue(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&s6(t,vl(e),n)}else s_(e)&&Gu(e,n=>{im(t,n)})}function s6(t,e,n){const r=n.map(d=>d.currentWriteId),s=p_(t,e,r);let i=s;const o=s.hash();for(let d=0;d<n.length;d++){const f=n[d];ue(f.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=1,f.retryCount++;const p=gn(e,f.path);i=i.updateChild(p,f.currentOutputSnapshotRaw)}const c=i.val(!0),u=e;t.server_.put(u.toString(),c,d=>{wl(t,"transaction put response",{path:u.toString(),status:d});let f=[];if(d==="ok"){const p=[];for(let g=0;g<n.length;g++)n[g].status=2,f=f.concat(ms(t.serverSyncTree_,n[g].currentWriteId)),n[g].onComplete&&p.push(()=>n[g].onComplete(null,!0,n[g].currentOutputSnapshotResolved)),n[g].unwatcher();Ju(t,tm(t.transactionQueueTree_,e)),im(t,t.transactionQueueTree_),Yn(t.eventQueue_,e,f);for(let g=0;g<p.length;g++)To(p[g])}else{if(d==="datastale")for(let p=0;p<n.length;p++)n[p].status===3?n[p].status=4:n[p].status=0;else{xn("transaction at "+u.toString()+" failed: "+d);for(let p=0;p<n.length;p++)n[p].status=4,n[p].abortReason=d}xo(t,e)}},o)}function xo(t,e){const n=m_(t,e),r=vl(n),s=g_(t,n);return i6(t,s,r),r}function i6(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(c=>c.status===0).map(c=>c.currentWriteId);for(let c=0;c<e.length;c++){const u=e[c],d=gn(n,u.path);let f=!1,p;if(ue(d!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===4)f=!0,p=u.abortReason,s=s.concat(ms(t.serverSyncTree_,u.currentWriteId,!0));else if(u.status===0)if(u.retryCount>=q3)f=!0,p="maxretry",s=s.concat(ms(t.serverSyncTree_,u.currentWriteId,!0));else{const g=p_(t,u.path,o);u.currentInputSnapshot=g;const j=e[c].update(g.val());if(j!==void 0){qu("transaction failed: Data returned ",j,u.path);let v=Ut(j);typeof j=="object"&&j!=null&&kr(j,".priority")||(v=v.updatePriority(g.getPriority()));const R=u.currentWriteId,b=Qu(t),w=n_(v,g,b);u.currentOutputSnapshotRaw=v,u.currentOutputSnapshotResolved=w,u.currentWriteId=sm(t),o.splice(o.indexOf(R),1),s=s.concat(Qw(t.serverSyncTree_,u.path,w,u.currentWriteId,u.applyLocally)),s=s.concat(ms(t.serverSyncTree_,R,!0))}else f=!0,p="nodata",s=s.concat(ms(t.serverSyncTree_,u.currentWriteId,!0))}Yn(t.eventQueue_,n,s),s=[],f&&(e[c].status=2,function(g){setTimeout(g,Math.floor(0))}(e[c].unwatcher),e[c].onComplete&&(p==="nodata"?r.push(()=>e[c].onComplete(null,!1,e[c].currentInputSnapshot)):r.push(()=>e[c].onComplete(new Error(p),!1,null))))}Ju(t,t.transactionQueueTree_);for(let c=0;c<r.length;c++)To(r[c]);im(t,t.transactionQueueTree_)}function m_(t,e){let n,r=t.transactionQueueTree_;for(n=$e(e);n!==null&&Ro(r)===void 0;)r=tm(r,n),e=ft(e),n=$e(e);return r}function g_(t,e){const n=[];return y_(t,e,n),n.sort((r,s)=>r.order-s.order),n}function y_(t,e,n){const r=Ro(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);Gu(e,s=>{y_(t,s,n)})}function Ju(t,e){const n=Ro(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,r_(e,n.length>0?n:void 0)}Gu(e,r=>{Ju(t,r)})}function om(t,e){const n=vl(m_(t,e)),r=tm(t.transactionQueueTree_,e);return D3(r,s=>{Qd(t,s)}),Qd(t,r),i_(r,s=>{Qd(t,s)}),n}function Qd(t,e){const n=Ro(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(ue(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(ue(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(ms(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?r_(e,void 0):n.length=i+1,Yn(t.eventQueue_,vl(e),s);for(let o=0;o<r.length;o++)To(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o6(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function a6(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):xn(`Invalid query segment '${n}' in query '${t}'`)}return e}const hy=function(t,e){const n=l6(t),r=n.namespace;n.domain==="firebase.com"&&qr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&qr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||xj();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new xw(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new ct(n.pathString)}},l6=function(t){let e="",n="",r="",s="",i="",o=!0,c="https",u=443;if(typeof t=="string"){let d=t.indexOf("//");d>=0&&(c=t.substring(0,d-1),t=t.substring(d+2));let f=t.indexOf("/");f===-1&&(f=t.length);let p=t.indexOf("?");p===-1&&(p=t.length),e=t.substring(0,Math.min(f,p)),f<p&&(s=o6(t.substring(f,p)));const g=a6(t.substring(Math.min(t.length,p)));d=e.indexOf(":"),d>=0?(o=c==="https"||c==="wss",u=parseInt(e.substring(d+1),10)):d=e.length;const j=e.slice(0,d);if(j.toLowerCase()==="localhost")n="localhost";else if(j.split(".").length<=2)n=j;else{const v=e.indexOf(".");r=e.substring(0,v).toLowerCase(),n=e.substring(v+1),i=r}"ns"in g&&(i=g.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:o,scheme:c,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fy="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",c6=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let s;const i=new Array(8);for(s=7;s>=0;s--)i[s]=fy.charAt(n%64),n=Math.floor(n/64);ue(n===0,"Cannot push at time == 0");let o=i.join("");if(r){for(s=11;s>=0&&e[s]===63;s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(Math.random()*64);for(s=0;s<12;s++)o+=fy.charAt(e[s]);return ue(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u6{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+$t(this.snapshot.exportVal())}}class d6{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return ue(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return Ve(this._path)?null:Op(this._path)}get ref(){return new es(this._repo,this._path)}get _queryIdentifier(){const e=X0(this._queryParams),n=Np(e);return n==="{}"?"default":n}get _queryObject(){return X0(this._queryParams)}isEqual(e){if(e=_i(e),!(e instanceof am))return!1;const n=this._repo===e._repo,r=Dp(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+tk(this._path)}}class es extends am{constructor(e,n){super(e,n,new zp,!1)}get parent(){const e=jw(this._path);return e===null?null:new es(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Za{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new ct(e),r=el(this.ref,e);return new Za(this._node.getChild(n),r,At)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new Za(s,el(this.ref,r),At)))}hasChild(e){const n=new ct(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function zt(t,e){return t=_i(t),t._checkNotDeleted("ref"),e!==void 0?el(t._root,e):t._root}function el(t,e){return t=_i(t),$e(t._path)===null?W3("child","path",e):l_("child","path",e),new es(t._repo,Rt(t._path,e))}function h6(t,e){t=_i(t),c_("push",t._path),a_("push",e,t._path,!0);const n=h_(t._repo),r=c6(n),s=el(t,r),i=el(t,r);let o;return e!=null?o=f6(i,e).then(()=>i):o=Promise.resolve(i),s.then=o.then.bind(o),s.catch=o.then.bind(o,void 0),s}function f6(t,e){t=_i(t),c_("set",t._path),a_("set",e,t._path,!1);const n=new pl;return Z3(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Pr(t,e){$3("update",e,t._path);const n=new pl;return e6(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function v_(t){t=_i(t);const e=new x_(()=>{}),n=new Xu(e);return X3(t._repo,t,n).then(r=>new Za(r,new es(t._repo,t._path),t._queryParams.getIndex()))}class Xu{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new u6("value",this,new Za(e.snapshotNode,new es(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new d6(this,e,n):null}matches(e){return e instanceof Xu?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function p6(t,e,n,r,s){const i=new x_(n,void 0),o=new Xu(i);return n6(t._repo,t,o),()=>f_(t._repo,t,o)}function eo(t,e,n,r){return p6(t,"value",e)}function w_(t,e,n){f_(t._repo,t,null)}f3(es);x3(es);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m6="FIREBASE_DATABASE_EMULATOR_HOST",wf={};let g6=!1;function y6(t,e,n,r){const s=e.lastIndexOf(":"),i=e.substring(0,s),o=zu(i);t.repoInfo_=new xw(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(t.authTokenProvider_=r)}function x6(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||qr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),tn("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=hy(i,s),c=o.repoInfo,u;typeof process<"u"&&O0&&(u=O0[m6]),u?(i=`http://${u}?ns=${c.namespace}`,o=hy(i,s),c=o.repoInfo):o.repoInfo.secure;const d=new Tj(t.name,t.options,e);H3("Invalid Firebase Database URL",o),Ve(o.path)||qr("Database URL must point to the root of a Firebase Database (not including a child path).");const f=w6(c,t,d,new kj(t,n));return new _6(f,t)}function v6(t,e){const n=wf[e];(!n||n[t.key]!==t)&&qr(`Database ${e}(${t.repoInfo_}) has already been deleted.`),r6(t),delete n[t.key]}function w6(t,e,n,r){let s=wf[e.name];s||(s={},wf[e.name]=s);let i=s[t.toURLString()];return i&&qr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Y3(t,g6,n,r),s[t.toURLString()]=i,i}class _6{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Q3(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new es(this._repo,rt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(v6(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&qr("Cannot call "+e+" on a deleted database.")}}function __(t=tw(),e){const n=Jv(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=Uv("database");r&&S6(n,...r)}return n}function S6(t,e,n,r={}){t=_i(t),t._checkNotDeleted("useEmulator");const s=`${e}:${n}`,i=t._repoInternal;if(t._instanceStarted){if(s===t._repoInternal.repoInfo_.host&&$a(r,i.repoInfo_.emulatorOptions))return;qr("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&qr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Ec(Ec.OWNER);else if(r.mockUserToken){const c=typeof r.mockUserToken=="string"?r.mockUserToken:Hv(r.mockUserToken,t.app.options.projectId);o=new Ec(c)}zu(e)&&(Wv(e),Vv("Database",!0)),y6(i,s,r,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b6(t){hj(Zv),Ha(new fo("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return x6(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),Is(D0,M0,t),Is(D0,M0,"esm2020")}Ur.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Ur.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};b6();var py=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lm;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,x){function E(){}E.prototype=x.prototype,C.F=x.prototype,C.prototype=new E,C.prototype.constructor=C,C.D=function(k,T,A){for(var I=Array(arguments.length-2),J=2;J<arguments.length;J++)I[J-2]=arguments[J];return x.prototype[T].apply(k,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(C,x,E){E||(E=0);const k=Array(16);if(typeof x=="string")for(var T=0;T<16;++T)k[T]=x.charCodeAt(E++)|x.charCodeAt(E++)<<8|x.charCodeAt(E++)<<16|x.charCodeAt(E++)<<24;else for(T=0;T<16;++T)k[T]=x[E++]|x[E++]<<8|x[E++]<<16|x[E++]<<24;x=C.g[0],E=C.g[1],T=C.g[2];let A=C.g[3],I;I=x+(A^E&(T^A))+k[0]+3614090360&4294967295,x=E+(I<<7&4294967295|I>>>25),I=A+(T^x&(E^T))+k[1]+3905402710&4294967295,A=x+(I<<12&4294967295|I>>>20),I=T+(E^A&(x^E))+k[2]+606105819&4294967295,T=A+(I<<17&4294967295|I>>>15),I=E+(x^T&(A^x))+k[3]+3250441966&4294967295,E=T+(I<<22&4294967295|I>>>10),I=x+(A^E&(T^A))+k[4]+4118548399&4294967295,x=E+(I<<7&4294967295|I>>>25),I=A+(T^x&(E^T))+k[5]+1200080426&4294967295,A=x+(I<<12&4294967295|I>>>20),I=T+(E^A&(x^E))+k[6]+2821735955&4294967295,T=A+(I<<17&4294967295|I>>>15),I=E+(x^T&(A^x))+k[7]+4249261313&4294967295,E=T+(I<<22&4294967295|I>>>10),I=x+(A^E&(T^A))+k[8]+1770035416&4294967295,x=E+(I<<7&4294967295|I>>>25),I=A+(T^x&(E^T))+k[9]+2336552879&4294967295,A=x+(I<<12&4294967295|I>>>20),I=T+(E^A&(x^E))+k[10]+4294925233&4294967295,T=A+(I<<17&4294967295|I>>>15),I=E+(x^T&(A^x))+k[11]+2304563134&4294967295,E=T+(I<<22&4294967295|I>>>10),I=x+(A^E&(T^A))+k[12]+1804603682&4294967295,x=E+(I<<7&4294967295|I>>>25),I=A+(T^x&(E^T))+k[13]+4254626195&4294967295,A=x+(I<<12&4294967295|I>>>20),I=T+(E^A&(x^E))+k[14]+2792965006&4294967295,T=A+(I<<17&4294967295|I>>>15),I=E+(x^T&(A^x))+k[15]+1236535329&4294967295,E=T+(I<<22&4294967295|I>>>10),I=x+(T^A&(E^T))+k[1]+4129170786&4294967295,x=E+(I<<5&4294967295|I>>>27),I=A+(E^T&(x^E))+k[6]+3225465664&4294967295,A=x+(I<<9&4294967295|I>>>23),I=T+(x^E&(A^x))+k[11]+643717713&4294967295,T=A+(I<<14&4294967295|I>>>18),I=E+(A^x&(T^A))+k[0]+3921069994&4294967295,E=T+(I<<20&4294967295|I>>>12),I=x+(T^A&(E^T))+k[5]+3593408605&4294967295,x=E+(I<<5&4294967295|I>>>27),I=A+(E^T&(x^E))+k[10]+38016083&4294967295,A=x+(I<<9&4294967295|I>>>23),I=T+(x^E&(A^x))+k[15]+3634488961&4294967295,T=A+(I<<14&4294967295|I>>>18),I=E+(A^x&(T^A))+k[4]+3889429448&4294967295,E=T+(I<<20&4294967295|I>>>12),I=x+(T^A&(E^T))+k[9]+568446438&4294967295,x=E+(I<<5&4294967295|I>>>27),I=A+(E^T&(x^E))+k[14]+3275163606&4294967295,A=x+(I<<9&4294967295|I>>>23),I=T+(x^E&(A^x))+k[3]+4107603335&4294967295,T=A+(I<<14&4294967295|I>>>18),I=E+(A^x&(T^A))+k[8]+1163531501&4294967295,E=T+(I<<20&4294967295|I>>>12),I=x+(T^A&(E^T))+k[13]+2850285829&4294967295,x=E+(I<<5&4294967295|I>>>27),I=A+(E^T&(x^E))+k[2]+4243563512&4294967295,A=x+(I<<9&4294967295|I>>>23),I=T+(x^E&(A^x))+k[7]+1735328473&4294967295,T=A+(I<<14&4294967295|I>>>18),I=E+(A^x&(T^A))+k[12]+2368359562&4294967295,E=T+(I<<20&4294967295|I>>>12),I=x+(E^T^A)+k[5]+4294588738&4294967295,x=E+(I<<4&4294967295|I>>>28),I=A+(x^E^T)+k[8]+2272392833&4294967295,A=x+(I<<11&4294967295|I>>>21),I=T+(A^x^E)+k[11]+1839030562&4294967295,T=A+(I<<16&4294967295|I>>>16),I=E+(T^A^x)+k[14]+4259657740&4294967295,E=T+(I<<23&4294967295|I>>>9),I=x+(E^T^A)+k[1]+2763975236&4294967295,x=E+(I<<4&4294967295|I>>>28),I=A+(x^E^T)+k[4]+1272893353&4294967295,A=x+(I<<11&4294967295|I>>>21),I=T+(A^x^E)+k[7]+4139469664&4294967295,T=A+(I<<16&4294967295|I>>>16),I=E+(T^A^x)+k[10]+3200236656&4294967295,E=T+(I<<23&4294967295|I>>>9),I=x+(E^T^A)+k[13]+681279174&4294967295,x=E+(I<<4&4294967295|I>>>28),I=A+(x^E^T)+k[0]+3936430074&4294967295,A=x+(I<<11&4294967295|I>>>21),I=T+(A^x^E)+k[3]+3572445317&4294967295,T=A+(I<<16&4294967295|I>>>16),I=E+(T^A^x)+k[6]+76029189&4294967295,E=T+(I<<23&4294967295|I>>>9),I=x+(E^T^A)+k[9]+3654602809&4294967295,x=E+(I<<4&4294967295|I>>>28),I=A+(x^E^T)+k[12]+3873151461&4294967295,A=x+(I<<11&4294967295|I>>>21),I=T+(A^x^E)+k[15]+530742520&4294967295,T=A+(I<<16&4294967295|I>>>16),I=E+(T^A^x)+k[2]+3299628645&4294967295,E=T+(I<<23&4294967295|I>>>9),I=x+(T^(E|~A))+k[0]+4096336452&4294967295,x=E+(I<<6&4294967295|I>>>26),I=A+(E^(x|~T))+k[7]+1126891415&4294967295,A=x+(I<<10&4294967295|I>>>22),I=T+(x^(A|~E))+k[14]+2878612391&4294967295,T=A+(I<<15&4294967295|I>>>17),I=E+(A^(T|~x))+k[5]+4237533241&4294967295,E=T+(I<<21&4294967295|I>>>11),I=x+(T^(E|~A))+k[12]+1700485571&4294967295,x=E+(I<<6&4294967295|I>>>26),I=A+(E^(x|~T))+k[3]+2399980690&4294967295,A=x+(I<<10&4294967295|I>>>22),I=T+(x^(A|~E))+k[10]+4293915773&4294967295,T=A+(I<<15&4294967295|I>>>17),I=E+(A^(T|~x))+k[1]+2240044497&4294967295,E=T+(I<<21&4294967295|I>>>11),I=x+(T^(E|~A))+k[8]+1873313359&4294967295,x=E+(I<<6&4294967295|I>>>26),I=A+(E^(x|~T))+k[15]+4264355552&4294967295,A=x+(I<<10&4294967295|I>>>22),I=T+(x^(A|~E))+k[6]+2734768916&4294967295,T=A+(I<<15&4294967295|I>>>17),I=E+(A^(T|~x))+k[13]+1309151649&4294967295,E=T+(I<<21&4294967295|I>>>11),I=x+(T^(E|~A))+k[4]+4149444226&4294967295,x=E+(I<<6&4294967295|I>>>26),I=A+(E^(x|~T))+k[11]+3174756917&4294967295,A=x+(I<<10&4294967295|I>>>22),I=T+(x^(A|~E))+k[2]+718787259&4294967295,T=A+(I<<15&4294967295|I>>>17),I=E+(A^(T|~x))+k[9]+3951481745&4294967295,C.g[0]=C.g[0]+x&4294967295,C.g[1]=C.g[1]+(T+(I<<21&4294967295|I>>>11))&4294967295,C.g[2]=C.g[2]+T&4294967295,C.g[3]=C.g[3]+A&4294967295}r.prototype.v=function(C,x){x===void 0&&(x=C.length);const E=x-this.blockSize,k=this.C;let T=this.h,A=0;for(;A<x;){if(T==0)for(;A<=E;)s(this,C,A),A+=this.blockSize;if(typeof C=="string"){for(;A<x;)if(k[T++]=C.charCodeAt(A++),T==this.blockSize){s(this,k),T=0;break}}else for(;A<x;)if(k[T++]=C[A++],T==this.blockSize){s(this,k),T=0;break}}this.h=T,this.o+=x},r.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var x=1;x<C.length-8;++x)C[x]=0;x=this.o*8;for(var E=C.length-8;E<C.length;++E)C[E]=x&255,x/=256;for(this.v(C),C=Array(16),x=0,E=0;E<4;++E)for(let k=0;k<32;k+=8)C[x++]=this.g[E]>>>k&255;return C};function i(C,x){var E=c;return Object.prototype.hasOwnProperty.call(E,C)?E[C]:E[C]=x(C)}function o(C,x){this.h=x;const E=[];let k=!0;for(let T=C.length-1;T>=0;T--){const A=C[T]|0;k&&A==x||(E[T]=A,k=!1)}this.g=E}var c={};function u(C){return-128<=C&&C<128?i(C,function(x){return new o([x|0],x<0?-1:0)}):new o([C|0],C<0?-1:0)}function d(C){if(isNaN(C)||!isFinite(C))return p;if(C<0)return R(d(-C));const x=[];let E=1;for(let k=0;C>=E;k++)x[k]=C/E|0,E*=4294967296;return new o(x,0)}function f(C,x){if(C.length==0)throw Error("number format error: empty string");if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(C.charAt(0)=="-")return R(f(C.substring(1),x));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const E=d(Math.pow(x,8));let k=p;for(let A=0;A<C.length;A+=8){var T=Math.min(8,C.length-A);const I=parseInt(C.substring(A,A+T),x);T<8?(T=d(Math.pow(x,T)),k=k.j(T).add(d(I))):(k=k.j(E),k=k.add(d(I)))}return k}var p=u(0),g=u(1),j=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-R(this).m();let C=0,x=1;for(let E=0;E<this.g.length;E++){const k=this.i(E);C+=(k>=0?k:4294967296+k)*x,x*=4294967296}return C},t.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(v(this))return"0";if(N(this))return"-"+R(this).toString(C);const x=d(Math.pow(C,6));var E=this;let k="";for(;;){const T=P(E,x).g;E=b(E,T.j(x));let A=((E.g.length>0?E.g[0]:E.h)>>>0).toString(C);if(E=T,v(E))return A+k;for(;A.length<6;)A="0"+A;k=A+k}},t.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function v(C){if(C.h!=0)return!1;for(let x=0;x<C.g.length;x++)if(C.g[x]!=0)return!1;return!0}function N(C){return C.h==-1}t.l=function(C){return C=b(this,C),N(C)?-1:v(C)?0:1};function R(C){const x=C.g.length,E=[];for(let k=0;k<x;k++)E[k]=~C.g[k];return new o(E,~C.h).add(g)}t.abs=function(){return N(this)?R(this):this},t.add=function(C){const x=Math.max(this.g.length,C.g.length),E=[];let k=0;for(let T=0;T<=x;T++){let A=k+(this.i(T)&65535)+(C.i(T)&65535),I=(A>>>16)+(this.i(T)>>>16)+(C.i(T)>>>16);k=I>>>16,A&=65535,I&=65535,E[T]=I<<16|A}return new o(E,E[E.length-1]&-2147483648?-1:0)};function b(C,x){return C.add(R(x))}t.j=function(C){if(v(this)||v(C))return p;if(N(this))return N(C)?R(this).j(R(C)):R(R(this).j(C));if(N(C))return R(this.j(R(C)));if(this.l(j)<0&&C.l(j)<0)return d(this.m()*C.m());const x=this.g.length+C.g.length,E=[];for(var k=0;k<2*x;k++)E[k]=0;for(k=0;k<this.g.length;k++)for(let T=0;T<C.g.length;T++){const A=this.i(k)>>>16,I=this.i(k)&65535,J=C.i(T)>>>16,be=C.i(T)&65535;E[2*k+2*T]+=I*be,w(E,2*k+2*T),E[2*k+2*T+1]+=A*be,w(E,2*k+2*T+1),E[2*k+2*T+1]+=I*J,w(E,2*k+2*T+1),E[2*k+2*T+2]+=A*J,w(E,2*k+2*T+2)}for(C=0;C<x;C++)E[C]=E[2*C+1]<<16|E[2*C];for(C=x;C<2*x;C++)E[C]=0;return new o(E,0)};function w(C,x){for(;(C[x]&65535)!=C[x];)C[x+1]+=C[x]>>>16,C[x]&=65535,x++}function _(C,x){this.g=C,this.h=x}function P(C,x){if(v(x))throw Error("division by zero");if(v(C))return new _(p,p);if(N(C))return x=P(R(C),x),new _(R(x.g),R(x.h));if(N(x))return x=P(C,R(x)),new _(R(x.g),x.h);if(C.g.length>30){if(N(C)||N(x))throw Error("slowDivide_ only works with positive integers.");for(var E=g,k=x;k.l(C)<=0;)E=H(E),k=H(k);var T=X(E,1),A=X(k,1);for(k=X(k,2),E=X(E,2);!v(k);){var I=A.add(k);I.l(C)<=0&&(T=T.add(E),A=I),k=X(k,1),E=X(E,1)}return x=b(C,T.j(x)),new _(T,x)}for(T=p;C.l(x)>=0;){for(E=Math.max(1,Math.floor(C.m()/x.m())),k=Math.ceil(Math.log(E)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),A=d(E),I=A.j(x);N(I)||I.l(C)>0;)E-=k,A=d(E),I=A.j(x);v(A)&&(A=g),T=T.add(A),C=b(C,I)}return new _(T,C)}t.B=function(C){return P(this,C).h},t.and=function(C){const x=Math.max(this.g.length,C.g.length),E=[];for(let k=0;k<x;k++)E[k]=this.i(k)&C.i(k);return new o(E,this.h&C.h)},t.or=function(C){const x=Math.max(this.g.length,C.g.length),E=[];for(let k=0;k<x;k++)E[k]=this.i(k)|C.i(k);return new o(E,this.h|C.h)},t.xor=function(C){const x=Math.max(this.g.length,C.g.length),E=[];for(let k=0;k<x;k++)E[k]=this.i(k)^C.i(k);return new o(E,this.h^C.h)};function H(C){const x=C.g.length+1,E=[];for(let k=0;k<x;k++)E[k]=C.i(k)<<1|C.i(k-1)>>>31;return new o(E,C.h)}function X(C,x){const E=x>>5;x%=32;const k=C.g.length-E,T=[];for(let A=0;A<k;A++)T[A]=x>0?C.i(A+E)>>>x|C.i(A+E+1)<<32-x:C.i(A+E);return new o(T,C.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,lm=o}).apply(typeof py<"u"?py:typeof self<"u"?self:typeof window<"u"?window:{});var sc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof sc=="object"&&sc];for(var h=0;h<a.length;++h){var m=a[h];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var m=r;a=a.split(".");for(var S=0;S<a.length-1;S++){var z=a[S];if(!(z in m))break e;m=m[z]}a=a[a.length-1],S=m[a],h=h(S),h!=S&&h!=null&&e(m,a,{configurable:!0,writable:!0,value:h})}}s("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(a){return a||function(h){var m=[],S;for(S in h)Object.prototype.hasOwnProperty.call(h,S)&&m.push([S,h[S]]);return m}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function c(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function u(a,h,m){return a.call.apply(a.bind,arguments)}function d(a,h,m){return d=u,d.apply(null,arguments)}function f(a,h){var m=Array.prototype.slice.call(arguments,1);return function(){var S=m.slice();return S.push.apply(S,arguments),a.apply(this,S)}}function p(a,h){function m(){}m.prototype=h.prototype,a.Z=h.prototype,a.prototype=new m,a.prototype.constructor=a,a.Ob=function(S,z,V){for(var fe=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)fe[Ue-2]=arguments[Ue];return h.prototype[z].apply(S,fe)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function j(a){const h=a.length;if(h>0){const m=Array(h);for(let S=0;S<h;S++)m[S]=a[S];return m}return[]}function v(a,h){for(let S=1;S<arguments.length;S++){const z=arguments[S];var m=typeof z;if(m=m!="object"?m:z?Array.isArray(z)?"array":m:"null",m=="array"||m=="object"&&typeof z.length=="number"){m=a.length||0;const V=z.length||0;a.length=m+V;for(let fe=0;fe<V;fe++)a[m+fe]=z[fe]}else a.push(z)}}class N{constructor(h,m){this.i=h,this.j=m,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function R(a){o.setTimeout(()=>{throw a},0)}function b(){var a=C;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class w{constructor(){this.h=this.g=null}add(h,m){const S=_.get();S.set(h,m),this.h?this.h.next=S:this.g=S,this.h=S}}var _=new N(()=>new P,a=>a.reset());class P{constructor(){this.next=this.g=this.h=null}set(h,m){this.h=h,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let H,X=!1,C=new w,x=()=>{const a=Promise.resolve(void 0);H=()=>{a.then(E)}};function E(){for(var a;a=b();){try{a.h.call(a.g)}catch(m){R(m)}var h=_;h.j(a),h.h<100&&(h.h++,a.next=h.g,h.g=a)}X=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function T(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}T.prototype.h=function(){this.defaultPrevented=!0};var A=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const m=()=>{};o.addEventListener("test",m,h),o.removeEventListener("test",m,h)}catch{}return a}();function I(a){return/^[\s\xa0]*$/.test(a)}function J(a,h){T.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,h)}p(J,T),J.prototype.init=function(a,h){const m=this.type=a.type,S=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget,h||(m=="mouseover"?h=a.fromElement:m=="mouseout"&&(h=a.toElement)),this.relatedTarget=h,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&J.Z.h.call(this)},J.prototype.h=function(){J.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var be="closure_listenable_"+(Math.random()*1e6|0),G=0;function ye(a,h,m,S,z){this.listener=a,this.proxy=null,this.src=h,this.type=m,this.capture=!!S,this.ha=z,this.key=++G,this.da=this.fa=!1}function K(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function $(a,h,m){for(const S in a)h.call(m,a[S],S,a)}function ee(a,h){for(const m in a)h.call(void 0,a[m],m,a)}function B(a){const h={};for(const m in a)h[m]=a[m];return h}const ce="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ve(a,h){let m,S;for(let z=1;z<arguments.length;z++){S=arguments[z];for(m in S)a[m]=S[m];for(let V=0;V<ce.length;V++)m=ce[V],Object.prototype.hasOwnProperty.call(S,m)&&(a[m]=S[m])}}function we(a){this.src=a,this.g={},this.h=0}we.prototype.add=function(a,h,m,S,z){const V=a.toString();a=this.g[V],a||(a=this.g[V]=[],this.h++);const fe=L(a,h,S,z);return fe>-1?(h=a[fe],m||(h.fa=!1)):(h=new ye(h,this.src,V,!!S,z),h.fa=m,a.push(h)),h};function he(a,h){const m=h.type;if(m in a.g){var S=a.g[m],z=Array.prototype.indexOf.call(S,h,void 0),V;(V=z>=0)&&Array.prototype.splice.call(S,z,1),V&&(K(h),a.g[m].length==0&&(delete a.g[m],a.h--))}}function L(a,h,m,S){for(let z=0;z<a.length;++z){const V=a[z];if(!V.da&&V.listener==h&&V.capture==!!m&&V.ha==S)return z}return-1}var de="closure_lm_"+(Math.random()*1e6|0),M={};function je(a,h,m,S,z){if(Array.isArray(h)){for(let V=0;V<h.length;V++)je(a,h[V],m,S,z);return null}return m=O(m),a&&a[be]?a.J(h,m,c(S)?!!S.capture:!1,z):Q(a,h,m,!1,S,z)}function Q(a,h,m,S,z,V){if(!h)throw Error("Invalid event type");const fe=c(z)?!!z.capture:!!z;let Ue=ae(a);if(Ue||(a[de]=Ue=new we(a)),m=Ue.add(h,m,S,fe,V),m.proxy)return m;if(S=ge(),m.proxy=S,S.src=a,S.listener=m,a.addEventListener)A||(z=fe),z===void 0&&(z=!1),a.addEventListener(h.toString(),S,z);else if(a.attachEvent)a.attachEvent(te(h.toString()),S);else if(a.addListener&&a.removeListener)a.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return m}function ge(){function a(m){return h.call(a.src,a.listener,m)}const h=ne;return a}function U(a,h,m,S,z){if(Array.isArray(h))for(var V=0;V<h.length;V++)U(a,h[V],m,S,z);else S=c(S)?!!S.capture:!!S,m=O(m),a&&a[be]?(a=a.i,V=String(h).toString(),V in a.g&&(h=a.g[V],m=L(h,m,S,z),m>-1&&(K(h[m]),Array.prototype.splice.call(h,m,1),h.length==0&&(delete a.g[V],a.h--)))):a&&(a=ae(a))&&(h=a.g[h.toString()],a=-1,h&&(a=L(h,m,S,z)),(m=a>-1?h[a]:null)&&Y(m))}function Y(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[be])he(h.i,a);else{var m=a.type,S=a.proxy;h.removeEventListener?h.removeEventListener(m,S,a.capture):h.detachEvent?h.detachEvent(te(m),S):h.addListener&&h.removeListener&&h.removeListener(S),(m=ae(h))?(he(m,a),m.h==0&&(m.src=null,h[de]=null)):K(a)}}}function te(a){return a in M?M[a]:M[a]="on"+a}function ne(a,h){if(a.da)a=!0;else{h=new J(h,this);const m=a.listener,S=a.ha||a.src;a.fa&&Y(a),a=m.call(S,h)}return a}function ae(a){return a=a[de],a instanceof we?a:null}var _e="__closure_events_fn_"+(Math.random()*1e9>>>0);function O(a){return typeof a=="function"?a:(a[_e]||(a[_e]=function(h){return a.handleEvent(h)}),a[_e])}function F(){k.call(this),this.i=new we(this),this.M=this,this.G=null}p(F,k),F.prototype[be]=!0,F.prototype.removeEventListener=function(a,h,m,S){U(this,a,h,m,S)};function q(a,h){var m,S=a.G;if(S)for(m=[];S;S=S.G)m.push(S);if(a=a.M,S=h.type||h,typeof h=="string")h=new T(h,a);else if(h instanceof T)h.target=h.target||a;else{var z=h;h=new T(S,a),ve(h,z)}z=!0;let V,fe;if(m)for(fe=m.length-1;fe>=0;fe--)V=h.g=m[fe],z=re(V,S,!0,h)&&z;if(V=h.g=a,z=re(V,S,!0,h)&&z,z=re(V,S,!1,h)&&z,m)for(fe=0;fe<m.length;fe++)V=h.g=m[fe],z=re(V,S,!1,h)&&z}F.prototype.N=function(){if(F.Z.N.call(this),this.i){var a=this.i;for(const h in a.g){const m=a.g[h];for(let S=0;S<m.length;S++)K(m[S]);delete a.g[h],a.h--}}this.G=null},F.prototype.J=function(a,h,m,S){return this.i.add(String(a),h,!1,m,S)},F.prototype.K=function(a,h,m,S){return this.i.add(String(a),h,!0,m,S)};function re(a,h,m,S){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();let z=!0;for(let V=0;V<h.length;++V){const fe=h[V];if(fe&&!fe.da&&fe.capture==m){const Ue=fe.listener,Ft=fe.ha||fe.src;fe.fa&&he(a.i,fe),z=Ue.call(Ft,S)!==!1&&z}}return z&&!S.defaultPrevented}function pe(a,h){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=d(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:o.setTimeout(a,h||0)}function Ee(a){a.g=pe(()=>{a.g=null,a.i&&(a.i=!1,Ee(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class se extends k{constructor(h,m){super(),this.m=h,this.l=m,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Ee(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(a){k.call(this),this.h=a,this.g={}}p(le,k);var Ce=[];function qe(a){$(a.g,function(h,m){this.g.hasOwnProperty(m)&&Y(h)},a),a.g={}}le.prototype.N=function(){le.Z.N.call(this),qe(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var lt=o.JSON.stringify,mt=o.JSON.parse,ze=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function vt(){}function Ye(){}var Qt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function wt(){T.call(this,"d")}p(wt,T);function kt(){T.call(this,"c")}p(kt,T);var Jt={},dn=null;function _n(){return dn=dn||new F}Jt.Ia="serverreachability";function Ei(a){T.call(this,Jt.Ia,a)}p(Ei,T);function zn(a){const h=_n();q(h,new Ei(h))}Jt.STAT_EVENT="statevent";function fr(a,h){T.call(this,Jt.STAT_EVENT,a),this.stat=h}p(fr,T);function dt(a){const h=_n();q(h,new fr(h,a))}Jt.Ja="timingevent";function pr(a,h){T.call(this,Jt.Ja,a),this.size=h}p(pr,T);function Pt(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},h)}function Tr(){this.g=!0}Tr.prototype.ua=function(){this.g=!1};function ts(a,h,m,S,z,V){a.info(function(){if(a.g)if(V){var fe="",Ue=V.split("&");for(let ut=0;ut<Ue.length;ut++){var Ft=Ue[ut].split("=");if(Ft.length>1){const Ht=Ft[0];Ft=Ft[1];const gr=Ht.split("_");fe=gr.length>=2&&gr[1]=="type"?fe+(Ht+"="+Ft+"&"):fe+(Ht+"=redacted&")}}}else fe=null;else fe=V;return"XMLHTTP REQ ("+S+") [attempt "+z+"]: "+h+`
`+m+`
`+fe})}function Nr(a,h,m,S,z,V,fe){a.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+z+"]: "+h+`
`+m+`
`+V+" "+fe})}function Xt(a,h,m,S){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+pm(a,m)+(S?" "+S:"")})}function fm(a,h){a.info(function(){return"TIMEOUT: "+h})}Tr.prototype.info=function(){};function pm(a,h){if(!a.g)return h;if(!h)return null;try{const V=JSON.parse(h);if(V){for(a=0;a<V.length;a++)if(Array.isArray(V[a])){var m=V[a];if(!(m.length<2)){var S=m[1];if(Array.isArray(S)&&!(S.length<1)){var z=S[0];if(z!="noop"&&z!="stop"&&z!="close")for(let fe=1;fe<S.length;fe++)S[fe]=""}}}}return lt(V)}catch{return h}}var Ci={NO_ERROR:0,TIMEOUT:8},Ao={},bl;function Po(){}p(Po,vt),Po.prototype.g=function(){return new XMLHttpRequest},bl=new Po;function Bn(a){return encodeURIComponent(String(a))}function El(a){var h=1;a=a.split(":");const m=[];for(;h>0&&a.length;)m.push(a.shift()),h--;return a.length&&m.push(a.join(":")),m}function mr(a,h,m,S){this.j=a,this.i=h,this.l=m,this.S=S||1,this.V=new le(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new $s}function $s(){this.i=null,this.g="",this.h=!1}var Cl={},Oo={};function Ii(a,h,m){a.M=1,a.A=Tt(De(h)),a.u=m,a.R=!0,Il(a,null)}function Il(a,h){a.F=Date.now(),Qn(a),a.B=De(a.A);var m=a.B,S=a.S;Array.isArray(S)||(S=[String(S)]),vm(m.i,"t",S),a.C=0,m=a.j.L,a.h=new $s,a.g=Lm(a.j,m?h:null,!a.u),a.P>0&&(a.O=new se(d(a.Y,a,a.g),a.P)),h=a.V,m=a.g,S=a.ba;var z="readystatechange";Array.isArray(z)||(z&&(Ce[0]=z.toString()),z=Ce);for(let V=0;V<z.length;V++){const fe=je(m,z[V],S||h.handleEvent,!1,h.h||h);if(!fe)break;h.g[fe.key]=fe}h=a.J?B(a.J):{},a.u?(a.v||(a.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,h)):(a.v="GET",a.g.ea(a.B,a.v,null,h)),zn(),ts(a.i,a.v,a.B,a.l,a.S,a.u)}mr.prototype.ba=function(a){a=a.target;const h=this.O;h&&ss(a)==3?h.j():this.Y(a)},mr.prototype.Y=function(a){try{if(a==this.g)e:{const Ue=ss(this.g),Ft=this.g.ya(),ut=this.g.ca();if(!(Ue<3)&&(Ue!=3||this.g&&(this.h.h||this.g.la()||Im(this.g)))){this.K||Ue!=4||Ft==7||(Ft==8||ut<=0?zn(3):zn(2)),D(this);var h=this.g.ca();this.X=h;var m=Zu(this);if(this.o=h==200,Nr(this.i,this.v,this.B,this.l,this.S,Ue,h),this.o){if(this.U&&!this.L){t:{if(this.g){var S,z=this.g;if((S=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(S)){var V=S;break t}}V=null}if(a=V)Xt(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Be(this,a);else{this.o=!1,this.m=3,dt(12),Ie(this),ie(this);break e}}if(this.R){a=!0;let Ht;for(;!this.K&&this.C<m.length;)if(Ht=kl(this,m),Ht==Oo){Ue==4&&(this.m=4,dt(14),a=!1),Xt(this.i,this.l,null,"[Incomplete Response]");break}else if(Ht==Cl){this.m=4,dt(15),Xt(this.i,this.l,m,"[Invalid Chunk]"),a=!1;break}else Xt(this.i,this.l,Ht,null),Be(this,Ht);if(jl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ue!=4||m.length!=0||this.h.h||(this.m=1,dt(16),a=!1),this.o=this.o&&a,!a)Xt(this.i,this.l,m,"[Invalid Chunked Response]"),Ie(this),ie(this);else if(m.length>0&&!this.W){this.W=!0;var fe=this.j;fe.g==this&&fe.aa&&!fe.P&&(fe.j.info("Great, no buffering proxy detected. Bytes received: "+m.length),od(fe),fe.P=!0,dt(11))}}else Xt(this.i,this.l,m,null),Be(this,m);Ue==4&&Ie(this),this.o&&!this.K&&(Ue==4?Pm(this.j,this):(this.o=!1,Qn(this)))}else L_(this.g),h==400&&m.indexOf("Unknown SID")>0?(this.m=3,dt(12)):(this.m=0,dt(13)),Ie(this),ie(this)}}}catch{}finally{}};function Zu(a){if(!jl(a))return a.g.la();const h=Im(a.g);if(h==="")return"";let m="";const S=h.length,z=ss(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return Ie(a),ie(a),"";a.h.i=new o.TextDecoder}for(let V=0;V<S;V++)a.h.h=!0,m+=a.h.i.decode(h[V],{stream:!(z&&V==S-1)});return h.length=0,a.h.g+=m,a.C=0,a.h.g}function jl(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function kl(a,h){var m=a.C,S=h.indexOf(`
`,m);return S==-1?Oo:(m=Number(h.substring(m,S)),isNaN(m)?Cl:(S+=1,S+m>h.length?Oo:(h=h.slice(S,S+m),a.C=S+m,h)))}mr.prototype.cancel=function(){this.K=!0,Ie(this)};function Qn(a){a.T=Date.now()+a.H,Tl(a,a.H)}function Tl(a,h){if(a.D!=null)throw Error("WatchDog timer not null");a.D=Pt(d(a.aa,a),h)}function D(a){a.D&&(o.clearTimeout(a.D),a.D=null)}mr.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(fm(this.i,this.B),this.M!=2&&(zn(),dt(17)),Ie(this),this.m=2,ie(this)):Tl(this,this.T-a)};function ie(a){a.j.I==0||a.K||Pm(a.j,a)}function Ie(a){D(a);var h=a.O;h&&typeof h.dispose=="function"&&h.dispose(),a.O=null,qe(a.V),a.g&&(h=a.g,a.g=null,h.abort(),h.dispose())}function Be(a,h){try{var m=a.j;if(m.I!=0&&(m.g==a||Je(m.h,a))){if(!a.L&&Je(m.h,a)&&m.I==3){try{var S=m.Ba.g.parse(h)}catch{S=null}if(Array.isArray(S)&&S.length==3){var z=S;if(z[0]==0){e:if(!m.v){if(m.g)if(m.g.F+3e3<a.F)Dl(m),Pl(m);else break e;id(m),dt(18)}}else m.xa=z[1],0<m.xa-m.K&&z[2]<37500&&m.F&&m.A==0&&!m.C&&(m.C=Pt(d(m.Va,m),6e3));Ne(m.h)<=1&&m.ta&&(m.ta=void 0)}else Hs(m,11)}else if((a.L||m.g==a)&&Dl(m),!I(h))for(z=m.Ba.g.parse(h),h=0;h<z.length;h++){let ut=z[h];const Ht=ut[0];if(!(Ht<=m.K))if(m.K=Ht,ut=ut[1],m.I==2)if(ut[0]=="c"){m.M=ut[1],m.ba=ut[2];const gr=ut[3];gr!=null&&(m.ka=gr,m.j.info("VER="+m.ka));const Vs=ut[4];Vs!=null&&(m.za=Vs,m.j.info("SVER="+m.za));const is=ut[5];is!=null&&typeof is=="number"&&is>0&&(S=1.5*is,m.O=S,m.j.info("backChannelRequestTimeoutMs_="+S)),S=m;const os=a.g;if(os){const Ml=os.g?os.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ml){var V=S.h;V.g||Ml.indexOf("spdy")==-1&&Ml.indexOf("quic")==-1&&Ml.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Me(V,V.h),V.h=null))}if(S.G){const ad=os.g?os.g.getResponseHeader("X-HTTP-Session-Id"):null;ad&&(S.wa=ad,Oe(S.J,S.G,ad))}}m.I=3,m.l&&m.l.ra(),m.aa&&(m.T=Date.now()-a.F,m.j.info("Handshake RTT: "+m.T+"ms")),S=m;var fe=a;if(S.na=Mm(S,S.L?S.ba:null,S.W),fe.L){ke(S.h,fe);var Ue=fe,Ft=S.O;Ft&&(Ue.H=Ft),Ue.D&&(D(Ue),Qn(Ue)),S.g=fe}else Rm(S);m.i.length>0&&Ol(m)}else ut[0]!="stop"&&ut[0]!="close"||Hs(m,7);else m.I==3&&(ut[0]=="stop"||ut[0]=="close"?ut[0]=="stop"?Hs(m,7):sd(m):ut[0]!="noop"&&m.l&&m.l.qa(ut),m.A=0)}}zn(4)}catch{}}var Le=class{constructor(a,h){this.g=a,this.map=h}};function st(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Qe(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Ne(a){return a.h?1:a.g?a.g.size:0}function Je(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function Me(a,h){a.g?a.g.add(h):a.h=h}function ke(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}st.prototype.cancel=function(){if(this.i=Te(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Te(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const m of a.g.values())h=h.concat(m.G);return h}return j(a.i)}var He=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gt(a,h){if(a){a=a.split("&");for(let m=0;m<a.length;m++){const S=a[m].indexOf("=");let z,V=null;S>=0?(z=a[m].substring(0,S),V=a[m].substring(S+1)):z=a[m],h(z,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Pe(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;a instanceof Pe?(this.l=a.l,me(this,a.j),this.o=a.o,this.g=a.g,Re(this,a.u),this.h=a.h,nt(this,wm(a.i)),this.m=a.m):a&&(h=String(a).match(He))?(this.l=!1,me(this,h[1]||"",!0),this.o=St(h[2]||""),this.g=St(h[3]||"",!0),Re(this,h[4]),this.h=St(h[5]||"",!0),nt(this,h[6]||"",!0),this.m=St(h[7]||"")):(this.l=!1,this.i=new Do(null,this.l))}Pe.prototype.toString=function(){const a=[];var h=this.j;h&&a.push(it(h,ns,!0),":");var m=this.g;return(m||h=="file")&&(a.push("//"),(h=this.o)&&a.push(it(h,ns,!0),"@"),a.push(Bn(m).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.u,m!=null&&a.push(":",String(m))),(m=this.h)&&(this.g&&m.charAt(0)!="/"&&a.push("/"),a.push(it(m,m.charAt(0)=="/"?ed:Nl,!0))),(m=this.i.toString())&&a.push("?",m),(m=this.m)&&a.push("#",it(m,mm)),a.join("")},Pe.prototype.resolve=function(a){const h=De(this);let m=!!a.j;m?me(h,a.j):m=!!a.o,m?h.o=a.o:m=!!a.g,m?h.g=a.g:m=a.u!=null;var S=a.h;if(m)Re(h,a.u);else if(m=!!a.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var z=h.h.lastIndexOf("/");z!=-1&&(S=h.h.slice(0,z+1)+S)}if(z=S,z==".."||z==".")S="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){S=z.lastIndexOf("/",0)==0,z=z.split("/");const V=[];for(let fe=0;fe<z.length;){const Ue=z[fe++];Ue=="."?S&&fe==z.length&&V.push(""):Ue==".."?((V.length>1||V.length==1&&V[0]!="")&&V.pop(),S&&fe==z.length&&V.push("")):(V.push(Ue),S=!0)}S=V.join("/")}else S=z}return m?h.h=S:m=a.i.toString()!=="",m?nt(h,wm(a.i)):m=!!a.m,m&&(h.m=a.m),h};function De(a){return new Pe(a)}function me(a,h,m){a.j=m?St(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function Re(a,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);a.u=h}else a.u=null}function nt(a,h,m){h instanceof Do?(a.i=h,R_(a.i,a.l)):(m||(h=it(h,td)),a.i=new Do(h,a.l))}function Oe(a,h,m){a.i.set(h,m)}function Tt(a){return Oe(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function St(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function it(a,h,m){return typeof a=="string"?(a=encodeURI(a).replace(h,Jn),m&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Jn(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var ns=/[#\/\?@]/g,Nl=/[#\?:]/g,ed=/[#\?]/g,td=/[#\?@]/g,mm=/#/g;function Do(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function Ws(a){a.g||(a.g=new Map,a.h=0,a.i&&gt(a.i,function(h,m){a.add(decodeURIComponent(h.replace(/\+/g," ")),m)}))}t=Do.prototype,t.add=function(a,h){Ws(this),this.i=null,a=ji(this,a);let m=this.g.get(a);return m||this.g.set(a,m=[]),m.push(h),this.h+=1,this};function gm(a,h){Ws(a),h=ji(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function ym(a,h){return Ws(a),h=ji(a,h),a.g.has(h)}t.forEach=function(a,h){Ws(this),this.g.forEach(function(m,S){m.forEach(function(z){a.call(h,z,S,this)},this)},this)};function xm(a,h){Ws(a);let m=[];if(typeof h=="string")ym(a,h)&&(m=m.concat(a.g.get(ji(a,h))));else for(a=Array.from(a.g.values()),h=0;h<a.length;h++)m=m.concat(a[h]);return m}t.set=function(a,h){return Ws(this),this.i=null,a=ji(this,a),ym(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=xm(this,a),a.length>0?String(a[0]):h):h};function vm(a,h,m){gm(a,h),m.length>0&&(a.i=null,a.g.set(ji(a,h),j(m)),a.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(let S=0;S<h.length;S++){var m=h[S];const z=Bn(m);m=xm(this,m);for(let V=0;V<m.length;V++){let fe=z;m[V]!==""&&(fe+="="+Bn(m[V])),a.push(fe)}}return this.i=a.join("&")};function wm(a){const h=new Do;return h.i=a.i,a.g&&(h.g=new Map(a.g),h.h=a.h),h}function ji(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function R_(a,h){h&&!a.j&&(Ws(a),a.i=null,a.g.forEach(function(m,S){const z=S.toLowerCase();S!=z&&(gm(this,S),vm(this,z,m))},a)),a.j=h}function A_(a,h){const m=new Tr;if(o.Image){const S=new Image;S.onload=f(rs,m,"TestLoadImage: loaded",!0,h,S),S.onerror=f(rs,m,"TestLoadImage: error",!1,h,S),S.onabort=f(rs,m,"TestLoadImage: abort",!1,h,S),S.ontimeout=f(rs,m,"TestLoadImage: timeout",!1,h,S),o.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=a}else h(!1)}function P_(a,h){const m=new Tr,S=new AbortController,z=setTimeout(()=>{S.abort(),rs(m,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:S.signal}).then(V=>{clearTimeout(z),V.ok?rs(m,"TestPingServer: ok",!0,h):rs(m,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(z),rs(m,"TestPingServer: error",!1,h)})}function rs(a,h,m,S,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),S(m)}catch{}}function O_(){this.g=new ze}function nd(a){this.i=a.Sb||null,this.h=a.ab||!1}p(nd,vt),nd.prototype.g=function(){return new Rl(this.i,this.h)};function Rl(a,h){F.call(this),this.H=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Rl,F),t=Rl.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=h,this.readyState=1,Lo(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(h.body=a),(this.H||o).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Mo(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Lo(this)),this.g&&(this.readyState=3,Lo(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;_m(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function _m(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?Mo(this):Lo(this),this.readyState==3&&_m(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,Mo(this))},t.Na=function(a){this.g&&(this.response=a,Mo(this))},t.ga=function(){this.g&&Mo(this)};function Mo(a){a.readyState=4,a.l=null,a.j=null,a.B=null,Lo(a)}t.setRequestHeader=function(a,h){this.A.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var m=h.next();!m.done;)m=m.value,a.push(m[0]+": "+m[1]),m=h.next();return a.join(`\r
`)};function Lo(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Rl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Sm(a){let h="";return $(a,function(m,S){h+=S,h+=":",h+=m,h+=`\r
`}),h}function rd(a,h,m){e:{for(S in m){var S=!1;break e}S=!0}S||(m=Sm(m),typeof a=="string"?m!=null&&Bn(m):Oe(a,h,m))}function Ot(a){F.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Ot,F);var D_=/^https?$/i,M_=["POST","PUT"];t=Ot.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,h,m,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():bl.g(),this.g.onreadystatechange=g(d(this.Ca,this));try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(V){bm(this,V);return}if(a=m||"",m=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var z in S)m.set(z,S[z]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const V of S.keys())m.set(V,S.get(V));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(m.keys()).find(V=>V.toLowerCase()=="content-type"),z=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(M_,h,void 0)>=0)||S||z||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,fe]of m)this.g.setRequestHeader(V,fe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(V){bm(this,V)}};function bm(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.o=5,Em(a),Al(a)}function Em(a){a.A||(a.A=!0,q(a,"complete"),q(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,q(this,"complete"),q(this,"abort"),Al(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Al(this,!0)),Ot.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Cm(this):this.Xa())},t.Xa=function(){Cm(this)};function Cm(a){if(a.h&&typeof i<"u"){if(a.v&&ss(a)==4)setTimeout(a.Ca.bind(a),0);else if(q(a,"readystatechange"),ss(a)==4){a.h=!1;try{const V=a.ca();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var m;if(!(m=h)){var S;if(S=V===0){let fe=String(a.D).match(He)[1]||null;!fe&&o.self&&o.self.location&&(fe=o.self.location.protocol.slice(0,-1)),S=!D_.test(fe?fe.toLowerCase():"")}m=S}if(m)q(a,"complete"),q(a,"success");else{a.o=6;try{var z=ss(a)>2?a.g.statusText:""}catch{z=""}a.l=z+" ["+a.ca()+"]",Em(a)}}finally{Al(a)}}}}function Al(a,h){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const m=a.g;a.g=null,h||q(a,"ready");try{m.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ss(a){return a.g?a.g.readyState:0}t.ca=function(){try{return ss(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),mt(h)}};function Im(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function L_(a){const h={};a=(a.g&&ss(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<a.length;S++){if(I(a[S]))continue;var m=El(a[S]);const z=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const V=h[z]||[];h[z]=V,V.push(m)}ee(h,function(S){return S.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fo(a,h,m){return m&&m.internalChannelParams&&m.internalChannelParams[a]||h}function jm(a){this.za=0,this.i=[],this.j=new Tr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Fo("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Fo("baseRetryDelayMs",5e3,a),this.Za=Fo("retryDelaySeedMs",1e4,a),this.Ta=Fo("forwardChannelMaxRetries",2,a),this.va=Fo("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new st(a&&a.concurrentRequestLimit),this.Ba=new O_,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=jm.prototype,t.ka=8,t.I=1,t.connect=function(a,h,m,S){dt(0),this.W=a,this.H=h||{},m&&S!==void 0&&(this.H.OSID=m,this.H.OAID=S),this.F=this.X,this.J=Mm(this,null,this.W),Ol(this)};function sd(a){if(km(a),a.I==3){var h=a.V++,m=De(a.J);if(Oe(m,"SID",a.M),Oe(m,"RID",h),Oe(m,"TYPE","terminate"),zo(a,m),h=new mr(a,a.j,h),h.M=2,h.A=Tt(De(m)),m=!1,o.navigator&&o.navigator.sendBeacon)try{m=o.navigator.sendBeacon(h.A.toString(),"")}catch{}!m&&o.Image&&(new Image().src=h.A,m=!0),m||(h.g=Lm(h.j,null),h.g.ea(h.A)),h.F=Date.now(),Qn(h)}Dm(a)}function Pl(a){a.g&&(od(a),a.g.cancel(),a.g=null)}function km(a){Pl(a),a.v&&(o.clearTimeout(a.v),a.v=null),Dl(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function Ol(a){if(!Qe(a.h)&&!a.m){a.m=!0;var h=a.Ea;H||x(),X||(H(),X=!0),C.add(h,a),a.D=0}}function F_(a,h){return Ne(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=h.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=Pt(d(a.Ea,a,h),Om(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const z=new mr(this,this.j,a);let V=this.o;if(this.U&&(V?(V=B(V),ve(V,this.U)):V=this.U),this.u!==null||this.R||(z.J=V,V=null),this.S)e:{for(var h=0,m=0;m<this.i.length;m++){t:{var S=this.i[m];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(h+=S,h>4096){h=m;break e}if(h===4096||m===this.i.length-1){h=m+1;break e}}h=1e3}else h=1e3;h=Nm(this,z,h),m=De(this.J),Oe(m,"RID",a),Oe(m,"CVER",22),this.G&&Oe(m,"X-HTTP-Session-Id",this.G),zo(this,m),V&&(this.R?h="headers="+Bn(Sm(V))+"&"+h:this.u&&rd(m,this.u,V)),Me(this.h,z),this.Ra&&Oe(m,"TYPE","init"),this.S?(Oe(m,"$req",h),Oe(m,"SID","null"),z.U=!0,Ii(z,m,null)):Ii(z,m,h),this.I=2}}else this.I==3&&(a?Tm(this,a):this.i.length==0||Qe(this.h)||Tm(this))};function Tm(a,h){var m;h?m=h.l:m=a.V++;const S=De(a.J);Oe(S,"SID",a.M),Oe(S,"RID",m),Oe(S,"AID",a.K),zo(a,S),a.u&&a.o&&rd(S,a.u,a.o),m=new mr(a,a.j,m,a.D+1),a.u===null&&(m.J=a.o),h&&(a.i=h.G.concat(a.i)),h=Nm(a,m,1e3),m.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),Me(a.h,m),Ii(m,S,h)}function zo(a,h){a.H&&$(a.H,function(m,S){Oe(h,S,m)}),a.l&&$({},function(m,S){Oe(h,S,m)})}function Nm(a,h,m){m=Math.min(a.i.length,m);const S=a.l?d(a.l.Ka,a.l,a):null;e:{var z=a.i;let Ue=-1;for(;;){const Ft=["count="+m];Ue==-1?m>0?(Ue=z[0].g,Ft.push("ofs="+Ue)):Ue=0:Ft.push("ofs="+Ue);let ut=!0;for(let Ht=0;Ht<m;Ht++){var V=z[Ht].g;const gr=z[Ht].map;if(V-=Ue,V<0)Ue=Math.max(0,z[Ht].g-100),ut=!1;else try{V="req"+V+"_"||"";try{var fe=gr instanceof Map?gr:Object.entries(gr);for(const[Vs,is]of fe){let os=is;c(is)&&(os=lt(is)),Ft.push(V+Vs+"="+encodeURIComponent(os))}}catch(Vs){throw Ft.push(V+"type="+encodeURIComponent("_badmap")),Vs}}catch{S&&S(gr)}}if(ut){fe=Ft.join("&");break e}}fe=void 0}return a=a.i.splice(0,m),h.G=a,fe}function Rm(a){if(!a.g&&!a.v){a.Y=1;var h=a.Da;H||x(),X||(H(),X=!0),C.add(h,a),a.A=0}}function id(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=Pt(d(a.Da,a),Om(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,Am(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=Pt(d(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,dt(10),Pl(this),Am(this))};function od(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function Am(a){a.g=new mr(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var h=De(a.na);Oe(h,"RID","rpc"),Oe(h,"SID",a.M),Oe(h,"AID",a.K),Oe(h,"CI",a.F?"0":"1"),!a.F&&a.ia&&Oe(h,"TO",a.ia),Oe(h,"TYPE","xmlhttp"),zo(a,h),a.u&&a.o&&rd(h,a.u,a.o),a.O&&(a.g.H=a.O);var m=a.g;a=a.ba,m.M=1,m.A=Tt(De(h)),m.u=null,m.R=!0,Il(m,a)}t.Va=function(){this.C!=null&&(this.C=null,Pl(this),id(this),dt(19))};function Dl(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function Pm(a,h){var m=null;if(a.g==h){Dl(a),od(a),a.g=null;var S=2}else if(Je(a.h,h))m=h.G,ke(a.h,h),S=1;else return;if(a.I!=0){if(h.o)if(S==1){m=h.u?h.u.length:0,h=Date.now()-h.F;var z=a.D;S=_n(),q(S,new pr(S,m)),Ol(a)}else Rm(a);else if(z=h.m,z==3||z==0&&h.X>0||!(S==1&&F_(a,h)||S==2&&id(a)))switch(m&&m.length>0&&(h=a.h,h.i=h.i.concat(m)),z){case 1:Hs(a,5);break;case 4:Hs(a,10);break;case 3:Hs(a,6);break;default:Hs(a,2)}}}function Om(a,h){let m=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(m*=2),m*h}function Hs(a,h){if(a.j.info("Error code "+h),h==2){var m=d(a.bb,a),S=a.Ua;const z=!S;S=new Pe(S||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||me(S,"https"),Tt(S),z?A_(S.toString(),m):P_(S.toString(),m)}else dt(2);a.I=0,a.l&&a.l.pa(h),Dm(a),km(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function Dm(a){if(a.I=0,a.ja=[],a.l){const h=Te(a.h);(h.length!=0||a.i.length!=0)&&(v(a.ja,h),v(a.ja,a.i),a.h.i.length=0,j(a.i),a.i.length=0),a.l.oa()}}function Mm(a,h,m){var S=m instanceof Pe?De(m):new Pe(m);if(S.g!="")h&&(S.g=h+"."+S.g),Re(S,S.u);else{var z=o.location;S=z.protocol,h=h?h+"."+z.hostname:z.hostname,z=+z.port;const V=new Pe(null);S&&me(V,S),h&&(V.g=h),z&&Re(V,z),m&&(V.h=m),S=V}return m=a.G,h=a.wa,m&&h&&Oe(S,m,h),Oe(S,"VER",a.ka),zo(a,S),S}function Lm(a,h,m){if(h&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Aa&&!a.ma?new Ot(new nd({ab:m})):new Ot(a.ma),h.Fa(a.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fm(){}t=Fm.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Un(a,h){F.call(this),this.g=new jm(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(a?a["X-WebChannel-Client-Profile"]=h.sa:a={"X-WebChannel-Client-Profile":h.sa}),this.g.U=a,(a=h&&h.Qb)&&!I(a)&&(this.g.u=a),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!I(h)&&(this.g.G=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new ki(this)}p(Un,F),Un.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Un.prototype.close=function(){sd(this.g)},Un.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var m={};m.__data__=a,a=m}else this.v&&(m={},m.__data__=lt(a),a=m);h.i.push(new Le(h.Ya++,a)),h.I==3&&Ol(h)},Un.prototype.N=function(){this.g.l=null,delete this.j,sd(this.g),delete this.g,Un.Z.N.call(this)};function zm(a){wt.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const m in h){a=m;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}p(zm,wt);function Bm(){kt.call(this),this.status=1}p(Bm,kt);function ki(a){this.g=a}p(ki,Fm),ki.prototype.ra=function(){q(this.g,"a")},ki.prototype.qa=function(a){q(this.g,new zm(a))},ki.prototype.pa=function(a){q(this.g,new Bm)},ki.prototype.oa=function(){q(this.g,"b")},Un.prototype.send=Un.prototype.o,Un.prototype.open=Un.prototype.m,Un.prototype.close=Un.prototype.close,Ci.NO_ERROR=0,Ci.TIMEOUT=8,Ci.HTTP_ERROR=6,Ao.COMPLETE="complete",Ye.EventType=Qt,Qt.OPEN="a",Qt.CLOSE="b",Qt.ERROR="c",Qt.MESSAGE="d",F.prototype.listen=F.prototype.J,Ot.prototype.listenOnce=Ot.prototype.K,Ot.prototype.getLastError=Ot.prototype.Ha,Ot.prototype.getLastErrorCode=Ot.prototype.ya,Ot.prototype.getStatus=Ot.prototype.ca,Ot.prototype.getResponseJson=Ot.prototype.La,Ot.prototype.getResponseText=Ot.prototype.la,Ot.prototype.send=Ot.prototype.ea,Ot.prototype.setWithCredentials=Ot.prototype.Fa}).apply(typeof sc<"u"?sc:typeof self<"u"?self:typeof window<"u"?window:{});const my="@firebase/firestore",gy="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pn.UNAUTHENTICATED=new pn(null),pn.GOOGLE_CREDENTIALS=new pn("google-credentials-uid"),pn.FIRST_PARTY=new pn("first-party-uid"),pn.MOCK_USER=new pn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _l="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo=new jp("@firebase/firestore");function ir(t,...e){if(vo.logLevel<=ot.DEBUG){const n=e.map(cm);vo.debug(`Firestore (${_l}): ${t}`,...n)}}function S_(t,...e){if(vo.logLevel<=ot.ERROR){const n=e.map(cm);vo.error(`Firestore (${_l}): ${t}`,...n)}}function E6(t,...e){if(vo.logLevel<=ot.WARN){const n=e.map(cm);vo.warn(`Firestore (${_l}): ${t}`,...n)}}function cm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tl(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,b_(t,r,n)}function b_(t,e,n){let r=`FIRESTORE (${_l}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw S_(r),new Error(r)}function wa(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||b_(e,s,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ze={CANCELLED:"cancelled",INVALID_ARGUMENT:"invalid-argument",FAILED_PRECONDITION:"failed-precondition"};class et extends ko{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class C6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(pn.UNAUTHENTICATED))}shutdown(){}}class I6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class j6{constructor(e){this.t=e,this.currentUser=pn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){wa(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new _a;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new _a,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{ir("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(ir("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new _a)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ir("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(wa(typeof r.accessToken=="string",31837,{l:r}),new E_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return wa(e===null||typeof e=="string",2055,{h:e}),new pn(e)}}class k6{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=pn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class T6{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new k6(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(pn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class N6{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Xv(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){wa(this.o===void 0,3512);const r=i=>{i.error!=null&&ir("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,ir("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{ir("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):ir("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new yy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(wa(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new yy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R6(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=R6(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Ds(t,e){return t<e?-1:t>e?1:0}function P6(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Jd(s)===Jd(i)?Ds(s,i):Jd(s)?1:-1}return Ds(t.length,e.length)}const O6=55296,D6=57343;function Jd(t){const e=t.charCodeAt(0);return e>=O6&&e<=D6}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xy="__name__";class wr{constructor(e,n,r){n===void 0?n=0:n>e.length&&tl(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&tl(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return wr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof wr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=wr.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Ds(e.length,n.length)}static compareSegments(e,n){const r=wr.isNumericId(e),s=wr.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?wr.extractNumericId(e).compare(wr.extractNumericId(n)):P6(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return lm.fromString(e.substring(4,e.length-2))}}class nr extends wr{construct(e,n,r){return new nr(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new et(Ze.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new nr(n)}static emptyPath(){return new nr([])}}const M6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Js extends wr{construct(e,n,r){return new Js(e,n,r)}static isValidIdentifier(e){return M6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Js.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===xy}static keyField(){return new Js([xy])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new et(Ze.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new et(Ze.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new et(Ze.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(i(),s++)}if(i(),o)throw new et(Ze.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Js(n)}static emptyPath(){return new Js([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e){this.path=e}static fromPath(e){return new ri(nr.fromString(e))}static fromName(e){return new ri(nr.fromString(e).popFirst(5))}static empty(){return new ri(nr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&nr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return nr.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ri(new nr(e.slice()))}}function L6(t,e,n,r){if(e===!0&&r===!0)throw new et(Ze.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function F6(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function z6(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":tl(12329,{type:typeof t})}function B6(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new et(Ze.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=z6(t);throw new et(Ze.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Sl(t,e){if(!F6(t))throw new et(Ze.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new et(Ze.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy=-62135596800,wy=1e6;class _r{static now(){return _r.fromMillis(Date.now())}static fromDate(e){return _r.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*wy);return new _r(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new et(Ze.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new et(Ze.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<vy)throw new et(Ze.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new et(Ze.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/wy}_compareTo(e){return this.seconds===e.seconds?Ds(this.nanoseconds,e.nanoseconds):Ds(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:_r._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Sl(e,_r._jsonSchema))return new _r(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-vy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}_r._jsonSchemaVersion="firestore/timestamp/1.0",_r._jsonSchema={type:Lt("string",_r._jsonSchemaVersion),seconds:Lt("number"),nanoseconds:Lt("number")};function U6(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $6 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new $6("Invalid base64 string: "+i):i}}(e);return new xi(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new xi(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ds(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xi.EMPTY_BYTE_STRING=new xi("");const _f="(default)";class mu{constructor(e,n){this.projectId=e,this.database=n||_f}static empty(){return new mu("","")}get isDefaultDatabase(){return this.database===_f}isEqual(e){return e instanceof mu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6{constructor(e,n=null,r=[],s=[],i=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function H6(t){return new W6(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _y,Xe;(Xe=_y||(_y={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new lm([4294967295,4294967295],0);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V6=41943040;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K6=1048576;function Xd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G6{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&ir("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new _a,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,c=new um(e,n,o,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new et(Ze.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}var Sy,by;(by=Sy||(Sy={})).Ma="default",by.Cache="cache";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q6(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_="firestore.googleapis.com",Cy=!0;class Iy{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new et(Ze.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=C_,this.ssl=Cy}else this.host=e.host,this.ssl=e.ssl??Cy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=V6;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<K6)throw new et(Ze.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}L6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=q6(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new et(Ze.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new et(Ze.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new et(Ze.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class I_{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Iy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new et(Ze.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new et(Ze.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Iy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new C6;switch(r.type){case"firstParty":return new T6(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new et(Ze.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Ey.get(n);r&&(ir("ComponentProvider","Removing Datastore"),Ey.delete(n),r.terminate())}(this),Promise.resolve()}}function Y6(t,e,n,r={}){var d;t=B6(t,I_);const s=zu(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;s&&(Wv(`https://${c}`),Vv("Firestore",!0)),i.host!==C_&&i.host!==c&&E6("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:c,ssl:s,emulatorOptions:r};if(!$a(u,o)&&(t._setSettings(u),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=pn.MOCK_USER;else{f=Hv(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new et(Ze.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new pn(g)}t._authCredentials=new I6(new E_(f,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new dm(this.firestore,e,this._query)}}class br{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hm(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new br(this.firestore,e,this._key)}toJSON(){return{type:br._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Sl(n,br._jsonSchema))return new br(e,r||null,new ri(nr.fromString(n.referencePath)))}}br._jsonSchemaVersion="firestore/documentReference/1.0",br._jsonSchema={type:Lt("string",br._jsonSchemaVersion),referencePath:Lt("string")};class hm extends dm{constructor(e,n,r){super(e,n,H6(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new br(this.firestore,null,new ri(e))}withConverter(e){return new hm(this.firestore,e,this._path)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy="AsyncQueue";class ky{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new G6(this,"async_queue_retry"),this._c=()=>{const r=Xd();r&&ir(jy,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Xd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Xd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new _a;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!U6(e))throw e;ir(jy,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,S_("INTERNAL UNHANDLED ERROR: ",Ty(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=um.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&tl(47125,{Pc:Ty(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Ty(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Q6 extends I_{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new ky,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ky(e),this._firestoreClient=void 0,await e}}}function J6(t,e){const n=typeof t=="object"?t:tw(),r=typeof t=="string"?t:_f,s=Jv(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Uv("firestore");i&&Y6(s,...i)}return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Dr(xi.fromBase64String(e))}catch(n){throw new et(Ze.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Dr(xi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Dr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Sl(e,Dr._jsonSchema))return Dr.fromBase64String(e.bytes)}}Dr._jsonSchemaVersion="firestore/bytes/1.0",Dr._jsonSchema={type:Lt("string",Dr._jsonSchemaVersion),bytes:Lt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new et(Ze.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Js(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new et(Ze.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new et(Ze.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ds(this._lat,e._lat)||Ds(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ai._jsonSchemaVersion}}static fromJSON(e){if(Sl(e,ai._jsonSchema))return new ai(e.latitude,e.longitude)}}ai._jsonSchemaVersion="firestore/geoPoint/1.0",ai._jsonSchema={type:Lt("string",ai._jsonSchemaVersion),latitude:Lt("number"),longitude:Lt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:li._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Sl(e,li._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new li(e.vectorValues);throw new et(Ze.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}li._jsonSchemaVersion="firestore/vectorValue/1.0",li._jsonSchema={type:Lt("string",li._jsonSchemaVersion),vectorValues:Lt("object")};const X6=new RegExp("[~\\*/\\[\\]]");function Z6(t,e,n){if(e.search(X6)>=0)throw Ny(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t);try{return new j_(...e.split("."))._internalPath}catch{throw Ny(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t)}}function Ny(t,e,n,r,s){let i=`Function ${e}() called with invalid data`;i+=". ";let o="";return new et(Ze.INVALID_ARGUMENT,i+t+o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new br(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new eT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(T_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class eT extends k_{data(){return super.data()}}function T_(t,e){return typeof e=="string"?Z6(t,e):e instanceof j_?e._internalPath:e._delegate._internalPath}class ic{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class to extends k_{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Cc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(T_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new et(Ze.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=to._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}to._jsonSchemaVersion="firestore/documentSnapshot/1.0",to._jsonSchema={type:Lt("string",to._jsonSchemaVersion),bundleSource:Lt("string","DocumentSnapshot"),bundleName:Lt("string"),bundle:Lt("string")};class Cc extends to{data(e={}){return super.data(e)}}class Sa{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ic(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Cc(this._firestore,this._userDataWriter,r.key,r,new ic(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new et(Ze.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(c=>{const u=new Cc(s._firestore,s._userDataWriter,c.doc.key,c.doc,new ic(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new Cc(s._firestore,s._userDataWriter,c.doc.key,c.doc,new ic(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:tT(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new et(Ze.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Sa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=A6.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function tT(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tl(61501,{type:t})}}Sa._jsonSchemaVersion="firestore/querySnapshot/1.0",Sa._jsonSchema={type:Lt("string",Sa._jsonSchemaVersion),bundleSource:Lt("string","QuerySnapshot"),bundleName:Lt("string"),bundle:Lt("string")};(function(e,n=!0){(function(s){_l=s})(Zv),Ha(new fo("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),c=new Q6(new j6(r.getProvider("auth-internal")),new N6(o,r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new et(Ze.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mu(d.options.projectId,f)}(o,s),o);return i={useFetchStreams:n,...i},c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),Is(my,gy,e),Is(my,gy,"esm2020")})();const nT={apiKey:"AIzaSyCMkZr4Xz204NjvETje-Rhznf6ECDYiEnE",authDomain:"ethiostore-17d9f.firebaseapp.com",databaseURL:"https://ethiostore-17d9f-default-rtdb.firebaseio.com",projectId:"ethiostore-17d9f",storageBucket:"ethiostore-17d9f.appspot.com",messagingSenderId:"964518277159",appId:"1:964518277159:web:9404cace890edf88961e02"},N_=N0().length>0?N0()[0]:ew(nT),Vt=__(N_);J6(N_);const rT="https://gojo-teacher-web.onrender.com/api",Ri="https://ethiostore-17d9f-default-rtdb.firebaseio.com";function Ai(t){return!t||typeof t!="string"||!t.trim()||t==="null"||t==="undefined"?"/default-profile.png":t}function sT(){const[t,e]=y.useState(window.innerWidth>600),n=Fn(),[r,s]=y.useState(null),[i,o]=y.useState([]),[c,u]=y.useState([]),[d,f]=y.useState([]),[p,g]=y.useState(null),[j,v]=y.useState(!1),[N,R]=y.useState(!1),[b,w]=y.useState([]),_=y.useRef({}),P=(r==null?void 0:r.userId)||null;y.useEffect(()=>{const J=JSON.parse(localStorage.getItem("teacher"));if(!J){n("/login");return}const be=async()=>{try{const ye=zt(Vt,"Users"),$=(await v_(ye)).val()||{},ee=Object.values($).find(B=>B.userId===J.userId);if(ee){const B={...J,...ee};s(B),localStorage.setItem("teacher",JSON.stringify(B))}else s(J)}catch{s(J)}},G=async ye=>{try{const K=ye||JSON.parse(localStorage.getItem("teacher"));if(!K||!K.userId){f([]);return}const[$,ee]=await Promise.all([Z.get(`${Ri}/Chats.json`),Z.get(`${Ri}/Users.json`)]),B=$.data||{},ve=ee.data||{}||{},we={};Object.entries(ve).forEach(([L,de])=>{de&&de.userId&&(we[de.userId]=L)});const he=Object.entries(B).map(([L,de])=>{const je=(de.unread||{})[K.userId]||0;if(!je)return null;const Q=de.participants||{},ge=Object.keys(Q||{}).find(ae=>ae!==K.userId);if(!ge)return null;let U=ge,Y=ve[U];if(!Y){const ae=we[ge];ae&&(U=ae,Y=ve[ae])}Y||(Y={userId:ge,name:ge,profileImage:"/default-profile.png"});const te={pushKey:U,userId:Y.userId||ge,name:Y.name||Y.username||ge,profileImage:Ai(Y.profileImage||Y.profile||"")},ne=de.lastMessage||{};return{id:L,title:ne.text||"New message",adminName:te.name,adminProfile:te.profileImage,isMessage:!0,unreadForMe:je}}).filter(Boolean);f(he)}catch{f([])}};be(),H(),k(J),G(J)},[]),y.useEffect(()=>{r&&console.log("Teacher object (debug):",r)},[r]);const H=async()=>{try{let be=(await Z.get(`${rT}/get_posts`)).data||[];!Array.isArray(be)&&typeof be=="object"&&(be=Object.values(be));const[G,ye]=await Promise.all([Z.get(`${Ri}/School_Admins.json`),Z.get(`${Ri}/Users.json`)]),K=G.data||{},$=ye.data||{},ee=he=>{if(!he)return{name:"Admin",profile:"/default-profile.png"};const L=K[he];if(!L)return{name:he,profile:"/default-profile.png"};const de=L.userId,M=de?$[de]:null,je=(M==null?void 0:M.name)||(L==null?void 0:L.title)||he,Q=Ai(M==null?void 0:M.profileImage);return{name:je,profile:Q}},B=be.map(he=>{const L=he.postId||he.id||he.key||"",{name:de,profile:M}=ee(he.adminId);let je=[];Array.isArray(he.likes)?je=he.likes:he.likes&&typeof he.likes=="object"&&(je=Object.keys(he.likes));const Q=he.time||he.timestamp||he.createdAt||null;return{...he,postId:L,adminName:de,adminProfile:M,time:Q,likes:je,likeCount:he.likeCount||je.length||0}});B.sort((he,L)=>{const de=he.time?new Date(he.time).getTime():0;return(L.time?new Date(L.time).getTime():0)-de}),o(B);const ce=JSON.parse(localStorage.getItem("teacher")),ve=C(ce==null?void 0:ce.userId),we=B.filter(he=>!ve.includes(he.postId)).slice(0,5).map(he=>{var L;return{id:he.postId,title:((L=he.message)==null?void 0:L.substring(0,80))||"Untitled post",adminName:he.adminName,adminProfile:he.adminProfile}});u(we)}catch(J){console.error("Error fetching posts/admins handshake:",J)}},X=async J=>{try{if(!P)return;const be=await Z.post("https://gojo-teacher-web.onrender.com/api/like_post",{postId:J,teacherId:P});if(be.data.success){const G=be.data.liked,ye=be.data.likeCount;o(K=>K.map($=>$.postId===J?{...$,likeCount:ye,likes:{...$.likes,[P]:G?!0:void 0}}:$))}}catch(be){console.error("Error liking post:",be)}},C=J=>JSON.parse(localStorage.getItem(`seen_posts_${J}`))||[],x=(J,be)=>{const G=C(J);G.includes(be)||localStorage.setItem(`seen_posts_${J}`,JSON.stringify([...G,be]))},E=()=>{localStorage.removeItem("teacher"),n("/login")},k=async(J=r)=>{try{const be=J||JSON.parse(localStorage.getItem("teacher"));if(!be||!be.userId){w([]);return}const[G,ye]=await Promise.all([Z.get(`${Ri}/Chats.json`),Z.get(`${Ri}/Users.json`)]),K=G.data||{},ee=ye.data||{}||{},B={};Object.entries(ee).forEach(([ve,we])=>{we&&we.userId&&(B[we.userId]=ve)});const ce=Object.entries(K).map(([ve,we])=>{const L=(we.unread||{})[be.userId]||0;if(!L)return null;const de=we.participants||{},M=Object.keys(de||{}).find(Y=>Y!==be.userId);if(!M)return null;let je=M,Q=ee[je];if(!Q){const Y=B[M];Y&&(je=Y,Q=ee[Y])}Q||(Q={userId:M,name:M,profileImage:"/default-profile.png"});const ge={pushKey:je,userId:Q.userId||M,name:Q.name||Q.username||M,profileImage:Ai(Q.profileImage||Q.profile||"")},U=we.lastMessage||{};return{chatId:ve,contact:ge,displayName:ge.name,profile:ge.profileImage,lastMessageText:U.text||"",lastMessageTime:U.timeStamp||U.time||null,unreadForMe:L}}).filter(Boolean).sort((ve,we)=>(we.lastMessageTime||0)-(ve.lastMessageTime||0));w(ce)}catch(be){console.error("Error fetching conversations:",be),w([])}},T=b.reduce((J,be)=>J+(be.unreadForMe||0),0),A=r||{},I=()=>e(!1);return y.useEffect(()=>{const J=()=>{window.innerWidth<=600?e(!1):e(!0)};return window.addEventListener("resize",J),J(),()=>window.removeEventListener("resize",J)},[]),l.jsxs("div",{className:"dashboard-page",children:[l.jsxs("nav",{className:"top-navbar",children:[window.innerWidth<=600&&!t&&l.jsx("button",{className:"sidebar-arrow-btn",style:{position:"fixed",left:0,top:180,transform:"none",zIndex:1300,background:"#fff",border:"none",borderRadius:"0 8px 8px 0",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",padding:8,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:()=>e(!0),"aria-label":"Open sidebar menu",children:l.jsx(Rs,{size:22})}),l.jsx("h2",{children:"Gojo Dashboard"}),l.jsxs("div",{className:"nav-right",children:[l.jsxs("div",{className:"icon-circle",style:{position:"relative"},children:[l.jsxs("div",{onClick:()=>v(!j),style:{cursor:"pointer",position:"relative"},"aria-label":"Show notifications",tabIndex:0,role:"button",onKeyPress:J=>{J.key==="Enter"&&v(!j)},children:[l.jsx(Us,{size:22}),c.length+d.length>0&&l.jsx("span",{style:{position:"absolute",top:-6,right:-6,background:"red",color:"#fff",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:c.length+d.length})]}),j&&l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.08)",zIndex:1999},onClick:()=>v(!1)}),l.jsx("div",{className:"notification-popup",style:typeof window<"u"&&window.innerWidth<=600?{position:"fixed",left:"50%",top:"8%",transform:"translate(-50%, 0)",width:"90vw",maxWidth:340,zIndex:2e3,background:"#fff",borderRadius:12,boxShadow:"0 2px 16px rgba(0,0,0,0.18)",maxHeight:"70vh",overflowY:"auto",padding:12}:void 0,children:[...c,...d].length>0?[...c,...d].map((J,be)=>l.jsxs("div",{className:"notification-item",onClick:()=>{J.isMessage?(n("/all-chat"),v(!1)):(P&&x(P,J.id),u(G=>G.filter(ye=>ye.id!==J.id)),v(!1))},tabIndex:0,role:"button","aria-label":J.isMessage?"See message notification "+J.title:"See post notification "+J.title,onKeyPress:G=>{G.key==="Enter"&&(J.isMessage?(n("/all-chat"),v(!1)):(P&&x(P,J.id),u(ye=>ye.filter(K=>K.id!==J.id)),v(!1)))},children:[l.jsx("img",{src:Ai(J.adminProfile),alt:J.adminName||"Admin",className:"notification-profile"}),l.jsxs("div",{children:[l.jsx("strong",{children:J.adminName}),l.jsx("div",{className:"notification-title",children:J.title}),J.isMessage&&l.jsx("span",{style:{color:"#0b78f6",fontSize:12,fontWeight:500},children:"[Message]"})]})]},J.id||be)):l.jsx("div",{className:"no-notifications",children:"No notifications"})})]})]}),l.jsxs("div",{className:"icon-circle",style:{position:"relative",marginLeft:12,cursor:"pointer"},onClick:()=>n("/all-chat"),"aria-label":"Go to all chat",tabIndex:0,role:"button",onKeyPress:J=>{J.key==="Enter"&&n("/all-chat")},children:[l.jsx(Bs,{size:22}),T>0&&l.jsx("span",{style:{position:"absolute",top:1,right:0,background:"#f60b0b",color:"#fff",borderRadius:"50%",minWidth:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 5px"},children:T})]}),l.jsx("div",{className:"icon-circle",onClick:()=>n("/settings"),children:l.jsx(jr,{})}),l.jsx("img",{src:Ai(A.profileImage),alt:"teacher",className:"profile-img"})]})]}),l.jsxs("div",{className:"google-dashboard",children:[window.innerWidth<=600&&t&&l.jsx("div",{className:"sidebar-overlay visible",onClick:I,style:{display:"block"}}),l.jsxs("div",{className:`google-sidebar${t?" open":""}`,style:window.innerWidth<=600?{position:"fixed",top:64,left:t?0:"-220px",width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",zIndex:1200,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto",transition:"left 0.25s cubic-bezier(.4,0,.2,1)"}:{position:"fixed",top:64,left:0,width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.04)",zIndex:900,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto"},children:[r&&l.jsxs("div",{className:"sidebar-profile",children:[l.jsx("div",{className:"sidebar-img-circle",children:l.jsx("img",{src:r.profileImage||"/default-profile.png",alt:"profile",style:{width:"100%",height:"100%",objectFit:"cover",border:"none",boxShadow:"none"}})}),l.jsx("h3",{children:r.name}),l.jsx("p",{children:r.username})]}),l.jsxs("div",{className:"sidebar-menu",children:[l.jsxs(xe,{className:"sidebar-btn",to:"/dashboard",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[l.jsx(Xr,{})," Home"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/students",children:[l.jsx(Ke,{})," Students"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/admins",children:[l.jsx(Ke,{})," Admins"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/parents",children:[l.jsx(Jr,{})," Parents"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/marks",children:[l.jsx(Ir,{})," Marks"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/attendance",children:[l.jsx(Ke,{})," Attendance"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/schedule",children:[l.jsx(Ke,{})," Schedule"]}),l.jsxs("button",{className:"sidebar-btn logout-btn",onClick:E,children:[l.jsx(Zr,{})," Logout"]})]})]}),l.jsx("div",{className:"google-main posts-full-mobile",children:l.jsxs("div",{className:"posts-container",children:[i.length===0&&l.jsx("p",{children:"No posts available"}),i.map(J=>l.jsxs("div",{ref:be=>_.current[J.postId]=be,className:"post-box",style:{border:p===J.postId?"2px solid #4b6cb7":"1px solid #eee",backgroundColor:p===J.postId?"#fff9c4":"#fff",transition:"background-color 0.4s, border 0.2s",marginBottom:18},children:[l.jsxs("div",{className:"fb-post-top",children:[l.jsx("img",{src:Ai(J.adminProfile),alt:J.adminName||"Admin"}),l.jsxs("div",{className:"post-info",children:[l.jsx("h4",{style:{margin:0,fontSize:17,fontWeight:700},children:J.adminName||"Admin"}),l.jsx("div",{style:{fontSize:12,color:"#666"},children:J.time?new Date(J.time).toLocaleString():""})]})]}),l.jsx("div",{style:{marginTop:12,fontSize:17,lineHeight:1.6,color:"#222",wordBreak:"break-word",paddingLeft:"10px"},children:J.message}),J.postUrl&&l.jsx("img",{src:J.postUrl,alt:"post media",className:"post-media",style:{width:"100%",borderRadius:8,marginTop:8,maxHeight:400,objectFit:"cover"}}),l.jsx("div",{className:"post-actions",style:{marginTop:14,display:"flex",alignItems:"center",gap:18},children:l.jsxs("button",{onClick:()=>X(J.postId),style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 18px",background:"#f0f2f5",border:"none",borderRadius:8,cursor:"pointer",fontSize:"16px",fontWeight:"500",color:J.likes&&P&&J.likes[P]?"#e0245e":"#555",transition:"all 0.2s ease"},children:[J.likes&&P&&J.likes[P]?l.jsx(C4,{style:{color:"#e0245e",fontSize:"16px"}}):l.jsx(N4,{style:{fontSize:"16px"}}),J.likes&&P&&J.likes[P]?"Liked":"Like",l.jsx("span",{style:{marginLeft:8,fontSize:"15px",color:"#777"},children:J.likeCount||0})]})})]},J.postId))]})}),l.jsx("style",{children:`
          .posts-container {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            justify-content: flex-start;
            margin-left: 120px;
          }
          .post-box {
            margin-left: 0;
            margin-right: auto;
            margin-top: 12px;
          }
          @media (max-width: 600px) {
            .posts-container {
              margin-left: 0 !important;
            }
            .post-box {
              margin-top: 0 !important;
            }
          }
          @media (max-width: 600px) {
            .posts-full-mobile, .posts-container, .post-box {
              width: 100vw !important;
              max-width: 100vw !important;
              margin: 0 !important;
              padding: 0 !important;
              border-radius: 0 !important;
              box-shadow: none !important;
            }
            .posts-container {
              align-items: stretch;
            }
            .google-sidebar {
              left: -220px;
              transition: left 0.25s cubic-bezier(.4,0,.2,1);
            }
            .google-sidebar.open {
              left: 0 !important;
              z-index: 1202;
            }
            .sidebar-overlay {
              display: block;
              position: fixed;
              inset: 0;
              background: rgba(0,0,0,0.35);
              z-index: 1200;
              transition: opacity 0.2s;
            }
            .sidebar-arrow-btn {
              display: flex !important;
            }
          }
        `})]})]})}const Zd=(t,e)=>[t,e].sort().join("_"),iT=(t="")=>t?String(t).replace(/^course_/,"").replace(/_[0-9A-Za-z]+$/,"").replace(/_/g," ").trim().split(/\s+/).map(n=>n?n[0].toUpperCase()+n.slice(1).toLowerCase():"").join(" "):"Unknown",oT="https://gojo-teacher-web.onrender.com/api",Zt="https://ethiostore-17d9f-default-rtdb.firebaseio.com",eh=t=>{if(!t)return null;let e;if(typeof t=="number"?e=new Date(t):e=new Date(String(t)),isNaN(e.getTime()))return null;const n=new Date;let r=n.getFullYear()-e.getFullYear();const s=n.getMonth()-e.getMonth();return(s<0||s===0&&n.getDate()<e.getDate())&&r--,r},aT=t=>{if(!t)return"";const e=new Date(Number(t));return`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`},lT=t=>{if(!t)return"";const e=new Date(Number(t)),n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()),s=new Date(e.getFullYear(),e.getMonth(),e.getDate()),i=r-s,o=Math.floor(i/(24*60*60*1e3));return o===0?"Today":o===1?"Yesterday":o>1&&o<7?`${o} days ago`:e.toLocaleDateString()},th=(t,e)=>!t||!e?null:Object.values(t).find(n=>String(n==null?void 0:n.userId)===String(e))||null,cT=({student:t,selected:e,onClick:n})=>l.jsxs("div",{onClick:()=>n(t),style:{width:"100%",borderRadius:"12px",padding:"15px",display:"flex",alignItems:"center",gap:"20px",cursor:"pointer",background:e?"#e0e7ff":"#fff",border:e?"2px solid #4b6cb7":"1px solid #ddd",boxShadow:e?"0 6px 15px rgba(75,108,183,0.3)":"0 4px 10px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},children:[l.jsx("img",{src:t.profileImage||"/default-profile.png",alt:t.name,style:{width:"50px",height:"50px",borderRadius:"50%",objectFit:"cover",border:e?"3px solid #4b6cb7":"3px solid red"}}),l.jsxs("div",{children:[l.jsx("h3",{style:{margin:0},children:t.name}),l.jsxs("p",{style:{margin:"4px 0",color:"#555"},children:["Grade ",t.grade," - Section ",t.section]})]})]});function uT(){const[t,e]=y.useState(typeof window<"u"?window.innerWidth>600:!0),[n,r]=y.useState([]),[s,i]=y.useState(""),[o,c]=y.useState("All"),[u,d]=y.useState("All"),[f,p]=y.useState([]),[g,j]=y.useState("details"),[v,N]=y.useState([]),[R,b]=y.useState(""),[w,_]=y.useState(null),[P,H]=y.useState(!1),[X,C]=y.useState(!1),[x,E]=y.useState("daily"),[k,T]=y.useState({}),[A,I]=y.useState({}),[J,be]=y.useState({}),[G,ye]=y.useState(null),[K,$]=y.useState([]),[ee,B]=y.useState(""),[ce,ve]=y.useState(!1),[we,he]=y.useState({}),[L,de]=y.useState(null),[M,je]=y.useState(null),[Q,ge]=y.useState(!1),[U,Y]=y.useState([]),[te,ne]=y.useState(""),ae=y.useRef(null),_e=JSON.parse(localStorage.getItem("teacher"))||{},O=String(_e.userId||""),[F,q]=y.useState({}),[re,pe]=y.useState([]),[Ee,se]=y.useState("daily"),[le,Ce]=y.useState("All"),[qe,lt]=y.useState({}),[mt,ze]=y.useState({}),[vt,Ye]=y.useState(!0),[Qt,wt]=y.useState([]),[kt,Jt]=y.useState("semester2"),[dn,_n]=y.useState({}),[Ei,zn]=y.useState([]),[fr,dt]=y.useState([]),[pr,Pt]=y.useState(!1),[Tr,ts]=y.useState(null),Nr=y.useRef({}),Xt=Fn(),[fm,pm]=y.useState(!1),[Ci,Ao]=y.useState([]);y.useEffect(()=>{const D=JSON.parse(localStorage.getItem("teacher"));if(!D){Xt("/login");return}de(D),Po(D)},[Xt]),y.useEffect(()=>{const D=JSON.parse(localStorage.getItem("teacher"));if(!D){Xt("/login");return}_(D)},[Xt]),y.useEffect(()=>{(async()=>{try{let Ie=(await Z.get(`${oT}/get_posts`)).data||[];!Array.isArray(Ie)&&typeof Ie=="object"&&(Ie=Object.values(Ie));const[Be,Le]=await Promise.all([Z.get(`${Zt}/School_Admins.json`),Z.get(`${Zt}/Users.json`)]),st=Be.data||{},Qe=Le.data||{},Ne=JSON.parse(localStorage.getItem("teacher")),Je=bl(Ne==null?void 0:Ne.userId),Me=Te=>{const He=Te.adminId||Te.posterAdminId||Te.poster||Te.admin||null;if(He&&st[He]){const gt=st[He],Pe=gt.userId,De=Qe[Pe]||null,me=De&&De.name||gt.name||Te.adminName||"Admin",Re=De&&De.profileImage||gt.profileImage||Te.adminProfile||"/default-profile.png";return{name:me,profile:Re}}return{name:Te.adminName||"Admin",profile:Te.adminProfile||"/default-profile.png"}},ke=Ie.slice().sort((Te,He)=>{const gt=Te.time?new Date(Te.time).getTime():0;return(He.time?new Date(He.time).getTime():0)-gt}).filter(Te=>Te.postId&&!Je.includes(Te.postId)).slice(0,5).map(Te=>{var gt;const He=Me(Te);return{id:Te.postId,title:((gt=Te.message)==null?void 0:gt.substring(0,50))||"Untitled post",adminName:He.name,adminProfile:He.profile}});dt(ke)}catch(ie){console.error("Error fetching notifications:",ie)}})()},[]);function bl(D){return JSON.parse(localStorage.getItem(`seen_posts_${D}`))||[]}const Po=async(D=L)=>{try{const ie=D||JSON.parse(localStorage.getItem("teacher"));if(!ie||!ie.userId){Ao([]);return}const[Ie,Be]=await Promise.all([Z.get(`${Zt}/Chats.json`),Z.get(`${Zt}/Users.json`)]),Le=Ie.data||{},Qe=Be.data||{}||{},Ne={};Object.entries(Qe).forEach(([Me,ke])=>{ke&&ke.userId&&(Ne[ke.userId]=Me)});const Je=Object.entries(Le).map(([Me,ke])=>{const He=(ke.unread||{})[ie.userId]||0;if(!He)return null;const gt=ke.participants||{},Pe=Object.keys(gt||{}).find(Oe=>Oe!==ie.userId);if(!Pe)return null;let De=Pe,me=Qe[De];if(!me){const Oe=Ne[Pe];Oe&&(De=Oe,me=Qe[Oe])}me||(me={userId:Pe,name:Pe,profileImage:"/default-profile.png"});const Re={pushKey:De,userId:me.userId||Pe,name:me.name||me.username||Pe,profileImage:me.profileImage||me.profile||"/default-profile.png"},nt=ke.lastMessage||{};return{chatId:Me,contact:Re,displayName:Re.name,profile:Re.profileImage,lastMessageText:nt.text||"",lastMessageTime:nt.timeStamp||nt.time||null,lastMessageSeen:!!nt.seen,lastMessageSeenAt:nt.seenAt||nt.seenAt||null,lastMessageSenderId:nt.senderId||null,unreadForMe:He}}).filter(Boolean).sort((Me,ke)=>(ke.lastMessageTime||0)-(Me.lastMessageTime||0));Ao(Je)}catch(ie){console.error("Error fetching conversations:",ie),Ao([])}},Bn=Ci.reduce((D,ie)=>D+(ie.unreadForMe||0),0);y.useEffect(()=>{if(!(w!=null&&w.userId))return;let D=!1;return(async()=>{Ye(!0);try{const[Ie,Be,Le,st,Qe]=await Promise.all([Z.get(`${Zt}/Students.json`),Z.get(`${Zt}/Users.json`),Z.get(`${Zt}/Courses.json`),Z.get(`${Zt}/TeacherAssignments.json`),Z.get(`${Zt}/Teachers.json`)]),Ne=Qe.data||{},Je=Object.entries(Ne).find(([Pe,De])=>De.userId===w.userId);if(!Je){console.warn("Teacher not found in Teachers node"),D||(r([]),Ye(!1),i("No teacher assignment found"));return}const Me=Je[0],ke=Object.values(st.data||{}).filter(Pe=>Pe.teacherId===Me).map(Pe=>Pe.courseId),Te=Be.data||{};be(Te);const He=Pe=>th(Te,Pe),gt=Object.entries(Ie.data||{}).map(([Pe,De])=>{var St,it;const me=He(De.userId),Re=De.parentName||((St=De.parent)==null?void 0:St.name)||(me==null?void 0:me.parentName)||De.rawParentName||null,nt=De.parentPhone||((it=De.parent)==null?void 0:it.phone)||(me==null?void 0:me.parentPhone)||De.rawParentPhone||null,Oe=(me==null?void 0:me.dob)||(me==null?void 0:me.birthDate)||De.dob||De.birthDate||null,Tt=eh(Oe);return{...De,studentId:Pe,name:(me==null?void 0:me.name)||De.name||"Unknown",email:(me==null?void 0:me.email)||De.email||"",profileImage:(me==null?void 0:me.profileImage)||De.profileImage||"/default-profile.png",phone:(me==null?void 0:me.phone)||De.phone||"",gender:(me==null?void 0:me.gender)||De.gender||"",dob:Oe,age:Tt,parentName:Re||null,parentPhone:nt||null,raw:De}}).filter(Pe=>ke.some(De=>{var Re;const me=(Re=Le.data)==null?void 0:Re[De];return me&&me.grade===Pe.grade&&me.section===Pe.section}));D||(r(gt),i(""))}catch(Ie){console.error(Ie),D||i("Failed to load students")}finally{D||Ye(!1)}})(),()=>D=!0},[w]),y.useEffect(()=>{var Be,Le,st,Qe,Ne,Je;if(!M){ye(null);return}const D={fullName:M.name||"",phone:M.phone||((Be=M.raw)==null?void 0:Be.phone)||"",gender:M.gender||((Le=M.raw)==null?void 0:Le.gender)||"",email:M.email||"",grade:M.grade||"",section:M.section||"",parentName:M.parentName||((st=M.raw)==null?void 0:st.parentName)||"",parentPhone:M.parentPhone||((Qe=M.raw)==null?void 0:Qe.parentPhone)||"",dob:M.dob||((Ne=M.raw)==null?void 0:Ne.dob)||"",age:M.age??eh(M.dob||((Je=M.raw)==null?void 0:Je.dob))??"",profileImage:M.profileImage||"/default-profile.png"};ye(D);let ie=!1;return(async()=>{var Me,ke,Te,He,gt,Pe,De;try{let me=J;(!me||Object.keys(me).length===0)&&(me=(await Z.get(`${Zt}/Users.json`)).data||{},be(me));const Re=th(me,M.userId)||{},nt=((Me=M.raw)==null?void 0:Me.parentId)||((ke=M.raw)==null?void 0:ke.parentUserId)||(Re==null?void 0:Re.parentId)||(Re==null?void 0:Re.parentUserId)||null,Oe=nt?th(me,nt):null,Tt=(Oe==null?void 0:Oe.name)||((Te=M.raw)==null?void 0:Te.parentName)||M.parentName||"",St=(Oe==null?void 0:Oe.phone)||((He=M.raw)==null?void 0:He.parentPhone)||M.parentPhone||"",it=(Re==null?void 0:Re.phone)||M.phone||((gt=M.raw)==null?void 0:gt.phone)||"",Jn=(Re==null?void 0:Re.gender)||M.gender||((Pe=M.raw)==null?void 0:Pe.gender)||"",ns=(Re==null?void 0:Re.email)||M.email||"",Nl=(Re==null?void 0:Re.dob)||(Re==null?void 0:Re.birthDate)||M.dob||((De=M.raw)==null?void 0:De.dob)||null,ed=eh(Nl)??M.age??"",td={fullName:(Re==null?void 0:Re.name)||M.name||"",phone:it,gender:Jn,email:ns,grade:M.grade||"",section:M.section||"",parentName:Tt,parentPhone:St,dob:Nl||"",age:ed,profileImage:(Re==null?void 0:Re.profileImage)||M.profileImage||"/default-profile.png",userRec:Re,parentRec:Oe};ie||ye(td)}catch(me){console.error("Failed to derive student details",me)}})(),()=>{ie=!0}},[M,J]),y.useEffect(()=>{if(!M)return;let D=!1;return(async()=>{var Ie,Be;try{const st=(await Z.get(`${Zt}/Parents.json`)).data||{},Qe=[(Ie=M.raw)==null?void 0:Ie.parentId,(Be=M.raw)==null?void 0:Be.parentUserId,M.parentId,M.parentUserId].filter(Boolean);let Ne=null;for(const ke of Qe){if(st[ke]){Ne=st[ke];break}const Te=Object.values(st).find(He=>String(He.userId)===String(ke));if(Te){Ne=Te;break}}if(!Ne){const ke=M.studentId||M.userId;for(const Te of Object.values(st)){const He=(Te==null?void 0:Te.children)||{};if(Object.values(He).find(Pe=>String(Pe==null?void 0:Pe.studentId)===String(ke))){Ne=Te;break}}}let Je=null,Me=null;if(Ne&&(Je=Ne.name||Ne.displayName||null,Me=Ne.phone||Ne.phoneNumber||Ne.contact||null,(!Je||!Me)&&Ne.userId))try{const Te=(await Z.get(`${Zt}/Users.json`)).data||{},He=Object.values(Te).find(gt=>String(gt.userId)===String(Ne.userId));He&&(Je=Je||He.name||null,Me=Me||He.phone||null)}catch{}D||ye(ke=>({...ke||{},parentName:Je||(ke==null?void 0:ke.parentName)||"",parentPhone:Me||(ke==null?void 0:ke.parentPhone)||""}))}catch(Le){console.error("Error resolving parent info:",Le)}})(),()=>D=!0},[M]),y.useEffect(()=>{const D=document.querySelector(".chat-messages");D&&(D.scrollTop=D.scrollHeight)},[v]),y.useEffect(()=>{if(o==="All")p([]),d("All");else{const D=[...new Set(n.filter(ie=>ie.grade===o).map(ie=>ie.section))];p(D),d("All")}},[o,n]);const El=n.filter(D=>!(o!=="All"&&D.grade!==o||u!=="All"&&D.section!==u)),mr=[...new Set(n.map(D=>D.grade))].sort();y.useEffect(()=>{if(!(M!=null&&M.studentId)&&!(M!=null&&M.userId)){zn([]);return}let D=!1;return(async()=>{H(!0);try{const[Ie,Be,Le,st]=await Promise.all([Z.get(`${Zt}/Attendance.json`),Z.get(`${Zt}/Teachers.json`),Z.get(`${Zt}/Users.json`),Z.get(`${Zt}/TeacherAssignments.json`)]),Qe=Ie.data||{},Ne=Be.data||{},Je=Le.data||{},Me=st.data||{},ke=[];Object.entries(Qe).forEach(([Te,He])=>{!He||typeof He!="object"||Object.entries(He).forEach(([gt,Pe])=>{if(!Pe||typeof Pe!="object")return;let me=Pe[M.studentId]??Pe[M.userId];if(!me&&Pe.students&&(me=Pe.students[M.studentId]??Pe.students[M.userId]),!me){const Tt=Object.entries(Pe).find(([St,it])=>!it||typeof it!="object"?!1:!!(it.userId&&(String(it.userId)===String(M.userId)||String(it.userId)===String(M.studentId))));Tt&&(me=Tt[1])}if(!me)return;let Re="absent",nt="",Oe=Te;if(typeof me=="string")Re=me;else if(typeof me=="object"){if(Re=me.status||me.attendance_status||Object.values(me)[0]||"present",nt=me.teacherName||me.teacher||me.tutor||"",!nt){const Tt=me.teacherId||me.teacherKey||null;if(Tt&&Ne[Tt]){const St=Ne[Tt];if(St.userId){const it=Object.values(Je).find(Jn=>String(Jn==null?void 0:Jn.userId)===String(St.userId));nt=(it==null?void 0:it.name)||St.name||nt}else nt=St.name||nt}}if(!nt){const Tt=me.teacherUserId||me.teacherUser||me.takenBy||null;if(Tt){const St=Object.values(Je).find(it=>String(it==null?void 0:it.userId)===String(Tt));St&&(nt=St.name||nt)}}Oe=me.subject||Te}if(!nt){const Tt=Object.values(Me).find(St=>String(St.courseId)===String(Te));if(Tt&&Tt.teacherId){const St=Tt.teacherId,it=Ne[St];if(it)if(it.userId){const Jn=Object.values(Je).find(ns=>String(ns==null?void 0:ns.userId)===String(it.userId));nt=(Jn==null?void 0:Jn.name)||it.name||nt}else nt=it.name||nt}}ke.push({courseId:Te,date:gt,status:String(Re).toLowerCase(),teacherName:nt,subject:Oe})})}),D||(ke.sort((Te,He)=>new Date(He.date)-new Date(Te.date)),zn(ke))}catch(Ie){console.error("Attendance fetch error:",Ie),D||zn([])}finally{D||H(!1)}})(),()=>{D=!0}},[M]);const $s=mn.useMemo(()=>Ei.map(D=>({date:D.date,courseId:D.courseId,teacherName:D.teacherName||"",status:D.status||"absent"})),[Ei]),Cl=mn.useMemo(()=>!$s||$s.length===0?{}:$s.reduce((D,ie)=>{const Ie=ie.courseId||ie.subject||"unknown";return D[Ie]||(D[Ie]=[]),D[Ie].push(ie),D},{}),[$s]),Oo=D=>{if(!D||D.length===0)return 0;const ie=D.filter(Ie=>Ie.status==="present"||Ie.status==="late").length;return Math.round(ie/D.length*100)},Ii=D=>{lt(ie=>({...ie,[D]:!ie[D]}))},Il=()=>{localStorage.removeItem("teacher"),Xt("/login")};y.useEffect(()=>{if(!M){q({});return}(async()=>{Ye(!0);try{const ie=__(),Ie=await v_(zt(ie,"ClassMarks"));if(!Ie.exists()){q({}),Ye(!1);return}const Be=Ie.val(),Le={},st=new Set([M.studentId,M.userId,M.userId?`student_${M.userId}`:null].filter(Boolean));Object.entries(Be).forEach(([Qe,Ne])=>{if(!Ne||typeof Ne!="object")return;const Je=Object.entries(Ne).find(([Me,ke])=>!!(st.has(Me)||ke&&typeof ke=="object"&&(ke.userId&&st.has(ke.userId)||ke.studentId&&st.has(ke.studentId))));if(Je){const[,Me]=Je;Le[Qe]=Me}}),q(Le)}catch(ie){console.error("Failed to fetch marks:",ie),q({})}finally{Ye(!1)}})()},[M]),y.useEffect(()=>{if(!(M!=null&&M.userId))return;async function D(){try{const ie=await Z.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/StudentNotes/${M==null?void 0:M.userId}.json`);if(!ie.data){$([]);return}const Ie=Object.entries(ie.data).map(([Be,Le])=>({id:Be,...Le}));Ie.sort((Be,Le)=>new Date(Le.createdAt)-new Date(Be.createdAt)),$(Ie)}catch(ie){console.error("Failed to fetch teacher notes",ie),$([])}}D()},[M]);const Zu=async()=>{if(!ee.trim()||!w||!M)return;ve(!0);const D={teacherId:w.userId,teacherName:w.name,note:ee.trim(),createdAt:new Date().toISOString()};try{await Z.post(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/StudentNotes/${M==null?void 0:M.userId}.json`,D),$(ie=>[D,...ie]),B("")}catch(ie){console.error("Error saving note",ie)}finally{ve(!1)}},jl=()=>{var D;(D=ae.current)==null||D.scrollIntoView({behavior:"smooth"})};y.useEffect(()=>{jl()},[U]),y.useEffect(()=>{if(!O||!M)return;const D=Zd(O,M.userId),ie=zt(Vt,`Chats/${D}/messages`),Ie=eo(ie,Be=>{const Le=Be.val()||{},st=Object.entries(Le).map(([Qe,Ne])=>({id:Qe,...Ne,isTeacher:Ne.senderId===O})).sort((Qe,Ne)=>Qe.timeStamp-Ne.timeStamp);Y(st)});return()=>Ie()},[O,M]),y.useEffect(()=>{if(!X||!M||!O||!U||U.length===0)return;const D=U.filter(Le=>String(Le.receiverId)===String(O)&&!Le.seen);if(D.length===0)return;const ie=Zd(O,M.userId),Ie=Date.now(),Be={messages:{},unread:{}};D.forEach(Le=>{Be.messages[Le.id]={...Be.messages[Le.id]||{},seen:!0,seenAt:Ie}}),Be.unread[O]=null,Be.lastMessage={seen:!0,seenAt:Ie},Z.patch(`${Zt}/Chats/${ie}.json`,Be).catch(Le=>console.error("Failed to mark messages seen:",Le))},[X,U,M,O]),y.useEffect(()=>{var D;(D=ae.current)==null||D.scrollIntoView({behavior:"smooth"})},[U]);const kl=async()=>{if(!te.trim()||!M)return;const D=O,ie=M.userId,Ie=Zd(D,ie),Be=Date.now(),Le={senderId:D,receiverId:ie,type:"text",text:te,seen:!1,timeStamp:Be};await Z.post(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${Ie}/messages.json`,Le),await Z.patch(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${Ie}.json`,{participants:{[D]:!0,[ie]:!0},lastMessage:{text:te,senderId:D,seen:!1,timeStamp:Be},unread:{[ie]:1}}),ne("")},[Qn,Tl]=mn.useState(window.innerWidth<window.innerHeight);return mn.useEffect(()=>{const D=()=>{Tl(window.innerWidth<window.innerHeight)};return window.addEventListener("resize",D),()=>window.removeEventListener("resize",D)},[]),y.useEffect(()=>{const D=document.querySelector(".chat-messages");D&&(D.scrollTop=D.scrollHeight)},[v]),l.jsxs("div",{className:"dashboard-page",children:[l.jsxs("nav",{className:"top-navbar",children:[l.jsx("h2",{children:"Gojo Dashboard"}),l.jsxs("div",{className:"nav-right",children:[l.jsxs("div",{className:"icon-circle",children:[l.jsxs("div",{onClick:()=>Pt(!pr),style:{cursor:"pointer",position:"relative"},"aria-label":"Show notifications",tabIndex:0,role:"button",onKeyPress:D=>{D.key==="Enter"&&Pt(!pr)},children:[l.jsx(Us,{size:24}),fr.length+Bn>0&&l.jsx("span",{style:{position:"absolute",top:-5,right:-5,background:"red",color:"white",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:fr.length+Bn})]}),pr&&l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.08)",zIndex:1999},onClick:()=>Pt(!1)}),l.jsxs("div",{className:"notification-popup",style:typeof window<"u"&&window.innerWidth<=600?{position:"fixed",left:"50%",top:"8%",transform:"translate(-50%, 0)",width:"90vw",maxWidth:340,zIndex:2e3,background:"#fff",borderRadius:12,boxShadow:"0 2px 16px rgba(0,0,0,0.18)",maxHeight:"70vh",overflowY:"auto",padding:12}:{zIndex:2e3,position:"absolute",top:30,right:0,width:300,maxHeight:400,overflowY:"auto",background:"#fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",borderRadius:8},onClick:D=>D.stopPropagation(),children:[fr.length>0&&fr.map((D,ie)=>l.jsxs("div",{onClick:()=>{dt(Ie=>Ie.filter((Be,Le)=>Le!==ie)),Pt(!1),Xt("/dashboard"),setTimeout(()=>{const Ie=Nr.current[D.id];Ie&&(Ie.scrollIntoView({behavior:"smooth",block:"center"}),ts(D.id),setTimeout(()=>ts(null),3e3))},150)},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[l.jsx("img",{src:D.adminProfile,alt:D.adminName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),l.jsxs("div",{children:[l.jsx("strong",{children:D.adminName}),l.jsx("p",{style:{margin:0,fontSize:12},children:D.title})]})]},D.id||ie)),Bn>0&&Ci.filter(D=>D.unreadForMe>0).map((D,ie)=>l.jsxs("div",{onClick:()=>{Pt(!1),Xt("/all-chat")},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[l.jsx("img",{src:D.profile||"/default-profile.png",alt:D.displayName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),l.jsxs("div",{children:[l.jsx("strong",{children:D.displayName}),l.jsxs("p",{style:{margin:0,fontSize:12,color:"#0b78f6",display:"flex",alignItems:"center",gap:8},children:[D.lastMessageSenderId===O?l.jsx("span",{style:{color:D.lastMessageSeen?"#0bda63":"#cbd5e1"},children:D.lastMessageSeen?"":""}):null,l.jsx("span",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:160},children:D.lastMessageText||"New message"}),D.lastMessageSeenAt&&l.jsx("span",{style:{marginLeft:6,color:"#64748b",fontSize:11},children:new Date(D.lastMessageSeenAt).toLocaleTimeString()})]})]})]},D.chatId||ie)),fr.length===0&&Bn===0&&l.jsx("div",{style:{padding:15},children:"No notifications"})]})]})]}),l.jsx("div",{className:"icon-circle",style:{position:"relative",marginLeft:12},children:l.jsxs("div",{onClick:()=>Xt("/all-chat"),style:{cursor:"pointer",position:"relative"},children:[l.jsx(Bs,{size:22}),Bn>0&&l.jsx("span",{style:{position:"absolute",top:-6,right:-6,background:"#f60b0b",color:"#fff",borderRadius:"50%",minWidth:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 5px"},children:Bn})]})}),l.jsx("div",{className:"icon-circle",onClick:()=>Xt("/settings"),children:l.jsx(jr,{})}),l.jsx("img",{src:(L==null?void 0:L.profileImage)||"/default-profile.png"})]})]}),l.jsxs("div",{className:"google-dashboard",children:[typeof window<"u"&&y.useEffect(()=>{const D=()=>{window.innerWidth<=600?e(!1):e(!0)};return window.addEventListener("resize",D),D(),()=>window.removeEventListener("resize",D)},[]),typeof window<"u"&&window.innerWidth<=600&&!t&&l.jsx("button",{className:"sidebar-arrow-btn",style:{position:"fixed",left:0,top:0,zIndex:1300,background:"#fff",border:"none",borderRadius:"0 8px 8px 0",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",padding:8,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:()=>e(!0),"aria-label":"Open sidebar menu",children:l.jsx(Rs,{size:22})}),typeof window<"u"&&window.innerWidth<=600&&t&&l.jsx("div",{className:"sidebar-overlay visible",onClick:()=>e(!1),style:{display:"block",position:"fixed",inset:0,background:"rgba(0,0,0,0.35)",zIndex:1200}}),l.jsxs("div",{className:`google-sidebar${typeof window<"u"&&window.innerWidth<=600&&t?" open":""}`,style:typeof window<"u"&&window.innerWidth<=600?{position:"fixed",top:64,left:t?0:"-220px",width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",zIndex:1200,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto",borderRadius:0,transition:"left 0.25s cubic-bezier(.4,0,.2,1)"}:{position:"fixed",top:64,left:0,width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.04)",zIndex:900,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto",borderRadius:0},children:[l.jsx("style",{children:`
                    @media (max-width: 600px) {
                      .google-sidebar {
                        left: -220px;
                        transition: left 0.25s cubic-bezier(.4,0,.2,1);
                        border-radius: 0 !important;
                      }
                      .google-sidebar.open {
                        left: 0 !important;
                        z-index: 1202;
                        border-radius: 0 !important;
                      }
                      .sidebar-overlay {
                        display: block;
                        position: fixed;
                        inset: 0;
                        background: rgba(0,0,0,0.35);
                        z-index: 1200;
                        transition: opacity 0.2s;
                      }
                      .sidebar-arrow-btn {
                        display: flex !important;
                      }
                    }
                  `}),L&&l.jsxs("div",{className:"sidebar-profile",children:[l.jsx("div",{className:"sidebar-img-circle",children:l.jsx("img",{src:L.profileImage||"/default-profile.png",alt:"profile"})}),l.jsx("h3",{children:L.name}),l.jsx("p",{children:L.username})]}),l.jsxs("div",{className:"sidebar-menu",children:[l.jsxs(xe,{className:"sidebar-btn",to:"/dashboard",children:[l.jsx(Xr,{})," Home"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/students",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[l.jsx(Ke,{})," Students"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/admins",children:[l.jsx(Ke,{})," Admins"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/parents",children:[l.jsx(Jr,{})," Parents"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/marks",children:[l.jsx(Ir,{})," Marks"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/attendance",children:[l.jsx(Ke,{})," Attendance"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/schedule",children:[l.jsx(Ke,{})," Schedule"]}),l.jsxs("button",{className:"sidebar-btn logout-btn",onClick:Il,children:[l.jsx(Zr,{})," Logout"]})]})]}),l.jsxs("div",{style:{flex:1,display:"flex",justifyContent:"center",padding:"30px"},children:[l.jsxs("div",{className:"student-list-card-responsive",style:{width:"220px",position:"relative",marginLeft:"30px",marginRight:Qn?0:"30px"},children:[l.jsx("style",{children:`
               @media (max-width: 600px) {
                 .student-list-card-responsive {
                   margin-left: -16px !important;
                   margin-right: auto !important;
                   width: 70vw !important;
                   max-width: 70vw !important;
                 }
               }
             `}),l.jsx("h2",{style:{textAlign:"center",marginBottom:"20px"},children:"My Students"}),l.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px",flexWrap:"wrap"},children:[l.jsx("button",{onClick:()=>c("All"),style:{padding:"8px 15px",borderRadius:"8px",background:o==="All"?"#4b6cb7":"#ddd",color:o==="All"?"#fff":"#000",border:"none"},children:"All Grades"}),mr.map(D=>l.jsxs("button",{onClick:()=>c(D),style:{padding:"8px 15px",borderRadius:"8px",background:o===D?"#4b6cb7":"#ddd",color:o===D?"#fff":"#000",border:"none"},children:["Grade ",D]},D))]}),o!=="All"&&l.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"20px",flexWrap:"wrap"},children:[l.jsx("button",{onClick:()=>d("All"),style:{padding:"6px 12px",borderRadius:"8px",background:u==="All"?"#4b6cb7":"#ddd",color:u==="All"?"#fff":"#000",border:"none"},children:"All Sections"}),f.map(D=>l.jsxs("button",{onClick:()=>d(D),style:{padding:"6px 12px",borderRadius:"8px",background:u===D?"#4b6cb7":"#ddd",color:u===D?"#fff":"#000",border:"none"},children:["Section ",D]},D))]}),vt&&l.jsx("p",{children:"Loading students..."}),s&&l.jsx("p",{style:{color:"red"},children:s}),!vt&&!s&&El.length===0&&l.jsx("p",{children:"No students found."}),l.jsx("style",{children:`
              .student-list-responsive {
                display: flex;
                flex-direction: column;
                margin-top: 30px;
                gap: 12px;
                width: 100%;
                max-width: 100vw;
                margin-left: 0;
                margin-right: 0;
              }
              @media (max-width: 600px) {
                .student-list-responsive {
                  width: 100vw !important;
                  max-width: 100vw !important;
                  margin-left: 0 !important;
                  margin-right: 0 !important;
                  padding: 0 !important;
                  align-items: flex-start !important;
                }
                .student-list-responsive > div {
                  margin-left: 10px !important;
                  padding-left: 10px !important;
                  width: 100vw !important;
                  max-width: 100vw !important;
                  min-width: 100vw !important;
                  box-sizing: border-box !important;
                }
              }
              @media (min-width: 350px) {
                .student-list-responsive {
                  width: 350px;
                  max-width: 70vw;
                }
              }
               @media (max-width: 600px) {
                 .student-list-card-responsive {
                   margin-left: -32px !important;
                   margin-right: auto !important;
                   width: 80vw !important;
                   max-width: 80vw !important;
                 }
               }
                  width: 500px;
                  max-width: 80vw;
                }
              }
              @media (min-width: 1200px) {
                .student-list-responsive {
                  width: 600px;
                  max-width: 700px;
                  margin-left: -100px;
                }
              }
              @media (min-width: 1500px) {
                .student-list-responsive {
                  width: 600px;
                  max-width: 700px;
                  margin-left: -250px;
                }
              }
            `}),l.jsx("div",{className:"student-list-responsive",children:El.map((D,ie)=>l.jsx(cT,{student:D,selected:(M==null?void 0:M.userId)===D.userId,onClick:()=>je(D)},D.userId||D.id||ie))})]}),M&&l.jsxs("div",{style:{width:Qn?"100%":"30%",height:Qn?"100vh":"calc(100vh - 60px)",position:"fixed",right:0,top:Qn?0:"60px",background:"#fff",zIndex:1e3,display:"flex",flexDirection:"column",overflowY:"auto",boxShadow:Qn?"0 0 0 rgba(0,0,0,0)":"0 0 15px rgba(0,0,0,0.08)",transition:"all 0.35s ease"},children:[l.jsx("button",{onClick:()=>je(null),style:{position:"fixed",top:56,right:16,width:42,height:42,borderRadius:12,border:"none",background:"#ffffff",boxShadow:"0 6px 18px rgba(2,6,23,0.15)",cursor:"pointer",fontSize:22,fontWeight:900,zIndex:2e3},children:""}),l.jsxs("div",{style:{textAlign:"center",marginBottom:"20px",paddingTop:20},children:[l.jsx("div",{style:{width:"120px",height:"120px",margin:"0 auto 15px",borderRadius:"50%",overflow:"hidden",border:"4px solid #4b6cb7"},children:l.jsx("img",{src:M.profileImage,alt:M.name,style:{width:"100%",height:"100%",objectFit:"cover"}})}),l.jsx("h2",{style:{margin:0,fontSize:"22px"},children:M.name}),l.jsx("p",{style:{color:"#555",margin:"5px 0"},children:M.studentId}),l.jsxs("p",{style:{color:"#555",margin:"5px 0"},children:[l.jsx("strong",{children:"Grade:"})," ",M.grade,M.section]})]}),l.jsx("div",{style:{display:"flex",marginBottom:"15px"},children:["details","attendance","performance"].map(D=>l.jsx("button",{onClick:()=>j(D),style:{flex:1,padding:"10px",border:"none",background:"none",cursor:"pointer",fontWeight:"600",color:g===D?"#4b6cb7":"#777",borderBottom:g===D?"3px solid #4b6cb7":"3px solid transparent"},children:D.toUpperCase()},D))}),l.jsxs("div",{children:[g==="details"&&l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:28,padding:50,marginLeft:0,marginRight:0,borderRadius:0,background:"linear-gradient(180deg,#eef2ff,#f8fafc)",fontFamily:"Inter, system-ui"},children:l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:24,fontWeight:900,marginBottom:18,marginTop:-30,background:"linear-gradient(90deg,#2563eb,#7c3aed)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Student Details"}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",columnGap:68,rowGap:14},children:[["Phone",G==null?void 0:G.phone],["Gender",G==null?void 0:G.gender],["Email",G==null?void 0:G.email],["Grade",G==null?void 0:G.grade],["Section",G==null?void 0:G.section],["Age",G==null?void 0:G.age],["Birth Date",G==null?void 0:G.dob],["Parent Name",G==null?void 0:G.parentName],["Parent Phone",G==null?void 0:G.parentPhone]].map(([D,ie])=>l.jsxs("div",{style:{padding:18,borderRadius:20,background:"#ffffff",boxShadow:"0 6px 10px rgba(0,0,0,0.08)",marginLeft:-30,marginRight:-30},children:[l.jsx("div",{style:{fontSize:12,fontWeight:700,color:"#000102",textTransform:"uppercase"},children:D}),l.jsx("div",{style:{marginTop:8,fontSize:16,fontWeight:400,color:"#000102"},children:ie||""})]},D))}),l.jsxs("div",{style:{marginTop:36},children:[l.jsx("div",{style:{fontSize:22,fontWeight:900,marginBottom:14,color:"#1e293b"},children:"Teacher Comments"}),l.jsxs("div",{style:{background:"#ffffff",padding:18,borderRadius:22,boxShadow:"0 14px 40px rgba(0,0,0,0.1)"},children:[l.jsx("textarea",{value:ee,onChange:D=>B(D.target.value),placeholder:"Write an important comment about the student...",style:{width:"100%",minHeight:30,border:"none",outline:"none",resize:"vertical",fontSize:15,lineHeight:1.6}}),l.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:12},children:l.jsx("button",{onClick:Zu,disabled:ce,style:{padding:"10px 22px",borderRadius:999,border:"none",background:"linear-gradient(135deg,#2563eb,#7c3aed)",color:"#fff",fontWeight:900,cursor:"pointer",boxShadow:"0 12px 30px rgba(37,99,235,0.45)"},children:ce?"Saving...":"Add Comment"})})]}),l.jsx("div",{style:{marginTop:18,display:"flex",flexDirection:"column",gap:14},children:K.length===0?l.jsx("div",{style:{textAlign:"center",padding:18,color:"#64748b",background:"#ffffff",borderRadius:18},children:"No teacher comments yet"}):K.map(D=>{var ie;return l.jsxs("div",{style:{display:"flex",gap:12},children:[l.jsx("div",{style:{width:44,height:44,borderRadius:"50%",background:"linear-gradient(135deg,#60a5fa,#2563eb)",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:900},children:((ie=D.teacherName)==null?void 0:ie.split(" ").map(Ie=>Ie[0]).join("").slice(0,2).toUpperCase())||"T"}),l.jsxs("div",{style:{flex:1,background:"#ffffff",padding:14,borderRadius:18,boxShadow:"0 8px 24px rgba(0,0,0,0.08)"},children:[l.jsx("div",{style:{fontWeight:800,color:"#1e293b"},children:D.teacherName}),l.jsx("div",{style:{marginTop:6},children:D.note}),l.jsx("div",{style:{marginTop:6,fontSize:12,color:"#64748b",textAlign:"right"},children:new Date(D.createdAt).toLocaleString()})]})]},D.id)})})]})]})}),g==="attendance"&&M&&l.jsxs("div",{style:{padding:30,background:"radial-gradient(circle at top,#eef2ff,#f8fafc)",borderRadius:26,fontFamily:"Inter, system-ui"},children:[l.jsx("div",{style:{display:"flex",justifyContent:"center",gap:16,marginBottom:32},children:["daily","weekly","monthly"].map(D=>l.jsx("button",{onClick:()=>se(D),style:{padding:"12px 28px",borderRadius:999,border:"none",fontWeight:800,fontSize:13,letterSpacing:1,cursor:"pointer",background:Ee===D?"linear-gradient(135deg,#4f46e5,#2563eb)":"rgba(255,255,255,.8)",color:Ee===D?"#fff":"#1f2937",boxShadow:Ee===D?"0 5px 5px rgba(79,70,229,.45)":"0 5px 5px rgba(0,0,0,.08)",transition:"all .3s ease"},children:D.toUpperCase()},D))}),Object.entries(Cl).filter(([D])=>le==="All"||D===le).map(([D,ie])=>{var Je;const Ie=new Date().toDateString(),Be=ie.filter(Me=>{var ke,Te,He,gt;return((Te=(ke=new Date(Me.date)).getWeek)==null?void 0:Te.call(ke))===((gt=(He=new Date).getWeek)==null?void 0:gt.call(He))}),Le=ie.filter(Me=>new Date(Me.date).getMonth()===new Date().getMonth()),st=Ee==="daily"?ie.filter(Me=>new Date(Me.date).toDateString()===Ie):Ee==="weekly"?Be:Le,Qe=Oo(st),Ne=`${Ee}-${D}`;return l.jsxs("div",{onClick:()=>Ii(Ne),style:{cursor:"pointer",background:"linear-gradient(180deg,rgba(255,255,255,.95),rgba(255,255,255,.85))",backdropFilter:"blur(14px)",borderRadius:26,padding:26,marginBottom:26,boxShadow:"0 10px 10px rgba(0,0,0,.12)",position:"relative",overflow:"hidden"},children:[l.jsx("div",{style:{position:"absolute",inset:0,background:"radial-gradient(circle at top left,rgba(99,102,241,.15),transparent 60%)",pointerEvents:"none"}}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:18},children:[l.jsxs("div",{children:[l.jsxs("h3",{style:{margin:0,fontSize:20,fontWeight:900,color:"#1e3a8a"},children:[" ",iT(D)]}),l.jsxs("p",{style:{margin:"6px 0 0",fontSize:13,color:"#64748b"},children:[" ",(Je=ie[0])==null?void 0:Je.teacherName]})]}),l.jsxs("div",{style:{padding:"8px 16px",borderRadius:999,fontSize:13,fontWeight:900,background:Qe>=75?"linear-gradient(135deg,#22c55e,#16a34a)":Qe>=50?"linear-gradient(135deg,#facc15,#eab308)":"linear-gradient(135deg,#ef4444,#dc2626)",color:"#fff",boxShadow:"0 10px 25px rgba(0,0,0,.25)"},children:[Qe,"%"]})]}),l.jsx("div",{onClick:()=>Ii(Ne),style:{height:16,background:"#e5e7eb",borderRadius:999,cursor:"pointer",overflow:"hidden",marginBottom:10},children:l.jsx("div",{style:{height:"100%",width:`${Qe}%`,background:Qe>=75?"linear-gradient(90deg,#22c55e,#16a34a)":Qe>=50?"linear-gradient(90deg,#facc15,#eab308)":"linear-gradient(90deg,#ef4444,#dc2626)",transition:"width .5s cubic-bezier(.4,0,.2,1)"}})}),l.jsxs("div",{style:{fontSize:12,fontWeight:700,color:"#475569",marginBottom:12,letterSpacing:.6},children:["CLICK BAR TO VIEW ",Ee.toUpperCase()," DETAILS"]}),qe[Ne]&&l.jsx("div",{style:{marginTop:14,background:"#f1f5f9",borderRadius:18,padding:14},children:st.map((Me,ke)=>l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 8px",borderBottom:ke!==st.length-1?"1px solid #e5e7eb":"none"},children:[l.jsx("div",{style:{display:"flex",flexDirection:"column"},children:l.jsxs("span",{style:{fontSize:13,color:"#1f2937"},children:[" ",new Date(Me.date).toDateString()]})}),l.jsx("span",{style:{padding:"6px 14px",borderRadius:999,fontSize:12,fontWeight:900,background:Me.status==="present"?"#dcfce7":Me.status==="late"?"#fef3c7":"#fee2e2",color:Me.status==="present"?"#166534":Me.status==="late"?"#92400e":"#991b1b"},children:Me.status.toUpperCase()})]},ke))})]},D)})]}),g==="performance"&&l.jsxs("div",{style:{position:"relative",paddingBottom:"70px",background:"#f8fafc"},children:[l.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"40px",marginBottom:"25px",borderBottom:"2px solid #e5e7eb",paddingBottom:"8px"},children:["semester1","semester2"].map(D=>{const ie=kt===D;return l.jsxs("button",{onClick:()=>Jt(D),style:{background:"none",border:"none",cursor:"pointer",fontSize:"16px",fontWeight:"800",color:ie?"#2563eb":"#64748b",paddingBottom:"10px",position:"relative"},children:[D==="semester1"?"Semester 1":"Semester 2",ie&&l.jsx("span",{style:{position:"absolute",bottom:"-2px",left:0,width:"100%",height:"4px",background:"linear-gradient(135deg,#4b6cb7,#1e40af)",borderRadius:"6px"}})]},D)})}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"20px",padding:"20px"},children:vt?l.jsx("div",{style:{textAlign:"center",gridColumn:"1 / -1",padding:"30px"},children:"Loading performance..."}):Object.keys(F||{}).length===0?l.jsx("div",{style:{textAlign:"center",padding:"30px",borderRadius:"18px",background:"#ffffff",color:"#475569",fontSize:"16px",fontWeight:"600",boxShadow:"0 10px 25px rgba(0,0,0,0.08)",gridColumn:"1 / -1"},children:" No Performance Records"}):Object.entries(F).map(([D,ie],Ie)=>{const Be=ie==null?void 0:ie[kt];if(!Be)return null;const Le=Be.assessments||{},st=Object.values(Le).reduce((ke,Te)=>ke+(Te.score||0),0),Qe=Object.values(Le).reduce((ke,Te)=>ke+(Te.max||0),0),Ne=Qe?st/Qe*100:0,Je=Ne>=75?"#16a34a":Ne>=50?"#f59e0b":"#dc2626",Me=D.replace("course_","").replace(/_/g," ").toUpperCase();return l.jsxs("div",{style:{padding:"18px",borderRadius:"20px",background:"#ffffff",boxShadow:"0 12px 30px rgba(0,0,0,0.08)"},children:[l.jsx("div",{style:{fontSize:"16px",fontWeight:"800",marginBottom:"14px",color:"#2563eb",textAlign:"center"},children:Me}),l.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"16px"},children:l.jsx("div",{style:{width:"90px",height:"90px",borderRadius:"50%",background:`conic-gradient(${Je} ${Ne*3.6}deg, #e5e7eb 0deg)`,display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsxs("div",{style:{width:"66px",height:"66px",borderRadius:"50%",background:"#fff",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[l.jsx("strong",{style:{color:Je},children:st}),l.jsxs("span",{style:{fontSize:"11px"},children:["/ ",Qe]})]})})}),Object.entries(Le).map(([ke,Te])=>l.jsxs("div",{style:{marginBottom:"10px"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"13px",fontWeight:"600"},children:[l.jsx("span",{children:Te.name}),l.jsxs("span",{children:[Te.score," / ",Te.max]})]}),l.jsx("div",{style:{height:"6px",borderRadius:"999px",background:"#e5e7eb",marginTop:"5px"},children:l.jsx("div",{style:{width:`${Te.score/Te.max*100}%`,height:"100%",background:Je}})})]},ke)),l.jsx("div",{style:{marginTop:"10px",textAlign:"center",fontWeight:"700",color:Je},children:Ne>=75?"Excellent":Ne>=50?"Good":"Needs Improvement"}),l.jsxs("div",{style:{marginTop:"6px",textAlign:"center",fontSize:"12px",color:"#64748b"},children:[" ",ie.teacherName||Be.teacherName||"N/A"]})]},`${D}-${Ie}`)})})]})]}),!X&&l.jsx("div",{onClick:()=>C(!0),style:{position:"fixed",bottom:"20px",right:"20px",width:"60px",height:"60px",background:"linear-gradient(135deg, #833ab4, #0259fa, #459afc)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",cursor:"pointer",zIndex:1e3,boxShadow:"0 8px 18px rgba(0,0,0,0.25)",transition:"transform 0.2s ease"},children:l.jsx(Cp,{size:30})}),X&&M&&l.jsxs("div",{style:{position:"fixed",bottom:"20px",right:"20px",width:"360px",height:"480px",background:"#fff",borderRadius:"16px",boxShadow:"0 12px 30px rgba(0,0,0,0.25)",zIndex:2e3,display:"flex",flexDirection:"column",overflow:"hidden"},children:[l.jsxs("div",{style:{padding:"14px",borderBottom:"1px solid #eee",display:"flex",justifyContent:"space-between",alignItems:"center",background:"#fafafa"},children:[l.jsx("strong",{children:M.name}),l.jsxs("div",{style:{display:"flex",gap:"10px"},children:[l.jsx("button",{onClick:()=>{C(!1),Xt("/all-chat",{state:{user:M,tab:"student"}})},style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px"},children:""}),l.jsx("button",{onClick:()=>C(!1),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:""})]})]}),l.jsxs("div",{style:{flex:1,padding:"12px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"6px",background:"#f9f9f9"},children:[U.length===0?l.jsxs("p",{style:{textAlign:"center",color:"#aaa"},children:["Start chatting with ",M.name]}):U.map(D=>{const ie=String(D.senderId)===String(L==null?void 0:L.userId);return l.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:ie?"flex-end":"flex-start",marginBottom:10},children:l.jsxs("div",{style:{maxWidth:"70%",background:ie?"#4facfe":"#fff",color:ie?"#fff":"#000",padding:"10px 14px",borderRadius:18,borderTopRightRadius:ie?0:18,borderTopLeftRadius:ie?18:0,boxShadow:"0 1px 3px rgba(0,0,0,0.1)",wordBreak:"break-word",cursor:"default",position:"relative"},children:[D.text," ",D.edited&&l.jsx("small",{style:{fontSize:10},children:" (edited)"}),l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:6,marginTop:6,fontSize:11,color:ie?"#fff":"#888"},children:[l.jsx("span",{style:{marginRight:6,fontSize:11,opacity:.9},children:lT(D.timeStamp)}),l.jsx("span",{children:aT(D.timeStamp)}),ie&&!D.deleted&&l.jsxs("span",{style:{display:"flex",gap:0,alignItems:"center"},children:[l.jsx(uo,{size:12,color:ie?"#fff":"#888",style:{opacity:.85,marginLeft:6}}),D.seen&&l.jsx(uo,{size:12,color:ie?"#f3f7f8":"#ccc",style:{marginLeft:2,opacity:.95}})]})]})]})},D.messageId||D.id)}),l.jsx("div",{ref:ae})]}),l.jsxs("div",{style:{padding:"10px",borderTop:"1px solid #eee",display:"flex",gap:"8px",background:"#fff"},children:[l.jsx("input",{value:te,onChange:D=>ne(D.target.value),placeholder:"Type a message...",style:{flex:1,padding:"10px 14px",borderRadius:"25px",border:"1px solid #ccc",outline:"none"},onKeyDown:D=>{D.key==="Enter"&&kl()}}),l.jsx("button",{onClick:()=>kl(),style:{width:45,height:45,borderRadius:"50%",background:"#4facfe",border:"none",color:"#fff",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},children:l.jsx(Dv,{})})]})]})]})]})]})]})}const dT="https://gojo-teacher-web.onrender.com/api",Sn="https://ethiostore-17d9f-default-rtdb.firebaseio.com";function hT(){const[t,e]=y.useState(window.innerWidth>600),[n,r]=y.useState(null),[s,i]=y.useState([]),[o,c]=y.useState([]),[u,d]=y.useState(""),[f,p]=y.useState([]),[g,j]=y.useState({}),[v,N]=y.useState(!1),[R,b]=y.useState("semester2"),[w,_]=y.useState([]),[P,H]=y.useState(!1),[X,C]=y.useState([]),[x,E]=y.useState(null),[k,T]=y.useState(!1),A=Fn(),[I,J]=y.useState(!1),[be,G]=y.useState([]);y.useEffect(()=>{const O=()=>{window.innerWidth<=600?e(!1):e(!0)};return window.addEventListener("resize",O),O(),()=>window.removeEventListener("resize",O)},[]),y.useEffect(()=>{const O=JSON.parse(localStorage.getItem("teacher"));if(!O){A("/login");return}r(O)},[A]);const ye=n==null?void 0:n.userId;y.useEffect(()=>{n&&he(n)},[n]),y.useEffect(()=>{if(!u)return;(async()=>{try{const F=await Z.get(`${Sn}/ClassMarks/${u}.json`),q=s.find(se=>se.id===u);if(!q)return;const re=o.filter(se=>se.grade===q.grade&&se.section===q.section),pe={};let Ee=[];re.forEach(se=>{var Ce,qe;const le=(qe=(Ce=F.data)==null?void 0:Ce[se.id])==null?void 0:qe[R];le!=null&&le.assessments?(pe[se.id]=le.assessments,Ee.length||(Ee=Object.values(le.assessments))):pe[se.id]={}}),j(pe),p(Ee.map(se=>({name:se.name,max:se.max}))),N(Ee.length>0)}catch(F){console.error("Error loading marks:",F),N(!1),j({})}})()},[u,s,o,R]),y.useEffect(()=>{if(!n)return;(async()=>{try{const[F,q,re]=await Promise.all([Z.get(`${Sn}/TeacherAssignments.json`),Z.get(`${Sn}/Courses.json`),Z.get(`${Sn}/Teachers.json`)]),pe=Object.entries(re.data||{}).find(([Ce,qe])=>qe.userId===ye);if(!pe)return;const Ee=pe[0],se=Object.values(F.data||{}).filter(Ce=>Ce.teacherId===Ee).map(Ce=>Ce.courseId),le=Object.entries(q.data||{}).filter(([Ce])=>se.includes(Ce)).map(([Ce,qe])=>({id:Ce,...qe}));i(le)}catch(F){console.error("Error fetching courses:",F)}})()},[n,ye]),y.useEffect(()=>{if(!ye)return;(async()=>{try{const[F,q]=await Promise.all([Z.get(`${Sn}/Students.json`),Z.get(`${Sn}/Users.json`)]),re=F.data||{},pe=q.data||{},Ee=Object.entries(re).map(([se,le])=>{var Ce,qe;return{id:se,...le,name:((Ce=pe==null?void 0:pe[le.userId])==null?void 0:Ce.name)||"Unknown",profileImage:((qe=pe==null?void 0:pe[le.userId])==null?void 0:qe.profileImage)||"/default-profile.png"}});c(Ee)}catch(F){console.error("Error fetching students:",F),c([])}})()},[ye]),y.useEffect(()=>{u&&(p([]),N(!1),j({}))},[u]);const K=()=>p(O=>[...O,{name:"",max:""}]),$=(O,F,q)=>{const re=[...f];re[O][F]=q,p(re)},ee=O=>p(F=>F.filter((q,re)=>re!==O)),B=async()=>{if(f.reduce((F,q)=>F+Number(q.max||0),0)!==100){alert("Total MAX must be exactly 100");return}const O={};f.forEach((F,q)=>{O[`a${q+1}`]={name:F.name,max:Number(F.max),score:0}});try{const F=s.find(pe=>pe.id===u);if(!F)return;const q=o.filter(pe=>pe.grade===F.grade&&pe.section===F.section);await Promise.all(q.map(pe=>Z.put(`${Sn}/ClassMarks/${u}/${pe.id}/${R}.json`,{teacherName:n.name,assessments:O})));const re={};q.forEach(pe=>{re[pe.id]=O}),j(re),N(!0),alert("Assessment structure saved!")}catch(F){console.error("Error submitting structure:",F),alert("Failed to submit structure")}},ce=(O,F,q)=>{j(re=>({...re,[O]:{...re[O],[F]:{...re[O][F],score:Number(q)}}}))},ve=async O=>{try{await Z.put(`${Sn}/ClassMarks/${u}/${O}/${R}.json`,{teacherName:n.name,assessments:g[O]}),alert("Marks saved successfully")}catch(F){console.error("Save failed:",F),alert("Failed to save marks")}},we=()=>{localStorage.removeItem("teacher"),A("/login")};y.useEffect(()=>{(async()=>{try{let q=(await Z.get(`${dT}/get_posts`)).data||[];!Array.isArray(q)&&typeof q=="object"&&(q=Object.values(q));const[re,pe]=await Promise.all([Z.get(`${Sn}/School_Admins.json`),Z.get(`${Sn}/Users.json`)]),Ee=re.data||{},se=pe.data||{},le=JSON.parse(localStorage.getItem("teacher")),Ce=M(le==null?void 0:le.userId),qe=ze=>{const vt=ze.adminId||ze.posterAdminId||ze.poster||ze.admin||null;if(vt&&Ee[vt]){const Ye=Ee[vt],Qt=Ye.userId,wt=se[Qt]||null,kt=wt&&wt.name||Ye.name||ze.adminName||"Admin",Jt=wt&&wt.profileImage||Ye.profileImage||ze.adminProfile||"/default-profile.png";return{name:kt,profile:Jt}}return{name:ze.adminName||"Admin",profile:ze.adminProfile||"/default-profile.png"}},lt=q.slice().sort((ze,vt)=>(vt.time?new Date(vt.time).getTime():0)-(ze.time?new Date(ze.time).getTime():0)).filter(ze=>ze.postId&&!Ce.includes(ze.postId)).slice(0,5).map(ze=>{var Ye;const vt=qe(ze);return{type:"post",id:ze.postId,title:((Ye=ze.message)==null?void 0:Ye.substring(0,50))||"Untitled post",adminName:vt.name,adminProfile:vt.profile}});let mt=[];try{const ze=le;if(ze&&ze.userId){const[vt,Ye]=await Promise.all([Z.get(`${Sn}/Chats.json`),Z.get(`${Sn}/Users.json`)]),Qt=vt.data||{},kt=Ye.data||{}||{},Jt={};Object.entries(kt).forEach(([dn,_n])=>{_n&&_n.userId&&(Jt[_n.userId]=dn)}),mt=Object.entries(Qt).map(([dn,_n])=>{const zn=(_n.unread||{})[ze.userId]||0;if(!zn)return null;const fr=_n.participants||{},dt=Object.keys(fr||{}).find(Nr=>Nr!==ze.userId);if(!dt)return null;let pr=dt,Pt=kt[pr];if(!Pt){const Nr=Jt[dt];Nr&&(pr=Nr,Pt=kt[Nr])}Pt||(Pt={userId:dt,name:dt,profileImage:"/default-profile.png"});const Tr={pushKey:pr,userId:Pt.userId||dt,name:Pt.name||Pt.username||dt,profileImage:Pt.profileImage||Pt.profile||"/default-profile.png"},ts=_n.lastMessage||{};return{type:"message",chatId:dn,displayName:Tr.name,profile:Tr.profileImage,lastMessageText:ts.text||"",lastMessageTime:ts.timeStamp||ts.time||null,unreadForMe:zn}}).filter(Boolean).sort((dn,_n)=>(_n.lastMessageTime||0)-(dn.lastMessageTime||0))}}catch(ze){console.error("Error fetching message notifications:",ze)}_([...lt,...mt]),C(mt)}catch(F){console.error("Error fetching notifications:",F)}})()},[]);const he=async(O=n)=>{try{const F=O||JSON.parse(localStorage.getItem("teacher"));if(!F||!F.userId){G([]);return}const[q,re]=await Promise.all([Z.get(`${Sn}/Chats.json`),Z.get(`${Sn}/Users.json`)]),pe=q.data||{},se=re.data||{}||{},le={};Object.entries(se).forEach(([qe,lt])=>{lt&&lt.userId&&(le[lt.userId]=qe)});const Ce=Object.entries(pe).map(([qe,lt])=>{const ze=(lt.unread||{})[F.userId]||0;if(!ze)return null;const vt=lt.participants||{},Ye=Object.keys(vt||{}).find(dn=>dn!==F.userId);if(!Ye)return null;let Qt=Ye,wt=se[Qt];if(!wt){const dn=le[Ye];dn&&(Qt=dn,wt=se[dn])}wt||(wt={userId:Ye,name:Ye,profileImage:"/default-profile.png"});const kt={pushKey:Qt,userId:wt.userId||Ye,name:wt.name||wt.username||Ye,profileImage:wt.profileImage||wt.profile||"/default-profile.png"},Jt=lt.lastMessage||{};return{chatId:qe,contact:kt,displayName:kt.name,profile:kt.profileImage,lastMessageText:Jt.text||"",lastMessageTime:Jt.timeStamp||Jt.time||null,unreadForMe:ze}}).filter(Boolean).sort((qe,lt)=>(lt.lastMessageTime||0)-(qe.lastMessageTime||0));G(Ce)}catch(F){console.error("Error fetching conversations:",F),G([])}},L=X.reduce((O,F)=>O+(F.unreadForMe||0),0),de=O=>{!n||!O||(je(n.userId,O),_(F=>F.filter(q=>q.id!==O)),H(!1))};function M(O){return JSON.parse(localStorage.getItem(`seen_posts_${O}`))||[]}function je(O,F){const q=M(O);q.includes(F)||localStorage.setItem(`seen_posts_${O}`,JSON.stringify([...q,F]))}const Q=y.useRef(null),[ge,U]=y.useState(!1),[Y,te]=y.useState(!1),ne=()=>{const O=Q.current;if(!O)return;const{scrollLeft:F,scrollWidth:q,clientWidth:re}=O;U(F>8),te(F+re<q-8)};y.useEffect(()=>{const O=Q.current;if(!O)return;ne();const F=()=>ne(),q=()=>ne();return O.addEventListener("scroll",F,{passive:!0}),window.addEventListener("resize",q),()=>{O.removeEventListener("scroll",F),window.removeEventListener("resize",q)}},[v,f.length]),y.useEffect(()=>{const O="responsive-marks-table-style";if(document.getElementById(O))return;const F=document.createElement("style");F.id=O,F.innerHTML=`
      @media (max-width: 600px) {
        .google-main {
          margin-left: 0 !important;
          padding-left: 0 !important;
          width: 100vw !important;
          max-width: 100vw !important;
          overflow-x: auto !important;
        }
        .marks-table-wrapper {
          width: 100vw !important;
          max-width: 100vw !important;
          overflow-x: auto !important;
          padding: 0 2vw !important;
        }
        .marks-table {
          min-width: 600px !important;
          width: auto !important;
          max-width: 100vw !important;
          table-layout: auto !important;
          overflow-x: auto !important;
        }
        .marks-table th, .marks-table td {
          font-size: 12px !important;
          padding: 8px !important;
          white-space: normal !important;
        }
        .marks-table td input {
          min-width: 40px;
          width: 100%;
          font-size: 12px;
          padding: 8px;
        }
      }
    `,document.head.appendChild(F)},[]);const ae=()=>{const F=[["Student",...f.map(q=>`${q.name} (${q.max})`),"Total","Grade"]];return Object.entries(g).forEach(([q,re])=>{const pe=o.find(Ce=>Ce.id===q)||{name:q},Ee=Object.values(re).map(Ce=>Ce.score!=null?Ce.score:""),se=Object.values(re).reduce((Ce,qe)=>Ce+(qe.score||0),0),le=se>=90?"A":se>=80?"B":se>=70?"C":se>=60?"D":"F";F.push([pe.name,...Ee,se,le])}),F},_e=(O="marks.xls")=>{const F=ae();let q="<table border=1>";F.forEach(Ee=>{q+="<tr>"+Ee.map(se=>`<td>${String(se??"").replace(/</g,"&lt;")}</td>`).join("")+"</tr>"}),q+="</table>";const re="data:application/vnd.ms-excel;charset=utf-8,"+encodeURIComponent(q),pe=document.createElement("a");pe.href=re,pe.setAttribute("download",O),document.body.appendChild(pe),pe.click(),document.body.removeChild(pe)};return l.jsxs("div",{className:"dashboard-page",children:[l.jsxs("nav",{className:"top-navbar",children:[window.innerWidth<=600&&!t&&l.jsx("button",{className:"sidebar-arrow-btn",style:{position:"fixed",left:0,top:180,transform:"none",zIndex:1300,background:"#fff",border:"none",borderRadius:"0 8px 8px 0",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",padding:8,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:()=>e(!0),"aria-label":"Open sidebar menu",children:l.jsx(Rs,{size:22})}),l.jsx("h2",{children:"Gojo Dashboard"}),l.jsxs("div",{className:"nav-right",children:[l.jsxs("div",{className:"icon-circle",style:{position:"relative"},children:[l.jsxs("div",{onClick:()=>H(!P),style:{cursor:"pointer",position:"relative"},"aria-label":"Show notifications",tabIndex:0,role:"button",onKeyPress:O=>{O.key==="Enter"&&H(!P)},children:[l.jsx(Us,{size:24}),w.length+L>0&&l.jsx("span",{style:{position:"absolute",top:-5,right:-5,background:"red",color:"white",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:w.length+L})]}),P&&l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.08)",zIndex:1999},onClick:()=>H(!1)}),l.jsxs("div",{className:"notification-popup",style:typeof window<"u"&&window.innerWidth<=600?{position:"fixed",left:"50%",top:"8%",transform:"translate(-50%, 0)",width:"90vw",maxWidth:340,zIndex:2e3,background:"#fff",borderRadius:12,boxShadow:"0 2px 16px rgba(0,0,0,0.18)",maxHeight:"70vh",overflowY:"auto",padding:12}:{position:"absolute",top:30,right:0,width:300,maxHeight:400,overflowY:"auto",background:"#fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",borderRadius:8,zIndex:100},children:[w.length>0&&w.map((O,F)=>O.type==="post"?l.jsxs("div",{onClick:()=>de(O.id),style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[l.jsx("img",{src:O.adminProfile,alt:O.adminName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),l.jsxs("div",{children:[l.jsx("strong",{children:O.adminName}),l.jsx("p",{style:{margin:0,fontSize:12},children:O.title})]})]},O.id||F):null),L>0&&be.filter(O=>O.unreadForMe>0).map((O,F)=>l.jsxs("div",{onClick:()=>{H(!1),A("/all-chat")},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[l.jsx("img",{src:O.profile||"/default-profile.png",alt:O.displayName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),l.jsxs("div",{children:[l.jsx("strong",{children:O.displayName}),l.jsx("p",{style:{margin:0,fontSize:12,color:"#0b78f6"},children:"New message"})]})]},O.chatId||F)),w.length===0&&L===0&&l.jsx("div",{style:{padding:15},children:"No notifications"})]})]})]}),l.jsx("div",{className:"icon-circle",style:{position:"relative",marginLeft:12},children:l.jsxs("div",{onClick:()=>A("/all-chat"),style:{cursor:"pointer",position:"relative"},children:[l.jsx(Bs,{size:22}),L>0&&l.jsx("span",{style:{position:"absolute",top:-6,right:-6,background:"#f60b0b",color:"#fff",borderRadius:"50%",minWidth:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 6px"},children:L})]})}),l.jsx("div",{className:"icon-circle",onClick:()=>A("/settings"),children:l.jsx(jr,{})}),l.jsx("img",{src:(n==null?void 0:n.profileImage)||"/default-profile.png",alt:"profile"})]})]}),l.jsxs("div",{className:"google-dashboard",children:[window.innerWidth<=600&&t&&l.jsx("div",{className:"sidebar-overlay visible",onClick:()=>e(!1),style:{display:"block"}}),l.jsxs("div",{className:`google-sidebar${t?" open":""}`,style:window.innerWidth<=600?{position:"fixed",top:64,left:t?0:"-220px",width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",zIndex:1200,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto",transition:"left 0.25s cubic-bezier(.4,0,.2,1)"}:{position:"fixed",top:64,left:0,width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.04)",zIndex:900,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto"},children:[n&&l.jsxs("div",{className:"sidebar-profile",children:[l.jsx("div",{className:"sidebar-img-circle",children:l.jsx("img",{src:n.profileImage||"/default-profile.png",alt:"profile"})}),l.jsx("h3",{children:n.name}),l.jsx("p",{children:n.username})]}),l.jsxs("div",{className:"sidebar-menu",children:[l.jsxs(xe,{className:"sidebar-btn",to:"/dashboard",children:[l.jsx(Xr,{})," Home"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/students",children:[l.jsx(Ke,{})," Students"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/admins",children:[l.jsx(Ke,{})," Admins"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/parents",children:[l.jsx(Jr,{})," Parents"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/marks",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[l.jsx(Ir,{})," Marks"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/attendance",children:[l.jsx(Ke,{})," Attendance"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/schedule",children:[l.jsx(Ke,{})," Schedule"]}),l.jsxs("button",{className:"sidebar-btn logout-btn",onClick:we,children:[l.jsx(Zr,{})," Logout"]})]})]}),l.jsx("div",{className:"google-main",style:window.innerWidth<=600?{width:"100vw",maxWidth:"100vw",marginLeft:0,paddingLeft:0}:{textAlign:"left",marginLeft:200,paddingLeft:0},children:l.jsxs("div",{className:"main-inner",children:[l.jsx("h2",{style:{textAlign:"center",marginBottom:"35px",color:"#1e3a8a",fontSize:"36px",fontWeight:"700",letterSpacing:"1px"},children:"Marks Entry Dashboard"}),l.jsxs("div",{style:{marginBottom:"30px",display:"flex",justifyContent:"center",alignItems:"center",gap:"15px"},children:[l.jsx("label",{style:{fontWeight:"600",color:"#374151",fontSize:"16px"},children:"Select Course:"}),l.jsxs("select",{value:u,onChange:O=>d(O.target.value),style:{padding:"12px 18px",borderRadius:"12px",border:"1px solid #cbd5e1",background:"#fff",minWidth:"300px",fontSize:"15px",fontWeight:"500",boxShadow:"0 6px 15px rgba(0,0,0,0.08)",transition:"0.3s all"},children:[l.jsx("option",{value:"",children:"-- Select Course --"}),s.map(O=>l.jsxs("option",{value:O.id,children:[O.subject," - Grade ",O.grade," Section ",O.section]},O.id))]})]}),u&&l.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"40px",marginBottom:"35px",borderBottom:"2px solid #c7d2fe",paddingBottom:"10px"},children:["semester1","semester2"].map(O=>{const F=R===O;return l.jsxs("button",{onClick:()=>{b(O),N(!1),p([]),j({})},style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px",fontWeight:"700",letterSpacing:"1px",color:F?"#1e40af":"#6b7280",paddingBottom:"12px",position:"relative",transition:"0.3s all"},children:[O==="semester1"?"Semester 1":"Semester 2",F&&l.jsx("span",{style:{position:"absolute",left:0,bottom:"-2px",width:"100%",height:"4px",borderRadius:"6px",background:"linear-gradient(135deg, #4b6cb7, #1e40af)"}})]},O)})}),v&&l.jsxs("div",{style:{display:"flex",gap:"16px",marginBottom:"30px"},children:[l.jsxs("button",{style:{marginBottom:"0px",padding:"10px 18px",background:"linear-gradient(135deg, #f59e0b, #d97706)",color:"#fff",borderRadius:"12px",border:"none",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",boxShadow:"0 8px 20px rgba(0,0,0,0.15)",transition:"0.3s all"},onClick:()=>{N(!1),j({})},children:[l.jsx(b4,{})," Edit Assessment Structure"]}),l.jsxs("button",{onClick:()=>_e(),style:{padding:"10px 16px",background:"#28a745",color:"#fff",border:"none",borderRadius:"8px",fontWeight:600,display:"flex",alignItems:"center",marginLeft:"0px",gap:8,boxShadow:"0 2px 8px 0 rgba(40,167,69,.07)",cursor:"pointer"},title:"Download as Excel",children:[l.jsx(E4,{})," Download Excel"]})]}),u&&!v&&l.jsxs("div",{style:{backdropFilter:"blur(15px)",background:"rgba(255, 255, 255, 0.85)",padding:"30px",borderRadius:"20px",boxShadow:"0 15px 30px rgba(0,0,0,0.08)",marginBottom:"40px",transition:"all 0.3s ease"},children:[l.jsx("h3",{style:{marginBottom:"25px",color:"#1f2937",fontWeight:"600",fontSize:"20px"},children:"Assessment Structure"}),f.map((O,F)=>l.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"18px",alignItems:"center"},children:[l.jsx("input",{placeholder:"Assessment Name",value:O.name,onChange:q=>$(F,"name",q.target.value),style:{flex:2,padding:"12px 14px",borderRadius:"12px",border:"1px solid #d1d5db",outline:"none",boxShadow:"inset 0 3px 6px rgba(0,0,0,0.06)",fontWeight:"500"}}),l.jsx("input",{type:"number",placeholder:"Max",value:O.max,onChange:q=>$(F,"max",q.target.value),style:{flex:1,padding:"12px 14px",borderRadius:"12px",border:"1px solid #d1d5db",outline:"none",boxShadow:"inset 0 3px 6px rgba(0,0,0,0.06)",fontWeight:"500"}}),l.jsx("button",{onClick:()=>ee(F),style:{background:"#ef4444",color:"#fff",padding:"12px 14px",borderRadius:"12px",border:"none",cursor:"pointer",boxShadow:"0 6px 15px rgba(0,0,0,0.12)",transition:"0.3s all"},children:l.jsx(k4,{})})]},F)),l.jsxs("div",{style:{display:"flex",gap:"20px",alignItems:"center",marginTop:"20px"},children:[l.jsxs("button",{style:{padding:"12px 20px",borderRadius:"14px",background:"#10b981",color:"#fff",border:"none",cursor:"pointer",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 6px 18px rgba(0,0,0,0.12)",transition:"0.3s all"},onClick:K,children:[l.jsx(I4,{})," Add Assessment"]}),l.jsxs("span",{style:{fontWeight:"600",color:"#374151",fontSize:"16px"},children:["Total Max: ",f.reduce((O,F)=>O+Number(F.max||0),0)," / 100"]})]}),l.jsx("button",{style:{marginTop:"30px",padding:"14px 20px",borderRadius:"16px",background:"linear-gradient(135deg, #4b6cb7, #1e40af)",color:"#fff",border:"none",fontWeight:"600",cursor:"pointer",boxShadow:"0 8px 20px rgba(0,0,0,0.15)",transition:"0.3s all",fontSize:"16px"},onClick:B,children:"Submit Structure"})]}),v&&l.jsx("div",{className:"marks-table-wrapper",ref:Q,style:{position:"relative",overflowX:"visible",overflowY:"visible",minHeight:120,width:"100%",maxWidth:"100vw",paddingBottom:32,whiteSpace:"normal"},children:l.jsxs("table",{className:"marks-table",style:{borderCollapse:"separate",borderSpacing:"0 12px",fontSize:"15px",minWidth:0,width:"100%",maxWidth:"100vw",tableLayout:"auto"},children:[l.jsx("thead",{children:l.jsxs("tr",{style:{background:"linear-gradient(135deg, #4b6cb7, #1e3a8a)",color:"#fff",borderRadius:"16px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",textTransform:"uppercase",letterSpacing:"1px",fontWeight:"600",fontSize:"14px"},children:[l.jsx("th",{style:{padding:"16px 20px",textAlign:"left",borderRadius:"16px 0 0 16px",background:"rgba(255,255,255,0.1)"},children:l.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx(Ke,{})," Student"]})}),f.map((O,F)=>l.jsxs("th",{style:{padding:"16px 18px",background:"rgba(255,255,255,0.05)",textAlign:"center",transition:"0.3s all"},children:[O.name," (",O.max,")"]},F)),l.jsx("th",{style:{padding:"16px 18px",background:"rgba(255,255,255,0.05)",textAlign:"center"},children:"Total"}),l.jsx("th",{style:{padding:"16px 18px",background:"rgba(255,255,255,0.05)",textAlign:"center"},children:"Grade"}),l.jsxs("th",{style:{padding:"16px 20px",borderRadius:"0 16px 16px 0",background:"rgba(255,255,255,0.1)",textAlign:"center"},children:[l.jsx(w0,{})," Save"]})]})}),l.jsx("tbody",{children:Object.entries(g).map(([O,F])=>{const q=Object.values(F).reduce((se,le)=>se+(le.score||0),0),re=q>=90?"A":q>=80?"B":q>=70?"C":q>=60?"D":"F",pe=o.find(se=>se.id===O),Ee=re==="A"?"#16a34a":re==="B"?"#2563eb":re==="C"?"#f59e0b":re==="D"?"#f97316":"#ef4444";return l.jsxs("tr",{style:{background:"#f9fafb",borderRadius:"12px",marginBottom:"10px",transition:"0.3s all",cursor:"pointer"},onMouseEnter:se=>se.currentTarget.style.background="#e0e7ff",onMouseLeave:se=>se.currentTarget.style.background="#f9fafb",children:[l.jsxs("td",{style:{padding:"12px",display:"flex",alignItems:"center",gap:"12px",fontWeight:"600"},children:[l.jsx("div",{style:{width:"45px",height:"45px",borderRadius:"50%",overflow:"hidden",border:"2px solid #4b6cb7"},children:l.jsx("img",{src:(pe==null?void 0:pe.profileImage)||"/default-profile.png",alt:pe==null?void 0:pe.name,style:{width:"100%",height:"100%",objectFit:"cover"}})}),pe==null?void 0:pe.name]}),Object.entries(F).map(([se,le])=>l.jsx("td",{style:{padding:"12px"},children:l.jsx("input",{type:"number",min:"0",max:le.max,value:le.score,onChange:Ce=>ce(O,se,Ce.target.value),style:{width:"70px",padding:"8px 12px",borderRadius:"10px",border:"1px solid #cbd5e1",textAlign:"center",boxShadow:"inset 0 3px 6px rgba(0,0,0,0.06)",transition:"0.3s all",fontWeight:"500"}})},se)),l.jsx("td",{style:{padding:"12px",fontWeight:"600"},children:q}),l.jsx("td",{style:{padding:"12px",fontWeight:"700",color:Ee},children:re}),l.jsx("td",{style:{padding:"12px"},children:l.jsx("button",{style:{padding:"8px 14px",borderRadius:"12px",background:"#2563eb",color:"#fff",border:"none",cursor:"pointer",transition:"0.3s all"},onClick:()=>ve(O),onMouseEnter:se=>se.currentTarget.style.background="#1e40af",onMouseLeave:se=>se.currentTarget.style.background="#2563eb",children:l.jsx(w0,{})})})]},O)})})]})})]})})]})]})}const Ks="https://ethiostore-17d9f-default-rtdb.firebaseio.com";function fT(){const[t,e]=y.useState(window.innerWidth>600),[n,r]=y.useState([]),[s,i]=y.useState(!0),[o,c]=y.useState(""),[u,d]=y.useState(null),[f,p]=y.useState({}),[g,j]=y.useState(new Date().toISOString().split("T")[0]),[v,N]=y.useState(null),[R,b]=y.useState([]),w=Fn(),[_,P]=y.useState([]),[H,X]=y.useState(!1),[C,x]=y.useState([]),[E,k]=y.useState([]),[T,A]=y.useState(!1);y.useEffect(()=>{const G=()=>{e(window.innerWidth>600)};return window.addEventListener("resize",G),G(),()=>window.removeEventListener("resize",G)},[]),y.useEffect(()=>{const G=JSON.parse(localStorage.getItem("teacher"));if(!G){w("/login");return}d(G)},[w]),y.useEffect(()=>{if(!u)return;(async()=>{try{const[ye,K,$]=await Promise.all([Z.get(`${Ks}/TeacherAssignments.json`),Z.get(`${Ks}/Courses.json`),Z.get(`${Ks}/Teachers.json`)]),ee=Object.entries($.data||{}).find(([,we])=>we.userId===u.userId);if(!ee)return;const B=ee[0],ce=Object.values(ye.data||{}).filter(we=>we.teacherId===B).map(we=>we.courseId),ve=Object.entries(K.data||{}).filter(([we])=>ce.includes(we)).map(([we,he])=>({id:we,...he}));b(ve),!v&&ve.length>0&&N(ve[0])}catch(ye){console.error("Error fetching courses:",ye)}})()},[u]),y.useEffect(()=>{if(!v)return;(async()=>{i(!0);try{const[ye,K]=await Promise.all([Z.get(`${Ks}/Students.json`),Z.get(`${Ks}/Users.json`)]),$=ye.data||{},ee=K.data||{},B=Object.entries($).filter(([,ce])=>ce.grade===v.grade&&ce.section===v.section).map(([ce,ve])=>{var we,he;return{studentId:ce,...ve,name:((we=ee==null?void 0:ee[ve.userId])==null?void 0:we.name)||"Unknown",profileImage:((he=ee==null?void 0:ee[ve.userId])==null?void 0:he.profileImage)||"/default-profile.png"}});r(B),c("")}catch{c("Failed to fetch students. Please try again."),r([])}finally{i(!1)}})()},[v]),y.useEffect(()=>{if(!v)return;(async()=>{try{const ye=await Z.get(`${Ks}/Attendance/${v.id}/${g}.json`);p(ye.data||{})}catch{p({})}})()},[v,g]);const I=(G,ye)=>{p(K=>({...K,[G]:ye}))},J=async()=>{if(!v){alert("Please select a course");return}try{await Z.put(`${Ks}/Attendance/${v.id}/${g}.json`,f),alert("Attendance saved successfully!")}catch{alert("Failed to save attendance")}},be=()=>{localStorage.removeItem("teacher"),w("/login")};return y.useEffect(()=>{const G="responsive-attendance-table";if(document.getElementById(G))return;const ye=document.createElement("style");ye.id=G,ye.innerHTML=`
      @media (max-width: 600px) {
        .attendance-main-content-responsive {
          margin-left: 0 !important;
          width: 100vw !important;
          max-width: 100vw !important;
          padding: 8px 2vw !important;
          border-radius: 0 !important;
        }
        .attendance-table-wrapper {
          width: 100vw !important;
          max-width: 100vw !important;
          overflow-x: auto !important;
          padding: 0 1vw !important;
          background: #fff !important;
        }
        .attendance-table {
          min-width: 480px !important;
          width: auto !important;
          max-width: 100vw !important;
          table-layout: auto !important;
          overflow-x: auto !important;
          background: #fff !important;
        }
        .attendance-table th, .attendance-table td {
          font-size: 13px !important;
          padding: 7px !important;
          white-space: normal !important;
        }
      }
    `,document.head.appendChild(ye)},[]),l.jsxs("div",{className:"dashboard-page",children:[l.jsxs("nav",{className:"top-navbar",children:[window.innerWidth<=600&&!t&&l.jsx("button",{className:"sidebar-arrow-btn",style:{position:"fixed",left:0,top:180,transform:"none",zIndex:1300,background:"#fff",border:"none",borderRadius:"0 8px 8px 0",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",padding:8,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:()=>e(!0),"aria-label":"Open sidebar menu",children:l.jsx(Rs,{size:22})}),l.jsx("h2",{children:"Gojo Dashboard"}),l.jsxs("div",{className:"nav-right",children:[l.jsx("div",{className:"icon-circle",onClick:()=>w("/settings"),children:l.jsx(jr,{})}),l.jsx("img",{src:(u==null?void 0:u.profileImage)||"/default-profile.png",alt:"teacher",className:"profile-img"})]})]}),l.jsxs("div",{className:"google-dashboard",children:[window.innerWidth<=600&&t&&l.jsx("div",{className:"sidebar-overlay visible",onClick:()=>e(!1),style:{display:"block"}}),l.jsxs("div",{className:`google-sidebar${t?" open":""}`,style:window.innerWidth<=600?{position:"fixed",top:54,left:t?0:"-220px",width:200,height:"calc(100vh - 54px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",zIndex:1200,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto",transition:"left 0.25s cubic-bezier(.4,0,.2,1)"}:{position:"fixed",top:64,left:0,width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.04)",zIndex:900,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto"},children:[u&&l.jsxs("div",{className:"sidebar-profile",children:[l.jsx("div",{className:"sidebar-img-circle",children:l.jsx("img",{src:u.profileImage||"/default-profile.png",alt:"profile"})}),l.jsx("h3",{children:u.name}),l.jsx("p",{children:u.username})]}),l.jsxs("div",{className:"sidebar-menu",children:[l.jsxs(xe,{className:"sidebar-btn",to:"/dashboard",children:[l.jsx(Xr,{})," Home"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/students",children:[l.jsx(Ke,{})," Students"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/admins",children:[l.jsx(Ke,{})," Admins"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/parents",children:[l.jsx(Jr,{})," Parents"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/marks",children:[l.jsx(Ir,{})," Marks"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/attendance",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[l.jsx(Ke,{})," Attendance"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/schedule",children:[l.jsx(Ke,{})," Schedule"]}),l.jsxs("button",{className:"sidebar-btn logout-btn",onClick:be,children:[l.jsx(Zr,{})," Logout"]})]})]}),l.jsxs("div",{className:"attendance-main-content-responsive",style:window.innerWidth<=600?{marginLeft:0,width:"100vw",maxWidth:"100vw",padding:"8px 2vw"}:{marginLeft:220,width:"calc(100vw - 240px)",padding:30},children:[l.jsx("h2",{style:{textAlign:"center",marginBottom:"25px",color:"#333"},children:"Attendance"}),l.jsxs("div",{style:{marginBottom:"20px",display:"flex",alignItems:"center",gap:"15px"},children:[l.jsx("label",{style:{fontWeight:"500",color:"#555"},children:"Select Course:"}),l.jsxs("select",{value:(v==null?void 0:v.id)||"",onChange:G=>{const ye=R.find(K=>K.id===G.target.value);N(ye||null)},style:{padding:"8px 12px",borderRadius:"8px",border:"1px solid #ccc",outline:"none",background:"#f9f9f9",minWidth:"200px",fontWeight:"500"},children:[l.jsx("option",{value:"",children:"-- Select Course --"}),R.map(G=>l.jsxs("option",{value:G.id,children:[G.name," - Grade ",G.grade," Section ",G.section]},G.id))]})]}),l.jsxs("div",{style:{marginBottom:"25px",display:"flex",alignItems:"center",gap:"15px"},children:[l.jsx("label",{style:{fontWeight:"500",color:"#555"},children:"Date:"}),l.jsx("input",{type:"date",value:g,onChange:G=>j(G.target.value),style:{padding:"8px 12px",borderRadius:"8px",border:"1px solid #ccc",outline:"none",background:"#f9f9f9"}})]}),l.jsx("div",{className:"attendance-table-wrapper",style:{width:"100%",maxWidth:"100vw",overflowX:"auto",marginBottom:20,background:"#fff",borderRadius:12,boxShadow:"0 2px 8px rgba(0,0,0,0.04)"},children:s?l.jsx("p",{children:"Loading students..."}):o?l.jsx("p",{style:{color:"red"},children:o}):l.jsxs("table",{className:"attendance-table",style:{width:"100%",borderCollapse:"collapse",background:"#fff"},children:[l.jsx("thead",{children:l.jsxs("tr",{style:{background:"#4b6cb7",color:"#fff",textAlign:"left"},children:[l.jsx("th",{style:{padding:"12px"},children:"Student"}),l.jsx("th",{style:{padding:"12px",textAlign:"center"},children:"Present"}),l.jsx("th",{style:{padding:"12px",textAlign:"center"},children:"Absent"}),l.jsx("th",{style:{padding:"12px",textAlign:"center"},children:"Late"})]})}),l.jsx("tbody",{children:n.map(G=>l.jsxs("tr",{style:{borderBottom:"1px solid #eee",transition:"background 0.3s"},onMouseEnter:ye=>ye.currentTarget.style.background="#f9f9f9",onMouseLeave:ye=>ye.currentTarget.style.background="transparent",children:[l.jsxs("td",{style:{padding:"12px",display:"flex",alignItems:"center",gap:"12px"},children:[l.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",overflow:"hidden",border:"2px solid #4b6cb7"},children:l.jsx("img",{src:G.profileImage||"/default-profile.png",alt:G.name,style:{width:"100%",height:"100%",objectFit:"cover"}})}),l.jsx("span",{style:{fontWeight:"500",color:"#333"},children:G.name})]}),l.jsx("td",{style:{padding:"10px",textAlign:"center"},children:l.jsx("button",{style:{background:f[G.studentId]==="present"?"#28a745":"#e0e0e0",color:f[G.studentId]==="present"?"#fff":"#333",padding:"6px 12px",border:"none",borderRadius:"6px",cursor:"pointer",transition:"0.2s"},onClick:()=>I(G.studentId,"present"),children:"Present"})}),l.jsx("td",{style:{padding:"10px",textAlign:"center"},children:l.jsx("button",{style:{background:f[G.studentId]==="absent"?"#dc3545":"#e0e0e0",color:f[G.studentId]==="absent"?"#fff":"#333",padding:"6px 12px",border:"none",borderRadius:"6px",cursor:"pointer",transition:"0.2s"},onClick:()=>I(G.studentId,"absent"),children:"Absent"})}),l.jsx("td",{style:{padding:"10px",textAlign:"center"},children:l.jsx("button",{style:{background:f[G.studentId]==="late"?"#ffc107":"#e0e0e0",color:f[G.studentId]==="late"?"#fff":"#333",padding:"6px 12px",border:"none",borderRadius:"6px",cursor:"pointer",transition:"0.2s"},onClick:()=>I(G.studentId,"late"),children:"Late"})})]},G.studentId))})]})}),l.jsx("div",{style:{textAlign:"center"},children:l.jsx("button",{style:{marginTop:"18px",padding:"12px 25px",borderRadius:"10px",background:"#4b6cb7",color:"#fff",fontWeight:"600",border:"none",cursor:"pointer",boxShadow:"0 4px 10px rgba(0,0,0,0.15)",transition:"0.3s"},onClick:J,onMouseEnter:G=>G.currentTarget.style.background="#3a539b",onMouseLeave:G=>G.currentTarget.style.background="#4b6cb7",children:"Save Attendance"})})]})]})]})}const Ry=(t,e)=>[t,e].sort().join("_"),pT=t=>{if(!t)return"";const e=new Date(t),n=e.getHours().toString().padStart(2,"0"),r=e.getMinutes().toString().padStart(2,"0");return`${n}:${r}`},mT="https://gojo-teacher-web.onrender.com/api",ls="https://ethiostore-17d9f-default-rtdb.firebaseio.com",gT=({admin:t,selected:e,onClick:n})=>l.jsxs("div",{onClick:()=>n(t),style:{width:"100%",borderRadius:"12px",padding:"15px",display:"flex",alignItems:"center",gap:"20px",cursor:"pointer",background:e?"#e0e7ff":"#fff",border:e?"2px solid #4b6cb7":"1px solid #ddd",boxShadow:e?"0 6px 15px rgba(75,108,183,0.3)":"0 4px 10px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},children:[l.jsx("img",{src:t.profileImage||"/default-profile.png",alt:t.name,style:{width:"50px",height:"50px",borderRadius:"50%",objectFit:"cover",border:e?"3px solid #4b6cb7":"3px solid red"}}),l.jsxs("div",{children:[l.jsx("h3",{style:{margin:0},children:t.name}),l.jsx("p",{style:{margin:"4px 0",color:"#555"},children:t.username||t.email})]})]});function yT(){const[t,e]=y.useState(!1),[n,r]=y.useState([]),[s,i]=y.useState(!0),[o,c]=y.useState(""),[u,d]=y.useState(null),[f,p]=y.useState("details"),[g,j]=y.useState(!1),[v,N]=y.useState([]),[R,b]=y.useState(""),w=y.useRef(null),[_,P]=y.useState(null),H=JSON.parse(localStorage.getItem("teacher"))||{},X=String(H.userId||""),[C,x]=y.useState(null),[E,k]=y.useState([]),[T,A]=y.useState(!1),[I,J]=y.useState(null),be=y.useRef({}),[G,ye]=y.useState(!1),[K,$]=y.useState([]),ee=Fn();y.useEffect(()=>{const Q=JSON.parse(localStorage.getItem("teacher"));if(!Q){ee("/login");return}P(Q)},[ee]),y.useEffect(()=>{_&&we(_)},[_]);const B=()=>{localStorage.removeItem("teacher"),ee("/login")};y.useEffect(()=>{async function Q(){try{i(!0);const[ge,U]=await Promise.all([Z.get(`${ls}/Users.json`),Z.get(`${ls}/School_Admins.json`)]),Y=ge.data||{},te=U.data||{},ne={};Object.entries(te).forEach(([_e,O])=>{O.userId&&(ne[O.userId]={...O,adminKey:_e})});const ae=Object.entries(Y).filter(([_e,O])=>{const F=(O.role||O.userType||"").toLowerCase();return F==="admin"||F==="school_admin"||F==="school_admins"}).map(([_e,O])=>{const F=ne[O.userId];return{adminId:F&&F.adminKey||_e,...O,...F?{title:F.title,status:F.status,schoolAdminKey:F.adminKey}:{}}});r(ae),c(ae.length===0?"No admins found":"")}catch(ge){console.error(ge),c("Failed to fetch admins")}finally{i(!1)}}Q()},[]),y.useEffect(()=>{var Q;(Q=w.current)==null||Q.scrollIntoView({behavior:"smooth"})},[v]),y.useEffect(()=>{if(!X||!C)return;const Q=Ry(X,C.userId),ge=zt(Vt,`Chats/${Q}/messages`);return eo(ge,U=>{const Y=U.val()||{},te=Object.entries(Y).map(([ne,ae])=>({id:ne,...ae,isTeacher:ae.senderId===X})).sort((ne,ae)=>ne.timeStamp-ae.timeStamp);N(te),Object.entries(Y).forEach(([ne,ae])=>{if(ae&&!ae.seen&&ae.receiverId===X){const _e=Date.now();Pr(zt(Vt,`Chats/${Q}/messages/${ne}`),{seen:!0,seenAt:_e}).catch(()=>{})}}),Pr(zt(Vt,`Chats/${Q}/unread`),{[X]:0}).catch(()=>{})}),()=>w_(ge)},[X,C]);const ce=async()=>{if(!R.trim()||!u)return;const Q=X,ge=u.userId,U=Ry(Q,ge),Y=Date.now(),te={senderId:Q,receiverId:ge,type:"text",text:R,imageUrl:null,replyTo:null,seen:!1,edited:!1,deleted:!1,timeStamp:Y};try{await Z.post(`${ls}/Chats/${U}/messages.json`,te),await Z.patch(`${ls}/Chats/${U}.json`,{participants:{[Q]:!0,[ge]:!0},lastMessage:{text:R,senderId:Q,seen:!1,timeStamp:Y},unread:{[Q]:0,[ge]:1}}),b("")}catch(ne){console.error("Send message error:",ne)}};y.useEffect(()=>{(async()=>{try{let U=(await Z.get(`${mT}/get_posts`)).data||[];!Array.isArray(U)&&typeof U=="object"&&(U=Object.values(U));const[Y,te]=await Promise.all([Z.get(`${ls}/School_Admins.json`),Z.get(`${ls}/Users.json`)]),ne=Y.data||{},ae=te.data||{},_e=JSON.parse(localStorage.getItem("teacher")),O=ve(_e==null?void 0:_e.userId),F=re=>{const pe=re.adminId||re.posterAdminId||re.poster||re.admin||null;if(pe&&ne[pe]){const Ee=ne[pe],se=Ee.userId,le=ae[se]||null,Ce=le&&le.name||Ee.name||re.adminName||"Admin",qe=le&&le.profileImage||Ee.profileImage||re.adminProfile||"/default-profile.png";return{name:Ce,profile:qe}}return{name:re.adminName||"Admin",profile:re.adminProfile||"/default-profile.png"}},q=U.slice().sort((re,pe)=>{const Ee=re.time?new Date(re.time).getTime():0;return(pe.time?new Date(pe.time).getTime():0)-Ee}).filter(re=>re.postId&&!O.includes(re.postId)).slice(0,5).map(re=>{var Ee;const pe=F(re);return{id:re.postId,title:((Ee=re.message)==null?void 0:Ee.substring(0,50))||"Untitled post",adminName:pe.name,adminProfile:pe.profile}});k(q)}catch(ge){console.error("Error fetching notifications:",ge)}})()},[]);function ve(Q){return JSON.parse(localStorage.getItem(`seen_posts_${Q}`))||[]}const we=async(Q=_)=>{try{const ge=Q||JSON.parse(localStorage.getItem("teacher"));if(!ge||!ge.userId){$([]);return}const[U,Y]=await Promise.all([Z.get(`${ls}/Chats.json`),Z.get(`${ls}/Users.json`)]),te=U.data||{},ae=Y.data||{}||{},_e={};Object.entries(ae).forEach(([F,q])=>{q&&q.userId&&(_e[q.userId]=F)});const O=Object.entries(te).map(([F,q])=>{const pe=(q.unread||{})[ge.userId]||0;if(!pe)return null;const Ee=q.participants||{},se=Object.keys(Ee||{}).find(mt=>mt!==ge.userId);if(!se)return null;let le=se,Ce=ae[le];if(!Ce){const mt=_e[se];mt&&(le=mt,Ce=ae[mt])}Ce||(Ce={userId:se,name:se,profileImage:"/default-profile.png"});const qe={pushKey:le,userId:Ce.userId||se,name:Ce.name||Ce.username||se,profileImage:Ce.profileImage||Ce.profile||"/default-profile.png"},lt=q.lastMessage||{};return{chatId:F,contact:qe,displayName:qe.name,profile:qe.profileImage,lastMessageText:lt.text||"",lastMessageTime:lt.timeStamp||lt.time||null,unreadForMe:pe}}).filter(Boolean).sort((F,q)=>(q.lastMessageTime||0)-(F.lastMessageTime||0));$(O)}catch(ge){console.error("Error fetching conversations:",ge),$([])}},he=K.reduce((Q,ge)=>Q+(ge.unreadForMe||0),0),[L,de]=mn.useState(window.innerWidth<window.innerHeight),[M,je]=mn.useState(window.innerWidth);return mn.useEffect(()=>{const Q=()=>{const ge=window.innerWidth;de(ge<window.innerHeight),je(ge)};return Q(),window.addEventListener("resize",Q),()=>window.removeEventListener("resize",Q)},[]),l.jsxs("div",{className:"dashboard-page",children:[l.jsxs("nav",{className:"top-navbar",children:[l.jsx("h2",{children:"Gojo Dashboard"}),l.jsxs("div",{className:"nav-right",children:[l.jsxs("div",{className:"icon-circle",style:{position:"relative"},children:[l.jsxs("div",{onClick:()=>A(!T),style:{cursor:"pointer",position:"relative"},"aria-label":"Show notifications",tabIndex:0,role:"button",onKeyPress:Q=>{Q.key==="Enter"&&A(!T)},children:[l.jsx(Us,{size:24}),E.length+he>0&&l.jsx("span",{style:{position:"absolute",top:-5,right:-5,background:"red",color:"white",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:E.length+he})]}),T&&l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.08)",zIndex:1999},onClick:()=>A(!1)}),l.jsxs("div",{className:"notification-popup",style:typeof window<"u"&&window.innerWidth<=600?{position:"fixed",left:"50%",top:"8%",transform:"translate(-50%, 0)",width:"90vw",maxWidth:340,zIndex:2e3,background:"#fff",borderRadius:12,boxShadow:"0 2px 16px rgba(0,0,0,0.18)",maxHeight:"70vh",overflowY:"auto",padding:12}:{position:"absolute",top:30,right:0,width:300,maxHeight:400,overflowY:"auto",background:"#fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",borderRadius:8,zIndex:100},children:[E.length>0&&E.map((Q,ge)=>l.jsxs("div",{onClick:()=>{ee("/dashboard"),setTimeout(()=>{const U=be.current[Q.id];U&&(U.scrollIntoView({behavior:"smooth",block:"center"}),J(Q.id),setTimeout(()=>J(null),3e3))},150),k(U=>U.filter((Y,te)=>te!==ge)),A(!1)},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[l.jsx("img",{src:Q.adminProfile,alt:Q.adminName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),l.jsxs("div",{children:[l.jsx("strong",{children:Q.adminName}),l.jsx("p",{style:{margin:0,fontSize:12},children:Q.title})]})]},Q.id||ge)),he>0&&K.filter(Q=>Q.unreadForMe>0).map((Q,ge)=>l.jsxs("div",{onClick:()=>{A(!1),ee("/all-chat")},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[l.jsx("img",{src:Q.profile||"/default-profile.png",alt:Q.displayName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),l.jsxs("div",{children:[l.jsx("strong",{children:Q.displayName}),l.jsx("p",{style:{margin:0,fontSize:12,color:"#0b78f6"},children:"New message"})]})]},Q.chatId||ge)),E.length===0&&he===0&&l.jsx("div",{style:{padding:15},children:"No notifications"})]})]})]}),l.jsx("div",{className:"icon-circle",style:{position:"relative",marginLeft:12},children:l.jsxs("div",{onClick:()=>ee("/all-chat"),style:{cursor:"pointer",position:"relative"},children:[l.jsx(Bs,{size:22}),he>0&&l.jsx("span",{style:{position:"absolute",top:-6,right:-6,background:"#f60b0b",color:"#fff",borderRadius:"50%",minWidth:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 5px"},children:he})]})}),l.jsx("div",{className:"icon-circle",onClick:()=>ee("/settings"),children:l.jsx(jr,{})}),l.jsx("img",{src:(_==null?void 0:_.profileImage)||"/default-profile.png",alt:"teacher",className:"profile-img"})]})]}),l.jsxs("div",{className:"google-dashboard",children:[typeof window<"u"&&window.innerWidth<=600&&!t&&l.jsx("button",{className:"sidebar-arrow-btn",style:{position:"fixed",left:0,top:0,zIndex:1300,background:"#fff",border:"none",borderRadius:"0 8px 8px 0",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",padding:8,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:()=>e(!0),"aria-label":"Open sidebar menu",children:l.jsx(Rs,{size:22})}),typeof window<"u"&&window.innerWidth<=600&&t&&l.jsx("div",{className:"sidebar-overlay visible",onClick:()=>e(!1),style:{display:"block",position:"fixed",inset:0,background:"rgba(0,0,0,0.35)",zIndex:1200}}),l.jsxs("div",{className:`google-sidebar${typeof window<"u"&&window.innerWidth<=600&&t?" open":""}`,style:typeof window<"u"&&window.innerWidth<=600?{position:"fixed",top:64,left:t?0:"-220px",width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",zIndex:1200,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto",borderRadius:0,transition:"left 0.25s cubic-bezier(.4,0,.2,1)"}:{position:"fixed",top:64,left:0,width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.04)",zIndex:900,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto",borderRadius:0},children:[l.jsx("style",{children:`
            @media (max-width: 600px) {
              .google-sidebar {
                left: -220px;
                transition: left 0.25s cubic-bezier(.4,0,.2,1);
                border-radius: 0 !important;
              }
              .google-sidebar.open {
                left: 0 !important;
                z-index: 1202;
                border-radius: 0 !important;
              }
              .sidebar-overlay {
                display: block;
                position: fixed;
                inset: 0;
                background: rgba(0,0,0,0.35);
                z-index: 1200;
                transition: opacity 0.2s;
              }
              .sidebar-arrow-btn {
                display: flex !important;
              }
            }
          `}),_&&l.jsxs("div",{className:"sidebar-profile",children:[l.jsx("div",{className:"sidebar-img-circle",children:l.jsx("img",{src:_.profileImage||"/default-profile.png",alt:"profile"})}),l.jsx("h3",{children:_.name}),l.jsx("p",{children:_.username})]}),l.jsxs("div",{className:"sidebar-menu",children:[l.jsxs(xe,{className:"sidebar-btn",to:"/dashboard",children:[l.jsx(Xr,{})," Home"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/students",children:[l.jsx(Ke,{})," Students"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/admins",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[l.jsx(Ke,{})," Admins"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/parents",children:[l.jsx(Jr,{})," Parents"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/marks",children:[l.jsx(Ir,{})," Marks"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/attendance",children:[l.jsx(Ke,{})," Attendance"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/schedule",children:[l.jsx(Ke,{})," Schedule"]}),l.jsxs("button",{className:"sidebar-btn logout-btn",onClick:B,children:[l.jsx(Zr,{})," Logout"]})]})]}),l.jsxs("div",{style:{flex:1,display:"flex",justifyContent:"center",padding:"30px"},children:[l.jsxs("div",{className:"admin-list-card-responsive",style:{width:"500px",marginLeft:"30px"},children:[l.jsx("style",{children:`
              @media (max-width: 600px) {
                .admin-list-card-responsive {
                  margin-left: -10px !important;
                  margin-right: auto !important;
                  padding-left: 0 !important;
                  width: 90vw !important;
                  max-width: 90vw !important;
                }
              }
              @media (min-width: 1200px) {
                .admin-list-card-responsive {
                  width: 600px !important;
                  max-width: 600px !important;
                }
              }
              @media (min-width: 1500px) {
                .admin-list-card-responsive {
                  width: 700px !important;
                  max-width: 700px !important;
                }
              }
            `}),l.jsx("h2",{style:{textAlign:"center",marginBottom:"20px"},children:"All Admins"}),s&&l.jsx("p",{children:"Loading admins..."}),o&&l.jsx("p",{style:{color:"red"},children:o}),l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:n.map(Q=>l.jsx(gT,{admin:Q,selected:(u==null?void 0:u.adminId)===Q.adminId,onClick:ge=>{d(ge),x(ge)}},Q.adminId))})]}),u&&l.jsxs("div",{style:{width:L?"100%":"30%",height:L?"100vh":"calc(100vh - 60px)",position:"fixed",right:0,top:L?0:"60px",background:"#fff",boxShadow:L?"0 0 0 rgba(0,0,0,0)":"0 0 15px rgba(0,0,0,0.05)",zIndex:1e3,display:"flex",flexDirection:"column",overflowY:"auto",padding:L?"18px":"25px",transition:"all 0.35s ease"},children:[l.jsx("button",{onClick:()=>d(null),"aria-label":"Close admin details",title:"Close",style:{position:"fixed",top:52,right:16,width:42,height:42,borderRadius:"12px",border:"none",background:"#fff",boxShadow:"0 8px 18px rgba(2,6,23,0.15)",cursor:"pointer",display:"grid",placeItems:"center",zIndex:2e3,fontSize:22,fontWeight:900,color:"#0f172a"},children:""}),l.jsxs("div",{style:{textAlign:"center",marginBottom:"20px"},children:[l.jsx("div",{style:{width:"120px",height:"120px",margin:"0 auto 15px",borderRadius:"50%",overflow:"hidden",border:"4px solid #4b6cb7"},children:l.jsx("img",{src:u.profileImage||"/default-profile.png",alt:u.name,style:{width:"100%",height:"100%",objectFit:"cover"}})}),l.jsx("h2",{children:u.name}),l.jsx("p",{children:u.username})]}),l.jsx("div",{style:{display:"flex",marginBottom:"15px"},children:["details","Plan","Report"].map(Q=>l.jsx("button",{onClick:()=>p(Q),style:{flex:1,padding:"10px",border:"none",background:"none",cursor:"pointer",fontWeight:"600",color:f===Q?"#4b6cb7":"#777",borderBottom:f===Q?"3px solid #4b6cb7":"3px solid transparent"},children:Q.toUpperCase()},Q))}),f==="details"&&u&&l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:28,padding:50,marginLeft:0,marginRight:0,borderRadius:0,background:"linear-gradient(180deg,#eef2ff,#f8fafc)",fontFamily:"Inter, system-ui"},children:l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:24,fontWeight:900,marginBottom:18,marginTop:-30,background:"linear-gradient(90deg,#2563eb,#7c3aed)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Administrator Details"}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",columnGap:68,rowGap:14},children:[["Admin ID",u.adminId||u.userId],["Email",u.email],["Phone",u.phone],["Gender",u.gender?u.gender.charAt(0).toUpperCase()+u.gender.slice(1):null],["Title",u.title],["Status",u.status?u.status.charAt(0).toUpperCase()+u.status.slice(1):null]].map(([Q,ge])=>l.jsxs("div",{style:{padding:18,borderRadius:20,background:"#ffffff",boxShadow:"0 6px 10px rgba(0,0,0,0.08)",marginLeft:-30,marginRight:-30},children:[l.jsx("div",{style:{fontSize:12,fontWeight:700,color:"#000102",textTransform:"uppercase"},children:Q}),l.jsx("div",{style:{marginTop:8,fontSize:16,fontWeight:400,color:"#000102"},children:ge||""})]},Q))})]})}),f==="Plan"&&l.jsx("p",{children:"Plan data here."}),f==="Report"&&l.jsx("p",{children:"Report data here."}),!g&&u&&l.jsx("div",{onClick:()=>j(!0),style:{position:"fixed",bottom:"20px",right:"20px",width:"60px",height:"60px",background:"linear-gradient(135deg, #833ab4, #202ef3, #395a8b)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",cursor:"pointer",zIndex:1e3,boxShadow:"0 8px 18px rgba(0,0,0,0.25)"},children:l.jsx(Cp,{size:30})}),g&&u&&_&&l.jsxs("div",{style:{position:"fixed",bottom:"20px",right:"20px",width:"360px",height:"480px",background:"#fff",borderRadius:"16px",boxShadow:"0 12px 30px rgba(0,0,0,0.25)",zIndex:2e3,display:"flex",flexDirection:"column",overflow:"hidden"},children:[l.jsxs("div",{style:{padding:"14px",borderBottom:"1px solid #eee",display:"flex",justifyContent:"space-between",alignItems:"center",background:"#fafafa"},children:[l.jsx("strong",{children:u.name}),l.jsxs("div",{style:{display:"flex",gap:"10px"},children:[l.jsx("button",{onClick:()=>{j(!1),ee("/all-chat",{state:{contact:u,tab:"admin"}})},style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px"},children:""}),l.jsx("button",{onClick:()=>j(!1),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:""})]})]}),l.jsxs("div",{style:{flex:1,padding:"12px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"6px",background:"#f9f9f9"},children:[v.length===0?l.jsxs("p",{style:{textAlign:"center",color:"#aaa"},children:["Start chatting with ",u.name]}):v.map(Q=>l.jsx("div",{style:{display:"flex",flexDirection:Q.isTeacher?"row-reverse":"row",alignItems:"flex-end",marginBottom:10},children:l.jsxs("div",{style:{background:Q.isTeacher?"#4facfe":"#fff",color:Q.isTeacher?"#fff":"#000",padding:"10px 14px",borderRadius:18,maxWidth:"65%",position:"relative",boxShadow:"0 2px 6px rgba(0,0,0,0.05)"},children:[Q.text,l.jsxs("div",{style:{fontSize:10,color:"#888",marginTop:4,display:"flex",justifyContent:"flex-end",alignItems:"center",gap:4},children:[pT(Q.timeStamp),Q.isTeacher&&l.jsx(uo,{size:10,color:Q.seen?"#4facfe":"#ccc"})]})]})},Q.id)),l.jsx("div",{ref:w})]}),l.jsxs("div",{style:{padding:"10px",borderTop:"1px solid #eee",display:"flex",gap:"8px",background:"#fff"},children:[l.jsx("input",{value:R,onChange:Q=>b(Q.target.value),placeholder:"Type a message...",style:{flex:1,padding:"10px 14px",borderRadius:"999px",border:"1px solid #ccc",outline:"none"},onKeyDown:Q=>{Q.key==="Enter"&&ce()}}),l.jsx("button",{onClick:ce,style:{background:"linear-gradient(135deg, #0751f1, #0e35e4, #0f5afc)",border:"none",borderRadius:"50%",width:"42px",height:"42px",color:"#fff",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px"},children:""})]})]})]})]})]})]})}const xT="https://gojo-teacher-web.onrender.com/api";function vT(){const[t,e]=y.useState(null),[n,r]=y.useState([]),[s,i]=y.useState(""),[o,c]=y.useState(""),[u,d]=y.useState(null),[f,p]=y.useState([]),g=Fn(),[j,v]=y.useState([]),[N,R]=y.useState(!1),[b,w]=y.useState(null),_=y.useRef({}),P=t==null?void 0:t.userId;y.useEffect(()=>{const x=JSON.parse(localStorage.getItem("teacher"));if(!x){g("/login");return}e(x)},[]),y.useEffect(()=>{(async()=>{try{const T=((await Z.get(`${xT}/get_posts`)).data||[]).slice(0,5).map(A=>{var I;return{id:A.postId,title:((I=A.message)==null?void 0:I.substring(0,50))||"Untitled post",adminName:A.adminName||"Admin",adminProfile:A.adminProfile||"/default-profile.png"}});v(T)}catch(E){console.error("Error fetching notifications:",E)}})()},[]);const H=(x,E)=>{w(x);const k=_.current[x];k&&k.scrollIntoView({behavior:"smooth",block:"center"});const T=[...j];T.splice(E,1),v(T),R(!1),setTimeout(()=>w(null),3e3)};y.useEffect(()=>{if(!t)return;async function x(){try{const[E,k,T]=await Promise.all([Z.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Courses.json"),Z.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/TeacherAssignments.json"),Z.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Teachers.json")]),A=Object.entries(T.data||{}).find(([G,ye])=>ye.userId===t.userId);if(!A)return;const I=A[0],be=Object.values(k.data||{}).filter(G=>G.teacherId===I).map(G=>({id:G.courseId,...E.data[G.courseId]}));r(be)}catch(E){console.error("Error fetching courses:",E)}}x()},[t]),y.useEffect(()=>{async function x(){try{const E=await Z.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/TeacherPosts.json");p(Object.entries(E.data||{}).map(([k,T])=>({id:k,...T})))}catch(E){console.error(E)}}x()},[]);const X=async()=>{if(!s||!o&&!u){alert("Please select a class and enter a note or upload a file");return}let x="";u&&(x=URL.createObjectURL(u));const E={teacherId:P,courseId:s,text:o,fileUrl:x,createdAt:new Date().toISOString()};try{await Z.post("https://ethiostore-17d9f-default-rtdb.firebaseio.com/TeacherPosts.json",E),alert("Post submitted!"),c(""),d(null),p(k=>[...k,{...E,id:Date.now()}])}catch(k){console.error(k),alert("Failed to submit post")}},C=()=>{localStorage.removeItem("teacher"),g("/login")};return t?l.jsxs("div",{className:"dashboard-page",children:[l.jsxs("nav",{className:"top-navbar",children:[l.jsx("h2",{children:"Gojo Dashboard"}),l.jsxs("div",{className:"nav-search",children:[l.jsx(j4,{className:"search-icon"}),l.jsx("input",{type:"text",placeholder:"Search Teacher and Student..."})]}),l.jsxs("div",{className:"nav-right",children:[l.jsxs("div",{className:"icon-circle",children:[l.jsxs("div",{onClick:()=>R(!N),style:{cursor:"pointer",position:"relative"},children:[l.jsx(Us,{size:24}),j.length>0&&l.jsx("span",{style:{position:"absolute",top:-5,right:-5,background:"red",color:"white",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:j.length})]}),N&&l.jsx("div",{style:{position:"absolute",top:30,right:0,width:300,maxHeight:400,overflowY:"auto",background:"#fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",borderRadius:8,zIndex:100},children:j.length>0?j.map((x,E)=>l.jsxs("div",{onClick:()=>{g("/dashboard"),setTimeout(()=>H(x.id,E),100)},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[l.jsx("img",{src:x.adminProfile,alt:x.adminName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),l.jsxs("div",{children:[l.jsx("strong",{children:x.adminName}),l.jsx("p",{style:{margin:0,fontSize:12},children:x.title})]})]},x.id||E)):l.jsx("div",{style:{padding:15},children:"No notifications"})})]}),l.jsx("div",{className:"icon-circle",children:l.jsx(Bs,{})}),l.jsx("div",{className:"icon-circle",children:l.jsx(jr,{})}),l.jsx("img",{src:(t==null?void 0:t.profileImage)||"/default-profile.png",alt:"teacher",className:"profile-img"})]})]}),l.jsxs("div",{className:"google-dashboard",children:[l.jsxs("div",{className:"google-sidebar",children:[l.jsxs("div",{className:"sidebar-profile",children:[l.jsx("div",{className:"sidebar-img-circle",children:l.jsx("img",{src:(t==null?void 0:t.profileImage)||"/default-profile.png",alt:"profile"})}),l.jsx("h3",{children:t==null?void 0:t.name}),l.jsx("p",{children:t==null?void 0:t.username})]}),l.jsxs("div",{className:"sidebar-menu",children:[l.jsxs(xe,{className:"sidebar-btn",to:"/dashboard",children:[l.jsx(Xr,{})," Home"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/notes",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[l.jsx(Ir,{})," Notes"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/students",children:[l.jsx(Ke,{})," Students"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/admins",children:[l.jsx(Ke,{})," Admins"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/parents",children:[l.jsx(Jr,{})," Parents"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/marks",children:[l.jsx(Ir,{})," Marks"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/attendance",children:[l.jsx(Ke,{})," Attendance"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/schedule",children:[l.jsx(Ke,{})," Schedule"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/settings",children:[l.jsx(jr,{})," Settings"]}),l.jsxs("button",{className:"sidebar-btn logout-btn",onClick:C,children:[l.jsx(Zr,{})," Logout"]})]})]}),l.jsxs("div",{style:{marginLeft:"500px",width:"40%",padding:"100px 30px 50px",background:"#f3f4f6",minHeight:"100vh",fontFamily:"'Inter', sans-serif"},children:[l.jsxs("div",{style:{marginBottom:"30px",display:"flex",justifyContent:"space-between",alignItems:"center",background:"linear-gradient(90deg, #e0e7ff, #c7d2fe)",padding:"20px 25px",borderRadius:"18px",boxShadow:"0 5px 20px rgba(0,0,0,0.08)"},children:[l.jsx("h2",{style:{fontSize:"28px",fontWeight:700,color:"#1e293b"},children:"Post Notes / Files"}),l.jsxs("span",{style:{color:"#475569",fontSize:"16px",fontWeight:500},children:[t==null?void 0:t.name,", share notes with your students"]})]}),l.jsxs("div",{style:{marginBottom:"40px",background:"#fff",padding:"30px 25px",borderRadius:"18px",boxShadow:"0 6px 25px rgba(0,0,0,0.08)"},children:[l.jsxs("select",{value:s,onChange:x=>i(x.target.value),style:{width:"100%",padding:"14px 16px",borderRadius:"12px",border:"1px solid #cbd5e1",fontSize:"15px",marginBottom:"18px",background:"#f8fafc",cursor:"pointer"},children:[l.jsx("option",{value:"",children:"Select Class & Subject"}),n.map(x=>l.jsxs("option",{value:x.id,children:[x.subject,"  Grade ",x.grade,x.section]},x.id))]}),l.jsx("textarea",{placeholder:"Write your note here...",value:o,onChange:x=>c(x.target.value),style:{width:"100%",padding:"18px",borderRadius:"15px",border:"1px solid #cbd5e1",marginBottom:"18px",minHeight:"140px",fontSize:"15px",resize:"vertical",background:"#f8fafc"}}),l.jsx("input",{type:"file",onChange:x=>d(x.target.files[0]),style:{display:"block",marginBottom:"25px",fontSize:"15px",cursor:"pointer",padding:"10px",borderRadius:"12px",border:"1px solid #cbd5e1",background:"#f8fafc",width:"100%"}}),l.jsxs("button",{onClick:X,style:{background:"linear-gradient(90deg, #4b6cb7, #182848)",color:"#fff",border:"none",padding:"14px 30px",borderRadius:"15px",cursor:"pointer",fontSize:"16px",fontWeight:600,width:"100%"},children:[l.jsx(T4,{style:{marginRight:"10px"}})," Submit Post"]})]}),l.jsxs("div",{children:[l.jsx("h3",{style:{fontSize:"22px",fontWeight:700,marginBottom:"20px",color:"#1e293b"},children:"All Posts"}),f.filter(x=>x.teacherId===P||x.courseId===s).map((x,E)=>l.jsxs("div",{style:{background:"#fff",padding:"20px 25px",borderRadius:"18px",marginBottom:"18px",boxShadow:"0 6px 18px rgba(0,0,0,0.06)"},children:[l.jsx("p",{style:{marginBottom:"12px",fontSize:"15px",lineHeight:"1.6",color:"#334155"},children:x.text}),x.fileUrl&&l.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"10px"},children:[l.jsx("span",{style:{fontSize:"20px",marginRight:"10px"},children:""}),l.jsx("a",{href:x.fileUrl,target:"_blank",rel:"noopener noreferrer",download:!0,style:{color:"#2563eb",fontWeight:600,textDecoration:"none",fontSize:"15px"},children:"View / Download File"})]}),l.jsxs("div",{style:{fontSize:"13px",color:"#64748b",textAlign:"right"},children:["Posted: ",new Date(x.createdAt).toLocaleString()]})]},E))]})]})]})]}):null}const Ay=(t,e)=>[t,e].sort().join("_"),wT="https://gojo-teacher-web.onrender.com/api",Rn="https://ethiostore-17d9f-default-rtdb.firebaseio.com",_T=t=>{if(!t)return"";const e=new Date(Number(t)),n=e.getHours().toString().padStart(2,"0"),r=e.getMinutes().toString().padStart(2,"0");return`${n}:${r}`};function ST(){const[t,e]=y.useState(!1),[n,r]=y.useState(null),[s,i]=y.useState([]),[o,c]=y.useState(null),[u,d]=y.useState(!0),[f,p]=y.useState("Details"),[g,j]=y.useState(!1),[v,N]=y.useState([]),[R,b]=y.useState(""),w=y.useRef(null),[_,P]=y.useState([]),[H,X]=y.useState([]),[C,x]=y.useState(!1),[E,k]=y.useState([]),[T,A]=y.useState(null),[I,J]=y.useState(!1),[be,G]=y.useState([]),ye=Fn(),[K,$]=y.useState(window.innerWidth<window.innerHeight);y.useEffect(()=>{const L=()=>$(window.innerWidth<window.innerHeight);return window.addEventListener("resize",L),window.addEventListener("orientationchange",L),()=>{window.removeEventListener("resize",L),window.removeEventListener("orientationchange",L)}},[]),y.useEffect(()=>{const L=JSON.parse(localStorage.getItem("teacher"));if(!L){ye("/login");return}r(L)},[ye]);const ee=()=>{localStorage.removeItem("teacher"),ye("/login")},B=(n==null?void 0:n.userId)||"";y.useEffect(()=>{if(!n)return;let L=!1;return(async()=>{try{d(!0);const[M,je,Q,ge,U]=await Promise.all([Z.get(`${Rn}/TeacherAssignments.json`),Z.get(`${Rn}/Courses.json`),Z.get(`${Rn}/Students.json`),Z.get(`${Rn}/Users.json`),Z.get(`${Rn}/Parents.json`)]),Y=M.data||{},te=je.data||{},ne=Q.data||{},ae=ge.data||{},_e=U.data||{},O=n.userId,F=Object.values(Y).filter(Ee=>Ee.teacherId===O).map(Ee=>Ee.courseId),q={};Object.entries(_e).forEach(([Ee,se])=>{se.children&&Object.values(se.children).forEach(le=>{if(!le.studentId)return;const Ce=le.relationship||le.relation||le.relationToChild||le.type||le.role||null;q[le.studentId]||(q[le.studentId]=[]),q[le.studentId].push({parentId:Ee,relationship:Ce})})});const re={};Object.entries(ne).forEach(([Ee,se])=>{const le=Object.values(ae).find(mt=>String(mt.userId)===String(se.userId)),Ce=(le==null?void 0:le.name)||"No Name",qe=(le==null?void 0:le.profileImage)||"/default-profile.png";(q[Ee]||[]).forEach(({parentId:mt,relationship:ze})=>{re[mt]||(re[mt]=[]),re[mt].push({studentId:Ee,name:Ce,grade:se.grade,section:se.section,profileImage:qe,userId:se.userId,relationship:ze||"",age:se.age||(le==null?void 0:le.age)||null,city:se.city||(le==null?void 0:le.city)||se.address&&se.address.city||null,citizenship:se.citizenship||(le==null?void 0:le.citizenship)||se.nationality||null,address:se.address||(le==null?void 0:le.address)||null,status:se.status||"Active"})})});const pe=Object.keys(re).map(Ee=>{var lt;const se=_e[Ee]||{},le=Object.values(ae).find(mt=>String(mt.userId)===String(se.userId))||{},Ce=re[Ee]||[],qe=Array.from(new Set(Ce.map(mt=>mt.relationship).filter(Boolean)));return{id:Ee,userId:se.userId,name:le.name||se.name||"No Name",email:le.email||se.email||"N/A",phone:le.phone||se.phone||"",profileImage:le.profileImage||se.profileImage||"/default-profile.png",children:Ce,relationships:qe,age:se.age||le.age||null,city:se.city||le.city||((lt=se.address)==null?void 0:lt.city)||null,citizenship:se.citizenship||le.citizenship||se.nationality||null,status:se.status||"Active",createdAt:se.createdAt,address:se.address||le.address||null,extra:se.extra}});L||i(pe)}catch(M){console.error("Error fetching parents:",M)}finally{L||d(!1)}})(),()=>{L=!0}},[n]),y.useEffect(()=>{var L;(L=w.current)==null||L.scrollIntoView({behavior:"smooth"})},[v]),y.useEffect(()=>{if(!o||!n||!g)return;const L=Ay(B,o.userId),de=zt(Vt,`Chats/${L}/messages`);return eo(de,M=>{const je=M.val()||{},Q=Object.entries(je).map(([ge,U])=>({messageId:ge,...U}));Q.sort((ge,U)=>ge.timeStamp-U.timeStamp),N(Q)}),ve(L),()=>w_(de)},[o,n,g]);const ce=async L=>{if(!(L!=null&&L.trim())||!o||!n)return;const de=B,M=o.userId,je=Ay(de,M),Q=Date.now(),ge={senderId:de,receiverId:M,type:"text",text:L,seen:!1,timeStamp:Q};try{await Z.post(`${Rn}/Chats/${je}/messages.json`,ge),await Z.patch(`${Rn}/Chats/${je}.json`,{participants:{[de]:!0,[M]:!0},lastMessage:{text:L,senderId:de,seen:!1,timeStamp:Q},unread:{[de]:0,[M]:1}}),b("")}catch(U){console.error("Send message error:",U)}},ve=async L=>{try{await Z.patch(`${Rn}/Chats/${L}/unread.json`,{[B]:0}),await Z.patch(`${Rn}/Chats/${L}/lastMessage.json`,{seen:!0})}catch(de){console.error("Mark as seen error:",de)}};y.useEffect(()=>{(async()=>{try{let M=(await Z.get(`${wT}/get_posts`)).data||[];!Array.isArray(M)&&typeof M=="object"&&(M=Object.values(M));const[je,Q]=await Promise.all([Z.get(`${Rn}/School_Admins.json`),Z.get(`${Rn}/Users.json`)]),ge=je.data||{},U=Q.data||{},Y=JSON.parse(localStorage.getItem("teacher")),te=we(Y==null?void 0:Y.userId),ne=O=>{const F=O.adminId||O.posterAdminId||O.poster||O.admin||null;if(F&&ge[F]){const q=ge[F],re=q.userId,pe=U[re]||null,Ee=pe&&pe.name||q.name||O.adminName||"Admin",se=pe&&pe.profileImage||q.profileImage||O.adminProfile||"/default-profile.png";return{name:Ee,profile:se}}return{name:O.adminName||"Admin",profile:O.adminProfile||"/default-profile.png"}},ae=M.slice().sort((O,F)=>(F.time?new Date(F.time).getTime():0)-(O.time?new Date(O.time).getTime():0)).filter(O=>O.postId&&!te.includes(O.postId)).slice(0,5).map(O=>{var q;const F=ne(O);return{type:"post",id:O.postId,title:((q=O.message)==null?void 0:q.substring(0,50))||"Untitled post",adminName:F.name,adminProfile:F.profile}});let _e=[];try{const O=Y;if(O&&O.userId){const[F,q]=await Promise.all([Z.get(`${Rn}/Chats.json`),Z.get(`${Rn}/Users.json`)]),re=F.data||{},Ee=q.data||{}||{},se={};Object.entries(Ee).forEach(([le,Ce])=>{Ce&&Ce.userId&&(se[Ce.userId]=le)}),_e=Object.entries(re).map(([le,Ce])=>{const lt=(Ce.unread||{})[O.userId]||0;if(!lt)return null;const mt=Ce.participants||{},ze=Object.keys(mt||{}).find(kt=>kt!==O.userId);if(!ze)return null;let vt=ze,Ye=Ee[vt];if(!Ye){const kt=se[ze];kt&&(vt=kt,Ye=Ee[kt])}Ye||(Ye={userId:ze,name:ze,profileImage:"/default-profile.png"});const Qt={pushKey:vt,userId:Ye.userId||ze,name:Ye.name||Ye.username||ze,profileImage:Ye.profileImage||Ye.profile||"/default-profile.png"},wt=Ce.lastMessage||{};return{type:"message",chatId:le,displayName:Qt.name,profile:Qt.profileImage,lastMessageText:wt.text||"",lastMessageTime:wt.timeStamp||wt.time||null,unreadForMe:lt}}).filter(Boolean).sort((le,Ce)=>(Ce.lastMessageTime||0)-(le.lastMessageTime||0))}}catch(O){console.error("Error fetching message notifications:",O)}X([...ae,..._e]),k(_e)}catch(de){console.error("Error fetching notifications:",de)}})()},[]);function we(L){return JSON.parse(localStorage.getItem(`seen_posts_${L}`))||[]}const he=E.reduce((L,de)=>L+(de.unreadForMe||0),0);return y.useEffect(()=>(o?document.body.classList.add("sidebar-open"):document.body.classList.remove("sidebar-open"),()=>document.body.classList.remove("sidebar-open")),[o]),l.jsxs("div",{className:"dashboard-page",children:[l.jsxs("nav",{className:"top-navbar",children:[l.jsx("h2",{children:"Gojo Dashboard"}),l.jsxs("div",{className:"nav-right",children:[l.jsxs("div",{className:"icon-circle",style:{position:"relative"},children:[l.jsxs("div",{onClick:()=>x(!C),style:{cursor:"pointer",position:"relative"},"aria-label":"Show notifications",tabIndex:0,role:"button",onKeyPress:L=>{L.key==="Enter"&&x(!C)},children:[l.jsx(Us,{size:24}),H.length+he>0&&l.jsx("span",{style:{position:"absolute",top:-5,right:-5,background:"red",color:"white",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:H.length+he})]}),C&&l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.08)",zIndex:1999},onClick:()=>x(!1)}),l.jsxs("div",{className:"notification-popup",style:typeof window<"u"&&window.innerWidth<=600?{position:"fixed",left:"50%",top:"8%",transform:"translate(-50%, 0)",width:"90vw",maxWidth:340,zIndex:2e3,background:"#fff",borderRadius:12,boxShadow:"0 2px 16px rgba(0,0,0,0.18)",maxHeight:"70vh",overflowY:"auto",padding:12}:{position:"absolute",top:30,right:0,width:300,maxHeight:400,overflowY:"auto",background:"#fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",borderRadius:8,zIndex:100},children:[H.length>0&&H.map((L,de)=>L.type==="post"?l.jsxs("div",{onClick:()=>{ye("/dashboard"),setTimeout(()=>{var je;const M=(je=postRefs==null?void 0:postRefs.current)==null?void 0:je[L.id];M&&(M.scrollIntoView({behavior:"smooth",block:"center"}),A(L.id),setTimeout(()=>A(null),3e3))},150),X(M=>M.filter((je,Q)=>Q!==de)),x(!1)},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[l.jsx("img",{src:L.adminProfile,alt:L.adminName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),l.jsxs("div",{children:[l.jsx("strong",{children:L.adminName}),l.jsx("p",{style:{margin:0,fontSize:12},children:L.title})]})]},L.id||de):null),he>0&&be.filter(L=>L.unreadForMe>0).map((L,de)=>l.jsxs("div",{onClick:()=>{x(!1),ye("/all-chat")},style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[l.jsx("img",{src:L.profile||"/default-profile.png",alt:L.displayName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),l.jsxs("div",{children:[l.jsx("strong",{children:L.displayName}),l.jsx("p",{style:{margin:0,fontSize:12,color:"#0b78f6"},children:"New message"})]})]},L.chatId||de)),H.length===0&&he===0&&l.jsx("div",{style:{padding:15},children:"No notifications"})]})]})]}),l.jsx("div",{className:"icon-circle",style:{position:"relative",marginLeft:12},children:l.jsxs("div",{onClick:()=>ye("/all-chat"),style:{cursor:"pointer",position:"relative"},children:[l.jsx(Bs,{size:22}),he>0&&l.jsx("span",{style:{position:"absolute",top:-6,right:-6,background:"#f60b0b",color:"#fff",borderRadius:"50%",minWidth:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 5px"},children:he})]})}),l.jsx("div",{className:"icon-circle",onClick:()=>ye("/settings"),children:l.jsx(jr,{})}),l.jsx("img",{src:(n==null?void 0:n.profileImage)||"/default-profile.png",alt:"teacher",className:"profile-img"})]})]}),l.jsxs("div",{className:"google-dashboard",style:{display:"flex"},children:[typeof window<"u"&&window.innerWidth<=600&&!t&&l.jsx("button",{className:"sidebar-arrow-btn",style:{position:"fixed",left:0,top:0,zIndex:1300,background:"#fff",border:"none",borderRadius:"0 8px 8px 0",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",padding:8,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:()=>e(!0),"aria-label":"Open sidebar menu",children:l.jsx(Rs,{size:22})}),typeof window<"u"&&window.innerWidth<=600&&t&&l.jsx("div",{className:"sidebar-overlay visible",onClick:()=>e(!1),style:{display:"block",position:"fixed",inset:0,background:"rgba(0,0,0,0.35)",zIndex:1200}}),l.jsxs("div",{className:`google-sidebar${typeof window<"u"&&window.innerWidth<=600&&t?" open":""}`,style:typeof window<"u"&&window.innerWidth<=600?{position:"fixed",top:64,left:t?0:"-220px",width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",zIndex:1200,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto",borderRadius:0,transition:"left 0.25s cubic-bezier(.4,0,.2,1)"}:{position:"fixed",top:64,left:0,width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.04)",zIndex:900,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto",borderRadius:0},children:[l.jsx("style",{children:`
            @media (max-width: 600px) {
              .google-sidebar {
                left: -220px;
                transition: left 0.25s cubic-bezier(.4,0,.2,1);
                border-radius: 0 !important;
              }
              .google-sidebar.open {
                left: 0 !important;
                z-index: 1202;
                border-radius: 0 !important;
              }
              .sidebar-overlay {
                display: block;
                position: fixed;
                inset: 0;
                background: rgba(0,0,0,0.35);
                z-index: 1200;
                transition: opacity 0.2s;
              }
              .sidebar-arrow-btn {
                display: flex !important;
              }
            }
          `}),n&&l.jsxs("div",{className:"sidebar-profile",children:[l.jsx("div",{className:"sidebar-img-circle",children:l.jsx("img",{src:n.profileImage||"/default-profile.png",alt:"profile"})}),l.jsx("h3",{children:n.name}),l.jsx("p",{children:n.username})]}),l.jsxs("div",{className:"sidebar-menu",children:[l.jsxs(xe,{className:"sidebar-btn",to:"/dashboard",children:[l.jsx(Xr,{})," Home"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/students",children:[l.jsx(Ke,{})," Students"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/admins",children:[l.jsx(Ke,{})," Admins"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/parents",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[l.jsx(Jr,{})," Parents"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/marks",children:[l.jsx(Ir,{})," Marks"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/attendance",children:[l.jsx(Ke,{})," Attendance"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/schedule",children:[l.jsx(Ke,{})," Schedule"]}),l.jsxs("button",{className:"sidebar-btn logout-btn",onClick:ee,children:[l.jsx(Zr,{})," Logout"]})]})]}),l.jsx("main",{style:{flex:1,padding:30},children:l.jsxs("div",{className:"parent-list-card-responsive",style:{maxWidth:480,margin:"0 auto",display:"flex",gap:24,alignItems:"flex-start",flexWrap:"wrap"},children:[l.jsxs("section",{style:{flex:"1 1 320px",minWidth:280},children:[l.jsx("h2",{style:{textAlign:"center",marginBottom:20,color:"#4b6cb7",fontWeight:700},children:"Parents"}),u?l.jsx("p",{style:{textAlign:"center",fontSize:18,color:"#555"},children:"Loading..."}):s.length===0?l.jsx("p",{style:{textAlign:"center",fontSize:18,color:"#999"},children:"No parents found."}):l.jsx("div",{className:"parent-list-responsive",style:{display:"flex",flexDirection:"column",gap:15},children:s.map(L=>l.jsxs("div",{onClick:()=>c(L),className:"parent-list-item-responsive",style:{display:"flex",gap:15,width:"calc(100% - 50px)",padding:16,marginLeft:50,borderRadius:12,boxShadow:"0 4px 15px rgba(0,0,0,0.08)",backgroundColor:(o==null?void 0:o.id)===L.id?"#f0f4ff":"#fff",cursor:"pointer",alignItems:"center"},children:[l.jsx("style",{children:`
                                  @media (max-width: 600px) {
                                    .parent-list-card-responsive {
                                      max-width: 99vw !important;
                                      width: 99vw !important;
                                      margin: 0 !important;
                                      padding: 0 !important;
                                    }
                                    .parent-list-responsive {
                                      width: 99vw !important;
                                      max-width: 99vw !important;
                                      margin-left: 0 !important;
                                      margin-right: 0 !important;
                                      padding: 0 !important;
                                      align-items: flex-start !important;
                                    }
                                    .parent-list-item-responsive {
                                      margin-left: -28px !important;
                                      width: 99vw !important;
                                      max-width: 99vw !important;
                                      min-width: 99vw !important;
                                      box-sizing: border-box !important;
                                    }
                                  }
                                `}),l.jsx("img",{src:L.profileImage,alt:L.name,style:{width:60,height:60,borderRadius:"50%",objectFit:"cover"}}),l.jsxs("div",{children:[l.jsx("h3",{style:{margin:0,fontSize:18},children:L.name}),l.jsx("p",{style:{margin:"6px 0 0 0",color:"#777"},children:L.email})]})]},L.id))})]}),o&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"parent-sidebar-overlay",onClick:()=>c(null),style:{display:"none",position:"fixed",inset:0,background:"rgba(0,0,0,0.35)",zIndex:999}}),l.jsxs("aside",{className:"parent-sidebar",style:{width:K?"100%":420,height:K?"100vh":"calc(100vh - 60px)",position:"fixed",right:0,top:K?0:60,background:"#fff",boxShadow:K?"none":"0 0 20px rgba(0,0,0,0.06)",zIndex:1e3,display:"flex",flexDirection:"column",overflowY:"auto",padding:K?18:24,transition:"all 0.32s ease"},role:"dialog","aria-modal":"true",children:[l.jsx("button",{onClick:()=>c(null),style:{position:"absolute",top:K?8:-11,right:18,width:40,height:40,borderRadius:10,border:"none",background:"#fff",boxShadow:"0 8px 18px rgba(2,6,23,0.08)",cursor:"pointer",display:"grid",placeItems:"center",zIndex:1010,fontSize:20},"aria-label":"Close details",children:""}),l.jsxs("div",{style:{textAlign:"center",marginBottom:12},children:[l.jsx("div",{style:{width:100,height:100,margin:"0 auto 12px",borderRadius:"50%",overflow:"hidden",border:"4px solid #4b6cb7"},children:l.jsx("img",{src:o.profileImage,alt:o.name,style:{width:"100%",height:"100%",objectFit:"cover"}})}),l.jsx("h3",{style:{margin:0},children:o.name}),l.jsx("div",{style:{color:"#666",marginTop:6},children:o.email})]}),l.jsx("div",{style:{display:"flex",gap:8,marginBottom:12},children:["Details","Children","Status"].map(L=>l.jsx("button",{onClick:()=>p(L),style:{flex:1,padding:"8px 10px",borderRadius:10,border:"none",cursor:"pointer",background:f===L?"#4b6cb7":"#f0f0f0",color:f===L?"#fff":"#333",fontWeight:700},children:L},L))}),l.jsxs("div",{style:{paddingBottom:40},children:[f==="Details"&&l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:28,padding:50,marginLeft:0,marginRight:0,borderRadius:0,background:"linear-gradient(180deg,#eef2ff,#f8fafc)",fontFamily:"Inter, system-ui"},children:l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:24,fontWeight:900,marginBottom:18,marginTop:-30,background:"linear-gradient(90deg,#2563eb,#7c3aed)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Parent Details"}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",columnGap:68,rowGap:14},children:[["Email",o.email||"N/A"],["Phone",o.phone||"N/A"],["Relationship(s)",o.relationships&&o.relationships.length?o.relationships.join(", "):""],["Age",o.age||""],["City",o.city||(o.address&&typeof o.address=="object"?o.address.city:o.city)||""],["Citizenship",o.citizenship||""],["Status",o.status?o.status.charAt(0).toUpperCase()+o.status.slice(1):""],["Address",(typeof o.address=="string"?o.address:o.address&&(o.address.street||o.address.city||JSON.stringify(o.address)))||"",!0]].map(([L,de,M])=>l.jsxs("div",{style:{padding:18,borderRadius:20,background:"#ffffff",boxShadow:"0 6px 10px rgba(0,0,0,0.08)",marginLeft:-30,marginRight:-30,gridColumn:M?"span 2":"span 1"},children:[l.jsx("div",{style:{fontSize:12,fontWeight:700,color:"#000102",textTransform:"uppercase"},children:L}),l.jsx("div",{style:{marginTop:8,fontSize:16,fontWeight:400,color:"#000102"},children:de})]},L))})]})}),f==="Children"&&l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:20,background:"#f5f7fa",padding:18,borderRadius:10},children:o.children.map(L=>l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:22,background:"#fff",borderRadius:16,padding:"22px 30px",boxShadow:"0 4px 24px rgba(80,90,130,0.10)",border:"1px solid #edeef2",transition:"box-shadow 0.2s, transform 0.18s",cursor:"pointer"},onMouseEnter:de=>de.currentTarget.style.boxShadow="0 8px 32px 0 rgba(60,72,120,0.17)",onMouseLeave:de=>de.currentTarget.style.boxShadow="0 4px 24px rgba(80,90,130,0.10)",children:[l.jsx("img",{src:L.profileImage,alt:L.name,style:{width:66,height:66,borderRadius:"50%",border:"3px solid #2868f1",objectFit:"cover",background:"#f0f4fa",flexShrink:0,boxShadow:"0 2px 8px 0 rgba(60,72,120,0.07)"}}),l.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:5},children:[l.jsx("span",{style:{fontWeight:700,fontSize:21,color:"#213052",marginBottom:2},children:L.name}),l.jsxs("div",{style:{display:"flex",columnGap:1,marginTop:-12,marginLeft:-19},children:[l.jsxs("div",{style:{color:"#050505",fontWeight:400,fontSize:14,padding:"6px 18px",borderRadius:999,letterSpacing:.5,boxShadow:"0 2px 8px rgba(22,119,255,.09)"},children:["Grade:",L.grade]}),l.jsxs("div",{style:{color:"#000000",fontWeight:400,fontSize:14,padding:"6px 1px",borderRadius:999,letterSpacing:.5,boxShadow:"0 2px 8px rgba(255,126,95,.09)"},children:["Section:",L.section]})]}),l.jsx("span",{style:{fontSize:15,color:"#424242",marginTop:"-10px"},children:L.relationship&&`Relation: ${L.relationship}`})]})]},L.studentId))}),f==="Status"&&l.jsxs("div",{children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Status:"})," ",o.status||"Active"]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Created:"})," ",o.createdAt?new Date(o.createdAt).toLocaleString():""]})]})]}),!g&&l.jsx("div",{onClick:()=>j(!0),style:{position:"fixed",bottom:"20px",right:"20px",width:"60px",height:"60px",background:"linear-gradient(135deg, #3a6fb4, #2147f0, #457ffc)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",cursor:"pointer",zIndex:1e3,boxShadow:"0 8px 18px rgba(0,0,0,0.25)",transition:"transform 0.2s ease"},children:l.jsx(Cp,{size:30})}),g&&o&&l.jsxs("div",{style:{position:"fixed",bottom:"20px",right:"20px",width:"360px",height:"480px",background:"#fff",borderRadius:"16px",boxShadow:"0 12px 30px rgba(0,0,0,0.25)",zIndex:2e3,display:"flex",flexDirection:"column",overflow:"hidden"},children:[l.jsxs("div",{style:{padding:"14px",borderBottom:"1px solid #eee",display:"flex",justifyContent:"space-between",alignItems:"center",background:"#fafafa"},children:[l.jsx("strong",{children:o.name}),l.jsxs("div",{style:{display:"flex",gap:"10px"},children:[l.jsx("button",{onClick:()=>{j(!1),ye("/all-chat",{state:{user:o,tab:"parent"}})},style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px"},children:""}),l.jsx("button",{onClick:()=>j(!1),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:""})]})]}),l.jsxs("div",{style:{flex:1,padding:"12px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"6px",background:"#f9f9f9"},children:[v.length===0?l.jsxs("p",{style:{textAlign:"center",color:"#aaa"},children:["Start chatting with ",o.name]}):v.map(L=>l.jsx("div",{style:{display:"flex",flexDirection:L.senderId===B?"row-reverse":"row",alignItems:"flex-end",marginBottom:10},children:l.jsx("div",{style:{maxWidth:"75%",display:"flex",flexDirection:"column",alignItems:L.senderId===B?"flex-end":"flex-start"},children:l.jsxs("div",{style:{background:L.senderId===B?"#4b6cb7":"#fff",color:L.senderId===B?"#fff":"#0f172a",padding:"10px 14px",borderRadius:18,boxShadow:"0 2px 6px rgba(0,0,0,0.04)",wordBreak:"break-word",position:"relative",paddingBottom:"26px"},children:[l.jsx("div",{children:L.text}),l.jsxs("div",{style:{position:"absolute",right:8,bottom:6,display:"flex",alignItems:"center",gap:6,fontSize:11,color:L.senderId===B?"rgba(255,255,255,0.9)":"#64748b"},children:[l.jsx("span",{style:{fontSize:11},children:_T(L.timeStamp)}),L.senderId===B&&l.jsx(uo,{size:12,color:L.seen?(L.seenAt,"#10b981"):L.seen?"#10b981":"#94a3b8"})]})]})})},L.messageId)),l.jsx("div",{ref:w})]}),l.jsxs("div",{style:{padding:"10px",borderTop:"1px solid #eee",display:"flex",gap:"8px",background:"#fff"},children:[l.jsx("input",{value:R,onChange:L=>b(L.target.value),placeholder:"Type a message...",style:{flex:1,padding:"10px 14px",borderRadius:"999px",border:"1px solid #ccc",outline:"none"},onKeyDown:L=>{L.key==="Enter"&&ce(R)}}),l.jsx("button",{onClick:()=>ce(R),style:{background:"linear-gradient(135deg, #3a65b4, #2c4fee, #458efc)",border:"none",borderRadius:"50%",width:"42px",height:"42px",color:"#fff",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px"},children:""})]})]})]}),l.jsx("style",{children:`
                  @media (max-width: 900px), (orientation: portrait) {
                    .parent-sidebar { width: 100vw !important; height: 100vh !important; left: 0 !important; top: 0 !important; border-radius: 0 !important; padding: 16px !important; }
                    .parent-sidebar-overlay { display: block !important; }
                    body.sidebar-open { overflow: hidden !important; }
                  }
                `})]})]})})]})]})}function bT(){const[t,e]=y.useState(localStorage.getItem("darkMode")==="true");return y.useEffect(()=>{t?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode"),localStorage.setItem("darkMode",t)},[t]),[t,()=>e(r=>!r)]}const ET="https://gojo-teacher-web.onrender.com/api",Rr="https://ethiostore-17d9f-default-rtdb.firebaseio.com";function CT(){const[t,e]=y.useState(null),[n,r]=y.useState("/default-profile.png"),[s,i]=y.useState(""),[o,c]=y.useState(""),[u,d]=y.useState(null),[f,p]=bT(),[g,j]=y.useState(""),[v,N]=y.useState(""),[R,b]=y.useState([]),[w,_]=y.useState(!1),P=Fn(),[H,X]=y.useState(!1),[C,x]=y.useState([]);y.useEffect(()=>{const $=JSON.parse(localStorage.getItem("teacher"));if(!$){P("/login");return}e($)},[P]),y.useEffect(()=>{t&&(r(t.profileImage||"/default-profile.png"),i(t.name||""),c(t.username||""),ye(t))},[t]);const E=$=>d($.target.files[0]),k=async()=>{if(!u)return alert("Select an image first.");try{const $=new FileReader;$.readAsDataURL(u),$.onloadend=async()=>{const ee=$.result;await Z.patch(`${Rr}/Users/${t.userId}.json`,{profileImage:ee});const B={...t,profileImage:ee};localStorage.setItem("teacher",JSON.stringify(B)),r(ee),d(null),alert("Profile image updated!")}}catch($){console.error("Error updating profile image:",$)}},T=async()=>{if(!s||!o)return alert("Name and Username required!");try{await Z.patch(`${Rr}/Users/${t.userId}.json`,{name:s,username:o});const $={...t,name:s,username:o};localStorage.setItem("teacher",JSON.stringify($)),e($),alert("Profile info updated!")}catch($){console.error("Error updating info:",$)}},A=async()=>{if(!g||!v)return alert("Fill both password fields.");if(g!==v)return alert("Passwords do not match!");try{await Z.patch(`${Rr}/Users/${t.userId}.json`,{password:g}),j(""),N(""),alert("Password updated successfully!")}catch($){console.error("Error updating password:",$)}},I=()=>{localStorage.removeItem("teacher"),P("/login")};y.useEffect(()=>{(async()=>{try{let B=(await Z.get(`${ET}/get_posts`)).data||[];!Array.isArray(B)&&typeof B=="object"&&(B=Object.values(B));const[ce,ve,we]=await Promise.all([Z.get(`${Rr}/School_Admins.json`),Z.get(`${Rr}/Users.json`),Z.get(`${Rr}/Chats.json`)]),he=ce.data||{},L=ve.data||{},de=we.data||{},M=JSON.parse(localStorage.getItem("teacher")),je=be(M==null?void 0:M.userId),Q=te=>{const ne=te.adminId||te.posterAdminId||te.poster||te.admin||null;if(ne&&he[ne]){const ae=he[ne],_e=ae.userId,O=L[_e]||null,F=O&&O.name||ae.name||te.adminName||"Admin",q=O&&O.profileImage||ae.profileImage||te.adminProfile||"/default-profile.png";return{name:F,profile:q}}return{name:te.adminName||"Admin",profile:te.adminProfile||"/default-profile.png"}},ge=B.slice().sort((te,ne)=>{const ae=te.time?new Date(te.time).getTime():0;return(ne.time?new Date(ne.time).getTime():0)-ae}).filter(te=>te.postId&&!je.includes(te.postId)).slice(0,5).map(te=>{var ae;const ne=Q(te);return{id:te.postId,type:"post",title:((ae=te.message)==null?void 0:ae.substring(0,50))||"Untitled post",adminName:ne.name,adminProfile:ne.profile}});let U=[];M&&M.userId&&Object.entries(de).forEach(([te,ne])=>{const _e=(ne.unread||{})[M.userId]||0;if(!_e)return;const O=ne.participants||{},F=Object.keys(O).find(re=>re!==M.userId);let q=L[F]||{userId:F,name:F,profileImage:"/default-profile.png"};U.push({chatId:te,type:"message",displayName:q.name||q.username||F,profile:q.profileImage||q.profile||"/default-profile.png",unreadForMe:_e})});const Y=[...ge,...U].slice(0,5);b(Y)}catch(ee){console.error("Error fetching notifications:",ee)}})()},[]);const J=async $=>{if(t){if($.type==="post"&&$.id)G(t.userId,$.id),b(ee=>ee.filter(B=>B.id!==$.id)),_(!1),P("/dashboard");else if($.type==="message"&&$.chatId){b(ee=>ee.filter(B=>B.chatId!==$.chatId)),_(!1);try{await Z.put(`${Rr}/Chats/${$.chatId}/unread/${t.userId}.json`,null)}catch{}P("/all-chat")}}};function be($){return JSON.parse(localStorage.getItem(`seen_posts_${$}`))||[]}function G($,ee){const B=be($);B.includes(ee)||localStorage.setItem(`seen_posts_${$}`,JSON.stringify([...B,ee]))}const ye=async($=t)=>{try{const ee=$||JSON.parse(localStorage.getItem("teacher"));if(!ee||!ee.userId){x([]);return}const[B,ce]=await Promise.all([Z.get(`${Rr}/Chats.json`),Z.get(`${Rr}/Users.json`)]),ve=B.data||{},he=ce.data||{}||{},L={};Object.entries(he).forEach(([M,je])=>{je&&je.userId&&(L[je.userId]=M)});const de=Object.entries(ve).map(([M,je])=>{const ge=(je.unread||{})[ee.userId]||0;if(!ge)return null;const U=je.participants||{},Y=Object.keys(U||{}).find(O=>O!==ee.userId);if(!Y)return null;let te=Y,ne=he[te];if(!ne){const O=L[Y];O&&(te=O,ne=he[O])}ne||(ne={userId:Y,name:Y,profileImage:"/default-profile.png"});const ae={pushKey:te,userId:ne.userId||Y,name:ne.name||ne.username||Y,profileImage:ne.profileImage||ne.profile||"/default-profile.png"},_e=je.lastMessage||{};return{chatId:M,contact:ae,displayName:ae.name,profile:ae.profileImage,lastMessageText:_e.text||"",lastMessageTime:_e.timeStamp||_e.time||null,unreadForMe:ge}}).filter(Boolean).sort((M,je)=>(je.lastMessageTime||0)-(M.lastMessageTime||0));x(de)}catch(ee){console.error("Error fetching conversations:",ee),x([])}},K=R.filter($=>$.type==="message").reduce(($,ee)=>$+(ee.unreadForMe||0),0);return l.jsxs("div",{className:"dashboard-page",children:[l.jsxs("nav",{className:"top-navbar",children:[l.jsx("h2",{children:"Gojo Dashboard"}),l.jsxs("div",{className:"nav-right",children:[l.jsxs("div",{className:"icon-circle",children:[l.jsxs("div",{onClick:()=>_(!w),style:{cursor:"pointer",position:"relative"},children:[l.jsx(Us,{size:24}),R.length>0&&l.jsx("span",{style:{position:"absolute",top:-5,right:-5,background:"red",color:"white",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:R.length})]}),w&&l.jsx("div",{style:{position:"absolute",top:30,right:0,width:300,maxHeight:400,overflowY:"auto",background:"#fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",borderRadius:8,zIndex:100},children:R.length>0?R.map(($,ee)=>$.type==="post"?l.jsxs("div",{onClick:()=>J($),style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[l.jsx("img",{src:$.adminProfile,alt:$.adminName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),l.jsxs("div",{children:[l.jsx("strong",{children:$.adminName}),l.jsx("p",{style:{margin:0,fontSize:12},children:$.title})]})]},$.id||ee):l.jsxs("div",{onClick:()=>J($),style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[l.jsx("img",{src:$.profile||"/default-profile.png",alt:$.displayName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),l.jsxs("div",{children:[l.jsx("strong",{children:$.displayName}),l.jsx("p",{style:{margin:0,fontSize:12,color:"#0b78f6"},children:"New message"})]})]},$.chatId||ee)):l.jsx("div",{style:{padding:15},children:"No notifications"})})]}),l.jsx("div",{className:"icon-circle",style:{position:"relative",marginLeft:12},children:l.jsxs("div",{onClick:()=>P("/all-chat"),style:{cursor:"pointer",position:"relative"},children:[l.jsx(Bs,{size:22}),K>0&&l.jsx("span",{style:{position:"absolute",top:-6,right:-6,background:"#f60b0b",color:"#fff",borderRadius:"50%",minWidth:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 5px"},children:K})]})}),l.jsx(xe,{className:"icon-circle",to:"/settings",children:l.jsx(jr,{})}),l.jsx("img",{src:(t==null?void 0:t.profileImage)||"/default-profile.png",alt:"teacher",className:"profile-img"})]})]}),l.jsxs("div",{className:"google-dashboard",children:[l.jsxs("div",{className:"google-sidebar",children:[t&&l.jsxs("div",{className:"sidebar-profile",children:[l.jsx("div",{className:"sidebar-img-circle",children:l.jsx("img",{src:t.profileImage||"/default-profile.png",alt:"profile"})}),l.jsx("h3",{children:t.name}),l.jsx("p",{children:t.username})]}),l.jsxs("div",{className:"sidebar-menu",children:[l.jsxs(xe,{className:"sidebar-btn",to:"/dashboard",children:[l.jsx(Xr,{})," Home"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/students",children:[l.jsx(Ke,{})," Students"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/admins",children:[l.jsx(Ke,{})," Admins"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/parents",children:[l.jsx(Jr,{})," Parents"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/marks",children:[l.jsx(Ir,{})," Marks"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/attendance",children:[l.jsx(Ke,{})," Attendance"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/schedule",children:[l.jsx(Ke,{})," Schedule"]}),l.jsxs("button",{className:"sidebar-btn logout-btn",onClick:I,children:[l.jsx(Zr,{})," Logout"]})]})]}),l.jsxs("div",{className:"main-content",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",marginTop:"10px",padding:"10px",width:"100%",gap:"30px"},children:[l.jsx("h2",{children:"Settings"}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"30px",borderRadius:"12px",background:f?"#3a3a3a":"#fff",boxShadow:"0 4px 10px rgba(0,0,0,0.1)"},children:[l.jsx("img",{src:n,alt:"profile",style:{width:"150px",height:"150px",borderRadius:"50%",objectFit:"cover",marginBottom:"15px",border:"3px solid #4b6cb7"}}),l.jsx("input",{type:"file",onChange:E}),l.jsx("button",{onClick:k,style:{marginTop:"15px",padding:"10px 20px",borderRadius:"8px",border:"none",background:"#4b6cb7",color:"#fff",cursor:"pointer"},children:"Update Profile Image"})]}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px",padding:"30px",borderRadius:"12px",background:f?"#3a3a3a":"#fff",boxShadow:"0 4px 10px rgba(0,0,0,0.1)"},children:[l.jsx("input",{type:"text",placeholder:"Name",value:s,onChange:$=>i($.target.value),style:{padding:"10px",borderRadius:"6px",border:"1px solid #ccc"}}),l.jsx("input",{type:"text",placeholder:"Username",value:o,onChange:$=>c($.target.value),style:{padding:"10px",borderRadius:"6px",border:"1px solid #ccc"}}),l.jsx("button",{onClick:T,style:{padding:"10px 20px",borderRadius:"8px",border:"none",background:"#4b6cb7",color:"#fff",cursor:"pointer"},children:"Update Info"})]}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px",padding:"30px",borderRadius:"12px",background:f?"#3a3a3a":"#fff",boxShadow:"0 4px 10px rgba(0,0,0,0.1)"},children:[l.jsx("input",{type:"password",placeholder:"New Password",value:g,onChange:$=>j($.target.value),style:{padding:"10px",borderRadius:"6px",border:"1px solid #ccc"}}),l.jsx("input",{type:"password",placeholder:"Confirm Password",value:v,onChange:$=>N($.target.value),style:{padding:"10px",borderRadius:"6px",border:"1px solid #ccc"}}),l.jsx("button",{onClick:A,style:{padding:"10px 20px",borderRadius:"8px",border:"none",background:"#4b6cb7",color:"#fff",cursor:"pointer"},children:"Change Password"})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px",padding:"20px",borderRadius:"12px",background:f?"#3a3a3a":"#fff",boxShadow:"0 4px 10px rgba(0,0,0,0.1)"},children:[l.jsx("label",{style:{fontSize:"18px",fontWeight:"500"},children:"Dark Mode"}),l.jsx("input",{type:"checkbox",checked:f,onChange:p})]})]})]})]})}const IT="https://gojo-teacher-web.onrender.com/api",ea="https://ethiostore-17d9f-default-rtdb.firebaseio.com";function jT(){const[t,e]=y.useState(window.innerWidth>600);y.useEffect(()=>{const B=()=>{window.innerWidth<=600?e(!1):e(!0)};return window.addEventListener("resize",B),B(),()=>window.removeEventListener("resize",B)},[]);const[n,r]=y.useState(null),[s,i]=y.useState({}),[o,c]=y.useState(!0),[u,d]=y.useState(""),[f,p]=y.useState("All"),[g,j]=y.useState("All"),[v,N]=y.useState([]),[R,b]=y.useState(!1),[w,_]=y.useState(null),[P,H]=y.useState(!0),[X,C]=y.useState([]);y.useRef({});const x=Fn(),E=["All","A","B","C","D"],k=["Monday","Tuesday","Wednesday","Thursday","Friday"],[T,A]=y.useState(typeof window<"u"?window.innerWidth<=900:!1);y.useEffect(()=>{const B=()=>A(window.innerWidth<=900);return window.addEventListener("resize",B),()=>window.removeEventListener("resize",B)},[]);const I=v.filter(B=>B.type==="message").reduce((B,ce)=>B+(ce.unreadForMe||0),0);y.useEffect(()=>{const B=JSON.parse(localStorage.getItem("teacher"));if(!B){x("/login");return}r(B)},[x]),y.useEffect(()=>{if(!n)return;async function B(){c(!0);try{const ce=await Z.get(`${ea}/Schedules.json`);i(ce.data||{}),d("")}catch{d("Failed to load schedule.")}finally{c(!1)}}B()},[n]);const J=()=>{localStorage.removeItem("teacher"),x("/login")},G=(()=>{if(!n||!s)return{};const B={};return Object.entries(s).forEach(([ce,ve])=>{Object.entries(ve||{}).forEach(([we,he])=>{Object.entries(he||{}).forEach(([L,de])=>{var M;de!=null&&de.teacherName&&de.teacherName===n.name&&(B[ce]||(B[ce]={}),B[ce][L]||(B[ce][L]=[]),B[ce][L].push({class:we,subject:de.subject||"-",time:de.time||((M=L.match(/\((.*?)\)/))==null?void 0:M[1])||"N/A"}))})})}),B})();function ye(B){return JSON.parse(localStorage.getItem(`seen_posts_${B}`))||[]}function K(B,ce){const ve=ye(B);ve.includes(ce)||localStorage.setItem(`seen_posts_${B}`,JSON.stringify([...ve,ce]))}y.useEffect(()=>{(async()=>{try{let ve=(await Z.get(`${IT}/get_posts`)).data||[];!Array.isArray(ve)&&typeof ve=="object"&&(ve=Object.values(ve));const[we,he,L]=await Promise.all([Z.get(`${ea}/School_Admins.json`),Z.get(`${ea}/Users.json`),Z.get(`${ea}/Chats.json`)]),de=we.data||{},M=he.data||{},je=L.data||{},Q=JSON.parse(localStorage.getItem("teacher")),ge=ne=>{const ae=ne.adminId||ne.posterAdminId||ne.poster||ne.admin||null;if(ae&&de[ae]){const _e=de[ae],O=_e.userId,F=M[O]||null,q=F&&F.name||_e.name||ne.adminName||"Admin",re=F&&F.profileImage||_e.profileImage||ne.adminProfile||"/default-profile.png";return{name:q,profile:re}}return{name:ne.adminName||"Admin",profile:ne.adminProfile||"/default-profile.png"}},U=ve.slice().sort((ne,ae)=>{const _e=ne.time?new Date(ne.time).getTime():0;return(ae.time?new Date(ae.time).getTime():0)-_e}).filter(ne=>ne.postId).slice(0,5).map(ne=>{var _e;const ae=ge(ne);return{id:ne.postId,type:"post",title:((_e=ne.message)==null?void 0:_e.substring(0,50))||"Untitled post",adminName:ae.name,adminProfile:ae.profile,time:ne.time?new Date(ne.time).getTime():0}});let Y=[];Q&&Q.userId&&Object.entries(je).forEach(([ne,ae])=>{var pe;const O=(ae.unread||{})[Q.userId]||0;if(!O)return;const F=ae.participants||{},q=Object.keys(F).find(Ee=>Ee!==Q.userId);let re=M[q]||{userId:q,name:q,profileImage:"/default-profile.png"};Y.push({chatId:ne,type:"message",displayName:re.name||re.username||q,profile:re.profileImage||re.profile||"/default-profile.png",unreadForMe:O,time:(pe=ae.lastMessage)!=null&&pe.timeStamp?new Date(ae.lastMessage.timeStamp).getTime():0})});const te=[...U,...Y].sort((ne,ae)=>(ae.time||0)-(ne.time||0)).slice(0,5);N(te)}catch{}})()},[]);const $=async B=>{if(n){if(B.type==="post"&&B.id)K(n.userId,B.id),N(ce=>ce.filter(ve=>ve.id!==B.id)),b(!1),x("/dashboard");else if(B.type==="message"&&B.chatId){N(ce=>ce.filter(ve=>ve.chatId!==B.chatId)),b(!1);try{await Z.put(`${ea}/Chats/${B.chatId}/unread/${n.userId}.json`,null)}catch{}x("/all-chat")}}};return l.jsxs("div",{className:"gojo-root-dashboard",children:[l.jsx("style",{children:`
    body, html, #root { height: 100%; margin: 0; }
    .gojo-root-dashboard {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      background: #f0f4f8;
      overflow: hidden;
    }
    .top-navbar {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      z-index: 1000;
      background: #fff;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 24px;
      height: 60px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.07);
    }
    .google-sidebar {
      position: fixed;
      top: 60px;
      left: 0;
      width: 220px;
      height: calc(100vh - 60px);
      background: #fff;
      box-shadow: 2px 0 8px rgba(0,0,0,0.04);
      z-index: 900;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-top: 18px;
      overflow-y: auto;
      transition: width 0.2s;
      min-width: 48px;
    }
    .main-area-row {
      display: flex;
      flex: 1;
      flex-direction: row;
      height: 100vh;
      margin-top: 60px;
      width: 100%;
      min-width: 0;
    }
    .schedule-main {
      flex: 1;
      margin-left: 220px;
      padding: 30px;
      background: #f0f4f8;
      min-height: calc(100vh - 60px);
      overflow-y: auto;
      transition: margin-left 0.2s;
      position: relative;
      z-index: 20;
    }
    .right-sidebar {
      position: fixed;
      top: 60px;
      right: 0;
      width: 420px;
      height: calc(100vh - 60px);
      z-index: 300;
      background: #fff;
      box-shadow: 0 0 20px rgba(0,0,0,0.07);
      display: flex;
      flex-direction: column;
      transition: right 0.2s, left 0.2s, width 0.2s;
    }
    .close-sidebar-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      background: linear-gradient(90deg, #2563eb, #3b82f6);
      color: #fff;
      border: none;
      border-radius: 50%;
      width: 36px;
      height: 36px;
      font-size: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
      z-index: 10;
      cursor: pointer;
    }
    @media (max-width: 900px) {
      .google-sidebar { width: 60px; min-width: 60px; }
      .schedule-main { margin-left: 60px; padding: 17px 2vw; }
      .right-sidebar { width: 100vw; left: 0; right: initial; }
    }
    @media (max-width: 600px) {
      .top-navbar { height: 54px; padding: 0 7px; }
      .google-sidebar {
        top: 54px;
        width: 48px;
        min-width: 48px;
        padding: 0;
        align-items: flex-start;
      }
      .main-area-row { margin-top: 54px; }
      .schedule-main { margin-left: 48px; padding: 8px 2vw; border-radius: 7px; }
      .right-sidebar { left: 0; right: initial; width: 100vw; height: calc(100vh - 54px); }
      .close-sidebar-btn {
        top: 8px !important;
        right: 8px !important;
        width: 44px !important;
        height: 44px !important;
        font-size: 22px !important;
      }
    }
  `}),l.jsxs("nav",{className:"top-navbar",children:[l.jsx("h2",{children:"Gojo Dashboard"}),l.jsxs("div",{className:"nav-right",style:{display:"flex",alignItems:"center",gap:16},children:[l.jsxs("div",{className:"icon-circle",style:{position:"relative"},children:[l.jsxs("div",{onClick:()=>b(!R),style:{cursor:"pointer",position:"relative"},children:[l.jsx(Us,{size:24}),v.length>0&&l.jsx("span",{style:{position:"absolute",top:-5,right:-5,background:"red",color:"white",borderRadius:"50%",width:18,height:18,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:v.length})]}),R&&l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.08)",zIndex:1999},onClick:()=>b(!1)}),l.jsx("div",{className:"notification-popup",style:typeof window<"u"&&window.innerWidth<=600?{position:"fixed",left:"50%",top:"8%",transform:"translate(-50%, 0)",width:"90vw",maxWidth:340,zIndex:2e3,background:"#fff",borderRadius:12,boxShadow:"0 2px 16px rgba(0,0,0,0.18)",maxHeight:"70vh",overflowY:"auto",padding:12}:{position:"absolute",top:28,right:0,width:300,maxHeight:400,overflowY:"auto",background:"#fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",borderRadius:8,zIndex:100},children:v.length?v.map((B,ce)=>l.jsxs("div",{onClick:()=>$(B.id),style:{display:"flex",alignItems:"center",padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer"},children:[l.jsx("img",{src:B.adminProfile,alt:B.adminName,style:{width:35,height:35,borderRadius:"50%",marginRight:10}}),l.jsxs("div",{children:[l.jsx("strong",{children:B.adminName}),l.jsx("p",{style:{margin:0,fontSize:12},children:B.title})]})]},B.id||ce)):l.jsx("div",{style:{padding:15},children:"No notifications"})})]})]}),l.jsx("div",{className:"icon-circle",style:{position:"relative",marginLeft:12},children:l.jsxs("div",{onClick:()=>x("/all-chat"),style:{cursor:"pointer",position:"relative"},children:[l.jsx(Bs,{size:22}),I>0&&l.jsx("span",{style:{position:"absolute",top:-6,right:-6,background:"#ff0000",color:"#fff",borderRadius:"50%",minWidth:18,height:18,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 6px",fontSize:12},children:I})]})}),l.jsxs("div",{className:"icon-circle",onClick:()=>x("/settings"),children:[" ",l.jsx(jr,{})," "]}),l.jsx("img",{src:(n==null?void 0:n.profileImage)||"/default-profile.png",alt:"profile",style:{width:36,height:36,borderRadius:"50%"}})]})]}),l.jsxs("div",{className:"main-area-row",children:[typeof window<"u"&&window.innerWidth<=600&&!t&&l.jsx("button",{className:"sidebar-arrow-btn",style:{position:"fixed",left:0,top:180,transform:"none",zIndex:1300,background:"#fff",border:"none",borderRadius:"0 8px 8px 0",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",padding:8,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:()=>e(!0),"aria-label":"Open sidebar menu",children:l.jsx(Rs,{size:22})}),typeof window<"u"&&window.innerWidth<=600&&t&&l.jsx("div",{className:"sidebar-overlay visible",onClick:()=>e(!1),style:{display:"block",position:"fixed",inset:0,background:"rgba(0,0,0,0.35)",zIndex:1200}}),l.jsxs("div",{className:`google-sidebar${typeof window<"u"&&window.innerWidth<=600&&t?" open":""}`,style:typeof window<"u"&&window.innerWidth<=600?{position:"fixed",top:64,left:t?0:"-220px",width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.12)",zIndex:1200,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto",transition:"left 0.25s cubic-bezier(.4,0,.2,1)"}:{position:"fixed",top:64,left:0,width:200,height:"calc(100vh - 64px)",background:"#fff",boxShadow:"2px 0 8px rgba(0,0,0,0.04)",zIndex:900,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:18,overflowY:"auto"},children:[n&&l.jsxs("div",{className:"sidebar-profile",children:[l.jsx("div",{className:"sidebar-img-circle",children:l.jsx("img",{src:n.profileImage||"/default-profile.png",alt:"profile",style:{width:"100%",height:"100%",objectFit:"cover",border:"none",boxShadow:"none"}})}),l.jsx("h3",{children:n.name}),l.jsx("p",{children:n.username})]}),l.jsxs("div",{className:"sidebar-menu",style:{display:"flex",flexDirection:"column",gap:8,width:"100%"},children:[l.jsxs(xe,{className:"sidebar-btn",to:"/dashboard",children:[l.jsx(Xr,{})," Home"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/students",children:[l.jsx(Ke,{})," Students"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/admins",children:[l.jsx(Ke,{})," Admins"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/parents",children:[l.jsx(Jr,{})," Parents"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/marks",children:[l.jsx(Ir,{})," Marks"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/attendance",children:[l.jsx(Ke,{})," Attendance"]}),l.jsxs(xe,{className:"sidebar-btn",to:"/schedule",style:{backgroundColor:"#4b6cb7",color:"#fff"},children:[l.jsx(Ke,{})," Schedule"]}),l.jsxs("button",{className:"sidebar-btn logout-btn",onClick:J,children:[l.jsx(Zr,{})," Logout"]})]})]}),l.jsx("div",{className:"schedule-main",children:l.jsxs("div",{className:"schedule-container",style:{width:"100%",maxWidth:900,margin:"0 auto",marginLeft:"150px"},children:[l.jsxs("div",{style:{display:"flex",gap:"20px",marginBottom:"25px",justifyContent:"center",flexWrap:"wrap"},children:[l.jsxs("div",{children:[l.jsx("label",{style:{marginRight:"8px",fontWeight:"600"},children:"Grade:"}),l.jsxs("select",{value:f,onChange:B=>p(B.target.value),style:{padding:"8px 12px",borderRadius:"8px",border:"1px solid #ccc",cursor:"pointer"},children:[l.jsx("option",{value:"All",children:"All"}),l.jsx("option",{value:"9",children:"9"}),l.jsx("option",{value:"10",children:"10"}),l.jsx("option",{value:"12",children:"12"})]})]}),l.jsxs("div",{children:[l.jsx("label",{style:{marginRight:"8px",fontWeight:"600"},children:"Section:"}),l.jsxs("select",{value:g,onChange:B=>j(B.target.value),style:{padding:"8px 12px",borderRadius:"8px",border:"1px solid #ccc",cursor:"pointer"},children:[l.jsx("option",{value:"All",children:"All"}),E.filter(B=>B!=="All").map(B=>l.jsx("option",{value:B,children:B},B))]})]})]}),l.jsx("h2",{style:{textAlign:"center",marginBottom:"30px",color:"#2563eb"},children:"Full Schedule"}),o&&l.jsx("p",{style:{textAlign:"center"},children:"Loading schedule..."}),u&&l.jsx("p",{style:{color:"red",textAlign:"center"},children:u}),!o&&k.map(B=>{const ce=s[B];return ce?l.jsxs("div",{style:{marginBottom:"40px"},children:[l.jsx("h3",{style:{color:"#1c03ffff",marginBottom:"15px"},children:B}),Object.entries(ce).filter(([ve])=>f==="All"||ve.includes(f)).map(([ve,we])=>{const he=ve.slice(-1);return g!=="All"&&he!==g?null:l.jsxs("div",{style:{marginBottom:"18px"},children:[l.jsx("h4",{style:{color:"#4603fcff",marginBottom:"10px"},children:ve}),l.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",background:"#fff",borderRadius:"12px",overflow:"hidden",boxShadow:"0 8px 20px rgba(0,0,0,0.1)"},children:[l.jsx("thead",{style:{background:"#2563eb",color:"#fff"},children:l.jsxs("tr",{children:[l.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Period"}),l.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Subject"}),l.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Time"}),l.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Teacher"})]})}),l.jsx("tbody",{children:Object.entries(we).map(([L,de],M)=>{var ge;const je=(de==null?void 0:de.teacherName)===(n==null?void 0:n.name),Q=de.time||((ge=L.match(/\((.*?)\)/))==null?void 0:ge[1])||"N/A";return l.jsxs("tr",{style:{borderBottom:"1px solid #eee",backgroundColor:je?"#dbeafe":"#f3f4f6",color:je?"#1e40af":"#6b7280",fontWeight:je?"700":"400",borderLeft:je?"4px solid #2563eb":"none",opacity:je?1:.85},children:[l.jsx("td",{style:{padding:"12px"},children:L}),l.jsx("td",{style:{padding:"12px"},children:de.subject||"-"}),l.jsx("td",{style:{padding:"12px"},children:Q}),l.jsx("td",{style:{padding:"12px"},children:de.teacherName||"-"})]},M)})})]})]},ve)})]},B):null})]})}),P&&l.jsxs("div",{className:"right-sidebar",children:[l.jsx("button",{title:"Close sidebar",onClick:()=>H(!1),className:"close-sidebar-btn",style:{marginRight:"40px"},children:l.jsx(Rs,{})}),l.jsx("div",{style:{display:"flex",alignItems:"center",background:"linear-gradient(90deg, #2563eb, #3b82f6)",color:"#fff",padding:"12px 48px 12px 20px",textAlign:"center",fontWeight:"600",fontSize:"1.2rem",boxShadow:"0 2px 6px rgba(0,0,0,0.1)",borderTopLeftRadius:"1px",borderTopRightRadius:"1px",justifyContent:"flex-start"},children:"My Schedule"}),l.jsx("div",{style:{padding:"20px",height:"calc(100% - 60px)",overflowY:"auto",background:"#f9fafb"},children:o?l.jsx("p",{style:{textAlign:"center",color:"#6b7280"},children:"Loading schedule..."}):Object.keys(G).length===0?l.jsx("p",{style:{textAlign:"center",color:"#6b7280"},children:"No schedule found."}):k.map(B=>{const ce=G[B];if(!ce)return null;const we=new Date().toLocaleDateString("en-US",{weekday:"long"})===B;return l.jsxs("div",{style:{marginBottom:"20px",padding:"10px",borderRadius:"12px",background:we?"#e0f2fe":"#fff",boxShadow:we?"0 4px 12px rgba(59, 130, 246, 0.2)":"0 2px 6px rgba(0,0,0,0.05)"},children:[l.jsx("h4",{style:{color:"#1e3a8a",marginBottom:"12px",fontWeight:"600",fontSize:"1.05rem",borderBottom:"1px solid #e5e7eb",paddingBottom:"5px"},children:B}),Object.entries(ce).map(([he,L])=>l.jsxs("div",{style:{marginBottom:"12px",background:"#f3f4f6",padding:"12px 15px",borderRadius:"10px",borderLeft:"5px solid #2563eb",boxShadow:"0 1px 3px rgba(0,0,0,0.05)",transition:"transform 0.2s, box-shadow 0.2s"},children:[l.jsx("strong",{style:{display:"block",marginBottom:"6px",color:"#1e3a8a",fontSize:"0.98rem"},children:he}),l.jsx("ul",{style:{paddingLeft:"18px",margin:0},children:L.map((de,M)=>l.jsxs("li",{style:{marginBottom:"6px",color:"#374151",fontSize:"0.95rem"},children:[l.jsx("span",{style:{fontWeight:"600",color:"#2563eb"},children:de.class})," - ",de.subject," (",de.time,")"]},M))})]},he))]},B)})})]}),!P&&l.jsx("button",{title:"Open sidebar",onClick:()=>H(!0),style:{position:"fixed",top:"80px",right:"20px",width:"35px",height:"40px",background:"linear-gradient(90deg, #2563eb, #3b82f6)",color:"#fff",border:"none",borderRadius:"20px",boxShadow:"0 4px 12px rgba(59,130,246, 0.15)",zIndex:301,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"right 0.3s"},children:l.jsx(S4,{})})]})]})}const oc=(t,e)=>[String(t),String(e)].sort().join("_");function kT(){const t=Fn(),e=zs(),n=y.useRef(null),r=JSON.parse(localStorage.getItem("teacher"))||{},s=String(r.userId||""),[i,o]=y.useState([]),[c,u]=y.useState([]),[d,f]=y.useState([]),[p,g]=y.useState([]),[j,v]=y.useState(""),[N,R]=y.useState(!0),[b,w]=y.useState({}),[_,P]=y.useState(!1),[H,X]=y.useState({}),C=e.state||{},x=C.contact||C.user||null,E=C.chatId||null,k=C.tab||null,[T,A]=y.useState(k||"student"),[I,J]=y.useState(x||null),[be,G]=y.useState(E||null),[ye,K]=y.useState(null),[$,ee]=y.useState({}),[B,ce]=y.useState({}),ve=(U={})=>U.profileImage||U.profile||U.avatar||"/default-profile.png";y.useEffect(()=>{(async()=>{try{const[Y,te,ne,ae]=await Promise.all([fetch("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Students.json").then(re=>re.json()),fetch("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Parents.json").then(re=>re.json()),fetch("https://ethiostore-17d9f-default-rtdb.firebaseio.com/School_Admins.json").then(re=>re.json()),fetch("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Users.json").then(re=>re.json())]),_e=ae||{},O=Object.values(Y||{}).map(re=>{const pe=_e[re.userId]||{};return{userId:re.userId,name:pe.name||re.name||"Student",profileImage:ve(pe)}}),F=Object.values(te||{}).map(re=>{const pe=_e[re.userId]||{};return{userId:re.userId,name:pe.name||re.name||"Parent",profileImage:ve(pe)}}),q=Object.values(ne||{}).map(re=>{const pe=_e[re.userId]||{};return{userId:re.userId,name:re.name||pe.name||"Admin",profileImage:ve(pe)}});o(O),u(F),f(q)}catch(Y){console.error(" Fetch error:",Y)}})()},[]),y.useEffect(()=>{if(!s)return;const U=[...i,...c,...d],Y=[];return U.forEach(te=>{if(!te||!te.userId)return;const ne=oc(s,te.userId);try{const ae=zt(Vt,`Chats/${ne}/unread/${s}`),_e=eo(ae,O=>{const F=O.val();X(q=>({...q,[te.userId]:Number(F)||0}))});Y.push(_e)}catch{}}),()=>{Y.forEach(te=>te())}},[i,c,d,s]),y.useEffect(()=>{const U=()=>{const Y=typeof window<"u"&&window.innerWidth<640;P(Y),Y&&R(!1)};return U(),window.addEventListener("resize",U),()=>window.removeEventListener("resize",U)},[]),y.useEffect(()=>{x&&J(x),E&&G(E),k&&A(k)},[x,E,k]),y.useEffect(()=>{I||(T==="student"&&i.length&&J(i[0]),T==="parent"&&c.length&&J(c[0]),T==="admin"&&d.length&&J(d[0]))},[T,i,c,d,I]),y.useEffect(()=>{const U=x;if(U){if(T==="student"&&i.length){const Y=i.find(te=>te.userId===U.userId);Y&&J(Y)}if(T==="parent"&&c.length){const Y=c.find(te=>te.userId===U.userId);Y&&J(Y)}if(T==="admin"&&d.length){const Y=d.find(te=>te.userId===U.userId);Y&&J(Y)}}},[i,c,d,x,T]),y.useEffect(()=>{if(!I||!s)return;const U=be||oc(s,I.userId);G(U);const Y=zt(Vt,`Chats/${U}/messages`),te=eo(Y,ne=>{const ae=ne.val()||{},_e=Object.entries(ae).filter(([O,F])=>!F.deleted).map(([O,F])=>({id:O,...F,isTeacher:F.senderId===s})).sort((O,F)=>O.timeStamp-F.timeStamp);g(_e),Object.entries(ae).forEach(([O,F])=>{F&&!F.seen&&F.receiverId===s&&Pr(zt(Vt,`Chats/${U}/messages/${O}`),{seen:!0}).catch(console.error)}),Pr(zt(Vt,`Chats/${U}/unread`),{[s]:0}).catch(console.error)});return()=>te()},[I,s,be]),y.useEffect(()=>{try{const U=zt(Vt,"Presence"),Y=eo(U,te=>{const ne=te.val()||{};w(ne)});return()=>Y()}catch(U){console.warn("Presence listener unavailable:",U)}},[]);const we=async()=>{if(!j.trim()||!I)return;const U=Object.keys($).find(te=>$[te]),Y=be||oc(s,I.userId);if(U)await Pr(zt(Vt,`Chats/${Y}/messages/${U}`),{text:j,edited:!0}),ee({}),K(null),v("");else{const te=zt(Vt,`Chats/${Y}/messages`),ne={senderId:s,receiverId:I.userId,type:"text",text:j,seen:!1,edited:!1,deleted:!1,timeStamp:Date.now()};await h6(te,ne),await Pr(zt(Vt,`Chats/${Y}/participants`),{[s]:!0,[I.userId]:!0}),await Pr(zt(Vt,`Chats/${Y}/lastMessage`),{text:j,senderId:s,seen:!1,timeStamp:ne.timeStamp});try{const ae=zt(Vt,`Chats/${Y}/unread/${I.userId}`);await Pr(zt(Vt,`Chats/${Y}/unread`),{[s]:0,[I.userId]:1})}catch{}v("")}},he=U=>{const Y=be||oc(s,I.userId);Pr(zt(Vt,`Chats/${Y}/messages/${U}`),{deleted:!0}).catch(console.error)},L=(U,Y)=>{ee({[U]:!0}),v(Y),K(U)},de=U=>{const Y=new Date(U);return`${Y.getHours().toString().padStart(2,"0")}:${Y.getMinutes().toString().padStart(2,"0")}`},M=U=>{if(!U)return"";const Y=new Date(Number(U)),te=new Date,ne=new Date(te.getFullYear(),te.getMonth(),te.getDate()),ae=new Date(Y.getFullYear(),Y.getMonth(),Y.getDate()),_e=ne-ae,O=Math.floor(_e/(24*60*60*1e3));return O===0?"Today":O===1?"Yesterday":O>1&&O<7?`${O} days ago`:Y.toLocaleDateString()};y.useEffect(()=>{var U;(U=n.current)==null||U.scrollIntoView({behavior:"smooth"})},[p]);const je=T==="student"?i:T==="parent"?c:d,Q=U=>{if(!U)return!1;const te=(()=>{if((b==null?void 0:b[U])!==void 0)return b[U];const ne=String(U);if((b==null?void 0:b[ne])!==void 0)return b[ne];const ae=Number(U);if(!Number.isNaN(ae)&&(b==null?void 0:b[ae])!==void 0)return b[ae];for(const[,_e]of Object.entries(b||{}))try{if(_e&&(_e.userId===U||String(_e.userId)===ne))return _e}catch{}})();if(te==null)return!1;if(typeof te=="boolean")return te===!0;if(typeof te=="object"){if(te.state==="online"||te.online===!0)return!0;if(te.lastSeen){const ne=Number(te.lastSeen)||0;return Date.now()-ne<6e4}if(typeof te=="number")return Date.now()-te<6e4}return!1},ge=U=>{const Y=b==null?void 0:b[U];if(!Y)return null;let te=null;if((typeof Y=="number"||/^[0-9]+$/.test(String(Y)))&&(te=Number(Y)),typeof Y=="object"&&(te=Y.lastSeen||Y.timestamp||Y.lastActive||Y.last_seen||Y.time||null),!te)return null;const ne=Date.now()-Number(te),ae=Math.floor(ne/1e3);if(ae<60)return"last seen just now";const _e=Math.floor(ae/60);if(_e<60)return`last seen ${_e}m ago`;const O=Math.floor(_e/60);if(O<24)return`last seen ${O}h ago`;const F=Math.floor(O/24);return F<7?`last seen ${F}d ago`:`last seen on ${new Date(te).toLocaleDateString()}`};return l.jsxs("div",{style:{display:"flex",height:"100vh",background:"#eef2f7",fontFamily:"sans-serif"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"stretch"},children:[l.jsxs("div",{style:{width:N?_?220:280:0,background:"#fff",padding:N?16:0,boxShadow:N?"2px 0 10px rgba(0,0,0,0.1)":"none",display:N?"flex":"none",flexDirection:"column",transition:"width 180ms ease"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[l.jsx("button",{onClick:()=>t(-1),style:{border:"none",background:"none",padding:4,cursor:"pointer"},children:l.jsx(_4,{size:18})}),l.jsx("div",{style:{display:"flex",gap:6,margin:"12px 0",alignItems:"center"},children:["student","parent","admin"].map(U=>l.jsx("button",{onClick:()=>{A(U),J(null),G(null)},style:{flex:1,padding:8,borderRadius:20,border:"none",background:T===U?"#4facfe":"#ddd",color:T===U?"#fff":"#000",cursor:"pointer",fontSize:14},children:U.charAt(0).toUpperCase()+U.slice(1)}))})]}),l.jsx("div",{style:{marginTop:8,overflowY:"auto",flex:1},children:je.map(U=>l.jsxs("div",{onClick:()=>{J(U),G(null)},style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:10,padding:10,borderRadius:14,cursor:"pointer",marginBottom:8,background:(I==null?void 0:I.userId)===U.userId?"#dbeafe":"#f9fafb",boxShadow:(I==null?void 0:I.userId)===U.userId?"0 2px 10px rgba(0,0,0,0.1)":"none"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[l.jsxs("div",{style:{position:"relative"},children:[l.jsx("img",{src:U.profileImage,alt:U.name,onError:Y=>Y.target.src="/default-profile.png",style:{width:_?36:40,height:_?36:40,borderRadius:"50%",objectFit:"cover"}}),l.jsx("span",{style:{position:"absolute",right:-2,bottom:-2,width:12,height:12,borderRadius:12,border:"2px solid #fff",background:Q(U.userId)?"#34D399":"#cbd5e1"}})]}),l.jsx("span",{style:{fontWeight:500,marginLeft:0},children:U.name})]}),H[U.userId]>0?l.jsx("div",{style:{minWidth:26,height:26,display:"flex",alignItems:"center",justifyContent:"center",background:"#ef4444",color:"#fff",borderRadius:14,padding:"0 6px",fontSize:12,fontWeight:600},children:H[U.userId]>99?"99+":H[U.userId]}):l.jsx("div",{style:{width:26}})]},U.userId))})]}),l.jsx("div",{style:{width:28,display:"flex",alignItems:"flex-start",justifyContent:"center"},children:l.jsx("button",{onClick:()=>R(U=>!U),style:{border:"none",background:"#fff",borderRadius:4,padding:4,boxShadow:"0 1px 4px rgba(0,0,0,0.08)",cursor:"pointer",marginTop:8},"aria-label":"Toggle sidebar",children:N?"":""})})]}),l.jsx("div",{style:{flex:1,padding:16,display:"flex",flexDirection:"column"},children:I?l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:"12px 0",borderBottom:"1px solid #ccc",boxShadow:"0 2px 6px rgba(0,0,0,0.05)",background:"#fff",borderRadius:8,marginBottom:8},children:[l.jsx("img",{src:I.profileImage,alt:I.name,onError:U=>U.target.src="/default-profile.png",style:{width:_?40:50,height:_?40:50,borderRadius:"50%",objectFit:"cover"}}),l.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[l.jsx("span",{style:{fontWeight:600,fontSize:16},children:I.name}),l.jsx("span",{style:{fontSize:12,color:Q(I.userId)?"#16A34A":"#666"},children:Q(I.userId)?"Online":ge(I.userId)||T.charAt(0).toUpperCase()+T.slice(1)})]})]}),l.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"12px 16px",display:"flex",flexDirection:"column"},children:[p.map(U=>{const Y=U.isTeacher,te=!!$[U.id],ne=ye===U.id;return l.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:Y?"flex-end":"flex-start",marginBottom:10},children:[l.jsxs("div",{onClick:()=>K(U.id),style:{maxWidth:_?"85%":"70%",background:Y?"#4facfe":"#fff",color:Y?"#fff":"#000",padding:"10px 14px",borderRadius:18,borderTopRightRadius:Y?0:18,borderTopLeftRadius:Y?18:0,boxShadow:"0 1px 3px rgba(0,0,0,0.1)",wordBreak:"break-word",cursor:"pointer",position:"relative"},children:[U.text," ",U.edited&&l.jsx("small",{style:{fontSize:10},children:" (edited)"}),l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:6,marginTop:4,fontSize:11,color:Y?"#fff":"#888"},children:[l.jsx("span",{style:{marginRight:6,fontSize:11,opacity:.9},children:M(U.timeStamp)}),l.jsx("span",{children:de(U.timeStamp)}),Y&&!U.deleted&&l.jsxs("span",{style:{display:"flex",gap:0},children:[l.jsx(uo,{size:10,color:"#fff",style:{opacity:.8}}),U.seen&&l.jsx(uo,{size:10,color:"#f3f7f8",style:{marginLeft:2,opacity:.95}})]})]})]}),ne&&Y&&!U.deleted&&!te&&l.jsxs("div",{style:{display:"flex",gap:6,marginTop:4,fontSize:12,justifyContent:Y?"flex-end":"flex-start"},children:[l.jsx("button",{onClick:()=>L(U.id,U.text),style:{padding:"2px 6px",borderRadius:4,border:"1px solid #ccc",cursor:"pointer",background:"#f1f1f1"},children:"Edit"}),l.jsx("button",{onClick:()=>he(U.id),style:{padding:"2px 6px",borderRadius:4,border:"1px solid #ccc",cursor:"pointer",background:"#f1f1f1",color:"red"},children:"Delete"})]})]},U.id)}),l.jsx("div",{ref:n})]}),l.jsxs("div",{style:{display:"flex",gap:8,marginTop:8},children:[l.jsx("input",{value:j,onChange:U=>v(U.target.value),onKeyDown:U=>U.key==="Enter"&&we(),placeholder:"Type a message...",style:{flex:1,padding:_?10:12,borderRadius:25,border:"1px solid #ccc",outline:"none"}}),l.jsx("button",{onClick:we,style:{width:_?40:45,height:_?40:45,borderRadius:"50%",background:"#4facfe",border:"none",color:"#fff",display:"flex",justifyContent:"center",alignItems:"center"},children:l.jsx(Dv,{})})]})]}):l.jsx("h3",{style:{textAlign:"center",marginTop:50},children:"Select a user to start chatting "})})]})}function TT(){return l.jsx(IE,{basename:"/Gojo-Teacher-Web",children:l.jsxs(rE,{children:[l.jsx(hn,{path:"/",element:l.jsx(zd,{})}),l.jsx(hn,{path:"/login",element:l.jsx(zd,{})}),l.jsx(hn,{path:"/register",element:l.jsx(f4,{})}),l.jsx(hn,{path:"/dashboard",element:l.jsx(sT,{})}),l.jsx(hn,{path:"/students",element:l.jsx(uT,{})}),l.jsx(hn,{path:"/admins",element:l.jsx(yT,{})}),l.jsx(hn,{path:"/marks",element:l.jsx(hT,{})}),l.jsx(hn,{path:"/attendance",element:l.jsx(fT,{})}),l.jsx(hn,{path:"/notes",element:l.jsx(vT,{})})," ",l.jsx(hn,{path:"/parents",element:l.jsx(ST,{})}),l.jsx(hn,{path:"/settings",element:l.jsx(CT,{})}),l.jsx(hn,{path:"all-chat",element:l.jsx(kT,{})}),l.jsx(hn,{path:"schedule",element:l.jsx(jT,{})}),l.jsx(hn,{path:"*",element:l.jsx(zd,{})})]})})}const NT=y.createContext(),RT=({children:t})=>{const[e,n]=y.useState("light");y.useEffect(()=>{const s=localStorage.getItem("theme");s&&n(s)},[]),y.useEffect(()=>{document.body.className=e==="dark"?"dark-mode":"",localStorage.setItem("theme",e)},[e]);const r=()=>{n(s=>s==="light"?"dark":"light")};return l.jsx(NT.Provider,{value:{theme:e,toggleTheme:r},children:t})};function AT(){return l.jsx(RT,{children:l.jsx(TT,{})})}nh.createRoot(document.getElementById("root")).render(l.jsx(mn.StrictMode,{children:l.jsx(AT,{})}));
